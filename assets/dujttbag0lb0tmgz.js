const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kaxn2bizrxslkpa3.js","assets/i8clt0mfz495j7ii.js"])))=>i.map(i=>d[i]);
var E=Object.defineProperty;var g=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var p=(s,t,e)=>t in s?E(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,y=(s,t)=>{for(var e in t||(t={}))P.call(t,e)&&p(s,e,t[e]);if(g)for(var e of g(t))N.call(t,e)&&p(s,e,t[e]);return s};import{e as T,r as f,u as w,j as o,M as k,_ as B}from"./i8clt0mfz495j7ii.js";import{e as O,ek as S,M as m,gf as A,C as L,d as F,T as q,o as G,e$ as H,L as Q}from"./ghewn7l2ynbm32fm.js";import{bA as R,bB as h,ai as a,bC as D}from"./j0yo6uv6652vva62.js";const K=G(()=>B(()=>import("./kaxn2bizrxslkpa3.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>Q(s)});function Z({onClose:s,gizmo:t}){var x;const e=T(),[n,M]=f.useState(((x=t==null?void 0:t.gizmo)==null?void 0:x.instructions)||""),r=R(),C=O(),l=w(),d=[];(n==null?void 0:n.length)>h&&d.push(e.formatMessage(a.instructionsTooLong,{length:h})),f.useEffect(()=>{l.invalidateQueries({queryKey:S(l,t.gizmo.id).queryKey})},[t.gizmo.id,l]);const j=i=>{M(i.target.value)},v=()=>{s()},b=async()=>{try{await r.mutateAsync({update:{instructions:n!=null?n:""},id:t.gizmo.id}),s()}catch(i){const u=H(i);C.danger(u!=null?u:"Error",{duration:2,toastId:"custom_instructions_modal_save_error"})}},I=o.jsx(m.Button,{title:e.formatMessage(a.save),color:"primary",onClick:b,loading:r.isPending,disabled:d.length>0}),_=o.jsx(m.Button,{title:e.formatMessage(a.cancel),color:"secondary",onClick:v,disabled:r.isPending}),{canEdit:c}=A(t);return o.jsx(L,{testId:"modal-project-custom-instructions",className:"min-h-[50dvh] max-w-[820px]",isOpen:!0,showCloseButton:!r.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:o.jsx("div",{className:"h-8",children:e.formatMessage(a.editCustomInstructionsTitle)}),onClose:()=>{r.isPending||s()},headerAccessory:!c&&o.jsx(q,{label:e.formatMessage(a.viewOnlyCustomInstructionsModalHeaderTooltip),side:"left",align:"center",children:o.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center gap-1.5 text-sm",children:[o.jsx(K,{className:"icon"}),o.jsx(k,y({},a.viewOnlyCustomInstructionsModalHeaderLabel))]})}),children:o.jsxs("div",{className:"flex h-full flex-col px-4 pt-0 pb-4",children:[o.jsx("div",{className:"text-sm font-medium",children:e.formatMessage(c?a.editCustomInstructionsSubtitle:a.readOnlyCustomInstructionsTitle)}),o.jsx("div",{className:"text-token-text-secondary text-sm",children:e.formatMessage(a.editCustomInstructionsDescription)}),o.jsx("textarea",{autoFocus:!0,placeholder:e.formatMessage(a.projectInstructionsPlaceholder),className:F("focus:ring-token-text-primary border-heavy mt-4 mb-1 min-h-24 w-full grow resize-none overflow-x-clip overflow-y-auto rounded-lg border px-3 py-2 focus:ring-1",c?"bg-transparent":"bg-token-bg-tertiary"),name:"instructions",onChange:j,value:n,disabled:r.isPending||!c}),d.map(i=>o.jsx(D,{className:"mt-1",children:i},i)),c&&o.jsx(m.Actions,{primaryButton:I,secondaryButton:_})]})})}export{Z as CustomInstructionsModal};
//# sourceMappingURL=dujttbag0lb0tmgz.js.map

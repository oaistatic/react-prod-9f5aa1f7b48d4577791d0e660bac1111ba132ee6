import{R as H,r as B}from"./i8clt0mfz495j7ii.js";import{s as Re}from"./n8qbc0log2m0cne7.js";import"./ghewn7l2ynbm32fm.js";import"./j0yo6uv6652vva62.js";import"./dwikchly7agkd2y3.js";import"./julkxv3pzs8k4gnq.js";import"./iguylefzk1dr51wi.js";import"./mbmcx8v24u1ao1ke.js";import"./ia54sddtrl9qa2wj.js";import"./fy6752fpzkgozktl.js";const Ae=Re("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});function de(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a}var Y;(function(e){e.event="event",e.props="prop"})(Y||(Y={}));function $(){}function Oe(e){var t,a=void 0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t&&n.length===t.length&&n.every(function(i,f){return i===t[f]})||(t=n,a=e.apply(void 0,n)),a}}function ee(e){return!!(e||"").match(/\d/)}function q(e){return e==null}function Te(e){return typeof e=="number"&&isNaN(e)}function ge(e){return q(e)||Te(e)||typeof e=="number"&&!isFinite(e)}function me(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Be(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function _e(e,t,a){var n=Be(a),r=e.search(/[1-9]/);return r=r===-1?e.length:r,e.substring(0,r)+e.substring(r,e.length).replace(n,"$1"+t)}function Fe(e){var t=B.useRef(e);t.current=e;var a=B.useRef(function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return t.current.apply(t,n)});return a.current}function ue(e,t){t===void 0&&(t=!0);var a=e[0]==="-",n=a&&t;e=e.replace("-","");var r=e.split("."),i=r[0],f=r[1]||"";return{beforeDecimal:i,afterDecimal:f,hasNegation:a,addNegation:n}}function Le(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var a=e.split("."),n=a[0].replace(/^0+/,"")||"0",r=a[1]||"";return(t?"-":"")+n+(r?"."+r:"")}function he(e,t,a){for(var n="",r=a?"0":"",i=0;i<=t-1;i++)n+=e[i]||r;return n}function le(e,t){return Array(t+1).join(e)}function Se(e){var t=e+"",a=t[0]==="-"?"-":"";a&&(t=t.substring(1));var n=t.split(/[eE]/g),r=n[0],i=n[1];if(i=Number(i),!i)return a+r;r=r.replace(".","");var f=1+i,h=r.length;return f<0?r="0."+le("0",Math.abs(f))+r:f>=h?r=r+le("0",f-h):r=(r.substring(0,f)||"0")+"."+r.substring(f),a+r}function se(e,t,a){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||a)&&t,r=ue(e),i=r.beforeDecimal,f=r.afterDecimal,h=r.hasNegation,S=parseFloat("0."+(f||"0")),x=f.length<=t?"0."+f:S.toFixed(t),p=x.split("."),d=i.split("").reverse().reduce(function(N,w,g){return N.length>g?(Number(N[0])+Number(w)).toString()+N.substring(1,N.length):w+N},p[0]),m=he(p[1]||"",t,a),y=h?"-":"",v=n?".":"";return""+y+d+v+m}function Z(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var a=e.createTextRange();return a.move("character",t),a.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var pe=Oe(function(e,t){for(var a=0,n=0,r=e.length,i=t.length;e[a]===t[a]&&a<r;)a++;for(;e[r-1-n]===t[i-1-n]&&i-n>a&&r-n>a;)n++;return{from:{start:a,end:r-n},to:{start:a,end:i-n}}});function je(e,t,a){return Math.min(Math.max(e,t),a)}function oe(e){return Math.max(e.selectionStart,e.selectionEnd)}function Me(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Pe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function ke(e){var t=e.currentValue,a=e.formattedValue,n=e.currentValueIndex,r=e.formattedValueIndex;return t[n]===a[r]}function Ke(e,t,a,n,r,i,f){f===void 0&&(f=ke);var h=r.findIndex(function(k){return k}),S=e.slice(0,h);!t&&!a.startsWith(S)&&(t=S,a=S+a,n=n+S.length);for(var x=a.length,p=e.length,d={},m=new Array(x),y=0;y<x;y++){m[y]=-1;for(var v=0,N=p;v<N;v++){var w=f({currentValue:a,lastValue:t,formattedValue:e,currentValueIndex:y,formattedValueIndex:v});if(w&&d[v]!==!0){m[y]=v,d[v]=!0;break}}}for(var g=n;g<x&&(m[g]===-1||!i(a[g]));)g++;var _=g===x||m[g]===-1?p:m[g];for(g=n-1;g>0&&m[g]===-1;)g--;var L=g===-1||m[g]===-1?0:m[g]+1;return L>_?_:n-L<_-n?L:_}function ce(e,t,a,n){var r=e.length;if(t=je(t,0,r),n==="left"){for(;t>=0&&!a[t];)t--;t===-1&&(t=a.indexOf(!0))}else{for(;t<=r&&!a[t];)t++;t>r&&(t=a.lastIndexOf(!0))}return t===-1&&(t=r),t}function We(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),a=0,n=t.length;a<n;a++)t[a]=!!(ee(e[a])||ee(e[a-1]));return t}function xe(e,t,a,n,r,i){i===void 0&&(i=$);var f=Fe(function(v,N){var w,g;return ge(v)?(g="",w=""):typeof v=="number"||N?(g=typeof v=="number"?Se(v):v,w=n(g)):(g=r(v,void 0),w=n(g)),{formattedValue:w,numAsString:g}}),h=B.useState(function(){return f(q(e)?t:e,a)}),S=h[0],x=h[1],p=function(v,N){v.formattedValue!==S.formattedValue&&x({formattedValue:v.formattedValue,numAsString:v.value}),i(v,N)},d=e,m=a;q(e)&&(d=S.numAsString,m=!0);var y=f(d,m);return B.useMemo(function(){x(y)},[y.formattedValue]),[S,p]}function Ue(e){return e.replace(/[^0-9]/g,"")}function $e(e){return e}function Ge(e){var t=e.type;t===void 0&&(t="text");var a=e.displayType;a===void 0&&(a="input");var n=e.customInput,r=e.renderText,i=e.getInputRef,f=e.format;f===void 0&&(f=$e);var h=e.removeFormatting;h===void 0&&(h=Ue);var S=e.defaultValue,x=e.valueIsNumericString,p=e.onValueChange,d=e.isAllowed,m=e.onChange;m===void 0&&(m=$);var y=e.onKeyDown;y===void 0&&(y=$);var v=e.onMouseUp;v===void 0&&(v=$);var N=e.onFocus;N===void 0&&(N=$);var w=e.onBlur;w===void 0&&(w=$);var g=e.value,_=e.getCaretBoundary;_===void 0&&(_=We);var L=e.isValidInputCharacter;L===void 0&&(L=ee);var k=e.isCharacterSame,j=de(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),G=xe(g,S,!!x,f,h,p),K=G[0],b=K.formattedValue,M=K.numAsString,W=G[1],P=B.useRef({formattedValue:b,numAsString:M}),z=function(o,u){P.current={formattedValue:o.formattedValue,numAsString:o.value},W(o,u)},U=B.useState(!1),J=U[0],Q=U[1],l=B.useRef(null),s=B.useRef({setCaretTimeout:null,focusTimeout:null});B.useEffect(function(){return Q(!0),function(){clearTimeout(s.current.setCaretTimeout),clearTimeout(s.current.focusTimeout)}},[]);var A=f,D=function(o,u){var c=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(c)?void 0:c}},I=function(o,u,c){o.selectionStart===0&&o.selectionEnd===o.value.length||(Z(o,u),s.current.setCaretTimeout=setTimeout(function(){o.value===c&&o.selectionStart!==o.selectionEnd&&Z(o,u)},0))},E=function(o,u,c){return ce(o,u,_(o),c)},F=function(o,u,c){var O=_(u),C=Ke(u,b,o,c,O,L,k);return C=ce(u,C,O),C},te=function(o){var u=o.formattedValue;u===void 0&&(u="");var c=o.input,O=o.setCaretPosition,C=o.source,V=o.event,R=o.numAsString,T=o.caretPos;if(c){if(T===void 0&&O){var X=o.inputValue||c.value,ie=oe(c);c.value=u,T=F(X,u,ie)}c.value=u,T!==void 0&&I(c,T,u)}u!==b&&z(D(u,R),{event:V,source:C})};B.useEffect(function(){var o=P.current,u=o.formattedValue,c=o.numAsString;b!==u&&(b!==M||u!==c)&&z(D(b,M),{event:void 0,source:Y.props})},[b,M]);var ne=l.current?oe(l.current):void 0,ae=typeof window<"u"?B.useLayoutEffect:B.useEffect;ae(function(){var o=l.current;if(b!==P.current.formattedValue&&o){var u=F(P.current.formattedValue,b,ne);o.value=b,I(o,u,b)}},[b]);var be=function(o,u,c){var O=pe(b,o),C=Object.assign(Object.assign({},O),{lastValue:b}),V=h(o,C),R=A(V);if(V=h(R,void 0),d&&!d(D(R,V))){var T=u.target,X=oe(T),ie=F(o,b,X);return T.value=b,I(T,ie,b),!1}return te({formattedValue:R,numAsString:V,inputValue:o,event:u,source:c,setCaretPosition:!0,input:u.target}),!0},Ve=function(o){var u=o.target,c=u.value,O=be(c,o,Y.event);O&&m(o)},Ne=function(o){var u=o.target,c=o.key,O=u.selectionStart,C=u.selectionEnd,V=u.value;V===void 0&&(V="");var R;if(c==="ArrowLeft"||c==="Backspace"?R=Math.max(O-1,0):c==="ArrowRight"?R=Math.min(O+1,V.length):c==="Delete"&&(R=O),R===void 0||O!==C){y(o);return}var T=R;if(c==="ArrowLeft"||c==="ArrowRight"){var X=c==="ArrowLeft"?"left":"right";T=E(V,R,X),T!==R&&o.preventDefault()}else c==="Delete"&&!L(V[R])?T=E(V,R,"right"):c==="Backspace"&&!L(V[R])&&(T=E(V,R,"left"));T!==R&&I(u,T,V),o.isUnitTestRun&&I(u,T,V),y(o)},we=function(o){var u=o.target,c=u.selectionStart,O=u.selectionEnd,C=u.value;if(C===void 0&&(C=""),c===O){var V=E(C,c);V!==c&&I(u,V,C)}v(o)},De=function(o){o.persist&&o.persist();var u=o.target;l.current=u,s.current.focusTimeout=setTimeout(function(){var c=u.selectionStart,O=u.selectionEnd,C=u.value;C===void 0&&(C="");var V=E(C,c);V!==c&&!(c===0&&O===C.length)&&I(u,V,C),N(o)},0)},Ie=function(o){l.current=null,clearTimeout(s.current.focusTimeout),clearTimeout(s.current.setCaretTimeout),w(o)},Ce=J&&Me()?"numeric":void 0,fe=Object.assign({inputMode:Ce},j,{type:t,value:b,onChange:Ve,onKeyDown:Ne,onMouseUp:we,onFocus:De,onBlur:Ie});if(a==="text")return r?H.createElement(H.Fragment,null,r(b,j)||null):H.createElement("span",Object.assign({},j,{ref:i}),b);if(n){var Ee=n;return H.createElement(Ee,Object.assign({},fe,{ref:i}))}return H.createElement("input",Object.assign({},fe,{ref:i}))}function ve(e,t){var a=t.decimalScale,n=t.fixedDecimalScale,r=t.prefix;r===void 0&&(r="");var i=t.suffix;i===void 0&&(i="");var f=t.allowNegative,h=t.thousandsGroupStyle;if(h===void 0&&(h="thousand"),e===""||e==="-")return e;var S=re(t),x=S.thousandSeparator,p=S.decimalSeparator,d=a!==0&&e.indexOf(".")!==-1||a&&n,m=ue(e,f),y=m.beforeDecimal,v=m.afterDecimal,N=m.addNegation;return a!==void 0&&(v=he(v,a,!!n)),x&&(y=_e(y,x,h)),r&&(y=r+y),i&&(v=v+i),N&&(y="-"+y),e=y+(d&&p||"")+v,e}function re(e){var t=e.decimalSeparator;t===void 0&&(t=".");var a=e.thousandSeparator,n=e.allowedDecimalSeparators;return a===!0&&(a=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:a,allowedDecimalSeparators:n}}function Ze(e,t){e===void 0&&(e="");var a=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),r=a.test(e),i=n.test(e);return e=e.replace(/-/g,""),r&&!i&&t&&(e="-"+e),e}function ze(e,t){return new RegExp("(^-)|[0-9]|"+me(e),"g")}function He(e,t,a){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(a!=null&&a.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function qe(e,t,a){var n;t===void 0&&(t=Pe(e));var r=a.allowNegative,i=a.prefix;i===void 0&&(i="");var f=a.suffix;f===void 0&&(f="");var h=a.decimalScale,S=t.from,x=t.to,p=x.start,d=x.end,m=re(a),y=m.allowedDecimalSeparators,v=m.decimalSeparator,N=e[d]===v;if(ee(e)&&(e===i||e===f)&&t.lastValue==="")return e;if(d-p===1&&y.indexOf(e[p])!==-1){var w=h===0?"":v;e=e.substring(0,p)+w+e.substring(p+1,e.length)}var g=function(s,A,D){var I=!1,E=!1;i.startsWith("-")?I=!1:s.startsWith("--")?(I=!1,E=!0):f.startsWith("-")&&s.length===f.length?I=!1:s[0]==="-"&&(I=!0);var F=I?1:0;return E&&(F=2),F&&(s=s.substring(F),A-=F,D-=F),{value:s,start:A,end:D,hasNegation:I}},_=g(e,p,d),L=_.hasNegation;n=_,e=n.value,p=n.start,d=n.end;var k=g(t.lastValue,S.start,S.end),j=k.start,G=k.end,K=k.value,b=e.substring(p,d);e.length&&K.length&&(j>K.length-f.length||G<i.length)&&!(b&&f.startsWith(b))&&(e=K);var M=0;e.startsWith(i)?M+=i.length:p<i.length&&(M=p),e=e.substring(M),d-=M;var W=e.length,P=e.length-f.length;e.endsWith(f)?W=P:(d>P||d>e.length-f.length)&&(W=d),e=e.substring(0,W),e=Ze(L?"-"+e:e,r),e=(e.match(ze(v))||[]).join("");var z=e.indexOf(v);e=e.replace(new RegExp(me(v),"g"),function(s,A){return A===z?".":""});var U=ue(e,r),J=U.beforeDecimal,Q=U.afterDecimal,l=U.addNegation;return x.end-x.start<S.end-S.start&&J===""&&N&&!parseFloat(Q)&&(e=l?"-":""),e}function Je(e,t){var a=t.prefix;a===void 0&&(a="");var n=t.suffix;n===void 0&&(n="");var r=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";r.fill(!1,0,a.length+(i?1:0));var f=e.length;return r.fill(!1,f-n.length+1,f+1),r}function Qe(e){var t=re(e),a=t.thousandSeparator,n=t.decimalSeparator,r=e.prefix;r===void 0&&(r="");var i=e.allowNegative;if(i===void 0&&(i=!0),a===n)throw new Error("\n        Decimal separator can't be same as thousand separator.\n        thousandSeparator: "+a+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n        decimalSeparator: '+n+" (default value for decimalSeparator is .)\n     ");return r.startsWith("-")&&i&&(console.error("\n      Prefix can't start with '-' when allowNegative is true.\n      prefix: "+r+"\n      allowNegative: "+i+"\n    "),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function Xe(e){e=Qe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,a=e.allowNegative,n=e.allowLeadingZeros,r=e.onKeyDown;r===void 0&&(r=$);var i=e.onBlur;i===void 0&&(i=$);var f=e.thousandSeparator,h=e.decimalScale,S=e.fixedDecimalScale,x=e.prefix;x===void 0&&(x="");var p=e.defaultValue,d=e.value,m=e.valueIsNumericString,y=e.onValueChange,v=de(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),N=re(e),w=N.decimalSeparator,g=N.allowedDecimalSeparators,_=function(l){return ve(l,e)},L=function(l,s){return qe(l,s,e)},k=q(d)?p:d,j=m!=null?m:He(k,x,t);q(d)?q(p)||(j=j||typeof p=="number"):j=j||typeof d=="number";var G=function(l){return ge(l)?l:(typeof l=="number"&&(l=Se(l)),j&&typeof h=="number"?se(l,h,!!S):l)},K=xe(G(d),G(p),!!j,_,L,y),b=K[0],M=b.numAsString,W=b.formattedValue,P=K[1],z=function(l){var s=l.target,A=l.key,D=s.selectionStart,I=s.selectionEnd,E=s.value;if(E===void 0&&(E=""),D!==I){r(l);return}A==="Backspace"&&E[0]==="-"&&D===x.length+1&&a&&Z(s,1),h&&S&&(A==="Backspace"&&E[D-1]===w?(Z(s,D-1),l.preventDefault()):A==="Delete"&&E[D]===w&&l.preventDefault()),g!=null&&g.includes(A)&&E[D]===w&&Z(s,D+1);var F=f===!0?",":f;A==="Backspace"&&E[D-1]===F&&Z(s,D-1),A==="Delete"&&E[D]===F&&Z(s,D+1),r(l)},U=function(l){var s=M;if(s.match(/\d/g)||(s=""),n||(s=Le(s)),S&&h&&(s=se(s,h,S)),s!==M){var A=ve(s,e);P({formattedValue:A,value:s,floatValue:parseFloat(s)},{event:l,source:Y.event})}i(l)},J=function(l){return l===w?!0:ee(l)},Q=function(l){var s=l.currentValue,A=l.lastValue,D=l.formattedValue,I=l.currentValueIndex,E=l.formattedValueIndex,F=s[I],te=D[E],ne=pe(A,s),ae=ne.to;return I>=ae.start&&I<ae.end&&g&&g.includes(F)&&te===w?!0:F===te};return Object.assign(Object.assign({},v),{value:W,valueIsNumericString:!1,isValidInputCharacter:J,isCharacterSame:Q,onValueChange:P,format:_,removeFormatting:L,getCaretBoundary:function(l){return Je(l,e)},onKeyDown:z,onBlur:U})}function Ye(e){var t=Xe(e);return H.createElement(Ge,Object.assign({},t))}function ye(){var a,n,r;const t=(r=(n=(a=Intl.NumberFormat())==null?void 0:a.formatToParts(1.1))==null?void 0:n.find(i=>i.type==="decimal"))==null?void 0:r.value;return t!=null?t:"."}function et(){return ye()==="."?",":"."}const ct=e=>{const{value:t,onChange:a,disabled:n,highlight:r,validatedSelection:i,fixedDecimals:f,allowNegative:h,thousandSeparator:S,decimalSeparator:x}=e,p=B.useRef();return B.useLayoutEffect(()=>{var d;if(i!==void 0){const m=typeof i=="number"?[i,null]:i;(d=p.current)==null||d.setSelectionRange(m[0],m[1])}},[i]),B.createElement(Ae,null,B.createElement(Ye,{autoFocus:!0,getInputRef:p,className:"gdg-input",onFocus:d=>d.target.setSelectionRange(r?0:d.target.value.length,d.target.value.length),disabled:n===!0,decimalScale:f,allowNegative:h,thousandSeparator:S!=null?S:et(),decimalSeparator:x!=null?x:ye(),value:Object.is(t,-0)?"-":t!=null?t:"",onValueChange:a}))};export{ct as default};
//# sourceMappingURL=bcdtsvhs9uyygifw.js.map

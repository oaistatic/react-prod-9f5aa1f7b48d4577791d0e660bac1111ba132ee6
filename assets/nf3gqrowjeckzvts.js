import{r as s,A as P,af as O,h as _,ab as y,u as R,j as a}from"./i8clt0mfz495j7ii.js";import{h as T,an as M,oy as z,cK as I,u as N,j as b,f0 as h,f1 as E,e$ as A,mN as G,cJ as L,mL as F,m$ as H,mM as Q,lq as $}from"./ghewn7l2ynbm32fm.js";import{C as k}from"./fn0h0oidnzmutllx.js";import{r as K,g4 as v,ap as U,a as Y,g5 as w}from"./j0yo6uv6652vva62.js";import"./fb2095ktsebx1zzy.js";import"./eyao241335injypy.js";import"./ktw3b87sujui39wx.js";import"./nrrhfi0a0bbsg9w2.js";import"./hht3m8p9e0s4tqnx.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";import"./fvjpw0lui4wq7vv3.js";import"./mpzbsmypy64alaao.js";import"./olrcssu7duieo6m7.js";import"./bc51ukj7a2qfpnc3.js";import"./hhl3vz1yrrpnwu4u.js";import"./b6hyii2315xk7j19.js";import"./kj8h59p17s2tn6gp.js";import"./hlon4mihnqp86jji.js";import"./f6ek1vdaohim72xh.js";import"./mh1u90j45tiq86ol.js";function B(n,o){const e=s.useRef(0);return()=>{e.current<o&&(n(),e.current+=1)}}const ft=()=>{K();const n=M();if(!T(n,"491279851"))return O("/")},gt=P(function(){const o=_(),{gizmoSlug:e}=y(),t=z(e!=null?e:""),{data:c,isError:g,error:r}=I(t,!1),m=R(),u=m.getQueryData([v]),d=m.getQueryState([v]),C=(d==null?void 0:d.fetchStatus)==="fetching",p=s.useMemo(()=>u==null?void 0:u.pages.flatMap(l=>l.items),[u]),f=N(),S=U(f,t);s.useEffect(()=>{S.conversations$().preload$()},[S]),s.useEffect(()=>{if(g&&!c)if(r instanceof b&&(r.status===403||r.status===404))o(h(E.PROJECT_NOT_FOUND));else{const l=A(r);o(h(E.CUSTOM_ERROR,void 0,l))}},[g,c,o,r]);const i=s.useMemo(()=>G(f,{urlGizmoId:t}),[f,t]);Y(i.id,{kind:L.GizmoInteraction,gizmo_id:t});const x=B(()=>{w(m)},5);return s.useEffect(()=>{if(!t||!c||C)return;(p==null?void 0:p.some(j=>j.gizmo.gizmo.id===t))||x()},[c,t,p,C,m,x]),a.jsx(F.Provider,{value:i,children:a.jsx(H,{children:a.jsx(Q,{conversation:i,children:a.jsx($,{conversation:i,children:a.jsx(k,{conversation:i})})})})})});export{ft as clientLoader,gt as default};
//# sourceMappingURL=nf3gqrowjeckzvts.js.map

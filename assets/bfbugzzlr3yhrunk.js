const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cr5h05bhk5js9k9c.js","assets/i8clt0mfz495j7ii.js","assets/nju52ppu7cxhyzrm.js"])))=>i.map(i=>d[i]);
import{e as D,j as o,M as z,r as T,_ as J,c as q}from"./i8clt0mfz495j7ii.js";import{u as L,as as K,ne as G,lp as U,C as Q,$ as Z,h as W,eo as ee,e4 as te,o as X,d as se,L as Y,cH as oe,aR as re}from"./ghewn7l2ynbm32fm.js";import{aW as ne,aX as ae,aY as ie,d6 as le,cb as P,cc as ce}from"./j0yo6uv6652vva62.js";import{g as de}from"./gjip6pne3m251qjn.js";import{P as ue}from"./odg6tnre74z3nvyt.js";import"./eb6zep29zccfypdc.js";import"./cxbsld3botts7bfn.js";import"./da0eqg5j39u1e96s.js";import"./bbipyj9bituayr8q.js";import"./ivb8c1xam3e690hh.js";import"./kmo5unuf793khl43.js";import"./mzyl3pd4zxnxoe9i.js";import"./gy1lpvuoewmzh42c.js";import"./i03gut32e8jn5ajq.js";import"./h1em0bjkpkjv8ykw.js";import"./nfccle6oyncifphl.js";import"./hu1bt0oauegdhua6.js";import"./mjbhy8c4bs0n8qw2.js";import"./hxdh3tr5l8kut4ed.js";import"./zl0env7yrga8vz86.js";import"./mnf9y116wq0a5kdn.js";function me({product_id:n,product_title:e,product_url:r,onClose:x}){const h=L(),a=K(h),{data:p}=ne(h,G.CommerceProduct),c=D(),d=ae(h,c,n,G.CommerceProduct,{[U.EntityName]:e,[U.EntityUrl]:r});if(p==null)return null;const g="Report ".concat((e==null?void 0:e.length)<=30?e:(e==null?void 0:e.substring(0,27))+"...");return a?o.jsx(ie,{reasons:p.reasons,submitReport:d,title:g,onClose:x,header:p.header,subHeader:p.header_explanation}):o.jsx(Q,{testId:"modal-report-reason-selection",title:g,onClose:x,isOpen:!0,showCloseButton:!0,type:"success",primaryButton:o.jsx(Z,{color:"primary",onClick:()=>{window.open("https://openai.com/form/report-content","_blank")},children:o.jsx(z,{id:"report.goToForm",defaultMessage:"Go to Form"})}),children:o.jsx("div",{className:"text-sm",children:o.jsx("div",{className:"mb-2",children:o.jsx(z,{id:"report.externalReportFormInstruction",defaultMessage:"Please use this form to report the issue."})})})})}const pe=X(()=>J(()=>import("./cr5h05bhk5js9k9c.js").then(n=>n._),__vite__mapDeps([0,1])),{loading:n=>Y(n)}),fe=X(()=>J(()=>import("./nju52ppu7cxhyzrm.js").then(n=>n._),__vite__mapDeps([2,1])),{loading:n=>Y(n)});function V({product_id:n,product_title:e,product_url:r,isCheckoutable:x,className:h}){const a=L(),p=D(),[c,d]=T.useState(!1),[g,b]=T.useState(!1);return W(a,"1961970013")&&x?o.jsxs(o.Fragment,{children:[o.jsx(ee,{open:c,onOpenChange:M=>{d(M)},side:"bottom",contentAlign:"end",triggerButton:o.jsx(le,{className:se("keyboard-focused:focus-ring bg-token-main-surface-primary hover:bg-token-main-surface-secondary! pointer-events-auto me-2 h-8! w-8! rounded-full! opacity-80",h),"aria-label":p.formatMessage({id:"G4IkJB",defaultMessage:"Open product options"}),"data-testid":"product-options-button",icon:fe}),size:"auto",children:o.jsx(te.Item,{icon:pe,onClick:()=>{b(!0)},children:o.jsx(z,{id:"thread.reportProduct",defaultMessage:"Report"})})}),g&&o.jsx(me,{product_id:n,product_title:e,product_url:r,onClose:()=>b(!1)})]}):null}function De(n){"use forget";var A,H;const e=q.c(60),{conversation:r,sidebar:x,type:h}=n,{messageId:a,turnIndex:p,contentReferenceStartIndex:c,productIndex:d}=x,g=h===void 0?"sidebar":h,b=L(),_=oe(r.id,ge),M=D();let v;e[0]!==r.id||e[1]!==a||e[2]!==p?(v={clientThreadId:r.id,messageId:a,turnIndex:p},e[0]=r.id,e[1]=a,e[2]=p,e[3]=v):v=e[3];const k=v;let C;e[4]!==c||e[5]!==a||e[6]!==d||e[7]!==_?(C=de({thread:_,messageId:a,contentReferenceStartIndex:c,productIndex:d}),e[4]=c,e[5]=a,e[6]=d,e[7]=_,e[8]=C):C=e[8];const{product:t}=C,[s,$]=T.useState(t);let E,S;e[9]!==t?(E=()=>{t&&$(t)},S=[t],e[9]=t,e[10]=E,e[11]=S):(E=e[10],S=e[11]),T.useEffect(E,S);let w;e[12]!==s?(w=s&&s.offers&&s.offers.some(he),e[12]=s,e[13]=w):w=e[13];const f=w;if(!t)return null;const j="".concat(a,"-").concat(c,"-").concat(d),N=g==="sidebar";let O;e[14]!==k||e[15]!==c||e[16]!==r.id||e[17]!==a||e[18]!==t||e[19]!==d||e[20]!==N?(O=o.jsx(ue,{product:t,setUpdatedProduct:$,clientThreadId:r.id,messageId:a,contentReferenceStartIndex:c,productIndex:d,analyticsMetadata:k,offsetTopMargin:N}),e[14]=k,e[15]=c,e[16]=r.id,e[17]=a,e[18]=t,e[19]=d,e[20]=N,e[21]=O):O=e[21];const y=O;let B;e[22]!==b?(B=W(b,"1961970013"),e[22]=b,e[23]=B):B=e[23];const R=B;switch(g){case"sidebar":{let i;e[24]!==r?(i=()=>P(r),e[24]=r,e[25]=i):i=e[25];let u;e[26]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx("div",{className:"flex grow"}),e[26]=u):u=e[26];let l;e[27]!==R||e[28]!==f||e[29]!==t||e[30]!==(s==null?void 0:s.url)?(l=R&&o.jsx(V,{product_id:t.id,product_title:t.title,product_url:(A=s==null?void 0:s.url)!=null?A:t.url,isCheckoutable:f!=null?f:!1}),e[27]=R,e[28]=f,e[29]=t,e[30]=s==null?void 0:s.url,e[31]=l):l=e[31];let m;e[32]!==l?(m=o.jsxs(o.Fragment,{children:[u,l]}),e[32]=l,e[33]=m):m=e[33];let I;e[34]!==M?(I=M.formatMessage({id:"region.sidebar.product",defaultMessage:"Product details"}),e[34]=M,e[35]=I):I=e[35];let F;return e[36]!==j||e[37]!==y||e[38]!==i||e[39]!==m||e[40]!==I?(F=o.jsx(ce,{handleClose:i,showScrollToBottomButton:!0,leading:m,leadingFullBleed:!0,ariaLabel:I,children:y},j),e[36]=j,e[37]=y,e[38]=i,e[39]=m,e[40]=I,e[41]=F):F=e[41],F}case"modal":{let i;e[42]!==r?(i=()=>P(r),e[42]=r,e[43]=i):i=e[43];let u;e[44]!==R||e[45]!==f||e[46]!==t.id||e[47]!==t.title||e[48]!==t.url||e[49]!==(s==null?void 0:s.url)?(u=R&&o.jsx(V,{product_id:t.id,product_title:t.title,product_url:(H=s==null?void 0:s.url)!=null?H:t.url,isCheckoutable:f!=null?f:!1,className:"absolute end-8.5 top-1.5 z-10"}),e[44]=R,e[45]=f,e[46]=t.id,e[47]=t.title,e[48]=t.url,e[49]=s==null?void 0:s.url,e[50]=u):u=e[50];let l;e[51]!==r?(l=o.jsx(re,{className:"absolute end-2.5 top-2.5 z-10",onClick:()=>P(r)}),e[51]=r,e[52]=l):l=e[52];let m;return e[53]!==j||e[54]!==t.title||e[55]!==y||e[56]!==i||e[57]!==u||e[58]!==l?(m=o.jsxs(Q,{testId:"modal-chat-screen-product-flyout",className:"relative max-w-md",size:"custom",type:"success",noPadding:!0,title:t.title,visuallyHiddenHeader:!0,isOpen:!0,onClose:i,rootClassName:"z-0",children:[y,u,l]},j),e[53]=j,e[54]=t.title,e[55]=y,e[56]=i,e[57]=u,e[58]=l,e[59]=m):m=e[59],m}}}function he(n){return n.checkoutable}function ge(n){return n}export{De as ChatScreenProductFlyout};
//# sourceMappingURL=bfbugzzlr3yhrunk.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ghewn7l2ynbm32fm.js","assets/i8clt0mfz495j7ii.js","assets/root-c4psboex.css","assets/bqk4d9uy5l3d6vsz.js","assets/dx8c7lvygozv45al.js","assets/j0yo6uv6652vva62.js","assets/conversation-small-lq38g8zw.css","assets/jqgq3jgwhjb65of8.js","assets/ym4yghdv64dnejbs.js","assets/j9agwrrvvs1s434x.js","assets/kgnykbdth8mb50na.js","assets/g8i6bixylsxyemsr.js","assets/mpzbsmypy64alaao.js","assets/fvjpw0lui4wq7vv3.js","assets/olrcssu7duieo6m7.js","assets/fqlsa8d4vdlgozqd.js","assets/mnpqan18b42bsh1o.js","assets/n3bxkos2zhscnn5x.js","assets/pcwyhd2ia1xnez4s.js","assets/9z79ocopszbdxlwz.js","assets/euq7ybw4dhrsufo2.js","assets/mqebxepg7t6q2tie.js","assets/cta8fbfu7nzu39nv.js","assets/i03gut32e8jn5ajq.js","assets/h1em0bjkpkjv8ykw.js","assets/nfccle6oyncifphl.js","assets/hu1bt0oauegdhua6.js"])))=>i.map(i=>d[i]);
var ys=Object.defineProperty,Cs=Object.defineProperties;var Ts=Object.getOwnPropertyDescriptors;var wt=Object.getOwnPropertySymbols;var ws=Object.prototype.hasOwnProperty,vs=Object.prototype.propertyIsEnumerable;var vt=(t,e,a)=>e in t?ys(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,le=(t,e)=>{for(var a in e||(e={}))ws.call(e,a)&&vt(t,a,e[a]);if(wt)for(var a of wt(e))vs.call(e,a)&&vt(t,a,e[a]);return t},ke=(t,e)=>Cs(t,Ts(e));import{f as Ht,c as ce,j as s,r as M,M as Ee,e as Oe,h as lt,_ as ge,k as Lt,L as Rt,R as Wt,m as js}from"./i8clt0mfz495j7ii.js";import{u as ne,as as dt,a as L,a0 as Be,qW as _s,eu as Dt,eH as Is,ak as Ft,dS as Ns,O as Bt,eg as $t,a$ as Ms,d as V,aM as As,aL as Vt,eh as Ps,jH as ct,ap as we,aq as ve,T as ut,iM as ks,qX as Es,qY as Os,qZ as Hs,bb as jt,bc as _t,o as fe,L as Ue,dD as Ls,bL as Rs,q_ as Ws,bO as pe,s as Ds,co as Fs,cH as Ce,cI as Bs,bX as $s,gh as Je,aV as $e,bN as zt,dM as Gt,pO as It,pj as Nt,q$ as Xe,iG as Vs,cg as zs,iX as Gs,l3 as Us,j_ as Ys,r0 as qs,aW as Ks,aN as Te,r1 as Qs,ar as ht,e as Js,z as Ve,ke as Xs,hV as Mt,eI as Zs,bh as mt,iA as Ut,be as ea,oo as ta,P as Fe,pH as sa,r2 as aa,bQ as oa,dk as nt,aS as na,dj as Yt,bT as ra,eM as ia,a_ as la,km as da,aX as _e,r3 as ca,r4 as ua,j$ as qt,b1 as ha,jC as ma,fg as Ye,h as ze,fh as pa,cO as qe,fc as ga,dQ as fa,ei as xa,cK as Sa,B as ba,bE as ya,qd as Ca,hw as Ta,de as rt,kg as wa,dP as va,aG as ja,fw as _a,ff as Ia,J as At,i as Na,cJ as Ma,d1 as Aa,by as Pa,i$ as ka,R as Ea,c5 as Oa,eJ as Ha,k0 as La,e0 as Ra,a4 as Wa,bi as Da,bI as Fa,mM as Ba,f5 as Kt,lk as $a,pp as Va,ir as za}from"./ghewn7l2ynbm32fm.js";import{nt as Qt,nu as Ga,nv as Ua,nw as Ya,bo as qa,nx as Ka,lP as Qa,ny as Jt,nz as Ja,gW as Xa,aP as pt,ay as Ie,nA as Za,lO as eo,lY as to,fJ as He,nB as je,nC as so,nD as Ke,bq as ao,nE as Ge,nF as oo,nG as no,fB as ro,gZ as Xt,ao as Zt,nH as io,aS as lo,aT as co,cv as es,nI as uo,aw as ho,l5 as mo,nJ as po,nK as go,az as it,hh as ts,nL as fo,av as xo,nM as So,cX as bo,nN as ss,nO as yo,nP as Co,nQ as To,nR as wo,nS as vo,nT as jo,nU as _o,nV as Io,nW as No,nX as Mo,nY as Ao,nZ as Po,ka as as,g6 as ko,bG as Eo,u as Oo,ap as Ho,bb as Lo,ag as Ro,n_ as Wo,n$ as Do,k$ as os,o0 as Fo,lU as ns,fC as Bo,h0 as $o,o1 as Vo,fF as Ze,o2 as zo,i4 as Go,B as Uo,fE as Pt,el as Yo,o3 as qo,o4 as Ko,eu as Qo,o5 as Jo,ft as Xo,o6 as Zo,kO as en,o7 as tn,cQ as sn,o8 as kt,o9 as an,gl as on,dK as nn,d5 as rn,d3 as ln,oa as dn,ob as cn,oc as un,od as hn,oe as mn,of as pn,og as gn,oh as fn,oi as xn,oj as Sn,ok as bn,ol as yn,lL as Cn,l2 as Tn,om as wn,on as vn,hZ as jn,oo as _n,aB as In,op as Nn,oq as Mn,or as An,os as Pn,ot as kn,ou as En,mx as On,ov as Hn,ow as Ln,ox as Rn,oy as Wn,oz as Dn,oA as Fn,oB as Bn,oC as $n,oD as Vn,oE as zn,oF as Gn,oG as Un,oH as Yn,oI as qn,oJ as Kn,oK as Qn,oL as Jn,m1 as Xn,he as Zn}from"./j0yo6uv6652vva62.js";import{F as er}from"./ktw3b87sujui39wx.js";import{M as tr,S as rs,P as sr,a as ar,u as or,D as nr,T as rr}from"./hht3m8p9e0s4tqnx.js";import ir from"./hhl3vz1yrrpnwu4u.js";import{C as lr,S as dr,T as cr}from"./kj8h59p17s2tn6gp.js";import{C as ur,b as hr}from"./mpzbsmypy64alaao.js";const mr="connecting";function pr(t){"use forget";const e=ce.c(20),{clientThreadId:a,headlineOption:m,starterPromptStyle:h,currentModelId:l,overrideMessage:f}=t,c=Qa(),n=ct();let o;e[0]!==n?(o=Jt(n),e[0]=n,e[1]=o):o=e[1];const i=L(o.shouldShowAutocomplete$);let u;e[2]!==a?(u={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=u):u=e[3];const S=Ja(u),p=c?"keyboard-open:h-[calc(100%-var(--screen-keyboard-height,0px)-var(--composer-height,100px))] h-full motion-safe:[transition:height_0.3s_var(--easing-common)]":"h-full",r=i?"pointer-events-none opacity-0":"opacity-100";let d;e[4]!==p||e[5]!==r?(d=V("text-token-text-primary mt-[var(--screen-optical-compact-offset-amount)] [display:var(--display-hidden-until-loaded,flex)] w-full shrink flex-col items-center justify-center px-4 transition-opacity sm:hidden",p,r),e[4]=p,e[5]=r,e[6]=d):d=e[6];let x;e[7]!==m||e[8]!==f||e[9]!==h?(x=m==="CHATGPT_LOGO"?s.jsx(Bt,{className:"inline-block h-12 w-12"}):h!=="tiles"?s.jsx(is,{headlineOption:m,overrideMessage:f}):null,e[7]=m,e[8]=f,e[9]=h,e[10]=x):x=e[10];let C;e[11]!==a||e[12]!==l||e[13]!==S||e[14]!==h?(C=h==="chips"||!S?l&&s.jsx(tr,{currentModelId:l,clientThreadId:a}):h==="tiles"&&l&&a?s.jsx(rs,{}):null,e[11]=a,e[12]=l,e[13]=S,e[14]=h,e[15]=C):C=e[15];let g;return e[16]!==d||e[17]!==x||e[18]!==C?(g=s.jsxs("div",{className:d,children:[x,C]}),e[16]=d,e[17]=x,e[18]=C,e[19]=g):g=e[19],g}function gr({activeSystemHintType:t,isAnonModeEnabled:e,currentModelId:a}){if(t===Ft.Research)return k.deepResearchPlaceholder;const h=Is(t);if(a==="n7jupd"||h)return k.whatCanIDo}function fr(t){"use forget";const e=ce.c(26),{clientThreadId:a,currentModelId:m}=t,h=ne();let l;e[0]!==h?(l=dt(h),e[0]=h,e[1]=l):l=e[1];const f=!l;let c;e[2]!==h?(c=()=>Ns(h),e[2]=h,e[3]=c):c=e[3];const n=L(c);let o;if(e[4]!==h||e[5]!==f){const w=Be(h,"4031588851"),E=Be(h,"3533083032",{disableExposureLog:!0});o=(f?E:w).get("headline_option","HELP_WITH"),e[4]=h,e[5]=f,e[6]=o}else o=e[6];const i=o;let u;e[7]!==a?(u={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[7]=a,e[8]=u):u=e[8];const S=Qt(u),p=_s();let r;e:{if(p===Ga.Listening){r=Ua;break e}else if(p===mr){r=Ya;break e}r=void 0}const d=r,x=Dt();let C;e[9]!==x||e[10]!==m||e[11]!==n?(C=gr({activeSystemHintType:x,isAnonModeEnabled:n,currentModelId:m}),e[9]=x,e[10]=m,e[11]=n,e[12]=C):C=e[12];const g=C;let b;e[13]!==i||e[14]!==g||e[15]!==d?(b=s.jsx("div",{className:"mb-7 hidden text-center sm:block",children:i==="CHATGPT_LOGO"?s.jsx(Bt,{className:"inline-block h-12 w-12"}):s.jsx(is,{headlineOption:i,overrideMessage:d||g})}),e[13]=i,e[14]=g,e[15]=d,e[16]=b):b=e[16];const y=S;let T;e[17]!==a||e[18]!==m||e[19]!==i||e[20]!==g||e[21]!==y?(T=s.jsx(pr,{headlineOption:i,starterPromptStyle:y,clientThreadId:a,currentModelId:m,overrideMessage:g}),e[17]=a,e[18]=m,e[19]=i,e[20]=g,e[21]=y,e[22]=T):T=e[22];let _;return e[23]!==b||e[24]!==T?(_=s.jsxs("div",{className:"flex justify-center",children:[b,T]}),e[23]=b,e[24]=T,e[25]=_):_=e[25],_}function xr(t){"use forget";var E,v;const e=ce.c(15),{headlineOption:a,overrideMessage:m}=t,h=function(j){const{name:N}=j;return s.jsx(ut,{label:n.formatMessage(k.editNicknameTooltip),delayDuration:300,side:"top",children:s.jsx("button",{onClick:()=>{pt.setAutoHighlightNicknameInput(!0),C("#settings/".concat(Vt.Personalization))},style:{textDecoration:"none",transition:"color 0.2s"},onMouseEnter:br,onMouseLeave:Sr,children:N})})};let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=function(){const j=[],N=[];j.push("READY_WHEN_YOU_ARE","ON_YOUR_MIND","WHAT_ARE_YOU_WORKING_ON","AGENDA_TODAY","SHOULD_WE_BEGIN"),N.push("GOOD_TO_SEE_YOU","DIVE_IN","HOW_CAN_I_HELP",...j);const A=N[Math.floor(Math.random()*N.length)],z=j[Math.floor(Math.random()*j.length)],$="".concat(z," | ").concat(A);we.setCookie(ve.headlineMessage,$)},e[0]=l):l=e[0];const f=l,c=function(){var K,Q;const j=we.getCookie(ve.GreetingName),N=we.getCookie(ve.headlineMessage),A=N==null?void 0:N.split("|"),z=(K=A==null?void 0:A[0])==null?void 0:K.trim(),$=(Q=A==null?void 0:A[1])==null?void 0:Q.trim();return{cookieName:j,isReadyForPersonalized:!!j&&j.length<=u,headline:z,namedHeadline:$}},n=Oe(),o=ne(),i=Be(o,"1704793646"),u=i.get("name_char_limit",20),[S,p]=M.useState(c),r=Xa(),d=i.get("greeting_web",!1),x=i.get("full_name_llm",!1),C=lt();let g,b;e[1]!==o||e[2]!==x||e[3]!==r||e[4]!==d?(g=()=>ks(()=>{if(d&&r){const I=Es(o).data,j=Os(o).data;if(I&&j){const N=Hs(j,I,x);we.setCookie(ve.GreetingName,N),jt.count(_t.MOONSHINE,"splashScreenV2.greeting_cookie_name_set_web")}f()}else we.deleteCookie(ve.GreetingName),we.deleteCookie(ve.headlineMessage)}),b=[o,d,x,r],e[1]=o,e[2]=x,e[3]=r,e[4]=d,e[5]=g,e[6]=b):(g=e[5],b=e[6]),M.useEffect(g,b);let y;e[7]!==c||e[8]!==r||e[9]!==d?(y=()=>{const I=()=>{if(d&&r){const{cookieName:j,isReadyForPersonalized:N}=c();p(A=>ke(le({},A),{cookieName:j,isReadyForPersonalized:N}))}};return window.addEventListener("refreshGreeting",I),()=>window.removeEventListener("refreshGreeting",I)},e[7]=c,e[8]=r,e[9]=d,e[10]=y):y=e[10],M.useEffect(y);let T,_;e[11]!==r||e[12]!==d?(T=()=>{d&&r&&jt.count(_t.MOONSHINE,"splashScreenV2.greeting_shown_web")},_=[d,r],e[11]=r,e[12]=d,e[13]=T,e[14]=_):(T=e[13],_=e[14]),M.useEffect(T,_);let w;return m?w=n.formatMessage(m):S.isReadyForPersonalized&&d?w=s.jsx(s.Fragment,{children:s.jsx(Ee,ke(le({},et[(E=S.namedHeadline)!=null?E:a].withName),{values:{name:s.jsx(h,{name:(v=S.cookieName)!=null?v:""},"name")}}))}):d&&S.headline?w=n.formatMessage(et[S.headline].original):w=n.formatMessage(et[a].original),w}function Sr(t){t.currentTarget.className="text-inherit"}function br(t){t.currentTarget.className="text-token-text-secondary"}function is(t){"use forget";const e=ce.c(24),{headlineOption:a,overrideMessage:m}=t,h=ne(),l=$t();let f;e[0]!==l?(f={isTempChatVisible:l},e[0]=l,e[1]=f):f=e[1];const[c,n]=M.useState(f);let o,i;e[2]!==l?(o=()=>{n({isTempChatVisible:l})},i=[l],e[2]=l,e[3]=o,e[4]=i):(o=e[3],i=e[4]),Ms(o,i);let u;e[5]!==h?(u=()=>Ps(h),e[5]=h,e[6]=u):u=e[6];const S=L(u),{openSettings:p}=qa();let r;e[7]===Symbol.for("react.memo_cache_sentinel")?(r={viewTransitionName:"var(--vt-splash-screen-headline)"},e[7]=r):r=e[7];let d;e[8]!==a||e[9]!==S||e[10]!==l||e[11]!==p||e[12]!==m||e[13]!==c.isTempChatVisible?(d=S?s.jsxs("div",{className:V("text-page-header flex flex-col items-center gap-2",c.isTempChatVisible&&"invisible"),children:[s.jsx("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]",children:s.jsx(Ee,le({},k.developerModeTitle))}),s.jsx("p",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-md text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:s.jsx(Ee,ke(le({},k.developerModeSubtitle),{values:{settings:s.jsx(As,{onClick:()=>p(Vt.ConnectorsAdvanced),children:s.jsx(Ee,le({},k.settingsLink))})}}))})]}):s.jsx("h1",{className:V("text-page-header inline-flex min-h-10.5 items-baseline whitespace-pre-wrap",c.isTempChatVisible&&"invisible"),"aria-hidden":l,children:s.jsx("div",{className:"px-1 text-pretty whitespace-pre-wrap",children:s.jsx(xr,{headlineOption:a,overrideMessage:m})})}),e[8]=a,e[9]=S,e[10]=l,e[11]=p,e[12]=m,e[13]=c.isTempChatVisible,e[14]=d):d=e[14];const x=!c.isTempChatVisible&&"hidden";let C;e[15]!==x?(C=V("bottom-0",x),e[15]=x,e[16]=C):C=e[16];const g=!l;let b;e[17]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(Ka,{}),e[17]=b):b=e[17];let y;e[18]!==C||e[19]!==g?(y=s.jsx("div",{className:C,"aria-hidden":g,children:b}),e[18]=C,e[19]=g,e[20]=y):y=e[20];let T;return e[21]!==y||e[22]!==d?(T=s.jsx("div",{className:"relative inline-flex justify-center text-center text-2xl leading-9 font-semibold",children:s.jsx("div",{children:s.jsxs("div",{className:"grid-cols-1 items-center justify-end",style:r,children:[d,y]})})}),e[21]=y,e[22]=d,e[23]=T):T=e[23],T}const k=Ht({developerModeTitle:{id:"SplashScreenV2.developerModeTitle",defaultMessage:"Developer mode"},developerModeSubtitle:{id:"SplashScreenV2.developerModeSubtitle",defaultMessage:"Memory is not used for this chat. {settings}"},settingsLink:{id:"SplashScreenV2.settingsLink",defaultMessage:"Settings"},whatCanIHelpWith:{id:"SplashScreenV2.whatCanIHelpWith",defaultMessage:"What can I help with?"},whatCanIHelpWithWithName:{id:"SplashScreenV2.whatCanIHelpWith.withName",defaultMessage:"What can I help with, {name}?"},whereShouldWeStart:{id:"SplashScreenV2.whereShouldWeStart",defaultMessage:"Where should we start?"},whereShouldWeStartWithName:{id:"SplashScreenV2.whereShouldWeStart.withName",defaultMessage:"Where should we start, {name}?"},askChatgptAnything:{id:"SplashScreenV2.askChatgptAnything",defaultMessage:"Ask ChatGPT anything"},askChatgptAnythingWithName:{id:"SplashScreenV2.askChatgptAnything.withName",defaultMessage:"Ask ChatGPT anything, {name}"},shouldWeBegin:{id:"SplashScreenV2.shouldWeBegin",defaultMessage:"Where should we begin?"},goodToSeeYouWithName:{id:"SplashScreenV2.goodToSeeYou.withName",defaultMessage:"Good to see you, {name}."},diveInWithName:{id:"SplashScreenV2.diveInWithName",defaultMessage:"Hey, {name}. Ready to dive in?"},readyWhenYouAre:{id:"SplashScreenV2.readyWhenYouAre",defaultMessage:"Ready when you are."},onYourMind:{id:"SplashScreenV2.onYourMind",defaultMessage:"What’s on your mind today?"},whatAreYouWorkingOn:{id:"SplashScreenV2.whatAreYouWorkingOn",defaultMessage:"What are you working on?"},agendaToday:{id:"SplashScreenV2.agendaToday",defaultMessage:"What’s on the agenda today?"},deepResearchPlaceholder:{id:"G1v9do",defaultMessage:"What are you researching?"},editNicknameTooltip:{id:"SplashScreenV2.editNicknameTooltip",defaultMessage:"Edit nickname"},howCanIHelp:{id:"SplashScreenV2.howCanIHelp",defaultMessage:"How can I help?"},howCanIHelpWithName:{id:"SplashScreenV2.howCanIHelp.withName",defaultMessage:"How can I help, {name}?"},chatgpt:{id:"SplashScreenV2.chatgpt",defaultMessage:"ChatGPT"},whatCanIDo:{id:"SplashScreenV2.whatCanIDo",defaultMessage:"What can I do for you?"}}),et={HELP_WITH:{original:k.whatCanIHelpWith,withName:k.whatCanIHelpWithWithName},WHERE_TO_START:{original:k.whereShouldWeStart,withName:k.whereShouldWeStartWithName},ASK_CHATGPT:{original:k.askChatgptAnything,withName:k.askChatgptAnythingWithName},HOW_CAN_I_HELP:{original:k.howCanIHelp,withName:k.howCanIHelpWithName},GOOD_TO_SEE_YOU:{original:k.goodToSeeYouWithName,withName:k.goodToSeeYouWithName},DIVE_IN:{original:k.diveInWithName,withName:k.diveInWithName},READY_WHEN_YOU_ARE:{original:k.readyWhenYouAre,withName:k.readyWhenYouAre},ON_YOUR_MIND:{original:k.onYourMind,withName:k.onYourMind},WHAT_ARE_YOU_WORKING_ON:{original:k.whatAreYouWorkingOn,withName:k.whatAreYouWorkingOn},AGENDA_TODAY:{original:k.agendaToday,withName:k.agendaToday},SHOULD_WE_BEGIN:{original:k.shouldWeBegin,withName:k.shouldWeBegin},WHAT_CAN_I_DO:{original:k.whatCanIDo,withName:k.whatCanIDo}},yr=fe(()=>ge(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([0,1,2])),{loading:t=>Ue(t)}),ls=t=>{var e,a;return(a=(e=pe.getBranch(t))==null?void 0:e.findLast(({message:m})=>m.author.role===Fs.Assistant&&m.recipient==="all"))==null?void 0:a.message},tt=Ls(t=>{const e=Rs(()=>Ws(t)),a=e?ls(e):null;return Ds(new Set(a?[a.id]:[]))}),Cr=t=>{"use forget";const e=ce.c(37),{conversation:a,zIndex:m,onClick:h,onReveal:l}=t,f=Oe();let c;e[0]!==a?(c=()=>tt(a),e[0]=a,e[1]=c):c=e[1];const n=L(c),[o,i]=Ce(a.id,Tr),u=Bs(i);let S;e[2]!==o?(S=o&&!!$s(o),e[2]=o,e[3]=S):S=e[3];const p=S,r=o==null?void 0:o.id;let d;e[4]!==n||e[5]!==r?(d=r&&n.has(r),e[4]=n,e[5]=r,e[6]=d):d=e[6];const x=d;let C;e[7]!==a||e[8]!==r?(C=()=>{r&&tt.set(a,new Set(tt(a).add(r)))},e[7]=a,e[8]=r,e[9]=C):C=e[9];const g=Je(C);let b;e[10]!==h||e[11]!==g?(b=()=>{g(),h()},e[10]=h,e[11]=g,e[12]=b):b=e[12];const y=Je(b),T=Je(l);let _,w;e[13]!==x||e[14]!==p||e[15]!==T?(_=()=>{p&&!x&&T()},w=[p,x,T],e[13]=x,e[14]=p,e[15]=T,e[16]=_,e[17]=w):(_=e[16],w=e[17]),M.useEffect(_,w);let E,v;e[18]!==x||e[19]!==u||e[20]!==p||e[21]!==g?(E=()=>{if(p&&!x&&!u){const A=setTimeout(()=>g(),5e3);return()=>{clearTimeout(A),g()}}},v=[p,x,u,g],e[18]=x,e[19]=u,e[20]=p,e[21]=g,e[22]=E,e[23]=v):(E=e[22],v=e[23]),M.useEffect(E,v);let I,j;e[24]!==g?(I=()=>()=>g(),j=[g],e[24]=g,e[25]=I,e[26]=j):(I=e[25],j=e[26]),M.useEffect(I,j);let N;return e[27]!==a||e[28]!==y||e[29]!==x||e[30]!==f||e[31]!==u||e[32]!==p||e[33]!==o||e[34]!==g||e[35]!==m?(N=p&&!x&&s.jsx(Ie,{className:"relative",style:{zIndex:m},children:s.jsxs($e.div,{className:V(Za.main,"group bg-token-bg-primary/80 shadow-long pointer-events-auto absolute -top-2 mx-0 mb-4 h-32 w-full cursor-pointer overflow-hidden rounded-3xl px-5 py-3 backdrop-blur-2xl select-none"),initial:{opacity:0,translateY:"-50%"},animate:{opacity:1,translateY:"-100%"},exit:{opacity:0,scale:.925,filter:"blur(12px)"},transition:{duration:.6,type:"spring",bounce:.12},onClick:y,children:[s.jsx("button",{"aria-label":f.formatMessage({id:"rbCAqY",defaultMessage:"Dismiss"}),className:"dark:bg-token-bg-secondary dark:hover:bg-token-bg-tertiary text-token-text-primary absolute end-2.5 top-2.5 z-50 flex h-6 w-6 items-center justify-center rounded-full bg-black/5 opacity-0 transition-opacity group-hover:opacity-100 hover:bg-black/10",onClick:A=>{A.stopPropagation(),g()},type:"button",children:s.jsx(yr,{className:"icon icon-sm"})}),o&&s.jsx(ir,{messages:[o],conversation:a,isFeedbackEnabled:!1,isCompletionInProgress:u,hasActiveRequest:u})]})}),e[27]=a,e[28]=y,e[29]=x,e[30]=f,e[31]=u,e[32]=p,e[33]=o,e[34]=g,e[35]=m,e[36]=N):N=e[36],N};function Tr(t){return[ls(t),pe.getRequestId(t)]}const wr=t=>{"use forget";const e=ce.c(20),{clientThreadId:a,onRequestCompletion:m}=t,h=ne();let l;e[0]!==a||e[1]!==h?(l=zt(h,a),e[0]=a,e[1]=h,e[2]=l):l=e[2];const f=l,c=eo(a),n=to(a);let o;e[3]!==f?(o=()=>Gt(f),e[3]=f,e[4]=o):o=e[4];const i=L(o),[u]=Ce(a,vr);let S;if(e[5]!==f||e[6]!==u||e[7]!==(i==null?void 0:i.id)||e[8]!==n||e[9]!==m){let r;e[11]!==f||e[12]!==u.length||e[13]!==(i==null?void 0:i.id)||e[14]!==n||e[15]!==m?(r=(d,x)=>{var C;return s.jsx(lr,{isFinalTurn:x===u.length-1,turnIndex:x,conversation:f,onRequestCompletion:m,currentModelId:(C=i==null?void 0:i.id)!=null?C:null,scrollToMessageId:void 0,dateHeaderType:n(x),hideUserActions:!0,disableHorizontalPadding:!0},d)},e[11]=f,e[12]=u.length,e[13]=i==null?void 0:i.id,e[14]=n,e[15]=m,e[16]=r):r=e[16],S=u.map(r),e[5]=f,e[6]=u,e[7]=i==null?void 0:i.id,e[8]=n,e[9]=m,e[10]=S}else S=e[10];let p;return e[17]!==c||e[18]!==S?(p=s.jsx("div",{onCopy:c,className:"flex flex-col px-7 text-sm",children:S}),e[17]=c,e[18]=S,e[19]=p):p=e[19],p};function vr(t){return[pe.getConversationTurnIds(t)]}const jr=fe(()=>ge(()=>import("./bqk4d9uy5l3d6vsz.js").then(t=>t._),__vite__mapDeps([3,1])),{loading:t=>Ue(t)}),st={duration:.4,type:"spring",bounce:.1},_r=50,Et=.5,at=Ke["fullscreen-widget-composer-transition"],Ir=Ke["fullscreen-popover-thread-opening-transition"],Ot=Ke["fullscreen-popover-thread-closing-transition"],Nr=t=>{"use forget";const e=ce.c(74),{clientThreadId:a,onRequestCompletion:m,composerController:h}=t,l=ne();let f;e[0]!==a||e[1]!==l?(f=zt(l,a),e[0]=a,e[1]=l,e[2]=f):f=e[2];const c=f,n=M.useRef(null),[o,i]=M.useState(!1),[u,S]=M.useState(!1);let p;e[3]!==l?(p=()=>ao(l).height,e[3]=l,e[4]=p):p=e[4];const r=L(p);let d;e[5]!==c?(d=()=>Ge(c).height$(),e[5]=c,e[6]=d):d=e[6];const x=L(d);let C;e[7]!==c?(C=()=>Ge(c).marginBottom$(),e[7]=c,e[8]=C):C=e[8];const g=L(C);let b;e[9]!==c?(b=He(c),e[9]=c,e[10]=b):b=e[10];const y=b;let T;e[11]!==y?(T=()=>y.pinnedWidgetType$(),e[11]=y,e[12]=T):T=e[12];const _=L(T);let w;e[13]!==y?(w=()=>y.showLoadingBar$(),e[13]=y,e[14]=w):w=e[14];const E=L(w),v=r*Et,I=r-_r-(g!=null?g:0),j=It(0),N=It(Et);let A;e[15]!==j||e[16]!==N?(A=[N,j],e[15]=j,e[16]=N,e[17]=A):A=e[17];let z;e[18]!==I||e[19]!==v||e[20]!==r?(z=O=>{const[R,F]=O;return Math.min(Math.max(R*r-F,v),I)},e[18]=I,e[19]=v,e[20]=r,e[21]=z):z=e[21];const $=Nt(A,z);let K;e[22]!==y.showLoadingBar$?(K=()=>Vs(zs,{requestCompletion:()=>{je({forceFlushSync:!0,className:[at,Ot],update:()=>{i(!1),y.showLoadingBar$.set(!0)}})},completionFinished:()=>{je({forceFlushSync:!0,className:at,update:()=>{y.showLoadingBar$.set(!1)}})}}),e[22]=y.showLoadingBar$,e[23]=K):K=e[23];let Q;e[24]!==y?(Q=[y],e[24]=y,e[25]=Q):Q=e[25],M.useEffect(K,Q);let Z;e[26]!==h?(Z=()=>{je({forceFlushSync:!0,className:Ir,update:()=>i(!0)});try{Gs(h).focus()}catch(O){requestAnimationFrame(()=>{var R;(R=n.current)==null||R.focus()})}},e[26]=h,e[27]=Z):Z=e[27];const G=Z;let B;e[28]!==h||e[29]!==o?(B=()=>!o&&(Us()&&Ys(h)||qs(h)),e[28]=h,e[29]=o,e[30]=B):B=e[30];const P=L(B);let J;e[31]!==I||e[32]!==v?(J=[v,I],e[31]=I,e[32]=v,e[33]=J):J=e[33];let re;e[34]===Symbol.for("react.memo_cache_sentinel")?(re=[0,1],e[34]=re):re=e[34];const U=Nt($,J,re);let Y;e[35]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(oo,{},"blur"),e[35]=Y):Y=e[35];let ee;e[36]!==a||e[37]!==g||e[38]!==G||e[39]!==_||e[40]!==E?(ee=E&&s.jsx(no,{clientThreadId:a,bottom:g!=null?g:0,onClick:G,pinnedWidgetType:_},"loading-bar"),e[36]=a,e[37]=g,e[38]=G,e[39]=_,e[40]=E,e[41]=ee):ee=e[41];let te;e[42]!==U||e[43]!==o?(te=o&&s.jsx($e.div,{initial:{opacity:0},animate:{opacity:U.get()},style:{opacity:U},exit:{opacity:0},className:"bg-token-bg-primary/50 pointer-events-auto fixed inset-0 top-(--header-height) opacity-0 backdrop-blur-xs",onClick:()=>{je({forceFlushSync:!0,className:Ot,update:()=>{S(!0),i(!1)}}).finished.then(()=>{S(!1)})}},"drag-overlay"),e[42]=U,e[43]=o,e[44]=te):te=e[44];let se;e[45]!==c||e[46]!==G||e[47]!==o||e[48]!==y.showLoadingBar$?(se=!o&&s.jsx(Cr,{zIndex:1,conversation:c,onClick:G,onReveal:()=>{je({forceFlushSync:!0,className:at,update:()=>{y.showLoadingBar$.set(!1)}})}},"last-message-banner"),e[45]=c,e[46]=G,e[47]=o,e[48]=y.showLoadingBar$,e[49]=se):se=e[49];let q;e[50]!==te||e[51]!==se?(q=s.jsxs(Ks,{children:[te,se]}),e[50]=te,e[51]=se,e[52]=q):q=e[52];let ae;e[53]!==G||e[54]!==o||e[55]!==P?(ae=!o&&s.jsx(Ie,{className:V("pointer-events-auto absolute start-0 end-0 top-0 z-[100] flex -translate-y-full justify-center pb-2 opacity-0 transition-opacity hover:opacity-100",P&&"opacity-100"),children:s.jsx("button",{onClick:G,className:"text-token-text-secondary border-token-border-default bg-token-bg-primary/50 relative z-30 flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border bg-clip-padding backdrop-blur-md after:absolute after:-inset-2 after:content-['']",children:s.jsx(jr,{className:"icon-sm text-token-text-primary"})})},"open-button"),e[53]=G,e[54]=o,e[55]=P,e[56]=ae):ae=e[56];let W;e[57]!==$||e[58]!==a||e[59]!==x||e[60]!==j||e[61]!==u||e[62]!==o||e[63]!==I||e[64]!==v||e[65]!==m||e[66]!==N||e[67]!==r?(W=(o||u)&&s.jsx("div",{tabIndex:-1,ref:n,className:V(u?"invisible":"[view-transition-name:fullscreen-popover-thread]","pointer-events-none absolute inset-x-0 bottom-0 mx-auto flex items-center justify-center rounded-3xl focus:ring-0 focus:outline-hidden focus-visible:ring-0 focus-visible:outline-hidden md:bottom-6"),role:"dialog","aria-modal":"true",onClick:Pr,children:s.jsx(Ie,{children:s.jsxs("div",{className:"relative overflow-visible",children:[s.jsx(Mr,{onDoubleClick:()=>{Xe(N,($.get()===I?v:I)/r,st)},onDragStart:()=>j.set(0),onDragEnd:O=>{const{velocity:R}=O,{y:F}=R,xe=Ar(-F,v,I,$.get());Xe(N,(xe===I?I:v)/r,st),Xe(j,0,st)},onDrag:O=>{const{delta:R}=O,{y:F}=R;return j.set(j.get()+F)}}),s.jsx("div",{className:"bg-token-bg-primary shadow-long pointer-events-auto mx-0 flex overflow-hidden rounded-t-3xl backdrop-blur-2xl md:-mx-2! md:rounded-[34px]",children:s.jsx($e.div,{className:"relative flex w-full flex-col-reverse overflow-y-auto",style:{height:$,paddingBottom:x!=null?x:0,WebkitMaskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)",maskImage:"linear-gradient(to bottom, black 0, black calc(100% - 64px), transparent calc(100% - 40px), transparent 100%)"},children:s.jsx(so,{children:s.jsx(wr,{onRequestCompletion:m,clientThreadId:a})})})})]})})},"popover-thread"),e[57]=$,e[58]=a,e[59]=x,e[60]=j,e[61]=u,e[62]=o,e[63]=I,e[64]=v,e[65]=m,e[66]=N,e[67]=r,e[68]=W):W=e[68];let D;return e[69]!==ee||e[70]!==q||e[71]!==ae||e[72]!==W?(D=s.jsxs(s.Fragment,{children:[Y,ee,q,ae,W]}),e[69]=ee,e[70]=q,e[71]=ae,e[72]=W,e[73]=D):D=e[73],D},Mr=t=>{"use forget";const e=ce.c(17),{onDrag:a,onDragEnd:m,onDoubleClick:h,onDragStart:l,onPointerUp:f}=t;let c,n,o,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1},n={opacity:1},o={type:"tween",duration:.1},i={x:0,y:0,transform:"translateY(0px)"},e[0]=c,e[1]=n,e[2]=o,e[3]=i):(c=e[0],n=e[1],o=e[2],i=e[3]);let u;e[4]!==l?(u=()=>{l==null||l()},e[4]=l,e[5]=u):u=e[5];let S;e[6]===Symbol.for("react.memo_cache_sentinel")?(S={left:0,right:0,top:0,bottom:0},e[6]=S):S=e[6];let p;e[7]!==a?(p=(x,C)=>{a==null||a(C)},e[7]=a,e[8]=p):p=e[8];let r;e[9]!==m?(r=(x,C)=>m==null?void 0:m(C),e[9]=m,e[10]=r):r=e[10];let d;return e[11]!==h||e[12]!==f||e[13]!==u||e[14]!==p||e[15]!==r?(d=s.jsx($e.div,{drag:"y",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute start-10 end-10 top-0 z-10 h-[4px] cursor-ns-resize rounded-b-full opacity-0 after:absolute after:inset-0 after:top-[-18px] after:h-[28px] after:bg-transparent after:content-['']",whileHover:c,whileDrag:n,transition:o,style:i,onPointerDown:u,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:S,onDrag:p,onPointerUp:f,onDragEnd:r,onDoubleClick:h}),e[11]=h,e[12]=f,e[13]=u,e[14]=p,e[15]=r,e[16]=d):d=e[16],d};function Ar(t,e,a,m){if(!(e<=a))throw new Error("min must be <= max");const h=.25,l=8,f=24,c=1200,n=Math.abs(m-e)<=Math.abs(m-a)?e:a,o=m+t*h,i=Math.abs(o-e)<=Math.abs(o-a)?e:a;if(i===n)return n;const u=(n+i)/2,S=Math.sign(i-n)||1,p=u+S*l;if(!(S>0?o>=p:o<=p))return n;const d=Math.abs(t),x=Math.min(d/c,1),C=f*(1-x*x);return Math.abs(o-n)-Math.abs(o-i)<C?n:i}function Pr(t){return t.stopPropagation()}const kr=fe(()=>ge(()=>import("./dx8c7lvygozv45al.js"),__vite__mapDeps([4,1,0,2,5,6])).then(t=>t.AgentConnectorsSafetyModal)),Er=({conversation:t,isNewThread:e,isGizmoThread:a,isProjectThread:m,currentModelId:h,onRequestCompletion:l,shouldUseUnifiedComposer:f,onlyAllowImageUploads:c,isWidgetFullScreen:n=!1,layoutMode:o})=>{const i=ne(),{height$:u}=Ge(t),S=Te(_e),p=ct(),{pageType:r}=ro(),d=(r==null?void 0:r.type)==="landing-page",x=Qs(r==null?void 0:r.type),C=Xt(t.id).isOdysseyMode,g=Zt(i),b=ht(),y=Js(),T=Oe(),_=Ve(i);io(p);const w=Te(_e),E=Xs(i),v=L(Mt.sidebarUrlTrayOpen$),I=L(Mt.context$),j=Dt(),N=w&&E&&v,A=Be(i,"1925940714"),{platformConnectors:z}=Zs(),$=lo(co.hasSeenOdysseyConnectorsModal),K=Ce(t.id,W=>pe.getConversationTurns(W).some(D=>D.messages.some(O=>{var R;return(R=O.metadata)==null?void 0:R.n7jupd_message}))),Q=es(),Z=mt(),G=L(()=>He(t).showLoadingBar$()),B=(Q||Z)&&K||n&&G;uo(async()=>{if(!N)return;const W=j?[j]:[];if(W.includes(Ft.Agent))return;const D=typeof performance<"u"?performance.now():Date.now();try{const O=await ca(I,vo,W,t.id),R=Math.round((typeof performance<"u"?performance.now():Date.now())-D);return O!=null?Fe.logEventWithStatsig("kaur1br5: Sidebar context collected","chatgpt_sidebar_context_collected",{duration_ms:R,count:Array.isArray(O)?O.length:1}):Fe.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",{duration_ms:R,failure_reason:"null"}),O}catch(O){const R=Math.round((typeof performance<"u"?performance.now():Date.now())-D),F=O instanceof ua;Fe.logEventWithStatsig("kaur1br5: Sidebar context collection failure","chatgpt_sidebar_context_collection_failure",le({duration_ms:R,failure_reason:F?"timeout":"error"},O&&typeof O=="object"&&"message"in O?{error_message:String(O.message)}:O?{error_message:String(O)}:{}));return}},()=>N||!A.get("completion_request_blocking_promise_optimization",!1));const P=Ut(),J=async W=>{var xe,ue,oe,Se,Le,he,be,Ne;if(((xe=oa(t.id))==null?void 0:xe.isLoading)!==!1)return;const D=await xo(W),O=re((oe=(ue=D.promptMessage.metadata)==null?void 0:ue.attachments)!=null?oe:[]);if(P&&O){const{promptMessage:de,parentMessageId:ie}=D;return So.debug("Relaying message to voice participant"),bo({type:"RELAY",message:de,parentMessageId:ie})}const R=(Le=(Se=D.completionMetadata)==null?void 0:Se.systemHints)==null?void 0:Le.includes(nt),F=Array.from((he=W.selectedSources)!=null?he:[]).filter(de=>de!=="web")[0];if(R&&F&&$.eligible){const de=(be=na[F])!=null?be:F,ie=z.get(de);if(ie){Yt(i,kr,{connector:ie,onConfirm:()=>{$.markAsViewed(),l(D)},onTurnOffConnectors:()=>{ra(t.id,X=>{var Me,Ae;(Me=X.selectedSources)!=null||(X.selectedSources=new Map),X.selectedSources.set(j,new Set(["web"])),(Ae=X.selectedMCPSources)!=null||(X.selectedMCPSources=new Map),X.selectedMCPSources.set(j,new Set),X.mentionedSources=new Set,ia({selectedSourcesMap:X.selectedSources,selectedMCPSourcesMap:X.selectedMCPSources,scope:{userId:_==null?void 0:_.authUserId,workspaceId:_==null?void 0:_.id}})})}});return}}if(w){const de=!!I,ie=v===!0;E&&(!de||!ie)&&la.error("Missing context chip on message send",{clientThreadId:t.id,hasSidebarContext:de,isContextChipOpen:ie,contextEnabled:E,isBridgedDesktopSidebar:w,shouldCollectSidebarContext:N}),(Ne=da())==null||Ne.triggerProductEvent("messageSent")}O&&l(D)},re=M.useCallback(W=>{let D=ta;const O=W.reduce((F,xe)=>{var ue;return F+((ue=xe.size)!=null?ue:0)},0);C&&(D=ea(i,"1504865540").get("max_file_size_mb",25));const R=O<=D*1024*1024;return R||y.danger(T.formatMessage({id:"odyssey.fileTooLarge",defaultMessage:"The attached files are too large. The maximum size is {maxFileSizeMB}MB."},{maxFileSizeMB:D})),R},[i,T,C,y]),U=M.useCallback(W=>{Fe.logEvent("Continue Completion"),l(ho(W))},[l]),Y=mo.useState(W=>W.isReplayEnabled),ee=sa({clientThreadId:t.id}),te=aa({clientThreadId:t.id});if(ee)return s.jsx(po,{safetyLimited:te});const se=e&&!a,q=s.jsxs(s.Fragment,{children:[s.jsx(go,{clientThreadId:t.id}),s.jsxs(it,{ref:ts({axis:"height",onChange:({height:W})=>u.set(W)}),verticalMargin:"none",verticalPadding:g?"last-standard":"none",horizontalPadding:w?"none":"standard",children:[n&&s.jsx(Nr,{clientThreadId:t.id,composerController:p,onRequestCompletion:l}),s.jsx(Ie,{className:V(S&&"w-full max-w-full"),children:Y?s.jsx(fo,{clientThreadId:t.id},t.id):B?s.jsx("div",{className:"pointer-events-none h-14"}):s.jsx(sr,{conversation:t,currentModelId:h,isNewThread:e,isProjectThread:m,hideHeader:se,onRequestCompletion:J,onContinueGenerating:U,onlyAllowImageUploads:c,layoutMode:o})})]})]}),ae=se&&s.jsx("div",{className:V("[display:var(--display-hidden-until-loaded,block)] md:absolute md:start-0 md:bottom-8 md:w-full"),children:s.jsx(it,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsx(Ie,{className:V(S&&"w-full max-w-full"),children:s.jsx(ar,{className:"block flex-1"})})})});return f?s.jsxs(s.Fragment,{children:[!b&&ae,s.jsx("div",{id:"thread-bottom",children:q}),b&&ae,e&&!d&&!a&&!x&&!C&&!m&&s.jsx(Or,{clientThreadId:t.id,currentModelId:h})]}):q},Or=t=>{"use forget";const e=ce.c(32),{clientThreadId:a,currentModelId:m}=t,h=ct();let l;e[0]!==h?(l=Jt(h),e[0]=h,e[1]=l):l=e[1];const f=L(l.shouldShowAutocomplete$),c=ss();let n;e[2]!==a?(n={shouldBeEnabledForDefaultAssistant:!0,clientThreadId:a},e[2]=a,e[3]=n):n=e[3];const o=Qt(n),i=yo();let u;e[4]!==a?(u={clientThreadId:a,canShowBanner:!0},e[4]=a,e[5]=u):u=e[5];const{shouldShow:S}=or(u),p=ne();let r;e[6]!==p?(r=()=>{if(qt(p)||!jo(p))return;const{data:v}=_o(p);if(v&&!Io(v.id)(p))return v},e[6]=p,e[7]=r):r=e[7];const d=L(r),x=lt(),C=f&&"hidden";let g;e[8]!==C?(g=V(C),e[8]=C,e[9]=g):g=e[9];let b;e[10]!==a||e[11]!==c||e[12]!==x||e[13]!==d?(b=!c&&s.jsxs(s.Fragment,{children:[s.jsx(Co,{clientThreadId:a}),d&&s.jsx(To,{pulseId:d.id,caption:d.caption,previewImages:d.preview_items.map(Hr),onClick:()=>x("/pulse")})]}),e[10]=a,e[11]=c,e[12]=x,e[13]=d,e[14]=b):b=e[14];let y;e[15]!==i||e[16]!==a||e[17]!==m||e[18]!==o?(y=o==="tiles"||o==="hscroll"?m&&a?s.jsx(rs,{className:"mt-10 max-sm:hidden",layout:"carousel"}):null:o==="image_gen_banner"&&i?s.jsx("div",{className:"mt-16 flex justify-center max-sm:hidden",children:s.jsx(No,{})}):o==="chips"?m&&s.jsx(nr,{clientThreadId:a,currentModelId:m}):null,e[15]=i,e[16]=a,e[17]=m,e[18]=o,e[19]=y):y=e[19];let T;e[20]!==S?(T=S&&s.jsx("div",{className:"hidden justify-center pt-8 sm:flex",children:s.jsx(rr,{})}),e[20]=S,e[21]=T):T=e[21];let _;e[22]!==b||e[23]!==y||e[24]!==T?(_=s.jsx(it,{verticalMargin:"none",verticalPadding:"none",horizontalPadding:"standard",children:s.jsxs(Ie,{children:[b,y,T]})}),e[22]=b,e[23]=y,e[24]=T,e[25]=_):_=e[25];let w;e[26]!==c?(w=c&&s.jsxs("div",{className:"thread-sm:flex mt-5 hidden flex-col gap-2",children:[s.jsx(Mo,{}),s.jsx(Ao,{}),s.jsx(Po,{})]}),e[26]=c,e[27]=w):w=e[27];let E;return e[28]!==_||e[29]!==w||e[30]!==g?(E=s.jsxs("div",{className:g,children:[_,w]}),e[28]=_,e[29]=w,e[30]=g,e[31]=E):E=e[31],E};function Hr(t){return wo(t.image_url)}const Lr=({clientThreadId:t})=>{const e=ne(),a=as(d=>d.activeStageSidebar),m=ko(Eo.WorkspaceShareLinks),{isUnauthenticated:h}=ha(),l=$t(),f=ma(t),c=Ye(e,f);L(()=>c&&f?Ho(e,f).gizmo$():null);const n=ze(e,"16480203"),o=Oo(),i=pa(),u=Te(qe),S=m&&!h&&!l&&(!c||n)&&!o&&!i&&!u&&!0,p=!a,r=u;return s.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:s.jsx(ur,{showShareButton:S,showProfileDropdown:p,showConversationPrivacyIndicator:r,clientThreadId:t})})};function Rr({projectResource:t}){var b;const e=Oe(),a=ne(),m=(b=t.gizmo)==null?void 0:b.id,h=Ye(a,m),l=Te(_e),f=Lt(),c=(()=>{const y=f.pathname.replace(/\/+$/,"");return/^\/g\/[^/]+\/project$/.test(y)})(),n=ga(t),o=t.gizmo.display.name,i=L(()=>Wo(a,t)),u=L(()=>Do(a,t));if(!(h&&!l&&!c)||t.gizmo.gizmo_type!==fa.PROJECT)return null;const p=o?e.formatMessage(ot.openProjectHome,{projectName:o}):e.formatMessage(ot.openProjectHomeFallback),r=xa(a,t),d=s.jsx(Ro,{color:i,emoji:u,strict:!0,isSharedProject:n}),x=p,C=s.jsx(Rt,{to:r,"aria-label":x,className:"hover:bg-token-bg-tertiary focus-visible:outline-token-outline-primary text-token-text-secondary ms-2 inline-flex h-9 w-9 items-center justify-center rounded-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:d}),g=o!=null?o:e.formatMessage(ot.projectNameFallback);return s.jsxs("div",{className:"flex items-center",children:[s.jsx(ut,{label:g,children:C}),s.jsx(Lo,{className:"icon-sm text-token-text-tertiary","aria-hidden":"true"})]})}const ot=Ht({openProjectHome:{id:"threadHeader.openProjectHome",defaultMessage:"Open {projectName} project"},openProjectHomeFallback:{id:"threadHeader.openProjectHomeFallback",defaultMessage:"Open project home"},projectNameFallback:{id:"threadHeader.projectNameFallback",defaultMessage:"Project"}}),Wr=fe(()=>ge(()=>import("./j0yo6uv6652vva62.js").then(t=>t.yy),__vite__mapDeps([5,1,0,2,6])),{loading:t=>Ue(t)}),Dr=fe(()=>ge(()=>import("./j0yo6uv6652vva62.js").then(t=>t.yE),__vite__mapDeps([5,1,0,2,6])),{loading:t=>Ue(t)}),Fr=fe(()=>ge(()=>import("./jqgq3jgwhjb65of8.js"),__vite__mapDeps([7,1,0,2,8,5,6,9,10,11,12,13,14,15,16,17])).then(t=>t.GizmoUsingAsOwnerNotice)),Br="text-lg",$r="icon-sm";function Vr({conversation:t,transparentBackground:e,isEmptyState:a}){var B,P,J,re;const m=ne(),h=os(m),l=L(()=>va(t)),f=Ye(m,l),c=Fo(),{data:n}=Sa(l),o=Ve(m),i=o==null?void 0:o.getWorkspaceId(),u=ba(),{data:S}=ya(i),p=(B=u==null?void 0:u.data.profilePictureUrl)!=null?B:null,r=(P=u==null?void 0:u.data.name)!=null?P:void 0,d=!!(u!=null&&u.isWorkspaceAccount()&&p&&((J=S==null?void 0:S.beta_settings)!=null&&J[Ca.SHOW_LOGO_IN_HEADER])),x=ht(),C=Ta(),[g,b]=Te(U=>[qe(U),_e(U)]),y=rt(t.id),T=as(U=>U.isConversationScrolledFromTop),_=Ce(t.id,pe.hasUserMessage)||!y,w=mt(),E=w&&C,v=ns()&&_&&!w,I=!l&&!v&&!b,{shouldShow:j,handleClose:N}=Bo({clientThreadId:t.id,fromHeader:!0}),A=j&&!E,z=!dt(m),$=s.jsx($o,{clientThreadId:t.id,children:s.jsx(Lr,{clientThreadId:t.id})}),K=g&&!v?{textClassName:Br,chevronClassName:$r}:{},Q=v?s.jsx(Vo,{threadHeaderDropdown:s.jsx(Ze,le({conversation:t},K)),conversationActions:$}):b?s.jsx(zo,{clientThreadId:t.id}):x&&(f||!l)?s.jsx(Ze,{conversation:t}):s.jsx(Ze,le({conversation:t},K)),Z=(()=>{const U="[box-shadow:var(--sharp-edge-top-shadow)]",Y="[box-shadow:var(--sharp-edge-top-shadow-placeholder)]";return g?"":h?Y+" group-data-scroll-from-top/thread:"+U:T?U:Y})(),G=L(()=>He(t).hasPinnedWidget$());return s.jsxs(s.Fragment,{children:[s.jsxs(Go,{id:"page-header",className:V("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition",!v&&!b&&"max-md:hidden",a&&"absolute start-0 end-0",f&&y&&"sharp-edge-on-scroll-start sticky top-0",I&&"thread-xl:absolute thread-xl:start-0 thread-xl:end-0 thread-xl:shadow-none!",I&&!w&&!G&&"thread-xl:bg-transparent",e&&!w&&!v&&!b&&"bg-transparent",Z,T&&A&&"thread-xl:bg-token-main-surface-primary thread-xl:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[!b&&!v&&s.jsxs("div",{className:"pointer-events-none absolute start-0 flex flex-col items-center gap-2 lg:start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[n==null&&d&&p&&s.jsx(Uo,{src:p,alt:r!=null?r:""}),n!=null&&(o==null?void 0:o.isWorkspaceAccount())&&((re=n.gizmo.tags)==null?void 0:re.includes(wa.WorkspaceDisabled))&&s.jsx(Fr,{gizmo:n}),A&&s.jsx("div",{className:"hidden lg:block",children:s.jsx(Pt,{onClose:N,clientThreadId:t.id})}),E&&s.jsx(dr,{})]}),s.jsxs("div",{className:V("flex",v||b?"w-full":"items-center"),children:[z&&!b&&ze(m,"2860321732")&&s.jsx(zr,{}),n&&s.jsx(Rr,{projectResource:n}),Q,!b&&!v&&s.jsx("div",{className:"block lg:hidden",children:A?s.jsx(Pt,{onClose:N,clientThreadId:t.id}):null})]}),!v&&!b&&s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(Yo,{gizmoId:l,clientThreadId:t.id})}),s.jsx("div",{className:"flex items-center gap-2",children:$})]})]}),c&&s.jsx(qo,{})]})}const zr=()=>{"use forget";const t=ce.c(12),e=ne();let a;t[0]!==e?(a=()=>qe(e),t[0]=e,t[1]=a):a=t[1];const m=L(a),h=Ko();let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(Ee,{id:"mG13YW",defaultMessage:"New chat"}),t[2]=l):l=t[2];const f=m&&"self-center";let c;t[3]!==f?(c=V("hover:bg-token-bg-tertiary group touch:h-10 flex aspect-square h-9 items-center justify-center rounded-[10px]",f),t[3]=f,t[4]=c):c=t[4];let n;t[5]!==e?(n=u=>{Qo(e,u,{location:"Anon desktop header"})},t[5]=e,t[6]=n):n=t[6];let o;t[7]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsxs("div",{children:[s.jsx(Dr,{className:"icon-lg -m-1 group-hover:hidden"}),s.jsx(Wr,{className:"icon not-group-hover:hidden"})]}),t[7]=o):o=t[7];let i;return t[8]!==h||t[9]!==c||t[10]!==n?(i=s.jsx(ut,{label:l,contentClassName:"cant-hover:hidden",triggerAs:null,children:s.jsx(Rt,{to:"/",state:h,className:c,onClick:n,children:o})}),t[8]=h,t[9]=c,t[10]=n,t[11]=i):i=t[11],i},Gr=fe(()=>ge(()=>import("./pcwyhd2ia1xnez4s.js"),__vite__mapDeps([18,1,0,2,5,6])).then(t=>t.ThreadReportConversationModal)),Ur=fe(()=>ge(()=>import("./9z79ocopszbdxlwz.js"),__vite__mapDeps([19,1,5,0,2,6,20,21]))),Yr=fe(()=>ge(()=>import("./cta8fbfu7nzu39nv.js"),__vite__mapDeps([22,1,0,2,5,6,23,24,25,26])).then(t=>t.TableOfContentsSidebar));function qr({conversation:t,isNewScrollEnabled:e,pageLoadSearchQuery:a,footerRootContainerElementRef:m,threadRootRef:h,scrollContainerRef:l,isModalView:f=!1,children:c}){const[n]=js(),o=!!n.get("message"),[i,u]=Te(d=>[_e(d),qe(d)]),S=Ce(t.id,d=>(d==null?void 0:d.conversationOrigin)===Va.APPLE),p=L(()=>He(t).pinnedWidgetHeight$());if(e)return s.jsx(Qn,{allowScrollToEnd:!i,allowScrollToTop:!i&&S,clientThreadId:t.id,initScrolledToEnd:a==null&&!o,threadFooterRef:m,threadRootRef:h,children:c});const r=s.jsx("div",{className:"relative h-full",style:{"--pip-widget-height":p?"".concat(p,"px"):"0px"},children:s.jsxs("div",{className:V("flex h-full flex-col overflow-y-auto",!u&&!f&&(p?"pt-(--pip-widget-height)":"thread-xl:pt-(--header-height)"),u||i?"thread-sm:[scrollbar-gutter:stable_both-edges] [scrollbar-gutter:stable]":"[scrollbar-gutter:stable_both-edges]",f&&"thread-md:pt-4"),ref:l,children:[s.jsx($a,{className:"absolute start-0 top-0",setIsScrolledToEdge:d=>{pt.setIsConversationScrolledFromTop(d)},options:{root:l==null?void 0:l.current}}),c]})});return a!=null?r:s.jsx(Kt,{children:s.jsxs(M.Suspense,{fallback:null,children:[s.jsx(Jn,{}),r]})})}const Kr=function({conversation:t,withCustomCompletionParams:e,hideDisclaimer:a,hideHeader:m,renderEmptyState:h,isModalView:l=!1}){"use no forget";var Tt;const f=Oe(),c=ja(),n=ne(),o=Jo(n),i=ss(),u=os(n),S=ht(),p=_a(),r=Xo(t.id),[d,x,C,g,b]=Ce(t.id,H=>[H==null?void 0:H.isLoading,pe.hasUserMessage(H),pe.getConversationTurns(H).length,pe.isArchived(H),H?pe.getGizmoId(H):p]),y=Ia(t.id),T=M.use(hr),_=L(()=>Xn(n)&&Zn(n).isFeedbackModalOpen$());M.useEffect(()=>Zo(n,t.id),[n,t.id]);const[w]=M.useState(T==null?void 0:T.query),[E,v]=M.useState(T==null?void 0:T.navlink);M.useEffect(()=>{d||(rt(t.id)?At.addTiming("chatgpt.web.chatPage.renderNewConversation"):At.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[t.id,d]);const{setTargetedContent:I}=en(),j=c==null?void 0:c.includes(tn),N=C>=2,A=Na(n),z=Te(_e),$=es(),{hash:K}=Lt(),Q=lt(),Z=mt(),{isOpen:G}=sn();M.useEffect(()=>{K==="#report"&&(Yt(n,Gr,ke(le({clientThreadId:t.id},$&&(t!=null&&t.sharedConversationId)?{serverThreadId:t.sharedConversationId,isSharedConversation:!0}:{}),{isStaticSharedThread:!1})),Q({hash:""},{replace:!0}))},[t,n,K,$,Q]);const B=!!b,P=rt(t.id)&&!N&&(kt(r)||(r==null?void 0:r.kind)===Ma.GizmoTest)&&!$&&!Z&&T==null&&(!A||B),J=P&&!x&&T==null&&(!A||B),re=z&&!x&&!B,U=L(()=>Gt(t)),Y=U.id,ee=Aa.useStore(),{systemHints:te}=Pa(),se=(Tt=Ve(n))==null?void 0:Tt.isWorkspaceAccount();M.useEffect(()=>{if(Y===ka)return ee.setActiveSystemHint(nt,te,{locked:!0,analyticsMetadata:{clientThreadId:t.id}}),()=>{ee.setActiveSystemHint(null,te,{locked:!1,ifPrevSystemHint:nt,analyticsMetadata:{clientThreadId:t.id}},se)}},[Y,ee,t.id,te,se]);const q=an(t.id,r),ae=on();M.useEffect(()=>{ae||I(void 0)},[t.id,I,ae]),M.useEffect(()=>{pt.setIsConversationScrolledFromTop(!1)},[t.id]),M.useEffect(()=>{const H=new URLSearchParams(window.location.search),me=H.get("src");if(me==="history_search"){H.delete("src");const ye=H.toString(),We="".concat(window.location.pathname).concat(ye?"?".concat(ye):"").concat(window.location.hash);window.history.replaceState({},document.title,We)}y&&me==="history_search"&&Ea.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:y}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{const ye=Oa(n);nn(ye,b)})},[n,y,b]);const W=M.useCallback(H=>{var ye,We;const me=le({conversation:t},e?e(H):H);if((We=(ye=me.completionMetadata)==null?void 0:ye.systemHints)!=null&&We.some(De=>Ha(De))&&qt(n)){const De=La(n);De&&(me.requestedModelId=De)}rn(me)},[n,t,e]),D=ln(n),O=Ra(),R=M.useRef(null);R.current=H=>{P&&!O&&!A&&Wa(n,"3253785454").get("should_animate_composer",!1)?je({className:Ke["composer-slide"],update:()=>W(H)}):W(H)};const F=M.useCallback(H=>{var me;return(me=R.current)==null?void 0:me.call(R,H)},[R]);M.useEffect(()=>{D.signalTransitionReady()},[D,t.id]),dn(t.id,F),cn(),un(t.id),hn(F),mn(P);const xe=pn({clientThreadId:t.id,handleRequestCompletion:F,prefetchSearchThreadIdPromise:T==null?void 0:T.threadId})&&w==null,ue=M.useRef(null);M.useEffect(()=>{!Z&&!i&&(document.title=q!=null?q:"ChatGPT")},[q,Z,i,f]);const oe=Ye(n,b),Se=J&&!h&&oe,Le=Zt(n),he=Ve(n),be=Ce(t.id,H=>H==null?void 0:H.sharedProjectConversationOwner),Ne=oe&&(be==null?void 0:be.id)!=null&&be.id!==(he==null?void 0:he.normalizedAccountUserId),de=he&&!he.isSelfServeBusiness()&&!he.isEnterprisey(),ie=!a&&!Le&&!z&&!Se&&!(A&&!S)&&!(P&&de)&&kt(r),X=Xt(t.id).isOdysseyMode,Me=M.useRef(null),Ae=M.useRef(null),gt=gn(H=>H.composerHeight),ft=!P&&!G&&!z,ds=ns()&&!J,Re=!oe,cs=P,us=M.useCallback(()=>v(void 0),[]),{isSingleLine:xt}=L(()=>za(n)),hs=Ut(),St=!Da(),Pe=L(()=>He(t).displayMode$()==="fullscreen"),ms=P&&!B&&!St?"center":"bottom",{shouldShow:bt,isLoading:yt}=fn({skip:!P}),[ps]=M.useState(xn(n)),Qe=Sn(n)&&dt(n)&&!bn()&&!ps&&P&&!Pe&&!G&&!St&&!B&&!A&&!Fa()&&!yt&&!bt&&!X,{auraAnnouncementBannerState$:gs,setAuraAnnouncementBannerState:Ct}=yn(n),fs=L(()=>gs());M.useEffect(()=>{Qe||Ct("not-shown")},[Qe,Ct]);const xs=Cn();function Ss(){return s.jsx(Yr,{clientThreadId:t.id,scrollContainerRef:ue})}function bs(){return d||xe?null:J?Se?s.jsx($n,{clientThreadId:t.id,gizmoId:b,currentModelId:Y,onRequestCompletion:F}):h!=null?h:s.jsx(s.Fragment,{children:B?s.jsx(Vn,{conversation:t,gizmoId:b,onRequestCompletion:F,currentModelId:Y}):s.jsx(fr,{clientThreadId:t.id,currentModelId:Y})}):N||w!=null||_?s.jsx(qr,{conversation:t,isNewScrollEnabled:u,pageLoadSearchQuery:w,footerRootContainerElementRef:Ae,threadRootRef:Me,scrollContainerRef:ue,isModalView:l,children:s.jsx(cr,{onRequestCompletion:F,conversation:t,scrollContainerRef:ue,pageLoadSearchQuery:w,prefetchNavlink:E,clearPrefetchNavlink:us},t.id)}):null}return s.jsx(Tn.Provider,{value:E?"user-query-with-navlink":w?"user-query":null,children:s.jsx(wn,{serverThreadId:y,children:s.jsx(vn,{clientThreadId:t.id,children:s.jsxs(Ba,{conversation:t,children:[s.jsx(Jr,{conversation:t}),j&&s.jsx(Ur,{}),!Z&&!i&&s.jsx(jn,{children:q!=null&&s.jsx("title",{children:q})}),s.jsx(_n.Provider,{value:F,children:s.jsxs(In,{children:[s.jsx("div",{id:"thread",ref:Me,className:V("group/thread @container/thread h-full w-full",u&&Rn.threadRoot),children:s.jsxs(er,{noKeyboard:!0,clientThreadId:t.id,currentModelConfig:U,className:V("composer-parent flex flex-col focus-visible:outline-0",!oe&&"overflow-hidden",Se?"min-h-full":"h-full"),children:[!m&&s.jsx(Vr,{transparentBackground:P&&!Se,conversation:t,isEmptyState:J}),ze(n,"1909635392")&&s.jsx(Nn,{clientThreadId:t.id}),s.jsxs("div",{className:V("relative basis-auto flex-col",ft&&"-mb-(--composer-overlap-px)",ft&&(xt?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),oe||B||!P?"grow":"shrink",Se?"grid":"flex",!P&&"overflow-hidden",P&&i&&"sm:min-h-[21svh]!",P&&!oe&&!B&&"flex-col justify-end max-sm:grow max-sm:justify-center sm:min-h-[42svh]",o),style:{"--composer-height":gt?"".concat(gt,"px"):void 0},children:[xs&&Ss(),bs(),A&&re&&s.jsx(Mn,{}),ds&&s.jsx(An,{})]}),s.jsxs("div",{id:"thread-bottom-container",className:V("group/thread-bottom-container relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",Pe&&"pointer-events-none",!P&&!Pe&&"content-fade",xt&&"single-line",Ne&&"[--content-fade-height:110px]",Ne&&"[--content-fade-top:-110px]",P&&"min-h-0",!ie&&!z&&!X&&"mb-4",B||oe||!P?"":Re&&P&&"sm:grow",Re&&"flex flex-col",Pe&&"z-60",o),ref:Ae,children:[g?s.jsx(Pn,{clientThreadId:t.id}):s.jsxs(s.Fragment,{children:[(!P||Re)&&!G&&s.jsxs(s.Fragment,{children:[s.jsx(Er,{isGizmoThread:B,isProjectThread:oe,conversation:t,isNewThread:P,currentModelId:Y,onRequestCompletion:F,shouldUseUnifiedComposer:Re,layoutMode:ms,isWidgetFullScreen:Pe,onlyAllowImageUploads:hs}),S&&P&&ze(n,"537200474")&&s.jsx(kn,{clientThreadId:t.id})]}),cs&&s.jsx(En,{clientThreadId:t.id,isGizmoThread:B,isNewThread:P,isProjectThread:oe})]}),ie?s.jsx("div",{ref:ts({axis:"height",onChange:({height:H})=>Ge(t).marginBottom$.set(H)}),className:V("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs [view-transition-name:var(--vt-disclaimer)] md:px-[60px]",fs!=="not-shown"&&"opacity-0"),children:s.jsx(On,{clientThreadId:t.id})}):null]}),bt&&!yt&&s.jsx(Hn,{clientThreadId:t.id}),s.jsx(Kt,{children:Qe&&s.jsx(Ln,{shouldShowDisclaimer:ie,clientThreadId:t.id})})]})}),s.jsx(Wn,{}),s.jsx(Dn,{conversationId:t.id}),s.jsx(Fn,{}),s.jsx(Bn,{})]})})]})})})})},ii=Wt.memo(Kr);function Qr({conversation:t}){return zn(t),Gn(),Un(),Yn(t),qn(),Kn(t),null}const Jr=Wt.memo(Qr);export{Lr as C,ii as M,Rr as P};
//# sourceMappingURL=bc51ukj7a2qfpnc3.js.map

var R=Object.defineProperty,O=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(a,e,s)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,y=(a,e)=>{for(var s in e||(e={}))A.call(e,s)&&B(a,s,e[s]);if(b)for(var s of b(e))L.call(e,s)&&B(a,s,e[s]);return a},v=(a,e)=>O(a,x(e));import{a as N,e as F,j as d,M as w,f as G,L as I,c as J,u as V,h as W}from"./i8clt0mfz495j7ii.js";import{dK as $,ge as g,gf as C,gg as p,gh as z,dM as U,gi as X,cT as Y}from"./j0yo6uv6652vva62.js";import{P as Z,cg as ee,R as te,C as se,aJ as ae,aL as ie,M as E,bQ as q,bO as oe}from"./ghewn7l2ynbm32fm.js";function re(a){return N({mutationFn:async({serverThreadId:e,gizmoId:s})=>await te.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:{is_visible:!1}}),onMutate:async({serverThreadId:e,gizmoId:s})=>{await a.cancelQueries({queryKey:g().queryKey}),await a.cancelQueries({queryKey:C().queryKey}),s&&await a.cancelQueries({queryKey:p(s).queryKey});const t=a.getQueryData(g().queryKey),n=a.getQueryData(C().queryKey);a.setQueryData(g().queryKey,i=>{var c;return i&&v(y({},i),{pages:(c=i.pages)==null?void 0:c.map(o=>{const u=o.items.some(r=>r.id===e)?o.items.filter(r=>r.id!==e):o.items;return v(y({},o),{items:u})})})}),a.setQueryData(C().queryKey,z(e));let l=null;return s&&(l=a.getQueryData(p(s).queryKey),a.setQueryData(p(s).queryKey,i=>{var c;return i&&v(y({},i),{pages:(c=i==null?void 0:i.pages)==null?void 0:c.map(o=>{var u;return v(y({},o),{items:(u=o==null?void 0:o.items)!=null&&u.some(r=>r.id===e)?o.items.filter(r=>r.id!==e):o.items})})})})),{prevData:t,prevStarredConversations:n,prevSnorlaxConversations:l}},onError:(e,{gizmoId:s},t)=>{t!=null&&t.prevData&&a.setQueryData(g().queryKey,t.prevData),t!=null&&t.prevStarredConversations&&a.setQueryData(C().queryKey,t.prevStarredConversations),t!=null&&t.prevSnorlaxConversations&&s&&a.setQueryData(p(s).queryKey,t.prevSnorlaxConversations)},onSettled:(e,s,{serverThreadId:t,gizmoId:n},l)=>{Z.logEventWithStatsig("Conversation Deleted","chatgpt_conversation_deleted"),ee.publish({kind:"deleteConversation",serverThreadId:t}),$(a,n)}})}function ne({title:a,handleDelete:e,onClose:s}){const t=F(),n=U();return d.jsxs(se,{testId:"modal-delete-conversation-confirmation",isOpen:!0,onClose:()=>s(),type:"success",title:t.formatMessage(h.deleteModalTitle),primaryButton:d.jsx(E.Button,{title:t.formatMessage(h.deleteModalConfirm),color:"danger",onClick:()=>{e(),s()},"data-testid":"delete-conversation-confirm-button"}),secondaryButton:d.jsx(E.Button,{title:t.formatMessage(h.deleteModalCancel),color:"secondary",onClick:()=>s()}),children:[d.jsx(w,v(y({},h.deleteModalBody),{values:{title:d.jsx("strong",{children:a})}})),n&&d.jsx("div",{className:"text-token-text-tertiary mt-2 text-sm",children:d.jsx(w,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"Visit <link>settings</link> to delete any memories saved during this chat.",values:{link:l=>d.jsx(I,{to:ae(ie.Personalization),className:"underline",onClick:()=>{setTimeout(()=>{s({closeParentModal:!0})},100)},children:l})}})})]})}const ye=a=>{"use forget";var T,j,_,k;const e=J.c(15),{conversationTitle:s,serverThreadId:t,onClose:n,isActiveConversation:l,gizmoId:i}=a,c=V(),o=W();let u;e[0]!==t?(u=q(t),e[0]=t,e[1]=u):u=e[1];const r=u,D=X();let m;e[2]!==D.conversations||e[3]!==t?(m=(T=D.conversations.find(P=>P.id===t))==null?void 0:T.title,e[2]=D.conversations,e[3]=t,e[4]=m):m=e[4];const H=m,K=re(c);let f;e[5]!==K||e[6]!==i||e[7]!==l||e[8]!==o||e[9]!==t?(f=()=>{K.mutate({serverThreadId:t,gizmoId:i!=null?i:oe.getGizmoId(q(t))}),l&&Y(o,{replace:!0})},e[5]=K,e[6]=i,e[7]=l,e[8]=o,e[9]=t,e[10]=f):f=e[10];const Q=f,S=(k=(_=(j=r==null?void 0:r.title)!=null?j:H)!=null?_:s)!=null?k:"";let M;return e[11]!==Q||e[12]!==n||e[13]!==S?(M=d.jsx(ne,{title:S,handleDelete:Q,onClose:n}),e[11]=Q,e[12]=n,e[13]=S,e[14]=M):M=e[14],M},h=G({deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}});export{ne as DeleteConversationConfirmationModal,ye as DeleteConversationConfirmationModalContainer};
//# sourceMappingURL=abwq3htfqpekhs38.js.map

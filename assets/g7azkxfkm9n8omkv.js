const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/opdg2x67e4phtvxr.js","assets/i8clt0mfz495j7ii.js","assets/ceivmd4pm4umbvdn.js","assets/dt74bs5wyg16icnh.js","assets/bgxcag65uz54fc39.js","assets/j4nmkdkymh0gf9lt.js","assets/dzlsnt42nnmwuxsc.js","assets/rsi9kppw43ykrsgk.js","assets/mdgmhl7nsma70wnx.js","assets/gsyp9a9fup59ufmh.js","assets/ogo8hvquv5crkyqt.js","assets/mytnxs3zwbflla4u.js"])))=>i.map(i=>d[i]);
var Ae=Object.freeze,Oe=Object.defineProperty,hs=Object.defineProperties;var js=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var ys=Object.prototype.hasOwnProperty,_s=Object.prototype.propertyIsEnumerable;var Be=(s,a,t)=>a in s?Oe(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,k=(s,a)=>{for(var t in a||(a={}))ys.call(a,t)&&Be(s,t,a[t]);if(Ue)for(var t of Ue(a))_s.call(a,t)&&Be(s,t,a[t]);return s},F=(s,a)=>hs(s,js(a));var ne=(s,a)=>Ae(Oe(s,"raw",{value:Ae(a||s.slice())}));import{j as e,M as n,d as h,r as M,e as $,u as me,_ as A,f as Ye,b as ks}from"./i8clt0mfz495j7ii.js";import{G as r,F as He,jk as vs,u as Z,h as ws,C as G,M as Q,cK as Ms,q as bs,z as Xe,eU as pe,o as U,L as B,eS as f,p8 as H,eV as E,p9 as Je,e as $e,B as Ns,a5 as Ps,o4 as Ts,en as ae,n as Rs,eW as de,d as xe,e4 as C,pa as Ss,T as Fe,$ as X,o3 as Cs,eo as Is,o5 as Ls,R as Ze}from"./ghewn7l2ynbm32fm.js";import{dv as Es,dw as As,U as Us,h_ as ze,x as y,dy as es,bk as Bs,g8 as Os,d$ as Fs,aS as zs,aT as We,gX as Ws}from"./j0yo6uv6652vva62.js";import{C as qs}from"./n3bxkos2zhscnn5x.js";function ss(s){return s==r.User||s==r.Group?r.Private:s==r.WorkspaceLink?r.Workspace:s}function z(s,a){return s=ss(s),a===void 0?!1:a.some(t=>t.recipient===s&&t.allowed)}function ge(s,a){if(a===void 0)return[];s=ss(s);const t=a.find(c=>c.recipient===s);return t==null?void 0:t.moderated_fields}function le(s,a){const t=ge(s,a);return t&&t.length>0}var Qe;const qe=He.a(Qe||(Qe=ne(["bold underline"])));var Ge;const Ds=He.textarea(Ge||(Ge=ne(["w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32"])));var as=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(as||{}),ts=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(ts||{});function ga(s){var c;if(!s)return;const a=((c=s.gizmo.appeal_info)==null?void 0:c.state.kind)==="appeal_sent",t=Vs(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:t,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:t!==0?1:0}}const De={[r.User]:r.Private,[r.Group]:r.Private,[r.WorkspaceLink]:r.Workspace};function Vs(s,a=[]){const t=new Set(a.filter(d=>d.allowed).map(d=>d.recipient));if(!s||(s in De&&(s=De[s]),t.has(s)))return 0;const c=t.has(r.Private)||t.has(r.Workspace),l=t.has(r.Link)||t.has(r.Marketplace);return s===r.Marketplace&&l?2:!l&&c?3:4}function Ve(s){switch(s){case 0:case 1:return h({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return h({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return h({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 4:return h({id:"gizmo.appeals.removedFromPrivateTitle",defaultMessage:"Your GPT has been removed from private view"});case 5:return h({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"})}}function Ks(s){switch(s){case"profile_picture":return h({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return h({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return h({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return h({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return h({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return h({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return h({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return h({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return h({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"GPT Content"})}}function Qs(s){switch(s){case r.Private:case r.Workspace:return h({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Link:return h({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case r.Marketplace:return h({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:vs(s)}}function is({sharingRecipient:s,moderatedFields:a,appealAvailable:t}){const c=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(n,F(k({},Qs(s)),{values:{usagePolicyLink:l=>e.jsx(qe,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:l})}}))," ",c>0&&e.jsx(n,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:"{numModeratedFields, plural,\n              one {See below for the specific issue:}\n              other {See below for the specific issues:}\n            }",values:{numModeratedFields:c}})]}),c>0&&(a==null?void 0:a.map(l=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(n,k({},Ks(l.name)))}),e.jsx("ul",{className:"list-disc ps-5",children:l.reasons.map(d=>e.jsxs("li",{children:[d.description," ",d.link?e.jsx(qe,{href:d.link,target:"_blank",rel:"noreferrer",children:e.jsx(n,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},d.description))})]}))),t&&e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function Gs({gizmoId:s,sharingRecipient:a,categories:t,moderationType:c,sharingTargets:l,appealAvailable:d,onClose:m,onAppealSubmitted:v}){var q;const j=$(),[R,W]=M.useState(""),[g,b]=M.useState(0),[S,N]=M.useState(!1),w=me(),I=async()=>{N(!0);try{await pe.postGizmoAppeal(w,s,R,a,t),b(2),v==null||v()}finally{N(!1)}},p=ge(a,l),u=(q=p==null?void 0:p.length)!=null?q:0,o=Z(),O=Xe(o);if(u==0&&(O==null?void 0:O.isEnterprisey()))return e.jsx(G,{testId:"modal-gizmo-appeal-available",title:j.formatMessage(Ve(c)),isOpen:!0,onClose:m,showCloseButton:!0,type:"warning",primaryButton:e.jsx(Q.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(n,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(g){case 0:return e.jsx(G,{testId:"modal-gizmo-appeal-available",title:j.formatMessage(Ve(c)),isOpen:!0,onClose:m,showCloseButton:!0,primaryButton:e.jsx(Q.Button,{color:"primary",onClick:m,children:e.jsx(n,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:d?e.jsx(Q.Button,{onClick:()=>b(1),children:e.jsx(n,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(is,{sharingRecipient:a,moderatedFields:p!=null?p:[],appealAvailable:d})})});case 1:return e.jsx(G,{testId:"modal-gizmo-appeal-form",title:j.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:m,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(Q.Button,{color:"primary",onClick:I,disabled:S||R.trim().length===0,children:e.jsx(n,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(Q.Button,{onClick:()=>b(0),children:e.jsx(n,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(Ds,{value:R,onChange:ee=>W(ee.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function Ys({onClose:s}){const a=$();return e.jsx(G,{testId:"modal-gizmo-appeal-submitted",title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(Q.Button,{color:"primary",onClick:s,children:e.jsx(n,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(n,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function Hs({gizmoId:s,onClose:a}){const{data:t}=Ms(s,!0),c=me(),l=async()=>{await pe.postGizmoCancelAppeal(c,s)};return e.jsx(G,{testId:"modal-gizmo-appeal-sent",isOpen:!0,onClose:bs,primaryButton:e.jsx(Q.Button,{color:"primary",onClick:()=>{l(),a==null||a()},children:e.jsx(n,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(n,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(n,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:t==null?void 0:t.gizmo.display.name}})})]})})}function fa({appealState:s,onAppealClose:a,onAppealSubmitted:t}){const c=Z(),l=ws(c,"4226692983"),[d,m]=M.useState(!1);return d?e.jsx(Ys,{onClose:()=>{m(!1),t==null||t()}}):e.jsxs(e.Fragment,{children:[(s==null?void 0:s.showModal)==2&&e.jsx(Hs,{gizmoId:s.gizmoId,onClose:a}),(s==null?void 0:s.showModal)==1&&e.jsx(Gs,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a==null?void 0:a(),onAppealSubmitted:()=>m(!0)})]})}const oe=U(()=>A(()=>import("./opdg2x67e4phtvxr.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>B(s)}),Xs=U(()=>A(()=>import("./ceivmd4pm4umbvdn.js").then(s=>s._),__vite__mapDeps([2,1])),{loading:s=>B(s)}),Js=U(()=>A(()=>import("./dt74bs5wyg16icnh.js").then(s=>s._),__vite__mapDeps([3,1])),{loading:s=>B(s)}),$s=U(()=>A(()=>import("./bgxcag65uz54fc39.js").then(s=>s._),__vite__mapDeps([4,1])),{loading:s=>B(s)}),Ke=U(()=>A(()=>import("./j4nmkdkymh0gf9lt.js").then(s=>s._),__vite__mapDeps([5,1])),{loading:s=>B(s)}),ue=U(()=>A(()=>import("./dzlsnt42nnmwuxsc.js").then(s=>s._),__vite__mapDeps([6,1])),{loading:s=>B(s)}),Zs=U(()=>A(()=>import("./rsi9kppw43ykrsgk.js").then(s=>s._),__vite__mapDeps([7,1])),{loading:s=>B(s)}),ea=U(()=>A(()=>import("./mdgmhl7nsma70wnx.js").then(s=>s._),__vite__mapDeps([8,1])),{loading:s=>B(s)}),sa=U(()=>A(()=>import("./gsyp9a9fup59ufmh.js").then(s=>s._),__vite__mapDeps([9,1])),{loading:s=>B(s)}),aa=U(()=>A(()=>import("./ogo8hvquv5crkyqt.js").then(s=>s._),__vite__mapDeps([10,1])),{loading:s=>B(s)}),rs=U(()=>A(()=>import("./mytnxs3zwbflla4u.js"),__vite__mapDeps([11,1])).then(s=>s.DirectorySyncResourceManagedIndication)),ta=()=>[E,H,Ss];function ns(s,a){return s.type===f.USER?s.user_id===a.user_id:s.type===f.GROUP?s.group_id===a.group_id:s.type===f.EMAIL?a.type===f.EMAIL&&s.user_email.toLowerCase()===a.user_email.toLowerCase():s.type===a.type}const ia={[f.USER]:r.User,[f.GROUP]:r.Group,[f.WORKSPACE]:r.Workspace,[f.ALL]:r.Marketplace};function ls(s){const a=ia[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return F(k({},s),{type:a})}function ra({gizmo:s,publishedGizmo:a,updateGizmo:t,promoteGizmo:c,appealGizmo:l,setAppealState:d,showActionsModal:m,shareOnly:v,onClose:j,workspaceOwner:R=!1}){var Me,be,Ne,Pe,Te,Re,Se,Ce,Ie;const W=Z(),g=$(),b=$e(),S=Ns(),N=(be=(Me=S==null?void 0:S.data)==null?void 0:Me.name)!=null?be:"your workspace",w=Ps(),I=Ts(),[p,u]=M.useState(void 0);M.useEffect(()=>{var i;if(p==null)if(a!=null&&a.gizmo.display.categories&&(a==null?void 0:a.gizmo.display.categories.length)>0){const x=(i=I.data)==null?void 0:i.categories.find(L=>L.id===(a==null?void 0:a.gizmo.display.categories[0]));x&&u(x)}else I.data!=null&&u(I.data.categories[I.data.categories.length-1])},[I.data,p,a]);const[o,O]=M.useState((Ne=s.sharingRecipient)!=null?Ne:r.Private),[_,q]=M.useState((Te=(Pe=s.sharing)==null?void 0:Pe.subjects)!=null?Te:[]),[ee,ds]=M.useState(null),[je,ye]=M.useState(!1),te=M.useRef(null),_e=M.useRef(_.length);M.useEffect(()=>{_.length>_e.current&&requestAnimationFrame(()=>{var i;(i=te.current)==null||i.scrollTo({top:te.current.scrollHeight,behavior:"smooth"})}),_e.current=_.length},[_]);const us=M.useCallback(()=>{var i;return!ae((i=s.sharing)==null?void 0:i.subjects,_)||s.sharingRecipient!==o},[s.sharing,s.sharingRecipient,o,_]),D=me(),ke=Es(s,o,(Re=p==null?void 0:p.id)!=null?Re:void 0),ms=ke.includes(As.MissingPublicActionPrivacyPolicyURL),ie=s.tools.find(i=>i.type===Rs.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(ee)return e.jsx(cs,{publishedGizmo:ee,sharing:{recipient:o,subjects:_},workspaceName:N,onClose:j});function ps(i){_.find(x=>ns(x,i))||q([..._,i])}const P=Je(_);function re(i){const x=_.filter(L=>[f.WORKSPACE,f.ALL].indexOf(L.type)===-1);i!=null&&x.push(i),q(x)}function xs(i){switch(O(i),i){case r.Marketplace:case r.Link:re({type:f.ALL,capabilities:E});break;case r.Workspace:case r.WorkspaceLink:re({type:f.WORKSPACE,capabilities:E});break;default:re(null)}}function ve(i){P!=null&&q(_.map(x=>x===P?F(k({},x),{capabilities:i}):x))}function gs(i,x,L){return i.type===f.USER&&i.user_id.indexOf("__")===-1?F(k({},i),{user_id:i.user_id+"__"+(S==null?void 0:S.getWorkspaceId())}):i}async function fs(i,x){var Y,Le;if(je)return;if(i&&!x)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!p)return;ye(!0);let V=_.map(gs).map(ls);if(V=Ls(o,V,(Y=P==null?void 0:P.capabilities)!=null?Y:E),R)return!S||!x?(b.warning("Unable to change sharing settings"),j()):(await Ze.safePost("/accounts/{account_id}/gpts/{gizmo_id}/share",{parameters:{path:{account_id:S.id,gizmo_id:x}},requestBody:{sharing:V}}),b.success(g.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),D.invalidateQueries({queryKey:["workspace"]}),j());if(i){if(!x||!a)throw new Error("No gizmo ID to share");try{const T={sharing:V};p&&(T.categories=[p.id]);const se=await pe.shareGizmo(x,T);se.error?le(o,se.sharing_targets)?(d==null||d({gizmoId:a.gizmo.id,sharingRecipient:o,categories:a.gizmo.display.categories,moderationType:ts.PublishBlocked,sharingTargets:se.sharing_targets,showModal:as.AppealAvailable}),j()):b.warning(g.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(D.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],Ee=>se.resource),t==null||t(Ee=>F(k({},Ee),{sharingRecipient:o})),b.success(g.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),j())}catch(T){return b.warning(g.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),j()}}else{if(c){const T=await c({subjects:V,recipient:o},p.id);x||(x=T==null?void 0:T.gizmo.id),ds(T!=null?T:null),t==null||t({liveVersion:(Le=T==null?void 0:T.gizmo.live_version)!=null?Le:void 0})}D.invalidateQueries({queryKey:["gizmo",{gizmoId:x}]})}ye(!1),D.invalidateQueries({queryKey:["gizmos"]}),D.refetchQueries({queryKey:["gizmos","discovery"]}),D.refetchQueries({queryKey:["gizmo",{gizmoId:x}]}),D.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:x}]}),D.invalidateQueries({queryKey:["workspace"]}),t==null||t({sharing:{recipient:o,subjects:_},sharingRecipient:o},!1)}const we=!a||oa(a.gizmo.author.user_id.split("__")[0],w==null?void 0:w.id);return e.jsx(G,{testId:"modal-share-gizmo",type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:j,primaryButton:le(o,s.sharingTargets)?e.jsx(X,{onClick:()=>l(o,p==null?void 0:p.id),children:e.jsx(n,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(X,{onClick:()=>fs(v,a==null?void 0:a.gizmo.id),loading:je,disabled:ke.length>0||!z(o,s.sharingTargets),children:v?e.jsx(n,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(n,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[us()&&e.jsx("div",{className:"text-token-text-secondary absolute start-6 bottom-8 text-sm",children:e.jsx(n,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(X,{color:"secondary",onClick:i=>es(W,a,b,i,g.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:g.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(la,{onAdd:i=>ps(i),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{ref:te,className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:we?e.jsx(Us,{user:w}):e.jsx(ze,{name:(Se=a.gizmo.author.display_name)!=null?Se:"User",initialsCount:2})}),e.jsx("div",{className:"grow text-base font-semibold",children:we?e.jsxs("div",{className:"flex flex-col",children:[e.jsx(n,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:w==null?void 0:w.name}}),e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:w==null?void 0:w.email})]}):e.jsx(n,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a.gizmo.author.display_name}})})]}),_.map((i,x)=>de(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(ze,{name:i.type===f.GROUP?i.group_name:"".concat(i.user_name," ").concat(i.user_email),initialsCount:i.type===f.USER?2:1,className:xe("shrink-0 grow-0",i.type===f.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 text-base font-semibold",children:i.type===f.GROUP?i.group_name:i.user_name}),i.type===f.GROUP&&i.is_scim_managed&&e.jsx(rs,{})]}),i.type===f.USER&&e.jsx("span",{className:"text-token-text-secondary -mt-1 text-sm",children:i.user_email})]}),e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[e.jsx(n,k({},J(i.capabilities))),e.jsx(ue,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[ta().map((L,V)=>e.jsx(ce,{capabilities:L,selected:ae(L,i.capabilities),onClick:()=>{q(_.map(Y=>Y===i?F(k({},Y),{capabilities:L}):Y))}},V)),e.jsx(C.Separator,{className:"my-2"}),e.jsx(C.Item,{onClick:()=>q(_.filter(L=>L!==i)),color:"danger",icon:Xs,children:e.jsx(n,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},x))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(n,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(y.Root,{value:o,onValueChange:i=>xs(i),children:[e.jsxs(y.Trigger,{children:[e.jsx(y.Value,{}),e.jsx(y.Icon,{})]}),e.jsx(y.Portal,{children:e.jsxs(y.Content,{children:[e.jsxs(y.Group,{children:[e.jsx(y.Label,{children:e.jsx(n,{id:"YIQwaP",defaultMessage:"Private"})}),o===r.User?e.jsx(y.Item,{value:r.User,children:e.jsx(K,{shareLevel:r.User,workspaceName:N})}):e.jsx(y.Item,{value:r.Private,children:e.jsx(K,{shareLevel:r.Private,workspaceName:N})})]}),e.jsx(y.Separator,{}),e.jsx(Fe,{triggerAs:null,label:g.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:z("workspace",s.sharingTargets),children:e.jsxs(y.Group,{children:[e.jsx(y.Label,{children:N}),e.jsx(y.Item,{value:r.WorkspaceLink,disabled:!z(r.WorkspaceLink,s.sharingTargets)&&!z(r.Workspace,s.sharingTargets),children:e.jsx(K,{shareLevel:r.WorkspaceLink,workspaceName:N})}),e.jsx(y.Item,{value:r.Workspace,disabled:!z("workspace",s.sharingTargets),children:e.jsx(K,{shareLevel:r.Workspace,workspaceName:N})})]})}),e.jsx(y.Separator,{}),e.jsx(Fe,{triggerAs:null,label:g.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:z("marketplace",s.sharingTargets),children:e.jsxs(y.Group,{children:[e.jsx(y.Label,{children:e.jsx(n,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(y.Item,{value:r.Link,disabled:!z("link",s.sharingTargets),children:e.jsx(K,{shareLevel:r.Link,workspaceName:N})}),e.jsx(y.Item,{disabled:!z("marketplace",s.sharingTargets),value:r.Marketplace,children:e.jsx(K,{shareLevel:r.Marketplace,workspaceName:N})})]})})]})})]}),o!==r.Private&&o!==r.User&&e.jsxs(C.Root,{children:[e.jsxs(C.Trigger,{className:"text-token-text-secondary text-base whitespace-nowrap",children:[P==null?e.jsx(n,k({},J(E))):e.jsx(n,k({},J(P.capabilities))),e.jsx(ue,{className:"icon"})]}),e.jsx(C.Portal,{children:e.jsxs(C.Content,{className:"max-w-[320px]",children:[e.jsx(ce,{onClick:()=>ve(E),capabilities:E,selected:ae(P==null?void 0:P.capabilities,E)}),o!==r.Marketplace&&o!==r.Link&&e.jsx(ce,{onClick:()=>ve(H),capabilities:H,selected:ae(P==null?void 0:P.capabilities,H)})]})})]})]}),ms&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(n,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{m==null||m(ie==null?void 0:ie.metadata.action_id),j()},className:"underline",children:i})}})}),(o===r.Marketplace||o===r.Workspace)&&(z(o,s.sharingTargets)?e.jsx(he,{gizmo:s,category:p==null?void 0:p.id,categories:(Ce=I.data)==null?void 0:Ce.categories,onCategoryChange:i=>u(i)}):le(o,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(is,{sharingRecipient:o,moderatedFields:(Ie=ge(o,s.sharingTargets))!=null?Ie:[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(n,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const os=Ye({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},email:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),na=Ye({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function J(s){return s.can_write?h({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?h({id:"V6OjbX",defaultMessage:"Can view settings"}):s.can_read?h({id:"/0j34W",defaultMessage:"Can chat"}):h({id:"x2E8ET",defaultMessage:"Unknown"})}function ce({capabilities:s,selected:a,onClick:t}){let c=null;s.can_write?c=$s:s.can_view_config?c=Js:s.can_read&&(c=ea);const l=s.can_write?e.jsx(n,{id:"wKFMT1",defaultMessage:"Edit settings, duplicate, and chat"}):s.can_view_config?e.jsx(n,{id:"Y/J4TZ",defaultMessage:"See settings, duplicate, and chat"}):s.can_read?e.jsx(n,{id:"PvgEQP",defaultMessage:"Chat with this GPT only"}):null;return e.jsxs(C.Item,{className:"flex h-auto flex-row items-center px-3 py-3",onClick:t,icon:c,children:[e.jsxs("div",{className:"me-1 flex grow flex-col",children:[e.jsx("span",{className:"mb-0.5 text-base leading-tight",children:e.jsx(n,k({},J(s)))}),e.jsx("span",{className:"text-token-text-secondary text-xs",children:l})]}),e.jsx(Zs,{className:xe("icon-lg shrink-0",!a&&"invisible")})]})}const fe={private:oe,user:oe,group:oe,workspace_link:Ke,workspace:sa,link:Ke,marketplace:aa};function K({shareLevel:s,workspaceName:a,hasInviteSharing:t=!0}){(s===r.User||s===r.Group)&&(s=r.Private);const c=fe[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-sm",children:[e.jsx(c,{className:"icon text-token-text-secondary"}),e.jsx("div",{className:"pt-px text-start",children:!t&&s===r.Private?e.jsx(n,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(n,F(k({},os[s]),{values:{workspaceName:a}}))})]})}function cs({publishedGizmo:s,sharing:a,workspaceName:t,onClose:c}){var R,W;const l=Z(),d=a.recipient,m=fe[d],v=$(),j=$e();return e.jsxs(G,{testId:"modal-gizmo-updated",isOpen:!0,onClose:c,showCloseButton:!0,className:"w-[304px]",title:e.jsx(n,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(X,{onClick:()=>{window.location.href="/g/".concat(s.gizmo.id)},children:e.jsx(n,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(X,{color:"secondary",onClick:g=>es(l,s,j,g,v.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(n,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(he,{gizmo:{profilePictureUrl:(R=s.gizmo.display.profile_picture_url)!=null?R:void 0,name:s.gizmo.display.name}}),a.subjects.filter(g=>de(g)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((g,b)=>de(g)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:g.type===f.GROUP?g.group_name:g.user_name}),g.type===f.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:g.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,k({},J(g.capabilities)))})]},b))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-token-text-secondary text-xs font-semibold",children:e.jsx(n,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ms-[3px] flex flex-row items-center py-3 text-start text-base font-semibold",children:[e.jsx(m,{className:"md:icon-lg me-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,F(k({},(W=na[d])!=null?W:os[d]),{values:{workspaceName:t}}))}),(d===r.Workspace||d===r.Marketplace)&&e.jsx("span",{className:"text-token-text-secondary text-xs"})]})]})]})]})}function he({gizmo:s,category:a,categories:t,onCategoryChange:c}){const{data:l,isLoading:d}=Cs(),m=t==null?void 0:t.find(v=>v.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:xe("bg-token-main-surface-secondary mb-[1px] flex flex-row items-center space-x-2 p-4",d&&"invisible",t?"rounded-t-lg":"rounded-lg"),children:[e.jsx(Bs,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(Os,{builderName:l==null?void 0:l.display_name,builderUrl:l==null?void 0:l.website_url,socials:[l==null?void 0:l.socials.linkedin,l==null?void 0:l.socials.github].filter(v=>v!=null),className:"text-token-text-secondary text-xs"})]})]}),t&&e.jsxs("div",{className:"bg-token-main-surface-secondary flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:c?e.jsx(Is,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[m==null?void 0:m.title,e.jsx(ue,{className:"icon"})]}),children:t.map((v,j)=>e.jsx(C.Item,{onClick:()=>c(v),children:v.title},j))}):e.jsx("span",{className:"text-token-text-secondary",children:m==null?void 0:m.title})})]})]})}function la({onAdd:s,publishedGizmo:a}){var w,I,p;const t=$(),c=Z(),l=Xe(c),[d,m]=M.useState(""),j=(w=Fs(l==null?void 0:l.id,0,d,5).data)==null?void 0:w.items.filter(u=>u.account_user_id!==(a==null?void 0:a.gizmo.author.user_id)),{data:R}=ks({queryKey:[l==null?void 0:l.id,"groups","filtered",d],queryFn:()=>Ze.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:l.id},query:{query:d,offset:0,orderby:"@score",limit:20}}}),enabled:d.trim()!==""&&l!=null&&!!l.getWorkspaceId()});function W(u,o,O){s({type:f.GROUP,group_id:u,group_name:o,capabilities:k({},E),is_scim_managed:O}),m("")}function g(u,o,O){l&&(s({type:f.USER,user_id:u,user_name:o,user_email:O,capabilities:k({},E)}),m(""))}const b=l!=null&&l.isEnterprisey()?t.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):t.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),{eligible:S,markAsViewed:N}=zs(We.hasSeenMultipleGPTEditorsTooltip);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsx(Ws,{announcementKey:We.hasSeenMultipleGPTEditorsTooltip,show:S,side:"right",align:"center",className:"w-full",sideOffset:0,contentClassName:"z-100",childrenWrapperClassName:"w-full",theme:"bright",dismissOnOutsideClick:!0,badge:"new",description:t.formatMessage({id:"SR33A6",defaultMessage:"You can now add editors to collaborate on your GPTs."}),onDismiss:N,children:e.jsx(qs,{label:b,name:"share-with-input",inputValue:d,onInputChange:m,suggestions:[...(I=j==null?void 0:j.map(u=>({id:u.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var o;return g(u.account_user_id,u.name,(o=u.email)!=null?o:"")},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-full font-semibold",children:u.name}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:u.email})]})})))!=null?I:[],...(p=R==null?void 0:R.items.map(u=>({id:u.id,className:"flex flex-col rounded-xs p-1 hover:bg-token-main-surface-tertiary rounded-xs p-1 text-sm",focusedClassName:"bg-token-main-surface-tertiary",onClick:()=>{var o;return W(u.id,u.name,(o=u.is_scim_managed)!=null?o:!1)},children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"me-2 font-semibold",children:u.name}),u.is_scim_managed&&e.jsx(rs,{})]}),e.jsx("span",{className:"text-token-text-secondary text-sm",children:e.jsx(n,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:u.num_members}})})]})})))!=null?p:[]]})})})})}function oa(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}const ca={findHighestSharingSubject:Je,duplicateSharingSubject:ns,CAP_READ:E,CAP_VIEW_CONFIG:H},ha=Object.freeze(Object.defineProperty({__proto__:null,GizmoTile:he,GizmoUpdatedModal:cs,SHARE_LEVEL_ICONS:fe,ShareGizmoModal:ra,ShareLevelItem:K,TestExports:ca,sharingSubjectToSharingParam:ls},Symbol.toStringTag,{value:"Module"}));export{as as A,he as G,ts as M,K as S,ra as a,fe as b,cs as c,fa as d,ha as e,ga as g,z as i,ls as s};
//# sourceMappingURL=g7azkxfkm9n8omkv.js.map

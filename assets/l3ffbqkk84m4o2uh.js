const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ceivmd4pm4umbvdn.js","assets/i8clt0mfz495j7ii.js","assets/kn7epy984tqokc8q.js","assets/bgxcag65uz54fc39.js","assets/di5elmieu5gkw656.js","assets/nju52ppu7cxhyzrm.js","assets/jgvrewhnjcf398o6.js","assets/dzlsnt42nnmwuxsc.js","assets/h20ncp7lry8zfhq6.js","assets/l907avfvlrp6ls67.js","assets/rsi9kppw43ykrsgk.js"])))=>i.map(i=>d[i]);
var R=Object.defineProperty,T=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var v=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||(t={}))N.call(t,n)&&v(e,n,t[n]);if(f)for(var n of f(t))I.call(t,n)&&v(e,n,t[n]);return e},w=(e,t)=>T(e,L(t));var E=(e,t)=>{var n={};for(var o in e)N.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&f)for(var o of f(e))t.indexOf(o)<0&&I.call(e,o)&&(n[o]=e[o]);return n};import{_ as l,j as s,r as m,M as j,o as J,h as M}from"./i8clt0mfz495j7ii.js";import{o as d,L as u,e as O,eo as F,e4 as A,b0 as V,d as g,cj as q}from"./ghewn7l2ynbm32fm.js";import{mI as z,mJ as h,mK as B,mL as K,c6 as H,c7 as Q,c8 as U,cI as G,i8 as W,h3 as X,h4 as Y}from"./j0yo6uv6652vva62.js";const S=d(()=>l(()=>import("./ceivmd4pm4umbvdn.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>u(e)}),Z=d(()=>l(()=>import("./kn7epy984tqokc8q.js").then(e=>e._),__vite__mapDeps([2,1])),{loading:e=>u(e)}),$=d(()=>l(()=>import("./bgxcag65uz54fc39.js").then(e=>e._),__vite__mapDeps([3,1])),{loading:e=>u(e)}),ee=d(()=>l(()=>import("./di5elmieu5gkw656.js").then(e=>e._),__vite__mapDeps([4,1])),{loading:e=>u(e)}),se=d(()=>l(()=>import("./nju52ppu7cxhyzrm.js").then(e=>e._),__vite__mapDeps([5,1])),{loading:e=>u(e)});function te({automation:e,updateForceShowActions:t,onClickEdit:n,onClickDelete:o}){return e.next_run_times.length===0?s.jsx(ne,{onClickDelete:o}):s.jsx(oe,{automation:e,updateForceShowActions:t,onClickEdit:n,onClickDelete:o})}function ne({onClickDelete:e}){return s.jsx("div",{children:s.jsx(k,{onClick:e,children:s.jsx(S,{className:"icon"})})})}function oe({automation:e,updateForceShowActions:t,onClickEdit:n,onClickDelete:o}){const a=O(),[r,i]=m.useState(e.is_enabled);m.useEffect(()=>i(e.is_enabled),[e.is_enabled]);const{mutate:x}=z({automation_id:e.id,onError:c=>{a.danger(c?h.messages.enableFailure:h.messages.pauseFailure,{toastId:"toggle_automation_status"}),i(!c)}});return s.jsxs("div",{className:"flex",children:[s.jsx(k,{onClick:n,children:s.jsx($,{className:"icon"})}),s.jsxs(F,{size:"auto",contentAlign:"end",sideOffset:4,triggerButton:s.jsx("button",{className:"hover:bg-token-main-surface-secondary rounded-md p-2",children:s.jsx(se,{className:"icon"})}),onOpenChange:c=>{t(c)},children:[s.jsx(A.Item,{label:r?s.jsx(j,_({},h.messages.pause)):s.jsx(j,_({},h.messages.resume)),icon:r?s.jsx(ee,{className:"icon"}):s.jsx(Z,{className:"icon"}),onClick:()=>{i(!r),x({is_enabled:!r})}}),s.jsx(A.Item,{color:"danger",label:s.jsx(j,_({},h.messages.delete)),icon:s.jsx(S,{className:"icon"}),onClick:o})]})]})}function k(n){var o=n,{children:e}=o,t=E(o,["children"]);return s.jsx("button",w(_({className:"hover:bg-token-main-surface-secondary rounded-md p-2"},t),{children:e}))}const re=d(()=>l(()=>import("./jgvrewhnjcf398o6.js").then(e=>e._),__vite__mapDeps([6,1])),{loading:e=>u(e)});function ae({automation:e}){return e.next_run_times.length===0?e.last_run_time?s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(B,{dateString:e.last_run_time})}):null:e.schedule_components?s.jsx(ie,{automation:e}):null}function ie({automation:e}){return s.jsxs("div",{className:"text-token-text-secondary flex items-center gap-1 text-sm",children:[ce(e)&&s.jsx(re,{className:"icon-sm"}),s.jsx(K,{item:e,useShortForm:!0})]})}function ce(e){var t;return((t=e.schedule_components)==null?void 0:t.frequency)!=="once"}const le=d(()=>l(()=>import("./dzlsnt42nnmwuxsc.js").then(e=>e._),__vite__mapDeps([7,1])),{loading:e=>u(e)});function de({filter:e}){const{isLoading:t,isFetchingNextPage:n,hasNextPage:o,fetchNextPage:a}=J({queryKey:["automations",e],queryFn:async({pageParam:r})=>{const i=await Q.getAutomations(r,e);return U.initJawbonesFromServerData(i.items,i.cursor,e),i},initialPageParam:H.getCursor(e),getNextPageParam:r=>{var i;return(i=r.cursor)!=null?i:void 0}});return t||n?s.jsx(V,{}):o?s.jsxs("button",{className:"flex cursor-pointer items-center gap-1",onClick:()=>{a()},children:[s.jsx(le,{className:"icon text-token-text-secondary"}),s.jsx("div",{className:"text-token-text-secondary text-sm",children:s.jsx(j,_({},G.seeMore))})]}):null}function ue({icon:e,title:t,onClickTitle:n,details:o,actions:a,showActions:r}){return s.jsxs("div",{className:"flex items-center gap-1.5",children:[e,s.jsx("div",{className:g("me-6 flex-1 py-4 text-sm",n&&"cursor-pointer"),onClick:n,children:t}),s.jsx("div",{children:r?a:o})]})}const me=d(()=>l(()=>import("./h20ncp7lry8zfhq6.js").then(e=>e._),__vite__mapDeps([8,1])),{loading:e=>u(e)}),xe=d(()=>l(()=>import("./l907avfvlrp6ls67.js").then(e=>e._),__vite__mapDeps([9,1])),{loading:e=>u(e)}),_e=d(()=>l(()=>import("./rsi9kppw43ykrsgk.js").then(e=>e._),__vite__mapDeps([10,1])),{loading:e=>u(e)});function he({label:e,activeIndex:t}){return s.jsx("div",{className:g("border-token-border-default mx-4 border-b pb-4 text-base font-medium",t===0&&"border-transparent"),children:e})}function ge({automation:e}){return e.is_enabled?e.target_time_utc?s.jsx(xe,{className:"icon text-token-text-secondary"}):s.jsx(_e,{className:"icon text-token-text-tertiary"}):s.jsx(me,{className:"icon text-token-text-tertiary"})}function fe({automation:e,filter:t,index:n,activeIndex:o}){const a=M(),[r,i]=m.useState(!1),x=m.useCallback(D=>{i(D)},[]),c=n===o,C=n+1===o,[P,b]=m.useState(!1),[y,p]=m.useState(!1);return s.jsxs("div",{className:g("rounded-2xl",c&&"dark:bg-token-main-surface-secondary bg-[#f4f4f4]"),children:[s.jsx("div",{className:g("border-token-border-default mx-4 border-b",c&&"border-transparent",C&&"border-transparent"),children:s.jsx(ue,{icon:s.jsx(ge,{automation:e}),title:s.jsx("span",{className:g(t==="scheduled"?"text-token-text-primary":"text-token-text-secondary"),children:e.title}),onClickTitle:()=>{e.conversation_id&&a(q(e.conversation_id))},details:s.jsx(ae,{automation:e}),actions:s.jsx(te,{automation:e,updateForceShowActions:x,onClickEdit:()=>b(!0),onClickDelete:()=>p(!0)}),showActions:c||r})}),y&&s.jsx(W,{item:e,onClose:()=>p(!1),onConfirm:()=>p(!1)}),P&&s.jsx(X,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:s.jsx(Y,{item:e,source:"tasks",onClose:()=>b(!1)})})]})}function Ie({label:e,filter:t,automations:n,isActiveSection:o}){const[a,r]=m.useState(void 0);m.useEffect(()=>{o||r(void 0)},[o]);const i=m.useMemo(()=>t==="scheduled"?je(n):n,[n,t]);return s.jsxs("div",{children:[s.jsx(he,{label:e,activeIndex:a}),s.jsxs("div",{className:"flex flex-col",children:[i.map((x,c)=>s.jsx("div",{onMouseEnter:()=>r(c),onMouseLeave:()=>r(void 0),children:s.jsx(fe,{automation:x,filter:t,activeIndex:o?a:void 0,index:c})},x.id)),s.jsx("div",{className:"p-4",children:s.jsx(de,{filter:t})})]})]})}function je(e){return[...e].sort((t,n)=>{const o=t.next_run_times&&t.next_run_times.length?new Date(t.next_run_times[0]).getTime():NaN,a=n.next_run_times&&n.next_run_times.length?new Date(n.next_run_times[0]).getTime():NaN;return!isNaN(o)&&!isNaN(a)?o-a:isNaN(o)?1:-1})}const we={};export{te as A,ge as J,ue as T,ae as a,Ie as b,we as c};
//# sourceMappingURL=l3ffbqkk84m4o2uh.js.map

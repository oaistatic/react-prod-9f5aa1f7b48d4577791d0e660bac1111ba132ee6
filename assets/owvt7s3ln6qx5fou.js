const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/rsi9kppw43ykrsgk.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var ve=Object.defineProperty,je=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var J=(t,e,s)=>e in t?ve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,O=(t,e)=>{for(var s in e||(e={}))Y.call(e,s)&&J(t,s,e[s]);if(B)for(var s of B(e))K.call(e,s)&&J(t,s,e[s]);return t},I=(t,e)=>je(t,ye(e));var V=(t,e)=>{var s={};for(var n in t)Y.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&B)for(var n of B(t))e.indexOf(n)<0&&K.call(t,n)&&(s[n]=t[n]);return s};import{c as G,e as T,j as a,M as q,_ as H,b as Ce,r as j}from"./i8clt0mfz495j7ii.js";import{b$ as f,oW as Ne,oX as le,gd as Se,b_ as ce,gc as be,ig as _e,ih as Te,oY as ue,oZ as E,ce as Re,o_ as Ae,bQ as Oe,bU as Ie,o$ as Ee,a6 as ke,gw as Pe,p0 as De,p1 as Z,fg as ee}from"./j0yo6uv6652vva62.js";import{r5 as D,d as S,cn as te,ba as qe,o as Q,L as de,jo as ze,b1 as Be,gX as Fe,gK as Ge,aV as b,P as se,h7 as $e,gh as Ue,bb as He,bc as Qe,a$ as Le,u as We}from"./ghewn7l2ynbm32fm.js";import{cleanQuery as L,GlauxSearchQueryOverflow as Xe,GlauxSearchResultOverflow as Je,GlauxSearchQueryWithIcon as fe,GlauxSearchResultItem as ge}from"./ksuwacyo5m7qmkk7.js";import{c as Ye,g as Ke,a as Ve,b as Ze,i as et,d as tt,C as st,e as at}from"./dwikchly7agkd2y3.js";import{C as rt}from"./hk7ym2rzlomukbdz.js";import{s as nt,l as ot}from"./bbipyj9bituayr8q.js";function R(t,e,s,n,o,r,i=!0){var u,l,c;if(n&&o&&!s)return t.formatMessage({id:"xvTcn5",defaultMessage:"Stopping"});if("title"in e&&e.title&&i)return e.title;switch(e.type){case f.Thought:return e.thought.summary;case f.Recap:return e.content;case f.N7jupdAPI:return F({action:e.action,source:e.source,intl:t});case f.Browsing:return me({contextualAnswerSources:e.sources,intl:t});case f.Search:return s?t.formatMessage({id:"+a5J9x",defaultMessage:"Searched the web"}):t.formatMessage({id:"GamH3R",defaultMessage:"Searching the web"});case f.CodeAnalysis:return s?t.formatMessage({id:"SGdXPO",defaultMessage:"Analyzed"}):t.formatMessage({id:"+JAejT",defaultMessage:"Writing code"});case f.ImageAnalysis:return s?t.formatMessage({id:"fjqIXj",defaultMessage:"Analyzed image"}):t.formatMessage({id:"D//PTx",defaultMessage:"Analyzing image"});case f.ComputerOutput:return s?t.formatMessage({id:"PlB7p/",defaultMessage:"Browsed the web"}):(l=(u=e.thoughts)==null?void 0:u.at(-1))!=null?l:t.formatMessage({id:"HFx/8x",defaultMessage:"Browsing the web"});case f.e1ld0dvz:return e.tasks.every(d=>d.status==="completed")?t.formatMessage({id:"WUrSuY",defaultMessage:"Completed tasks"}):t.formatMessage({id:"tH3LAN",defaultMessage:"Running tasks"});case f.N7jupdLoading:{const d=(c=e.custom_headline)==null?void 0:c.trim();return d||(r?lt(t,r):t.formatMessage({id:"hgnsat",defaultMessage:"Thinking"}))}case f.Glaux:return it(t,e,s);case f.Strix:return}}const it=(t,e,s)=>{if(e.queries.length>1){const r=new Map;if(e.queries.forEach(({connectorName:l})=>{var c;r.set(l,((c=r.get(l))!=null?c:0)+1)}),r.has("*"))return s?t.formatMessage({id:"APiAqk",defaultMessage:"Searched company knowledge"}):t.formatMessage({id:"kcBn4V",defaultMessage:"Searching company knowledge"});let i=Array.from(r.entries()).toSorted(([l,c],[d,p])=>p-c).map(([l])=>l);if(i.length>3){const l=i.length-2;i=[...i.slice(0,2),t.formatMessage({id:"45+rh1",defaultMessage:"{number} others"},{number:l})]}const u=t.formatList(i);return s?t.formatMessage({id:"OvXUzx",defaultMessage:"Searched {connectorNames}"},{connectorNames:u}):t.formatMessage({id:"r44Nbg",defaultMessage:"Searching {connectorNames}"},{connectorNames:u})}else return s?t.formatMessage({id:"APiAqk",defaultMessage:"Searched company knowledge"}):t.formatMessage({id:"kcBn4V",defaultMessage:"Searching company knowledge"})},lt=(t,e)=>e===D.Research?t.formatMessage({id:"CsSGJm",defaultMessage:"Starting research"}):e===D.Autoswitch?t.formatMessage({id:"9CDId8",defaultMessage:"Thinking longer with agent mode"}):e===D.KAUR1BR5?t.formatMessage({id:"QqaVzm",defaultMessage:"Getting started..."}):t.locale.startsWith("en")&&e===D.Random?ct(t):t.formatMessage({id:"gw6x6T",defaultMessage:"Setting up my desktop"}),ae=[{text:"Pouring a cup of coffee",weight:1},{text:"Sharpening pencils",weight:1},{text:"Consulting the rubber duck",weight:1},{text:"Negotiating with servers",weight:1},{text:"Tuning caffeine levels",weight:1},{text:"Untangling the wires",weight:1},{text:"Refilling the printer paper",weight:1},{text:"Baking cookies â€” HTTP only, of course",weight:1},{text:"Looking for snacks",weight:1},{text:"Warming up the neurons",weight:1},{text:"Folding the transformer layers neatly",weight:1},{text:"Plugging into the matrix",weight:1},{text:"Downloading the extended trilogy",weight:1},{text:"Putting on my super suit",weight:1},{text:"Building additional pylons",weight:1},{text:"Reticulating splines",weight:1},{text:"Blowing dust out of the cartridge",weight:1},{text:"Installing the flux capacitor",weight:1},{text:"Ordering extra pizza for the Turtles",weight:1},{text:"Refining the data",weight:1}];function ct(t){const e=ae.reduce((n,o)=>n+o.weight,2e3);let s=Math.random()*e;for(const{text:n,weight:o}of ae){if(s<o)return n;s-=o}return t.formatMessage({id:"gw6x6T",defaultMessage:"Setting up my desktop"})}const F=({action:t,source:e,intl:s})=>t==="n7jupd_as"?s.formatMessage({id:"np3RkB",defaultMessage:"Checking available APIs"}):t==="n7jupd_ag"?s.formatMessage({id:"Q0QNzM",defaultMessage:"Reading API documentation"}):t==="n7jupd_cf"&&!e?s.formatMessage({id:"soOFxK",defaultMessage:"Reading from API"}):t==="n7jupd_cf"&&e?s.formatMessage({id:"1ETpL6",defaultMessage:"Reading from {source}"},{source:e.name}):t==="n7jupd_cs"&&e?s.formatMessage({id:"nqEMzN",defaultMessage:"Searching {source}"},{source:e.name}):s.formatMessage({id:"soOFxK",defaultMessage:"Reading from API"}),me=({contextualAnswerSources:t,intl:e})=>{if(t.length===0)return e.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"});const s=t.map(n=>Ne[n]).filter(Boolean);return t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:s[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:s[0],source2:s[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:s[0],source2:s[1]})},U=24,Jt=12,Yt=4,ut=5e3;function xe({chunk:t,intl:e}){var r,i;const s=(r=t==null?void 0:t.queries.map(u=>u.query))!=null?r:[];if(((i=t==null?void 0:t.results)!=null?i:[]).length>0)return"";const o=new Set(s);return e.formatMessage({id:"F+zud/",defaultMessage:"Searching for {queries_list}{add_more, select, true { and {remaining_count} more} other {}}"},{queries_list:Array.from(o).map(u=>'"'.concat(L(u),'"')).slice(0,3).join(", "),add_more:Array.from(o).length>3,remaining_count:Array.from(o).length-3})}function dt(t){"use forget";const e=G.c(12),{chunk:s,isExpanded:n,isComplete:o}=t,r=T(),i=le(),u=(i==null?void 0:i.type)==="cot";let l;e[0]!==s||e[1]!==r||e[2]!==o||e[3]!==u?(l=u?null:a.jsx("div",{className:"text-token-text-secondary flex flex-row gap-1 truncate text-sm overflow-ellipsis",children:R(r,s,o)}),e[0]=s,e[1]=r,e[2]=o,e[3]=u,e[4]=l):l=e[4];let c;e[5]!==s||e[6]!==n||e[7]!==u?(c=n&&a.jsx(ft,{queries:s.queries,results:s.results,maxResults:u?3:4}),e[5]=s,e[6]=n,e[7]=u,e[8]=c):c=e[8];let d;return e[9]!==l||e[10]!==c?(d=a.jsxs("div",{children:[l,c]}),e[9]=l,e[10]=c,e[11]=d):d=e[11],d}function ft(t){"use forget";const e=G.c(10),{maxResults:s,queries:n,results:o}=t,r=s===void 0?3:s;let i;e[0]!==r||e[1]!==n||e[2]!==o.length?(i=n.length<=r||!o.length?n.map(ht):[...n.slice(0,r-1).map(xt),a.jsx(Xe,{maxResults:r,queries:n},"query-overflow")],e[0]=r,e[1]=n,e[2]=o.length,e[3]=i):i=e[3];const u=i;let l;e[4]!==r||e[5]!==o?(l=o.length<=r?o.map(mt):[...o.slice(0,r-1).map(gt),a.jsx(Je,{maxResults:r,results:o},"result-overflow")],e[4]=r,e[5]=o,e[6]=l):l=e[6];const c=l;let d;return e[7]!==u||e[8]!==c?(d=a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"flex flex-row flex-wrap items-center gap-2",children:[u,c]})}),e[7]=u,e[8]=c,e[9]=d):d=e[9],d}function gt(t){return a.jsx(ge,{url:t.url,name:t.name},t.id)}function mt(t){return a.jsx(ge,{url:t.url,name:t.name},t.id)}function xt(t,e){return a.jsx(fe,{query:L(t.query)},"query-".concat(t.query,"-").concat(e))}function ht(t,e){return a.jsx(fe,{query:L(t.query)},"query-".concat(t.query,"-").concat(e))}const pt=Object.freeze(Object.defineProperty({__proto__:null,GlauxCoTChunk:dt,getGlauxCoTChunkV4TextContent:xe},Symbol.toStringTag,{value:"Module"})),Mt=({chunk:t,isExpanded:e,isComplete:s,enableV4:n})=>{const o=T(),r=t.assistantMessage,i=t.toolMessage,u=r!=null&&he(r)!=null;return a.jsxs("div",{className:S("flex w-full flex-col gap-2 text-sm",n&&"mt-1"),children:[e&&!n&&R(o,t,s),u&&a.jsxs("div",{children:[a.jsx(wt,{message:r,forceDarkMode:!0,showActionBar:!1,codeRendererClassName:S("rounded-md max-h-[calc(clamp(20px,1/4*var(--thread-safe-area-height,100lvh),400px))] overflow-auto",i&&"rounded-b-none"),codeContainerClassName:"overflow-visible!"}),i&&a.jsx(vt,{forceDarkMode:!0,wrapperClassName:"max-h-[calc(clamp(20px,1/8*var(--thread-safe-area-height,100lvh),200px))] w-full overflow-auto dark rounded-b-md",codeContainerClassName:"whitespace-pre-wrap",message:i})]})]})};function he(t){function e(n,o,r){return"```".concat(r,"\nagent@chatgpt:").concat(n,"$ ").concat(o,"\n```")}function s(n){var i;const o=JSON.parse(n);if(!o.cmd)return null;const r=(i=o.workdir)!=null?i:"/";return o.cmd.length===3&&o.cmd[0]==="bash"&&o.cmd[1]==="-lc"?e(r,o.cmd[2],o.cmd[2].startsWith("python")?"python":"bash"):e(r,o.cmd.join(" "),"bash")}if(t.recipient!=="container.exec")return null;switch(t.content.content_type){case te.Code:return s(t.content.text);case te.Text:return s(t.content.parts.join(""));default:return null}}function wt({message:t,codeRendererClassName:e,forceDarkMode:s,removeTopBorderRadius:n,showActionBar:o,codeContainerClassName:r}){const i=qe()||s,u=he(t);return u==null?null:a.jsx(Se.Provider,{value:{isWithinDataAnalysisToolMessage:!0},children:a.jsx(ce,{className:S("markdown prose dark:prose-invert w-full break-words",i?"dark":"light"),forceDarkMode:s,componentOverrides:{code:l=>a.jsx(be,I(O({},l),{wrapperClassName:e,codeContainerClassName:r,removeTopBorderRadius:n,showActionBar:o}))},children:u})})}function vt({message:t,wrapperClassName:e,codeContainerClassName:s,forceDarkMode:n}){const o=t.content.content_type==="text"?t.content.parts.join(""):null;return o?a.jsx(Ye,{forceDarkMode:n,wrapperClassName:e,codeContainerClassName:s,output:o,label:null}):null}const jt=Q(()=>H(()=>import("./rsi9kppw43ykrsgk.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>de(t)});function yt(){return Date.now()}function Ct({tasks:t}){return a.jsxs("div",{className:"flex w-full flex-col gap-1",children:[a.jsx("div",{className:"text-token-text-secondary mb-1 text-sm",children:a.jsx(q,{id:"FTmQVN",defaultMessage:"Delegated Tasks"})}),a.jsx("div",{className:"flex flex-col divide-y divide-gray-200 rounded-lg border border-gray-200",children:t.map(e=>a.jsx(Nt,{task:e},String(e.id)))})]})}function Nt({task:t}){var o,r;const e=(o=t.startedAtMs)!=null?o:yt(),s=_e(e,90*1e3),n=t.status==="completed"?a.jsx(jt,{className:"icon text-token-text-secondary h-4 w-4"}):t.status==="gathering"||t.status==="running"?a.jsx(Te,{percentage:s,thickness:1/12,className:"text-token-text-tertiary h-4 w-4",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:"".concat((100-s)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):a.jsx("div",{className:"h-4 w-4"});return a.jsxs("div",{className:"grid grid-cols-[1fr_auto] items-center gap-2 p-2",children:[a.jsx("div",{className:"min-w-0",children:a.jsx("div",{className:"text-token-text-tertiary truncate text-xs",children:(r=t.instruction)!=null?r:t.model})}),a.jsx("div",{className:"flex items-center justify-center",children:n})]})}const St=({chunk:t,isExpanded:e,isComplete:s,enableV4:n})=>{const o=T(),r=t.assistantMessage,i=t.toolMessage,u=r!=null&&Ke(r)!=null;return a.jsxs("div",{className:S("flex w-full flex-col gap-2 text-sm",n&&"mt-1"),children:[e&&!n&&R(o,t,s),u&&a.jsxs("div",{className:"flex flex-col gap-0.5",children:[a.jsx(Ve,{message:r,forceDarkMode:!0,FormattedText:ce,showActionBar:!1,codeRendererClassName:"rounded-md max-h-[calc(clamp(20px,1/4*var(--thread-safe-area-height,100lvh),400px))] overflow-auto",codeContainerClassName:"overflow-visible!"}),i&&a.jsx(Ze,{forceDarkMode:!0,wrapperClassName:"max-h-[calc(clamp(20px,1/8*var(--thread-safe-area-height,100lvh),200px))] w-full overflow-auto dark rounded-md",codeContainerClassName:"whitespace-pre-wrap",message:i,showLabel:!1})]})]})},bt=({chunk:t,isExpanded:e,isComplete:s,enableV4:n})=>{var x,C,y,N,h,v,M;const o=T(),r=t.toolMessage,i=ze(),{isUnauthenticated:u}=Be();let l;const c=(C=(x=r.author.name)==null?void 0:x.includes("container"))!=null?C:!1;if((y=r.author.name)!=null&&y.includes("python")){const w=(h=(N=r.metadata)==null?void 0:N.aggregate_result)==null?void 0:h.messages.find(et);l=(w==null?void 0:w.image_url)&&Fe(w.image_url)}else if(c){const w=(M=(v=r.metadata)==null?void 0:v.attachments)==null?void 0:M[0];l=w==null?void 0:w.id}const{data:d}=Ce(l?at(l,u):{enabled:!1,queryKey:[]}),p=(d==null?void 0:d.status)===Ge.Success?d.download_url:void 0,{isSuccess:g}=ue(p),[m]=j.useState(g);return a.jsxs("div",{className:S("flex w-full flex-col gap-2 text-sm",n&&"mt-1"),children:[e&&!n&&R(o,t,s),a.jsxs("div",{className:"bg-token-bg-secondary relative flex h-[calc(clamp(150px,1/4*var(--thread-safe-area-height,100lvh),400px))] justify-center overflow-hidden rounded-md p-2",children:[p&&a.jsx(b.div,{initial:{opacity:m?.5:0,scale:1.1},animate:{opacity:g?.5:0,scale:s||i?1.1:[1.1,1.25,1.1]},transition:{opacity:{ease:"easeInOut"},scale:s?{type:"spring",stiffness:300,damping:20}:{duration:2.5,repeat:1/0,ease:"easeInOut"}},className:"absolute inset-0 bg-cover bg-center bg-no-repeat opacity-40 blur-lg filter",style:{backgroundImage:"url(".concat(JSON.stringify(p),")")}}),a.jsx(b.div,{initial:{opacity:m?1:0},animate:{opacity:g?1:0},className:"relative *:m-0 *:h-full *:w-full *:rounded-md *:object-center *:shadow-lg",children:l&&(c?a.jsx(tt,{fileId:l}):a.jsx(st,{isCoT:!0,message:r}))})]})]})},_t=Q(()=>H(()=>import("./j0yo6uv6652vva62.js").then(t=>t.yo),__vite__mapDeps([2,1,3,4,5])),{loading:t=>de(t)}),Tt=4,Rt=3,At=3,Ot={hidden:{opacity:0},visible:{opacity:1}},re={hidden:{opacity:0,x:-5},visible:{opacity:1,x:0}},It=({chunk:t,isExpanded:e,isComplete:s})=>{var u,l,c;const n=T();if(!t.searchResults&&!t.fetchResult)return e&&a.jsx(E,{content:F({action:t.action,source:t.source,intl:n})});const o=[];let r=[];if(t.action==="n7jupd_cs"&&t.searchResults)r=t.searchResults.map(d=>({entries:[{url:d.url,title:d.title,snippet:"",attribution:d.title}]}));else if(t.action==="n7jupd_cf"&&t.fetchResult)r=[{entries:[{url:(u=t.fetchResult)==null?void 0:u.url,title:(l=t.fetchResult)==null?void 0:l.title,snippet:"",attribution:(c=t.fetchResult)==null?void 0:c.title}]}];else return null;const i={type:f.Search,queries:o,sources:r};return e&&a.jsx(pe,{chunk:i,isExpanded:e,isComplete:s,headlineContents:F({action:t.action,source:t.source,intl:n}),useCloudDocIcons:!0})},Et=({chunk:t,isExpanded:e,isComplete:s,enableV4:n})=>{const o=T();return a.jsx(pe,{chunk:t,isExpanded:e,isComplete:s,headlineContents:n?void 0:R(o,t,s),useCloudDocIcons:!1})},pe=({chunk:t,isExpanded:e,isComplete:s,headlineContents:n,useCloudDocIcons:o,isSmall:r,isVisualCoT:i=!1})=>{const{queries:u,sources:l}=t,[c,d]=j.useState(s),p=i?b.div:"div";return a.jsxs(p,I(O({className:S("flex min-w-0 flex-col gap-2 text-sm",i&&"overflow-hidden")},i?{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},transition:{duration:.25,ease:"easeOut"}}:{}),{children:[e&&n,a.jsxs("div",{className:"flex min-w-0 flex-col gap-1",children:[a.jsx(ne,{isComplete:s,items:u,max:At,getKey:g=>g.q,Item:kt,ShowMoreButton:qt,onAnimationComplete:()=>d(!0),isSmall:r,isVisualCoT:i}),a.jsx(ne,{isComplete:s,items:c?l:[],max:Tt,getKey:g=>g.entries[0].url,Item:Pt,ShowMoreButton:Dt,useCloudDocIcons:o,isSmall:r,isVisualCoT:i})]})]}))},ne=({isComplete:t,items:e,max:s,getKey:n,Item:o,ShowMoreButton:r,onAnimationComplete:i,useCloudDocIcons:u,isSmall:l,isVisualCoT:c=!1})=>{const[d,p]=j.useState(!1),[g,m]=e.length>s?[e.slice(0,s-1),e.slice(s-1)]:[e];return a.jsxs(b.div,{className:S("flex flex-wrap items-center gap-1",c&&"justify-center"),initial:c?"hidden":t?"visible":"hidden",animate:"visible",transition:{duration:.25,staggerChildren:.1,delayChildren:.3},onAnimationComplete:i,children:[g.map(x=>a.jsx(b.div,{variants:Ot,className:"flex max-w-full items-center",children:a.jsx(o,{item:x,isComplete:t,useCloudDocIcons:u,isSmall:l,isVisualCoT:c})},n(x))),d&&a.jsx(b.div,{className:"contents",initial:"hidden",animate:"visible",transition:{duration:.2,staggerChildren:.02},children:m==null?void 0:m.map(x=>a.jsx(b.div,{variants:re,className:"flex max-w-full items-center",children:a.jsx(o,{item:x,isComplete:t,useCloudDocIcons:u,isSmall:l,isVisualCoT:c})},n(x)))}),m&&a.jsx(b.div,{variants:re,className:"flex items-center",children:a.jsx(r,{moreItems:m,isShowingMore:d,onClick:()=>p(x=>!x),useCloudDocIcons:u,isSmall:l})},"more")]})},kt=({item:t,isSmall:e})=>a.jsxs($,{componentType:"span",isSmall:e,children:[a.jsx(_t,{className:"-ms-1 h-3 w-3 shrink-0"}),a.jsx("span",{className:"max-w-[8rem] overflow-hidden text-ellipsis whitespace-nowrap",children:t.q})]}),Pt=({item:t,isComplete:e,useCloudDocIcons:s,isSmall:n,isVisualCoT:o})=>{var c;const r=t.entries[0],i=j.useMemo(()=>({url:r.url,title:r.title}),[r.url,r.title]);j.useEffect(()=>{se.logEvent("link_action",I(O({},i),{action:"show"}))},[i]);const u=()=>{se.logEvent("link_action",I(O({},i),{action:"click"}))},l=(c=r.attribution)!=null?c:Re(r.url);return a.jsxs($,{componentType:$e,href:r.url,onClick:u,animateScan:!e,isSmall:n,children:[a.jsx(Me,{url:r.url,useCloudDocIcons:s}),o?a.jsx("div",{className:"max-w-[8rem] truncate",children:l}):l]})},Me=({url:t,withBorder:e=!1,useCloudDocIcons:s})=>{const{isSuccess:n,isError:o}=ue(Ae(t,32)),[r]=j.useState(n);if(o)return null;if(s){const i=Oe(t);if((i==null?void 0:i.Icon)!=null)return a.jsx(b.div,{initial:{opacity:r?1:0},animate:{opacity:n?1:0},className:S("bg-token-main-surface-primary -ms-3 box-content h-3 w-3 shrink-0 overflow-hidden rounded-full first:-ms-1",e&&"border-token-main-surface-secondary group-hover:border-token-text-primary dark:group-hover:border-token-text-primary border"),children:a.jsx(i.Icon,{className:"m-0 h-3 w-3"})})}return a.jsx(b.div,{initial:{opacity:r?1:0},animate:{opacity:n?1:0},className:S("bg-token-main-surface-primary -ms-3 box-content h-3 w-3 shrink-0 overflow-hidden rounded-full first:-ms-1",e&&"border-token-main-surface-secondary group-hover:border-token-text-primary dark:group-hover:border-token-text-primary border"),children:a.jsx(Ie,{url:t,size:32,minSize:16,className:"m-0 h-3 w-3"})})},Dt=({moreItems:t,isShowingMore:e,onClick:s,useCloudDocIcons:n,isSmall:o})=>a.jsx($,{onClick:s,isSmall:o,children:e?a.jsx(q,{id:"19fGXl",defaultMessage:"Show less"}):a.jsxs(a.Fragment,{children:[t.slice(0,Rt).map((r,i)=>a.jsx(Me,{url:r.entries[0].url,withBorder:!0,useCloudDocIcons:n},i)),a.jsx("div",{className:"max-w-[8rem] truncate",children:a.jsx(q,{id:"5ob5C8",defaultMessage:"{count} more",values:{count:t.length}})})]})}),qt=({moreItems:t,isShowingMore:e,onClick:s,isSmall:n})=>a.jsx($,{onClick:s,isSmall:n,children:e?a.jsx(q,{id:"0SWns2",defaultMessage:"Show less"}):a.jsx(q,{id:"PpZw7t",defaultMessage:"{count} more",values:{count:t.length}})}),zt=1500,$=t=>{"use forget";var _;const e=G.c(26);let s,n,o,r,i,u;e[0]!==t?(_=t,{className:o,componentType:i,children:n,animateScan:s,isSmall:u}=_,r=V(_,["className","componentType","children","animateScan","isSmall"]),e[0]=t,e[1]=s,e[2]=n,e[3]=o,e[4]=r,e[5]=i,e[6]=u):(s=e[1],n=e[2],o=e[3],r=e[4],i=e[5],u=e[6]);const l=i===void 0?"button":i,c=u===void 0?!1:u,[d,p]=j.useState(!1),g=Math.random()*zt;let m,x;e[7]!==s?(m=()=>{s&&(p(!1),requestAnimationFrame(()=>p(!0)))},x=[s,g],e[7]=s,e[8]=m,e[9]=x):(m=e[8],x=e[9]),j.useEffect(m,x);const C=c?nt:ot,y=s&&"dark:border-token-main-surface-secondary border border-[#f4f4f4] bg-transparent dark:bg-transparent",N=(r.href!=null||r.onClick!=null)&&"hover:bg-token-main-surface-primary-inverse hover:text-token-text-inverted dark:hover:bg-token-text-primary";let h;e[10]!==o||e[11]!==C||e[12]!==y||e[13]!==N?(h=S(C,"group relative max-w-full overflow-hidden",y,N,o),e[10]=o,e[11]=C,e[12]=y,e[13]=N,e[14]=h):h=e[14];let v;e[15]!==s||e[16]!==d?(v=s&&a.jsx("span",{className:S("dark:bg-token-main-surface-secondary absolute start-0 top-0 z-[-1] h-full rounded-se-full rounded-ee-full bg-[#f4f4f4] transition-[width] ease-in-out",d?"w-full":"w-0"),style:{transitionDuration:"".concat(g,"ms")}}),e[15]=s,e[16]=d,e[17]=v):v=e[17];let M;e[18]!==n?(M=a.jsx("div",{className:"z-1 inline-flex items-center gap-1",children:n}),e[18]=n,e[19]=M):M=e[19];let w;return e[20]!==l||e[21]!==r||e[22]!==M||e[23]!==h||e[24]!==v?(w=a.jsxs(l,I(O({className:h},r),{children:[v,M]})),e[20]=l,e[21]=r,e[22]=M,e[23]=h,e[24]=v,e[25]=w):w=e[25],w},oe=null,Bt=Q(()=>H(()=>Promise.resolve().then(()=>pt),void 0).then(t=>t.GlauxCoTChunk)),Ft=({index:t,chunk:e,onClick:s,onMeasure:n,onAnimationComplete:o,gap:r=0,showBullet:i=!1,isExpanded:u=!1,isAnimationComplete:l=!1,isLast:c=!1,isKAUR1BR5:d=!1,hasGlauxMessages:p=!1,isAgentTurn:g=!1,interruptionInProgress:m=!1,odysseyLoadingState:x=D.Done,disableAnimation:C=!1})=>{const y=T(),N=c||u,h=!c||l,v=c?0:r,M=le(),w=(M==null?void 0:M.type)==="cot",_=w?R(y,e,h,m,g&&c,x,!0):void 0,z=h||C?"static":"stage",k=h||C?"static":"enter",P=j.useRef(null);P.current=()=>{o==null||o(t,"enter")},j.useEffect(()=>{if(k!=="enter")return;const A=setTimeout(()=>{var X;He.count(Qe.COT_SUMMARIZER,"cot_chunk_timeout"),(X=P.current)==null||X.call(P)},ut);return()=>clearTimeout(A)},[k]);const we=k==="static",W=j.useRef(null);return Le(()=>Ee({axis:"height",target:W.current,onChange:({height:A})=>n(t,A)}),[]),a.jsx(b.div,{role:w?void 0:"button",variants:{static:{opacity:1,scale:1,position:"static",translateY:0},enter:{position:"static",translateY:0,scale:1,opacity:1},stage:{position:"absolute",translateY:-U,scale:.95,opacity:0}},initial:z,animate:k,exit:u?void 0:{opacity:0,pointerEvents:"none",position:"absolute",translateY:U,filter:"blur(8px)"},style:{zIndex:t},transition:l||k==="static"?{duration:0}:{type:"spring",bounce:.05},className:S("text-token-text-secondary origin-start start-0 end-0 top-0 mb-2 flex",!N&&"pointer-events-none"),onAnimationComplete:A=>A!=="enter"&&o(t,A),onClick:s,ref:W,children:a.jsx(ke,{onComplete:P.current,isDisabled:we,defaultDelayPerSegmentMs:20,children:i?a.jsxs("div",{className:S("relative flex w-full items-start gap-2 overflow-clip",oe),children:[oe,a.jsxs("div",{className:"flex h-full w-4 shrink-0 flex-col items-center",children:[a.jsx("div",{className:"flex h-5 shrink-0 items-center justify-center",children:a.jsx(rt,{chunk:e,size:"small"})}),!c&&a.jsx(b.div,{initial:{translateY:-U,opacity:0},animate:{translateY:0,opacity:1},className:"bg-token-border-heavy h-full w-[1px] rounded-full"})]}),a.jsxs("div",{className:"w-full",style:{marginBottom:v},children:[N&&a.jsx("div",{className:"w-full",children:_&&a.jsx("div",{className:"text-token-text-primary text-[14px] leading-5",children:_})}),a.jsx(ie,{chunk:e,isExpanded:u,isComplete:h,isLast:c,isKAUR1BR5:d,hasGlauxMessages:p,isAgentTurn:g})]})]}):a.jsxs("div",{className:"w-full",style:{marginBottom:v},children:[N&&a.jsx("div",{className:"w-full",children:_&&a.jsx("div",{className:"text-token-text-primary text-sm",children:_})}),a.jsx(ie,{chunk:e,isExpanded:u,isComplete:h,isLast:c,isKAUR1BR5:d,isAgentTurn:g})]})})})},Kt=j.memo(Ft),Vt=t=>{"use forget";const e=G.c(16),{className:s,dot:n,text:o,isStreamingAnimation:r,onClick:i}=t,[u,l]=j.useState(""),c=j.useRef(null),d=j.useRef(""),p=Ue(i);let g,m;e[0]!==r?(g=()=>{if(r)return c.current=new Z(ee,l,"",!0),()=>{var M;(M=c.current)==null||M.destroy(),c.current=null}},m=[r],e[0]=r,e[1]=g,e[2]=m):(g=e[1],m=e[2]),j.useEffect(g,m);let x,C;e[3]!==r||e[4]!==o?(x=()=>{var z;if(!r)return;const M=c.current;if(!M)return;const w=d.current;o.startsWith(w)||(M.destroy(),l(""),c.current=new Z(ee,l,"",!0)),(z=c.current)==null||z.setText(o),d.current=o},C=[o,r],e[3]=r,e[4]=o,e[5]=x,e[6]=C):(x=e[5],C=e[6]),j.useEffect(x,C);let y;e[7]!==s?(y=S("text-token-text-tertiary line-clamp-3 cursor-pointer",s),e[7]=s,e[8]=y):y=e[8];const N=r?u:o;let h;e[9]!==n?(h=n&&a.jsx("span",{className:"ms-1 inline-block size-3.5 rounded-full bg-black dark:bg-white"}),e[9]=n,e[10]=h):h=e[10];let v;return e[11]!==p||e[12]!==y||e[13]!==N||e[14]!==h?(v=a.jsxs("p",{className:y,onClick:p,children:[N,h]}),e[11]=p,e[12]=y,e[13]=N,e[14]=h,e[15]=v):v=e[15],v},Zt=({chunk:t,isLast:e,hasGlauxMessages:s,intl:n})=>{switch(t.type){case f.Thought:return t.thought.content.trim()||t.thought.summary;case f.Recap:return t.didFailReasoning?null:t.content.includes("Stopped")?n.formatMessage({id:"sOsSsn",defaultMessage:"Stopped"}):s&&!e?"":n.formatMessage({id:"Eo2n2s",defaultMessage:"Done"});case f.Search:return t.sources.slice(0,3).map(o=>o.domain).join(", ")+"...";case f.CodeAnalysis:return R(n,t,!1)+"...";case f.N7jupdAPI:return null;case f.Browsing:return null;case f.ImageAnalysis:return n.formatMessage({id:"IrgecZ",defaultMessage:"Analyzing image"});case f.ComputerOutput:return n.formatMessage({id:"QJACwT",defaultMessage:"Using browser"});case f.N7jupdLoading:return null;case f.e1ld0dvz:return n.formatMessage({id:"f87J+9",defaultMessage:"Delegating tasks"});case f.Glaux:return xe({intl:n,chunk:t});case f.Strix:return}},ie=({chunk:t,isExpanded:e,isComplete:s,isLast:n,isKAUR1BR5:o,hasGlauxMessages:r,isAgentTurn:i})=>{var d,p;const u=We(),l=T(),c=Pe(u,!!i);switch(t.type){case f.Thought:return a.jsx(E,{content:t.thought.content.trim()||t.thought.summary});case f.Recap:return t.didFailReasoning?null:t.content.includes("Stopped")?a.jsx(E,{content:l.formatMessage({id:"sOsSsn",defaultMessage:"Stopped"})}):r&&!n?null:a.jsx(E,{content:l.formatMessage({id:"Eo2n2s",defaultMessage:"Done"})});case f.Search:return a.jsx(Et,{chunk:t,isExpanded:e,isComplete:s,enableV4:c});case f.CodeAnalysis:{const g=t.assistantMessage,m=t.toolMessage;return(g==null?void 0:g.recipient)==="container.exec"&&((d=g==null?void 0:g.metadata)!=null&&d.n7jupd_message)&&((p=m==null?void 0:m.metadata)!=null&&p.n7jupd_message)?a.jsx(Mt,{chunk:t,isExpanded:e,isComplete:s,enableV4:c}):a.jsx(St,{chunk:t,isExpanded:e,isComplete:s,enableV4:c})}case f.N7jupdAPI:return t.action==="n7jupd_as"||t.action==="n7jupd_ag"?e&&a.jsx(E,{content:F({action:t.action,source:t.source,intl:l})}):a.jsx(It,{chunk:t,isExpanded:e,isComplete:s});case f.Browsing:return e&&a.jsx(E,{content:me({contextualAnswerSources:t.sources,intl:l})});case f.ImageAnalysis:return a.jsx(bt,{chunk:t,isExpanded:e,isComplete:s,enableV4:c});case f.ComputerOutput:return a.jsx(De,{chunk:t,isKAUR1BR5:o});case f.N7jupdLoading:return null;case f.e1ld0dvz:return a.jsx(Ct,{tasks:t.tasks});case f.Glaux:return a.jsx(Bt,{chunk:t,isExpanded:e,isComplete:s});case f.Strix:return}};export{Kt as C,U as S,Jt as a,Vt as b,pe as c,Zt as d,Yt as e,R as f,F as g};
//# sourceMappingURL=owvt7s3ln6qx5fou.js.map

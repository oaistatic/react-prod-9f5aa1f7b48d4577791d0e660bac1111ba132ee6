const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ceivmd4pm4umbvdn.js","assets/i8clt0mfz495j7ii.js","assets/jgvrewhnjcf398o6.js","assets/ooz2slmm8agf6bjp.js","assets/j4nmkdkymh0gf9lt.js","assets/nju52ppu7cxhyzrm.js","assets/fwyctp3zfyh6emd2.js","assets/j5l6f6jzcmdadw3x.js","assets/frf0wu8ouyfyu06j.js","assets/gsyp9a9fup59ufmh.js","assets/ogo8hvquv5crkyqt.js","assets/g7azkxfkm9n8omkv.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/j0yo6uv6652vva62.js","assets/conversation-small-lq38g8zw.css","assets/n3bxkos2zhscnn5x.js","assets/bg6sf480373dssa5.js","assets/b8lmybnmedr4n7bh.js","assets/gsas8pb1acnf7jnd.js","assets/o16x9m1k4d29ak42.js","assets/nh47jjy84g9yfx3d.js","assets/lo4w8zafp8iqjpvk.js","assets/ce3hgmw4iyyhicud.js","assets/mstl8wgfzorpgdoe.js","assets/pc7u7c6vz2ia5xux.js","assets/kfdkis1zwf4ccfgg.js","assets/ol9d5wxhynx9q2is.js","assets/mbmcx8v24u1ao1ke.js","assets/jh95iaetowvobxaf.js","assets/dxyrjy681bkwlnj8.js","assets/mqebxepg7t6q2tie.js","assets/deakbbf27g8e7ba0.js","assets/omoqxnq6po1pmb00.js","assets/kl7c6054usfnqmd4.js","assets/k97n0y6ba9c9h39c.js","assets/hu1kfuw35sk0pi95.js","assets/lbjflerr8tmfc11q.js","assets/ixwp0fvcs3jhuh48.js","assets/o564tkn3ln8nzryq.js","assets/ns51nblw8ziscsgd.js","assets/drmwaklva7v056il.js","assets/6ji8ehbh56ghw0zw.js","assets/cb0ba83bmi83mjz2.js","assets/f76gy0b8ieo4s693.js","assets/icuos2x1zai4tnyd.js","assets/iakvhqfu6nmvphq6.js","assets/kiv50zw1ij6k8vyj.js","assets/gdq1l97elemowxcc.js","assets/inhyojyded8f1i4q.js","assets/e4uyedc9wylrl0pu.js","assets/f5qlxxpahyz6p72m.js","assets/jdfzk1zd468oela3.js","assets/l2r1du6tfxyv7jaj.js","assets/ln88gzx578175chd.js","assets/hlon4mihnqp86jji.js","assets/b6hyii2315xk7j19.js","assets/olrcssu7duieo6m7.js","assets/irqko7c1s7qpl41n.js","assets/1u88i8jf4mwk3mc5.js","assets/mpzbsmypy64alaao.js","assets/fvjpw0lui4wq7vv3.js","assets/kgnykbdth8mb50na.js","assets/g8i6bixylsxyemsr.js","assets/pajs134rv9yn6t4z.js","assets/bj1ejin6tzi0v3v8.js","assets/coe6p1lrepx34al8.js","assets/hiw6sim5frzz9h23.js","assets/d3gl9smdb5iqto0t.js","assets/h1jbqtena24viel6.js","assets/m89x2zftpo6hrypr.js","assets/bc51ukj7a2qfpnc3.js","assets/ktw3b87sujui39wx.js","assets/nrrhfi0a0bbsg9w2.js","assets/hht3m8p9e0s4tqnx.js","assets/hhl3vz1yrrpnwu4u.js","assets/kj8h59p17s2tn6gp.js","assets/f6ek1vdaohim72xh.js","assets/mh1u90j45tiq86ol.js","assets/ffra0j1auro6rua3.js","assets/nb9dlstb4iu1wrqb.js","assets/hkf72jbegajnqi38.js","assets/fb2095ktsebx1zzy.js","assets/eyao241335injypy.js"])))=>i.map(i=>d[i]);
var ns=Object.freeze,rs=Object.defineProperty,tt=Object.defineProperties;var nt=Object.getOwnPropertyDescriptors;var os=Object.getOwnPropertySymbols;var ot=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var is=(s,e,n)=>e in s?rs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,v=(s,e)=>{for(var n in e||(e={}))ot.call(e,n)&&is(s,n,e[n]);if(os)for(var n of os(e))it.call(e,n)&&is(s,n,e[n]);return s},N=(s,e)=>tt(s,nt(e));var Pe=(s,e)=>ns(rs(s,"raw",{value:ns(e||s.slice())}));import{R as bs,r as h,j as t,_ as F,h as ge,M as g,F as rt,c as he,f as xe,e as oe,u as at,A as lt,ab as ct,m as dt}from"./i8clt0mfz495j7ii.js";import{hq as de,en as Be,bO as ue,bQ as ve,gJ as qe,gK as Ke,J as Oe,c1 as ut,u as Z,aK as mt,cN as ft,cJ as le,cm as pt,gX as gt,bN as Ps,kv as ht,kT as X,gH as Qe,jx as Ms,cM as ws,d6 as xt,s2 as Ts,mM as Is,lq as Gs,a as Ge,pg as Cs,fF as Fe,bT as Xe,d4 as vt,jT as jt,co as _t,cn as yt,bY as bt,d9 as Pt,fA as Mt,o as V,L as W,F as Ye,d as me,s3 as wt,o2 as ks,G as pe,e as je,qp as Tt,fM as It,e4 as re,eU as Gt,B as Ct,p9 as kt,o5 as Nt,eV as St,f as Ns,dj as At,eo as Je,oj as Ss,om as Rt,ok as As,ix as Lt,s4 as zt,iw as Ve,s5 as Ut,k8 as Rs,b0 as Ze,oi as Et,ph as Ae,pi as Re,n as Y,P as Ls,k7 as Ot,C as Ft,z as Ce,S as Vt,T as zs,aW as $t,aV as Us,fH as Es,fK as Wt,j as Ht,e$ as Os,fi as Bt,mN as Te,bR as qt,h as Fs,iG as Vs,dK as Kt,s6 as Qt,pf as Xt,s7 as Yt,W as Jt,a5 as Zt,fL as Dt,aG as en,cK as sn,s8 as tn,s9 as nn,dv as on,cg as rn,w as as,x as ls,iM as an,ek as cs,eY as ln,f0 as cn,f1 as dn,oy as un,c4 as ds,m$ as mn}from"./ghewn7l2ynbm32fm.js";import{fV as fn,a as $s,bk as Ws,dy as pn,dw as te,dv as De,i3 as ae,sV as $e,sW as gn,ih as hn,sX as us,h7 as ms,sY as Hs,sZ as xn,g6 as Bs,bG as Ie,s_ as qs,ma as vn,s$ as jn,bB as _n,t0 as yn,g7 as bn,t1 as fs,g9 as Pn,T as Mn,t2 as wn,t3 as Tn,mC as In,d5 as Gn,aP as ps,fP as Cn,iH as gs,t4 as kn,bq as Nn,t5 as hs,dx as Sn,dt as An,eu as Rn,cT as Ln,r as zn,j_ as Un,j$ as En,k0 as On}from"./j0yo6uv6652vva62.js";import{b as xs,s as Fn,c as Vn,g as $n,A as Me,d as Wn,M as Hn}from"./g7azkxfkm9n8omkv.js";import{f as Ks}from"./m89x2zftpo6hrypr.js";import{M as Qs}from"./bc51ukj7a2qfpnc3.js";import{i as We}from"./ffra0j1auro6rua3.js";import{G as Bn}from"./n3bxkos2zhscnn5x.js";import{C as qn}from"./nb9dlstb4iu1wrqb.js";import{h as Kn}from"./ktw3b87sujui39wx.js";import{u as Xs}from"./nrrhfi0a0bbsg9w2.js";import{a as Qn,G as Xn}from"./hkf72jbegajnqi38.js";import{F as D,a as ee,b as Le,c as Yn,G as Jn}from"./h1jbqtena24viel6.js";import{b as Zn}from"./fb2095ktsebx1zzy.js";function Dn(s,e){const n=ve(s),o=ue.getTree(n),i=[];let r=ue.getCurrentNode(n);for(;r!=null&&(e==null||r.id!==e);)i.unshift(r.message),r=r.parentId!==""?o.getNodeByIdOrMessageId(r.parentId):void 0;return i}function eo(s){return s.filter(o=>o.recipient==="gizmo_editor.update_behavior").flatMap(o=>o.content.content_type==="text"?o.content.parts:o.content.content_type==="code"?[o.content.text]:[]).map(o=>JSON.parse(o)).reduce((o,i)=>v(v({},o),i),{})}async function so(s){let e;for(const n of s)if(n.author.name==="gizmo_editor.generate_profile_pic"){const o=pt.getImageAssetPointers(n);o.length>0&&(e=o.at(-1))}if(e!=null){const n=gt(e.asset_pointer),o=await qe(n);if(o.status===Ke.Success)return{id:n,permalink:o.download_url}}}async function to(s,e,n,o){const i=Dn(e,o),r=eo(i);let a=await so(i);if(We(r)&&a==null)return;const{name:d,context:l,description:c,profile_pic_file_id:T,prompt_starters:u}=r;if(T!=null)try{const P=await qe(T,s.id);P.status===Ke.Success&&(a={id:T,permalink:P.download_url})}catch(P){Oe.addError(new Error("Error while retrieving profile pic in update",{cause:P})),n.warning("Something went wrong updating your GPT's profile picture.",{duration:3})}const C={name:typeof d=="string"?d:void 0,description:typeof c=="string"?c:void 0,instructions:typeof l=="string"?l:void 0,promptStarters:Array.isArray(u)?u:void 0,profilePictureId:a==null?void 0:a.id,profilePictureUrl:a==null?void 0:a.permalink};return ut(C,P=>P!=null)}function no(s){var l,c,T;const e=new Set;for(const u of s.tools)e.add(u.type);const n=(l=s.name)!=null?l:"",o=(c=s.description)!=null?c:"",i=(T=s.instructions)!=null?T:"",r=Array.from(e).join(","),a=n===""&&o===""&&i==="",d=s.profilePictureUrl!=null;return a?"The GPT you are about to has the following abilities: ".concat(r,"."):"This is the GPT's current set of fields:\n\nname: ".concat(n,"\n\ndescription: ").concat(o,"\n\ncontext: ").concat(i,"\n\nabilities: ").concat(r,"\n\n").concat(d?"The GPT has a profile picture.":"This GPT does not have a profile picture. You must generate a profile picture when you next update your behavior.","\n")}const oo=10;function Ys(s,e){var T,u,C,P,m,w,j,y,_,p,M;const n=s.current,o=e.current;if(Be(n,o))return;const i={};n.name!==(o==null?void 0:o.name)&&(i.name=n.name),((T=n.description)!=null?T:"")!==((u=o==null?void 0:o.description)!=null?u:"")&&(i.description=(C=n.description)!=null?C:""),n.instructions!==((P=o==null?void 0:o.instructions)!=null?P:"")&&(i.context=(m=n.instructions)!=null?m:"");const r=new Set((j=(w=o==null?void 0:o.files)==null?void 0:w.map(x=>x.file_id))!=null?j:[]),a=new Set((_=(y=n.files)==null?void 0:y.map(x=>x.file_id))!=null?_:[]),d=((p=n.files)!=null?p:[]).filter(x=>!r.has(x.file_id)),l=((M=o==null?void 0:o.files)!=null?M:[]).filter(x=>!a.has(x.file_id));if(We(i)&&d.length===0&&l.length===0)return;const c=[];if(!We(i)){const x="Explicitly update the GPT's behavior to the following exact fields:\n\n    ".concat(JSON.stringify(i,null,2),'\n\n    "Do not call update_behavior yet. Instead, use these updated fields as the GPT\'s current behavior, and in the next call to update_behavior, incorporate these changes."\n    ');c.push(de(x))}if(l.length>0&&c.push(de("The user has removed the following files from the GPT. You can no longer reference these files: ".concat(l.map(x=>x.file_id).join(", ")))),d.length>0){const x=d.slice(0,oo);c.push(de("The user is adding these files to the GPT. The GPT may reference these files. The file IDs are: ".concat(x.map(z=>z.file_id).join(", ")),{attachments:x.map(z=>({id:z.file_id,name:z.name,size:z.size}))}))}return c}function io(s){if(s.length===0)return;const e="The user is uploading files in their next message. If you need to reference these in calls to update_behavior, you will use the following File ID(s), in order: ".concat(s.map(n=>'"'.concat(n.fileId,'"')).join(", "));return[de(e)]}function ro(s){const e="Remember, you should be calling either update_behavior or generate_profile_pic after most messages from the user. Your personality should be neutral and separate from the GPT you are creating.";if(!ue.findNode(ve(s),o=>o.message.content.content_type==="text"&&o.message.content.parts[0]===e))return[de(e)]}function ao(s,e){var a,d;const n=Z(),{session:o}=mt(n);ft.initThread({clientThreadId:s,conversationMode:{kind:le.GizmoMagicCreate,gizmo_id:void 0,behavior_overrides:e},userId:(a=o==null?void 0:o.user)==null?void 0:a.id,accountId:(d=o==null?void 0:o.account)==null?void 0:d.id});const i=fn(s);return async(l,c,T,u)=>{i({sourceEvent:l,promptMessage:de(u),prependMessages:Ys(c,T),completionMetadata:{conversationMode:{kind:le.GizmoMagicCreate,gizmo_id:c.current.id,behavior_overrides:e}}})}}const lo="Generate a new profile picture for this GPT using gizmo_editor generate_profile_pic. Do not prompt the user for any clarification. Do not send extra text outside of the tool function call. DO NOT CALL update_behavior or otherwise update GPT behavior in your response.";function co(s,e){h.useEffect(()=>{ue.findNode(ve(s),o=>jt(o.message)||o.message.author.role===_t.System&&o.message.content.content_type===yt.Text)||Xe(s,o=>{bt.updateTree(o,(i,r)=>{const a=i.findNode(d=>{var l;return((l=d.message.clientMetadata)==null?void 0:l.isPlaceholderTemplateAssistantWelcomeMessage)===!0},r);return a&&(a.id===r&&(r=i.rootId),i.deleteNode(a.id)),e?i.addMessageNode(r,Pt(e,void 0,{isPlaceholderTemplateAssistantWelcomeMessage:!0})):r})})},[s,e])}function uo(s,e,n){var l;const o=Z(),i=Ps(o,s),r=Ge(()=>Mt(i)),a=(l=r.models.get(Cs))!=null?l:r&&Ks(r.models.values(),c=>c.tags.includes(Fe.GPT_4o));$s(s,{kind:le.GizmoMagicCreate,gizmo_id:e.id,behavior_overrides:n},{forcedModelId:a==null?void 0:a.id}),h.useEffect(()=>{Xe(s,c=>{c.mode={kind:le.GizmoMagicCreate,gizmo_id:e.id,behavior_overrides:vt(n)}})},[o,s,e.id,n,a,r]);const[d]=h.useState(()=>{const c=e.id==null,T=e.id!=null&&e.name!==""&&e.description!=null&&e.instructions!==""&&e.profilePictureUrl!=null;return c?'Hi! I\'ll help you build a new GPT. You can say something like, "make a creative who helps generate visuals for new products" or "make a software engineer who helps format my code."\n\nWhat would you like to make?':T?"Welcome back! Is there anything ".concat(e.name," should be doing better? Anything you'd like to change?"):"You're back! Let's continue where we left off..."});co(s,d)}function mo({gizmoEditorData:s,updateGizmo:e,clientThreadId:n,gizmoEditorDataRef:o,magicMakerBehaviorOverrides:i,magicMakerConversationGizmoEditorDataRef:r,requireGizmoId:a}){const d=Z(),l=Ps(d,n),c=h.useRef(a);c.current=a;const T=h.useMemo(()=>({gizmoEditorData:s,gizmoId:s.id,mode:"magic",behaviorOverrides:i,getGizmoId:c.current}),[s,i]),u=ht(P=>P.files.filter(m=>m.status===X.Ready&&m.gizmoId!=null)),C=h.useCallback(P=>{var m,w,j,y,_;if(e(p=>{var M;return N(v({},p),{files:[...(M=p.files)!=null?M:[],...Qe(u.map(x=>{var z;return x.fileId!=null&&{file_id:x.fileId,name:x.file.name,size:x.file.size,type:Ms(x.file),last_modified:x.file.lastModified,file_size_tokens:(z=x.fileSpec)==null?void 0:z.fileTokenSize}}))]})}),r.current=ws(o.current),!P.completionType||P.completionType===xt.Next){const p=ue.getCurrentNode(ve(n)),M=(m=p.message.clientMetadata)!=null&&m.isPlaceholderTemplateAssistantWelcomeMessage?p.message:void 0;M&&(P.existingMessages=[M]),P.prependMessages=[...(w=io(u))!=null?w:[],...(j=Ys(o,r))!=null?j:[],...(y=ro(n))!=null?y:[],...(_=P.prependMessages)!=null?_:[]]}return P},[n,u,o,r,e]);return t.jsx(Ts.Provider,{value:T,children:t.jsx("div",{className:"relative flex h-full grow overflow-auto",children:t.jsx("div",{className:"grow",children:t.jsx(Is,{conversation:l,children:t.jsx(Gs,{conversation:l,children:t.jsx(Qs,{conversation:l,withCustomCompletionParams:C,hideHeader:!0})})})})})})}const fo=bs.memo(mo),po=V(()=>F(()=>import("./ceivmd4pm4umbvdn.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>W(s)}),go=V(()=>F(()=>import("./jgvrewhnjcf398o6.js").then(s=>s._),__vite__mapDeps([2,1])),{loading:s=>W(s)}),ho=V(()=>F(()=>import("./ooz2slmm8agf6bjp.js").then(s=>s._),__vite__mapDeps([3,1])),{loading:s=>W(s)}),Js=V(()=>F(()=>import("./j4nmkdkymh0gf9lt.js").then(s=>s._),__vite__mapDeps([4,1])),{loading:s=>W(s)}),xo=V(()=>F(()=>import("./nju52ppu7cxhyzrm.js").then(s=>s._),__vite__mapDeps([5,1])),{loading:s=>W(s)}),vo=V(()=>F(()=>import("./fwyctp3zfyh6emd2.js").then(s=>s._),__vite__mapDeps([6,1])),{loading:s=>W(s)}),jo=V(()=>F(()=>import("./j5l6f6jzcmdadw3x.js").then(s=>s._),__vite__mapDeps([7,1])),{loading:s=>W(s)}),_o=V(()=>F(()=>import("./frf0wu8ouyfyu06j.js").then(s=>s._),__vite__mapDeps([8,1])),{loading:s=>W(s)}),yo=V(()=>F(()=>import("./gsyp9a9fup59ufmh.js").then(s=>s._),__vite__mapDeps([9,1])),{loading:s=>W(s)}),bo=V(()=>F(()=>import("./ogo8hvquv5crkyqt.js").then(s=>s._),__vite__mapDeps([10,1])),{loading:s=>W(s)}),Po=V(()=>F(()=>import("./g7azkxfkm9n8omkv.js").then(s=>s.e),__vite__mapDeps([11,1,12,13,14,15,16])).then(s=>s.ShareGizmoModal)),Mo=V(()=>F(()=>import("./bg6sf480373dssa5.js"),__vite__mapDeps([17,1,12,13,14,15,11,16])).then(s=>s.SimpleShareGizmoModal));function He(s){return!!(s&&typeof s=="object"&&"gizmo"in s)}function Zs(s){window.history.length>1?s(-1):s(wt())}function wo(s){"use forget";var B;const e=he.c(39),{gizmo:n,publishedGizmo:o,isUpsertLoading:i,isPromoteLoading:r,isUploadingProfilePic:a,isGeneratingProfilePic:d,updateGizmo:l,promoteGizmo:c,appealGizmo:T,setAppealState:u,showActionsModal:C}=s,P=Z(),m=Ct();let w;if(e[0]!==n||e[1]!==d||e[2]!==r||e[3]!==a||e[4]!==i){if(w=[],(n==null||r||i)&&w.push(te.Loading),n!=null){let A;e[6]!==n?(A=De(n),e[6]=n,e[7]=A):A=e[7],w.push(...A)}a&&w.push(te.UploadingProfilePic),d&&w.push(te.GeneratingProfilePic),e[0]=n,e[1]=d,e[2]=r,e[3]=a,e[4]=i,e[5]=w}else w=e[5];const j=w;let y;e[8]!==n?(y=ks(n),e[8]=n,e[9]=y):y=e[9];const _=y;let p;e[10]!==m||e[11]!==T||e[12]!==P||e[13]!==n||e[14]!==c||e[15]!==o||e[16]!==u||e[17]!==C||e[18]!==l?(p=A=>{requestAnimationFrame(()=>At(P,m!=null&&m.isWorkspaceAccount()?Po:Mo,{gizmo:n,publishedGizmo:o,promoteGizmo:c,appealGizmo:T,setAppealState:u,showActionsModal:C,updateGizmo:l,shareOnly:A==="share"}))},e[10]=m,e[11]=T,e[12]=P,e[13]=n,e[14]=c,e[15]=o,e[16]=u,e[17]=C,e[18]=l,e[19]=p):p=e[19];const M=p,[x,z]=h.useState(!1),I=n.sharingRecipient?xs[n.sharingRecipient]:xs.private,G=r||i;let k;e[20]!==I||e[21]!==j||e[22]!==n.id||e[23]!==n.sharing||e[24]!==M||e[25]!==G||e[26]!==_||e[27]!==r||e[28]!==i||e[29]!==c||e[30]!==o?(k=_?t.jsx(ae,{color:"primary",onClick:()=>M("promote"),loading:j.length>0&&j.every(To),disabled:G||n.id===void 0||j.length>0,tooltip:j.length>0?j.map($e).join("\n"):void 0,"data-testid":"gizmo-editor-create-gpt-button",children:t.jsx(g,{id:"svUGIb",defaultMessage:"Create"})}):t.jsxs(t.Fragment,{children:[t.jsx(ae,{color:"secondary",loading:r||!o,disabled:G,icon:I,onClick:()=>M("share"),children:t.jsx(g,{id:"aXKW4G",defaultMessage:"Share"})}),t.jsx(ae,{color:"primary",onClick:async()=>{var f;let A=n.sharing.subjects.map(Fn);const R=kt(n.sharing.subjects);A=Nt(n.sharing.recipient,A,(f=R==null?void 0:R.capabilities)!=null?f:St);const H=o&&He(o)?o.gizmo.display.categories[0]:void 0;await c({recipient:n.sharing.recipient,subjects:A},H)&&z(!0)},loading:i||!o,disabled:G||j.length>0,tooltip:j.length>0?j.map($e).join("\n"):void 0,children:t.jsx(g,{id:"84QVoj",defaultMessage:"Update"})})]}),e[20]=I,e[21]=j,e[22]=n.id,e[23]=n.sharing,e[24]=M,e[25]=G,e[26]=_,e[27]=r,e[28]=i,e[29]=c,e[30]=o,e[31]=k):k=e[31];let O;e[32]!==(m==null?void 0:m.data)||e[33]!==x||e[34]!==o?(O=x&&o&&t.jsx(Vn,{publishedGizmo:o,sharing:He(o)?o.gizmo.sharing:void 0,onClose:()=>z(!1),workspaceName:(B=m==null?void 0:m.data.name)!=null?B:""}),e[32]=m==null?void 0:m.data,e[33]=x,e[34]=o,e[35]=O):O=e[35];let S;return e[36]!==k||e[37]!==O?(S=t.jsxs(t.Fragment,{children:[k,O]}),e[36]=k,e[37]=O,e[38]=S):S=e[38],S}function To(s){return[te.Loading,te.UploadingProfilePic,te.GeneratingProfilePic].includes(s)}function Io(s){"use forget";var z;const e=he.c(26),{gizmoEditorData:n,publishedGizmo:o,revertDraft:i}=s,r=Z(),a=oe(),d=je(),l=ge(),[c,T]=h.useState(!1),{canDelete:u}=Tt(o),{canCreate:C}=It();if(!!!(o||i||n!=null&&n.id&&n.liveVersion>0||u))return null;let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsx(ae,{color:"ghost",icon:xo}),e[0]=m):m=e[0];let w;e[1]!==r||e[2]!==o||e[3]!==d?(w=o!=null&&t.jsxs(re.Item,{onClick:I=>{pn(r,o,d,I)},children:[t.jsx(Js,{className:"icon-sm"}),t.jsx(g,v({},se.copyLink))]}),e[1]=r,e[2]=o,e[3]=d,e[4]=w):w=e[4];let j;e[5]!==a||e[6]!==i?(j=i!=null&&t.jsxs(re.Item,{onClick:()=>{window.confirm(a.formatMessage(se.revertConfirm))&&i()},children:[t.jsx(go,{className:"icon-sm"}),t.jsx(g,{id:"W2blnV",defaultMessage:"Revert..."})]}),e[5]=a,e[6]=i,e[7]=j):j=e[7];let y;e[8]!==C||e[9]!==n||e[10]!==l?(y=(n==null?void 0:n.id)!=null&&n.liveVersion>0&&t.jsxs(t.Fragment,{children:[t.jsxs(re.Item,{onClick:()=>{l("/g/".concat(n.id,"/view"))},children:[t.jsx(jo,{className:"icon-sm"}),t.jsx(g,{id:"gizmo.versionHistory",defaultMessage:"Version History"})]}),C&&t.jsxs(re.Item,{onClick:async()=>{const I=await Gt.copyGizmo({gizmoId:n.id});I.gizmo.id&&l("/gpts/editor/".concat(I.gizmo.id))},children:[t.jsx(vo,{className:"icon-sm"}),t.jsx(g,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})]})]}),e[8]=C,e[9]=n,e[10]=l,e[11]=y):y=e[11];let _;e[12]!==o?(_=o&&He(o)&&((z=o.gizmo.current_user_permission)==null?void 0:z.can_delete)&&t.jsxs(re.Item,{color:"danger",onClick:()=>{T(!0)},children:[t.jsx(po,{className:"icon-sm"}),t.jsx(g,{id:"tNrOLG",defaultMessage:"Delete GPT"})]}),e[12]=o,e[13]=_):_=e[13];let p;e[14]!==w||e[15]!==j||e[16]!==y||e[17]!==_?(p=t.jsxs(Je,{side:"top",contentAlign:"end",sideOffset:8,triggerButton:m,children:[w,j,y,_]}),e[14]=w,e[15]=j,e[16]=y,e[17]=_,e[18]=p):p=e[18];let M;e[19]!==(n==null?void 0:n.id)||e[20]!==l||e[21]!==c?(M=c&&t.jsx(Bn,{gizmoId:(n==null?void 0:n.id)||"",onSuccess:()=>Zs(l),onClose:()=>{T(!1)}}),e[19]=n==null?void 0:n.id,e[20]=l,e[21]=c,e[22]=M):M=e[22];let x;return e[23]!==p||e[24]!==M?(x=t.jsxs(t.Fragment,{children:[p,M]}),e[23]=p,e[24]=M,e[25]=x):x=e[25],x}var js;const we=Ye.div(js||(js=Pe(["flex items-center gap-1"])));function Go(s){"use forget";const e=he.c(7),{gizmoEditorData:n}=s,o=Ns(Co);switch(n.sharingRecipient){case pe.Private:{let i;return e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsxs(we,{children:[t.jsx(ho,{className:"icon-xs"}),t.jsx(g,v({},se.onlyMe))]}),e[0]=i):i=e[0],i}case pe.Link:{let i;return e[1]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsxs(we,{children:[t.jsx(Js,{className:"icon-xs"}),t.jsx(g,v({},se.anyoneWithLink))]}),e[1]=i):i=e[1],i}case pe.Workspace:{let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(yo,{className:"icon-xs"}),e[2]=i):i=e[2];let r;return e[3]!==o?(r=t.jsxs(we,{children:[i,o]}),e[3]=o,e[4]=r):r=e[4],r}case pe.Marketplace:{let i;return e[5]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsxs(we,{children:[t.jsx(bo,{className:"icon-xs"}),t.jsx(g,v({},se.public))]}),e[5]=i):i=e[5],i}default:{let i;return e[6]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("div",{}),e[6]=i):i=e[6],i}}}function Co(s){var e;return(e=s.currentWorkspace)==null?void 0:e.name}function ko(s){"use forget";const e=he.c(14),{gizmoEditorData:n}=s;let o;e[0]!==n.profilePictureUrl?(o=n.profilePictureUrl!=null?t.jsx(Ws,{isFirstParty:!1,src:n.profilePictureUrl,className:"h-8 w-8"}):t.jsx("div",{className:"border-token-border-medium h-8 w-8 rounded-full border-2 border-dashed"}),e[0]=n.profilePictureUrl,e[1]=o):o=e[1];let i;e[2]!==n.name?(i=n.name||t.jsx(g,v({},se.newGPT)),e[2]=n.name,e[3]=i):i=e[3];let r;e[4]!==i?(r=t.jsx("div",{className:"text-sm font-semibold",children:i}),e[4]=i,e[5]=r):r=e[5];let a;e[6]!==n?(a=t.jsx("div",{className:"text-token-text-secondary text-xs",children:ks(n)?t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"bg-token-text-tertiary h-1.5 w-1.5 rounded-full"}),t.jsx(g,v({},se.draft))]}):t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"bg-brand-green h-1.5 w-1.5 rounded-full"}),n.sharingRecipient===pe.Marketplace?t.jsx(g,v({},se.published)):t.jsx(g,{id:"gizmoEditorHeader.live",defaultMessage:"Live"}),t.jsx(g,N(v({},se.dotSeparator),{tagName:"span"})),t.jsx(Go,{gizmoEditorData:n})]})}),e[6]=n,e[7]=a):a=e[7];let d;e[8]!==r||e[9]!==a?(d=t.jsxs("div",{children:[r,a]}),e[8]=r,e[9]=a,e[10]=d):d=e[10];let l;return e[11]!==o||e[12]!==d?(l=t.jsxs("div",{className:"flex items-center gap-2",children:[o,d]}),e[11]=o,e[12]=d,e[13]=l):l=e[13],l}var _s;const No=Ye.div(_s||(_s=Pe(["\n  cursor-pointer\n  border-b\n  pb-[1px]\n  pt-[2px]\n  text-sm\n  text-token-text-secondary\n  hover:border-token-border-xheavy\n  hover:text-token-text-primary\n  mx-2\n"])));function So({gizmoEditorData:s,isUpsertLoading:e,isPromoteLoading:n,isUploadingProfilePic:o,isGeneratingProfilePic:i,publishedGizmo:r,updateGizmo:a,promoteGizmo:d,appealGizmo:l,setAppealState:c,revertDraft:T,draftMessage:u,className:C,hasUnpublishedChanges:P,showActionsModal:m}){var j,y;const w=ge();return t.jsxs("div",{className:me("border-token-border-medium relative flex h-14 w-full items-center justify-between gap-2 border-b px-3",C),children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("a",{className:"text-token-text-primary cursor-pointer",onClick:()=>Zs(w),children:t.jsx(_o,{className:"icon"})}),t.jsx(ko,{gizmoEditorData:s})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[r&&((y=(j=r==null?void 0:r.gizmo)==null?void 0:j.live_version)!=null?y:0)>1&&t.jsx(No,{onClick:()=>w("/g/".concat(s.id,"/view")),children:t.jsx(g,{id:"P0Ri/k",defaultMessage:"Last edited {date}",values:{date:t.jsx(rt,{value:r.gizmo.updated_at,day:"numeric",month:"short",year:new Date(r.gizmo.updated_at).getFullYear()===new Date().getFullYear()?void 0:"numeric"})}})}),u,t.jsx(Io,{gizmoEditorData:s,publishedGizmo:r,revertDraft:T}),t.jsx(wo,{gizmo:s,publishedGizmo:r,isUpsertLoading:e,isPromoteLoading:n,isUploadingProfilePic:o,isGeneratingProfilePic:i,updateGizmo:a,promoteGizmo:d,appealGizmo:l,setAppealState:c,hasUnpublishedChanges:P,showActionsModal:m})]})]})}const se=xe({onlyMe:{id:"gizmo.onlyMe",defaultMessage:"Only me"},anyoneWithLink:{id:"gizmo.anyoneWithLink",defaultMessage:"Anyone with a link"},public:{id:"gizmo.public",defaultMessage:"Everyone"},newGPT:{id:"gizmo.newGPT",defaultMessage:"New GPT"},draft:{id:"gizmo.draft",defaultMessage:"Draft"},published:{id:"gizmo.published",defaultMessage:"Published"},revertConfirm:{id:"gizmo.revertConfirm",defaultMessage:"Are you sure you want to revert to the last saved version?"},copyLink:{id:"gizmo.copyLink",defaultMessage:"Copy link"},dotSeparator:{id:"gizmo.dotSeparator",defaultMessage:"·"}}),Ao=V(()=>F(()=>import("./j0yo6uv6652vva62.js").then(s=>s.yq),__vite__mapDeps([14,1,12,13,15])),{loading:s=>W(s)}),Ro=512;function Lo(){return t.jsx("div",{className:"border-token-border-medium relative flex h-full w-full items-center justify-center rounded-full border-2 border-dashed",children:t.jsx(Ze,{className:"h-1/4 w-1/4"})})}function zo({gizmoEditorData:s,onFileChange:e,generateProfilePic:n,isGeneratingProfilePic:o,setIsGeneratingProfilePic:i}){const r=oe(),a=je(),[d,l]=h.useState(void 0),c=h.useRef(e);h.useEffect(()=>{c.current=e});async function T(P){if(P.length>0){i(!1);const m=await zt(P[0],Ro),w=Ve(m);l({tempId:w,file:m,status:X.Uploading,progress:1,fileId:null,cdnUrl:null}),c.current("uploading"),Ut(w,m,r,a,Rs.ProfilePicture,{onFileCreated(j,y,_){l(p=>p!=="initial"&&(p==null?void 0:p.tempId)===j&&p.status===X.Uploading?N(v({},p),{progress:10,fileId:y,cdnUrl:_}):p)},onFileUploadProgress(j,y){l(_=>_!=="initial"&&(_==null?void 0:_.tempId)===j&&_.status===X.Uploading?N(v({},_),{progress:y}):_)},onFileUploaded(j,y,_){l(p=>p!=="initial"&&(p==null?void 0:p.tempId)===j?(c.current(p),N(v({},p),{status:X.Ready,progress:100,fileSpec:v({name:p.file.name,id:p.fileId,size:p.file.size},_!=null?_:{})})):p)},onError(j){l(y=>{if(y!=="initial"&&(y==null?void 0:y.tempId)===j){c.current(void 0);return}return y})}})}}const{open:u,getInputProps:C}=Xs(v({disabled:!1,noClick:!0,onDropAccepted:T,onDropRejected:P=>Kn(P,r,a,Lt.ProfilePicture),multiple:!0,maxSize:As},Ss(Rt)));return t.jsxs("div",{className:"flex w-full items-center justify-center gap-4",children:[t.jsxs(Je,{sideOffset:8,triggerButton:t.jsx("button",{className:"h-20 w-20",children:o?t.jsx(Lo,{}):d!=null&&d!="initial"&&d.status!=X.Ready?t.jsxs("div",{className:"relative h-full w-full overflow-hidden rounded-full",children:[t.jsx(gn,{file:d.file}),d.status===X.Uploading&&d.progress<90?t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:t.jsx(hn,{percentage:d.progress,className:"h-6 w-6"})}):null]}):(s==null?void 0:s.profilePictureUrl)!=null&&(s==null?void 0:s.profilePictureUrl)!==""?t.jsx(Ws,{isFirstParty:!1,src:s.profilePictureUrl}):t.jsx("div",{className:"border-token-border-medium flex h-full w-full items-center justify-center rounded-full border-2 border-dashed",children:t.jsx(Ao,{className:"text-4xl"})})}),children:[t.jsx(re.Item,{onClick:u,children:t.jsx(g,{id:"ERQwXg",defaultMessage:"Upload Photo"})}),t.jsx(re.Item,{onClick:n,children:t.jsx(g,{id:"NXAog/",defaultMessage:"Use DALL·E"})})]}),t.jsx("input",v({},C()))]})}function Uo({gizmoEditorData:s,requireGizmoId:e,currentModelConfig:n,updateGizmo:o}){var z;const i=oe(),r=je(),[a,d]=h.useState(0),l=h.useRef(new Map),c=Et(n,void 0),T=async I=>{Ls.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const G=await e();I.length>0&&await Promise.all(I.map(k=>{const O=Ve(k);l.current.set(O,{tempId:O,gizmoId:G,file:k,status:X.Uploading,progress:1,fileId:null,cdnUrl:null}),Ot(Ve(k),k,i,r,{kind:Rs.Gizmo,gizmoId:G},{onFileUploaded:(S,B,A,R)=>{const H=l.current.get(S);H==null||H.fileId==null||(o(J=>{var f,E;return N(v({},J),{files:[...(f=J.files)!=null?f:[],{file_id:H.fileId,name:H.file.name,size:H.file.size,type:(E=R==null?void 0:R.mimeType)!=null?E:Ms(k),last_modified:H.file.lastModified,file_size_tokens:R==null?void 0:R.fileTokenSize}]})}),l.current.delete(S),d(J=>J+1))},onFileCreated:(S,B,A)=>{l.current.set(S,N(v({tempId:S,gizmoId:G,file:k,status:X.Uploading,progress:1},l.current.get(S)),{fileId:B,cdnUrl:A})),d(R=>R+1)},onFileUploadProgress:(S,B)=>{const A=l.current.get(S);(A==null?void 0:A.status)===X.Uploading&&l.current.set(S,N(v({},A),{progress:B})),d(R=>R+1)},onError:S=>{l.current.delete(S)}},{usesRetrievalIndex:n!=null&&Ae(n,k.type,k.name)===Re.Retrieval})}))},{getInputProps:u,open:C}=Xs(v({disabled:!1,noClick:!0,onDropAccepted:T,multiple:!0,maxSize:As,maxFiles:10},Ss(c))),P=(z=s==null?void 0:s.files)!=null?z:[];function m(I){return t.jsx(ms,{onRemoveFileClick:()=>{l.current.delete(I.tempId),d(G=>G+1)},file:I.file,loadingPercentage:I.status===X.Uploading?I.progress:void 0},I.tempId)}function w(I){return t.jsx(ms,{file:I.name,fileId:I.file_id,onRemoveFileClick:()=>o(G=>{var k;return N(v({},G),{files:(k=G==null?void 0:G.files)==null?void 0:k.filter(O=>O.file_id!==I.file_id)})}),gizmoId:s==null?void 0:s.id},I.file_id)}const j=Array.from(l.current.values()).filter(I=>P.every(G=>G.file_id!==I.fileId)),[y,_]=us(j,I=>n!=null&&Ae(n,I.file.type,I.file.name)===Re.CodeInterpreter),[p,M]=us(P,I=>n!=null&&I.type!=null&&Ae(n,I.type,I.name)===Re.CodeInterpreter),x=h.useRef(p.length);return h.useEffect(()=>{p.length>x.current&&o(I=>{var G,k;return(G=I.tools)!=null&&G.some(O=>O.type===Y.PYTHON)?I:N(v({},I),{tools:[...(k=I.tools)!=null?k:[],{type:Y.PYTHON}]})}),x.current=p.length},[p.length]),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"text-token-text-tertiary rounded-lg text-xs",children:t.jsx(g,v({},Eo.knowledgeWarning))}),_.length>0||M.length>0?t.jsxs("div",{className:"flex flex-wrap gap-2",children:[_.map(m),M.map(w)]}):null,y.length>0||p.length>0?t.jsxs("div",{children:[t.jsx("div",{className:"text-token-text-tertiary mb-2 text-xs",children:t.jsx(g,{id:"i/QurZ",defaultMessage:"The following files are only available for Code Interpreter:"})}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.map(m),p.map(w)]})]}):null,t.jsx("div",{children:t.jsxs(ae,{onClick:C,children:[t.jsx("input",v({},u())),t.jsx(g,{id:"sr8Qp/",defaultMessage:"Upload files"})]})})]})}const Eo=xe({knowledgeWarning:{id:"gizmo.knowledgeWarning",defaultMessage:"Conversations with your GPT can potentially reveal part or all of the files uploaded."}});function Oo({placeholder:s,text:e,onChange:n,onClose:o}){return t.jsxs(Ft,{testId:"modal-gizmo-editor-form",className:"max-h-[100vh]! max-w-[80vw]!",type:"success",isOpen:!0,onClose:o,primaryButton:t.jsx(ae,{onClick:o,children:t.jsx(g,{id:"FeFVdS",defaultMessage:"Close"})}),children:[t.jsx("textarea",{className:"bg-token-main-surface-primary h-[70vh] w-full resize-none rounded-lg dark:border-gray-700",value:e,onChange:i=>{n(i.target.value)},placeholder:s}),t.jsx("div",{className:"text-token-text-tertiary text-xs",children:t.jsx(g,v({},Hs.instructionsWarning))})]})}const Fo=V(()=>F(()=>import("./b8lmybnmedr4n7bh.js").then(s=>s._),__vite__mapDeps([18,1])),{loading:s=>W(s)}),Vo=V(()=>F(()=>import("./ghewn7l2ynbm32fm.js").then(s=>s.vJ),__vite__mapDeps([12,1,13])),{loading:s=>W(s)});var ys;const ze=Ye.div(ys||(ys=Pe(["text-sm text-red-500"])));function $o({children:s,collapsed:e,initial:n}){return t.jsx($t,{initial:n,children:!e&&t.jsx(Us.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:s})})}function Wo({gizmo:s,onShowActionsEditor:e,isDisabled:n}){var a,d,l;const o=oe(),i=je(),r=t.jsxs("div",{className:"space-y-1",children:[(a=s==null?void 0:s.tools)==null?void 0:a.map((c,T)=>{var u;return c.type!==Y.JIT_PLUGIN?null:t.jsxs("div",{children:[t.jsx(Jn,{isDisabled:n,actionTool:c,onShowActionsEditor:()=>e(c.metadata.domain)}),((u=c.metadata.auth)==null?void 0:u.type)==="oauth"&&t.jsx(qn,{label:o.formatMessage($.callbackUrlLabel),value:"https://chat.openai.com/aip/".concat(c.metadata.action_id,"/oauth/callback"),onCopied:()=>{i.success("Copied to clipboard",{duration:3})}})]},T)}),((l=(d=s==null?void 0:s.tools)==null?void 0:d.filter(c=>c.type===Y.JIT_PLUGIN))!=null?l:[]).length>=fs?t.jsx("div",{children:o.formatMessage($.maxActionsReached,{number:fs})}):t.jsx(ae,{disabled:n,onClick:()=>{e("Unknown domain")},className:"mt-2",children:t.jsx(g,v({},$.createActionLabel))})]});return n?t.jsx(zs,{side:"top",label:o.formatMessage($.disabledCustomActionsTooltip),children:r}):r}function Ho(s){var e,n,o;return((n=(e=s.files)==null?void 0:e.length)!=null?n:0)>0||((o=s==null?void 0:s.tools)==null?void 0:o.some(i=>i.type===Y.JIT_PLUGIN))}function Bo({gizmoEditorData:s,updateGizmo:e,currentModelConfig:n,generateProfilePic:o,setIsUploadingProfilePic:i,isGeneratingProfilePic:r,setIsGeneratingProfilePic:a,requireGizmoId:d,onShowActionsEditor:l}){var O,S,B,A,R,H,J;const c=(O=s==null?void 0:s.tools)!=null?O:[],[T,u]=h.useState(!1),[C,P]=h.useState(!0),m=(S=s==null?void 0:s.promptStarters)!=null?S:[],w=[...m,...m.length<xn?[""]:[]],j=De(s),y=Z(),_=Ce(y),p=_==null?void 0:_.isWorkspaceAccount(),M=Bs(Ie.WorkspaceGPTCustomActions),x=oe(),z=Ge(()=>Es(y,{isGizmo:!0})),I=_==null?void 0:_.hasPaidFeatures(),{data:G}=Ge(()=>Wt(y)),k=G!=null&&G.editor?qs((B=s==null?void 0:s.tools)!=null?B:[])?G.editor.models_list_with_custom_actions:G.editor.models_list:[];return t.jsxs("div",{className:"flex h-full grow flex-col overflow-y-auto px-2 pt-6 text-sm",children:[t.jsxs("div",{className:"grow",children:[t.jsxs(D,{children:[t.jsx(zo,{gizmoEditorData:s,generateProfilePic:o,isGeneratingProfilePic:r,setIsGeneratingProfilePic:a,onFileChange:async f=>{if(f!=null&&f!=="uploading"&&f.fileId!=null){const E=await qe(f.fileId);E.status===Ke.Success&&e({profilePictureId:f.fileId!=null?f.fileId:void 0,profilePictureUrl:E.download_url})}else e({profilePictureId:void 0,profilePictureUrl:void 0});i(f==="uploading")}}),t.jsx(ee,{label:t.jsx(g,{id:"M4dZms",defaultMessage:"Name"}),description:t.jsx(g,{id:"+Gkni2",defaultMessage:"The name of your GPT"})}),t.jsx(Le,{type:"text",placeholder:x.formatMessage($.gptNamePlaceholder),value:(A=s==null?void 0:s.name)!=null?A:"",onChange:f=>{e({name:f.target.value})},onBlurCapture:()=>e(f=>N(v({},f),{name:f.name.trim()})),"data-testid":"gizmo-name-input"}),j.includes(te.GizmoNameTooLong)?t.jsx(ze,{className:"mt-1",children:t.jsx(g,N(v({},$.nameTooLong),{values:{length:vn}}))}):null]}),t.jsxs(D,{className:"mt-4",children:[t.jsx(ee,{label:t.jsx(g,{id:"YDzNvf",defaultMessage:"Description"}),description:t.jsx(g,{id:"dpxCw8",defaultMessage:"Short description of what this GPT does"})}),t.jsx(Le,{type:"text",placeholder:x.formatMessage($.descriptionPlaceholder),value:(R=s==null?void 0:s.description)!=null?R:"",onChange:f=>e({description:f.target.value}),onBlurCapture:()=>e(f=>{var E,ne;return N(v({},f),{description:(ne=(E=f.description)==null?void 0:E.trim())!=null?ne:""})}),"data-testid":"gizmo-description-input"}),j.includes(te.GizmoDescriptionTooLong)?t.jsx(ze,{className:"mt-1",children:t.jsx(g,N(v({},$.descriptionTooLong),{values:{length:jn}}))}):null]}),t.jsxs(D,{children:[t.jsx(ee,{label:t.jsx(g,{id:"2SO0RJ",defaultMessage:"Instructions"}),description:x.formatMessage($.instructionsSubtitle)}),t.jsxs("div",{className:"relative",children:[t.jsx(Yn,{className:"resize-none",rows:8,value:s==null?void 0:s.instructions,onChange:f=>e({instructions:f.target.value}),onBlurCapture:()=>e(f=>N(v({},f),{instructions:f.instructions.trim()})),placeholder:x.formatMessage($.instructionsSubtitle),"data-testid":"gizmo-instructions-input"}),t.jsx("button",{className:"text-token-text-tertiary absolute end-2 bottom-3",onClick:()=>u(!0),children:t.jsx(Fo,{className:"icon-sm"})})]}),t.jsx("div",{className:"text-token-text-tertiary text-xs",children:t.jsx(g,v({},Hs.instructionsWarning))}),j.includes(te.GizmoInstructionsTooLong)?t.jsx(ze,{className:"mt-1",children:t.jsx(g,N(v({},$.instructionsTooLong),{values:{length:_n}}))}):null]}),t.jsxs(D,{children:[t.jsx(ee,{label:t.jsx(g,{id:"6rfYOX",defaultMessage:"Conversation starters"}),description:t.jsx(g,{id:"OSOIpd",defaultMessage:"Examples for the user to start the conversation"})}),t.jsx("div",{className:"flex flex-col gap-1",children:w.map((f,E)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx(Le,{className:"rounded-e-none",value:f,type:"text",maxLength:yn,onChange:ne=>{const q=ne.target.value;e(ce=>{var _e;return N(v({},ce),{promptStarters:Qe(E>=((_e=m.length)!=null?_e:0)?[...m!=null?m:[],q]:m.map((ke,ye)=>ye===E?q===""?void 0:q:ke))})})}}),t.jsx("button",{className:"border-token-border-medium flex h-9 w-9 items-center justify-center rounded-lg rounded-s-none border border-s-0",onClick:()=>e(ne=>N(v({},ne),{promptStarters:m.filter((q,ce)=>ce!==E)})),children:t.jsx(Vo,{className:"icon-sm"})})]},E))})]}),t.jsxs(D,{children:[t.jsx(ee,{label:t.jsx(g,{id:"bwXSkU",defaultMessage:"Knowledge"}),description:x.formatMessage($.knowledgeExplanation)}),t.jsx(Uo,{gizmoEditorData:s,requireGizmoId:d,currentModelConfig:n,updateGizmo:e})]}),I&&t.jsxs(D,{children:[t.jsx(ee,{label:t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4},children:[t.jsx(g,{id:"wnVs4X",defaultMessage:"Recommended Model"}),t.jsx(Qn,{description:t.jsx(g,v({},$.recommendedModelExplainer))})]})}),t.jsx("div",{style:{fontSize:"12px",color:"var(--gray-600)",marginTop:"4px",marginBottom:"8px"},children:t.jsx(g,v({},$.recommendedModelDescriberUnderTitle))}),t.jsxs("select",{className:"border-token-border-medium bg-token-main-surface-primary w-full rounded-lg border px-3 py-2 text-sm",value:(H=s.defaultModel)!=null?H:"",onChange:f=>{Vt.logEvent("gizmo_recommended_model_selected",f.target.value),e({defaultModel:f.target.value===""?null:f.target.value})},children:[t.jsx("option",{value:"",children:x.formatMessage({id:"gizmoEditor.noneOption",defaultMessage:"No Recommended Model - Users will use any model they prefer"})}),[...z.models.values()].filter(f=>k.includes(f.id)).sort((f,E)=>f.title.localeCompare(E.title)).map(f=>t.jsx("option",{value:f.id,children:f.title},f.id))]})]}),t.jsxs(D,{children:[t.jsx(ee,{label:t.jsx(g,{id:"mcAwDU",defaultMessage:"Capabilities"}),description:t.jsx(g,{id:"2exQT6",defaultMessage:"Functionality this GPT can use"})}),t.jsx(Xn,{enabledTools:c,onEnabledToolsChange:f=>e({tools:f})})]}),t.jsxs(D,{children:[t.jsx(ee,{label:t.jsx(g,{id:"7r7v+u",defaultMessage:"Actions"}),description:t.jsx(g,{id:"fBln7I",defaultMessage:"APIs this GPT can use"})}),t.jsx(Wo,{isDisabled:!!(p&&!M),gizmo:s,onShowActionsEditor:l})]}),!p&&Ho(s)&&t.jsxs(D,{children:[t.jsx(ee,{label:t.jsx(g,{id:"R3KeU7",defaultMessage:"Additional Settings"}),collapsed:!!C,onClick:()=>{P(f=>!f)}}),t.jsx($o,{collapsed:C,initial:!1,children:t.jsx(bn,{className:"mx-3 my-1",labelClassName:"w-full cursor-pointer",label:t.jsx(g,{id:"tZgwFW",defaultMessage:"Use conversation data in your GPT to improve our models"}),id:"improve-chatgpt",checked:!s.trainingDisabled,onChange:()=>{e({trainingDisabled:!s.trainingDisabled})}})})]})]}),T&&t.jsx(Oo,{text:(J=s.instructions)!=null?J:"",onChange:f=>{e({instructions:f})},onClose:()=>u(!1),placeholder:x.formatMessage($.instructionsSubtitle)})]})}const $=xe({recommendedModelDescriberUnderTitle:{id:"gizmo.recommendedModelDescriberUnderTitle",defaultMessage:"Recommend a model to the user, which should be used by default for best results."},recommendedModelExplainer:{id:"gizmo.recommendedModelExplainer",defaultMessage:"When the user loads a new conversation with the GPT the recommended model will be used. If the model is not available to the user, a similar model may be automatically selected."},nameTooLong:{id:"gizmo.nameTooLong",defaultMessage:"GPT names cannot be longer than {length} characters."},knowledgeExplanation:{id:"gizmo.knowledgeExplanation",defaultMessage:"Additional files for this GPT to reference."},descriptionTooLong:{id:"gizmo.descriptionTooLong",defaultMessage:"GPT descriptions cannot be longer than {length} characters."},instructionsTooLong:{id:"gizmo.instructionsTooLong",defaultMessage:"GPT instructions cannot be longer than {length} characters. If you need to provide more context, you may want to attach a file or knowledge document."},disabledCustomActionsTooltip:{id:"gizmo.disabledCustomActionsTooltip",defaultMessage:"Custom actions are disabled for your workspace. Contact your admin to enable them."},createActionLabel:{id:"gizmo.createActionLabel",defaultMessage:"Create new action"},maxActionsReached:{id:"gizmo.maxActionsReached",defaultMessage:"GPTs can have a maximum of {number} actions"},descriptionPlaceholder:{id:"gizmo.descriptionPlaceholder",defaultMessage:"Add a short description about what this GPT does"},instructionsSubtitle:{id:"gizmo.instructionsSubtitle",defaultMessage:"What does this GPT do? How does it behave? What should it avoid doing?"},gptNamePlaceholder:{id:"gizmo.gptNamePlaceholder",defaultMessage:"Name your GPT"},callbackUrlLabel:{id:"gizmo.callbackUrlLabel",defaultMessage:"Callback URL"}}),qo=V(()=>F(()=>import("./gsas8pb1acnf7jnd.js").then(s=>s._),__vite__mapDeps([19,1])),{loading:s=>W(s)});function Ko(s,e){const n=Os(s);if(!Array.isArray(s.detail))return n;const o=Qe(s.detail.map(i=>{if(i.type==="value_error.any_str.max_length")switch(i.loc[1]){case"display":{switch(i.loc[2]){case"name":return e.formatMessage($.nameTooLong,{length:i.ctx.limit_value});case"description":return e.formatMessage($.descriptionTooLong,{length:i.ctx.limit_value})}break}case"instructions":return e.formatMessage($.instructionsTooLong,{length:i.ctx.limit_value})}if(typeof i.msg=="string")return i.msg}));return o.length>0?o.join("\n"):n}function Qo({upsertDraftError:s}){const e=oe(),n=Ko(s,e);return t.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[t.jsx("div",{children:t.jsx(g,v({},Ds.errorSavingDraft))}),n!=null&&t.jsx(zs,{label:n,children:t.jsx(qo,{className:"icon-sm"})})]})}function Xo({isPublished:s,isSavingDraft:e,hasUnpublishedChanges:n,upsertDraftError:o,className:i}){return o instanceof Ht?t.jsx(Qo,{upsertDraftError:o}):n?t.jsxs("div",{className:me("flex items-center gap-2",i),children:[t.jsx("span",{className:"text-token-text-secondary",children:s?t.jsx(g,{id:"gizmoEditor.draftUnpublished",defaultMessage:"Unpublished changes"}):t.jsx(g,{id:"gizmoEditor.draftPending",defaultMessage:"Updates pending"})}),t.jsx("div",{className:"text-token-text-tertiary w-4",children:e&&t.jsx(Ze,{})})]}):null}const Ds=xe({errorSavingDraft:{id:"gizmo.errorSavingDraft",defaultMessage:"Error saving draft"}}),Yo=V(()=>F(()=>import("./j0yo6uv6652vva62.js").then(s=>s.yA),__vite__mapDeps([14,1,12,13,15])),{loading:s=>W(s)}),Jo=V(()=>F(()=>import("./o16x9m1k4d29ak42.js").then(s=>s._),__vite__mapDeps([20,1])),{loading:s=>W(s)}),Zo=V(()=>F(()=>import("./nh47jjy84g9yfx3d.js"),__vite__mapDeps([21,1,12,13,14,15,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65])).then(s=>s.CanvasFocusedViewManager));var Do=(s=>(s.TestGizmoAction="test_gizmo_action",s))(Do||{});const ei=new Bt;function si({conversation:s,gizmoHasCustomActions:e,preferredModelId:n}){const{modelLabel:o,dropdownSections:i}=wn(s,e,n),r=t.jsxs(In,{children:[t.jsx(g,{id:"IhcP1l",defaultMessage:"Model"}),t.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o}),t.jsx(Yo,{className:"icon-sm text-token-text-tertiary"})]});return t.jsx(Je,{size:"small",alignOffset:-4,triggerButton:r,children:t.jsx(Tn,{sections:i})})}function ti({gizmoEditorData:s,isSavingDraft:e,showTitle:n=!0}){var y,_,p;const o=Z(),[i,r]=h.useState(()=>Te(o,{urlGizmoId:s.id}));$s(i.id,{kind:le.GizmoTest,gizmo_id:s.id}),h.useEffect(()=>{Xe(i.id,M=>{M.mode={kind:le.GizmoTest,gizmo_id:s.id}})},[i.id,s.id]);const a=(y=s.files)==null?void 0:y.map(M=>M.file_id).join();h.useEffect(()=>{qt(i.id)!=null&&r(Te(o,{urlGizmoId:s.id}))},[o,s.id,s.instructions,s.tools,a,i.id]);const d=h.useMemo(()=>({gizmoEditorData:s,mode:"test"}),[s]),l=Fs(o,"1213809372"),c=(_=Ce(o))==null?void 0:_.hasPaidFeatures(),T=l||c,[u,C]=h.useState(0),P=()=>{C(M=>M-360)},m=s.id,w=ni(i);h.useEffect(()=>Vs(ei,{test_gizmo_action:({rootDomain:M,operationName:x})=>{m&&w(m,M,x)}}),[w,m]);const j=h.useCallback(()=>t.jsx("div",{className:"h-full w-full",children:t.jsx(Pn,{gizmo:s,hideOwner:!0,showStarterPrompts:!0})}),[s]);return t.jsx(Ts.Provider,{value:d,children:t.jsx(Is,{conversation:i,children:t.jsx(Gs,{conversation:i,children:t.jsx(Mn,{clientThreadId:i.id,children:t.jsx("div",{className:me("flex h-full w-full",e&&"cursor-wait opacity-80 transition"),children:t.jsxs("div",{className:"flex grow flex-col",children:[t.jsx("div",{className:"relative mb-2 shrink-0",children:t.jsx("div",{className:"flex justify-center py-1",children:n&&t.jsxs("div",{className:"group flex items-center gap-2 text-lg font-semibold",children:[t.jsx("div",{className:"icon"}),t.jsxs("button",{onClick:()=>{P(),r(Te(o,{urlGizmoId:s.id}))},className:"flex items-center gap-2",children:[t.jsx(g,{id:"2u/6Ja",defaultMessage:"Preview"}),t.jsx(Us.div,{className:"text-token-text-primary",animate:{rotate:u},transition:{duration:.3},children:t.jsx(Jo,{className:"icon invisible group-hover:visible"})})]}),T&&t.jsx(si,{conversation:i,gizmoHasCustomActions:!!qs(s.tools),preferredModelId:(p=s.defaultModel)!=null?p:void 0})]})})}),t.jsxs("div",{className:me("relative grow overflow-auto px-2",e&&"pointer-events-none"),children:[t.jsx(Qs,{conversation:i,hideHeader:!0,renderEmptyState:j()}),t.jsx(Zn.Sidebars,{children:t.jsx(Zo,{clientThreadId:i.id,overrideWidth:0,isAutoFocusDisabled:!0})})]})]})})})})})})}const vs=bs.memo(ti);function ni(s){"use forget";const e=he.c(2);let n;return e[0]!==s?(n=(o,i,r)=>{Gn({conversation:s,eventSource:"url",promptMessage:Kt("Call the ".concat(i," API with the ").concat(r," operation"),{jit_plugin_data:{from_client:{type:"test",operation:r,tool_name:Qt(i)}}}),completionMetadata:{conversationMode:{kind:le.GizmoTest,gizmo_id:o}}})},e[0]=s,e[1]=n):n=e[1],n}const oi=V(()=>F(()=>import("./coe6p1lrepx34al8.js"),__vite__mapDeps([66,1,12,13,67,14,15,68,69,11,16,70,71,72,73,74,62,63,75,56,57,76,55,77,60,61,78,79,80,81,82,83])).then(s=>s.GizmoActionsEditor));var et=(s=>(s.MAGIC_MAKER="magic",s.ADVANCED="advanced",s.PREVIEW="preview",s))(et||{});function Ue({value:s,label:e,testId:n}){return t.jsx(An,{value:s,className:"text-md border-token-border-default text-token-text-tertiary hover:text-token-text-primary radix-state-checked:border radix-state-checked:bg-token-main-surface-primary radix-state-checked:text-token-text-primary radix-state-checked:shadow-[0_0_2px_rgba(0,0,0,.03)] w-1/3 grow rounded-lg p-1.5 font-semibold transition md:w-1/2","data-testid":n,children:e})}function ii({className:s,editorTab:e,setEditorTab:n}){const o=oe();return t.jsxs(Sn,{className:me("bg-token-main-surface-secondary flex w-full overflow-hidden rounded-xl p-1.5 md:w-1/2",s),value:e,onValueChange:i=>{n(i)},children:[t.jsx(Ue,{value:"magic",label:o.formatMessage(Ee.magicMakerLabel)}),t.jsx(Ue,{value:"advanced",label:o.formatMessage(Ee.configureLabel),testId:"gizmo-editor-configure-button"}),t.jsx("div",{className:"flex w-1/3 md:hidden",children:t.jsx(Ue,{value:"preview",label:o.formatMessage(Ee.previewLabel)})})]})}function ri(s,e){return s.length!==e.length?!1:s.every(n=>e.some(o=>o.type===n.type))}function ai(s,e){var n,o,i,r;return s.name===e.gizmo.display.name&&s.description===e.gizmo.display.description&&s.instructions===e.gizmo.instructions&&ri(s.tools,e.tools)&&Be((o=(n=s.files)==null?void 0:n.map(a=>a.file_id))!=null?o:[],(r=(i=e.files)==null?void 0:i.map(a=>a.file_id))!=null?r:[])&&s.profilePictureUrl==e.gizmo.display.profile_picture_url&&s.profilePictureId==e.gizmo.display.profile_pic_id}const st=({gizmo:s,onNewGizmoId:e})=>{var ss;const n=at(),o=en(),i=Bs(Ie.BrowsingAvailable),r=(o==null?void 0:o.includes(Ie.GizmoCanvasToggle))&&(o==null?void 0:o.includes(Ie.Canvas)),a=Z(),d=Fs(a,"4148168517"),l=oe(),c=je(),T=()=>{const b=[];i&&b.push({type:Y.BROWSER}),r&&b.push({type:Y.CANVAS});const L=N(v({},hs),{tools:[...hs.tools,...b]});return d?N(v({},L),{tools:[...L.tools.filter(U=>U.type!==Y.DALLE),{type:Y.IMAGE_GEN}]}):L},u=h.useRef(s!=null?gs(s):T()),C=h.useRef(s),P=h.useRef(u.current),[m,w]=h.useState(()=>u.current),[j]=h.useState(()=>Te(a)),[y]=h.useState(()=>({context_message:no(u.current),model_slug:Fe.GPT_4o,enabled_tools:[{tool_id:s!=null?"gizmo_editor":"gizmo_creator"}]}));uo(j.id,P.current,y);const _=Ge(()=>Es(a,{isGizmo:!0})),p=(ss=_.models.get(Cs))!=null?ss:_&&Ks(_.models.values(),b=>b.tags.includes(Fe.GPT_4o)),{data:M}=sn(u.current.id),x=tn(),{isPending:z,error:I}=x,G=nn(),k=h.useMemo(()=>M!=null&&!ai(m,M),[m,M]),O=async()=>{var L;const b=u.current;try{const U=await x.mutateAsync({editorData:b,gizmoId:b.id});if(C.current=U,u.current.id==null){const K=U.gizmo.id;u.current=N(v({},u.current),{id:K,sharingTargets:U.gizmo.sharing_targets}),w(u.current),e==null||e(K)}for(const K of U.tools.filter(Q=>Q.type===Y.JIT_PLUGIN)){const Q=u.current.tools.find(fe=>fe.type===Y.JIT_PLUGIN&&fe.metadata.domain===K.metadata.domain);Q&&Q.metadata.action_id!==K.metadata.action_id&&(Q.metadata=N(v({},Q.metadata),{action_id:K.metadata.action_id}),w(u.current))}return U}catch(U){const K=(L=Os(U))!=null?L:l.formatMessage(Ds.errorSavingDraft);throw c.warning(K,{duration:2}),U}},S=h.useRef(void 0),B=async()=>u.current.id!=null?u.current.id:(S.current==null&&(S.current=O().then(b=>b.gizmo.id).catch(b=>{throw S.current=void 0,b})),S.current),[A]=h.useState(()=>on(()=>O(),2e3,{trailing:!0})),R=h.useCallback((b,L=!0)=>{const U=typeof b=="function"?b(u.current):kn(u.current,b);Be(U,u.current)||(u.current=U,w(u.current),L&&A())},[A]),H=h.useRef(void 0);h.useEffect(()=>Vs(rn,{completionFinished:async b=>{const L=b.serverThreadId;if(L==null){be(!1);return}try{const U=await to(u.current,L,c,H.current);U!=null&&(R(U),P.current=ws(u.current))}catch(U){Oe.addError(U),c.warning("Something went wrong generating your GPT",{duration:3})}finally{H.current=ue.getCurrentNode(ve(L)).message.id,be(!1)}}}),[c,R]);const J=ao(j.id,y),[f,E]=h.useState(void 0);h.useEffect(()=>{E($n(s))},[s==null?void 0:s.gizmo.id]);const ne=async(b,L)=>{var fe,ts;const U=De(u.current,b.recipient,L);if(U.length>0){c.warning("Could not save GPT:\n\n".concat(U.map(ie=>"- ".concat($e(ie))).join("\n")),{duration:3});return}const K=await O(),Q=K.gizmo.id;try{return Ls.logEvent("Promote Gizmo",{gizmo_id:K.gizmo.id,sharing_recipient:b.recipient,editor_tab:q}),await G.mutateAsync({gizmoId:K.gizmo.id,data:{sharingSubjects:b.subjects,sharingRecipient:b.recipient,categories:L==null?void 0:[L]}},{onSuccess(Se){n.setQueryData(cs(n,Q).queryKey,Se),n.invalidateQueries({queryKey:["gizmos"]}),n.invalidateQueries({queryKey:["gizmo",{gizmoId:Q}]}),n.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:Q}]})}})}catch(ie){if(ie instanceof ln)E({gizmoId:Q,sharingRecipient:b.recipient,moderationType:Hn.PublishBlocked,sharingTargets:(fe=ie.response)==null?void 0:fe.sharing_targets,showModal:Me.AppealAvailable});else{Oe.addError(ie);const Se=(ts=ie.detail)!=null?ts:"An unknown error occurred";c.warning("Error saving GPT - "+Se,{duration:6})}}},[q,ce]=h.useState(()=>{const b=as.getItem(ls.GizmoEditorTab);return Object.values(et).includes(b)?b:"magic"});h.useEffect(()=>an(()=>{const b=Nn(a).width;b!=null&&b>=768&&q==="preview"&&ce("magic")}),[a,q]);const[_e,ke]=h.useState(!1),[ye,be]=h.useState(!1),[es,Ne]=h.useState(void 0);return t.jsxs("div",{className:"flex h-screen w-full flex-col items-center",children:[t.jsx(So,{gizmoEditorData:m,isUpsertLoading:x.isPending,isPromoteLoading:G.isPending,hasUnpublishedChanges:k,isUploadingProfilePic:_e,isGeneratingProfilePic:ye,publishedGizmo:M,updateGizmo:R,promoteGizmo:async(b,L)=>{const U=await ne(b,L);return u.current=N(v({},u.current),{sharingRecipient:b.recipient}),w(u.current),as.setItem(ls.GizmoEditorTab,q),U},appealGizmo:async(b,L)=>{f!=null&&E(N(v({},f),{sharingRecipient:b,categories:L==null?void 0:[L],showModal:Me.AppealAvailable}))},setAppealState:E,revertDraft:M!=null&&k?()=>{const b=n.getQueryData(cs(n,u.current.id).queryKey);if(b!=null){const L=gs(b);u.current=L,w(L),O()}}:void 0,draftMessage:t.jsx(Xo,{isPublished:M!=null&&(M.gizmo.share_recipient==="marketplace"||M.gizmo.share_recipient==="workspace"),hasUnpublishedChanges:k,isSavingDraft:z,upsertDraftError:I,className:"text-sm"}),showActionsModal:b=>{Ne(b)},className:"shrink-0"}),f&&t.jsx(Wn,{appealState:f,onAppealClose:()=>E(N(v({},f),{showModal:Me.None})),onAppealSubmitted:()=>E(N(v({},f),{showModal:Me.AppealSent}))}),t.jsxs("div",{className:"relative flex w-full grow overflow-hidden",children:[t.jsx("div",{className:"flex w-full justify-center md:w-1/2",children:t.jsx("div",{className:"h-full grow overflow-hidden",children:es!==void 0?t.jsx(oi,{currentlyEditingActionDomain:es,gizmoEditorData:m,updateGizmo:R,onClose:()=>{Ne(void 0)}}):t.jsxs("div",{className:"flex h-full flex-col px-2 pt-2",children:[t.jsx("div",{className:"flex w-full flex-row justify-center",children:t.jsx(ii,{editorTab:q,setEditorTab:ce,className:"mb-2 shrink-0 self-center"})}),t.jsx("div",{className:"grow overflow-hidden",children:q==="magic"?t.jsx("div",{className:"h-full w-full",children:t.jsx(fo,{gizmoEditorData:m,updateGizmo:R,clientThreadId:j.id,gizmoEditorDataRef:u,magicMakerBehaviorOverrides:y,magicMakerConversationGizmoEditorDataRef:P,requireGizmoId:B},j.id)}):q==="advanced"?t.jsx(Bo,{gizmoEditorData:m,updateGizmo:R,currentModelConfig:p,generateProfilePic:b=>{be(!0),J(b,u,P,lo)},setIsUploadingProfilePic:ke,isGeneratingProfilePic:ye,setIsGeneratingProfilePic:be,requireGizmoId:B,onShowActionsEditor:b=>{Ne(b)}}):t.jsx(vs,{gizmoEditorData:m,isSavingDraft:z,showTitle:!1})})]})})}),t.jsx("div",{className:me("border-token-border-medium bg-token-main-surface-secondary hidden w-1/2 justify-center border-s pt-4",q!=="preview"&&"md:flex"),children:t.jsx("div",{className:"grow",children:t.jsx(vs,{gizmoEditorData:m,isSavingDraft:z})})})]})]})};function li({gizmoId:s,version:e}){const{data:n}=Yt({gizmoId:s,draft:!0,version:e}),o=Ns(Jt.accountUserId),i=Zt(),r=i==null?void 0:i.id,a=Dt(n)&&n!=null&&o!=null&&r!=null;return n==null||!a?null:t.jsx(st,{gizmo:n})}function ci({onNewGizmoId:s}){return t.jsx(st,{onNewGizmoId:s})}const di=({gizmoId:s,remixSourceId:e,version:n})=>{const o=ge(),i=Z(),r=Ce(i),a=h.useRef(void 0);h.useEffect(()=>(ps.enterGizmoEditor(),()=>{ps.exitGizmoEditor()}),[]);let d=s;return s!=null&&a.current===s&&(d=void 0),Cn({newChatAction:l=>{Rn(i,l,{location:"Keyboard command"}),l.defaultPrevented||Ln(o)}}),r?d!==void 0?t.jsx(li,{gizmoId:d,version:n},d):t.jsx(ci,{remixSourceId:e,onNewGizmoId:l=>{a.current=l,window.history.replaceState(window.history.state,"",Xt(l))}}):t.jsx("div",{className:"flex min-h-screen items-center justify-center",children:t.jsx(Ze,{})})},Ee=xe({magicMakerLabel:{id:"gizmo.magicMakerLabel",defaultMessage:"Create"},configureLabel:{id:"gizmo.advancedLabel",defaultMessage:"Configure"},previewLabel:{id:"gizmo.previewLabel",defaultMessage:"Preview"}});function ui(s){const e=ge();h.useEffect(()=>{s||e(cn(dn.NO_ACCESS))},[s,e])}const Ii=()=>(zn(),null),Gi=lt(function(){const e=Z(),n=Ce(e),o=!!(n!=null&&n.hasPlusFeatures());ui(n==null||o);const i=ct(),[r]=dt(),a=ge(),d=i.slug,l=r.get("version"),c=d?un(d):void 0,T=r.get("remixFrom");return h.useEffect(()=>{Un(!0).then(u=>{En.initializeAndGatherData(u),On.initializeAndGatherData(u)})},[]),h.useEffect(()=>{n!=null&&!o&&a("/")},[n,a,o]),h.useEffect(()=>{c&&ds(c)&&a("/g/".concat(d,"/project"))},[c,a,d]),!o||c&&ds(c)?null:t.jsx(mn,{children:t.jsx(di,{gizmoId:c,remixSourceId:T!=null?T:void 0,version:l!=null?Number(l):void 0})})});export{ei as G,Do as a,Ii as c,Gi as g};
//# sourceMappingURL=imd2225co6lyx1hh.js.map

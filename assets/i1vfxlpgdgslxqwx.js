import{r as w,j as l,h as M}from"./i8clt0mfz495j7ii.js";import{hQ as p,oN as T,ff as I,iA as C,bO as _,bQ as g,J as y,mO as k,M as x,C as V}from"./ghewn7l2ynbm32fm.js";import{aR as h,cX as m,cT as A,aZ as S}from"./j0yo6uv6652vva62.js";import{D as v}from"./efcqr1k3spvze0uw.js";import{u as N,g as f}from"./h8pr5f6a9kp0y6hm.js";import{M as b}from"./mzyl3pd4zxnxoe9i.js";function O(n){const{button:r,conversationId:t,onClick:s}=n,a=I(t),{startVoiceMode:d}=N(),o=M(),e=C(),u=w.useCallback(async()=>{switch(r.action){case"new_chat":{const i=f({serverThreadId:void 0,isAdvancedMode:!0,eventSource:"modal_".concat(r.action),parentMessageId:void 0,clientThreadId:k(),gizmoId:void 0,skipCacheReason:"modal-new-chat-button"});if(e)try{await m({type:"STOP",reason:v.UserNavigatedAway});const c=g(t);c!=null&&c.disableConversationNavigation||A(o,{replace:!0}),await m({type:"START",args:i,oldConversationId:a!=null?a:t})}catch(c){y.addError(c,{message:"New chat button in IUX failed"})}else S("/"),d(i);break}case"switch_to_standard":if(a){const i=f({serverThreadId:a,isAdvancedMode:!1,eventSource:"modal_".concat(r.action),parentMessageId:void 0,clientThreadId:a,gizmoId:_.getGizmoId(g(t)),skipCacheReason:"modal-switch-to-standard-button"});if(e)try{await m({type:"STOP",reason:v.UserSwitchedToStandard}),await m({type:"START",args:i})}catch(c){y.addError(c,{message:"Switch to standard button in IUX failed"})}else d(i)}break;case"upgrade_to_plus":h(o,"Voice Mode Upgrade To Plus Modal");break;case"upgrade_to_pro":h(o,"Voice Mode Upgrade To Pro Modal");break}s==null||s()},[r.action,t,e,o,s,a,d]);return l.jsx(x.Button,{onClick:u,title:r.title,color:n.color})}const R={primary:"primary",secondary:"secondary",tertiary:"ghost"};function j({buttons:n,conversationId:r,onClick:t}){let s,a,d;const o=w.useCallback(e=>()=>{e==="upgrade_to_plus"?p.upsell.upgradeToPlus():e==="upgrade_to_pro"&&p.upsell.upgradeToPro(),t()},[t]);return!n||n.length===0?{primary:void 0,secondary:void 0,tertiary:void 0}:(n.forEach(e=>{if(!T.includes(e.action))return;const i=l.jsx(O,{button:e,conversationId:r,onClick:o(e.action),color:R[e.style]});switch(e.style){case"primary":s=i;break;case"secondary":a=i;break;case"tertiary":d=i;break}}),{primary:s,secondary:a,tertiary:d})}function z({conversationId:n,isOpen:r,onClose:t,buttons:s,title:a,description_markdown:d}){const o=j({buttons:s,conversationId:n,onClick:t}),e=l.jsx(b,{className:"markdown text-token-text-secondary mb-6",urlTransform:u=>u,children:d});return l.jsx(V,{testId:"modal-voice-rate-limit",title:a,isOpen:r,onClose:t,size:"custom",className:"max-w-[550px]",type:"warning",showCloseButton:!0,children:l.jsxs("div",{className:"w-full",children:[e,l.jsxs("div",{className:"flex flex-row justify-end gap-6",children:[o.primary,o.secondary,o.tertiary]})]})})}export{z as V,j as u};
//# sourceMappingURL=i1vfxlpgdgslxqwx.js.map

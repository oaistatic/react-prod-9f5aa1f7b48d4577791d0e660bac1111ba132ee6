const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ceivmd4pm4umbvdn.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css","assets/gsas8pb1acnf7jnd.js","assets/opdg2x67e4phtvxr.js","assets/hj7440dgahtucv4l.js","assets/ooz2slmm8agf6bjp.js","assets/c6h0g1484smitaoc.js","assets/nju52ppu7cxhyzrm.js","assets/o9hljbbpo7aqoo2o.js","assets/eqmr3ssx7mhy67lm.js","assets/od3rnm4927scb9m9.js","assets/eyatw3wgc1bbpoog.js"])))=>i.map(i=>d[i]);
var Ee=Object.defineProperty,De=Object.defineProperties;var Le=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var Te=(s,t,a)=>t in s?Ee(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(s,t)=>{for(var a in t||(t={}))Fe.call(t,a)&&Te(s,a,t[a]);if(fe)for(var a of fe(t))We.call(t,a)&&Te(s,a,t[a]);return s},J=(s,t)=>De(s,Le(t));import{_ as k,r as g,e as U,j as e,M as i,f as ee,u as $,o as Ue,h as ze,a as le,A as Be}from"./i8clt0mfz495j7ii.js";import{o as P,L as S,$ as G,d as de,C as Pe,q as Se,R as K,n as D,qM as j,G as b,hj as je,e4 as O,aW as qe,aV as He,b0 as ve,u as Ve,kg as Ke,aM as Ye,ei as Qe,pf as Je,eS as ye,bE as $e,e as ce,B as Ze,fh as Xe,qD as es,qN as X,fe as ie,qK as ss,T as Me}from"./ghewn7l2ynbm32fm.js";import{o as be,V as ts,m as oe,b9 as as,bk as is,iH as ns,hZ as rs,mM as os,mN as ls,b5 as ds,b6 as cs,b7 as us,x as _,mO as ps}from"./j0yo6uv6652vva62.js";import{a as ms,c as gs}from"./k11vc5v60fqtwe47.js";import{T as m}from"./zm1ki9l766pgg0bx.js";import{a as xs}from"./g7azkxfkm9n8omkv.js";import{b as ne}from"./jduj14fc8ad91v8d.js";import{A as hs}from"./ym4yghdv64dnejbs.js";import{u as fs,a as Ts}from"./3vr3npo27kg7k1gc.js";import"./fb2095ktsebx1zzy.js";import"./eyao241335injypy.js";import"./ktw3b87sujui39wx.js";import"./nrrhfi0a0bbsg9w2.js";import"./hht3m8p9e0s4tqnx.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";import"./fvjpw0lui4wq7vv3.js";import"./mpzbsmypy64alaao.js";import"./olrcssu7duieo6m7.js";import"./n3bxkos2zhscnn5x.js";import"./j9agwrrvvs1s434x.js";import"./fqlsa8d4vdlgozqd.js";import"./mnpqan18b42bsh1o.js";const js=P(()=>k(()=>import("./ceivmd4pm4umbvdn.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>S(s)}),ys=P(()=>k(()=>import("./j0yo6uv6652vva62.js").then(s=>s.yq),__vite__mapDeps([2,1,3,4,5])),{loading:s=>S(s)});function ws({value:s,title:t,valueClassName:a,onChange:r,emptyMessage:d}){const[c,u]=g.useState(!1),[h,T]=g.useState(""),y=U(),f=g.useRef(null),x=()=>{if(h!==""){const p=h.trim();r([...s,p]),u(!1),T("")}};return e.jsxs(m.Root,{className:"w-auto",children:[e.jsxs(m.Header,{children:[e.jsx(m.HeaderCell,{children:t}),e.jsx(m.HeaderCell,{})]}),e.jsxs(m.Body,{children:[s.map((p,v)=>e.jsxs(m.Row,{children:[e.jsx(m.Cell,{className:a,children:p}),e.jsx(m.Cell,{textAlign:"right",children:e.jsx(G,{type:"button",onClick:()=>{r(s.filter((M,A)=>A!==v))},children:e.jsx(js,{className:"icon-sm"})})})]},v)),d&&s.length===0?e.jsx(m.Row,{children:e.jsx(m.Cell,{colSpan:2,className:"text-center text-sm italic",children:d})}):null,e.jsxs(m.Row,{children:[e.jsxs("div",{className:de("mt-2 flex flex-row gap-2 p-1",!c&&"hidden"),children:[e.jsx(be,{ariaLabel:y.formatMessage({id:"CgP6Du",defaultMessage:"Add new domain"}),className:"w-80",name:"newDomain",value:h,onChange:p=>{T(p.target.value)},ref:f,onPressEnter:x,placeholder:"example.com"}),e.jsx(G,{className:"grow-0",onClick:x,children:e.jsx(i,{id:"svRVol",defaultMessage:"Add"})})]}),!c&&e.jsxs(G,{type:"button",onClick:()=>{u(!0),setTimeout(()=>{var p;(p=f.current)==null||p.focus()},0)},className:"mt-2",children:[e.jsx(ys,{className:"icon-sm inline-block"}),e.jsx(i,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}const _s=P(()=>k(()=>import("./gsas8pb1acnf7jnd.js").then(s=>s._),__vite__mapDeps([6,1])),{loading:s=>S(s)});function ks(){return e.jsx(_s,{className:"icon-sm text-token-text-tertiary ms-1"})}function Ps({isOpen:s,onClose:t,account:a,gpt:r}){const d=U(),[c,u]=g.useState(!1),[h,T]=g.useState(""),[y,f]=g.useState(!0),x=r.gizmo.is_unassigned;return e.jsxs(Pe,{testId:"modal-change-owner",size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:d.formatMessage(x?W.assignModalTitle:W.changeModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(i,J(n({},W.changeModalPrompt),{values:{gptName:r.gizmo.display.name}}))}),!y&&e.jsx("p",{className:"text-red-500",children:e.jsx(i,n({},W.invalidEmail))}),e.jsx(be,{ariaLabel:d.formatMessage({id:"x4A5l2",defaultMessage:"Email"}),className:de("px-3 py-2",y?"":"border-red-500"),name:"email",type:"email",value:h,placeholder:"Email",onChange:p=>{T(p.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(G,{color:"secondary",onClick:()=>{t(!1),u(!1),f(!0)},loading:c,children:e.jsx(i,n({},W.cancelButtonText))}),e.jsx(G,{color:"primary",loading:c,onClick:()=>{u(!0),f(!0),h==""||!ts.test(h)?(f(!1),u(!1)):K.safePost("/accounts/{account_id}/gpts/{gizmo_id}/owner",{parameters:{path:{account_id:a.id,gizmo_id:r.gizmo.id}},requestBody:{email:h}}).then(()=>{t(!0),u(!1),f(!0)},()=>{f(!1),u(!1)})},children:e.jsx(i,n({},x?W.assignButtonText:W.changeOwnerButtonText))})]})]})}const W=ee({changeModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},assignModalTitle:{id:"changeOwnerModal.assignModalTitle",defaultMessage:"Assign Owner"},changeModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},changeOwnerButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},assignButtonText:{id:"changeOwnerModal.assignButtonText",defaultMessage:"Assign"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function Ss({isOpen:s,onClose:t,account:a,gpt:r}){const d=U(),[c,u]=g.useState(!1);return e.jsxs(Pe,{testId:"modal-delete-gpt",size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:d.formatMessage(Z.deleteModalTitle),children:[e.jsx("p",{className:"text-token-text-primary mb-4",children:e.jsx(i,J(n({},Z.deleteModalPrompt),{values:{gptName:r.gizmo.display.name}}))}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(G,{color:"secondary",onClick:()=>{t(!1)},loading:c,children:e.jsx(i,n({},Z.cancelButtonText))}),e.jsx(G,{color:"danger",loading:c,onClick:()=>{u(!0),K.safeDelete("/accounts/{account_id}/gpts/{gizmo_id}",{parameters:{path:{account_id:a.id,gizmo_id:r.gizmo.id}}}).finally(()=>{t(!0),u(!1)})},children:e.jsx(i,n({},Z.deleteButtonText))})]})]})}const Z=ee({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),vs=P(()=>k(()=>import("./opdg2x67e4phtvxr.js").then(s=>s._),__vite__mapDeps([7,1])),{loading:s=>S(s)}),we=P(()=>k(()=>import("./ceivmd4pm4umbvdn.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>S(s)}),Ms=P(()=>k(()=>import("./j0yo6uv6652vva62.js").then(s=>s.yo),__vite__mapDeps([2,1,3,4,5])),{loading:s=>S(s)}),_e=P(()=>k(()=>import("./j0yo6uv6652vva62.js").then(s=>s.yq),__vite__mapDeps([2,1,3,4,5])),{loading:s=>S(s)}),bs=P(()=>k(()=>import("./hj7440dgahtucv4l.js").then(s=>s._),__vite__mapDeps([8,1])),{loading:s=>S(s)}),Ns=P(()=>k(()=>import("./ooz2slmm8agf6bjp.js").then(s=>s._),__vite__mapDeps([9,1])),{loading:s=>S(s)}),Cs=P(()=>k(()=>import("./c6h0g1484smitaoc.js").then(s=>s._),__vite__mapDeps([10,1])),{loading:s=>S(s)}),Os=P(()=>k(()=>import("./nju52ppu7cxhyzrm.js").then(s=>s._),__vite__mapDeps([11,1])),{loading:s=>S(s)}),As=P(()=>k(()=>import("./o9hljbbpo7aqoo2o.js").then(s=>s._),__vite__mapDeps([12,1])),{loading:s=>S(s)}),ke=P(()=>k(()=>import("./ghewn7l2ynbm32fm.js").then(s=>s.vJ),__vite__mapDeps([3,1,4])),{loading:s=>S(s)}),Rs=P(()=>k(()=>import("./eqmr3ssx7mhy67lm.js").then(s=>s._),__vite__mapDeps([13,1])),{loading:s=>S(s)}),Gs=P(()=>k(()=>import("./od3rnm4927scb9m9.js").then(s=>s._),__vite__mapDeps([14,1])),{loading:s=>S(s)}),Is=P(()=>k(()=>import("./eyatw3wgc1bbpoog.js"),__vite__mapDeps([15,1,3,4]))),Es=10;function Ds({account:s,gpt:t,thirdParty:a}){var z,Y,B,Q,q;const r=$(),d=Ve(),[c,u]=g.useState(!1),[h,T]=g.useState(!1),[y,f]=g.useState(!1),[x,p]=g.useState(!1),v=ze(),M=new Date(a?(z=t.gizmo.workspace_approval_date)!=null?z:"":t.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),A=new Date(t.gizmo.updated_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),I=g.useMemo(()=>{const N=t.tools.filter(L=>L.type===D.JIT_PLUGIN).map(L=>L.type===D.JIT_PLUGIN?L.metadata.domain:"");return N.length===1?N[0]:N.length>1?"".concat(N.length," domains"):""},[t.tools]),R=t.gizmo.is_unassigned;return e.jsxs(e.Fragment,{children:[e.jsxs(m.Row,{className:"relative",children:[e.jsx(m.Cell,{className:"max-w-[320px] min-w-[240px] py-2 pe-2 align-middle! whitespace-break-spaces",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 shrink-0",children:e.jsx(is,{src:t.gizmo.display.profile_picture_url,isFirstParty:(B=(Y=t.gizmo.tags)==null?void 0:Y.includes(Ke.FirstParty))!=null?B:!1,alt:t.gizmo.display.name,className:"h-10 w-10"})}),e.jsx(Ye,{className:"ms-4",onClick:()=>v(Qe(d,t)),children:e.jsx("div",{className:"text-token-text-primary text-sm font-semibold",children:t.gizmo.display.name})})]})}),e.jsx(m.Cell,{className:"text-token-text-secondary w-full max-w-[160px] min-w-[100px] p-2 align-middle! text-sm",children:R?e.jsx("div",{className:"bg-token-bg-tertiary rounded-lg px-2 py-1",children:e.jsx(i,n({},l.unassigned))}):e.jsx("span",{className:"block overflow-hidden text-ellipsis whitespace-nowrap",children:t.gizmo.author.display_name})}),e.jsx(m.Cell,{wrap:!0,className:"text-token-text-secondary max-w-[240px] min-w-[160px] p-2 align-middle! text-sm",children:I===""?"â€”":I}),!a&&e.jsx(m.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:e.jsx(Us,{gizmo:t,account:s})}),!a&&e.jsx(m.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:(q=(Q=t.gizmo.vanity_metrics)==null?void 0:Q.num_conversations_str)!=null?q:0}),e.jsx(m.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:M}),e.jsx(m.Cell,{className:"text-token-text-secondary p-2 align-middle! text-sm whitespace-nowrap",children:A}),e.jsx(m.Cell,{className:"border-token-border-heavy bg-token-bg-primary sticky end-0 border-s-[0.5px] p-1 align-middle!",textAlign:"center",children:e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{children:e.jsx(Os,{className:"icon-sm"})}),e.jsx(O.Portal,{children:a?e.jsx(O.Content,{children:e.jsx(O.Item,{onClick:()=>{p(!0)},color:"danger",icon:we,children:e.jsx(i,n({},l.removeFromWorkspace))})}):e.jsxs(O.Content,{children:[e.jsx(O.Item,{onClick:()=>{u(t)},icon:bs,children:e.jsx(i,n({},l.changeAccess))}),e.jsx(O.Item,{onClick:()=>{f(!0)},icon:R?vs:Ns,children:e.jsx(i,n({},R?l.assignOwner:l.changeOwner))}),e.jsx(O.Item,{onClick:()=>{T(!0)},icon:we,color:"danger",children:e.jsx(i,n({},l.deleteGPT))})]})})]})})]}),c&&e.jsx(xs,{publishedGizmo:c,gizmo:ns(c),onClose:()=>u(!1),appealGizmo:()=>v(Je(c.gizmo.id)),shareOnly:!0,workspaceOwner:!0}),e.jsx(Ps,{isOpen:y,gpt:t,account:s,onClose:N=>{f(!1),N&&r.invalidateQueries({queryKey:["workspace",s.id,j.WORKSPACE]})}}),e.jsx(Ss,{isOpen:h,gpt:t,account:s,onClose:N=>{T(!1),N&&r.invalidateQueries({queryKey:["workspace",s.id,j.WORKSPACE]})}}),e.jsx(Is,{isOpen:x,gpt:t,account:s,onClose:N=>{p(!1),N&&r.invalidateQueries({queryKey:["workspace",s.id,j.THIRD_PARTY]})}})]})}const Ls=[D.BROWSER,D.PYTHON,D.JIT_PLUGIN,D.RETRIEVAL,D.DALLE,D.IMAGE_GEN,D.CANVAS],Fs=({account:s,showThirdParty:t})=>{var he;const[a,r]=g.useState(j.WORKSPACE),d=U(),[c,u]=g.useState(!1),h=g.useRef(null),[T,y]=g.useState(""),[f,x]=g.useState(!1),[p,v]=g.useState(T),M=g.useRef(null),A=g.useCallback(o=>{if(y(o),M.current&&(clearTimeout(M.current),M.current=null),o===""){v(""),E(1);return}M.current=window.setTimeout(()=>{v(o),E(1),M.current=null},500)},[]),[I,R]=g.useState("updated_at"),[z,Y]=g.useState("desc"),B=z==="asc"?Rs:Gs,Q=[{value:"private",label:d.formatMessage(l.shareRecipientTitlePrivate),share_recipients:[b.Private,b.User,b.Group]},{value:"link",label:d.formatMessage(l.shareRecipientTitleLink),share_recipients:[b.Link]},{value:"workspace",label:(he=s.data.name)!=null?he:"",share_recipients:[b.Workspace,b.WorkspaceLink]},{value:"marketplace",label:d.formatMessage(l.shareRecipientTitlePublic),share_recipients:[b.Marketplace]}],[q,N]=g.useState([]),[L,ue]=g.useState([]),[H,E]=g.useState(1),Ne=$();g.useEffect(()=>{f&&h.current&&h.current.focus()},[f]);const se=o=>{r(o),E(1)},Ce=(o,C)=>{N(F=>C?[...F,o]:F.filter(ae=>ae!==o)),E(1)},Oe=(o,C)=>{ue(F=>C?[...F,o]:F.filter(ae=>ae!==o)),E(1)},Ae=()=>{N([]),ue([]),E(1)},{data:V,fetchNextPage:Re,hasNextPage:pe,isFetchingNextPage:me,isLoading:Ge}=Ws(s.id,a,{search:p,toolTypes:q,shareRecipients:Q.flatMap(o=>L.includes(o.value)?o.share_recipients:[]),orderBy:I,orderDir:z}),Ie=Ge,ge=q.length+L.length;function te(o){R(C=>C===o?(Y(F=>F==="asc"?"desc":"asc"),o):(Y("asc"),o)),E(1)}const xe=g.useMemo(()=>{if(!V)return[];const o=V.pages[H-1];return o?o.items:[]},[V,H]);return e.jsxs("div",{children:[e.jsxs("div",{className:"border-token-border-default flex justify-between border-b",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx(ne,{isActive:a===j.WORKSPACE,onClick:()=>se(j.WORKSPACE),children:e.jsx(i,n({},l.workspaceTab))}),t&&e.jsx(ne,{isActive:a===j.THIRD_PARTY,onClick:()=>se(j.THIRD_PARTY),children:e.jsx(i,n({},l.thirdPartyTab))}),e.jsx(ne,{isActive:a===j.UNASSIGNED,onClick:()=>se(j.UNASSIGNED),children:e.jsx(i,n({},l.unassigned))})]}),e.jsxs("div",{className:"flex items-center pb-2",children:[ge>0&&e.jsxs(je,{className:"flex items-center space-x-1",onClick:Ae,children:[e.jsx("span",{className:"font-medium",children:e.jsx(i,{id:"2HkRen",defaultMessage:"{filterCount, plural, one {# filter} other {# filters}} applied",values:{filterCount:ge}})}),e.jsx(ke,{className:"icon"})]}),e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{children:e.jsx(Cs,{className:"icon"})}),e.jsx(O.Portal,{children:e.jsx(O.Content,{className:"rounded-lg px-2 text-sm",children:e.jsxs("div",{className:"text-token-text-primary w-64 space-y-2 p-2 font-normal",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,n({},l.capabilitiesTitle))}),Ls.map(o=>e.jsx(oe,{id:o,checked:q.includes(o),label:as(s,o),onChange:C=>Ce(o,C.target.checked)},o))]}),e.jsxs("div",{className:"mt-4 flex-col space-y-2 border-t pt-4",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,n({},l.whoHasAccessTitle))}),Q.map(o=>e.jsx(oe,{id:o.value,checked:L.includes(o.value),label:o.label,onChange:C=>Oe(o.value,C.target.checked)},o.value))]})]})})})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(je,{onClick:()=>x(!0),children:e.jsx(Ms,{className:"icon"})}),e.jsx(qe,{children:f&&e.jsx(He.input,{type:"text",ref:h,placeholder:d.formatMessage(l.filterByNameOrBuilderPlaceholder),className:"bg-token-bg-primary border-none px-0 focus:ring-0",initial:{width:0,opacity:0},animate:{width:"192px",opacity:1},exit:{width:0,opacity:0,visibility:"hidden"},value:T,onChange:o=>A(o.target.value)})}),f&&e.jsx("div",{className:"cursor-pointer",onClick:()=>{x(!1),A("")},children:e.jsx(ke,{className:"icon-sm"})})]}),t&&e.jsx(G,{color:"secondary",onClick:()=>u(!0),icon:_e,children:e.jsx(i,n({},l.approveAGPTButton))})]})]}),Ie?e.jsx("div",{className:"mt-8 flex min-h-[320px] items-center justify-center",children:e.jsx(ve,{})}):e.jsxs("div",{className:"mb-8 min-h-[320px]",children:[xe.length>0?e.jsxs(m.Root,{size:"normal",className:"bg-token-bg-primary w-full min-w-full overflow-hidden overflow-x-auto sm:rounded-lg",children:[e.jsxs(m.Header,{children:[e.jsx(m.HeaderCell,{className:"text-token-text-secondary py-2 pe-4 text-start text-xs",children:e.jsx(i,n({},l.nameCellTitle))}),e.jsx(m.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},l.builderCellTitle))}),e.jsx(m.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},l.customActionsCellTitle))}),(a===j.WORKSPACE||a===j.UNASSIGNED)&&e.jsx(m.HeaderCell,{className:"text-token-text-secondary px-2 py-2 text-start text-xs",children:e.jsx(i,n({},l.whoHasAccessTitle))}),(a===j.WORKSPACE||a===j.UNASSIGNED)&&e.jsx(m.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>te("accurate_num_paid_conversations"),children:[e.jsx("span",{children:e.jsx(i,n({},l.chatsCellTitle))}),I==="accurate_num_paid_conversations"&&e.jsx(B,{className:"icon-sm"})]})}),e.jsx(m.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>te("created_at"),children:[e.jsx("span",{children:a===j.WORKSPACE||a===j.UNASSIGNED?e.jsx(i,n({},l.createdCellTitle)):e.jsx(i,n({},l.approvedCellTitle))}),I==="created_at"&&e.jsx(B,{className:"icon-sm"})]})}),e.jsx(m.HeaderCell,{className:"text-token-text-secondary cursor-pointer px-2 py-2 text-start text-xs",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>te("updated_at"),children:[e.jsx("span",{children:e.jsx(i,n({},l.updatedCellTitle))}),I==="updated_at"&&e.jsx(B,{className:"icon-sm"})]})}),e.jsx(m.HeaderCell,{className:"border-token-border-heavy absolute end-0 w-16 border-s-[0.5px]"})]}),e.jsx(m.Body,{children:xe.map(o=>e.jsx(Ds,{account:s,gpt:o,thirdParty:a===j.THIRD_PARTY},o.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx("div",{children:e.jsx(As,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-token-text-secondary",children:a===j.THIRD_PARTY?e.jsx(i,n({},l.noWorkspaceApprovedGPTs)):a===j.UNASSIGNED?e.jsx(i,n({},l.noUnassignedGPTs)):e.jsx(i,n({},l.noWorkspaceGPTs))}),a===j.THIRD_PARTY&&e.jsx(G,{color:"secondary",onClick:()=>u(!0),icon:_e,children:e.jsx(i,n({},l.approveAGPTButton))})]}),V&&e.jsxs("div",{className:"text-token-text-tertiary my-4 flex w-full items-center justify-center gap-6",children:[e.jsx(G,{color:"secondary",disabled:H===1,onClick:()=>E(o=>Math.max(1,o-1)),children:e.jsx(i,{id:"KFhxP7",defaultMessage:"Prev"})}),e.jsx("span",{className:"text-sm",children:e.jsx(i,{id:"WEQoNb",defaultMessage:"Page {page}",values:{page:H}})}),e.jsx(G,{color:"secondary",loading:me,disabled:!pe&&H===V.pages.length,onClick:async()=>{if(H<V.pages.length){E(C=>C+1);return}pe&&!me&&(await Re(),E(C=>C+1))},children:e.jsx(i,{id:"wDyvFZ",defaultMessage:"Next"})})]})]}),e.jsx(hs,{isOpen:c,onClose:()=>{u(!1),Ne.invalidateQueries({queryKey:["workspace",s.id,j.THIRD_PARTY]})},account:s})]})};function Ws(s,t,a){var r,d,c;return Ue({queryKey:["workspace",s,"admin-gizmos",t,(r=a.search)!=null?r:"",((d=a.toolTypes)!=null?d:[]).join(","),((c=a.shareRecipients)!=null?c:[]).join(","),a.orderBy,a.orderDir],queryFn:async({pageParam:u})=>{var f,x,p,v,M,A;const{query_continuation:h}=u!=null?u:{},T=n(n({search:(f=a.search)!=null?f:"",limit:Es,order_by:(x=a.orderBy)!=null?x:"updated_at",order_dir:(p=a.orderDir)!=null?p:"desc",share_recipients:(v=a.shareRecipients)!=null?v:[],is_approved:t===j.THIRD_PARTY,is_unassigned:t===j.UNASSIGNED},a.toolTypes&&a.toolTypes.length>0?{tool_types:a.toolTypes}:{}),h?{query_continuation:h}:{}),y=await K.safeGet("/workspace-resources/{account_id}/admin/gizmos",{parameters:{path:{account_id:s},query:T}});return{total:(M=y.total_count)!=null?M:0,items:y.items,query_continuation:(A=y.query_continuation)!=null?A:null}},initialPageParam:{query_continuation:""},getNextPageParam:u=>u.query_continuation?{query_continuation:u.query_continuation}:void 0})}function Us({gizmo:s,account:t}){const a=U(),r={[b.Private]:a.formatMessage(l.shareRecipientTitlePrivate),[b.User]:a.formatMessage(l.shareRecipientTitlePrivate),[b.Group]:a.formatMessage(l.shareRecipientTitlePrivate),[b.Link]:a.formatMessage(l.shareRecipientTitleLink),[b.Marketplace]:a.formatMessage(l.shareRecipientTitlePublic),[b.Workspace]:t.data.name,[b.WorkspaceLink]:t.data.name};if(["private","user","group"].includes(s.gizmo.sharing.recipient)){const{users:d,groups:c}=zs(s);return d===0&&c===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(i,n({},l.shareRecipientTitlePrivate))}):d>0&&c>0?e.jsxs("span",{className:"text-token-text-secondary",children:[r[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:a.formatMessage(l.userCount,{numUsers:d}),groups:a.formatMessage(l.groupCount,{numGroups:c})}})]}):d>0?e.jsxs("span",{className:"text-token-text-secondary",children:[r[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,J(n({},l.userCount),{values:{numUsers:d}}))]}):e.jsxs("span",{className:"text-token-text-secondary",children:[r[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,J(n({},l.groupCount),{values:{numGroups:c}}))]})}return e.jsx("span",{children:r[s.gizmo.share_recipient]})}function zs(s){if(s.gizmo.sharing.subjects){const t=s.gizmo.sharing.subjects.filter(r=>r.type===ye.USER).length,a=s.gizmo.sharing.subjects.filter(r=>r.type===ye.GROUP).length;return{users:t,groups:a}}return{users:0,groups:0}}const l=ee({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noUnassignedGPTs:{id:"workspaceSettings.noUnassignedGPTs",defaultMessage:"No unassigned GPTs"},noUnassignedGPTsFound:{id:"workspaceSettings.noUnassignedGPTsFound",defaultMessage:"No unassigned GPTs found"},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You haven't approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrBuilderPlaceholder:{id:"workspaceSettings.filterByNameOrBuilderPlaceholder",defaultMessage:"Filter by name or builder..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},updatedCellTitle:{id:"workspaceSettings.updatedCellTitle",defaultMessage:"Updated"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},assignOwner:{id:"workspaceSettings.assignOwner",defaultMessage:"Assign Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"},unassigned:{id:"workspaceSettings.unassignedGPTs",defaultMessage:"Unassigned"}});function re({title:s,description:t,children:a,upsellEnterprise:r=!1,isQuorum:d=!1,className:c=""}){return e.jsx(Me,{label:e.jsx(i,n({},w.enterpriseRequiredMessage)),side:"top",disabled:!r,className:"max-w-5xl",triggerAs:null,children:e.jsxs(ds,{className:de(r&&"text-token-text-tertiary","max-w-4xl",c),children:[e.jsxs(cs,{className:"flex items-center gap-3",children:[e.jsx(i,n({},s)),r&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:e.jsx(i,n({},w.enterpriseUpsellPill))}),!r&&d&&e.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-3 ps-3 pt-1 pb-1 text-sm font-normal",children:e.jsx(i,n({},w.thisFeatureDisabledForOrg))})]}),t&&e.jsx(us,{className:"text-token-text-secondary py-2",children:e.jsx(i,n({},t))}),a]})})}function Bs({workspaceId:s,label:t,setting:a,defaultValue:r,values:d,disabled:c=!1}){var f;const u=ce(),h=$(),{variables:T,mutate:y}=le({mutationFn:({setting:x,value:p})=>K.safePost("/accounts/{account_id}/settings/share_settings",{parameters:{path:{account_id:s}},requestBody:{setting:x,value:p}}),onSettled:()=>{h.invalidateQueries({queryKey:["workspace-settings"]}),h.invalidateQueries({queryKey:["workspace"]})},onError:()=>{u.danger(w.featureSettingsUpdateFailed,{toastId:"workspace_gpt_settings_page"})}});return e.jsxs(ps,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(i,n({},t))}),e.jsxs(_.Root,{defaultValue:(f=T==null?void 0:T.value)!=null?f:r,onValueChange:x=>{y({setting:a,value:x})},disabled:c,children:[e.jsxs(_.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(_.Value,{}),e.jsx(_.Icon,{})]}),e.jsx(_.Portal,{children:e.jsx(_.Content,{children:d.map((x,p)=>e.jsx(_.Item,{className:"text-md",value:x.value,children:e.jsx(i,n({},x.display))},p))})})]})]})}function qs({workspaceId:s,value:t,upsellEnterprise:a=!1,isQuorum:r=!1}){var T;const d=ce(),c=$(),{variables:u,mutate:h}=le({mutationFn:({value:y})=>K.safePost("/accounts/{account_id}/settings/third_party_gpts",{parameters:{path:{account_id:s}},requestBody:{value:y}}),onSettled:()=>{c.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{d.danger(w.featureSettingsUpdateFailed,{toastId:"third_party_gpt_setting_dropdown"})}});return e.jsxs(_.Root,{defaultValue:(T=u==null?void 0:u.value)!=null?T:t,onValueChange:y=>{h({value:y})},children:[e.jsxs(_.Trigger,{className:"border-token-border-default focus-visible:border-token-border-default border text-base",children:[e.jsx(_.Value,{}),e.jsx(_.Icon,{})]}),e.jsx(_.Portal,{children:e.jsxs(_.Content,{children:[!r&&e.jsx(_.Item,{className:"text-base",value:X.ALLOW_ALL,children:e.jsx(i,n({},w.allowAllOption))}),!a&&!r&&e.jsx(_.Item,{className:"text-base",value:X.ALLOW_SPECIFIC,children:e.jsx(i,n({},w.ownerApprovedOnlyOption))}),e.jsx(_.Item,{className:"text-base",value:X.ALLOW_NONE,children:e.jsx(i,n({},w.dontAllowOption))})]})})]})}function Hs({workspaceId:s,data:t}){var I;const a=U(),r=ce(),d=Ze(),c=Xe(),u=c,h=$(),T=es(),[y,f]=g.useState([]),x=le({mutationFn:({value:R})=>K.safePost("/accounts/{account_id}/settings/allowed_custom_actions_domains",{parameters:{path:{account_id:s}},requestBody:{domains:R}}),onSettled:()=>{h.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{r.danger(w.featureSettingsUpdateFailed,{toastId:"workspace_settings"})}});if(d==null)return null;const p=d.isSelfServeBusiness(),v=e.jsx(re,{title:w.thirdPartyGPTsTitle,description:w.thirdPartyGPTsDescription,className:"border-token-border-default border-b pb-4",isQuorum:c,children:e.jsx("div",{children:e.jsx(qs,{workspaceId:s,value:t.allow_third_party_gpts,upsellEnterprise:p,isQuorum:c})})}),M=e.jsx(re,{title:w.sidebarTitle,children:e.jsx(Fs,{account:d,showThirdParty:!p&&!c&&t.allow_third_party_gpts===X.ALLOW_SPECIFIC})}),A=t.allowed_custom_actions_domains!=null||t.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(os,{className:"max-w-5xl",children:[p&&!T&&v,p&&d.isOwnerOfAccount()&&M,e.jsx(re,{title:w.sharingSettingsTitle,upsellEnterprise:p,children:e.jsxs(ls,{children:[!T&&e.jsx(Bs,{workspaceId:s,label:w.gptSharingTitle,disabled:p,setting:ss.GPT_SHARE_SETTINGS,defaultValue:t.share_settings.gpt_share_setting,values:[...u?[]:[{display:w.anyOneSelect,value:ie.ANYONE}],{display:w.workspaceMembersOnlySelect,value:ie.WORKSPACE_ONLY},{display:w.inviteOnlySelect,value:ie.NO_ONE}]}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(i,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"text-token-text-secondary py-2 text-sm",children:u?e.jsx(i,{id:"ZIYUEj",defaultMessage:"GPT actions allow GPT builders to create GPTs that call third-party APIs for tasks such as retrieving or modifying data, which could include protected health information. Admins can limit the domains that can be used by GPTs created by builders in your workspace. You should ensure your use of GPT actions complies with your obligations under HIPAA."}):e.jsx(i,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(oe,{checked:!A,id:"allow-all-domains",onChange:R=>{R.currentTarget.checked?(f(t.allowed_custom_actions_domains),x.mutate({value:null})):x.mutate({value:y!=null?y:[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(i,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(Me,{interactive:!0,label:e.jsx(i,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(ks,{})})]})}),x.isPending&&e.jsx(ve,{})]}),A&&e.jsx(ws,{value:(I=t.allowed_custom_actions_domains)!=null?I:[],title:a.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:R=>{x.mutate({value:R})},emptyMessage:a.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]})})]})}),!p&&!T&&v,!p&&d.isOwnerOfAccount()&&M]})}function Vs({currentWorkspaceId:s}){const{data:t,isLoading:a}=$e(s),r=U();return e.jsxs(e.Fragment,{children:[e.jsx(rs,{children:e.jsx("title",{children:r.formatMessage(w.sidebarTitle)})}),e.jsx(ms,{title:r.formatMessage(w.sidebarTitle)}),e.jsx(gs,{showSpinner:a,children:t===void 0?null:e.jsx(Hs,{workspaceId:s,data:t})})]})}const w=ee({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},searchTooltip:{id:"workspaceSettingsOld.searchTooltip",defaultMessage:"Web search allows ChatGPT and GPTs to answer questions on recent topics. When enabled, it may send search queries and general location information to Bing, but this data is not linked to or associated with user accounts."},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"},thisFeatureDisabledForOrg:{id:"workspaceSettings.thisFeatureDisabledForOrgGPT",defaultMessage:"This feature is disabled in this workspace"}}),ft=Be(function(){const t=fs();return Ts(),e.jsx(Vs,n({},t))});export{ft as default};
//# sourceMappingURL=j0vhz2dd349zrft3.js.map

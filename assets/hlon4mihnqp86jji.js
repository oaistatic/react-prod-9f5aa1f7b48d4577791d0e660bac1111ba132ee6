const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/a1ho4ft3c6v90rax.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css","assets/jya0s0pxvxmlp1gw.js","assets/hhl3vz1yrrpnwu4u.js","assets/b6hyii2315xk7j19.js","assets/olrcssu7duieo6m7.js","assets/j39tdkic03ejpi9l.js","assets/emrxz4v8n4klxny6.js","assets/lktqd4c5dfo8cx5l.js","assets/pbvsc3do5o365cxq.js","assets/ksuwacyo5m7qmkk7.js","assets/w7v4xtpg6tjbasgx.js","assets/o56jrqjpjpipvc65.js","assets/gla0jqw9ed8nrnoj.js","assets/hk7ym2rzlomukbdz.js","assets/nd0t140p2o58s8iq.js","assets/ju3nxwuiavion3ab.js","assets/bw9fh3ho5jrt29jx.js","assets/iqrk783zq1vw1xti.js","assets/j6x345c1lr8o2ob6.js","assets/icuos2x1zai4tnyd.js","assets/fe8pomto0j6jsca5.js","assets/f1fdbkaiwy5lnpwz.js","assets/drmwaklva7v056il.js","assets/ns51nblw8ziscsgd.js","assets/t1g128396k0dnr32.js","assets/mmc5ux7i5qpxobsz.js","assets/n864pwpo94l1mcv4.js","assets/fy6752fpzkgozktl.js","assets/dwikchly7agkd2y3.js","assets/hpbpxtzkb6eliryb.js","assets/ijctvkapujvvau9j.js","assets/owvt7s3ln6qx5fou.js","assets/bbipyj9bituayr8q.js","assets/ivb8c1xam3e690hh.js","assets/o2ch1u40q6bs5ljp.js","assets/k1t8elp5z7nmkg2d.js","assets/gdq1l97elemowxcc.js","assets/pbl95wx6493wq92j.js","assets/ov015nmz1yxh95ok.js","assets/cot-message-kr8ex2u7.css","assets/rsvoovjxegeq6fbx.js","assets/jn3c0irk2i78fcz1.js","assets/hvzeon76b5ffe4h0.js","assets/nkvmhihsargoclsc.js"])))=>i.map(i=>d[i]);
import{r as D,j as a,M as ye,_ as T}from"./i8clt0mfz495j7ii.js";import{u as Me,hy as Qe,cH as ge,a as W,hv as e,cE as K,em as X,ht as L,o as f,P as Je,hf as $e,cR as ue,d as he,bX as _e,co as Fe,mf as fe,m_ as We,cJ as H,c4 as He,a$ as Ke,el as Xe,bb as Ye,bc as Ze,cn as Ue,dM as qe,dP as Ge,cO as st}from"./ghewn7l2ynbm32fm.js";import{z as et,A as tt,D as at,E as it,G as nt,H as Te,J as ot,K as lt,M as rt,N as ct,O as mt,Q as dt,W as gt,X as ut,Y as ht,Z as _t,$ as ft,a0 as Tt,a1 as xt,a2 as yt,a3 as bt,a4 as It,a5 as xe,a6 as jt,a7 as St,a8 as pt,a9 as Et,aa as wt,ab as At,ac as Ct}from"./j0yo6uv6652vva62.js";import{T as Dt}from"./b6hyii2315xk7j19.js";import{g as Lt}from"./olrcssu7duieo6m7.js";const Pt=f(()=>T(()=>import("./a1ho4ft3c6v90rax.js"),__vite__mapDeps([0,1,2,3,4,5]))),kt=f(()=>T(()=>import("./jya0s0pxvxmlp1gw.js"),__vite__mapDeps([6,1,3,4]))),Rt=f(()=>T(()=>import("./hhl3vz1yrrpnwu4u.js"),__vite__mapDeps([7,1,3,4,8,2,5,9]))),vt=f(()=>T(()=>import("./j39tdkic03ejpi9l.js"),__vite__mapDeps([10,1,3,4,2,5,11,12,13]))),Ot=f(async()=>()=>null),Bt=f(async()=>(await T(()=>import("./ksuwacyo5m7qmkk7.js"),__vite__mapDeps([14,1,3,4,2,5]))).GlauxMessage),Vt=f(async()=>(await T(()=>import("./w7v4xtpg6tjbasgx.js"),__vite__mapDeps([15,1,3,4,11,2,5,16,12,13,17,18]))).ImageGenMessage),Nt=f(()=>T(()=>import("./nd0t140p2o58s8iq.js"),__vite__mapDeps([19,1,3,4,2,5]))),zt=f(()=>T(()=>import("./j0yo6uv6652vva62.js").then(t=>t.za),__vite__mapDeps([2,1,3,4,5])).then(t=>t.BrowsingMessage)),Mt=f(()=>T(()=>import("./ju3nxwuiavion3ab.js"),__vite__mapDeps([20,1,3,4,2,5,9])).then(t=>t.BrowserToolMessage)),Qt=f(()=>T(()=>import("./bw9fh3ho5jrt29jx.js"),__vite__mapDeps([21,1,3,4,2,5])).then(t=>t.SearchResultMessage)),Jt=f(()=>T(()=>import("./iqrk783zq1vw1xti.js"),__vite__mapDeps([22,1,3,4,2,5,23,24,25,26,27,28,29])).then(t=>t.JITPluginMessage)),$t=f(()=>T(()=>import("./mmc5ux7i5qpxobsz.js"),__vite__mapDeps([30,1,3,4,2,5,29,25])).then(t=>t.APIToolElicitationMessage)),Ft=f(()=>T(()=>import("./n864pwpo94l1mcv4.js"),__vite__mapDeps([31,1,3,4,32,33,2,5])).then(t=>t.DataAnalysisMessage)),Wt=f(()=>T(()=>import("./hpbpxtzkb6eliryb.js"),__vite__mapDeps([34,1,3,4,2,5,35,17,18,13,36,14,33,37,9,38,39,40,41,42,16,12,43,44]))),Ht=f(()=>T(()=>import("./rsvoovjxegeq6fbx.js"),__vite__mapDeps([45,1,3,4,35,2,5,17,18,13,36,14,33,37,9,38,39,40,41,42,16,12,43,44])).then(t=>t.LegacyCoTMessage)),Kt=f(()=>T(()=>import("./ijctvkapujvvau9j.js"),__vite__mapDeps([35,1,3,4,2,5,17,18,13,36,14,33,37,9,38,39,40,41,42,16,12,43,44])).then(t=>t.CoT)),Xt=f(()=>T(()=>import("./jn3c0irk2i78fcz1.js"),__vite__mapDeps([46,1,2,3,4,5,47,48])).then(t=>t.JawboneMessage)),Yt=f(async()=>()=>null);function Zt(t){if(t.some(l=>l.type===e.SearchGPTQuery)){const h=t.filter(m=>m.type===L).flatMap(m=>m.groups),n=h.flatMap(m=>m.messages.map(c=>{var _;return(_=c.metadata)==null?void 0:_.search_turns_count})).findLast(m=>m!=null);return n!=null?n>1:(function(){const c=h.filter(b=>b.type===e.StructuredThoughts),_=h.filter(b=>b.type===e.CoTSearchTool),d=(()=>{function b(S){return S.type===e.StructuredThoughts&&S.messages.flatMap(g=>g.content).some(g=>g.content_type===Ue.StructuredThoughts&&g.thoughts.length>0)}let j=!1;for(const S of h)if(S.type===e.CoTSearchTool)j=!0;else if(b(S)&&j)return!0;return!1})();return c.length>1||_.length>1||d})()}return!0}function Ut(t,l){var h;if(t.type===L){const n=K(t.groups);return((h=n==null?void 0:n.messages[0].metadata)==null?void 0:h.is_visually_hidden_reasoning_group)&&l===0}return!1}function qt(t){return t.type===L?!1:t.messages.some(l=>wt(l))}function la({groupedMessagesToRender:t,allMessages:l,allGroupedMessages:h,conversation:n,isUserTurn:m,isCompletionRequestInProgress:c,isFeedbackEnabled:_,isFinalTurn:d,isFinalUserTurn:b,isFinalAssistantTurn:j,isGlauxTurn:S=!1,hasActiveRequest:g,onRequestCompletion:P,turnIndex:p,shouldGrowContainer:O=!0,isParagen:Y=!1,renderingView:be="chat",isAgentTurn:B=!1,isMercuryTurn:Ie=!1,isKAUR1BR5:je=!1,query:Z=null,wasInterrupted:Se=!1,superWidgetContent:pe=null,lastAgentMetadataNode:U,isWithinFirstAssistantTurns:Ee=!1,hasSearchSystemHint:we=!1}){var cs,ms;const Q=Me(),{showDebugConversationTurns:q}=Qe(),[k]=ge(n.id,s=>[s==null?void 0:s.mode]),G=W(()=>qe(n)),ss=W(()=>Ge(n)),Ae=et(Q),Ce=W(()=>st(Q));let es=h.some(s=>s.type===e.Browsing||s.type===e.RetrievalBrowsing||s.type===e.SearchGPTQuery||s.type===e.n7jupd);const De=h.some(s=>s.type===e.SearchGPTQuery),ts=!m&&we&&c&&g&&!De&&Ce,as=D.useRef(!1);ts&&(as.current=!0,es=!0);const Le=ge(n.id,s=>{var i;for(let x=l.length-1;x>=0;x--){const r=l[x],w=(i=s==null?void 0:s.tree.getNodeIfExists(r.id))==null?void 0:i.message,M=w?Ct(w):void 0;if(M)return Object.assign({conversation:n,messageId:l[x].id},M)}}),Pe=tt(()=>Ye.count(Ze.DEFAULT,"conversation_turn_grouped_messages.attempted_render_missing_type_f959b8c")),J=K(l),is=at({clientThreadId:n.id,conversationMode:k}),ke=D.useCallback(({sourceEvent:s,requestedModelId:i,appendMessages:x,extraStreamParams:r,isReasoningSkipped:w})=>{J&&is({sourceEvent:s,nodeId:J.id,requestedModelId:i,appendMessages:x,extraStreamParams:r,isReasoningSkipped:w})},[J,is]),{closeThreadSidebar:Re}=it(),ve=X(t,s=>s.type!==e.Debug),V=t.map((s,i)=>{var us,hs,_s,fs,Ts,xs,ys,bs,Is,js,Ss,ps,Es,ws,As,Cs,Ds,Ls,Ps,ks,Rs,vs,Os,Bs,Vs,Ns,zs,Ms,Qs,Js,$s,Fs,Ws,Hs,Ks,Xs,Ys,Zs,Us,qs,Gs,se,ee,te,ae,ie,ne,oe,le,re,ce;const x=g||qt(s),r=B||Ie?i===ve:i===h.length-1,w=Zt(t),M=Ut(s,i),y=i===h.length-1?void 0:h[i+1],Be=(y==null?void 0:y.type)===L?y.groups.at(-1):y,v=i===0?void 0:t[i-1],A=(v==null?void 0:v.type)!==L?v:void 0,ds=A==null?void 0:A.type,gs=A==null?void 0:A.messages,Ve=l==null?void 0:l.filter(o=>{var u,I;return((u=o.metadata)==null?void 0:u.python_citation)||((I=o.metadata)==null?void 0:I.container_citation)});if(s.type===L){const o=s.groups[0].messages[0];return!w||M?null:a.jsx(Kt,{isStreaming:d&&r&&c,latestError:Le,isFinalAssistantTurn:j,messageGroups:s.groups,nextMessageGroup:Be,prevMessageGroup:A,isAutoswitchOptOutEnabled:!!((us=o.metadata)!=null&&us.classifier_response),handleSkipClick:u=>{Re(),Je.logEventWithStatsig("chatgpt_web_autoswitch_reasoning_skip_clicked","chatgpt_web_autoswitch_reasoning_skip_clicked",{conversationId:n.id,messageId:s.groups[0].messages[0].id}),G&&ke({sourceEvent:u,requestedModelId:G.id,isReasoningSkipped:!0,isAgentTurn:B})},isAgentTurn:B,isGlauxTurn:S,isKAUR1BR5:je,wasInterrupted:Se,lastAgentMetadataNode:U,conversation:n,turnIndex:p,currentGroupedMessageIndex:i},"cot-"+o.id)}const Ne=s&&!$e(s.messages[0]),ze=es&&Ne,C=[];if(ze||C.push(a.jsx(Dt,{className:"min-h-8",message:s.messages[0],isFeedbackEnabled:_,isFinalUserTurn:b,isWithinFirstAssistantTurns:Ee,isCompletionInProgress:r&&c,hasActiveRequest:g,turnIndex:p,conversation:n,isUserTurn:m,prevGroupedMessageType:ds,prevGroupedMessages:gs,citableMessages:Ve,superWidgetContent:pe},"text-message-"+s.messages[0].id)),q&&C.push(a.jsx(Yt,{clientThreadId:n.id,message:s.messages[0]},"message-debug-"+s.messages[0].id)),s.type===e.Text&&((hs=s.messages[0].metadata)!=null&&hs[ue])){const o=s.messages[0].metadata[ue];return a.jsxs(D.Fragment,{children:[a.jsx(nt,{browserContextMetadata:o,className:he(Lt(!0),"mb-1","block","[.text-message+&]:mt-5")}),C]},"group-"+s.messages[0].id)}if(ts&&r)return a.jsx(Te,{clientThreadId:n.id,turnIndex:p,isRequestActive:g,isLastMessage:r,isLastTurnInConversation:d,query:Z,searchModelQueries:[],searchResultGroups:[],showFastNav:!1,isForcedMessage:!0,shouldShowAnimatedBlackDot:!1},"searchquery-forced-".concat(n.id,"-").concat(p));switch(s.type){case e.Text:case e.MultiText:if(s.type===e.Text){const o=(_s=s.messages[0])==null?void 0:_s.metadata,u=typeof(o==null?void 0:o.source)=="string"&&(o==null?void 0:o.source)==="dream_followup";return a.jsxs(D.Fragment,{children:[u&&v&&a.jsxs("div",{className:"mx-auto mt-8 mb-6 flex w-full items-center justify-center",children:[a.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),a.jsx("p",{className:"mx-3 shrink text-[14px] whitespace-nowrap text-gray-500",children:a.jsx(ye,{id:"threadLayout.proactiveAssistantFollowupDivider",defaultMessage:"Follow-up question"})}),a.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]},"proactive-divider-"+s.messages[0].id),C,B&&a.jsx(ft,{conversation:n,currentGroupedMessage:s,isLastMessage:r,isLastTurnInConversation:d,turnIndex:p,lastAgentMetadataNode:U}),a.jsx(Tt,{isUserTurn:m,message:s.messages[0]}),a.jsx(xt,{isUserTurn:m,message:s.messages[0],clientThreadId:n.id})]},"group-"+s.messages[0].id)}else return s.type===e.MultiText?a.jsx(Rt,{conversation:n,messages:s.messages,isCompletionInProgress:r&&c,isFeedbackEnabled:_,hasActiveRequest:g,prevGroupedMessageType:ds,prevGroupedMessages:gs},"multitext-"+((Ts=(fs=s.messages[0])==null?void 0:fs.id)!=null?Ts:i)):s.type;case e.PIMBlock:{const o=K(l);return k&&o?a.jsx(_t,{isFinalTurn:d,hasActiveRequest:g,conversationMode:k,clientThreadId:n.id,justification:(xs=o.metadata)==null?void 0:xs.pim_justification,flaggedMessageId:(ys=o.metadata)==null?void 0:ys.pim_message_id,children:C}):null}case e.n7jupd_n:return a.jsx(ht,{});case e.Browsing:case e.RetrievalBrowsing:{const o=k!=null&&[H.GizmoInteraction,H.GizmoMagicCreate,H.GizmoTest].includes(k.kind),u=ss?He(ss):!1;return a.jsx(zt,{messages:s.messages,isRequestActive:g,isLastMessageInTurn:r,isUsingGizmo:o,isUsingProject:u,isRetrieval:s.type===e.RetrievalBrowsing},"browsing-"+((Is=(bs=s.messages[0])==null?void 0:bs.id)!=null?Is:i))}case e.kaur1br5:return a.jsx(Mt,{messages:s.messages,isRequestActive:g,isLastMessageInTurn:r,clientThreadId:n.id},"kaur1br5-tool-"+((Ss=(js=s.messages[0])==null?void 0:js.id)!=null?Ss:i));case e.SearchGPTQuery:{if(t.some(E=>E.type===L)&&w)return null;const u=t.slice(i+1).findLast(E=>E.type===e.Text||E.type===e.CoTSearchTool),I=l.findLast(E=>fe(E).length>0),me=new Set,de=[];for(const E of l){const $=We(E);if($&&$.length>0)for(const F of $)me.has(F)||(me.add(F),de.push(F))}return a.jsx(Te,{clientThreadId:n.id,turnIndex:p,isRequestActive:g,isLastMessage:r,isLastTurnInConversation:d,nextMessage:u==null?void 0:u.messages[0],query:Z,searchResultGroups:fe(I),searchModelQueries:de,shouldShowAnimatedBlackDot:!as.current},"searchquery-"+((Es=(ps=s.messages[0])==null?void 0:ps.id)!=null?Es:i))}case e.StructuredThoughts:return null;case e.ReasoningRecap:return null;case e.n7jupd:return null;case e.n7jupd_native_api_tool:case e.n7jupd_a:case e.n7jupd_x:return null;case e.a8km123:{if(!s.messages.every(u=>{var I;return!((I=u.metadata)!=null&&I.reasoning_status)})){const u=X(l,I=>I.author.role===Fe.Assistant&&I.recipient==="all");return a.jsx(Ht,{conversation:n,turnIndex:p,isStreaming:(r||u<i)&&c,isFinalAssistantTurn:j,messages:s.messages},"sum-"+((As=(ws=s.messages[0])==null?void 0:ws.id)!=null?As:i))}return a.jsx(Wt,{messages:s.messages,isStreaming:r&&c,isCompletionRequestInProgress:c,hasActiveRequest:g,isLastMessage:r,isFinalTurn:d,isFeedbackEnabled:_,conversation:n,currentGroupedMessageIndex:i,turnIndex:p},"sum-"+((Ds=(Cs=s.messages[0])==null?void 0:Cs.id)!=null?Ds:i))}case e.f959b8c:return Pe(),null;case e.is_loading_message:if(r&&c){const o=s.messages[0],u=_e(o);return a.jsx(ut,{text:u},"loading-message-"+i)}else return null;case e.b47u8ra0_t:{const o=s.messages[0],u="Reference Browser Memories?",I=_e(o);return a.jsx(gt,{title:u,description:I,settingsTab:(Ps=(Ls=o.metadata)==null?void 0:Ls.b47u8ra0_t)!=null?Ps:"general",clientThreadId:n.id,parentMessageId:o.id},"b47u8ra0_t-"+i)}case e.l1p9k3u:return null;case e.b1de6e2_c:return a.jsx(dt,{messages:s.messages,clientThreadId:n.id,isLastMessage:r},"b1de6e2-"+((Rs=(ks=s.messages[0])==null?void 0:ks.id)!=null?Rs:i));case e.b1de6e2_s:return a.jsx(mt,{messages:s.messages,clientThreadId:n.id},"b1de6e2_s-"+((Os=(vs=s.messages[0])==null?void 0:vs.id)!=null?Os:i));case e.b1de6e2_d:return null;case e.b1de6e2_rm:return a.jsx(ct,{messages:s.messages,clientThreadId:n.id,renderingView:be,children:C},"b1de6e2_rm-"+((Vs=(Bs=s.messages[0])==null?void 0:Bs.id)!=null?Vs:i));case e.async_task_result_message:return a.jsx(rt,{clientThreadId:n.id,messages:s.messages,children:C},"async_task_result_message-"+((zs=(Ns=s.messages[0])==null?void 0:Ns.id)!=null?zs:i));case e.de1d73e:if(Ae){const o=i+1<h.length?h[i+1]:void 0;return a.jsx(Xt,{clientThreadId:n.id,currentGroupedMessage:s,nextMessage:o&&o.type===e.Text?o.messages[0]:void 0,isLastMessage:r,isRequestActive:g},"jawbone-"+((Qs=(Ms=s.messages[0])==null?void 0:Ms.id)!=null?Qs:i))}else return null;case e.ParallelBrowsing:return a.jsx(Nt,{messages:s.messages},"parallel-"+(($s=(Js=s.messages[0])==null?void 0:Js.id)!=null?$s:i));case e.CodeInterpreter:return a.jsx(Ft,{messages:s.messages,isRequestActive:g,clientThreadId:n.id},"ada-"+((Ws=(Fs=s.messages[0])==null?void 0:Fs.id)!=null?Ws:i));case e.UserSettings:return null;case e.DILWidget:{const o=s.messages[0];return(Ks=(Hs=o==null?void 0:o.metadata)==null?void 0:Hs.chatgpt_sdk)==null||Ks.dil,null}case e.JITPlugin:return a.jsx(Jt,{messages:s.messages,nextMessage:(y==null?void 0:y.type)===e.JITPlugin?y.messages[0]:void 0,clientThreadId:n.id,isLastTurnInConversation:d,isLastMessageInTurn:r,onRequestCompletion:P},"jit-"+((Ys=(Xs=s.messages[0])==null?void 0:Xs.id)!=null?Ys:i));case e.Mercury:return null;case e.APIToolElicitation:return a.jsx($t,{messages:s.messages,nextMessage:(y==null?void 0:y.type)===e.APIToolElicitation?y.messages[0]:void 0,clientThreadId:n.id,isLastTurnInConversation:d,isLastMessageInTurn:r,onRequestCompletion:P},"api-tool-elicitation-"+((Us=(Zs=s.messages[0])==null?void 0:Zs.id)!=null?Us:i));case e.t2uay3k:return a.jsx(Vt,{messages:s.messages,clientThreadId:n.id,isParagen:Y,isLastTurnInConversation:d},"t2uay3k-"+((Gs=(qs=s.messages[0])==null?void 0:qs.id)!=null?Gs:i));case e.Dalle:return a.jsx(vt,{messages:s.messages,clientThreadId:n.id,disableClickThru:Y},"dalle-"+((ee=(se=s.messages[0])==null?void 0:se.id)!=null?ee:i));case e.GizmoEditor:return a.jsx(Pt,{messages:s.messages},"gizmo-editor-"+((ae=(te=s.messages[0])==null?void 0:te.id)!=null?ae:i));case e.oiw209h:return a.jsx(Ot,{messages:s.messages,clientThreadId:n.id},"oiw209h-"+((ne=(ie=s.messages[0])==null?void 0:ie.id)!=null?ne:i));case e.n7jupd_p:return a.jsx(lt,{});case e.Canmore:return a.jsx(ot,{messages:s.messages,allTurnMessages:l,isFinalTurn:d,isRequestActive:x,clientThreadId:n.id,isUserTurn:m},"canmore-"+((le=(oe=s.messages[0])==null?void 0:oe.id)!=null?le:i));case e.Container:case e.Oboe:return null;case e.Croquette:return null;case e.Debug:return q?a.jsx(kt,{message:s.messages[0]},"debug-"+s.messages[0].id):null;case e.SearchResult:return a.jsx(Qt,{messages:s.messages},"search-result-"+((ce=(re=s.messages[0])==null?void 0:re.id)!=null?ce:i));case e.Mochi:return null;case e.CoTSearchTool:return null;case e.SuperWidget:return null;case e.n7jupd_image_gen:return null;case e.e1ld0dvz:return null;case e.Glaux:return a.jsx(Bt,{messages:s.messages,isLastMessage:r},"glaux-"+s.messages[0].id);case e.Strix:return null}});j&&l.some(yt)&&V.push(a.jsx(bt,{isCompletionRequestInProgress:c,conversation:n,messages:l},"message-suggestion"));const Oe=Et(),{wordFadeType:R,animationDurationMs:ns}=It(),N=D.useRef([]),os=D.useRef(void 0),ls=D.useRef(null),z=!m&&d&&c,rs=(cs=l[0])==null?void 0:cs.id;return Ke(()=>{if(R!=="indexed"||!z)return;const s=ls.current;if(!s)return;os.current!==rs&&(os.current=rs,N.current=[]);const i=s.getAnimations({subtree:!0}).filter(x=>x.animationName===xe["fade-in"]);if(i.length!==0){const x=ea({now:performance.now(),previousStartTimes:N.current,groupCount:i.length});N.current=x;for(let r=0;r<i.length;r++)i[r].startTime=x[r]}else N.current=[]},[V,R,z]),a.jsx("div",{className:he("flex max-w-full flex-col",{[xe.root]:R==="indexed"&&z,grow:O}),style:R==="indexed"?{"--duration":"".concat(ns,"ms")}:void 0,ref:ls,children:a.jsx(Xe,{name:"GroupedMessages",fallback:Gt,children:m?V:a.jsxs(jt,{isDisabled:!z||R!=="delay",defaultAnimationDurationPerSegmentMs:ns,children:[St(Q)&&d&&a.jsx(pt,{isStreaming:c,debug:Oe}),V]},(ms=l[0])==null?void 0:ms.id)})})}function Gt({error:t}){return a.jsxs(At,{type:"danger",children:[a.jsx(ye,{id:"5eGo3w",defaultMessage:"Unable to display this message due to an error."}),!1]})}function sa(t,l,h){if(t.length<2||l<=0)return 0;const n=l/Math.log(2);t=[...t].sort((_,d)=>_-d);let m=0,c=0;for(let _=t.length-1;_>0;--_){const d=Math.exp(-(h-t[_])/n);if(m>0&&d/m<.01)break;const b=t[_]-t[_-1];m+=d,c+=d*b}return m===0?0:m/c}function ea({now:t,previousStartTimes:l,groupCount:h,initialRate:n=50,halfLife:m=1}){var S;const c=l.slice(0,X(l,g=>g<=t)+1),_=c.length<2?n/1e3:Math.max(.01,sa(c,m*1e3,t)),d=h-c.length;let b=(S=c[c.length-1])!=null?S:0,j=1;for(let g=0;g<d;g++){const P=_*1e3*j;d<P?j*=.8:d>P&&(j*=1.5);const p=1/(_*j),O=Math.max(t,b+p);c.push(O),b=O}return c}export{la as C};
//# sourceMappingURL=hlon4mihnqp86jji.js.map

var X=Object.freeze,J=Object.defineProperty,Me=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var Q=(s,e,o)=>e in s?J(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,_=(s,e)=>{for(var o in e||(e={}))be.call(e,o)&&Q(s,o,e[o]);if(K)for(var o of K(e))je.call(e,o)&&Q(s,o,e[o]);return s},ee=(s,e)=>Me(s,ve(e));var te=(s,e)=>X(J(s,"raw",{value:X(e||s.slice())}));import{f as ce,e as de,j as l,M as G,c as ue}from"./i8clt0mfz495j7ii.js";import{P as W,kp as fe,u as Z,e4 as $,T as Pe,F as ye,e as ge,as as Ae,E as pe,gU as me,eu as Ue,jt as _e,ix as xe,kv as ke,oh as Ee,jm as Te,a as Le,ju as se,jw as Ce,iA as Ie,oi as De,oj as Re,ok as Ne,ol as ze,om as Be,iu as Se,b1 as Oe,on as $e,oo as we,iw as oe,iv as Y}from"./ghewn7l2ynbm32fm.js";import{fm as ae,fn as He,fo as Ye,fp as Ge,fq as ie,fr as We,fs as Ze,ft as qe,fu as Ve,fv as Xe}from"./j0yo6uv6652vva62.js";import{u as Ke}from"./nrrhfi0a0bbsg9w2.js";function dt({clientThreadId:s,openFileDialog:e,icon:o,isDisabled:r=!1,isSmall:c=!1,showLabel:a=!1,showUpsell:d=!1,hideBorder:t=!1,highlightTooltip:f=!1,disabledReason:p,currentModelName:b,visualTreatment:x,showMenuForNoAuth:m,modelSupportsImages:i}){const h=de(),u=fe(),n=Z();r=(r||!!u)&&!d;const y=l.jsxs(He,{disabled:r,$showLabel:a,$hideBorder:t,$isSmall:c,$visualTreatment:x,onClick:M=>{if(M.preventDefault(),m||d){W.logNoAuthAttachButtonClicked({location:m?"No auth file upload":"No auth upsell"});return}e()},"aria-label":Ye(n,h,r,p,b),children:[o,a&&l.jsx(Ge,{})]}),F=l.jsx("div",{className:"flex",children:y});if(m||d){const M=m?l.jsx(We,{openFileDialog:e,showMenuForNoAuth:!0,modelSupportsImages:i,clientThreadId:s}):l.jsx(Ze,{location:"attach",statsig_login_event:"chatgpt_composer_upsell_login_button_clicked",statsig_signup_event:"chatgpt_composer_upsell_signup_button_clicked"}),g=l.jsx($.BasicTrigger,{asChild:!0,children:F});return l.jsxs($.Root,{children:[m?l.jsx(ie,{clientThreadId:s,rateLimitPopup:u,highlightTooltip:f,disabled:r,children:g}):l.jsx(Pe,{label:l.jsx(G,{id:"wkpQmi",defaultMessage:"Upload files and more"}),side:"bottom",open:f||void 0,children:g}),l.jsx($.Portal,{children:l.jsx($.Content,{alignOffset:-8,side:"bottom",size:"small",className:"radix-side-bottom:flex-col-reverse flex flex-col",children:M})})]})}return l.jsx(ie,{disabled:r,clientThreadId:s,rateLimitPopup:u,highlightTooltip:f,children:F})}function Qe({code:s,message:e}){switch(s){case ae.FileTooLarge:return le.errorFileTooLarge;case ae.TooManyFiles:return W.logEvent("Uploaded Max Files Error"),le.errorTooManyFiles;default:return e}}const le=ce({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Upload files and more"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."}}),re=ce({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Je(s){if(!s.accept||Object.keys(s.accept).length===0)return[];const e=[];return Object.values(s.accept).forEach(o=>e.push(...o)),e.sort()}function ut(s){"use forget";var V;const e=ue.c(45),{className:o,children:r,clientThreadId:c,currentModelConfig:a,noKeyboard:d}=s,t=de(),f=ge(),p=Z(),b=Ae(p),x=pe(p).flags,m=x==null?void 0:x.includes(me.NoAuthEnableFileUploads),i=qe(c),h=Ue();let u;e[0]!==h||e[1]!==i||e[2]!==a?(u=_e(a,i,h),e[0]=h,e[1]=i,e[2]=a,e[3]=u):u=e[3];const n=u,y=n!==xe.None,F=ke(et),M=Ee(n),g=Math.max(0,M-F.length),R=g<=0,{getGizmoId:q}=Te();let k;e[4]!==c||e[5]!==p?(k=ze(p,c),e[4]=c,e[5]=p,e[6]=k):k=e[6];const j=Le(k),N=Array.isArray(j)&&j.length>0;let A;e[7]!==i||e[8]!==a?(A=se(a,i),e[7]=i,e[8]=a,e[9]=A):A=e[9];let U;e[10]!==i||e[11]!==a?(U=(V=Ce(a,i))==null?void 0:V.attachments,e[10]=i,e[11]=a,e[12]=U):U=e[12];const{handleFileAccepted:E}=st(t,n,A,"drag",q,U,N?j:void 0),he=fe(),Fe=Ie();let z;e:{if(Fe){z=Be;break e}else if(!b&&m){let O;e[13]!==i||e[14]!==a?(O=se(a,i),e[13]=i,e[14]=a,e[15]=O):O=e[15],z=O;break e}let v;e[16]!==i||e[17]!==a?(v=De(a,i),e[16]=i,e[17]=a,e[18]=v):v=e[18],z=v}const T=Re(z),w=!y||R||he!=null;let L;e[19]!==t||e[20]!==f||e[21]!==n?(L=v=>tt(v,t,f,n),e[19]=t,e[20]=f,e[21]=n,e[22]=L):L=e[22];let B;e[23]!==T||e[24]!==E||e[25]!==d||e[26]!==g||e[27]!==w||e[28]!==L?(B=_({maxFiles:g,disabled:w,noClick:!0,noKeyboard:d,onDropAccepted:E,onDropRejected:L,multiple:!0,maxSize:Ne},T),e[23]=T,e[24]=E,e[25]=d,e[26]=g,e[27]=w,e[28]=L,e[29]=B):B=e[29];const{getRootProps:D,isDragActive:H}=Ke(B);let C,P,I;if(e[30]!==r||e[31]!==o||e[32]!==T||e[33]!==D||e[34]!==H){const v=Je(T);e[38]!==o||e[39]!==D?(P=D({className:o}),e[38]=o,e[39]=D,e[40]=P):P=e[40],I=r,C=H&&l.jsxs(ot,{children:[l.jsx(Ve,{}),l.jsx("h3",{children:l.jsx(G,_({},re.dragInstructions))}),l.jsx("h4",{className:"w-2/3 text-center",children:v.length>0?v.join(", "):l.jsx(G,_({},re.dragAllAccepted))})]}),e[30]=r,e[31]=o,e[32]=T,e[33]=D,e[34]=H,e[35]=C,e[36]=P,e[37]=I}else C=e[35],P=e[36],I=e[37];let S;return e[41]!==C||e[42]!==P||e[43]!==I?(S=l.jsxs("div",ee(_({},P),{children:[I,C]})),e[41]=C,e[42]=P,e[43]=I,e[44]=S):S=e[44],S}function et(s){return s.files}function tt(s,e,o,r){const{errors:c}=s[0],a=$e(r);c.forEach(d=>{const t=Qe(d);typeof t=="string"?o.danger(t,{hasCloseButton:!0,loggingTitle:"File upload error",loggingDescription:t,toastId:"file_upload_error"}):o.danger(e.formatMessage(t,{size:we,maxNum:a}),{hasCloseButton:!0,loggingTitle:t.defaultMessage||"File upload error",loggingDescription:t.defaultMessage||"File upload error",toastId:"file_upload_error"})})}function st(s,e,o,r,c,a,d){"use forget";const t=ue.c(18),f=Z(),p=pe(f).flags,b=ge(),x=Se(),{isUnauthenticated:m}=Oe(),i=d!=null?d:void 0,h=p==null?void 0:p.includes(me.NoAuthEnableFileUploads);let u;t[0]!==f?(u=Xe(f,!0),t[0]=f,t[1]=u):u=t[1];const{persistFilesToLibrary:n,doubleWriteFilesToLibrary:y}=u;let F;t[2]!==a||t[3]!==i||t[4]!==c||t[5]!==s||t[6]!==y||t[7]!==n||t[8]!==m||t[9]!==o||t[10]!==h||t[11]!==x||t[12]!==b||t[13]!==r||t[14]!==e?(F=async(R,q)=>{W.logEvent("Upload File",{client:"web",eventSource:r,intent:e.toString()});const k=c!=null?await c():void 0;R.length>0&&R.forEach(j=>{const N=_(_({gizmoId:k},h&&{isUnauthenticated:m}),i&&i.length>0?{contextScopes:i}:{}),A=[x,oe(j),j,e,o,s,b,N,a];if(e===xe.Retrieval){let U=Promise.resolve(),E=Promise.resolve();n&&(E=Y.uploadFile(x,"".concat(oe(j),":lib"),j,e,o,s,b,N,a,void 0,!0,!0)),(y||!n)&&(U=Y.uploadFile(...A,void 0,!1,n)),Promise.all([U,E])}else Y.uploadFile(...A)})},t[2]=a,t[3]=i,t[4]=c,t[5]=s,t[6]=y,t[7]=n,t[8]=m,t[9]=o,t[10]=h,t[11]=x,t[12]=b,t[13]=r,t[14]=e,t[15]=F):F=t[15];const M=F;let g;return t[16]!==M?(g={handleFileAccepted:M},t[16]=M,t[17]=g):g=t[17],g}var ne;const ot=ye.div(ne||(ne=te(['absolute z-50 inset-0 flex gap-2 flex-col justify-center items-center after:contents-[""] after:absolute after:opacity-80 after:z-[-1] after:bg-token-main-surface-primary after:inset-0'])));export{ot as D,ut as F,dt as P,Je as g,tt as h,st as u};
//# sourceMappingURL=ktw3b87sujui39wx.js.map

import{A as P,m as _,a4 as h,j as S,e as M,h as E,u as L,r as w,f as F}from"./i8clt0mfz495j7ii.js";import{w as p,x as d,B as T,aY as m,nf as A,u as b,e as x,a1 as R,a0 as l,P as v,S as O,jD as I}from"./ghewn7l2ynbm32fm.js";import{i as j,C as k}from"./e2bky2k6amgws3b2.js";import{a_ as D}from"./j0yo6uv6652vva62.js";import"./kplnfohfof8ely0n.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";import"./iej0cupg2dqkmejt.js";import"./o1s10g7vrpyumh3e.js";import"./n8tfpmgkqe98i7yl.js";import"./mq11hu99eist2abq.js";function g({intl:o,message:e,navigate:s,toaster:a}){a.warning(o.formatMessage(e),{duration:5}),s("/#pricing")}function N({checkoutFrom:o,checkoutPlanType:e,ctx:s,currentAccount:a,intl:i,navigate:c,queryClient:n,isEligibleForProOnboarding:r,toaster:u}){const t=l(s,"2494348560"),y=l(s,"2239990662");if(v.logPaymentSuccess({plan_type:e}),e===m.PLUS&&O.logEvent("chatgpt_plus_payment_success_page"),a.isFree())n.invalidateQueries(I());else if(o)p.removeItem(d.CheckoutFrom),window.location.href=k[o];else if(r&&t.get("enable_ca_pro_onboarding_flow",!1))window.location.href="/payments/success-ind";else{const C=y.get("redirect_to_home",!1);c(C?"/":"/#pricing"),u.success(i.formatMessage(f.paymentConfirmationToastMessage,{planName:D(e)}),{duration:5})}}function K({checkoutFrom:o,checkoutPlanType:e,currentAccount:s,postCheckoutResult:a,isEligibleForProOnboarding:i}){const c=b(),n=M(),r=E(),u=L(),t=x();return w.useEffect(()=>{switch(a){case"success":return N({checkoutFrom:o,checkoutPlanType:e,ctx:c,currentAccount:s,intl:n,isEligibleForProOnboarding:i,navigate:r,queryClient:u,toaster:t});case"payment_failed":return g({intl:n,toaster:t,navigate:r,message:f.paymentFailedToastMessage});case"other_error":return g({intl:n,toaster:t,navigate:r,message:R.somethingWentWrong})}},[o,e,c,s,n,i,r,a,u,t]),null}const X=P(function(){var t;const[e]=_(),s=p.getItem(d.CheckoutFrom),a=T(),i=h(),c=(t=e.get("plan_type"))!=null?t:m.PLUS,{anyConnectorEnabled:n,isLoading:r}=A({});if(!a||r)return null;const u=!n&&c===m.PRO;return S.jsx(K,{checkoutFrom:j(s)?s:null,checkoutPlanType:c,currentAccount:a,isEligibleForProOnboarding:u,postCheckoutResult:i.postCheckoutResult})}),f=F({paymentConfirmationToastMessage:{id:"Payments.success.toast",defaultMessage:"You're now subscribed to ChatGPT {planName}"},paymentFailedToastMessage:{id:"Payments.success.paymentFailedToastMessage",defaultMessage:"Payment failed. Please try again."}});export{X as default};
//# sourceMappingURL=dearxj9cdo75ia0d.js.map

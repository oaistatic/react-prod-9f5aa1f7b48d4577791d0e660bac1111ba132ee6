const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dt74bs5wyg16icnh.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var mt=Object.defineProperty,ft=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var ut=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable;var Pe=(l,e,o)=>e in l?mt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o,Z=(l,e)=>{for(var o in e||(e={}))ut.call(e,o)&&Pe(l,o,e[o]);if(Xe)for(var o of Xe(e))ht.call(e,o)&&Pe(l,o,e[o]);return l},Se=(l,e)=>ft(l,pt(e));import{e as Ze,u as Je,a as xt,j as t,M as u,c as gt,r as w,_ as He}from"./i8clt0mfz495j7ii.js";import{e as et,P as ee,R as _t,C as tt,$ as J,a1 as bt,u as jt,by as yt,B as wt,oR as kt,oS as vt,o as st,e4 as v,ks as Mt,hK as Nt,eL as H,oT as Ct,L as at,ak as Ie,aR as Tt,dj as Et,ki as St}from"./ghewn7l2ynbm32fm.js";import{gI as lt,o as It,bx as Rt}from"./j0yo6uv6652vva62.js";import{C as At}from"./hht3m8p9e0s4tqnx.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";import"./ktw3b87sujui39wx.js";import"./nrrhfi0a0bbsg9w2.js";const Lt=({onClose:l,promptId:e,promptTitle:o,promptSystemHint:s,promptSources:p})=>{const m=Ze(),y=et(),d=Je(),{mutate:n,isPending:i}=xt({mutationFn:h=>_t.safeDelete("/templated_prompts/{prompt_id}",{parameters:{path:{prompt_id:h}}}),onError:()=>{y.danger(m.formatMessage({id:"gYG9AO",defaultMessage:"Failed to delete prompt"}))},onSuccess:()=>{var h,c;ee.logEventWithStatsig("chatgpt_web_prompt_deleted","chatgpt_web_prompt_deleted",{hint:s!=null?s:"none",hasSources:((h=p==null?void 0:p.length)!=null?h:0)>0,sources:p!=null?p:"",sourceCount:(c=p==null?void 0:p.length)!=null?c:0}),l(!1),y.success(m.formatMessage({id:"cptqwY",defaultMessage:"{promptTitle} was deleted"},{promptTitle:o})),d.invalidateQueries({queryKey:["prompt-templates"],exact:!1})}});return t.jsx(tt,{isOpen:!0,onClose:()=>l(!1),title:m.formatMessage({id:"rGrRdA",defaultMessage:"Delete {promptTitle}?"},{promptTitle:o}),testId:"modal-delete-prompt",type:"danger",size:"custom",className:"max-w-[400px] p-2",children:t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"ODmsWc",defaultMessage:"This cannot be undone."})}),t.jsxs("div",{className:"flex flex-row justify-end gap-2",children:[t.jsx(J,{color:"secondary",onClick:()=>l(!1),children:t.jsx(u,Z({},bt.cancelButtonText))}),t.jsx(J,{color:"danger",disabled:i,loading:i,onClick:()=>n(e),children:t.jsx(u,{id:"x3h5Nl",defaultMessage:"Delete"})})]})]})})},Dt=st(()=>He(()=>import("./dt74bs5wyg16icnh.js").then(l=>l._),__vite__mapDeps([0,1])),{loading:l=>at(l)}),Ot=st(()=>He(()=>import("./j0yo6uv6652vva62.js").then(l=>l.yw),__vite__mapDeps([2,1,3,4,5])),{loading:l=>at(l)}),Wt=new Set(["github_sync_connector","github_connector"]),qt={display:"inline",position:"relative",color:"#2F7CF5",borderRadius:"2px",paddingInline:0,paddingBlock:0,lineHeight:"1rem",boxShadow:"0 0 0 2px rgba(47, 124, 245, 0.10)",backgroundColor:"rgba(47, 124, 245, 0.10)",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},Ft=({activeSystemHint:l,selectedSources:e,setSelectedSources:o,selectedMCPSources:s,setSelectedMCPSources:p})=>{const m=n=>{H(n)?p(new Set([...s,n])):o(new Set([...e,n]))},y=n=>{H(n)?p(new Set([...s].filter(i=>i!==n))):o(new Set([...e].filter(i=>i!==n)))},d=n=>{if(H(n)){const h=new Set(s);h.has(n)?h.delete(n):h.add(n),p(h);return}const i=new Set(e);i.has(n)?i.delete(n):i.add(n),o(i)};return t.jsx(At,{clientThreadId:St,activeSystemHint:l,selectedSources:e,selectedMCPSources:s,addSource:m,deleteSource:y,toggleSource:d,connectedOnly:!0,hiddenTypes:Wt,hideMcpConnectors:!0})},Bt=l=>{const e=[];let o=0;return l.replace(Ct,(s,p,m)=>(m>o&&e.push(t.jsx("span",{children:l.slice(o,m)},"txt-".concat(m))),e.push(t.jsx("span",{style:qt,children:s},"var-".concat(m))),o=m+s.length,s)),o<l.length&&e.push(t.jsx("span",{children:l.slice(o)},"tail-".concat(o))),e};function as(l){"use forget";var We,qe,Fe,Be,Ge,ze,Ue,Ye,Ke,$e,Qe;const e=gt.c(124),{onClose:o,prompt:s,referer:p}=l,m=p===void 0?"none":p,y=jt(),d=Ze(),n=et(),{systemHints:i}=yt(),h=Je(),c=wt();let te;e[0]!==h?(te=r=>{h.setQueriesData({queryKey:["prompt-templates"],exact:!1},f=>{if(!f||f.pages.length===0)return f;const[x,...P]=f.pages,Ve=r.id===void 0||r.id==null?null:String(r.id),it=Ve==null?x.prompts:x.prompts.filter(Ee=>Ee.id===void 0||Ee.id==null?!0:String(Ee.id)!==Ve),ct=[r,...it];return Se(Z({},f),{pages:[Se(Z({},x),{prompts:ct}),...P]})})},e[0]=h,e[1]=te):te=e[1];const ke=te,M=!!(s!=null&&s.id),[se,ot]=w.useState(!1),[k,rt]=w.useState((We=s==null?void 0:s.name)!=null?We:""),[b,nt]=w.useState((qe=s==null?void 0:s.prompt)!=null?qe:"");let ae;e[2]!==(s==null?void 0:s.sources)?(ae=new Set((Be=(Fe=s==null?void 0:s.sources)==null?void 0:Fe.filter(Qt))!=null?Be:[]),e[2]=s==null?void 0:s.sources,e[3]=ae):ae=e[3];const[g,Re]=w.useState(ae);let le;e[4]!==(s==null?void 0:s.sources)?(le=new Set((ze=(Ge=s==null?void 0:s.sources)==null?void 0:Ge.filter($t))!=null?ze:[]),e[4]=s==null?void 0:s.sources,e[5]=le):le=e[5];const[_,Ae]=w.useState(le),[j,Le]=w.useState((Ue=s==null?void 0:s.system_hint)!=null?Ue:null),[N,dt]=w.useState(!!((Ye=s==null?void 0:s.shared_to_workspace)!=null?Ye:c!=null&&c.getWorkspaceId())),oe=w.useRef(null);let re;e[6]!==j||e[7]!==i?(re=j&&(i==null?void 0:i.find(r=>r.systemHint===j)),e[6]=j,e[7]=i,e[8]=re):re=e[8];const a=re;let ne;e[9]!==(a==null?void 0:a.systemHint)||e[10]!==d||e[11]!==o||e[12]!==ke||e[13]!==m||e[14]!==_||e[15]!==g||e[16]!==n?(ne={onError:Kt,onSuccess:r=>{var x;n.success(d.formatMessage({id:"CexTPp",defaultMessage:"Prompt created"}));const f=[...g,..._].filter(P=>(a==null?void 0:a.systemHint)===Ie.Research?!0:P!=="web");ee.logEventWithStatsig("chatgpt_web_prompt_created","chatgpt_web_prompt_created",{referer:m,hint:(x=a==null?void 0:a.systemHint)!=null?x:"none",hasSources:f.length>0,sourceCount:f.length,sources:f.join(",")}),ke(r),o(!1)}},e[9]=a==null?void 0:a.systemHint,e[10]=d,e[11]=o,e[12]=ke,e[13]=m,e[14]=_,e[15]=g,e[16]=n,e[17]=ne):ne=e[17];const{mutate:ve,isPending:De}=kt(ne);let de;e[18]!==(a==null?void 0:a.systemHint)||e[19]!==d||e[20]!==o||e[21]!==h||e[22]!==m||e[23]!==_||e[24]!==g||e[25]!==n?(de={onError:Yt,onSuccess:()=>{var f;n.success(d.formatMessage({id:"caj6tF",defaultMessage:"Prompt updated"}));const r=[...g,..._].filter(x=>(a==null?void 0:a.systemHint)===Ie.Research?!0:x!=="web");ee.logEventWithStatsig("chatgpt_web_prompt_edited","chatgpt_web_prompt_edited",{referer:m,hint:(f=a==null?void 0:a.systemHint)!=null?f:"none",hasSources:r.length>0,sourceCount:r.length,sources:r.join(",")}),h.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),o(!1)}},e[18]=a==null?void 0:a.systemHint,e[19]=d,e[20]=o,e[21]=h,e[22]=m,e[23]=_,e[24]=g,e[25]=n,e[26]=de):de=e[26];const{mutate:Me,isPending:Oe}=vt(de);let ie;e[27]!==c||e[28]!==(a==null?void 0:a.systemHint)||e[29]!==ve||e[30]!==s||e[31]!==M||e[32]!==N||e[33]!==k||e[34]!==b||e[35]!==_||e[36]!==g||e[37]!==Me?(ie=()=>{var f;const r={name:k,prompt:b,system_hint:a==null?void 0:a.systemHint,sources:[...g,..._].filter(x=>(a==null?void 0:a.systemHint)===Ie.Research?!0:x!=="web"),shared_to_workspace:c!=null&&c.getWorkspaceId()?N:!1};if(M){if(!(s!=null&&s.id))return;Me({promptId:(f=s==null?void 0:s.id)!=null?f:"",prompt:Z(Z({},s),r)})}else ve(r)},e[27]=c,e[28]=a==null?void 0:a.systemHint,e[29]=ve,e[30]=s,e[31]=M,e[32]=N,e[33]=k,e[34]=b,e[35]=_,e[36]=g,e[37]=Me,e[38]=ie):ie=e[38];const Ne=ie;let C;e[39]!==o?(C=()=>o(!1),e[39]=o,e[40]=C):C=e[40];let T;e[41]!==M?(T=t.jsx("div",{className:"text-token-text-primary text-lg font-medium",children:M?t.jsx(u,{id:"WTfocU",defaultMessage:"Edit prompt"}):t.jsx(u,{id:"ZOolU6",defaultMessage:"Create prompt"})}),e[41]=M,e[42]=T):T=e[42];let ce;e[43]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"xdGuNa",defaultMessage:"Prompts are sequences of text that you can quickly add to your messages. Type / to find and use your prompts in ChatGPT."})}),e[43]=ce):ce=e[43];let E;e[44]!==T?(E=t.jsxs("div",{className:"flex flex-col gap-2",children:[T,ce]}),e[44]=T,e[45]=E):E=e[45];let S;e[46]!==o?(S=t.jsx(Tt,{onClick:()=>o(!1),className:"px-2"}),e[46]=o,e[47]=S):S=e[47];let I;e[48]!==E||e[49]!==S?(I=t.jsxs("div",{className:"flex gap-2",children:[E,S]}),e[48]=E,e[49]=S,e[50]=I):I=e[50];let me;e[51]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"MEkw2s",defaultMessage:"Prompt name"})}),e[51]=me):me=e[51];let R;e[52]!==d?(R=d.formatMessage({id:"E/i+u3",defaultMessage:"Name your prompt"}),e[52]=d,e[53]=R):R=e[53];let fe;e[54]===Symbol.for("react.memo_cache_sentinel")?(fe=r=>rt(r.target.value),e[54]=fe):fe=e[54];let A;e[55]!==k||e[56]!==R?(A=t.jsxs("div",{className:"flex flex-col gap-2",children:[me,t.jsx(It,{autoComplete:"off",name:"prompt-name",className:"w-full bg-transparent",ariaLabel:"Prompt name",placeholder:R,value:k,onChange:fe})]}),e[55]=k,e[56]=R,e[57]=A):A=e[57];let pe;e[58]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("div",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"6XhnsZ",defaultMessage:"Prompt text"})}),e[58]=pe):pe=e[58];let ue;e[59]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsxs("div",{className:"flex flex-col gap-1",children:[pe,t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"MzLGuT",defaultMessage:"Use '{'brackets'}' to create text variables"})})]}),e[59]=ue):ue=e[59];let L;e[60]!==b?(L=Bt(b),e[60]=b,e[61]=L):L=e[61];let D;e[62]!==L?(D=t.jsx("div",{"aria-hidden":!0,className:"text-token-text-primary pointer-events-none absolute inset-0 overflow-hidden px-3 py-2 text-sm leading-5 break-words whitespace-pre-wrap",ref:oe,children:L}),e[62]=L,e[63]=D):D=e[63];let he,xe;e[64]===Symbol.for("react.memo_cache_sentinel")?(he=r=>nt(r.target.value),xe=r=>{oe.current&&(oe.current.scrollTop=r.currentTarget.scrollTop,oe.current.scrollLeft=r.currentTarget.scrollLeft)},e[64]=he,e[65]=xe):(he=e[64],xe=e[65]);let O;e[66]!==d?(O=d.formatMessage({id:"v1n6Wj",defaultMessage:"This is the text that will appear when you @mention your prompt"}),e[66]=d,e[67]=O):O=e[67];let ge;e[68]===Symbol.for("react.memo_cache_sentinel")?(ge={WebkitTextFillColor:"transparent"},e[68]=ge):ge=e[68];let W;e[69]!==b||e[70]!==O?(W=t.jsx(Rt,{autoComplete:"off",name:"prompt-text",value:b,onChange:he,onScroll:xe,placeholder:O,className:"caret-token-text-primary h-40 w-full resize-none rounded-none border-0 bg-transparent px-3 py-2 text-sm leading-5 text-transparent focus:border-0 focus:ring-0",style:ge}),e[69]=b,e[70]=O,e[71]=W):W=e[71];let q;e[72]!==D||e[73]!==W?(q=t.jsxs("div",{className:"flex flex-col gap-2",children:[ue,t.jsxs("div",{className:"border-token-border-default focus-within:border-token-text-primary focus-within:ring-token-text-primary relative overflow-hidden rounded-md border",children:[D,W]})]}),e[72]=D,e[73]=W,e[74]=q):q=e[74];let _e;e[75]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("span",{className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"/EOojc",defaultMessage:"Automatically enable tool"})}),e[75]=_e):_e=e[75];let be;e[76]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsxs("div",{className:"flex items-baseline gap-1",children:[_e,t.jsx("span",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"AS68OR",defaultMessage:"(optional)"})})]}),e[76]=be):be=e[76];let F;e[77]!==a||e[78]!==j||e[79]!==d||e[80]!==se||e[81]!==i?(F=a?t.jsxs("button",{"data-is-selected":!0,className:"bg-token-interactive-bg-accent-muted-hover composer-btn rounded-full p-2 [view-transition-name:var(--vt-composer-active-system-hint-pill)]","aria-label":d.formatMessage({id:"HW9RTL",defaultMessage:"Disable {systemHintName}"},{systemHintName:(Ke=a.shortLabel)!=null?Ke:a.name}),onClick:()=>{Le(null),Re(new Set),Ae(new Set)},children:[t.jsx(lt,{hint:a,isNextToLabel:!0}),t.jsx("span",{className:"mx-1.5 [[data-collapse-labels]_&]:sr-only",children:($e=a.shortLabel)!=null?$e:a.name}),t.jsx(Ot,{})]}):t.jsxs(v.Root,{open:se,onOpenChange:ot,children:[t.jsx(v.Trigger,{className:"composer-btn border-token-border-default! gap-1.5 rounded-full border-1 p-2","data-opened":Mt(se),onClick:Ut,onFocusCapture:zt,children:t.jsxs(t.Fragment,{children:[t.jsx(Dt,{}),t.jsx("span",{children:t.jsx(u,{id:"lhdTHv",defaultMessage:"Select tool"})})]})}),t.jsx(v.Portal,{children:t.jsx(v.Content,{size:"auto",children:t.jsx(v.RadioGroup,{value:j!=null?j:void 0,onValueChange:r=>Le(r),children:i==null?void 0:i.map(Gt)})})})]}),e[77]=a,e[78]=j,e[79]=d,e[80]=se,e[81]=i,e[82]=F):F=e[82];let B;e[83]!==a||e[84]!==_||e[85]!==g?(B=a&&t.jsx(Ft,{activeSystemHint:a,selectedSources:g,setSelectedSources:Re,selectedMCPSources:_,setSelectedMCPSources:Ae}),e[83]=a,e[84]=_,e[85]=g,e[86]=B):B=e[86];let G;e[87]!==F||e[88]!==B?(G=t.jsxs("div",{className:"flex flex-col gap-2",children:[be,t.jsxs("div",{className:"flex gap-2",children:[F,B]})]}),e[87]=F,e[88]=B,e[89]=G):G=e[89];let z;e[90]!==c||e[91]!==d||e[92]!==N?(z=!!(c!=null&&c.getWorkspaceId())&&t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex flex-col",children:[t.jsx("div",{id:"available-to-team-members-label",className:"text-token-text-primary text-sm font-medium",children:t.jsx(u,{id:"YFLYbD",defaultMessage:"Available to team members"})}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(u,{id:"l0fmJX",defaultMessage:"Allow team members at {workspaceName} to find and use this prompt",values:{workspaceName:(Qe=c==null?void 0:c.name)!=null?Qe:d.formatMessage({id:"qt3Hqs",defaultMessage:"your workspace"})}})})]}),t.jsx(Nt,{"aria-labelledby":"available-to-team-members-label",checked:N,disabled:!(c!=null&&c.getWorkspaceId()),onCheckedChange:r=>{dt(r)}})]}),e[90]=c,e[91]=d,e[92]=N,e[93]=z):z=e[93];let U;e[94]!==y||e[95]!==s||e[96]!==o?(U=s?t.jsx(J,{color:"danger-outline",onClick:()=>{var r,f,x,P;return Et(y,Lt,{promptId:(r=s==null?void 0:s.id)!=null?r:"",promptTitle:(f=s==null?void 0:s.name)!=null?f:"",promptSystemHint:(x=s==null?void 0:s.system_hint)!=null?x:null,promptSources:((P=s==null?void 0:s.sources)!=null?P:[]).join(","),onClose:()=>o(!1)})},children:t.jsx(u,{id:"x3h5Nl",defaultMessage:"Delete"})}):t.jsx("div",{className:"flex-1"}),e[94]=y,e[95]=s,e[96]=o,e[97]=U):U=e[97];let Y;e[98]!==o?(Y=()=>o(!1),e[98]=o,e[99]=Y):Y=e[99];let je;e[100]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(u,{id:"ixOzv9",defaultMessage:"Cancel"}),e[100]=je):je=e[100];let K;e[101]!==Y?(K=t.jsx(J,{color:"secondary",onClick:Y,children:je}),e[101]=Y,e[102]=K):K=e[102];const Ce=De||Oe,Te=!k||!b||De||Oe;let ye;e[103]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(u,{id:"vkpL39",defaultMessage:"Save"}),e[103]=ye):ye=e[103];let $;e[104]!==Ne||e[105]!==Ce||e[106]!==Te?($=t.jsx(J,{loading:Ce,disabled:Te,onClick:Ne,children:ye}),e[104]=Ne,e[105]=Ce,e[106]=Te,e[107]=$):$=e[107];let Q;e[108]!==K||e[109]!==$?(Q=t.jsxs("div",{className:"flex items-center gap-2",children:[K,$]}),e[108]=K,e[109]=$,e[110]=Q):Q=e[110];let V;e[111]!==U||e[112]!==Q?(V=t.jsxs("div",{className:"mt-4 flex justify-between gap-2",children:[U,Q]}),e[111]=U,e[112]=Q,e[113]=V):V=e[113];let X;e[114]!==I||e[115]!==A||e[116]!==q||e[117]!==G||e[118]!==z||e[119]!==V?(X=t.jsxs("div",{className:"flex flex-col gap-6",children:[I,A,q,G,z,V]}),e[114]=I,e[115]=A,e[116]=q,e[117]=G,e[118]=z,e[119]=V,e[120]=X):X=e[120];let we;return e[121]!==X||e[122]!==C?(we=t.jsx(tt,{isOpen:!0,onClose:C,testId:"modal-create-prompt",type:"success",size:"custom",className:"relative flex max-w-[520px] flex-col p-2",children:X}),e[121]=X,e[122]=C,e[123]=we):we=e[123],we}function Gt(l){return t.jsx(v.RadioItem,{className:"hover:bg-token-bg-tertiary",color:"default",icon:t.jsx(lt,{hint:l,isNextToLabel:!0}),label:l.name,trailing:t.jsx(v.RadioItemCheck,{}),value:l.systemHint},l.systemHint)}function zt(l){l.stopPropagation()}function Ut(l){l.preventDefault()}function Yt(l){ee.logEventWithStatsig("chatgpt_web_prompt_error","chatgpt_web_prompt_error",{context:"EDIT",detail:l.message})}function Kt(l){ee.logEventWithStatsig("chatgpt_web_prompt_error","chatgpt_web_prompt_error",{context:"CREATE",detail:l.message})}function $t(l){return H(l)}function Qt(l){return!H(l)}export{as as CreatePromptModal};
//# sourceMappingURL=nkzzfmws4g2cwqnd.js.map

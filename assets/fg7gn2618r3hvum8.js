import{b as c,r as p,j as t}from"./i8clt0mfz495j7ii.js";import{gN as f,C as w,b0 as m,R as x,hI as y,gJ as h,gK as L}from"./ghewn7l2ynbm32fm.js";function E({gizmoId:a,fileId:n,fileName:o,onClose:r}){const{data:e,isLoading:l}=c({queryKey:["file-info",n],queryFn:async()=>await x.safeGet("/files/{file_id}/simple",{parameters:{path:{file_id:n},query:{gizmo_id:a}}})}),i=!!(e&&(e.mime_type==="application/pdf"||f(o)==="pdf")),{data:s,isLoading:u}=c({queryKey:["file-preview",n,a,i],queryFn:async()=>{const d=await h(n,a,!1,void 0,i);if(d.status===L.Success)return d.download_url;throw new Error("Failed to download file inline preview")},staleTime:y,enabled:!!e});return p.useEffect(()=>{l||u||e&&!i&&s&&(window.open(s,"_blank"),r())},[e,s,i,r,l,u]),t.jsx(w,{testId:"modal-file-preview",className:"min-h-[90vh] max-w-[75vw] max-w-[1000px]",isOpen:!0,onClose:r,type:"success",title:o,showCloseButton:!0,size:"custom",children:l||u||!i||!s?t.jsx("div",{className:"flex h-full w-full items-center justify-center",children:t.jsx(m,{})}):t.jsx("iframe",{src:s,title:o,height:"100%",width:"100%"})})}export{E as FilePreviewModal};
//# sourceMappingURL=fg7gn2618r3hvum8.js.map

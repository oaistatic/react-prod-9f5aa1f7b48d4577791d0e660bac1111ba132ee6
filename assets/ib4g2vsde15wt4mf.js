var L=Object.defineProperty,w=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var v=(n,e,t)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,x=(n,e)=>{for(var t in e||(e={}))V.call(e,t)&&v(n,t,e[t]);if(q)for(var t of q(e))A.call(e,t)&&v(n,t,e[t]);return n},R=(n,e)=>w(n,B(e));import{A as O,c as k,a4 as D,h as F,r as $,b as I,j as o,M,f as z}from"./i8clt0mfz495j7ii.js";import{$ as G,b0 as K}from"./ghewn7l2ynbm32fm.js";import{a$ as Q,b0 as U}from"./j0yo6uv6652vva62.js";const X=500,H=2,ee=O(function(){"use forget";const e=k.c(36),{processorEntity:t,checkoutSessionId:r,planType:c}=D(),i=F();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={firstRequestAt:Date.now(),pollCount:0,finished:!1,redirected:!1},e[0]=h):h=e[0];const[a,N]=$.useState(h);let u;e[1]!==r||e[2]!==t?(u=["checkoutSession",t,r],e[1]=r,e[2]=t,e[3]=u):u=e[3];let f;e[4]!==r||e[5]!==t||e[6]!==a.pollCount?(f=async()=>{const _=await Q.fetchExistingCheckoutSession(t,r),b=_.status==="complete"||_.status==="expired"||a.pollCount>=H;return N(T=>R(x({},T),{pollCount:T.pollCount+1,finished:b})),_},e[4]=r,e[5]=t,e[6]=a.pollCount,e[7]=f):f=e[7];const j=!a.finished;let y;e[8]!==u||e[9]!==f||e[10]!==j?(y={queryKey:u,queryFn:f,refetchInterval:X,enabled:j},e[8]=u,e[9]=f,e[10]=j,e[11]=y):y=e[11];const{data:s}=I(y);let g;e[12]!==(s==null?void 0:s.status)||e[13]!==r||e[14]!==i||e[15]!==c||e[16]!==t||e[17]!==a.finished||e[18]!==a.redirected?(g=()=>{!a.finished||a.redirected||(N(J),(s==null?void 0:s.status)==="complete"?i({pathname:"/payments/success",search:"?stripe_session_id=".concat(r,"&plan_type=").concat(c,"&processor_entity=").concat(t)}):(s==null?void 0:s.status)==="open"&&i({pathname:U(t,r),search:"",hash:""}))},e[12]=s==null?void 0:s.status,e[13]=r,e[14]=i,e[15]=c,e[16]=t,e[17]=a.finished,e[18]=a.redirected,e[19]=g):g=e[19];let C;e[20]!==s||e[21]!==r||e[22]!==i||e[23]!==c||e[24]!==t||e[25]!==a?(C=[a,s,r,t,c,i],e[20]=s,e[21]=r,e[22]=i,e[23]=c,e[24]=t,e[25]=a,e[26]=C):C=e[26],$.useEffect(g,C);const l=(s==null?void 0:s.status)==="expired";let d;e[27]!==l?(d=!l&&o.jsx(K,{className:"icon-xl"}),e[27]=l,e[28]=d):d=e[28];let p,m;e[29]!==l?(p=o.jsx("span",{className:"text-muted-foreground text-center text-sm",children:l?o.jsx(M,x({},E.errorProcessingPayment)):o.jsx(M,x({},E.processingPayment))}),m=l&&o.jsx(G,{color:"primary",as:"link",to:"/#pricing",children:o.jsx(M,x({},E.returnButtonText))}),e[29]=l,e[30]=p,e[31]=m):(p=e[30],m=e[31]);let P;return e[32]!==d||e[33]!==p||e[34]!==m?(P=o.jsx("div",{className:"flex h-screen flex-col p-4",children:o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-3",children:[d,p,m]})})}),e[32]=d,e[33]=p,e[34]=m,e[35]=P):P=e[35],P});function J(n){return R(x({},n),{redirected:!0})}const E=z({processingPayment:{id:"CheckoutVerifyRoute.processingPayment",defaultMessage:"Processing Payment"},errorProcessingPayment:{id:"CheckoutVerifyRoute.errorProcessingPayment",defaultMessage:"There was an error processing your payment"},returnButtonText:{id:"CheckoutVerifyRoute.returnButtonText",defaultMessage:"Return to ChatGPT"}});export{ee as default};
//# sourceMappingURL=ib4g2vsde15wt4mf.js.map

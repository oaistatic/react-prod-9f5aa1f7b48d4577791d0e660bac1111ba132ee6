const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fg1cwp14kl8llosr.js","assets/i8clt0mfz495j7ii.js","assets/frf0wu8ouyfyu06j.js","assets/3j20em1lilnrpdcm.js","assets/j0wj1aq3scar16h8.js","assets/lj2o58simn9pmtsc.js","assets/e8a1uw0zdlt1m0jy.js","assets/kk2lrj1fitwzfksu.js","assets/jyroje0qaxw6h3z1.js"])))=>i.map(i=>d[i]);
var Y=Object.defineProperty;var k=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var D=(t,e,a)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,z=(t,e)=>{for(var a in e||(e={}))F.call(e,a)&&D(t,a,e[a]);if(k)for(var a of k(e))O.call(e,a)&&D(t,a,e[a]);return t};var B=(t,e)=>{var a={};for(var i in t)F.call(t,i)&&e.indexOf(i)<0&&(a[i]=t[i]);if(t!=null&&k)for(var i of k(t))e.indexOf(i)<0&&O.call(t,i)&&(a[i]=t[i]);return a};import{c as $,e as C,j as s,_,r as g,M as p}from"./i8clt0mfz495j7ii.js";import{bU as U}from"./j0yo6uv6652vva62.js";import{o as b,L as y,h7 as H,ba as G,ff as K,gh as q,e0 as Q,d as j,$ as E,aW as L,aV as M,b0 as Z,oG as X,bw as J}from"./ghewn7l2ynbm32fm.js";import{l as ee,b as te}from"./fhcba4quxj2lit4k.js";import{c as se}from"./pbvsc3do5o365cxq.js";const ae=b(()=>_(()=>import("./fg1cwp14kl8llosr.js"),__vite__mapDeps([0,1])),{loading:t=>y(t)}),ne=b(()=>_(()=>import("./frf0wu8ouyfyu06j.js").then(t=>t._),__vite__mapDeps([2,1])),{loading:t=>y(t)}),ve=t=>{"use forget";var f;const e=$.c(23);let a,i,r,n;e[0]!==t?(f=t,{currentPane:i,popPane:r,PANES:a}=f,n=B(f,["currentPane","popPane","PANES"]),e[0]=t,e[1]=a,e[2]=i,e[3]=r,e[4]=n):(a=e[1],i=e[2],r=e[3],n=e[4]);const o=C();if(i==="overview"){let h;return e[5]!==n?(h=s.jsx(ie,z({},n)),e[5]=n,e[6]=h):h=e[6],h}let d;e[7]!==o?(d=o.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),e[7]=o,e[8]=d):d=e[8];let l;e[9]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(ne,{className:"icon-md text-token-interactive-icon-tertiary-default"}),e[9]=l):l=e[9];let m;e[10]!==r||e[11]!==d?(m=s.jsx("button",{type:"button",onClick:r,className:"bg-token-main-surface-primary hover:bg-token-main-surface-secondary focus-visible:ring-token-text-quaternary dark:hover:bg-token-main-surface-tertiary -ms-1 flex h-8 w-8 items-center justify-center rounded-full focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","aria-label":d,children:l}),e[10]=r,e[11]=d,e[12]=m):m=e[12];let c;e[13]!==a||e[14]!==i||e[15]!==o?(c=o.formatMessage(a[i].name),e[13]=a,e[14]=i,e[15]=o,e[16]=c):c=e[16];let u;e[17]!==c?(u=s.jsx("span",{className:"text-xl font-medium",children:c}),e[17]=c,e[18]=u):u=e[18];let x;return e[19]!==i||e[20]!==m||e[21]!==u?(x=s.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[m,u]},i),e[19]=i,e[20]=m,e[21]=u,e[22]=x):x=e[22],x},ie=t=>{"use forget";const e=$.c(15),{url:a,faviconUrl:i,logoUrl:r,title:n,subtitle:o}=t,d=a!=null?a:"";let l;e[0]!==i||e[1]!==r||e[2]!==n?(l=r?s.jsx("img",{src:r,alt:n,className:"icon rounded-full"}):s.jsx(U,{className:"icon rounded-full",url:i!=null?i:"",size:128,minSize:16,fallback:s.jsx(ae,{className:"text-token-text-tertiary"})}),e[0]=i,e[1]=r,e[2]=n,e[3]=l):l=e[3];let m;e[4]!==n?(m=s.jsx("div",{className:"text-sm font-medium",children:n}),e[4]=n,e[5]=m):m=e[5];let c;e[6]!==l||e[7]!==m?(c=s.jsxs("div",{className:"flex items-center gap-2",children:[l,m]}),e[6]=l,e[7]=m,e[8]=c):c=e[8];let u;e[9]!==o?(u=o&&s.jsx("div",{className:"text-token-text-secondary text-xs",children:o}),e[9]=o,e[10]=u):u=e[10];let x;return e[11]!==d||e[12]!==c||e[13]!==u?(x=s.jsxs(H,{className:"flex min-h-[36px] flex-col justify-center",href:d,target:"_blank",children:[c,u]}),e[11]=d,e[12]=c,e[13]=u,e[14]=x):x=e[14],x},re=["card","shop_pay","us_bank_account"],oe=["payment_element_change_preview_beta_1","prepare_payment_method_beta_1","elements_icon_style_beta_1","elements_address_element_sync_checkbox_beta_1","link_forest_beta_1","ece_prefer_plain_single_row_beta_1","relax_spm_address_validation_beta_1","change_event_improvements_beta_1"],le=15e3;function Se({clientThreadId:t,grandTotal:e,merchantExternalId:a,merchantNetworkId:i,merchantTitle:r,paymentMethodTypes:n,fetchSession:o,children:d}){const{stripeCartSession:l,loading:m,error:c}=de(t,o),u=G(),x=C(),[f,h]=g.useState(null),S=g.useMemo(()=>l!=null&&l.publishable_key?ee(l.publishable_key,{betas:oe}):null,[l==null?void 0:l.publishable_key]),R=g.useMemo(()=>!(l!=null&&l.client_secret)||!(n!=null&&n.length)?null:{mode:"payment",currency:"usd",amount:e,customerSessionClientSecret:l.client_secret,paymentMethodTypes:n.filter(I=>re.includes(I)),paymentMethodOptions:n.includes("shop_pay")?{shop_pay:{shop_id:a}}:void 0,sellerDetails:a&&i&&r?{externalId:a,networkId:i,businessName:r}:void 0,syncAddressCheckbox:{mode:"shipping",formBehavior:"editable"},appearance:ce(u)},[u,a,i,r,n,l==null?void 0:l.client_secret,e]),P=m||!S||!R;return g.useEffect(()=>{if(!P)return;const I=setTimeout(()=>{h(x.formatMessage({id:"Vj32Tb",defaultMessage:"Failed to load cart session (1298). Please refresh the page and try again."}))},le);return()=>clearTimeout(I)},[P,x]),P?d({loadingCartSession:!0,cartLoadError:c!=null?c:f}):s.jsx(te,{stripe:S,options:R,children:d({loadingCartSession:m,cartLoadError:c})})}function ce(t){return{icons:"outline",theme:t?"night":"stripe",labels:"floating",inputs:"condensed",variables:{fontSizeBase:"16px",colorPrimary:t?"white":"black",colorBackground:t?"#2f2f2f":"white",borderRadius:"30px",gridRowSpacing:"8px",gridColumnSpacing:"8px",colorTextSecondary:"#8F8F8F",fontSizeXs:"0.8rem"},rules:{".Input, .PickerItem, .Tab, .AccordionItem, .Dropdown, .Block":{borderRadius:"16px",boxShadow:"none"},".Input":{padding:"12px 16px 10px 16px",fontSize:"1em"},".CheckboxLabel":{fontWeight:"500",fontSize:".9rem",alignItems:"center"},".Label--floating":{padding:"0",fontSize:".75em",marginTop:"-3px"},".AccordionItem--selected":{border:"solid 1px ".concat(t?"white":"black")},".Input:focus":{boxShadow:"none",borderColor:t?"white":"black"},".Label":{fontWeight:"500",fontSize:"14px",marginBottom:"6px",color:"#8F8F8F"}},disableAnimations:!0}}function de(t,e){const a=C(),i=K(t),n=(window&&window.location.href).includes("/share/"),[o,d]=g.useState(null),[l,m]=g.useState(!0),[c,u]=g.useState(null),x=q(async()=>{try{const{error:f,client_secret:h,publishable_key:S}=await e();return f?u(f):h&&S?d({client_secret:h,publishable_key:S}):u(a.formatMessage({id:"imEcZX",defaultMessage:"Failed to load cart session (1300)"}))}catch(f){return u(f instanceof Error?f.message:a.formatMessage({id:"S86mYy",defaultMessage:"Failed to load cart session (1301)"}))}finally{m(!1)}});return g.useEffect(()=>{if(!i&&!n){u(a.formatMessage({id:"/zl1B7",defaultMessage:"Failed to load cart session (1299). Please refresh the page and try again."}));return}x()},[]),{stripeCartSession:o,loading:l,error:c}}const N=200,T=150;function Ne(t){const[e,a]=g.useState([t]),[i,r]=g.useState(null),[n,o]=g.useState("right"),d=e[e.length-1],l=g.useCallback(u=>{o("right"),r(d),a(x=>[...x,u]),setTimeout(()=>r(null),N+T)},[d]),m=g.useCallback(()=>{e.length<=1||(o("left"),r(d),a(u=>u.slice(0,u.length-1)),setTimeout(()=>r(null),N+T))},[d,e.length]),c=g.useCallback(()=>{e.length<=1||(o("left"),r(d),a([e[0]]),setTimeout(()=>r(null),N+T))},[d,e]);return{currentPane:d,exitingPane:i,direction:n,pushPane:l,popPane:m,resetPanes:c}}function Me({renderPane:t,className:e,paneStack:a,useDelayedEnteringPane:i,alwaysMountedPanes:r=[]}){const{currentPane:n,exitingPane:o,direction:d}=a,l=Q(),[m,c]=g.useState(!0),u=g.useRef(n),x=g.useRef(null);return g.useEffect(()=>{if(u.current!==n)if(c(!1),!l&&i){const f=setTimeout(()=>{c(!0),u.current=n},N+50);return()=>clearTimeout(f)}else c(!0),u.current=n},[n,l,i]),g.useEffect(()=>{setTimeout(()=>{var f;x.current&&((f=x.current)==null||f.scrollTo({top:0}))},N)},[o]),s.jsxs("div",{className:j("relative overflow-x-clip",e),children:[o!=null&&!l&&!r.includes(o)&&s.jsx("div",{className:j("absolute inset-0 overflow-y-auto",w("exit",d)),children:t(o)}),!r.includes(n)&&s.jsx("div",{className:j("absolute inset-0 overflow-y-auto",u.current!==n&&!l?w("enter",d):""),children:m&&t(n)}),r.map(f=>{const h=f===o;return s.jsx("div",{ref:h?x:void 0,className:j("absolute inset-0 overflow-y-auto",f===n||f===o?"":"hidden",o===f&&!l&&w("exit",d),n===f&&u.current!==n&&!l&&w("enter",d)),children:t(f)},"persist-".concat(String(f)))})]})}function w(t,e){return t==="enter"?e==="right"?"animate-[slide-in-right_0.2s_forwards]":"animate-[slide-in-left_0.2s_forwards]":e==="right"?"animate-[slide-out-left_0.2s_forwards]":"animate-[slide-out-right_0.2s_forwards]"}const ue=b(()=>_(()=>import("./3j20em1lilnrpdcm.js").then(t=>t._),__vite__mapDeps([3,1])),{loading:t=>y(t)}),ke=({message:t})=>s.jsxs("div",{className:"bg-token-bg-status-error text-token-interactive-label-danger-secondary-default flex items-center rounded-lg px-3 py-2 text-sm",children:[s.jsx(ue,{className:"me-2 shrink-0"}),t]}),A=({messages:t,intervalMs:e=4e3,repeat:a})=>{const[i,r]=g.useState(0);return g.useEffect(()=>{if(t.length<=1)return;const n=setInterval(()=>{r(o=>!a&&o>=t.length-1?(clearInterval(n),o):(o+1)%t.length)},e);return()=>clearInterval(n)},[t.length,e,a]),s.jsx(E,{contentsFullWidth:!0,fullWidth:!0,disabled:!0,className:"h-10 text-base",children:s.jsx("div",{className:"relative h-6 w-full overflow-hidden",children:s.jsx(L,{initial:!1,children:s.jsxs(M.span,{initial:{y:"100%",opacity:0},animate:{y:"0%",opacity:1},exit:{y:"-100%",opacity:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center",children:[s.jsx(Z,{className:"me-2"}),t[i]]},i)})})})},we=({isSubmitting:t,isUpdating:e,isDisabled:a,merchantTitle:i,hasValidPaymentMethod:r,onClickPay:n,pushPane:o,expressCheckoutElement:d,expressCheckoutElementReady:l})=>{const m=g.useMemo(()=>me(i),[i]),c=t?s.jsx(A,{messages:m}):s.jsx(E,{fullWidth:!0,disabled:a,onClick:n,className:"h-10 px-6",contentWrapperClassName:"w-full min-w-0",children:s.jsx("span",{className:"truncate",children:s.jsx(p,{id:"BbrtuK",defaultMessage:"Pay {merchant}",values:{merchant:i}})})}),u=s.jsxs("div",{className:"flex min-h-[104px] w-full flex-col gap-2 overflow-hidden pt-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(L,{initial:!1,children:!l&&!t&&s.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0",children:s.jsx(A,{messages:[s.jsx(p,{id:"4NPTWv",defaultMessage:"Loading payment methods"},"loading")]})},"working")}),s.jsx(M.div,{initial:{opacity:0},animate:{opacity:l?1:0},transition:{opacity:{duration:.3}},style:{pointerEvents:l?"auto":"none"},className:j(t&&"hidden"),children:d},"express")]}),s.jsx("div",{className:"flex grow place-items-end",children:t?s.jsx(A,{messages:m}):s.jsx(E,{fullWidth:!0,color:"ghost",className:"border-token-border-light h-10 rounded-full border text-base",onClick:()=>o("paymentMethod"),children:s.jsx(p,{id:"add-card",defaultMessage:"Pay another way"})})})]});return s.jsx("div",{className:j("pt-4 transition-opacity duration-300",e&&"pointer-events-none opacity-30 [&_*]:pointer-events-none"),children:r?c:u})},me=t=>[s.jsx(p,{id:"RHR6oM",defaultMessage:"Talking to {store}",values:{store:t}},"working"),s.jsx(p,{id:"QGko3r",defaultMessage:"Still working"},"talking"),s.jsx(p,{id:"D8fGfD",defaultMessage:"Finalizing details"},"securing")],Ee=({text:t,className:e="",duration:a=.15})=>{const i=g.useMemo(()=>[...t].map((r,n)=>({key:"".concat(n,"-").concat(r),char:r,delay:Math.random()*.4})),[t]);return s.jsx("span",{className:"perspective-1000 inline-block ".concat(e),children:i.map(({key:r,char:n,delay:o},d)=>s.jsxs(M.span,{layout:!0,transition:{layout:{type:"spring",stiffness:320,damping:30,duration:150}},className:"relative inline-block align-baseline",children:[s.jsx("span",{className:"invisible",children:n===" "?" ":n}),s.jsx(L,{initial:!1,children:s.jsx(M.span,{className:"absolute inset-0 inline-block will-change-transform",initial:{rotateX:90,opacity:0,translateY:"0.2em"},animate:{rotateX:0,opacity:1,translateY:0},exit:{rotateX:-90,opacity:0,translateY:"-0.2em"},transition:{duration:a,ease:"easeInOut",delay:o},children:n===" "?" ":n},r)})]},d))})},fe=b(()=>_(()=>import("./j0wj1aq3scar16h8.js").then(t=>t._),__vite__mapDeps([4,1])),{loading:t=>y(t)}),W=b(()=>_(()=>import("./lj2o58simn9pmtsc.js").then(t=>t._),__vite__mapDeps([5,1])),{loading:t=>y(t)}),ge=b(()=>_(()=>import("./e8a1uw0zdlt1m0jy.js").then(t=>t._),__vite__mapDeps([6,1])),{loading:t=>y(t)}),V=b(()=>_(()=>import("./kk2lrj1fitwzfksu.js").then(t=>t._),__vite__mapDeps([7,1])),{loading:t=>y(t)}),xe=b(()=>_(()=>import("./jyroje0qaxw6h3z1.js").then(t=>t._),__vite__mapDeps([8,1])),{loading:t=>y(t)}),v=({onClick:t,className:e="",icon:a,primaryText:i,secondaryText:r,disabled:n,showChevron:o=!0})=>s.jsxs("button",{type:"button",disabled:n,className:j("bg-token-bg-elevated-primary flex min-h-[62px] w-full items-center justify-between rounded px-1 py-0 select-none",e,!t&&"cursor-default"),onClick:t,style:{boxShadow:"none"},children:[s.jsxs("div",{className:"flex items-center gap-3.5 py-3",children:[a,s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"flex items-center gap-2 text-sm font-medium",children:i}),r&&s.jsx("span",{className:"text-token-text-secondary text-[13px] leading-tight",children:r})]})]}),o&&s.jsx(xe,{className:"text-token-text-tertiary icon-lg"})]}),Pe=({onClick:t,isComplete:e,icon:a,label:i,sublabel:r,isLoading:n})=>n?s.jsx(v,{disabled:!0,icon:s.jsx(V,{className:"icon-lg"}),primaryText:s.jsx(X,{index:1,width:100,heightSize:"sm",className:"min-w-28"})}):s.jsx(v,{onClick:t,icon:e&&a?s.jsx(J,{svgString:a==null?void 0:a.outerHTML,className:"icon-lg"}):s.jsx(V,{className:"icon-lg"}),primaryText:e?i:s.jsx(p,{id:"nO5Crd",defaultMessage:"Add payment method"}),secondaryText:e?r:void 0}),Ie=({isLoading:t,onClick:e,name:a,addressLine1:i,addressLine2:r,city:n,state:o,isComplete:d})=>t?s.jsx(v,{disabled:!0,icon:s.jsx(W,{className:"icon-lg"}),primaryText:s.jsx(X,{index:1,width:100,heightSize:"sm",className:"min-w-28"})}):s.jsx(v,{onClick:e,icon:s.jsx(W,{className:"icon-lg"}),primaryText:d?s.jsx(s.Fragment,{children:a&&s.jsx("span",{children:a})}):s.jsx(p,{id:"BlMnQg",defaultMessage:"Add shipping address"}),secondaryText:d?s.jsx(p,{id:"XZ62ju",defaultMessage:"{line1}{line2}{city}, {state}",values:{line1:i?"".concat(i,", "):"",line2:r?"".concat(r,", "):"",city:n||"",state:o||""}}):void 0}),Te=({emailAddress:t})=>s.jsx(v,{onClick:void 0,icon:s.jsx(ge,{className:"icon-lg"}),showChevron:!1,primaryText:s.jsx(p,{id:"xNqXJN",defaultMessage:"Digital Delivery"}),secondaryText:s.jsx(p,{id:"a8C3IV",defaultMessage:"Email to {emailAddress}",values:{emailAddress:t}})}),Ae=({method:t,onClick:e})=>s.jsx(v,{onClick:e,icon:s.jsx(fe,{className:"icon-lg"}),primaryText:t.title,secondaryText:t.subtitle});function Ce(t,e,a){var i,r,n,o;return{name:t,line_one:(i=e.line1)!=null?i:void 0,line_two:e.line2,city:(r=e.city)!=null?r:"",state:(n=e.state)!=null?n:"",postal_code:(o=e.postal_code)!=null?o:"",country:e.country,phone_number:a}}async function Le({stripe:t,elements:e,intl:a,billingName:i,billingEmail:r,isExpressCheckout:n}){var l,m;if(!n){const c=await e.submit();if(c!=null&&c.error)return{isError:!0,action:"payment_failed",reason:"stripe_payment_submit_failed",uiMessage:(l=c.error.message)!=null?l:a.formatMessage({id:"Fken/H",defaultMessage:"Failed to submit payment (1341)"}),internalMessage:c.error.message?"".concat(c.error.message," (").concat(c.error.code,")"):void 0,extraLogData:{error_message:c.error.message,error_code:c.error.code}}}const{error:o,paymentMethod:d}=await t.preparePaymentMethod({elements:e,params:{allow_redisplay:"always",billing_details:{name:i,email:r}}});return o?{isError:!0,action:"payment_failed",reason:"stripe_prepare_payment_method_failed",uiMessage:(m=o.message)!=null?m:a.formatMessage({id:"bUeW4/",defaultMessage:"Failed to submit payment (1342)"}),internalMessage:String(o),extraLogData:{error_message:o}}:d}const Re=se({animationLoader:()=>_(()=>import("./g7ok40ush52euab4.js"),[]),StaticIcon:()=>s.jsx(s.Fragment,{})}),De=({onClick:t,isDisabled:e=!1,isSaving:a=!1})=>s.jsx(E,{fullWidth:!0,color:"primary",onClick:t,disabled:e,className:"h-10",children:a?s.jsx(p,{id:"WmDyLh",defaultMessage:"Saving..."}):s.jsx(p,{id:"8jETK0",defaultMessage:"Continue"})});export{ke as C,Te as D,Pe as P,Ee as R,ve as S,Re as a,we as b,De as c,Se as d,Me as e,Ie as f,Ae as g,Ce as m,Le as p,Ne as u};
//# sourceMappingURL=bcsmd88fr52ce3nx.js.map

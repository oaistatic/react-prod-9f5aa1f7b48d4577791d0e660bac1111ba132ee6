const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jyroje0qaxw6h3z1.js","assets/i8clt0mfz495j7ii.js","assets/frf0wu8ouyfyu06j.js","assets/e23v0up48ofc1v2q.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/rsi9kppw43ykrsgk.js"])))=>i.map(i=>d[i]);
var we=Object.defineProperty;var ae=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var oe=(e,s,n)=>s in e?we(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,te=(e,s)=>{for(var n in s||(s={}))ve.call(s,n)&&oe(e,n,s[n]);if(ae)for(var n of ae(s))je.call(s,n)&&oe(e,n,s[n]);return e};import{c as Se,r as i,j as t,_ as K,e as q,f as ue,M as ie}from"./i8clt0mfz495j7ii.js";import{R as Ee,A as Ne,u as me,aK as ke,P as D,mO as Ce,cN as Pe,cJ as le,bN as Ae,dK as Me,dY as Le,o as X,L as B,d as se,aW as Y,aV as W,$ as F,bi as Ie}from"./ghewn7l2ynbm32fm.js";import{s as V,R as Te}from"./m33zu9g0u0zd5b6m.js";import{aS as pe,aT as fe,gN as xe,d5 as Re,ic as Oe,mm as De,cC as ze,mn as $e,mo as Fe}from"./j0yo6uv6652vva62.js";import{M as Ue,O as We}from"./ddoygll5qa9ks6q8.js";async function Ve(e,s){try{return(await Ee.safePost("/onboarding/steps",{requestBody:{main_usages:e,variant:s},authOption:Ne.SendIfAvailable})).steps}catch(n){return[]}}function Ke(){"use forget";var v,R,c,p;const e=Se.c(16),s=me(),{markAsViewed:n,eligible:m,isLoading:r}=pe(fe.CreateExampleChatsOnboarding);let o;e[0]!==s?(o=xe(s,!1),e[0]=s,e[1]=o):o=e[1];const u=o,a=i.useRef(!1);let l;e[2]!==s?(l=ke(s),e[2]=s,e[3]=l):l=e[3];const{session:x}=l,b=(R=(v=x==null?void 0:x.user)==null?void 0:v.id)!=null?R:void 0,w=(p=(c=x==null?void 0:x.account)==null?void 0:c.id)!=null?p:void 0;let M;e[4]!==w||e[5]!==s||e[6]!==m||e[7]!==r||e[8]!==n||e[9]!==u||e[10]!==b?(M=_=>{!m||r||a.current||(a.current=!0,n(),D.logEventWithStatsig("Onboarding: Create Example Chats","chatgpt_onboarding_flow_create_example_chats"),Promise.all(_.map(f=>{var C;if(f.step_type==="usage_question")return Promise.resolve();const j=f.step_metadata;f.step_type!=="dalle"&&u.get("use_dynamic_response",!1)&&j!=null&&j.onboarding&&(delete j.onboarding.system_hints,delete j.onboarding.hardcoded_response);const N=Ce();return Pe.initThread({clientThreadId:N,conversationMode:{kind:le.PrimaryAssistant},userId:b,accountId:w,disableConversationNavigation:!0}),Re({conversation:Ae(s,N),eventSource:"url",promptMessage:Me(f.step_prompt,j!=null?j:void 0,{real_author:Le.Onboarding}),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:le.PrimaryAssistant},systemHints:(C=j==null?void 0:j.onboarding)==null?void 0:C.system_hints},skipNotification:!0})})).catch(qe))},e[4]=w,e[5]=s,e[6]=m,e[7]=r,e[8]=n,e[9]=u,e[10]=b,e[11]=M):M=e[11];const I=M;let h;return e[12]!==m||e[13]!==r||e[14]!==I?(h={eligible:m,isLoading:r,createExampleChats:I},e[12]=m,e[13]=r,e[14]=I,e[15]=h):h=e[15],h}function qe(){D.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_creating_example_chats"})}const Xe=X(()=>K(()=>import("./jyroje0qaxw6h3z1.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>B(e)});function Be({item:e,onClick:s}){var n;return t.jsx("li",{className:"first:border-t-0",children:t.jsxs("button",{className:"hover:bg-token-interactive-bg-secondary-hover flex w-full cursor-pointer items-start gap-3 rounded-2xl px-4 py-4 text-start sm:px-6",onClick:m=>s(m,e),children:[t.jsx("div",{className:"mt-0.5 text-xl",children:e.iconImageUrl?t.jsx("img",{src:e.iconImageUrl,alt:e.title,className:"h-6 w-6 rounded-full"}):e.icon?t.jsx("span",{"aria-hidden":!0,children:e.icon}):t.jsx(Oe,{category:(n=e.category)!=null?n:"onboarding",useV2Colors:!0})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-token-text-primary text-base font-medium",children:e.title}),t.jsx("div",{className:"text-token-text-secondary mt-1 text-sm leading-5",children:e.body})]}),t.jsx(Xe,{className:"icon mt-0.5 shrink-0 opacity-60"})]})})}function ge({onAutoAdvance:e,enabled:s,delayMs:n=5e3,idleRestartMs:m=400,elementRef:r,dependencies:o=[]}){const u=i.useRef(null),a=i.useRef(null),l=()=>{u.current!=null&&(window.clearTimeout(u.current),u.current=null),a.current!=null&&(window.clearTimeout(a.current),a.current=null)};i.useEffect(()=>{if(l(),!!s)return u.current=window.setTimeout(()=>{e()},n),l},[s,n,e,...o]),i.useEffect(()=>{if(!s)return;const x=r==null?void 0:r.current,b=x!=null?x:window,w=()=>{u.current!=null&&(window.clearTimeout(u.current),u.current=null),a.current!=null&&window.clearTimeout(a.current),a.current=window.setTimeout(()=>{s&&(u.current!=null&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{e()},n))},m)};return b.addEventListener("scroll",w,{passive:!0}),b.addEventListener("wheel",w,{passive:!0}),()=>{b.removeEventListener("scroll",w),b.removeEventListener("wheel",w),l()}},[s,n,m,e,r==null?void 0:r.current,...o])}const Ge=X(()=>K(()=>import("./jyroje0qaxw6h3z1.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>B(e)}),He=X(()=>K(()=>import("./frf0wu8ouyfyu06j.js").then(e=>e._),__vite__mapDeps([2,1])),{loading:e=>B(e)}),Je=X(()=>K(()=>import("./e23v0up48ofc1v2q.js").then(e=>e._),__vite__mapDeps([3,1])),{loading:e=>B(e)}),G=ue({cardsAriaLabel:{id:"prompt-new-user-onboarding.cards-aria-label",defaultMessage:"Starter examples"},dotsAriaLabel:{id:"prompt-new-user-onboarding.dots-aria-label",defaultMessage:"Card {current} of {total}"},prevCardAriaLabel:{id:"prompt-new-user-onboarding.prev-card-aria-label",defaultMessage:"Previous idea"},nextCardAriaLabel:{id:"prompt-new-user-onboarding.next-card-aria-label",defaultMessage:"Next idea"}}),Ye=60,he=5e3,_e=400;function Ze({items:e,onSelect:s,onSubmit:n,className:m}){const r=q(),o=i.useRef(null),u=i.useRef(null),a=i.useRef(null),[l,x]=i.useState(0),[b,w]=i.useState(0),M=i.useRef({vw:0,paddingLeft:0,gapPx:0,cardWidth:0,slotWidth:1,centerTarget:0,s:0}),I=e[l];i.useEffect(()=>{s(I,l)},[s,I,l]),i.useEffect(()=>{var p;const c=e[l];c&&D.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:l,prompt_id:(p=c.id)!=null?p:String(l)})},[e,l]),i.useEffect(()=>{const c=o.current;if(!c)return;let p=null,_=c.scrollLeft,f=performance.now();const j=160,N=y=>{const P=a.current;P&&(P.style.transform="translate3d(".concat(y,"px, 0, 0)"))},C=()=>{const{vw:y,paddingLeft:P,slotWidth:g,centerTarget:k,s:A,cardWidth:z}=M.current,d=(c.scrollLeft+y/2-P-z/2)/(g||1),E=Math.max(0,Math.min(e.length-1,d)),T=Math.round(E);x($=>$!==T?T:$);const O=E*(v+A)+v/2;N(k-O)},L=()=>{p=null,C();const y=performance.now(),P=c.scrollLeft;Math.abs(P-_)>.1&&(f=y,_=P),y-f<j&&(p=window.requestAnimationFrame(L))},S=()=>{p==null&&(_=c.scrollLeft,f=performance.now(),p=window.requestAnimationFrame(L))};return C(),c.addEventListener("scroll",S,{passive:!0}),c.addEventListener("wheel",S,{passive:!0}),()=>{c.removeEventListener("scroll",S),c.removeEventListener("wheel",S),p!=null&&window.cancelAnimationFrame(p)}},[e.length]),i.useEffect(()=>{const c=o.current,p=u.current;if(!c||!p)return;const _=()=>{const f=c.getBoundingClientRect(),j=p.getBoundingClientRect(),N=f.width,C=window.getComputedStyle(c),L=parseFloat(C.paddingLeft||"0"),S=parseFloat((C.columnGap||C.gap||"0").toString())||0,y=Math.max(0,N-2*L),P=y+S,g=Math.max(0,N/2-v/2-Ye),k=f.left-j.left+N/2;M.current={vw:N,paddingLeft:L,gapPx:S,cardWidth:y,slotWidth:P,centerTarget:k,s:g},w(g);const A=(c.scrollLeft+N/2-L-y/2)/(P||1),z=Math.max(0,Math.min(e.length-1,A)),d=Math.round(z);x(O=>O!==d?d:O);const E=z*(v+g)+v/2,T=a.current;T&&(T.style.transform="translate3d(".concat(k-E,"px, 0, 0)"))};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[e.length]);const h=c=>{const p=o.current;if(!p)return;const f=p.querySelectorAll('li[data-card="true"]')[c];f&&f.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})};ge({onAutoAdvance:()=>{const c=(l+1)%e.length;h(c)},enabled:e.length>1,delayMs:he,idleRestartMs:_e,elementRef:o,dependencies:[l,e.length,h]});const v=180,R=i.useMemo(()=>{const c=Math.max(0,l-1),p=Math.min(e.length-1,l+1);return e.map((_,f)=>{var S,y;if(f<c||f>p)return null;const j=(S=_.id)!=null?S:f,N=f===l,C=N?1:.9,L=N?1:.5;return t.jsx("div",{className:"pointer-events-none flex items-center justify-center",style:{position:"absolute",top:0,left:f*(v+b),height:v,width:v,transform:"scale(".concat(C,")"),opacity:L,transition:"transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity 300ms cubic-bezier(0.2, 0.8, 0.2, 1)",willChange:"transform, opacity"},children:_.iconImageUrl||_.coverImageUrl?t.jsx("img",{src:(y=_.iconImageUrl)!=null?y:_.coverImageUrl,alt:"",className:"rounded-3xl",style:{height:v,width:v}}):t.jsx("div",{className:"flex items-center justify-center text-3xl",style:{height:v,width:v},children:_.icon})},j)})},[e,l,b]);return t.jsx("div",{ref:u,className:se(m,"relative"),children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 overflow-hidden",style:{height:v},"aria-hidden":!0,children:t.jsx("div",{ref:a,className:"pointer-events-none absolute start-0 top-0",style:{height:v,willChange:"transform"},"aria-hidden":!0,children:R})}),t.jsx("ul",{ref:o,className:"no-scrollbar flex max-h-full snap-x snap-mandatory scroll-ps-5 scroll-pe-5 gap-4 overflow-x-auto scroll-smooth px-5 pb-10","aria-label":r.formatMessage(G.cardsAriaLabel),children:e.map((c,p)=>{var _;return t.jsx("li",{"data-card":"true",className:"max-h-full shrink-0 snap-center [scroll-snap-stop:always]",children:t.jsx("div",{className:se("relative h-full w-[calc(100vw-2.5rem)] rounded-3xl text-start sm:w-[260px]","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2"),style:{"--accent":c.accentColor},children:t.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[t.jsx("div",{className:"relative",style:{height:v,width:v},"aria-hidden":!0}),t.jsx("div",{className:"text-token-text-primary text-center text-2xl leading-tight font-medium sm:text-xl",children:c.title}),t.jsx(be,{prompt:c.prompt||c.body,onSubmit:f=>n(f,c,p)})]})})},(_=c.id)!=null?_:p)})}),t.jsx("div",{className:"mt-2 flex items-center justify-center gap-2 pb-4 sm:hidden",children:e.map((c,p)=>t.jsx("button",{"aria-label":r.formatMessage(G.dotsAriaLabel,{current:p+1,total:e.length}),"aria-current":l===p,className:se("h-2 w-2 rounded-full bg-current transition-colors",l===p?"text-token-text-primary":"bg-token-bg-secondary"),onClick:()=>h(p)},p))})]})})}function Qe({items:e,onSelect:s,onSubmit:n,className:m}){var b;const[r,o]=i.useState(0),[u,a]=i.useState(0),l=e[r],x=e[u];return i.useEffect(()=>{s(l,r)},[s,l,r]),i.useEffect(()=>{var M;const w=e[r];w&&D.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:r,prompt_id:(M=w.id)!=null?M:String(r)})},[e,r]),t.jsx("div",{className:m,children:t.jsxs("div",{className:"tall:gap-8 flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Y,{mode:"sync",children:x&&t.jsx(W.div,{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 start-1/2 top-1/2 -z-10 h-[160%] w-[100%] -translate-x-1/2 -translate-y-1/2",initial:{opacity:0},animate:{opacity:.2},exit:{opacity:0},transition:{duration:.6,ease:[.2,.8,.2,1]},style:{backgroundImage:"radial-gradient(closest-side, ".concat(x.accentColor," 0%, transparent 80%)")}},(b=x.id)!=null?b:u)}),t.jsx(tt,{items:e,activeIndex:r,onWillChange:w=>{a(w)},onChange:w=>{o(w)}})]}),x&&t.jsx(Y,{mode:"wait",children:t.jsxs(W.div,{className:"flex max-w-[320px] flex-col items-center gap-4",initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.3,ease:[.2,.8,.2,1]}},exit:{opacity:0,y:8,transition:{duration:.3,ease:[.2,.8,.2,1]}},children:[t.jsx("div",{className:"text-token-text-primary text-2xl leading-tight font-medium sm:text-xl",children:x.title}),t.jsx("div",{className:"sm:min-h-24",children:t.jsx(be,{prompt:x.prompt||x.body,onSubmit:w=>n(w,x,u)})})]},u)})]})})}const re=228,ce=190,et=160,de=180,ne=350;function tt({items:e,activeIndex:s,onChange:n,onWillChange:m}){const r=q(),o=e.length,[u,a]=i.useState(null),[l,x]=i.useState("idle"),[b,w]=i.useState(!1),M=i.useRef(null),I=i.useRef(null);i.useEffect(()=>()=>{M.current!=null&&window.clearTimeout(M.current),I.current!=null&&window.cancelAnimationFrame(I.current)},[]);const[h,v]=i.useState(re);i.useEffect(()=>{const d=()=>{const E=window.innerHeight||800,O=(Math.max(600,Math.min(800,E))-600)/200,$=Math.round(ce+(re-ce)*O);v($)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const R=h/re,c=Math.round(et*R),p=h/c,_=(h+c)/2+de,f=(d,E)=>(d%E+E)%E,j=f(s-1,o),N=f(s+1,o),C=f(s-2,o),L=f(s+2,o),S=i.useCallback(d=>{if(b||o<=1)return;w(!0),a(d),x("prepare");const E=f(d==="right"?s+1:s-1,o);m==null||m(E),I.current=window.requestAnimationFrame(()=>{I.current=window.requestAnimationFrame(()=>{x("slide"),M.current=window.setTimeout(()=>{a(null),x("idle"),w(!1),n(f(d==="right"?s+1:s-1,o))},ne)})})},[b,o,s,m,n]);if(ge({onAutoAdvance:()=>S("right"),enabled:o>1&&!b,delayMs:he,idleRestartMs:_e,dependencies:[s,S,b]}),o===0)return null;const y=[-2,-1,0,1,2].map(d=>d*_),P=[{key:"left-".concat(j),index:j,slot:1},{key:"center-".concat(s),index:s,slot:2},{key:"right-".concat(N),index:N,slot:3}];let g=P;if(u==="right"){const d=[{key:"farRight-".concat(L),index:L,slot:4,fadeIn:!0}];g=[...P,...d]}else u==="left"&&(g=[...[{key:"farLeft-".concat(C),index:C,slot:0,fadeIn:!0}],...P]);const k=d=>{if(u==null||l==="idle"||l==="prepare")return y[d];if(u==="right"){const E=Math.max(d-1,0);return y[E]}else{const E=Math.min(d+1,4);return y[E]}},A=(d,E)=>{const T=k(d),O=d===2?30:d===1||d===3?20:10,$=!b&&o>1&&(d===1||d===3),H=T===y[2],Z=T===y[1]||T===y[3],Q=c,ee=H?p:1,J=H?1:Z?.5:0;return{x:T,z:O,cardSize:Q,scale:ee,opacity:E&&l==="prepare"?0:J,isDisabled:!$}},z=d=>{d.key==="ArrowLeft"?(d.preventDefault(),S("left")):d.key==="ArrowRight"&&(d.preventDefault(),S("right"))};return t.jsxs("div",{className:"relative flex w-full items-center justify-center py-2 outline-none",tabIndex:0,"aria-label":r.formatMessage(G.cardsAriaLabel),onKeyDown:z,children:[t.jsx("div",{className:"relative overflow-hidden",style:{height:h,width:3*h+2*de},children:g.map(({key:d,index:E,slot:T,fadeIn:O})=>{const{x:$,z:H,cardSize:Z,scale:Q,opacity:ee,isDisabled:J}=A(T,O);return t.jsx(st,{item:e[E],translateX:$,zIndex:H,onClick:()=>S(T===1?"left":"right"),cardSize:Z,scale:Q,opacity:ee,isDisabled:J},d)})}),t.jsx(F,{color:"ghost","aria-label":r.formatMessage(G.prevCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% - ".concat(h/2+20+36,"px)")},onClick:()=>S("left"),disabled:b||o<=1,icon:He}),t.jsx(F,{color:"ghost","aria-label":r.formatMessage(G.nextCardAriaLabel),className:"absolute! top-1/2 z-20 h-9 w-9 -translate-y-1/2",style:{left:"calc(50% + ".concat(h/2+20,"px)")},onClick:()=>S("right"),disabled:b||o<=1,icon:Ge})]})}function st({item:e,translateX:s,zIndex:n,onClick:m,cardSize:r,scale:o,opacity:u,isDisabled:a}){var l;return t.jsx("button",{className:"absolute start-1/2 top-1/2 flex items-center justify-center rounded-3xl",style:{transform:"translate3d(-50%, -50%, 0) translate3d(".concat(s,"px, 0, 0) scale(").concat(o,")"),height:"".concat(r,"px"),width:"".concat(r,"px"),transition:"transform ".concat(ne,"ms cubic-bezier(0.2, 0.8, 0.2, 1), opacity ").concat(ne,"ms cubic-bezier(0.2, 0.8, 0.2, 1)"),willChange:"transform, opacity",opacity:u,zIndex:n},onClick:m,disabled:a,children:e.iconImageUrl||e.coverImageUrl?t.jsx("img",{src:(l=e.iconImageUrl)!=null?l:e.coverImageUrl,alt:"",className:"rounded-3xl",style:{maxHeight:"".concat(r,"px"),maxWidth:"".concat(r,"px")}}):t.jsx("div",{className:"text-6xl","aria-hidden":!0,children:e.icon})})}function be({prompt:e,onSubmit:s}){const n=q();return t.jsxs("div",{className:"group bg-token-bg-elevated-primary border-token-border-light inline-flex items-end justify-center gap-3 self-stretch rounded-3xl border p-3 ps-4 shadow-xl backdrop-blur-[20px]",children:[t.jsx("div",{className:"text-token-text-primary flex-1 justify-end text-sm leading-tight font-normal duration-300 sm:opacity-65 sm:group-hover:opacity-100",children:e}),t.jsx(F,{icon:Je,size:"small",label:n.formatMessage(V.tryNow),onClick:s,className:"h-7 w-7 transition-all duration-300 sm:opacity-65 sm:group-hover:opacity-100"})]})}const rt=X(()=>K(()=>import("./ghewn7l2ynbm32fm.js").then(e=>e.vJ),__vite__mapDeps([4,1,5])),{loading:e=>B(e)}),nt=X(()=>K(()=>import("./rsi9kppw43ykrsgk.js").then(e=>e._),__vite__mapDeps([6,1])),{loading:e=>B(e)}),U=ue({subtitleCards:{id:"prompt-new-user-onboarding.subtitle-cards-2",defaultMessage:"Try one of these ideas to see how ChatGPT works."},close:{id:"prompt-new-user-onboarding.close",defaultMessage:"Close"},skip:{id:"prompt-new-user-onboarding.skip",defaultMessage:"Skip"}}),ye={work:["help_me_get_recognized","anime_style_portrait","document_summary"],school:["fix_procrastination","anime_style_portrait","create_a_quiz"],personalTasks:["meal_prep","anime_style_portrait","upgrade_skin_care"],funAndEntertainment:["promo_code","action_figure_portrait","color_theory"],other:["be_my_personal_trainer","anime_style_portrait","color_theory"]};function at(e){return Object.prototype.hasOwnProperty.call(ye,e)}function ot({cardItems:e,isUserTriggered:s,handleSelect:n,onClose:m}){const r=q(),[o,u]=i.useState(0),a=!Ie(),l=(x,b)=>{u(b)};return t.jsxs(We,{className:"flex h-full flex-col gap-6",children:[t.jsx("p",{className:"text-token-text-secondary sm:tall:text-3xl sm:tall:font-medium sm:tall:font-medium sm:tall:mb-4 sm:short:mt-4 mx-auto min-h-0 max-w-[280px] shrink text-center text-base max-sm:mt-10 sm:max-w-[420px]",children:r.formatMessage(U.subtitleCards)}),t.jsx("div",{className:"flex min-h-0 flex-1 flex-col justify-center gap-4",children:a?t.jsx(Ze,{items:e,onSelect:l,onSubmit:n,className:"flex min-h-0 flex-1 flex-col justify-center"}):t.jsx(Qe,{items:e,onSelect:l,onSubmit:n,className:"sm:pb-6"})}),t.jsxs("div",{className:"mx-auto flex w-full shrink-0 flex-col gap-2 px-6 pb-6 sm:max-w-[380px]",children:[t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:x=>n(x,e[o],o),children:r.formatMessage(V.tryNow)}),t.jsx(F,{size:"large",color:"ghost",fullWidth:!0,onClick:()=>m==null?void 0:m(),children:s?r.formatMessage(U.close):r.formatMessage(U.skip)})]})]})}function it({starters:e,handleSelect:s,isUserTriggered:n,onClose:m}){const r=q();return i.useEffect(()=>{!e||e.length===0||e.forEach((o,u)=>{var a;D.logEventWithStatsig("Onboarding Show Prompt","chatgpt_onboarding_flow_show_prompt",{prompt_index:u,prompt_id:(a=o.id)!=null?a:""})})},[e]),t.jsxs("div",{className:"tall:gap-16 flex h-full flex-col gap-6 sm:mx-auto sm:max-w-[480px] sm:px-3",children:[t.jsxs("div",{className:"flex flex-col gap-2 px-5 pt-6 sm:px-8 sm:pt-7",children:[t.jsx("h2",{className:"text-token-text-primary text-center text-3xl font-medium",children:r.formatMessage(V.promptOnboardingTitle)}),t.jsx("p",{className:"text-token-text-secondary text-center text-base",children:r.formatMessage(V.promptOnboardingSubtitle)})]}),t.jsx("div",{className:"min-h-0 flex-1 overflow-y-auto px-2 pb-8",children:t.jsx("ul",{className:"divide-token-border-light divide-y",children:e.map((o,u)=>{var a;return t.jsx(Be,{item:o,onClick:(l,x)=>s(l,x,u)},(a=o.id)!=null?a:u)})})}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx(F,{size:"large",color:"secondary",fullWidth:!0,onClick:()=>m==null?void 0:m(),children:n?r.formatMessage(U.close):r.formatMessage(U.skip)})})]})}function gt({clientThreadId:e,onClose:s}){const n=me(),m=xe(n,!1),r=m.get("prompt_onboarding_enable_usage_selection",!1),o=m.get("prompt_onboarding_prompt_variant",""),u=m.get("prompt_onboarding_example_chats_prompt_variant",""),[a,l]=i.useState(r?null:["other"]),[x,b]=i.useState(!1),w=q(),M=De({clientThreadId:e}),{markAsViewed:I,isUserTriggered:h,onboardingStyle:v}=ze(),R=i.useRef(null);i.useEffect(()=>{I(),D.logEventWithStatsig("Onboarding Shown","chatgpt_onboarding_flow_shown",{isUserTriggered:h?"true":"false"})},[I,h]);const c=i.useMemo(()=>{const g=["work","school","funAndEntertainment"],k=new Set(a!=null?a:[]);if(k.size===0)return"other";for(const A of g)if(k.has(A))return A;for(const A of k)if(at(A))return A;return"other"},[a]),p=$e(),_=i.useMemo(()=>h?p:o!=="use_case"?p.filter(g=>g.isFeatured):ye[c].map(g=>p.find(k=>k.id===g)).filter(g=>g!==void 0),[p,h,c,o]);i.useEffect(()=>{_.length>0&&Fe(_,e)},[_,e]);const f=i.useCallback(g=>(R.current||(R.current=Ve(g,u===""?void 0:u)),R.current),[u]),{createExampleChats:j,eligible:N,isLoading:C}=Ke();i.useEffect(()=>{a!=null&&f(a)},[f,a]);const L=i.useCallback(g=>{const k=g!=null?g:a;!N||C||k==null||f(k).then(A=>{j(A)}).catch(()=>{D.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{errorReason:"error_fetching_onboarding_steps"})})},[j,N,C,f,a]),S=(g,k,A)=>{var z;try{s==null||s(),M({suggestedPrompt:k,index:A,isOnboarding:!h}),L(),D.logEventWithStatsig("Onboarding Try Prompt","chatgpt_onboarding_flow_try_prompt",{index:A,prompt_id:(z=k.id)!=null?z:String(A),isUserTriggered:h?"true":"false"})}catch(d){D.logEventWithStatsig("Onboarding Error","chatgpt_onboarding_flow_error",{error:d instanceof Error?d.message:String(d)})}},y=()=>{const g=a!=null?a:["other"];D.logEventWithStatsig("Onboarding Dismissed","chatgpt_onboarding_flow_dismissed",{isUserTriggered:h?"true":"false"}),s==null||s(),L(g)},P=()=>{h?y():b(!0)};return t.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[t.jsx(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35},className:"absolute inset-0 bg-black/60","aria-hidden":"true",onClick:g=>{g.stopPropagation(),h&&y()}}),t.jsx(Y,{children:t.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.35},className:"bg-token-bg-primary relative z-10 flex h-full w-full flex-col items-center justify-center rounded-none",style:{boxShadow:"0 10px 30px rgba(0,0,0,0.15)"},onClick:g=>g.stopPropagation(),children:t.jsxs("div",{className:"flex max-h-full w-full flex-col gap-6 max-sm:h-full",children:[t.jsx("div",{className:"absolute end-3 top-3 z-20 hidden sm:block",children:t.jsx(F,{icon:rt,onClick:y,color:"ghost",className:"h-9 w-9",label:w.formatMessage(U.close)})}),t.jsx(Y,{mode:"wait",children:a==null?t.jsx(Ue,{mainUsagesProp:a!=null?a:[],onSelectMainUsages:l,onSkip:()=>l(["other"])},"main-usage-question"):x?t.jsx(lt,{onClose:y,createExampleChats:L},"all-set-page"):v==="cards"?t.jsx(ot,{cardItems:_,isUserTriggered:h,handleSelect:S,onClose:P},"cards-variant"):t.jsx(it,{starters:_,handleSelect:S,isUserTriggered:h,onClose:P},"list-variant")})]})})})]})}function lt({onClose:e,createExampleChats:s}){const{eligible:n,isLoading:m,markAsViewed:r}=pe(fe.Onboarding);return i.useEffect(()=>{n&&!m&&r()},[n,m,r]),i.useEffect(()=>{s()},[s]),t.jsxs("div",{className:"mx-auto flex h-full w-full flex-col items-center justify-center gap-16 p-6 sm:max-w-[380px]",children:[t.jsxs("div",{className:"flex min-h-0 flex-col items-center justify-center gap-4 max-sm:flex-1",children:[t.jsx(W.div,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:360,damping:24,mass:.8,duration:.6},children:t.jsx(nt,{className:"text-token-text-primary h-10 w-10 text-5xl"})}),t.jsx(W.p,{className:"text-token-text-primary text-center text-3xl",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut",delay:.5},children:t.jsx(ie,te({},V.allSet))})]}),t.jsxs("div",{className:"flex flex-col gap-4 sm:gap-6",children:[t.jsx("div",{className:"text-token-text-secondary relative mt-auto w-full text-center text-base",children:t.jsx(Te,{})}),t.jsx(F,{size:"large",color:"primary",fullWidth:!0,onClick:e,children:t.jsx(ie,te({},V.done))})]})]})}export{gt as default};
//# sourceMappingURL=dgu4dmhw1h0w2yu2.js.map

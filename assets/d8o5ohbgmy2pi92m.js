const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/srab5nufkcaxuad9.js","assets/i8clt0mfz495j7ii.js","assets/gdj7aa3kvh4x8qzj.js","assets/o9hljbbpo7aqoo2o.js","assets/d8z3f1hrx0jbde1l.js"])))=>i.map(i=>d[i]);
var je=Object.defineProperty,ve=Object.defineProperties;var ye=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var Re=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var re=(t,s,a)=>s in t?je(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,T=(t,s)=>{for(var a in s||(s={}))Re.call(s,a)&&re(t,a,s[a]);if(ae)for(var a of ae(s))we.call(s,a)&&re(t,a,s[a]);return t},B=(t,s)=>ve(t,ye(s));import{_ as H,e as q,r as b,j as e,f as $,M as S,c as Ee,u as ke,a as Se}from"./i8clt0mfz495j7ii.js";import{o as V,L as W,u as Z,qb as de,qd as U,C as Y,b0 as K,hK as Q,$ as F,aM as me,o9 as z,qw as Te,e as Le,h as I,d as X,T as ue,qx as pe,aS as ge,aU as fe,R as _e,M as ie,B as Ae,fh as Be,qy as De,qz as Fe,qA as Pe,qB as Ue,qC as Ie,qD as qe,qE as Ge,qF as ze,qG as He,qH as $e,qI as Ve,qJ as We}from"./ghewn7l2ynbm32fm.js";import{o as xe,ba as Qe,mN as Xe,mO as oe}from"./j0yo6uv6652vva62.js";import{l as Ke}from"./ncfg0tfjoho50i9v.js";import{i as Ze,j as Ye,k as Je}from"./krdad74c3vkifcj9.js";import{W as he}from"./ixq9ctpn7m12tmth.js";const le=V(()=>H(()=>import("./srab5nufkcaxuad9.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>W(t)}),es=V(()=>H(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([2,1])),{loading:t=>W(t)}),ss=V(()=>H(()=>import("./o9hljbbpo7aqoo2o.js").then(t=>t._),__vite__mapDeps([3,1])),{loading:t=>W(t)}),ts=t=>({[U.CONTEXT_CONNECTOR_GDRIVE]:{id:U.CONTEXT_CONNECTOR_GDRIVE,icon:e.jsx(es,{className:"h-6 w-6"}),name:t.formatMessage(D.gdriveFileUploadLabel),description:t.formatMessage(D.gdriveFileUploadDescription)},[U.CONTEXT_CONNECTOR_O365_PERSONAL]:{id:U.CONTEXT_CONNECTOR_O365_PERSONAL,icon:e.jsx(le,{className:"h-6 w-6"}),name:t.formatMessage(D.onedrivePersonalFileUploadLabel),description:t.formatMessage(D.sharepointFileUploadDescription)},[U.CONTEXT_CONNECTOR_O365_BUSINESS]:{id:U.CONTEXT_CONNECTOR_O365_BUSINESS,icon:e.jsx(le,{className:"h-6 w-6"}),name:t.formatMessage(D.sharepointFileUploadLabel),description:t.formatMessage(D.sharepointFileUploadDescription)}}),ce=(t,s)=>{var a,l;return(l=(a=s==null?void 0:s.get(t))==null?void 0:a.includes(z.UseConnector))!=null?l:!1},hs=({platformConnectorsWithPermission:t,contextConnectorsWithPermission:s,workspaceId:a,roleId:l,onClose:i})=>{const M=Z(),u=q(),N=de(M),O=b.useMemo(()=>{var n;return Array.from((n=t.values())!=null?n:[]).filter(o=>o.connector.status!=="DISABLED_BY_ADMIN")},[t]),g=b.useMemo(()=>{const n=[];for(const[o,c]of Object.entries(s))n.push({connector:B(T({},ts(u)[o]),{kind:"context"}),permissions:c});for(const o of O)n.push({connector:B(T({},o.connector),{kind:"platform"}),permissions:o.permissions});return n},[O,s,u]),f=b.useMemo(()=>{const n=new Map;for(const[o,c]of t)n.set(o,c.permissions);for(const[o,c]of Object.entries(s))n.set(o,c);return n},[t,s]),[v,d]=b.useState(""),C=b.useMemo(()=>{if(!v.trim())return g;const n=v.toLowerCase();return g.filter(o=>{var E;return"".concat(o.connector.name," ").concat((E=o.connector.description)!=null?E:""," ").concat(o.permissions.length>0?"true on":"false off").toLowerCase().includes(n)})},[g,v]),r=b.useMemo(()=>[...C].sort((n,o)=>n.connector.name.localeCompare(o.connector.name)),[C]),[x,j]=b.useState(()=>new Set),{updateRoleConnectorPermission:p}=Ze({workspaceId:a,roleId:l}),y=async n=>{const c=!ce(n,f);j(R=>new Set(R).add(n));const E=Object.values(Te).find(R=>R.access===n||R.sync===n);try{E?await Promise.all([p({connectorId:E.access,permissions:c?[z.UseConnector]:[]}),p({connectorId:E.sync,permissions:c?[z.UseConnector]:[]})]):await p({connectorId:n,permissions:c?[z.UseConnector]:[]})}finally{j(R=>{const A=new Set(R);return A.delete(n),A})}},m=({worksWith:n})=>{const o=q();return e.jsx("span",{className:"bg-token-bg-tertiary text-token-text-secondary mx-1.5 rounded-md px-1.5 py-0.5 text-xs",children:Ke(n,o)})};return e.jsx(Y,{testId:"modal-configure-connectors",title:u.formatMessage(D.title),isOpen:N,onClose:i,showCloseButton:!0,size:"custom",className:"max-w-[640px]",children:e.jsxs("div",{className:"flex max-h-[80vh] flex-col gap-4",children:[e.jsx("div",{children:e.jsx(xe,{name:"search",value:v,onChange:n=>d(n.target.value),placeholder:u.formatMessage(D.searchPlaceholder,{count:g.length}),ariaLabel:u.formatMessage({id:"NWbmR6",defaultMessage:"Search connectors"})})}),e.jsx("div",{className:"text-sm font-medium",children:e.jsx(S,{id:"2m/8vc",defaultMessage:"Connectors ({count})",values:{count:C.length}})}),e.jsx("div",{className:"bg-token-main-surface flex-1 overflow-y-auto",children:r.length===0?e.jsx(ns,{}):r.map(n=>{const o=ce(n.connector.id,f),c=x.has(n.connector.id);return e.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3",children:[e.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[n.connector.kind==="platform"&&e.jsx(Qe,{connector:n.connector,size:"small",className:"shadow-xxs h-fit rounded-[10px] border p-2"}),n.connector.kind==="context"&&e.jsx("span",{className:"h-fit rounded-xl border-[0.5px] p-2 shadow-sm",children:n.connector.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1 truncate text-sm font-medium",children:[e.jsx("span",{className:"truncate",children:n.connector.name}),n.connector.kind==="context"&&e.jsx(m,{worksWith:"fileUploads"})]}),n.connector.description?e.jsx("div",{className:"text-token-text-tertiary truncate text-xs",children:n.connector.description}):null]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c?e.jsx(K,{className:"h-4 w-4"}):null,e.jsx(Q,{checked:o,onCheckedChange:()=>y(n.connector.id),disabled:c,"aria-label":u.formatMessage({id:"8ejEtk",defaultMessage:"Enable {name}"},{name:n.connector.name})})]})]},n.connector.id)})}),e.jsxs("div",{className:"flex w-full items-center",children:[r.length!==0&&e.jsx(F,{color:"primary-inverse",children:e.jsx(me,{href:"/admin/ca",className:"text-xs",children:e.jsx(S,{id:"4Szs/A",defaultMessage:"Add or manage connectors"})})}),e.jsx("div",{className:"ms-auto",children:e.jsx(F,{onClick:i,children:e.jsx(S,{id:"0NAzDq",defaultMessage:"Done"})})})]})]})})},ns=()=>e.jsxs("div",{className:"flex min-h-[260px] flex-col items-center justify-center gap-3 p-6 text-center","aria-live":"polite",children:[e.jsx("div",{className:"grid place-items-center rounded-full border p-3",children:e.jsx(ss,{className:"text-token-text-tertiary h-5 w-5","aria-hidden":!0})}),e.jsx("div",{className:"text-sm font-medium",children:e.jsx(S,{id:"kaOW76",defaultMessage:"No connectors enabled yet"})}),e.jsx(me,{href:"/admin/ca",className:"text-xs",children:e.jsx(F,{color:"primary-inverse",children:e.jsx(S,{id:"MA5e0o",defaultMessage:"Add connectors"})})})]}),D=$({title:{id:"allowedConnectorsSection.title",defaultMessage:"Configure connectors"},searchPlaceholder:{id:"allowedConnectorsSection.searchPlaceholder",defaultMessage:"Search {count} connectors (on/off)"},gdriveFileUploadLabel:{id:"allowedConnectorsSection.gdriveFileUploadLabel",defaultMessage:"Google Drive"},gdriveFileUploadDescription:{id:"allowedConnectorsSection.gdriveFileUploadDescription",defaultMessage:"Upload Google Drive files in messages sent to ChatGPT."},sharepointFileUploadLabel:{id:"allowedConnectorsSection.sharepointFileUploadLabel",defaultMessage:"Microsoft OneDrive (work/school)"},sharepointFileUploadDescription:{id:"allowedConnectorsSection.sharepointFileUploadDescription",defaultMessage:"Upload SharePoint and OneDrive for Business files in messages sent to ChatGPT."},onedrivePersonalFileUploadLabel:{id:"allowedConnectorsSection.onedrivePersonalFileUploadLabel",defaultMessage:"Microsoft OneDrive (personal)"},onedrivePersonalFileUploadDescription:{id:"allowedConnectorsSection.onedrivePersonalFileUploadDescription",defaultMessage:"Upload personal OneDrive files in messages sent to ChatGPT."}}),h=$({sectionTitle:{id:"ozOA2J",defaultMessage:"Credit limit"},sectionDescription:{id:"GakQOT",defaultMessage:"Control how much credit members assigned to this role can consume before alerts or enforcement kicks in."},enableToggleLabel:{id:"AnikwY",defaultMessage:"Enable credit limit"},creditLimitLabel:{id:"MAOCRq",defaultMessage:"Credit limit"},creditLimitPlaceholder:{id:"BUgBFe",defaultMessage:"Enter a non-negative number"},enforcementLabel:{id:"LmAmqg",defaultMessage:"Enforcement mode"},enforcementAlert:{id:"NVDmZu",defaultMessage:"Alert"},enforcementHardCap:{id:"4LPK21",defaultMessage:"Hard cap"},submitLabel:{id:"R6rQRP",defaultMessage:"Submit"},invalidLimit:{id:"6D2ZZA",defaultMessage:"Enter a non-negative number as the credit limit"},submitSuccess:{id:"G7A/Zh",defaultMessage:"Credit limit updated"},submitError:{id:"brHKHK",defaultMessage:"We couldn’t update the credit limit. Try again."},disableSuccess:{id:"pBGZ78",defaultMessage:"Credit limit disabled"}});function bs({workspaceId:t,roleId:s}){var se,te;const a=q(),l=Le(),i=Z(),M=I(i,"1261424157"),u=!!s,{data:N,isLoading:O,isFetching:g}=Ye({workspaceId:t,roleId:s!=null?s:"",enabled:M&&u}),{upsertRoleMetadata:f,isPending:v}=Je({workspaceId:t,roleId:s!=null?s:""}),[d,C]=b.useState(!1),[r,x]=b.useState(""),[j,p]=b.useState("ALERT"),[y,m]=b.useState(null),[n,o]=b.useState(!1),c=(te=(se=N==null?void 0:N.metadata)==null?void 0:se.credit_limit_setting)!=null?te:null,E=c!=null;b.useEffect(()=>{if(N){if(!c){C(!1),x(""),p("ALERT");return}C(!0),x(String(c.limit)),p(c.enforcement_mode)}},[N,c]);const R=r.trim(),A=R===""?Number.NaN:Number(R),J=R!==""&&Number.isFinite(A)&&A>=0,G=d&&J,be=d&&R!==""&&!J,Me=b.useMemo(()=>{if(!d)return E;if(!G)return!1;if(!E)return!0;const w=Math.abs(c.limit-A)<1e-9,_=c.enforcement_mode===j;return!(w&&_)},[j,E,G,d,A,c]),Ne=M&&u&&O&&!N,ee=v||n,P=ee||g,Oe=async w=>{if(!P){if(m(null),w){C(!0);return}if(C(!1),!E){x(""),p("ALERT");return}if(s)try{o(!0),await f({credit_limit_setting:null}),x(""),p("ALERT"),l.success(a.formatMessage(h.disableSuccess))}catch(_){C(!0),l.danger(a.formatMessage(h.submitError))}finally{o(!1)}}},Ce=async w=>{if(w.preventDefault(),!!d){if(!G){m(a.formatMessage(h.invalidLimit));return}if(m(null),!!s)try{o(!0),await f({credit_limit_setting:{limit:A,enforcement_mode:j}}),l.success(a.formatMessage(h.submitSuccess))}catch(_){l.danger(a.formatMessage(h.submitError))}finally{o(!1)}}};return!M||!u?null:e.jsx(he,{title:h.sectionTitle,description:h.sectionDescription,children:Ne?e.jsx("div",{className:"flex h-24 items-center justify-center",children:e.jsx(K,{className:"text-token-text-tertiary h-6 w-6"})}):e.jsx("form",{onSubmit:Ce,children:e.jsxs(Xe,{children:[e.jsx(oe,{children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsx("div",{children:e.jsx("div",{className:"text-md",children:a.formatMessage(h.enableToggleLabel)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[(g||ee)&&e.jsx(K,{className:"text-token-text-tertiary h-4 w-4"}),e.jsx(Q,{size:"normal","aria-label":a.formatMessage(h.enableToggleLabel),checked:d,onCheckedChange:w=>Oe(!!w),disabled:P})]})]})}),d&&e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-end md:justify-end md:gap-6",children:[e.jsxs("div",{className:"flex w-full flex-col gap-2 md:max-w-sm md:min-w-[260px] md:flex-1",children:[e.jsx("label",{htmlFor:"credit-limit-input",className:"text-token-text-primary text-xs font-semibold",children:a.formatMessage(h.creditLimitLabel)}),e.jsx(xe,{name:"credit-limit-input",ariaLabel:a.formatMessage(h.creditLimitLabel),placeholder:a.formatMessage(h.creditLimitPlaceholder),value:r,onChange:w=>{const _=w.target.value;x(_);const ne=_.trim();if(ne===""){m(null);return}if(!/^(?:\d+\.?\d*|\d*\.\d+)$/.test(ne)){m(a.formatMessage(h.invalidLimit));return}m(null)},onBlur:()=>{if(d){const w=r.trim(),_=Number(w);(w===""||!Number.isFinite(_)||_<0)&&m(a.formatMessage(h.invalidLimit))}},disabled:P,type:"number",className:X(y&&"border-token-border-danger focus-within:border-token-border-danger focus-within:ring-token-border-danger"),inputClassName:X(y&&"text-token-text-danger placeholder:text-token-text-danger")})]}),e.jsxs("div",{className:"flex w-full flex-col gap-2 md:max-w-xs md:flex-1",children:[e.jsx("label",{htmlFor:"credit-limit-enforcement-mode",className:"text-token-text-primary text-xs font-semibold",children:a.formatMessage(h.enforcementLabel)}),e.jsxs("select",{id:"credit-limit-enforcement-mode",className:X("border-token-border-medium bg-token-main-surface-primary w-full rounded-md border px-3 py-2 text-sm",P&&"opacity-60"),value:j,onChange:w=>{p(w.target.value)},disabled:P,children:[e.jsx("option",{value:"ALERT",children:a.formatMessage(h.enforcementAlert)}),e.jsx("option",{value:"HARD_CAP",children:a.formatMessage(h.enforcementHardCap)})]})]}),e.jsx("div",{className:"flex w-full justify-end md:w-auto",children:e.jsx(ue,{label:a.formatMessage(h.invalidLimit),disabled:!be,side:"top",triggerAs:"div",children:e.jsx(F,{color:"primary",type:"submit",disabled:!d||P||!Me||!G,className:"md:w-auto",children:a.formatMessage(h.submitLabel)})})})]})})]})})})}const as="role-workspace-member",Ms=t=>t.id.startsWith(as)&&t.predefined_role,rs=({add:t,currentPermissionNames:s,permissionName:a,additionalPermissionNames:l})=>{const i=[a,...l];return t?[...new Set([...s,...i])]:s.filter(M=>!i.includes(M))},is=t=>{"use forget";const s=Ee.c(17),{ariaLabel:a,role:l,permissionName:i,additionalPermissionNames:M,handleSaveRole:u,disabled:N,disabledReason:O}=t,g=M===void 0?[]:M,f=N===void 0?!1:N,v=q();if(i==="codex_github_connector"){let m;return s[0]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsx(os,{}),s[0]=m):m=s[0],m}const d=Q,C="normal",r=[i,...g].every(m=>l.permissions.includes(m));let x;s[1]!==g||s[2]!==u||s[3]!==i||s[4]!==l?(x=m=>{const n=rs({add:m,currentPermissionNames:l.permissions,permissionName:i,additionalPermissionNames:g});u(B(T({},l),{permissions:n}))},s[1]=g,s[2]=u,s[3]=i,s[4]=l,s[5]=x):x=s[5];let j;s[6]!==d||s[7]!==a||s[8]!==f||s[9]!==r||s[10]!==x?(j=e.jsx(d,{size:C,"aria-label":a,checked:r,onCheckedChange:x,disabled:f}),s[6]=d,s[7]=a,s[8]=f,s[9]=r,s[10]=x,s[11]=j):j=s[11];const p=j;let y;return s[12]!==p||s[13]!==f||s[14]!==O||s[15]!==v?(y=f&&O?e.jsx(ue,{label:v.formatMessage(O),children:p}):p,s[12]=p,s[13]=f,s[14]=O,s[15]=v,s[16]=y):y=s[16],y},os=()=>{const{enabled:t}=pe(ge[fe.GITHUB_CONNECTOR]);return e.jsx(Q,{checked:t,disabled:!0,"aria-hidden":!0})},Ns=({workspaceId:t,data:s,preReleases:a,handleSaveRole:l,role:i,isCustomRole:M})=>{const u=q(),[N,O]=b.useState(!1),g=ke(),{mutateAsync:f,isPending:v}=Se({onSettled:()=>{g.invalidateQueries({queryKey:["workspace-settings"]})},mutationFn:({feature:r,enabled:x})=>_e.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:r,value:x}})}),d=a.filter(r=>!r.shouldDisableForQuorum),C=d.length===0?L.enterpriseBetaFeatureEmptySectionDescription:L.enterpriseBetaFeatureSectionDescription;return e.jsx(he,{title:L.enterpriseBetaFeatureSection,description:C,shouldDisableForQuorum:!1,children:d.map(r=>{var y,m;const x=i.permissions.some(n=>n===r.newReleaseEntry.permissionName),j=v||x,p=(y=s.beta_settings[r.newReleaseOptOutFlag])!=null?y:!1;return e.jsxs("div",{className:"flex flex-col items-start gap-4 py-3",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-md flex gap-2",children:u.formatMessage({id:"workspaceSettings.templateTitle.enterpriseReleaseTitle",defaultMessage:"{name}"},{name:r.name})}),e.jsx("span",{className:"text-token-text-tertiary text-xs",children:e.jsx(S,{id:"workspaceSettings.templateTitle.enterpriseReleaseDescription",defaultMessage:"{name} <learnMore>Learn more</learnMore>",values:{name:r.description,learnMore:n=>e.jsx("a",{href:r.helpCenterLink,target:"_blank",className:"underline",rel:"noopener noreferrer",children:n})}})})]}),e.jsx("div",{className:"flex items-center justify-between gap-6",children:e.jsx("div",{className:"flex min-w-0 items-center gap-3",children:e.jsx("div",{className:"shrink-0",children:e.jsx(is,{ariaLabel:r.name,role:i,permissionName:r.newReleaseEntry.permissionName,handleSaveRole:l,disabled:(m=r.newReleaseEntry.disabled)!=null?m:p,disabledReason:r.newReleaseEntry.disabledReason})})})})]}),M&&r.releaseDate&&e.jsx("div",{className:"flex items-center justify-between gap-6",children:e.jsxs("div",{className:"flex min-w-0 items-center gap-3",children:[e.jsx("span",{className:"text-token-text-tertiary text-xs",children:e.jsx(S,B(T({},L.enterpriseReleaseOptOutButtonDescription),{values:{date:r.releaseDate}}))}),e.jsxs("label",{htmlFor:"enterprise-release-opt-out",className:"flex shrink-0 cursor-pointer items-center gap-2 select-none",children:[e.jsx(F,{color:p?"primary":"secondary",size:"small",disabled:j,loading:!1,label:u.formatMessage(L.enterpriseReleaseOptOutLabel),onClick:()=>{j||(p?f({feature:r.newReleaseOptOutFlag,enabled:!1}):O(!0))},children:e.jsx(S,T({},p?L.enterpriseReleaseOptOutUndoButton:L.enterpriseReleaseOptOutButton))}),e.jsx(Y,{isOpen:N,onClose:()=>O(!1),title:e.jsx(S,B(T({},L.enterpriseReleaseOptOutModalTitle),{values:{name:r.name.toLowerCase()}})),description:e.jsx(S,B(T({},L.enterpriseReleaseOptOutDescription),{values:{name:r.name.toLowerCase(),date:r.releaseDate}})),testId:"modal-enterprise-release-opt-out",primaryButton:e.jsx(ie.Button,{as:"button",color:"primary",loading:!1,onClick:async()=>{const n=i.permissions.filter(o=>o!==r.newReleaseEntry.permissionName);await Promise.all([f({feature:r.newReleaseOptOutFlag,enabled:!0}),l(B(T({},i),{permissions:n}))]),O(!1)},children:e.jsx(S,T({},L.enterpriseReleaseOptOutConfirm))}),secondaryButton:e.jsx(ie.Button,{as:"button",color:"ghost",onClick:()=>O(!1),children:e.jsx(S,T({},L.enterpriseReleaseOptOutCancel))})})]})]})})]},r.name)})})},L=$({enterpriseBetaFeatureEmptySectionDescription:{id:"workspaceSettings.enterpriseBetaFeatureEmptySectionDescription",defaultMessage:"New enterprise features are generally available, but we provide a multi-week change-management window before they turn on by default. Currently there are no features in the change-management window."},enterpriseBetaFeatureSectionDescription:{id:"workspaceSettings.enterpriseBetaFeatureSectionDescription",defaultMessage:"Features are off during early access. Admins can turn them on for the org in the toggle below or for specific roles via Role-Based Access Controls (RBAC). When early access ends, features auto-enable unless you’ve set RBAC or opted out."},enterpriseBetaFeatureSection:{id:"workspaceSettings.enterpriseBetaDescription",defaultMessage:"Early Access Period"},enterpriseReleaseToggleLabel:{id:"workspaceSettings.enterpriseReleaseToggleLabel1",defaultMessage:"Enable this feature"},enterpriseReleaseToggleDescription:{id:"workspaceSettings.enterpriseReleaseToggleDescription",defaultMessage:"Allow members to use the feature while it's in preview. You can turn this off at any time."},enterpriseReleaseOptOutLabel:{id:"workspaceSettings.enterpriseReleaseOptOutLabel",defaultMessage:"Opt out of this feature after the change management period"},enterpriseReleaseOptOutButton:{id:"workspaceSettings.enterpriseReleaseOptOutButton",defaultMessage:"Turn off"},enterpriseReleaseOptOutUndoButton:{id:"workspaceSettings.enterpriseReleaseOptOutUndoButton",defaultMessage:"Turned off"},enterpriseReleaseOptOutModalTitle:{id:"workspaceSettings.enterpriseReleaseOptOutModalTitle",defaultMessage:"Turn off {name}"},enterpriseReleaseOptOutButtonDescription:{id:"workspaceSettings.enterpriseReleaseOptOutButtonDescription",defaultMessage:"This feature exits early access on {date} and turns on for the org unless RBAC is set; you can turn it off anytime or preemptively here."},enterpriseReleaseOptOutDescription:{id:"workspaceSettings.enterpriseReleaseOptOutDescription",defaultMessage:"{name} will turn on automatically after the early access period and will follow your configured RBAC settings. Choosing Turn Off keeps shared projects disabled for your entire workspace. You can enable them again at any time."},enterpriseReleaseOptOutConfirm:{id:"workspaceSettings.enterpriseReleaseOptOutConfirm",defaultMessage:"Turn off"},enterpriseReleaseOptOutCancel:{id:"workspaceSettings.enterpriseReleaseOptOutCancel",defaultMessage:"Cancel"}}),Os=()=>{var R;const t=Z(),s=Ae(),a=Be(),l=De(),i=(s==null?void 0:s.residencyRegion)==="no_constraint"&&!a,M=I(t,"614413305"),u=I(t,"773249106"),N=I(t,"417039829"),O=I(t,"3940160259"),g=I(t,"3507761600"),f=Fe(),v=Pe(),d=Ue(),C=Ie(),r=qe(),{enabled:x}=pe(ge[fe.GITHUB_CONNECTOR]),j=(R=s==null?void 0:s.isCBP())!=null?R:!1,p=Ge(t),y=ze(),m=He(),n=$e(t),o=de(t),c=Ve(t),E=We();return{isCBP:j,isRbacEnabled:n,githubConnectorEnabled:x,isInSupportedDrRegion:l,isSharedProjectsEnabled:u,showAgentInternetAccessToggle:g,showHiveToggle:N,showDeepResearchToggle:O,isAppleIntelligenceToggleEnabled:i,isAppleIntelligenceMdmToggleEnabled:M,includeFeatures:f,includeModels:v,includeBetaSettings:d,includeBetaSettingsAdvanced:C,includeGizmoPermissions:r,isMDMEnabled:p,includeAgentMode:y,includeAura:m,includeConnectorPermissions:o,includeDevModePermissions:c,includeThinkingMini:E}},ls=V(()=>H(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([4,1])),{loading:t=>W(t)}),Cs=({onClose:t,onSave:s,isCreate:a,defaultData:l})=>{const i=q(),[M,u]=b.useState((l==null?void 0:l.name)||""),[N,O]=b.useState((l==null?void 0:l.description)||""),[g,f]=b.useState(""),[v,d]=b.useState(!1),C=async()=>{if(!M.trim()){f(i.formatMessage(k.roleNameError));return}d(!0);try{await s({name:M,description:N}),t()}catch(r){}finally{d(!1)}};return e.jsx(Y,{testId:"modal-upsert-role",size:"custom",className:"max-w-lg text-sm",isOpen:!0,onClose:t,showCloseButton:!0,type:"success",title:i.formatMessage(a?k.createRoleTitle:k.editRoleTitle),primaryButton:e.jsx(F,{color:"primary",onClick:()=>C(),loading:v,children:i.formatMessage(k.buttonSaveLabel)}),secondaryButton:e.jsx(F,{onClick:t,color:"secondary",children:i.formatMessage(k.buttonCancelLabel)}),children:e.jsxs("form",{className:"flex flex-col gap-6",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium",children:i.formatMessage(k.roleNameLabel)}),e.jsx("input",{type:"text",className:"border-token-border-primary text-token-text-primary focus:border-token-brand focus:ring-token-brand bg-token-bg-primary mt-1 block w-full rounded-md border px-3 py-2 text-sm ".concat(g?"border-token-text-status-error":""),placeholder:i.formatMessage(k.roleNameLabel),value:M,onChange:r=>{u(r.target.value),f("")}}),g&&e.jsx("span",{className:"text-token-text-status-error mt-1 text-xs",children:g})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium",children:i.formatMessage(k.descriptionLabel)}),e.jsx("span",{className:"text-token-text-tertiary ms-1 text-sm font-medium",children:i.formatMessage(k.optionalLabel)}),e.jsx("input",{type:"text",className:"border-token-border-primary text-token-text-primary focus:border-token-brand focus:ring-token-brand bg-token-bg-primary mt-1 block w-full rounded-md border px-3 py-2 text-sm",placeholder:i.formatMessage(k.descriptionLabel),value:N,onChange:r=>O(r.target.value)})]}),e.jsxs("div",{className:"bg-token-bg-tertiary text-token-text-primary mb-1 flex w-full flex-row gap-4 rounded-xl p-4",children:[e.jsx(ls,{className:"icon"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:i.formatMessage(k.infomationTitle)}),e.jsx("div",{className:"text-token-text-secondary",children:i.formatMessage(k.informationText)})]})]})]})})},k=$({createRoleTitle:{id:"xmlnWv",defaultMessage:"New custom role"},editRoleTitle:{id:"6A6tgB",defaultMessage:"Edit custom role"},roleNameLabel:{id:"VGBBHP",defaultMessage:"Role name"},optionalLabel:{id:"KR/EbO",defaultMessage:"(optional)"},descriptionLabel:{id:"BnuWZw",defaultMessage:"Description"},infomationTitle:{id:"L1pBDh",defaultMessage:"What's a custom role?"},informationText:{id:"DvDdnE",defaultMessage:"Roles are a great way to control which features a user can access. When assigned, the user’s permissions will be calculated as the sum of their custom roles."},buttonCancelLabel:{id:"rMxszm",defaultMessage:"Cancel"},buttonSaveLabel:{id:"JELOdt",defaultMessage:"Save"},roleNameError:{id:"iyN7K7",defaultMessage:"Role name is required"}});export{bs as C,Ns as E,is as P,hs as R,Cs as U,Ms as i,Os as u};
//# sourceMappingURL=d8o5ohbgmy2pi92m.js.map

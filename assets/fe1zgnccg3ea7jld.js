const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/3j20em1lilnrpdcm.js","assets/i8clt0mfz495j7ii.js"])))=>i.map(i=>d[i]);
var Vt=Object.freeze,$t=Object.defineProperty,Us=Object.defineProperties;var Ls=Object.getOwnPropertyDescriptors;var mt=Object.getOwnPropertySymbols;var qt=Object.prototype.hasOwnProperty,zt=Object.prototype.propertyIsEnumerable;var Ht=(s,e,n)=>e in s?$t(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,b=(s,e)=>{for(var n in e||(e={}))qt.call(e,n)&&Ht(s,n,e[n]);if(mt)for(var n of mt(e))zt.call(e,n)&&Ht(s,n,e[n]);return s},B=(s,e)=>Us(s,Ls(e));var nt=(s,e)=>{var n={};for(var a in s)qt.call(s,a)&&e.indexOf(a)<0&&(n[a]=s[a]);if(s!=null&&mt)for(var a of mt(s))e.indexOf(a)<0&&zt.call(s,a)&&(n[a]=s[a]);return n};var ft=(s,e)=>Vt($t(s,"raw",{value:Vt(e||s.slice())}));import{c as be,e as ye,j as t,M as h,f as Ge,r as se,L as Ie,d as Os,u as Bs,_ as Ys,b as kt,k as Gs,h as Vs}from"./i8clt0mfz495j7ii.js";import{sW as Ve,sX as He,jB as $e,sY as Oe,sZ as Be,s_ as qe,s$ as ze,t0 as Ke,t1 as We,t2 as Qe,J as Pt,aY as E,lg as xe,ar as Hs,u as ct,a0 as Ae,d as $,fZ as It,F as At,P as re,a1 as Ue,$ as ut,f2 as $s,o6 as lt,jR as it,pA as qs,pB as zs,am as Ks,e as fs,B as Ws,a_ as gs,C as St,S as Kt,jD as Qs,w as Wt,x as Qt,b0 as ps,bF as et,o as Zs,M as Zt,L as Js,cS as ht,T as xt,R as Xs,I as hs,as as en,z as tn}from"./ghewn7l2ynbm32fm.js";import{tt as v,tu as x,tv as C,tw as sn,tx as Te,ty as nn,tz as an,bK as Ct,tA as ot,tB as tt,tC as wt,tD as jt,tE as Jt,ew as xs,tF as on,eK as rn,tG as ys,a_ as Rt,dA as ln,kj as cn,dL as un,dD as _s,tH as bt,tI as Xt,tJ as Xe,bH as dn,t6 as mn,tK as fn,eL as gn,k5 as Ps,tL as pn,tM as hn,dN as Mt,tN as xn,tO as yn,tP as es,tQ as _n,tR as yt,tS as Pn,tT as Dt,gP as Sn,gQ as Cn,tU as bn,tV as Mn,tW as vn,aP as En,tX as wn}from"./j0yo6uv6652vva62.js";import{E as Ss}from"./ji1868fe7hk3rgcl.js";import{u as ts}from"./o1s10g7vrpyumh3e.js";import{i as jn,C as Dn}from"./e2bky2k6amgws3b2.js";import{a as Nn,b as _t,t as Ze,i as Nt,c as Ye,d as Tn,u as Fn,e as kn}from"./kplnfohfof8ely0n.js";import{P as ss,a as In}from"./mtmwfv9ttg0ed53k.js";const Ee="free",we="go",je="plus",De="pro",ae="team";v(Ee,Ve,x.Month,"0.00",C.Inclusive),v(we,Ve,x.Month,"4.00",C.Inclusive),v(je,Ve,x.Month,"23.00",C.Inclusive),v(De,Ve,x.Month,"229.00",C.Inclusive),v(ae,Ve,x.Month,"34.00",C.Inclusive),v(ae,Ve,x.Year,"29.00",C.Inclusive),v(Ee,He,x.Month,"0.00",C.Inclusive),v(we,He,x.Month,"3.50",C.Inclusive),v(je,He,x.Month,"20.00",C.Inclusive),v(De,He,x.Month,"200.00",C.Inclusive),v(ae,He,x.Month,"30.00",C.Inclusive),v(ae,He,x.Year,"25.00",C.Inclusive),v(Ee,$e,x.Month,"0.00",C.Exclusive),v(we,$e,x.Month,"4.00",C.Exclusive),v(je,$e,x.Month,"20.00",C.Exclusive),v(De,$e,x.Month,"200.00",C.Exclusive),v(ae,$e,x.Month,"30.00",C.Exclusive),v(ae,$e,x.Year,"25.00",C.Exclusive),v(Ee,Oe,x.Month,"0.00",C.Inclusive),v(we,Oe,x.Month,"399.00",C.Inclusive),v(je,Oe,x.Month,"1999.00",C.Inclusive),v(De,Oe,x.Month,"19900.00",C.Inclusive),v(ae,Oe,x.Month,"2599.00",C.Exclusive),v(ae,Oe,x.Year,"2099.00",C.Exclusive),v(Ee,Be,x.Month,"0.00",C.Inclusive),v(we,Be,x.Month,"75000.00",C.Inclusive),v(je,Be,x.Month,"349000.00",C.Inclusive),v(De,Be,x.Month,"3499000.00",C.Inclusive),v(ae,Be,x.Month,"469000.00",C.Exclusive),v(ae,Be,x.Year,"389000.00",C.Exclusive),v(Ee,qe,x.Month,"0.00",C.Inclusive),v(we,qe,x.Month,"1400.00",C.Inclusive),v(je,qe,x.Month,"5700.00",C.Inclusive),v(De,qe,x.Month,"49900.00",C.Inclusive),v(ae,qe,x.Month,"8499.00",C.Exclusive),v(ae,qe,x.Year,"6999.00",C.Exclusive),v(Ee,ze,x.Month,"0.00",C.Inclusive),v(we,ze,x.Month,"259.00",C.Inclusive),v(je,ze,x.Month,"699.00",C.Inclusive),v(De,ze,x.Month,"6999.00",C.Inclusive),v(ae,ze,x.Month,"999.00",C.Exclusive),v(ae,ze,x.Year,"799.00",C.Exclusive),v(Ee,Ke,x.Month,"0.00",C.Inclusive),v(we,Ke,x.Month,"38.99",C.Inclusive),v(je,Ke,x.Month,"99.90",C.Inclusive),v(De,Ke,x.Month,"999.90",C.Inclusive),v(ae,Ke,x.Month,"129.00",C.Exclusive),v(ae,Ke,x.Year,"105.00",C.Exclusive),v(Ee,We,x.Month,"0.00",C.Inclusive),v(we,We,x.Month,"132000.00",C.Inclusive),v(je,We,x.Month,"522500.00",C.Inclusive),v(De,We,x.Month,"5225000.00",C.Inclusive),v(ae,We,x.Month,"799000.00",C.Exclusive),v(ae,We,x.Year,"649000.00",C.Exclusive),v(Ee,Qe,x.Month,"0.00",C.Inclusive),v(we,Qe,x.Month,"300.00",C.Inclusive),v(je,Qe,x.Month,"1100.00",C.Inclusive),v(De,Qe,x.Month,"9990.00",C.Inclusive),v(ae,Qe,x.Month,"1699.00",C.Exclusive),v(ae,Qe,x.Year,"1399.00",C.Exclusive);function An(s,e,n){const a=nn(s,n);if(!a)return null;const o=s,r=e.currency,{taxName:i,reverseChargeEligible:l,taxRatePercent:g}=a;return g==null?{taxAmount:null,taxCurrency:r,taxCountry:o,taxName:i,reverseChargeEligible:l}:{taxAmount:an({amount:e.amount,taxPercent:g,inclusive:e.amountTaxBehavior===C.Inclusive}),taxCurrency:r,taxCountry:o,taxName:i,reverseChargeEligible:l}}function Rn(s,e,n){const a=Te(s,e,n);if(a.amount==null||a.taxBehavior==null){const o=new Error("Incomplete pricing details");throw Pt.addError(o,{planType:e,interval:n,countryCode:s.countryCode,currency:s.currencyConfig.symbol_code}),o}return{product:e,currency:s.currencyConfig.symbol_code,recurringInterval:n,amount:a.amount,amountTaxBehavior:a.taxBehavior==="inclusive"?C.Inclusive:C.Exclusive}}function Un(s,e,n){const a=sn(e);if(!a){const l=new Error("Unsupported plan type for pricing config");throw Pt.addError(l,{planType:e}),l}const o=a==="business"?x.Year:x.Month,r=Rn(s,a,o),i=n.country?An(n.country,r,s):null;return{priceDetails:r,taxDetails:i}}function vt(s){switch(s){case E.GO:return xe.GO;case E.PLUS:return xe.PLUS;case E.PRO:return xe.PRO;case E.SELF_SERVE_BUSINESS:return xe.SELF_SERVE_BUSINESS;case E.ENTERPRISE_CBP:return xe.ENTERPRISE_CBP_FLAT;case E.EDUCATION_CBP:return xe.EDUCATION_CBP_FLAT;case E.K12:return xe.K12;case E.QUORUM:return xe.QUORUM;case E.FREE:return xe.FREE;case E.DEPRECATED_ENTERPRISE:return xe.DEPRECATED_ENTERPRISE;case E.DEPRECATED_EDU:return xe.DEPRECATED_EDU}}function st(s){switch(s){case E.FREE:return 0;case E.GO:return 1;case E.PLUS:return 2;case E.PRO:return 3;case E.SELF_SERVE_BUSINESS:return 4;case E.ENTERPRISE_CBP:return 5;default:return Pt.addError(new Error("Unsupported plan type",{cause:s})),-1}}function Ln(s){return"percentage"in s}function Ne(s){"use forget";const e=be.c(2),{children:n}=s;let a;return e[0]!==n?(a=t.jsx("span",{className:"ms-1 rounded-4xl border border-none bg-[#DCDBFF] px-2 pt-1.5 pb-1.25 text-[11px] font-semibold text-[#615EEB] dark:bg-[#444378] dark:text-[#B9B7FF]",children:n}),e[0]=n,e[1]=a):a=e[1],a}function On(s){"use forget";const e=be.c(26),{useRecommendedBadge:n,isWebRedesign:a,activeDiscountMetadata:o,promoMetadata:r,type:i,planType:l,welcomeOfferLabel:g,currencySymbol:d,isScheduledPromo:m}=s,f=ye(),S=i===ss.highlight&&l===E.GO,c=i===ss.highlight&&a,y=o&&"percentage"in o.discount&&o.discount.percentage===100,T=o&&!y;if(g){let u;return e[0]!==g?(u=t.jsx(Ne,{children:t.jsx(h,b({},g))}),e[0]=g,e[1]=u):u=e[1],u}if(!m&&(r!=null&&r.promotion_type_label)){let u;return e[2]!==r.promotion_type_label?(u=t.jsx(Ne,{children:r.promotion_type_label}),e[2]=r.promotion_type_label,e[3]=u):u=e[3],u}if(!m&&(r!=null&&r.duration)){if(Ln(r.discount)){let _;e[4]!==r.discount.percentage?(_=Math.round(r.discount.percentage),e[4]=r.discount.percentage,e[5]=_):_=e[5];let N;return e[6]!==_?(N=t.jsx(Ne,{children:t.jsx(h,B(b({},ke.percentageDiscount),{values:{discount_percentage:_}}))}),e[6]=_,e[7]=N):N=e[7],N}let u;e[8]!==f||e[9]!==r.discount.currency_code||e[10]!==r.discount.value?(u=f.formatNumber(r.discount.value,{style:"currency",currency:r.discount.currency_code,minimumFractionDigits:0,maximumFractionDigits:2}),e[8]=f,e[9]=r.discount.currency_code,e[10]=r.discount.value,e[11]=u):u=e[11];let p;return e[12]!==u?(p=t.jsx(Ne,{children:t.jsx(h,B(b({},ke.flatDiscount),{values:{discounted_cost:u}}))}),e[12]=u,e[13]=p):p=e[13],p}if(!m&&r){let u;return e[14]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(Ne,{children:t.jsx(h,b({},ke.promo))}),e[14]=u):u=e[14],u}if(T&&o){if("percentage"in o.discount){const u=o==null?void 0:o.discount.percentage;let p;return e[15]!==u?(p=t.jsx(Ne,{children:t.jsx(h,B(b({},ke.percentageDiscount),{values:{discount_percentage:u}}))}),e[15]=u,e[16]=p):p=e[16],p}else if("value"in o.discount){let u;e[17]!==o.discount.value||e[18]!==d.code||e[19]!==f?(u=f.formatNumber(o.discount.value,{style:"currency",currency:f.formatMessage(d.code),minimumFractionDigits:0,maximumFractionDigits:2}),e[17]=o.discount.value,e[18]=d.code,e[19]=f,e[20]=u):u=e[20];let p;return e[21]!==u?(p=t.jsx(Ne,{children:t.jsx(h,B(b({},ke.flatDiscount),{values:{discounted_cost:u}}))}),e[21]=u,e[22]=p):p=e[22],p}}if(S){let u;return e[23]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(Ne,{children:t.jsx(h,b({},ke.new))}),e[23]=u):u=e[23],u}if(n){let u;return e[24]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(Ne,{children:t.jsx(h,b({},ke.recommended))}),e[24]=u):u=e[24],u}if(c){let u;return e[25]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx(Ne,{children:t.jsx(h,b({},ke.popular))}),e[25]=u):u=e[25],u}return null}const ke=Ge({percentageDiscount:{id:"percentageDiscount",defaultMessage:"{discount_percentage}% OFF"},flatDiscount:{id:"flatDiscount",defaultMessage:"{discounted_cost} OFF"},promo:{id:"promo",defaultMessage:"PROMO"},popular:{id:"popular",defaultMessage:"POPULAR"},recommended:{id:"recommended",defaultMessage:"RECOMMENDED"},new:{id:"new",defaultMessage:"NEW"}}),Bn={standard:"border-s border-e border-t border-b border-token-border-default md:min-h-[30rem] md:max-w-96 md:rounded-none md:border-e-0 md:pb-6 md:first:rounded-ss-xl md:first:rounded-es-xl md:last:rounded-se-xl md:last:rounded-ee-xl md:last:border-e",promo:"shadow-lg md:min-h-[30rem] md:max-w-96 md:pb-6",highlight:"border-s border-e border-t border-b md:-mt-4 md:-mb-4 md:min-h-[20rem] md:max-w-96 md:pb-6 md:first:rounded-ss-xl md:first:rounded-es-xl md:last:rounded-se-xl md:last:rounded-ee-xl"};function Yn(i){var l=i,{children:s,className:e,type:n,isWebRedesign:a,isGoColumn:o}=l,r=nt(l,["children","className","type","isWebRedesign","isGoColumn"]);const m=a?"relative flex flex-1 flex-col justify-center gap-4 rounded-xl px-6 py-6.5 text-sm md:rounded-2xl! md:border-e-1 md:border-b-1 md:border-t-1 md:border-s-1":"relative flex flex-1 flex-col justify-center gap-5 rounded-xl px-6 pt-6 pb-10 text-sm",T=$(a&&"border-[#CFCEFC] bg-[#F5F5FF] dark:bg-[#282841] dark:border-[#484777] md:mt-0 md:mb-0",!a&&o&&"border-token-border-default me-[-1px]",!a&&!o&&"border-green-600 bg-green-600/5",a&&n==="promo"&&"border-token-border-light");return t.jsx("div",B(b({},r),{className:$(Bn[n],["highlight","promo"].includes(n)&&T,m,e),children:s}))}var us;const ns=At.div(us||(us=ft(["\n  relative flex flex-col ","\n"])),s=>["highlight","promo"].includes(s.type)?"mt-4":"bg-token-main-surface-primary");var ds;const Gn=At.div(ds||(ds=ft(["flex flex-col grow gap-2"])));var ms;const as=At.div(ms||(ms=ft(["\n  relative flex flex-col text-xs text-token-text-secondary ","\n"])),s=>["highlight","promo"].includes(s.type)?"":"bg-token-main-surface-primary");function Vn(s){return"referrer_name"in s}var rt=(s=>(s.standard="standard",s.promo="promo",s.highlight="highlight",s))(rt||{});const Ut=({planType:s,pricingPlan:e,callToActionButton:n,secondaryCallToActionButton:a=null,className:o,elementId:r,additionalLinks:i=[],promoMetadata:l=null,activeDiscountMetadata:g=null,billingDetails:d,promoData:m=null,type:f="standard",isWebRedesign:S,isGoColumn:c=!1,isBusinessUpgradeV2CopyEnabled:y=!1,useRecommendedBadge:T=!1,shouldUseComparisonSpacing:u=!1,paymentsOverrideString:p,isUnifiedPricingPage:_=!1,isCheckoutPricingConfigLoading:N,checkoutPricingConfigError:D,hasEnabledTeam1DollarCoupon:A=!1,hasEnabledTeamFreeTrialCoupon:M=!1})=>{var Le,dt,Lt,Ot,Bt,Yt,Gt;const H=Hs(),{costTitle:w,costSubtitle:F,currencySymbol:k}=Cs(e,d.currency),O=ye(),Y=ct(),Z=Ae(Y,"3768341700").get("is_sku_info_code_enabled",!1),U=pe=>{if(!pe)return"VAT";const he=pe.toLowerCase();return he==="vat"||he==="gst"?he.toUpperCase():pe},I=!p&&Z&&m==null&&l==null&&((Le=e.cost)==null?void 0:Le.costDuration)==null&&g==null,{data:P,error:G,isLoading:z}=Ct({countryCode:d.country,currency:d.currency,ctx:Y}),V=se.useMemo(()=>b(b({},qn(P,d.country)),zn(Y,d.currency)),[Y,d,P]),j=V.inclusiveTaxDisplay==="tax_name_only",K=V.inclusiveTaxDisplay==="with_amount",q=V.showReverseChargeDisclaimer,L=s===E.SELF_SERVE_BUSINESS,ee=xs(),te=j&&s!==E.FREE&&!A,de=K&&s!==E.FREE&&!A,Me=q&&s===E.SELF_SERVE_BUSINESS&&!A;let me=w,fe;if(!N&&!D&&P){if(A||M||l&&s===E.SELF_SERVE_BUSINESS)fe=Te(P,ot,x.Month);else if(s===E.PLUS||s===E.GO){const pe=s===E.PLUS?tt:wt;fe=Te(P,pe,x.Month)}}fe&&(me={id:"defaultCost",defaultMessage:jt(fe.amount).toString()});const ie=((Lt=(dt=l==null?void 0:l.schedule)==null?void 0:dt.start_after_num_periods)!=null?Lt:0)>0,_e=!!g||!!l&&!ie,Pe=se.useMemo(()=>{if(!I||!P)return{info:null,hadError:!1};try{return{info:Un(P,s,d),hadError:!1}}catch(pe){return{info:null,hadError:!0}}},[I,P,s,d]),X=Pe.info,ge=se.useMemo(()=>!I&&D!=null||I&&(G||Pe.hadError)?Ce.pricingConfigFallback:null,[G,Pe.hadError,D,I]),Se=ge?t.jsx("div",{role:"alert",className:"border-token-border-warning bg-token-background-warning text-token-text-warning mb-3 w-full rounded border text-xs",children:t.jsx(h,b({},ge))}):null,ce=t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 flex gap-2",children:[t.jsx("div",{className:$("text-2xl text-gray-500",S&&"text-secondary text-xl"),children:t.jsx("div",{className:"h-6 w-4 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})}),t.jsx("div",{className:"h-10 w-24 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})]}),t.jsx("div",{className:"mt-4 flex items-baseline gap-1.5",children:t.jsx("div",{className:"mt-auto mb-0.5 flex h-full flex-col items-start",children:t.jsx("p",{className:$("text-token-text-secondary w-full text-xs",S&&"text-[11px]"),children:t.jsx("span",{className:"inline-block h-3 w-32 animate-pulse rounded bg-gray-200 dark:bg-gray-700"})})})})]}),le=ge!=null||(I?z:N),{shouldHide:oe}=Nn(),W=m==null?void 0:m.coupon,Q=se.useMemo(()=>W===_t?{welcomeOffer:Ze.team1dollarWelcomeOffer,notEligible:Ze.team1dollarNotEligible,temporarilyDisabled:Ze.team1dollarTemporarilyDisabled,offline:Ze.team1dollarOffline}:W&&Nt(W)?{welcomeOffer:Ye.teamFreeTrialWelcomeOffer,notEligible:Ye.teamFreeTrialNotEligible,temporarilyDisabled:Ye.teamFreeTrialTemporarilyDisabled,offline:Ye.teamFreeTrialOffline}:null,[W]),J=(m==null?void 0:m.coupon)===_t&&m.state==="eligible";let ue=null,ve=null;return!l&&m&&(m.coupon===_t||Nt(m.coupon))&&(m.state==="eligible"?ve=Q==null?void 0:Q.welcomeOffer:m.state==="not_eligible"&&!oe?ue=t.jsx("div",{className:"mb-3 w-full","data-testid":"pricing-modal-promo-banner",children:t.jsx("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-gray-900",children:t.jsx(h,b({},Q==null?void 0:Q.notEligible))})}):m.state==="temporary_disabled"&&!oe?ue=t.jsx("div",{className:"mb-3 w-full","data-testid":"pricing-modal-promo-banner",children:t.jsx("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-gray-500",children:t.jsx(h,b({},Q==null?void 0:Q.temporarilyDisabled))})}):m.state==="offline"&&!oe&&(ue=t.jsx("div",{className:"mb-3 w-full","data-testid":"pricing-modal-promo-banner",children:t.jsx("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-gray-900",children:t.jsx(h,b({},Q==null?void 0:Q.offline))})}))),t.jsxs(Yn,{className:$(S&&!["promo","highlight"].includes(f)&&"bg-token-main-surface-primary",u&&"md:max-w-117",o),"data-testid":"".concat(s,"-pricing-modal-column"),id:r,type:f,isWebRedesign:S,isGoColumn:c,children:[Se,ue,t.jsxs(ns,{type:f,className:S?"mt-0":"",children:[t.jsxs("div",{className:$("flex flex-col gap-1",S&&"gap-5 rounded-2xl"),children:[t.jsxs("p",{className:$("flex items-center gap-2",S?"justify-between text-[28px] font-medium":"text-2xl font-semibold"),children:[t.jsx(h,b({},e.name)),t.jsx(On,{useRecommendedBadge:T,isWebRedesign:S,activeDiscountMetadata:g,promoMetadata:l,type:f,planType:s,welcomeOfferLabel:ve,currencySymbol:k,isScheduledPromo:ie})]}),p&&t.jsx("span",{className:"text-token-text-primary text-base text-[42px] leading-[48px]",children:O.formatMessage(p)}),le&&t.jsx("div",{"data-testid":"".concat(s,"-pricing-column-cost-skeleton"),children:ce}),!p&&t.jsxs("div",{className:"flex items-end gap-1.5",hidden:le,"data-testid":"".concat(s,"-pricing-column-cost"),children:[me&&t.jsx(os,{costTitle:me,currencySymbol:k,isStrikethrough:_e,priceDetail:X==null?void 0:X.priceDetails,isWebRedesign:S}),_e&&w?t.jsx(os,{costTitle:w,currencySymbol:k,isWebRedesign:S}):null,t.jsx("div",{className:"flex items-baseline gap-1.5",children:t.jsxs("div",{className:"mt-auto mb-0.5 flex h-full flex-col items-start",children:[t.jsxs("p",{className:$("text-token-text-secondary w-full text-xs",S&&"text-[11px]"),children:[!J&&t.jsx(h,{id:"PricingModalColumn.currencyCodeWithSlash",defaultMessage:"{currencyCode} / ",values:{currencyCode:O.formatMessage(k.code)}}),l&&!g&&(te?t.jsx(h,B(b({},Ce.frequencyWithTaxInformation),{values:{tax_type:U(P==null?void 0:P.currencyConfig.tax_type)}})):de&&w?t.jsx(h,B(b({},Ce.frequencyWithTaxInformationIncludingAmount),{values:{tax_type:U(P==null?void 0:P.currencyConfig.tax_type),vat_amount:O.formatNumber(Jt(Number((Ot=w.defaultMessage)==null?void 0:Ot.toString().replaceAll("*","")),d.country),{style:"currency",currency:O.formatMessage(k.code),minimumFractionDigits:2,maximumFractionDigits:2})}})):J?t.jsx(t.Fragment,{}):t.jsx(h,b({},Ce.frequency))),(!g||te||de)&&t.jsx("br",{}),l&&!g&&((Bt=e.cost)!=null&&Bt.costDuration)?t.jsx(h,b({},e.cost.costDuration)):J?t.jsx(t.Fragment,{}):X?t.jsx(Kn,{priceDetails:X.priceDetails,taxDetails:X.taxDetails,priceDisplayOptions:V}):te?t.jsx(h,B(b({},Ce.frequencyWithTaxInformation),{values:{tax_type:U(P==null?void 0:P.currencyConfig.tax_type)}})):de&&w?t.jsx(h,B(b({},Ce.frequencyWithTaxInformationIncludingAmount),{values:{tax_type:U(P==null?void 0:P.currencyConfig.tax_type),vat_amount:O.formatNumber(Jt(Number((Yt=w.defaultMessage)==null?void 0:Yt.toString().replaceAll("*","")),d.country),{style:"currency",currency:O.formatMessage(k.code),minimumFractionDigits:2,maximumFractionDigits:2})}})):t.jsx(h,b({},Ce.frequency))]}),t.jsx("p",{className:"text-token-text-secondary text-xs",children:g&&g.discount.expires_at&&t.jsx(h,B(b({},Ce.remainingDiscountDate),{values:{remaining_discount_date:g.discount.expires_at}}))})]})})]})]}),!p&&F&&H?t.jsx("p",{className:"text-token-text-tertiary mt-6 mb-3 text-sm","data-testid":"".concat(s,"-pricing-column-cost-subtitle"),children:t.jsx(h,b({},F))}):null,e.summary?t.jsx("p",{className:$("text-token-text-primary text-base",S?$("mt-4 font-medium",(u||_)&&"md:min-h-12"):"me-2 mt-2"),"data-testid":"".concat(s,"-pricing-column-cost-summary"),children:t.jsx(h,b({},e.summary))}):null]}),t.jsx("div",{className:$(S&&"mb-2.5 w-full"),children:n}),a&&t.jsx(ns,{type:f,className:"-mt-2",children:a}),t.jsx(Gn,{children:t.jsx(In,{advertisedFeatures:e.advertisedFeatures,pricingModalColumnType:f,isWebRedesign:S,isTeamColumn:s===E.SELF_SERVE_BUSINESS,isBusinessUpgradeV2CopyEnabled:y})}),l&&Vn(l)&&(l==null?void 0:l.referrer_name)&&t.jsx("div",{className:"flex w-full items-center justify-center rounded-md border-[1px] border-[#AF52DE] bg-[#8C43A00D] py-2 text-center",children:t.jsx("span",{className:"text-l text-[#AF52DE]",children:t.jsx(h,{id:"PricingModalColumn.referredBy",defaultMessage:"{referrer_name} gave you 1 month of free Plus",values:{referrer_name:l==null?void 0:l.referrer_name}})})}),t.jsxs("div",{children:[e.disclaimer&&t.jsxs(as,{type:f,className:$(S?"px-1":"px-2",S&&"mt-3"),children:[t.jsx("div",{children:e.cost&&t.jsx(h,B(b({},e.disclaimer),{values:{link:pe=>{var he,Fe;return t.jsx(Ie,{className:$("underline",S&&"font-medium"),target:"_blank",rel:"noreferrer",to:(Fe=(he=e.disclaimer)==null?void 0:he.link)!=null?Fe:"",children:pe})},minSeats:ee,article:pe=>{var he,Fe;return t.jsx(Ie,{className:$("underline",S&&"font-medium"),target:"_blank",rel:"noreferrer",to:(Fe=(he=e==null?void 0:e.disclaimer)==null?void 0:he.article)!=null?Fe:"",children:pe})},amount:O.formatNumber(e.cost.costValue,{style:"currency",currency:d.currency,trailingZeroDisplay:"stripIfInteger"}),currencySign:O.formatMessage(k.sign),postTrialSeatPrice:M&&L&&fe?O.formatNumber(fe.amount,{style:"currency",currency:d.currency,trailingZeroDisplay:"stripIfInteger"}):void 0}}))}),e.disclaimer2&&!_&&t.jsx("div",{children:t.jsx(h,B(b({},e.disclaimer2),{values:{link:pe=>{var he,Fe;return t.jsx(Ie,{className:$("underline",S&&"font-medium"),target:"_blank",rel:"noreferrer",to:(Fe=(he=e.disclaimer2)==null?void 0:he.link)!=null?Fe:"",children:pe})}}}))}),Me&&(X?((Gt=X.taxDetails)==null?void 0:Gt.reverseChargeEligible)&&t.jsx("div",{children:t.jsx(h,B(b({},Ce.reverseChargeTaxDisclaimer),{values:{tax_type:X.taxDetails.taxName}}))}):t.jsx("div",{children:t.jsx(h,b({},Ce.teamPricingVATDisclaimer))}))]}),i.length>0&&t.jsx(as,{type:f,className:$(S&&"gap-0.5 pt-1"),children:i.map((pe,he)=>t.jsx("div",{children:pe},he))})]})]})};function os({costTitle:s,currencySymbol:e,isStrikethrough:n=!1,priceDetail:a,isWebRedesign:o}){return a?t.jsx($n,{priceDetail:a,isStrikethrough:n,isWebRedesign:o}):t.jsxs("div",{className:$("flex",{"text-token-text-primary":!n,"text-token-text-tertiary":n}),children:[t.jsx("div",{className:$("text-2xl text-gray-500",o&&"text-secondary text-xl"),children:t.jsx(h,b({},e.sign))}),t.jsx("div",{className:$("text-5xl",{"line-through":n}),children:t.jsx(h,b({},s))})]})}function Hn(s,e){return s===Be?"id-ID":e}function $n({priceDetail:s,isStrikethrough:e=!1,isWebRedesign:n}){var d;const a=ye(),o={style:"currency",currency:s.currency,currencyDisplay:"narrowSymbol",trailingZeroDisplay:"stripIfInteger"},r=Hn(s.currency,a.locale),i=new Intl.NumberFormat(r,o).formatToParts(s.amount),l=(d=i.find(m=>m.type==="currency"))==null?void 0:d.value,g=i.filter(m=>m.type!=="currency").map(m=>m.value).join("");return t.jsxs("div",{className:$("flex",{"text-token-text-primary":!e,"text-token-text-tertiary":e}),children:[t.jsx("div",{className:$("text-2xl text-gray-500",n&&"text-secondary text-xl"),children:l}),t.jsx("div",{className:$("text-5xl",{"line-through":e}),children:g})]})}function rs(s){switch(s){case"tax_name_only":case"with_amount":return s;default:return"none"}}function qn(s,e){if(!s||s.currencyConfig.symbol_code==="GBP"&&on(e))return{inclusiveTaxDisplay:"none",exclusiveTaxDisplay:"none",showReverseChargeDisclaimer:!1};const n=s.currencyConfig.vat_display;return{inclusiveTaxDisplay:rs(n.inclusive_tax_display),exclusiveTaxDisplay:rs(n.exclusive_tax_display),showReverseChargeDisclaimer:n.show_reverse_charge_disclaimer}}function zn(s,e){const n=Ae(s,"3768341700"),a=n.get("is_vat_information_enabled",!1),o=n.get("is_vat_information_with_amount_enabled",!0),r=n.get("is_team_pricing_vat_disclaimer_enabled",!1);return e===Oe?a?{inclusiveTaxDisplay:"tax_name_only",exclusiveTaxDisplay:"tax_name_only",showReverseChargeDisclaimer:r}:o?{inclusiveTaxDisplay:"with_amount",exclusiveTaxDisplay:"tax_name_only",showReverseChargeDisclaimer:r}:{inclusiveTaxDisplay:"none",exclusiveTaxDisplay:"none",showReverseChargeDisclaimer:r}:{}}function Kn({priceDetails:s,taxDetails:e,priceDisplayOptions:n}){var i;const a=ye(),o={tax_type:(i=e==null?void 0:e.taxName)!=null?i:"tax",tax_behavior:s.amountTaxBehavior,tax_amount:(e==null?void 0:e.taxAmount)&&a.formatNumber(e.taxAmount,{style:"currency",currency:s.currency,currencyDisplay:"narrowSymbol",trailingZeroDisplay:"stripIfInteger"})};let r;return e==null||e.taxAmount===0?r="none":r=s.amountTaxBehavior===C.Inclusive?n.inclusiveTaxDisplay:n.exclusiveTaxDisplay,t.jsx(h,B(b({},Wn({displayOption:r})),{values:o}))}function Wn({displayOption:s}){switch(s){case"none":return Ce.frequency;case"tax_name_only":return Ce.subscriptionFrequencyTaxInformation;case"with_amount":return Ce.subscriptionFrequencyTaxInformationWithAmount}}function Cs(s,e){var n,a,o;return{costValue:(n=s.cost)==null?void 0:n.costValue,costTitle:(a=s.cost)==null?void 0:a.costTitle,costSubtitle:(o=s.cost)==null?void 0:o.costSubtitle,currencySymbol:It(e)}}const Ce=Ge({frequency:{id:"frequency",defaultMessage:"month"},frequencyWithTaxInformation:{id:"frequencyWithTaxInformation",defaultMessage:"month (including {tax_type})"},frequencyWithTaxInformationIncludingAmount:{id:"frequencyWithTaxInformationIncludingAmount",defaultMessage:"month (includes {vat_amount} of {tax_type})"},teamPricingVATDisclaimer:{id:"pricingPlanConstants.teams.teamPricingVATDisclaimer",defaultMessage:"VAT excluded at checkout with valid VAT ID"},pricingConfigFallback:{id:"PricingModalColumn.pricingConfigFallback",defaultMessage:"Please reload page, checkout pricing not available."},remainingDiscountDate:{id:"remainingDiscountDate",defaultMessage:"until {remaining_discount_date}"},subscriptionFrequencyTaxInformation:{id:"PricingModalColumn.subscriptionFrequencyTaxInformation",defaultMessage:"month ({tax_behavior, select, inclusive {inclusive of} exclusive {exclusive of} other {exclusive of} } {tax_type, select, gst {GST} vat {VAT} other {tax} })"},subscriptionFrequencyTaxInformationWithAmount:{id:"PricingModalColumn.subscriptionFrequencyTaxInformationWithAmount",defaultMessage:"month ({tax_behavior, select, inclusive {includes} exclusive {plus} other {plus} } {tax_amount} of {tax_type, select, gst {GST} vat {VAT} other {tax} })"},reverseChargeTaxDisclaimer:{id:"PricingModalColumn.reverseChargeTaxDisclaimer",defaultMessage:"{tax_type, select, gst {GST} vat {VAT} other {Tax} } excluded at checkout with a valid {tax_type, select, gst {GST} vat {VAT} other {tax} } ID"}}),bs=()=>{re.logEvent("Account Portal: Click Get Help")};function Qn(s){if($s(s))return"secondary";switch(s){case E.FREE:return"green";case E.GO:return"green";case E.PLUS:return"green";case E.SELF_SERVE_BUSINESS:return"primary";case E.PRO:return"primary";case E.QUORUM:return"primary"}}function ls(d){var m=d,{isCurrentPlan:s=!1,planType:e,disabled:n,loading:a=!1,onClick:o,children:r,testId:i,activeColor:l}=m,g=nt(m,["isCurrentPlan","planType","disabled","loading","onClick","children","testId","activeColor"]);return t.jsx(ut,B(b({fullWidth:!0,size:"large",color:s?"secondary":l||Qn(e),disabled:n,loading:a,onClick:o,"data-testid":i,className:n?"bg-token-sidebar-surface-tertiary text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary border-none font-semibold":"font-semibold"},g),{children:r}))}function Ms(s,e){const[n,a]=se.useState(!1);se.useEffect(()=>{if(!n){a(!0);return}s?re.logEventWithStatsig("Email Verify Popup Shown","chatgpt_email_verify_popup_shown",e):re.logEventWithStatsig("Email Verify Popup Hidden","chatgpt_email_verify_popup_hidden",e)},[s])}function vs({ctx:s,shouldLogExposure:e}){return Ae(s,"2273762597",{disableExposureLog:!e})}function Zn({ctx:s,shouldLogExposure:e}){return vs({ctx:s,shouldLogExposure:e}).get("web_plus_intro_offer_coupon","none")}function Jn({ctx:s,shouldLogExposure:e}){return vs({ctx:s,shouldLogExposure:e}).get("is_plus_intro_offer_enabled",!1)}function Xn({planType:s}){return s===E.PLUS?Ue.getPlus:Ue.getPro}const Da=s=>{"use forget";const e=be.c(18),{billingDetails:n,isWebRedesign:a,shouldUseComparisonSpacing:o,shouldUseOnboardingFeatures:r,isUnifiedPricingPage:i,className:l,cta:g}=s;let d;e[0]!==a||e[1]!==r?(d=rn({isWebRedesign:a,shouldUseOnboardingFeatures:r}),e[0]=a,e[1]=r,e[2]=d):d=e[2];const m=d;let f;e[3]!==g||e[4]!==a||e[5]!==m?(f=g!=null?g:t.jsx(ut,{color:"secondary",disabled:!0,size:"large",className:$(a?"btn-secondary disabled:bg-token-bg-primary w-[100%]":"bg-token-sidebar-surface-tertiary text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary w-[100%] border-none font-semibold"),children:t.jsx(h,b({},m.callToAction.inactive))}),e[3]=g,e[4]=a,e[5]=m,e[6]=f):f=e[6];let S;e[7]!==a?(S=[t.jsx(h,B(b({},ea.haveExistingPlan),{values:{link:y=>t.jsx(Ie,{target:"_blank",to:ys,onClick:bs,className:$("underline",a&&"font-medium"),children:y},"row-plus-plan-help-link")}}),"existing-plan-help")],e[7]=a,e[8]=S):S=e[8];let c;return e[9]!==n||e[10]!==l||e[11]!==i||e[12]!==a||e[13]!==m||e[14]!==o||e[15]!==f||e[16]!==S?(c=t.jsx(Ut,{className:l,isUnifiedPricingPage:i,planType:E.FREE,pricingPlan:m,shouldUseComparisonSpacing:o,callToActionButton:f,additionalLinks:S,billingDetails:n,isWebRedesign:a,isCheckoutPricingConfigLoading:!1,checkoutPricingConfigError:null}),e[9]=n,e[10]=l,e[11]=i,e[12]=a,e[13]=m,e[14]=o,e[15]=f,e[16]=S,e[17]=c):c=e[17],c},ea=Ge({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? <link>See billing help</link>"}});function Tt(s,e,n,a,o){const i=Te(o,tt,x.Month).amount,l=It(a),g=i*e;let d;if("percentage"in n)d=g*(1-n.percentage/100);else if("value"in n)d=g-n.value;else throw new Error("Invalid discount type");return{formattedDiscountedCost:s.formatNumber(d,{style:"currency",currency:a,minimumFractionDigits:0,maximumFractionDigits:2}),currencySymbol:l}}function Es(s,e,n,a){const o=b({},e);let r;if(a&&(a.period==="year"?a.num_periods===1?r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForSingleYear",defaultMessage:"for the first year"}):r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForPluralYears",defaultMessage:"for the first {num_years} years"},{num_years:a.num_periods}):a.num_periods===1?r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForSingleMonth",defaultMessage:"for the first month"}):r=s.formatMessage({id:"pricingPlanConstants.promoCostSubtitleForPluralMonths",defaultMessage:"for the first {num_months} months"},{num_months:a.num_periods})),o.costDuration={id:"promoCostDuration",defaultMessage:r,description:"Cost duration for promo plan"},"percentage"in n||"discount_type"in n&&n.discount_type===lt.PERCENTAGE){const l=(1-("percentage"in n?n.percentage:n.amount)/100)*o.costValue;o.costValue=l,o.costTitle={id:"discountedCost",defaultMessage:jt(l).toString()}}else if("value"in n||n.discount_type===lt.FIXED){const i="value"in n?n.value:n.amount,l=Math.max(0,o.costValue-i);o.costValue=l,o.costTitle={id:"discountedCost",defaultMessage:jt(l).toString()}}return o}function is(s,e){const n=it(new Date,s);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(n)}function ta({isWebRedesign:s,currentAccount:e,intl:n,billingDetails:a,pricingPlan:o,promoMetadata:r,columnPlanType:i}){var T;if(r||!e.data.subscriptionStatus.discount)return{activeDiscountMetadata:null,scheduledAdditionalLink:null};const l=e.getDaysUntilPlanDiscountExpires(),g=e.data.subscriptionStatus.discount,d=e.planType,m=e.getNextPlanType(),f=(T=g.discount_start_in_num_periods)!=null?T:0,S=f>0&&d===i&&!m,c=f>0&&m===i,y=n.formatNumber(g.amount,{style:"currency",currency:a.currency,minimumFractionDigits:0,maximumFractionDigits:2});return S||c?{activeDiscountMetadata:null,scheduledAdditionalLink:t.jsx("div",{className:"mb-3 w-full",children:t.jsx("div",{className:$(s?"font-medium text-[#615EEB]":"text-green-600","px-1 text-sm"),children:g.discount_type===lt.PERCENTAGE?t.jsx(h,{id:"PlusColumn.scheduledPercentDiscount",defaultMessage:"Your {discountPercent}% discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountPercent:g.amount,numPeriods:f}}):t.jsx(h,{id:"PlusColumn.scheduledFixedDiscount",defaultMessage:"Your {discountFixed} discount will apply in {numPeriods, plural, one {the next billing period} other {# billing periods}}.",values:{discountFixed:y,numPeriods:f}})})})}:f>0||i!==e.data.subscriptionStatus.planType?{activeDiscountMetadata:null,scheduledAdditionalLink:null}:o.cost?(o.cost=Es(n,o.cost,g),g.discount_type===lt.PERCENTAGE?{activeDiscountMetadata:{discount:{percentage:g.amount,expires_at:l?is(l,n.locale):void 0}},scheduledAdditionalLink:null}:g.discount_type===lt.FIXED?{activeDiscountMetadata:{discount:{value:g.amount,expires_at:l?is(l,n.locale):void 0}},scheduledAdditionalLink:null}:{activeDiscountMetadata:null,scheduledAdditionalLink:null}):{activeDiscountMetadata:null,scheduledAdditionalLink:null}}const ws="https://help.openai.com/en/articles/10492689-chatgpt-plus-promotions-referrals",sa={[E.GO]:"https://help.openai.com/en/articles/12501659-chatgpt-go-promotions-and-referrals",[E.PLUS]:ws};function cs(s,e,n,a){let o;switch(s){case"month":o=zs(new Date,e);break;case"year":o=qs(new Date,e);break}return a&&o&&(o=it(o,a)),new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric"}).format(o)}function js({intl:s,pricingPlan:e,planName:n,promoMetadata:a,currency:o,currentAccount:r,checkoutPricingConfig:i}){var O,Y,R,Z,U,I,P,G,z,V,j,K;if(!e.cost)return e;const{costTitle:l,currencySymbol:g}=Cs(e,o),d=(Y=(O=l==null?void 0:l.defaultMessage)==null?void 0:O.toString())!=null?Y:"20",m=Rt(n.toLowerCase()),{schedule:f}=a,S=(Z=(R=a.duration)==null?void 0:R.period)!=null?Z:"month",c=(I=(U=a.duration)==null?void 0:U.num_periods)!=null?I:1,y=(P=f==null?void 0:f.start_after_num_periods)!=null?P:0,T=(G=f==null?void 0:f.period)!=null?G:S,u=y>0?cs(T,y,s.locale):void 0,p=cs(S,c+(y>0?y:0),s.locale,r==null?void 0:r.getDaysUntilPlanRenews()),_=Es(s,e.cost,a.discount,(z=a.duration)!=null?z:{num_periods:1,period:"month"}),N=(j=(V=g.code.defaultMessage)==null?void 0:V.toString())!=null?j:"USD",D=s.formatNumber(parseFloat(d)||0,{style:"currency",currency:N,minimumFractionDigits:0,maximumFractionDigits:2}),A=(a==null?void 0:a.no_auto_renewal_at_discount_end)===!0;let M;switch(S){case"month":y>0?c===1?M=s.formatMessage(ne.promoPlanDisclaimerScheduledForSingleMonth,{start_date:u,end_date:p,cost:D,plan_name:m}):M=s.formatMessage(ne.promoPlanDisclaimerScheduledForPluralMonths,{num_months:c,start_date:u,end_date:p,cost:D,plan_name:m}):c===1?M=A?s.formatMessage(ne.promoPlanDisclaimerNoRenewForSingleMonth,{}):s.formatMessage(ne.promoPlanDisclaimerForSingleMonth,{date:p,cost:D,plan_name:m}):M=A?s.formatMessage(ne.promoPlanDisclaimerNoRenewForPluralMonths,{num_months:c}):s.formatMessage(ne.promoPlanDisclaimerForPluralMonths,{num_months:c,date:p,cost:D,plan_name:m});break;case"year":y>0?c===1?M=s.formatMessage(ne.promoPlanDisclaimerScheduledForSingleYear,{start_date:u,end_date:p,cost:D,plan_name:m}):M=s.formatMessage(ne.promoPlanDisclaimerScheduledForPluralYears,{num_years:c,start_date:u,end_date:p,cost:D,plan_name:m}):c===1?M=A?s.formatMessage(ne.promoPlanDisclaimerNoRenewForSingleYear,{}):s.formatMessage(ne.promoPlanDisclaimerForSingleYear,{date:p,cost:D,plan_name:m}):M=A?s.formatMessage(ne.promoPlanDisclaimerNoRenewForPluralYears,{num_years:c}):s.formatMessage(ne.promoPlanDisclaimerForPluralYears,{num_years:c,date:p,cost:D,plan_name:m});break;case"hour":throw new Error("Period 'hour' is not supported")}const H="<article>"+s.formatMessage(ne.termsApply)+"</article> "+M,w=(K=sa[n])!=null?K:ws;let F=a.summary;if(y>0){const{formattedDiscountedCost:q}=Tt(s,1,a.discount,o,i),L=q;switch(S){case"month":c===1?F=s.formatMessage(ne.promoSummaryScheduledForSingleMonth,{discounted_cost:L}):F=s.formatMessage(ne.promoSummaryScheduledForPluralMonths,{discounted_cost:L,num_months:c});break;case"year":c===1?F=s.formatMessage(ne.promoSummaryScheduledForSingleYear,{discounted_cost:L}):F=s.formatMessage(ne.promoSummaryScheduledForPluralYears,{discounted_cost:L,num_years:c});break}}let k=_;if(y>0){const{formattedDiscountedCost:q}=Tt(s,1,a.discount,o,i);let L;switch(S){case"month":c===1?L=s.formatMessage(ne.promoCostSubtitleScheduledForSingleMonth,{start_date:u,discounted_cost:q}):L=s.formatMessage(ne.promoCostSubtitleScheduledForPluralMonths,{start_date:u,discounted_cost:q,num_months:c});break;case"year":c===1?L=s.formatMessage(ne.promoCostSubtitleScheduledForSingleYear,{start_date:u,discounted_cost:q}):L=s.formatMessage(ne.promoCostSubtitleScheduledForPluralYears,{start_date:u,discounted_cost:q,num_years:c});break}k=B(b({},e.cost),{costDuration:{id:"promoCostDurationScheduled",defaultMessage:L,description:"Cost duration subtitle for scheduled promo indicating when discount starts and for how long"}})}return e=B(b({},e),{summary:{id:"promoSummary",defaultMessage:F},disclaimer:{id:"promoDisclaimer",defaultMessage:H,article:w},fullPriceResumeDateString:p,cost:k,callToAction:B(b({},e.callToAction),{promo:Os({id:"pricingPlanConstants.promo.callToAction",defaultMessage:"Apply to My Subscription"})})}),e}const ne=Ge({promoPlanDisclaimerForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleMonth",defaultMessage:"Promo pricing applies for 1 month starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerScheduledForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerScheduledForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerScheduledForSingleYear",defaultMessage:"Promo pricing applies for 1 year starting {start_date}. Starting {end_date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleMonth",defaultMessage:"Promo pricing applies for 1 month. Starting {date}, ChatGPT {plan_name} will continue at {cost}/month. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralMonths:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralMonths",defaultMessage:"Promo pricing applies for {num_months} months."},promoPlanDisclaimerNoRenewForSingleMonth:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleMonth",defaultMessage:"Promo pricing applies for 1 month."},promoCostSubtitleScheduledForPluralMonths:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralMonths",defaultMessage:"Starting {start_date}: {discounted_cost}/month for {num_months} months"},promoCostSubtitleScheduledForSingleMonth:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleMonth",defaultMessage:"Starting {start_date}: {discounted_cost}/month for 1 month"},promoCostSubtitleScheduledForPluralYears:{id:"pricingPlanConstants.promoCostSubtitleScheduledForPluralYears",defaultMessage:"Starting {start_date}: {discounted_cost}/year for {num_years} years"},promoCostSubtitleScheduledForSingleYear:{id:"pricingPlanConstants.promoCostSubtitleScheduledForSingleYear",defaultMessage:"Starting {start_date}: {discounted_cost}/year for 1 year"},promoPlanDisclaimerForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerForSingleYear",defaultMessage:"Promo pricing applies for 1 year. Starting {date}, ChatGPT {plan_name} will continue at {cost}/year. Cancel anytime."},promoPlanDisclaimerNoRenewForPluralYears:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForPluralYears",defaultMessage:"Promo pricing applies for {num_years} years."},promoPlanDisclaimerNoRenewForSingleYear:{id:"pricingPlanConstants.promoPlanDisclaimerNoRenewForSingleYear",defaultMessage:"Promo pricing applies for 1 year."},termsApply:{id:"pricingPlanConstants.termsApply",defaultMessage:"Promo terms apply."},promoSummaryScheduledForPluralMonths:{id:"pricingPlanConstants.promoSummaryScheduledForPluralMonths",defaultMessage:"Pay for the first month, then the next {num_months} months are {discounted_cost}."},promoSummaryScheduledForSingleMonth:{id:"pricingPlanConstants.promoSummaryScheduledForSingleMonth",defaultMessage:"Pay for the first month, then the next month is {discounted_cost}."},promoSummaryScheduledForPluralYears:{id:"pricingPlanConstants.promoSummaryScheduledForPluralYears",defaultMessage:"Pay for the first year, then the next {num_years} years are {discounted_cost}."},promoSummaryScheduledForSingleYear:{id:"pricingPlanConstants.promoSummaryScheduledForSingleYear",defaultMessage:"Pay for the first year, then the next year is {discounted_cost}."}}),Ds=Ks(s=>({recentlyDowngraded:!1,recentlyUpgraded:!1,recentlyCanceled:!1,setRecentlyDowngraded:e=>s({recentlyDowngraded:e}),setRecentlyUpgraded:e=>s({recentlyUpgraded:e}),setRecentlyCanceled:e=>s({recentlyCanceled:e})}));function Ns(s){switch(s){case E.FREE:return"chatgptfreeplan";case E.GO:return"chatgptgoplan";case E.PLUS:return"chatgptplusplan";case E.PRO:return"chatgptpro";case E.SELF_SERVE_BUSINESS:return"chatgptteamplan";default:throw new Error("Invalid plan type: ".concat(s))}}function Re(s){return Rt(s.toLowerCase())}function Ts({isOpen:s,onClose:e,accountId:n,initialPlanType:a,updatedPlanType:o,billingDetails:r,promoMetadata:i,promoCode:l,fullPriceResumeDateString:g,onPromoClose:d}){"use no forget";var ce,le,oe;const m=ct(),f=ye(),S=fs(),c=Ws(),[y,T]=se.useState(!1),u=(i==null?void 0:i.plan_type_change)==="equal",p=a===o&&!u,_=st(a)<st(o),N=Ns(o);se.useEffect(()=>{re.logTogglePlanManagementModal({isOpen:!0})},[]);const D=()=>{re.logTogglePlanManagementModal({isOpen:!1}),e()},A=ln(n),M=cn(n),H=un(n),{data:w,isError:F,isLoading:k}=_s(n,void 0,N,void 0,u),{data:O,isLoading:Y,error:R}=Ct({countryCode:r.country,currency:r.currency,ctx:m});!p&&(F||R!=null)&&((c==null?void 0:c.planType)===E.SELF_SERVE_BUSINESS?S.warning(f.formatMessage({id:"planManagement.errorUpgradingTeam",defaultMessage:"Updates to {capitalizedUpdatedPlanType} aren't yet supported for users with Team subscriptions"},{capitalizedUpdatedPlanType:Re(o)}),{hasCloseButton:!0}):S.warning(f.formatMessage({id:"planManagement.errorFetchingPreview",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),e());const Z=W=>new Intl.DateTimeFormat(f.locale,{year:"numeric",month:"short",day:"numeric"}).format(W),U=c==null?void 0:c.getDaysUntilPlanRenews();let I=typeof U=="number"&&U>0?it(new Date,U):null,P=I?Z(I):"";const G=c==null?void 0:c.getDaysUntilSubscriptionCancelAt();I&&typeof U=="number"&&typeof G=="number"&&G>0&&G>U&&(I=it(new Date,G),P=Z(I));const{recentlyCanceled:z,setRecentlyUpgraded:V,setRecentlyDowngraded:j}=Ds(),K=(c==null?void 0:c.willRenewSubscription())||z,[q,L]=se.useState(!1),ee=Bs();if(!c)return null;const te=u?I:w!=null&&w.renewal_date?new Date(w.renewal_date):null,de=te?te.toLocaleDateString(f.locale,{year:"numeric",month:"long",day:"numeric"}):f.formatMessage(Ue.notApplicable),Me=g?new Date(g).toLocaleDateString(f.locale,{year:"numeric",month:"long",day:"numeric"}):f.formatMessage(Ue.notApplicable),me=It(r.currency),{goCost:fe,plusCost:ie,proCost:_e}=Rs(r.currency,O),Pe=(le=(ce=i==null?void 0:i.duration)==null?void 0:ce.num_periods)!=null?le:1,{formattedDiscountedCost:X}=i!=null&&i.discount&&!Y&&!R&&O?Tt(f,Pe,i.discount,(oe=me.code.defaultMessage)==null?void 0:oe.toString(),O):{formattedDiscountedCost:null},ge=async W=>{var Q;T(!0);try{if(p)await M.mutateAsync(n),S.success(P===""?f.formatMessage({id:"planManagement.successfullyRenewedSubscription2",defaultMessage:"Your subscription has been renewed."}):f.formatMessage({id:"planManagement.successfullyRenewedSubscription",defaultMessage:"Your subscription has been renewed. Your subscription will auto-renew on {renewalDate}."},{renewalDate:P}),{hasCloseButton:!0}),re.logEvent("Renew Plan Success",{planType:W}),Kt.logEvent("chatgpt_renew_plan_success",null,{planType:W});else if(u&&l)await A.mutateAsync({accountId:n,updatedPlan:void 0,updatedPriceInterval:void 0,updatedSeats:void 0,updatedPromoCode:l}),S.success(P===""?f.formatMessage({id:"planManagement.successfullyRenewedSubscriptionPromotion",defaultMessage:"Your subscription has been updated and will auto-renew at the promotional rate of {promotionalCost} during your next billing cycle."},{promotionalCost:X}):f.formatMessage({id:"planManagement.successfullyRenewedSubscriptionPromotion2",defaultMessage:"Your subscription has been updated and will auto-renew at your promotional rate of {promotionalCost} on {renewalDate}."},{renewalDate:P,promotionalCost:X}),{hasCloseButton:!0});else{K||(await M.mutateAsync(n),L(!0));const ue=l?void 0:N;await A.mutateAsync({accountId:n,updatedPlan:ue,updatedPriceInterval:void 0,updatedSeats:void 0,updatedPromoCode:l!=null?l:void 0});const ve=_?f.formatMessage({id:"planManagement.successfullyUpdatedSubscription",defaultMessage:"You're now subscribed to ChatGPT {capitalizedUpdatedPlanType}"},{capitalizedUpdatedPlanType:Re(o)}):f.formatMessage({id:"planManagement.updatedSubscriptionToPlus",defaultMessage:"Your subscription has been updated. Your subscription will change to {capitalizedUpdatedPlanType} on {renewalDateFormatted}."},{renewalDateFormatted:de,capitalizedUpdatedPlanType:Re(o)});if(W!==o){const Le=_?"Upgrade Plan Success":"Downgrade Plan Success",dt=_?"chatgpt_upgrade_plan_success":"chatgpt_downgrade_plan_success";re.logEvent(Le,{fromPlan:W,toPlan:o}),Kt.logEvent(dt,null,{fromPlan:W,toPlan:o}),_?V(!0):j(!0),S.success(ve,{hasCloseButton:!0})}localStorage.setItem("subscriptionUpdateMessage_".concat(c.id),ve)}ee.invalidateQueries(Qs());const J=Wt.getItem(Qt.CheckoutFrom);jn(J)&&(Wt.removeItem(Qt.CheckoutFrom),window.location.href=Dn[J]),e()}catch(J){((Q=J==null?void 0:J.detail)==null?void 0:Q.error_type)==="card_declined"?S.warning(f.formatMessage({id:"planManagement.cardDeclinedError",defaultMessage:"Payment error. Your card may be invalid or authentication may be needed."}),{hasCloseButton:!0}):S.warning(f.formatMessage({id:"planManagement.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),q&&await H.mutateAsync(n),e()}finally{T(!1),l&&(d==null||d())}};let Se=ie;return o===E.GO?Se=fe:o===E.PRO?Se=_e:o!==E.PLUS&&gs.error("Invalid target plan type: ".concat(o)),t.jsx(St,{testId:"modal-plan-management",type:"success",isOpen:s,onClose:D,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:f.formatMessage({id:"planManagementModal.title",defaultMessage:"Confirm plan changes"}),removePopoverStyling:!0,headerClassName:"py-4! px-6! [&_h2]:font-medium",children:k||Y?t.jsx(Fs,{}):u||p&&c?t.jsx(ca,{account:c,renewalDate:P,handleUpdate:()=>ge(a),isUpdating:y,onClose:D,targetPlanCost:Se,currencySymbol:me,promoMetadata:i,fullPriceResumeDateFormatted:Me,formattedDiscountedCost:X,renewalDateFormatted:de}):F||R!=null||!w?null:_?t.jsx(na,{accountId:n,handleUpdate:()=>ge(a),isUpdating:y,onClose:D,initialPlanType:a,updatedPlanType:o,currencySymbol:me}):t.jsx(ia,{renewalDate:w.renewal_date,handleUpdate:()=>ge(a),isUpdating:y,onClose:D,targetPlanCost:Se,currentPlanType:a,updatedPlanType:o,currencySymbol:me,promoMetadata:i,fullPriceResumeDateFormatted:Me,formattedDiscountedCost:X})})}function Fs(){"use forget";const s=be.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=t.jsx("div",{className:"flex items-center justify-center p-6",children:t.jsx(ps,{})}),s[0]=e):e=s[0],e}function ks(s){"use forget";const e=be.c(12),{adjustmentMessage:n,proratedCreditMessage:a,proratedCreditInfoMessage:o}=s;let r;e[0]!==n?(r=t.jsx("span",{className:"font-semibold",children:n}),e[0]=n,e[1]=r):r=e[1];let i;e[2]!==a?(i=t.jsx("span",{className:"font-semibold text-green-600",children:a}),e[2]=a,e[3]=i):i=e[3];let l;e[4]!==r||e[5]!==i?(l=t.jsxs("div",{className:"mt-4 flex justify-between",children:[r,i]}),e[4]=r,e[5]=i,e[6]=l):l=e[6];let g;e[7]!==o?(g=t.jsx("span",{className:"text-token-text-secondary text-sm",children:o}),e[7]=o,e[8]=g):g=e[8];let d;return e[9]!==l||e[10]!==g?(d=t.jsxs("div",{children:[l,g]}),e[9]=l,e[10]=g,e[11]=d):d=e[11],d}function na(s){"use forget";const e=be.c(42),{accountId:n,handleUpdate:a,isUpdating:o,onClose:r,currencySymbol:i,updatedPlanType:l,initialPlanType:g}=s,d=ye();let m;e[0]!==l?(m=Ns(l),e[0]=l,e[1]=m):m=e[1];const{data:f,isError:S,isLoading:c}=_s(n,void 0,m);if(c){let k;return e[2]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(Fs,{}),e[2]=k):k=e[2],k}if(S||!f)return null;let y,T,u;if(e[3]!==i||e[4]!==f||e[5]!==g||e[6]!==d||e[7]!==l){const k=ra({data:f,intl:d,currencySymbol:i,currentPlanType:g});y="px-6 pb-6",e[11]!==i||e[12]!==f||e[13]!==l?(T=t.jsx(la,{data:f,currencySymbol:i,updatedPlanType:l}),e[11]=i,e[12]=f,e[13]=l,e[14]=T):T=e[14],u=k.filter(oa).map(aa),e[3]=i,e[4]=f,e[5]=g,e[6]=d,e[7]=l,e[8]=y,e[9]=T,e[10]=u}else y=e[8],T=e[9],u=e[10];let p;e[15]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx("hr",{className:"mt-4 mb-4"}),e[15]=p):p=e[15];let _;e[16]!==i||e[17]!==f?(_=t.jsx(Is,{data:f,currencySymbol:i}),e[16]=i,e[17]=f,e[18]=_):_=e[18];let N;e[19]!==f.default_payment_method?(N=f.default_payment_method&&t.jsxs(t.Fragment,{children:[t.jsx("hr",{className:"mt-4 mb-4"}),t.jsx(As,{defaultPaymentMethod:f.default_payment_method})]}),e[19]=f.default_payment_method,e[20]=N):N=e[20];let D;e[21]!==d?(D=d.formatMessage({id:"planUpgradeModal.cancel",defaultMessage:"Cancel"}),e[21]=d,e[22]=D):D=e[22];let A;e[23]!==r||e[24]!==D?(A=t.jsx(et,{title:D,color:"secondary",onClick:r}),e[23]=r,e[24]=D,e[25]=A):A=e[25];let M;e[26]!==d?(M=d.formatMessage({id:"planUpgradeModal.payNow",defaultMessage:"Pay now"}),e[26]=d,e[27]=M):M=e[27];let H;e[28]!==a||e[29]!==o||e[30]!==M?(H=t.jsx(et,{title:M,color:"primary",onClick:a,loading:o}),e[28]=a,e[29]=o,e[30]=M,e[31]=H):H=e[31];let w;e[32]!==H||e[33]!==A?(w=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[A,H]}),e[32]=H,e[33]=A,e[34]=w):w=e[34];let F;return e[35]!==w||e[36]!==y||e[37]!==T||e[38]!==u||e[39]!==_||e[40]!==N?(F=t.jsxs("div",{className:y,children:[T,u,p,_,N,w]}),e[35]=w,e[36]=y,e[37]=T,e[38]=u,e[39]=_,e[40]=N,e[41]=F):F=e[41],F}function aa(s,e){return t.jsx(ks,{adjustmentMessage:s.adjustmentMessage,proratedCreditMessage:s.proratedCreditMessage,proratedCreditInfoMessage:s.proratedCreditInfoMessage},e)}function oa(s){return s.value!==0}function ra({data:s,intl:e,currencySymbol:n,currentPlanType:a}){return[{adjustmentMessage:t.jsx(h,{id:"planUpgradeModal.adjustment",defaultMessage:"Adjustment"}),proratedCreditMessage:t.jsx(h,{id:"planUpgradeModal.proratedCredit",defaultMessage:"-{currencySign}{adjustment}",values:{currencySign:e.formatMessage(n.sign),adjustment:(-s.negative_line_item_total/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(h,{id:"planUpgradeModal.proratedCreditInfo",defaultMessage:"Prorated credit for the remainder of your {currentPlanType} subscription",values:{currentPlanType:a}}),value:s.negative_line_item_total},{adjustmentMessage:t.jsx(h,{id:"planUpgradeModal.discount",defaultMessage:"Adjustment"}),proratedCreditMessage:t.jsx(h,{id:"planUpgradeModal.discountAmount",defaultMessage:"-{currencySign}{discount}",values:{currencySign:e.formatMessage(n.sign),discount:(s.discount_amount/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(h,{id:"planUpgradeModal.discountInfo",defaultMessage:"Account discount applied"}),value:s.discount_amount},{adjustmentMessage:t.jsx(h,{id:"planUpgradeModal.credits",defaultMessage:"Adjustments"}),proratedCreditMessage:t.jsx(h,{id:"planUpgradeModal.creditsAmount",defaultMessage:"-{currencySign}{credits}",values:{currencySign:e.formatMessage(n.sign),credits:(s.applied_balance/100).toFixed(2)}}),proratedCreditInfoMessage:t.jsx(h,{id:"planUpgradeModal.creditsInfo",defaultMessage:"Credits applied"}),value:s.applied_balance}]}function la({data:s,currencySymbol:e,updatedPlanType:n}){const a=ye();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:t.jsx(h,{id:"planUpgradeModal.subscription",defaultMessage:"ChatGPT {capitalizedUpdatedPlanType} subscription",values:{capitalizedUpdatedPlanType:Re(n)}})}),t.jsx("span",{className:"font-semibold",children:t.jsx(h,{id:"planUpgradeModal.subscriptionCost",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:a.formatMessage(e.sign),totalCost:(s.positive_line_item_total/100).toFixed(2)}})})]}),t.jsx("span",{className:"text-token-text-secondary text-sm",children:t.jsx(h,{id:"planUpgradeModal.billingCycle",defaultMessage:"Billed monthly, starting today"})})]})}function Is(s){"use forget";const e=be.c(17),{data:n,currencySymbol:a}=s,o=ye();let r;e[0]!==a.sign||e[1]!==n.amount_due.amount_excluding_tax||e[2]!==n.amount_due.tax_amount||e[3]!==o?(r=n.amount_due.tax_amount>0&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mt-4 flex justify-between",children:[t.jsx("span",{className:"font-semibold",children:t.jsx(h,{id:"planUpgradeModal.subTotal",defaultMessage:"Subtotal"})}),t.jsx("span",{children:t.jsx(h,{id:"planUpgradeModal.subtotalPrice",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:o.formatMessage(a.sign),totalCost:(n.amount_due.amount_excluding_tax/100).toFixed(2)}})})]}),t.jsxs("div",{className:"mt-2 flex justify-between",children:[t.jsxs("span",{className:"font-semibold",children:[t.jsx(h,{id:"planUpgradeModal.tax",defaultMessage:"Tax"}),t.jsx("span",{className:"text-token-text-secondary font-normal",children:t.jsx(h,{id:"planUpgradeModal.taxPercent",defaultMessage:" {taxPercent}%",values:{taxPercent:(n.amount_due.tax_amount/n.amount_due.amount_excluding_tax*100).toFixed(0)}})})]}),t.jsx("span",{children:t.jsx(h,{id:"planUpgradeModal.taxAmount",defaultMessage:"{currencySign}{tax}",values:{currencySign:o.formatMessage(a.sign),tax:(n.amount_due.tax_amount/100).toFixed(2)}})})]})]}),e[0]=a.sign,e[1]=n.amount_due.amount_excluding_tax,e[2]=n.amount_due.tax_amount,e[3]=o,e[4]=r):r=e[4];let i;e[5]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx("span",{className:"font-semibold",children:t.jsx(h,{id:"planUpgradeModal.totalDueToday",defaultMessage:"Total due today"})}),e[5]=i):i=e[5];let l;e[6]!==a.sign||e[7]!==o?(l=o.formatMessage(a.sign),e[6]=a.sign,e[7]=o,e[8]=l):l=e[8];const g=n.amount_due.amount/100;let d;e[9]!==g?(d=g.toFixed(2),e[9]=g,e[10]=d):d=e[10];let m;e[11]!==l||e[12]!==d?(m=t.jsxs("div",{className:"mt-2 flex justify-between",children:[i,t.jsx("span",{className:"font-semibold",children:t.jsx(h,{id:"planUpgradeModal.totalDueTodayAmount",defaultMessage:"{currencySign}{totalCost}",values:{currencySign:l,totalCost:d}})})]}),e[11]=l,e[12]=d,e[13]=m):m=e[13];let f;return e[14]!==r||e[15]!==m?(f=t.jsxs(t.Fragment,{children:[r,m]}),e[14]=r,e[15]=m,e[16]=f):f=e[16],f}function As(s){"use forget";var i;const e=be.c(6),{defaultPaymentMethod:n}=s;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("span",{className:"font-semibold",children:t.jsx(h,{id:"planUpgradeModal.paymentMethod",defaultMessage:"Payment Method"})}),e[0]=a):a=e[0];let o;e[1]!==n.card_brand?(o=(i=n.card_brand)==null?void 0:i.toUpperCase(),e[1]=n.card_brand,e[2]=o):o=e[2];let r;return e[3]!==n.card_last4||e[4]!==o?(r=t.jsxs("div",{className:"flex justify-between",children:[a,t.jsxs("span",{className:"text-token-text-secondary",children:[o," *",n.card_last4]})]}),e[3]=n.card_last4,e[4]=o,e[5]=r):r=e[5],r}function ia(s){"use forget";var L,ee;const e=be.c(66),{renewalDate:n,handleUpdate:a,isUpdating:o,onClose:r,targetPlanCost:i,currentPlanType:l,currencySymbol:g,updatedPlanType:d,promoMetadata:m,fullPriceResumeDateFormatted:f,formattedDiscountedCost:S}=s,c=ye(),y=(m==null?void 0:m.plan_type_change)==="downgrade",T=(ee=(L=m==null?void 0:m.duration)==null?void 0:L.period)!=null?ee:"month";let u;e[0]!==c||e[1]!==n?(u=n?new Date(n).toLocaleDateString(c.locale,{year:"numeric",month:"long",day:"numeric"}):c.formatMessage(Ue.notApplicable),e[0]=c,e[1]=n,e[2]=u):u=e[2];const p=u;let _;e[3]!==l?(_=Re(l),e[3]=l,e[4]=_):_=e[4];let N;e[5]!==d?(N=Re(d),e[5]=d,e[6]=N):N=e[6];let D;e[7]!==p||e[8]!==_||e[9]!==N?(D=t.jsx("p",{className:"text-token-text-secondary",children:t.jsx(h,{id:"planDowngradeModal.currentSubscription",defaultMessage:"Your current {currentPlanType} subscription will remain active until {renewalDateFormatted}, when it will change to {nextPlanType}.",values:{renewalDateFormatted:p,currentPlanType:_,nextPlanType:N}})}),e[7]=p,e[8]=_,e[9]=N,e[10]=D):D=e[10];const A=y?"text-token-text-primary text-[15px]":"font-semibold";let M;e[11]!==d?(M=Re(d),e[11]=d,e[12]=M):M=e[12];let H;e[13]!==M?(H=t.jsx(h,{id:"planDowngradeModal.newPlan",defaultMessage:"ChatGPT {capitalizedUpdatedPlanType}",values:{capitalizedUpdatedPlanType:M}}),e[13]=M,e[14]=H):H=e[14];let w;e[15]!==A||e[16]!==H?(w=t.jsx("span",{className:A,children:H}),e[15]=A,e[16]=H,e[17]=w):w=e[17];let F;e[18]!==g||e[19]!==S||e[20]!==c||e[21]!==y||e[22]!==i?(F=y?t.jsx("span",{className:"text-token-text-primary text-[15px]",children:t.jsx(h,{id:"planDowngradeModal.newPlanCostOfPromo",defaultMessage:"{promotionalCost} w/ promo",values:{promotionalCost:S}})}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(h,{id:"planDowngradeModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:c.formatMessage(g.code),currencySign:c.formatMessage(g.sign),planCost:c.formatMessage(i)}})}),e[18]=g,e[19]=S,e[20]=c,e[21]=y,e[22]=i,e[23]=F):F=e[23];let k;e[24]!==w||e[25]!==F?(k=t.jsxs("div",{className:"flex justify-between",children:[w,F]}),e[24]=w,e[25]=F,e[26]=k):k=e[26];const O=y&&"text-token-text-secondary text-xs";let Y;e[27]!==O?(Y=$("text-token-text-secondary",O),e[27]=O,e[28]=Y):Y=e[28];let R;e[29]!==f||e[30]!==y||e[31]!==T||e[32]!==p?(R=y?Ft({fullPriceResumeDateFormatted:f,period:T,type:"billingStartAfterPromo"}):t.jsx(h,{id:"planDowngradeModal.billingStart",defaultMessage:"Billing will start on {renewalDateFormatted}",values:{renewalDateFormatted:p}}),e[29]=f,e[30]=y,e[31]=T,e[32]=p,e[33]=R):R=e[33];let Z;e[34]!==Y||e[35]!==R?(Z=t.jsx("span",{className:Y,children:R}),e[34]=Y,e[35]=R,e[36]=Z):Z=e[36];let U;e[37]!==g||e[38]!==c||e[39]!==y||e[40]!==i?(U=y&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:t.jsx(h,{id:"planDowngradeModal.newPlanCostAfterPromo",defaultMessage:"{currencySign}{planCost}/month after",values:{currencySign:c.formatMessage(g.sign),planCost:c.formatMessage(i)}})}),e[37]=g,e[38]=c,e[39]=y,e[40]=i,e[41]=U):U=e[41];let I;e[42]!==Z||e[43]!==U?(I=t.jsxs("div",{className:"flex items-center justify-between",children:[Z,U]}),e[42]=Z,e[43]=U,e[44]=I):I=e[44];let P;e[45]!==k||e[46]!==I?(P=t.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col gap-1 rounded-2xl! rounded-md border-[1px] p-4",children:[k,I]}),e[45]=k,e[46]=I,e[47]=P):P=e[47];let G;e[48]!==c?(G=c.formatMessage({id:"planDowngradeModal.cancel",defaultMessage:"Cancel"}),e[48]=c,e[49]=G):G=e[49];let z;e[50]!==r||e[51]!==G?(z=t.jsx(et,{title:G,color:"secondary",onClick:r}),e[50]=r,e[51]=G,e[52]=z):z=e[52];let V;e[53]!==c?(V=c.formatMessage({id:"planDowngradeModal.confirm",defaultMessage:"Confirm"}),e[53]=c,e[54]=V):V=e[54];let j;e[55]!==a||e[56]!==o||e[57]!==V?(j=t.jsx(et,{title:V,color:"primary",onClick:a,loading:o}),e[55]=a,e[56]=o,e[57]=V,e[58]=j):j=e[58];let K;e[59]!==z||e[60]!==j?(K=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[z,j]}),e[59]=z,e[60]=j,e[61]=K):K=e[61];let q;return e[62]!==P||e[63]!==K||e[64]!==D?(q=t.jsxs("div",{className:"px-6 pb-6",children:[D,P,K]}),e[62]=P,e[63]=K,e[64]=D,e[65]=q):q=e[65],q}function ca(s){"use forget";var q,L;const e=be.c(63),{account:n,renewalDate:a,handleUpdate:o,isUpdating:r,onClose:i,targetPlanCost:l,currencySymbol:g,promoMetadata:d,fullPriceResumeDateFormatted:m,renewalDateFormatted:f,formattedDiscountedCost:S}=s,c=ye(),y=n.data.subscriptionStatus.planType;let T;e[0]!==y?(T=Re(y),e[0]=y,e[1]=T):T=e[1];const u=T,p=(d==null?void 0:d.plan_type_change)==="equal",_=(L=(q=d==null?void 0:d.duration)==null?void 0:q.period)!=null?L:"month";let N;e[2]!==p||e[3]!==_||e[4]!==u||e[5]!==a||e[6]!==f?(N=p?Ft({renewalDateFormatted:f,period:_,type:"currentSubscriptionPromo"}):t.jsx(h,{id:"planRenewalModal.currentSubscription",defaultMessage:"Your current {planName} subscription will auto-renew on {renewalDate}.",values:{planName:u,renewalDate:a}}),e[2]=p,e[3]=_,e[4]=u,e[5]=a,e[6]=f,e[7]=N):N=e[7];let D;e[8]!==N?(D=t.jsx("p",{className:"text-token-text-primary",children:N}),e[8]=N,e[9]=D):D=e[9];const A=p?"text-token-text-primary text-[15px]":"font-semibold";let M;e[10]!==u?(M=t.jsx(h,{id:"planRenewalModal.newPlan",defaultMessage:"ChatGPT {planName}",values:{planName:u}}),e[10]=u,e[11]=M):M=e[11];let H;e[12]!==A||e[13]!==M?(H=t.jsx("span",{className:A,children:M}),e[12]=A,e[13]=M,e[14]=H):H=e[14];let w;e[15]!==g||e[16]!==S||e[17]!==c||e[18]!==p||e[19]!==l?(w=p?t.jsx("span",{className:"text-token-text-primary text-[15px]",children:t.jsx(h,{id:"planRenewalModal.newPlanCostAfterPromo",defaultMessage:"{promotionalCost} w/ promo",values:{promotionalCost:S}})}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(h,{id:"planRenewalModal.newPlanCost",defaultMessage:"{currencyCode} {currencySign}{planCost}/month",values:{currencyCode:c.formatMessage(g.code),currencySign:c.formatMessage(g.sign),planCost:c.formatMessage(l)}})}),e[15]=g,e[16]=S,e[17]=c,e[18]=p,e[19]=l,e[20]=w):w=e[20];let F;e[21]!==H||e[22]!==w?(F=t.jsxs("div",{className:"flex justify-between",children:[H,w]}),e[21]=H,e[22]=w,e[23]=F):F=e[23];const k=p&&"text-token-text-secondary text-xs";let O;e[24]!==k?(O=$("text-token-text-secondary",k),e[24]=k,e[25]=O):O=e[25];let Y;e[26]!==m||e[27]!==p||e[28]!==a?(Y=p?t.jsx(h,{id:"planRenewalModal.billingStartAfterPromo",defaultMessage:"Billing will start on {fullPriceResumeDateFormatted}",values:{fullPriceResumeDateFormatted:m}}):t.jsx(h,{id:"planRenewalModal.billingStart",defaultMessage:"Billing will auto-renew on {renewalDate}",values:{renewalDate:a}}),e[26]=m,e[27]=p,e[28]=a,e[29]=Y):Y=e[29];let R;e[30]!==O||e[31]!==Y?(R=t.jsx("span",{className:O,children:Y}),e[30]=O,e[31]=Y,e[32]=R):R=e[32];let Z;e[33]!==g||e[34]!==c||e[35]!==p||e[36]!==_||e[37]!==l?(Z=p&&t.jsx("span",{className:"text-token-text-secondary text-xs",children:Ft({period:_,type:"newPlanCostAfterPromo",currencySign:c.formatMessage(g.sign),planCost:c.formatMessage(l)})}),e[33]=g,e[34]=c,e[35]=p,e[36]=_,e[37]=l,e[38]=Z):Z=e[38];let U;e[39]!==R||e[40]!==Z?(U=t.jsxs("div",{className:"flex items-center justify-between",children:[R,Z]}),e[39]=R,e[40]=Z,e[41]=U):U=e[41];let I;e[42]!==U||e[43]!==F?(I=t.jsxs("div",{className:"bg-token-main-surface-secondary mt-4 flex flex-col gap-1 rounded-2xl! rounded-md border-[1px] p-4",children:[F,U]}),e[42]=U,e[43]=F,e[44]=I):I=e[44];let P;e[45]!==c?(P=c.formatMessage({id:"planRenewalModal.cancel",defaultMessage:"Cancel"}),e[45]=c,e[46]=P):P=e[46];let G;e[47]!==i||e[48]!==P?(G=t.jsx(et,{title:P,color:"secondary",onClick:i}),e[47]=i,e[48]=P,e[49]=G):G=e[49];let z;e[50]!==c?(z=c.formatMessage({id:"planRenewalModal.confirm",defaultMessage:"Confirm"}),e[50]=c,e[51]=z):z=e[51];let V;e[52]!==o||e[53]!==r||e[54]!==z?(V=t.jsx(et,{title:z,color:"primary",onClick:o,loading:r}),e[52]=o,e[53]=r,e[54]=z,e[55]=V):V=e[55];let j;e[56]!==G||e[57]!==V?(j=t.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[G,V]}),e[56]=G,e[57]=V,e[58]=j):j=e[58];let K;return e[59]!==I||e[60]!==j||e[61]!==D?(K=t.jsxs("div",{className:"px-6 pb-6",children:[D,I,j]}),e[59]=I,e[60]=j,e[61]=D,e[62]=K):K=e[62],K}function Rs(s,e){if(!e)return{goCost:bt.free.costRetrievalError,plusCost:bt.free.costRetrievalError,proCost:bt.free.costRetrievalError};const n=Te(e,wt,x.Month),a=Te(e,tt,x.Month),o=Te(e,Xt,x.Month);return{goCost:Xe(n.amount,wt,s),plusCost:Xe(a.amount,tt,s),proCost:Xe(o.amount,Xt,s)}}function Ft({fullPriceResumeDateFormatted:s,renewalDateFormatted:e,period:n,type:a,currencySign:o,planCost:r}){switch(["month","year"].includes(n)||gs.warn("Invalid period passed to PlanManagementModal.getPeriodFormattedMessage",{period:n}),a){case"billingStartAfterPromo":return t.jsx(h,{id:"planDowngradeModal.billingResumeAfterPromo",defaultMessage:"Billing will resume on {fullPriceResumeDateFormatted}",values:{fullPriceResumeDateFormatted:s}});case"currentSubscriptionPromo":return t.jsx(h,{id:"planRenewalModal.currentSubscriptionPromo",defaultMessage:"After the billing cycle for your current plan ends on {renewalDateFormatted}, your promotional subscription will go into effect.",values:{renewalDateFormatted:e}});case"newPlanCostAfterPromo":if(n==="month")return t.jsx(h,{id:"planDowngradeModal.newPlanCostAfterPromoMonth",defaultMessage:"{currencySign}{planCost}/month after",values:{currencySign:o,planCost:r}});if(n==="year")return t.jsx(h,{id:"planDowngradeModal.newPlanCostAfterPromoYear",defaultMessage:"{currencySign}{planCost}/year after",values:{currencySign:o,planCost:r}});break}}const Na=Object.freeze(Object.defineProperty({__proto__:null,AdjustmentSection:ks,PaymentMethodSection:As,TotalCostSection:Is,default:Ts,getPrice:Rs},Symbol.toStringTag,{value:"Module"})),ua=Zs(()=>Ys(()=>import("./3j20em1lilnrpdcm.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>Js(s)});function da({isOpen:s,onClose:e,onContinue:n,analyticsParams:a}){se.useEffect(()=>{s&&re.logEventWithStatsig("Mobile Subscription Warning Modal Shown","chatgpt_mobile_subscription_warning_modal_shown",a)},[a,s]);const o=()=>{re.logEventWithStatsig("Mobile Subscription Warning Modal Continue Clicked","chatgpt_mobile_subscription_warning_modal_continue_clicked",a),n()},r=()=>{re.logEventWithStatsig("Mobile Subscription Warning Modal Close Clicked","chatgpt_mobile_subscription_warning_modal_close_clicked",a),e()};return t.jsx(St,{testId:"modal-mobile-subscription-warning",isOpen:s,onClose:r,type:"warning",icon:ua,title:t.jsx(h,b({},gt.checkSubscriptionHeader)),primaryButton:t.jsx(Zt.Button,{title:gt.dismissModal.defaultMessage,color:"primary",onClick:r}),secondaryButton:t.jsx(Zt.Button,{title:gt.continueToNextStep.defaultMessage,color:"secondary",onClick:o}),children:t.jsx("span",{className:"gap-2 text-gray-600",children:gt.checkSubscriptionBody.defaultMessage})})}const gt=Ge({checkSubscriptionHeader:{id:"mobileSubscriptionWarningModal.checkSubscriptionHeader",defaultMessage:"Check your App Store subscription"},checkSubscriptionBody:{id:"mobileSubscriptionWarningModal.checkSubscriptionBody",defaultMessage:"Your subscription through the Apple App Store is currently on pause due to a payment issue. Please resolve that issue to resume using ChatGPT Plus and avoid duplicate charges."},dismissModal:{id:"mobileSubscriptionWarningModal.dismissModal",defaultMessage:"Cancel"},continueToNextStep:{id:"mobileSubscriptionWarningModal.continueToNextStep",defaultMessage:"I understand, continue anyways"}});function ma(){"use forget";const s=be.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:fa},s[0]=e):e=s[0],kt(e)}async function fa(){return await Xs.safeGet("/subscriptions/has_app_store_subscription_in_billing_retry")}function ga(s,e){const n=it(new Date,s);return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(n)}function pa(s){"use forget";var g;const e=be.c(10);let n,a,o,r;e[0]!==s?(g=s,{testId:r,activeColor:n,children:a}=g,o=nt(g,["testId","activeColor","children"]),e[0]=s,e[1]=n,e[2]=a,e[3]=o,e[4]=r):(n=e[1],a=e[2],o=e[3],r=e[4]);const i=n!=null?n:"primary";let l;return e[5]!==a||e[6]!==o||e[7]!==i||e[8]!==r?(l=t.jsx(ut,B(b({fullWidth:!0,size:"large",color:i,"data-testid":r},o),{children:a})),e[5]=a,e[6]=o,e[7]=i,e[8]=r,e[9]=l):l=e[9],l}function ha(s,e){const n=s.planType,a=s.getNextPlanType(),o=s.getDaysUntilPlanChanges(),r=a&&st(a)<st(n);return e?{daysUntilPlanChanges:s.getDaysUntilPlanRenews(),isDowngradeScheduled:!0}:{daysUntilPlanChanges:o,isDowngradeScheduled:r}}function xa(s){"use forget";const e=be.c(17),{currentAccount:n,children:a,disableForMobile:o,promoMetadata:r,planType:i,downgradeToGoDisabled:l}=s,{recentlyDowngraded:g}=Ds(),d=ye(),{daysUntilPlanChanges:m,isDowngradeScheduled:f}=ha(n,g),S=se.useRef(!1),c=r!=null&&"referrer_name"in r,y=mn(n);if(o&&y){let p;e[0]!==d?(p=d.formatMessage({id:"I2JCGZ",defaultMessage:"Mobile subscriptions are currently not eligible for this promotion."}),e[0]=d,e[1]=p):p=e[1];let _;e[2]!==c?(_=D=>{D&&!S.current&&(c&&fn.logMobileSubscriptionTooltipOpen(),S.current=!0)},e[2]=c,e[3]=_):_=e[3];let N;return e[4]!==a||e[5]!==p||e[6]!==_?(N=t.jsx(xt,{side:"top",sideOffset:20,label:p,onOpenChange:_,children:a}),e[4]=a,e[5]=p,e[6]=_,e[7]=N):N=e[7],N}if(l){let p;e[8]!==d?(p=d.formatMessage({id:"AccountPaymentModal.primaryCTA.downgradeToGoDisabledTooltip",defaultMessage:"Downgrading to Go is not yet available. To purchase, you must first cancel your current plan."}),e[8]=d,e[9]=p):p=e[9];let _;return e[10]!==a||e[11]!==p?(_=t.jsx(xt,{side:"top",labelTextAlign:"left",sideOffset:20,label:p,children:a}),e[10]=a,e[11]=p,e[12]=_):_=e[12],_}if(f&&m){const p=ga(m,d.locale);let _;return e[13]!==i?(_=Rt(i.toLowerCase()),e[13]=i,e[14]=_):_=e[14],t.jsx(xt,{side:"top",sideOffset:20,label:t.jsx(h,{id:"3UZynm",defaultMessage:"Your subscription will change to {planType} on {date}.",values:{date:p,planType:_}}),children:a})}let u;return e[15]!==a?(u=t.jsx(t.Fragment,{children:a}),e[15]=a,e[16]=u):u=e[16],u}function ya(w){var F=w,{analyticsParams:s,billingDetails:e,currentAccount:n,planType:a,planLoading:o,setPlanLoading:r,testId:i,onPromoClose:l,activeColor:g,disableForMobile:d=!1,disabled:m,downgradeToGoDisabled:f=!1,inhouseCheckoutExperimentEnabled:S=!1,loading:c=!1,overrideOnClick:y,promoCode:T,promoCampaign:u,promoMetadata:p,autoUpgrade:_=!1,fromiOSWebview:N=!1,pricingPlan:D,setShouldShowCheckoutLoadingOverlay:A,children:M}=F,H=nt(F,["analyticsParams","billingDetails","currentAccount","planType","planLoading","setPlanLoading","testId","onPromoClose","activeColor","disableForMobile","disabled","downgradeToGoDisabled","inhouseCheckoutExperimentEnabled","loading","overrideOnClick","promoCode","promoCampaign","promoMetadata","autoUpgrade","fromiOSWebview","pricingPlan","setShouldShowCheckoutLoadingOverlay","children"]);"use no forget";const{data:k,refetch:O}=kt(hs),{trackSelectedPixels:Y}=ts({key:a});let R;switch(a){case E.GO:R="go-secondary";break;case E.PLUS:R="plus-secondary";break;case E.PRO:R="pro-secondary";break;case E.SELF_SERVE_BUSINESS:R="team-secondary";break;default:R=""}const{trackSelectedPixels:Z}=ts({key:R}),U=ct(),{data:{value:I}={}}=ma(),[P,G]=se.useState(!1),[z,V]=se.useState(!1),j=se.useRef(null),[K,q]=se.useState(!1),L=se.useRef(!1),ee=se.useRef(new Map),te=fs(),de=ye(),Me=n.planType,me=st(a)<st(Me),fe=(p==null?void 0:p.plan_name)===vt(a)&&(p==null?void 0:p.plan_type_change)==="equal",ie=Ae(U,"3950229590"),{prepareCheckoutSession:_e,navigateToCheckout:Pe}=dn(),X=n.hasPaidSubscription()&&n.isPlus(),ge=a===E.PLUS&&!X&&ie.get("enabled_prefetch_checkout_for_plus",!1);se.useEffect(()=>{if(!ge)return;const oe={plan_name:vt(a),billing_details:e,promo_code:T,promo_campaign:u},W=JSON.stringify(oe);if(ee.current.has(W))return;re.logEventWithStatsig("Account Pay: Prefetch Checkout Session","chatgpt_account_payment_modal_prefetch_checkout_session",s),ee.current.clear();const Q=ie.get("skip_sentinel_checkout",!1),J=_e(oe,{skipSentinelCheckout:Q,fromiOSWebview:N});ee.current.set(W,J)},[s,e,N,ie,a,_e,u,T,ge]);const Se=()=>{const oe={plan_name:vt(a),billing_details:e,promo_code:T,promo_campaign:u},W=ee.current.get(JSON.stringify(oe));if(W)return re.logEventWithStatsig("Account Pay: Using Prefetched Checkout Session","chatgpt_account_payment_modal_using_prefetched_checkout_session",s),W;re.logEventWithStatsig("Account Pay: Click to Fetch Checkout Session","chatgpt_account_payment_modal_click_to_fetch_checkout_session",s);let Q=!1;return S&&(ee.current.clear(),Q=ie.get("skip_sentinel_checkout",!1)),_e(oe,{skipSentinelCheckout:Q,fromiOSWebview:N})},ce=async({skipEmailCheck:oe})=>{var W,Q;if(!(k!=null&&k.email)&&!oe){q(!0);return}r(a),re.logEvent("Account Pay: Payment Checkout Clicked",s),ht(U,"chatgpt_account_payment_modal_upgrade_button_click",a),j.current=performance.now();try{const J=Ae(U,"3542930659").get("show_loading",!1);A(J);const ue=await Se();let ve;j.current&&(ve=performance.now()-j.current),re.logEvent("Account Pay: Navigating to Payment Checkout",B(b({},s),{url:(W=ue.url)!=null?W:"",latency_ms:ve}));const Le={url:String((Q=ue.url)!=null?Q:"")};ve!==void 0&&(Le.latency_ms=ve.toString()),ht(U,"chatgpt_account_payment_modal_navigating_to_checkout",a,Le),await Pe(ue)}catch(J){te.warning(de.formatMessage(Je.paymentErrorWarning),{hasCloseButton:!0}),A(!1)}r(null)},le=({skipAppStoreSubscriptionInBillingRetryCheck:oe=!1,skipEmailCheck:W=!1}={})=>{if(I&&!oe)return G(!0);if(y)return y(e,s);me||fe?(re.logEvent("Account Pay: Payment Checkout Clicked",s),ht(U,"chatgpt_account_payment_modal_upgrade_button_click",a),V(!0)):(Y(),Z(),ce({skipEmailCheck:W}))};return se.useEffect(()=>{!_||L.current||(L.current=!0,le())},[_]),Ms(K,{plan:s}),t.jsxs(t.Fragment,{children:[t.jsx(xa,{currentAccount:n,disableForMobile:d,promoMetadata:p,planType:a,downgradeToGoDisabled:f,children:t.jsx(pa,B(b({disabled:m,loading:c,onClick:()=>le(),testId:i,activeColor:g},H),{children:o===a?t.jsx(ps,{}):M}))}),t.jsx(da,{isOpen:P,onClose:()=>G(!1),onContinue:()=>le({skipAppStoreSubscriptionInBillingRetryCheck:!0}),analyticsParams:s}),z&&t.jsx(Ts,{isOpen:z,onClose:()=>V(!1),accountId:n.id,initialPlanType:Me,updatedPlanType:a,billingDetails:e,promoMetadata:p,promoCode:T,onPromoClose:l,fullPriceResumeDateString:D.fullPriceResumeDateString}),t.jsx(St,{testId:"modal-add-email",isOpen:K,onClose:()=>q(!1),type:"success",className:"max-w-sm",children:t.jsx(Ss,{enterEmailTitle:de.formatMessage(Je.addEmailTitle),enterEmailDescription:de.formatMessage(Je.addEmailDescription),onVerified:()=>{O(),q(!1),le({skipEmailCheck:!0})},cancelFlowButton:t.jsx(ut,{className:"w-full rounded-md",color:"secondary",onClick:()=>q(!1),children:t.jsx(h,b({},Je.cancelAddEmail))})})})]})}const Je=Ge({paymentErrorWarning:{id:"AccountPaymentModal.primaryCTA.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},addEmailTitle:{id:"AccountPaymentModal.primaryCTA.addEmailTitle",defaultMessage:"Email required"},addEmailDescription:{id:"AccountPaymentModal.primaryCTA.addEmailDescription",defaultMessage:"You'll be able to login with this email. It will also be used for account updates (like password resets) and information about OpenAI services."},cancelAddEmail:{id:"AccountPaymentModal.primaryCTA.cancelAddEmail",defaultMessage:"Cancel"},highDemandDisabledText:{id:"AccountPaymentModal.primaryCTA.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),Et=E.PLUS;function _a(s,e,n,a){let o=null,r=null,i=null;if(s==="plus-10-for-3-months"?(o=n.currencyConfig.promos.plus_intro_offer_3m.amount,r=n.currencyConfig.promos.plus_intro_offer_3m.type,i=3):s==="plus-10-for-12-mos"&&(o=n.currencyConfig.promos.plus_intro_offer_12m.amount,r=n.currencyConfig.promos.plus_intro_offer_12m.type,i=12),o==null||r==null||i==null)return null;let l=null;return r==="value"?l={value:o,currency_code:n.currencyConfig.symbol_code}:l={percentage:o},{plan_name:xe.PLUS,title:"",summary:e.formatMessage(a?Dt.headline:yt.plusSummary),discount:l,duration:{num_periods:i,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:null}}const Ta=({analyticsParams:s,className:e,currentAccount:n,planLoading:a,isPromoLoading:o,onUpgradeButtonClick:r,setPlanLoading:i,plusPricingPlan:l=null,billingDetails:g,promoCode:d=null,promoMetadata:m=null,onClose:f,disableForMobile:S=!1,type:c,isWebRedesign:y,shouldUseComparisonSpacing:T,isUnifiedPricingPage:u,autoUpgrade:p=!1,fromiOSWebview:_=!1,setShouldShowCheckoutLoadingOverlay:N})=>{"use no forget";const D=ct(),A=!en(D),M=ye(),H=Gs();let w=l||gn({isWebRedesign:y});const{data:F,isLoading:k,error:O}=Ct({countryCode:g.country,currency:g.currency,ctx:D});if(!k&&!O&&F){const J=Te(F,tt,x.Month);w=B(b({},w),{cost:{costValue:J.amount,costTitle:Xe(J.amount,tt,g.currency)}})}const Y=Zn({ctx:D,shouldLogExposure:!1}),{data:R}=Ps(Y);m==null&&(R==null?void 0:R.coupon)===Y&&(R==null?void 0:R.state)==="eligible"&&Jn({ctx:D,shouldLogExposure:!0})&&F&&(F.currencyConfig.promos.plus_intro_offer_3m.enabled||F.currencyConfig.promos.plus_intro_offer_12m.enabled)&&(m=_a(Y,M,F,y),d=Y);const{eligible:Z,campaignId:U}=pn();let I;const P=new URLSearchParams(H.search).get(hn);function G(J){return J==="plus-1-month-free"?{plan_name:xe.PLUS,title:"",summary:M.formatMessage(y?Dt.headline:yt.plusSummary),discount:{percentage:100},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:M.formatMessage(Ue.specialOffer)}:J==="plus-10-for-1-month"?{plan_name:xe.PLUS,title:"",summary:M.formatMessage(y?Dt.headline:yt.plusSummary),discount:{percentage:50},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:M.formatMessage(Ue.specialOffer)}:null}if(m==null){const J=P||(Z?U:void 0);if(J){const ue=G(J);ue&&(d||(I=J),m=ue)}}const z=n.isOrWasPaidCustomer(),V=n.hasPaidSubscription(),j=V&&n.isPlus(),K=V&&n.isPro(),q=n.getLastActiveSubscription(),L=n.features.includes("disable_plus_upgrade_ui")&&!z,ee=se.useMemo(()=>B(b({},s),{promoCode:d,promoCampaign:I,planType:Et,isUpgradeUiDisabled:L,referrer:document.referrer}),[s,d,I,L]),te=[],de=()=>{re.logEvent("Account Portal: Click iOS Manage Subscription",ee)},Me=()=>{re.logEvent("Account Portal: Click Android Manage Subscription",ee)},me=j&&[Mt.CHATGPT_IOS,Mt.SORA_IOS].includes(q.purchase_origin_platform),fe=j&&q.purchase_origin_platform===Mt.MOBILE_ANDROID;te.push(t.jsx(Ie,{to:xn,target:"_blank",className:$(y?"px-1 font-medium":"px-2","underline"),children:t.jsx(h,b({},pt.limitsApply))},"row-plus-plan-usage-limits")),me&&te.push(t.jsx(Ie,{to:yn,target:"_blank",onClick:de,className:$(y?"px-1 font-medium":"px-2","underline"),children:M.formatMessage(es.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),fe&&te.push(t.jsx(Ie,{to:_n,target:"_blank",onClick:Me,className:$(y?"px-1 font-medium":"px-2","underline"),children:M.formatMessage(es.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),j&&z&&te.push(t.jsx(Ie,{target:"_blank",to:ys,onClick:bs,className:$(y?"px-1 font-medium":"px-2","underline"),children:t.jsx(h,b({},pt.billingHelp))},"row-plus-plan-help-link"));const ie=m!=null,_e=(m==null?void 0:m.promotion_type)==="student_discount",Pe=m!=null&&"referrer_name"in m,X=(!j||ie)&&a==null,{activeDiscountMetadata:ge,scheduledAdditionalLink:Se}=ta({isWebRedesign:y,currentAccount:n,intl:M,billingDetails:g,pricingPlan:w,promoMetadata:m,columnPlanType:E.PLUS});if(Se&&te.unshift(Se),ge&&(w.summary=yt.plusSummaryWithDiscount),m&&F&&!k&&!O&&(w=js({intl:M,pricingPlan:w,promoMetadata:m,currency:g.currency,planName:E.PLUS,currentAccount:n,checkoutPricingConfig:F})),o!=null&&o)return null;let ce;ie&&j&&w.callToAction.promo?ce=M.formatMessage(w.callToAction.promo):j?ce=M.formatMessage(w.callToAction.active):Pe&&A&&w.callToAction.inactiveUnauthenticated?ce=M.formatMessage(w.callToAction.inactiveUnauthenticated):ce=M.formatMessage(Xn({planType:E.PLUS}));let le;j&&!ie||K?le="secondary":y&&c==="highlight"||c==="promo"?le="purple":(c==="standard"||_e)&&(le="primary");const oe=i!=null?i:(()=>{}),W=typeof r=="function"?(J,ue)=>r(J,ue):void 0,Q=t.jsx(ya,{analyticsParams:ee,billingDetails:g,currentAccount:n,planType:Et,planLoading:a,setPlanLoading:oe,testId:"select-plan-button-plus-upgrade",onPromoClose:f,activeColor:le,disableForMobile:S,disabled:L||!X,promoMetadata:m,promoCode:d!=null?d:void 0,promoCampaign:I,pricingPlan:w,setShouldShowCheckoutLoadingOverlay:N,autoUpgrade:p,fromiOSWebview:_,inhouseCheckoutExperimentEnabled:!0,overrideOnClick:W,children:ce});return t.jsx(Ut,{planType:Et,elementId:Pn,pricingPlan:w,shouldUseComparisonSpacing:T,isUnifiedPricingPage:u,isCheckoutPricingConfigLoading:k,checkoutPricingConfigError:O,callToActionButton:L?t.jsx("div",{className:"relative w-full",children:t.jsx(xt,{side:"bottom",sideOffset:20,label:M.formatMessage(pt.highDemandDisabledText),children:Q})}):Q,secondaryCallToActionButton:c==="promo"?t.jsx(ut,{size:"large",color:"secondary",onClick:f,children:t.jsx(h,b({},pt.notNow))}):null,additionalLinks:te,type:c,promoMetadata:m,activeDiscountMetadata:ge,billingDetails:g,className:e,isWebRedesign:y})},pt=Ge({billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"},notNow:{id:"AccountPaymentModal.notNow",defaultMessage:"Not Now"},highDemandDisabledText:{id:"AccountPaymentModal.highDemandDisabledText",defaultMessage:"Due to high demand, we've temporarily paused upgrades."}}),at=E.SELF_SERVE_BUSINESS,Fa=({analyticsParams:s,planLoading:e,billingDetails:n,isWebRedesign:a,isUnifiedPricingPage:o,type:r=rt.standard,shouldUseComparisonSpacing:i,shouldUseOnboardingFeatures:l,className:g,cta:d,currentAccount:m,promoCode:f,promoMetadata:S,onProceed:c,setShouldShowCheckoutLoadingOverlay:y})=>{const T=ct(),{data:u,refetch:p}=kt(hs),{data:_,isLoading:N,error:D}=Ct({countryCode:n.country,currency:n.currency,ctx:T}),A=ye(),M=tn(T),H=Vs(),w=xs(),[F,k]=se.useState(!1),O=M==null?void 0:M.isSelfServeBusiness(),Y=M==null?void 0:M.isPlus(),R=B(b({},s),{planType:at}),Z=!!(u!=null&&u.email),U=Ae(T,"111733276").get("show_upgrade_page_v2_copy",!1),I=Sn();let P=Cn({isWebRedesign:a,isBusinessUpgradeV2CopyEnabled:U,shouldUseOnboardingFeatures:l,isTrialEnabled:I.eligible});if(!N&&!D&&_){const X=Te(_,ot,x.Year);P=B(b({},P),{cost:B(b({},P.cost),{costValue:X.amount,costTitle:Xe(X.amount,ot,n.currency)})})}const G=Tn(),z=f?"":G!=null?G:"",{data:V}=Ps(z),j=V!=null?V:I.eligible?{coupon:I.campaignId,state:"eligible",redemption:null}:void 0;let K=!1;const q=j&&Nt(j==null?void 0:j.coupon)&&(j==null?void 0:j.state)==="eligible";let L=null;!N&&_&&(L=bn(_,"business_one_dollar"),K=L!==void 0&&L.enabled&&(j==null?void 0:j.coupon)===_t&&(j==null?void 0:j.state)==="eligible");let ee=S!=null?S:null,te=!1;if(f&&ee&&_&&!N&&!D){const X=Te(_,ot,x.Month);P=B(b({},P),{cost:B(b({},P.cost),{costValue:X.amount,costTitle:Xe(X.amount,ot,n.currency)})}),P=js({intl:A,pricingPlan:P,promoMetadata:ee,currency:n.currency,planName:E.SELF_SERVE_BUSINESS,currentAccount:m,checkoutPricingConfig:_}),te=!0}else!ee&&(K||q)&&(ee={plan_name:"chatgptteamplan",title:"",summary:"",discount:{value:0,currency_code:"USD"},duration:{num_periods:1,period:"month"},price_period:"recurring",promotion_type:"discount",promotion_type_label:A.formatMessage(Ue.specialOffer)});K&&!te?L&&L.enabled&&L.amount&&L.cost_message&&(P=B(b({},P),{cost:B(b({},P.cost),{costValue:L.amount,costTitle:{id:"promo.businessOneDollar.cost",defaultMessage:L.cost_message,description:"Cost label for business1dollar promo. Shows the amount followed by an asterisk with no currency symbol."},costDuration:Ze.promoCostDuration}),disclaimer:Ze.team1dollarPromoDisclaimer})):q&&!te&&(P=B(b({},P),{cost:B(b({},P.cost),{costValue:0,costTitle:Ye.promoCost,costDuration:Ye.promoCostDuration}),disclaimer:Ye.teamFreeTrialPromoDisclaimerWithPerSeatMonthlyPrice}));const{selectedPlan:de,numSeats:Me}=Fn({promoData:j}),{handleBusinessCheckoutRedirect:me}=kn({billingDetails:n,promoData:j}),fe=Mn(),[ie,_e]=se.useState(!1),Pe=async X=>{var ce;if(!Z&&!X){k(!0);return}if(re.logEvent("Account Pay: Payment Checkout Clicked",R),ht(T,"chatgpt_account_payment_modal_upgrade_button_click",at),!te&&!j&&!fe&&Ae(T,"3950229590").get("enabled_custom_checkout_for_team",!1)){const W=!!y&&Ae(T,"3542930659").get("show_business_loading",!1);try{_e(!0),y==null||y(W),await me(de,Me,!0)}catch(Q){Pt.addError("Could not create business checkout session",{error:Q})}finally{_e(!1),W&&(y==null||y(!1))}return}const Se=(ce=new URLSearchParams(window.location.search).get("referrer"))!=null?ce:document.referrer;En.setPurchaseWorkspaceData({minimumSeats:w,billingDetails:n,promoData:(j==null?void 0:j.state)==="eligible"&&!te?j:void 0,promoMetadata:te?ee:null,promoCode:f!=null?f:void 0,referrer:Se}),wn(H),c&&c()};return Ms(F,{plan:R}),t.jsxs(t.Fragment,{children:[t.jsx(Ut,{planType:at,isWebRedesign:a,className:$(g,a&&!o&&"md:max-w-117"),elementId:vn,pricingPlan:P,promoData:j,promoMetadata:ee,type:r,shouldUseComparisonSpacing:i,isUnifiedPricingPage:o,isBusinessUpgradeV2CopyEnabled:U,isCheckoutPricingConfigLoading:N,checkoutPricingConfigError:D,hasEnabledTeam1DollarCoupon:K,hasEnabledTeamFreeTrialCoupon:q,useRecommendedBadge:r===rt.highlight,callToActionButton:t.jsxs("div",{className:"flex flex-col gap-2",children:[O&&r!==rt.promo&&t.jsx(ls,{planType:at,isCurrentPlan:!0,disabled:e!=null||O,onClick:()=>Pe(),testId:"select-plan-button-teams-upgrade",children:A.formatMessage(P.callToAction.active)}),d!=null?d:t.jsx(ls,{className:"w-full",planType:at,disabled:e!=null,loading:ie,activeColor:r===rt.highlight?"purple":void 0,onClick:()=>Pe(),testId:"select-plan-button-teams-create",children:O||Y?A.formatMessage(P.callToAction.create):A.formatMessage(P.callToAction.inactive)})]}),billingDetails:n}),t.jsx(St,{testId:"modal-add-email",isOpen:F,onClose:()=>k(!1),type:"success",className:"max-w-sm",children:t.jsx(Ss,{enterEmailTitle:A.formatMessage(Je.addEmailTitle),enterEmailDescription:A.formatMessage(Je.addEmailDescription),onVerified:async()=>{k(!1),await p(),Pe(!0)}})})]})};export{ks as A,Da as F,da as M,As as P,ls as S,Is as T,Rs as a,Ta as b,Fa as c,ha as d,Ms as e,Ut as f,Tt as g,bs as h,Xn as i,ga as j,Ts as k,st as l,Je as m,js as n,ta as o,ya as p,rt as q,Cs as r,Na as s,Ds as u};
//# sourceMappingURL=fe1zgnccg3ea7jld.js.map

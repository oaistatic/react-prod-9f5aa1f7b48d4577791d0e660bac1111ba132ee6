var b=Object.defineProperty,_=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var S=(a,t,e)=>t in a?b(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,d=(a,t)=>{for(var e in t||(t={}))I.call(t,e)&&S(a,e,t[e]);if(p)for(var e of p(t))F.call(t,e)&&S(a,e,t[e]);return a},z=(a,t)=>_(a,x(t));import{gM as H,gY as v,gL as C,a5 as E,u as M,z as T,et as w,x as y,w as V,cH as A,bO as L}from"./ghewn7l2ynbm32fm.js";import{i as k}from"./dwikchly7agkd2y3.js";import{bG as N}from"./j0yo6uv6652vva62.js";import{r as c}from"./i8clt0mfz495j7ii.js";function P(){const a=E(),t=M(),e=T(t);return a&&!w(a)&&(e==null?void 0:e.isEnterprisey())}function U(){return H(N.ChartSerialization)}function Y(a,t){var o;const e=a==="chart"?y.HasSeenAdaInteractiveChart:y.HasSeenAdaInteractiveTable,[s,n]=c.useState((o=V.getItem(e,{userId:t}))!=null?o:!1),r=c.useCallback(()=>{n(!0),V.setItem(e,!0,{userId:t})},[e,t]);return[s,r]}function j(a){const[t,e]=c.useState([]),s=A(a,L.getBranch);return c.useEffect(()=>{const n=O(s);n.length!==t.length&&e(n)},[t.length,a,s]),t}function D(a){var r,o,l,g,m,f,h;const t=(l=(o=(r=a.metadata)==null?void 0:r.aggregate_result)==null?void 0:o.messages.filter(k))!=null?l:[];let e=0;const s=((m=(g=a.metadata)==null?void 0:g.ada_visualizations)!=null?m:[]).map(i=>{let u=i;return i.type=="chart"&&(u=z(d({},i),{fallback_image:t[e++]})),u}),n=((h=(f=a.metadata)==null?void 0:f.attachments)!=null?h:[]).filter(i=>v(i.name)).map(i=>{var u;return{type:"table",file_id:(u=i.id)!=null?u:"",title:C(i),file_name:i.name,context_connector_info:i.context_connector_info}});return[...s,...n]}function O(a){return a.filter(e=>{var s,n,r,o,l;return((s=e.message)==null?void 0:s.author.role)==="tool"&&((n=e.message)==null?void 0:n.author.name)==="python"||((l=(o=(r=e.message)==null?void 0:r.metadata)==null?void 0:o.attachments)!=null?l:[]).length>0}).flatMap(e=>D(e.message))}export{j as a,P as b,Y as c,D as g,U as u};
//# sourceMappingURL=fy6752fpzkgozktl.js.map

var X=Object.defineProperty;var K=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var J=(e,t,o)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,c=(e,t)=>{for(var o in t||(t={}))ee.call(t,o)&&J(e,o,t[o]);if(K)for(var o of K(t))ae.call(t,o)&&J(e,o,t[o]);return e};import{c as se,r as H,e as te,j as a,M as l,f as oe,A as ie,h as re}from"./i8clt0mfz495j7ii.js";import{ev as ce,B as ne,ew as le,aP as de}from"./j0yo6uv6652vva62.js";import{H as ue}from"./eys65c62g4tdkkh3.js";import{W as pe}from"./o108mlelkx5ejfzn.js";import{a5 as fe,p as me,u as he,aZ as ve,e as xe,jB as ge,bF as Y,R as Q,nB as ke,ox as be,mY as je,J as We,S as we,C as Me,q as Se,f as Z,W as $,B as Ne}from"./ghewn7l2ynbm32fm.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";function ye(){"use forget";var q,z;const e=se.c(48),t=fe(),{data:o}=me(),W=he(),s=ve(o),p=s!=null||o!=null,[r,d]=H.useState(!1),u=o==null?void 0:o.accountItems,{count:R}=ce((q=s==null?void 0:s.id)!=null?q:"");let w;e[0]!==W?(w=le(),e[0]=W,e[1]=w):w=e[1];const D=w,V=s==null?void 0:s.id,n=u==null?void 0:u.find(E=>E.id===V),G=!((z=s==null?void 0:s.eligibleForReactivation)!=null?z:!1),I=(s==null?void 0:s.isOwnerOfAccount())&&s.isSelfServeBusiness()&&!s.hasPaidSubscription()&&!G,U=(s==null?void 0:s.isOwnerOfAccount())&&s.isSelfServeBusiness()&&s.hasPaidSubscription()&&!G;let M;e[2]!==u?(M=u==null?void 0:u.filter(Ce),e[2]=u,e[3]=M):M=e[3];const j=M,f=te(),T=xe();let S=ge;s&&(S=s.mustGetSubscriptionBillingCurrency("DeactivatedWorkspaceModal"));let N,y;e[4]!==s?(N=()=>{s||(We.addError(new Error("Current account is undefined in DeactivatedWorkspaceModal")),we.logEvent("chatgpt_undefined_current_account"))},y=[s],e[4]=s,e[5]=N,e[6]=y):(N=e[5],y=e[6]),H.useEffect(N,y);let C;e[7]!==n||e[8]!==D||e[9]!==S||e[10]!==R?(C=()=>{de.setPurchaseWorkspaceData({minimumSeats:Math.max(R,D),billingDetails:{currency:S},existingAccount:n})},e[7]=n,e[8]=D,e[9]=S,e[10]=R,e[11]=C):C=e[11];const L=C;let P;e[12]!==f||e[13]!==d||e[14]!==T?(P=async()=>{d(!0);try{const E=await Q.safeGet("/payments/customer_portal",{intercomEventOnError:"fetch-error:customer_portal:get"});location.href=E.url,d(!1)}catch(E){d(!1),T.warning(f.formatMessage(i.unableToOpenStripeDashboard),{hasCloseButton:!0})}},e[12]=f,e[13]=d,e[14]=T,e[15]=P):P=e[15];const F=P;if(s==null||!n||!j)return null;let B;e[16]===Symbol.for("react.memo_cache_sentinel")?(B=a.jsx("span",{className:"text-lg",children:a.jsx(l,c({},i.workspaceDeactivated))}),e[16]=B):B=e[16];let m;e[17]!==n.data.profilePictureUrl?(m=a.jsx(ne,{src:n.data.profilePictureUrl}),e[17]=n.data.profilePictureUrl,e[18]=m):m=e[18];let h;e[19]!==n.data.name?(h=a.jsx("div",{children:n.data.name}),e[19]=n.data.name,e[20]=h):h=e[20];let v;e[21]!==m||e[22]!==h?(v=a.jsxs("div",{className:"flex w-full items-center gap-2",children:[m,h]}),e[21]=m,e[22]=h,e[23]=v):v=e[23];let _;e[24]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsx("div",{children:a.jsxs("ul",{className:"list-disc ps-5 text-sm",children:[a.jsx("li",{className:"mb-1",children:a.jsx(l,c({},i.chatHistoryUnavailable))}),a.jsx("li",{children:a.jsx(l,c({},i.otherWorkspacesAvailable))})]})}),e[24]=_):_=e[24];let x;e[25]!==I||e[26]!==r||e[27]!==L?(x=I&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(l,c({},i.purchaseNewSubscription))}),a.jsx(Y,{className:"m-auto mt-2 w-full",loading:r,onClick:L,children:a.jsx(l,c({},i.purchaseNewSubscriptionButton))})]}),e[25]=I,e[26]=r,e[27]=L,e[28]=x):x=e[28];let g;e[29]!==U||e[30]!==r||e[31]!==F?(g=U&&a.jsxs("div",{className:"flex w-full flex-col",children:[a.jsx("p",{children:a.jsx(l,c({},i.resolveOutstandingInvoice))}),a.jsx(Y,{className:"m-auto mt-2 w-full",loading:r,onClick:F,children:a.jsx(l,c({},i.manageSubscriptionButton))})]}),e[29]=U,e[30]=r,e[31]=F,e[32]=g):g=e[32];let A;e[33]===Symbol.for("react.memo_cache_sentinel")?(A=a.jsx(ue,{}),e[33]=A):A=e[33];let k;e[34]!==j||e[35]!==f||e[36]!==r||e[37]!==d||e[38]!==t?(k=a.jsx("div",{className:"w-full justify-center",children:j.length>0?a.jsxs(a.Fragment,{children:[a.jsx("h3",{className:"mb-2 text-base font-normal",children:a.jsx(l,c({},i.selectWorkspace))}),a.jsx(pe,{data:j})]}):a.jsxs("div",{className:"flex flex-col gap-6 text-sm",children:[a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("h3",{className:"text-base font-normal",children:a.jsx(l,c({},i.createPersonalWorkspace))}),a.jsx(l,c({},i.deactivatedWorkspaceReason))]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"flex w-full items-center gap-2",children:[t&&t.picture&&a.jsx("img",{alt:"Profile",src:t.picture,className:"flex h-6 w-6 items-center justify-center rounded-full"}),t&&a.jsx("span",{className:"truncate",children:t.name})]}),a.jsx(Y,{title:f.formatMessage(i.createPersonalWorkspaceButton),loading:r,onClick:async()=>{d(!0),await Q.safePost("/accounts/personal"),ke(be),je()},color:"primary",className:"ms-4"})]})]})}),e[34]=j,e[35]=f,e[36]=r,e[37]=d,e[38]=t,e[39]=k):k=e[39];let b;e[40]!==x||e[41]!==g||e[42]!==k||e[43]!==v?(b=a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[v,_,x,g,A,k]}),e[40]=x,e[41]=g,e[42]=k,e[43]=v,e[44]=b):b=e[44];let O;return e[45]!==p||e[46]!==b?(O=a.jsx(Me,{testId:"modal-deactivated-workspace",type:"success",onClose:Se,isOpen:p,title:B,children:b}),e[45]=p,e[46]=b,e[47]=O):O=e[47],O}function Ce(e){return!e.isDeactivated()}const i=oe({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}}),Ue=ie(function(){const t=Z($.workspaces),o=Ne(),W=Z($.workspaceId),s=t.find(r=>r.id===W),p=re();return H.useEffect(()=>{o&&(!s||!s.deactivated)&&p("/")},[o,s,p]),o&&(!s||!s.deactivated)?a.jsx("div",{}):a.jsx(ye,{})});export{Ue as default};
//# sourceMappingURL=g9swk85hk948ev2q.js.map

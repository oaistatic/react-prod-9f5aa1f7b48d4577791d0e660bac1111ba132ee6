const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gdqp7gbmtc62v9eh.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css","assets/mij1of41w6dqogjy.js","assets/jgvrewhnjcf398o6.js","assets/gsas8pb1acnf7jnd.js"])))=>i.map(i=>d[i]);
import{c as S,j as t,r as v,_ as B,M as k,ao as Re,e as Le,a as Oe}from"./i8clt0mfz495j7ii.js";import{aV as Ie,e8 as Ae,e9 as Me,ea as ze,bX as Ne,d as H,o as re,L as ie,pN as Be,T as Fe,u as He,bN as Ve,a as $e,el as Je,e as We,pO as Ce,pj as Ue,eI as Ge,eK as Ke,pP as Xe,h7 as Qe,pQ as Ye,aR as Ze}from"./ghewn7l2ynbm32fm.js";import{L as F}from"./icuos2x1zai4tnyd.js";import{g as Se}from"./j6x345c1lr8o2ob6.js";import{kB as ye,b_ as qe,mp as et,d6 as tt,aI as st}from"./j0yo6uv6652vva62.js";import{p as ot}from"./fe8pomto0j6jsca5.js";const nt=s=>{"use forget";const e=S.c(17),{onDrag:o,onDragEnd:l,onDoubleClick:i,onDragStart:n,onPointerUp:a}=s;let d,c,r,x;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1},c={opacity:1},r={type:"tween",duration:.1},x={x:0,y:0,transform:"translateY(0px)"},e[0]=d,e[1]=c,e[2]=r,e[3]=x):(d=e[0],c=e[1],r=e[2],x=e[3]);let u;e[4]!==n?(u=()=>{n==null||n()},e[4]=n,e[5]=u):u=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f={left:0,right:0,top:0,bottom:0},e[6]=f):f=e[6];let p;e[7]!==o?(p=(b,j)=>{o==null||o(j)},e[7]=o,e[8]=p):p=e[8];let g;e[9]!==l?(g=(b,j)=>l==null?void 0:l(j),e[9]=l,e[10]=g):g=e[10];let h;return e[11]!==i||e[12]!==a||e[13]!==u||e[14]!==p||e[15]!==g?(h=t.jsx(Ie.div,{drag:"x",tabIndex:-1,className:"bg-token-border-default pointer-events-auto absolute top-0 bottom-0 z-20 w-[2px] cursor-ew-resize rounded-full opacity-0 after:absolute after:inset-y-0 after:start-1/2 after:top-[-18px] after:h-[calc(100%+36px)] after:w-[16px] after:-translate-x-1/2 after:transform after:bg-transparent after:content-['']",whileHover:d,whileDrag:c,transition:r,style:x,onPointerDown:u,dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:f,onDrag:p,onPointerUp:a,onDragEnd:g,onDoubleClick:i}),e[11]=i,e[12]=a,e[13]=u,e[14]=p,e[15]=g,e[16]=h):h=e[16],h},at=s=>{"use forget";const e=S.c(6),{content:o,tiktokenImport:l,o200kBaseImport:i}=s,{Tiktoken:n}=v.use(l),{default:a}=v.use(i);let d;e[0]!==n||e[1]!==o||e[2]!==a?(d=new n(a).encode(o),e[0]=n,e[1]=o,e[2]=a,e[3]=d):d=e[3];const c=d.length;let r;return e[4]!==c?(r=t.jsx("div",{className:"text-token-text-secondary min-w-0 truncate font-mono text-xs",children:t.jsx(k,{id:"NUKG65",defaultMessage:"{tokenCount} tokens",values:{tokenCount:t.jsx(Re,{value:c})}})}),e[4]=c,e[5]=r):r=e[5],r},le=({content:s})=>{"use no forget";const e=v.useMemo(()=>B(()=>import("./gdqp7gbmtc62v9eh.js"),__vite__mapDeps([0,1])),[]),o=v.useMemo(()=>B(()=>import("./o5eltwebd0mkim81.js"),[]),[]);return s?t.jsx(v.Suspense,{name:"dev-mode-token-count",fallback:t.jsx("div",{className:"loading-results-shimmer h-5 w-10 rounded-lg"}),children:t.jsx(at,{content:s,tiktokenImport:e,o200kBaseImport:o})}):null},lt=s=>{const[e]=ye(Ne(s),Ae({path:Me,args:o=>{const[l]=ye(Me(o),ze);return l!=null?l:{}}}));return e},rt=s=>{var e;try{const o=Ne(s);return o&&(e=JSON.parse(o))!=null?e:void 0}catch(o){return null}},it=s=>{var e,o;return(o=(e=s.metadata)==null?void 0:e.chatgpt_sdk)==null?void 0:o.tool_response_metadata},ct=(s,e)=>{for(const o of s.values())for(const l of o)if(l.id===e)return l;return null},dt=re(()=>B(()=>import("./j0yo6uv6652vva62.js").then(s=>s.yA),__vite__mapDeps([2,1,3,4,5])),{loading:s=>ie(s)}),Ee=v.createContext(null),Pe=()=>{const s=v.useContext(Ee);if(!s)throw new Error("Section components must be used within a Section.Root");return s},ut=s=>{"use forget";const e=S.c(10),{children:o,defaultExpanded:l}=s,i=l===void 0?!0:l,[n,a]=v.useState(i),d=v.useId(),c=v.useId();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>a(pt),e[0]=r):r=e[0];let x;e[1]!==c||e[2]!==d||e[3]!==n?(x={isExpanded:n,toggle:r,headerId:d,contentId:c},e[1]=c,e[2]=d,e[3]=n,e[4]=x):x=e[4];let u;e[5]!==o?(u=t.jsx("div",{className:"relative z-0 border-b",children:o}),e[5]=o,e[6]=u):u=e[6];let f;return e[7]!==x||e[8]!==u?(f=t.jsx(Ee.Provider,{value:x,children:u}),e[7]=x,e[8]=u,e[9]=f):f=e[9],f},ft=s=>{"use forget";const e=S.c(8),{children:o}=s,{isExpanded:l,contentId:i,headerId:n}=Pe(),a=!l,d=l&&"pb-3";let c;e[0]!==d?(c=H("z-0 px-3",d),e[0]=d,e[1]=c):c=e[1];let r;return e[2]!==o||e[3]!==i||e[4]!==n||e[5]!==a||e[6]!==c?(r=t.jsx("div",{id:i,role:"region","aria-labelledby":n,hidden:a,className:c,children:o}),e[2]=o,e[3]=i,e[4]=n,e[5]=a,e[6]=c,e[7]=r):r=e[7],r},mt=s=>{"use forget";const e=S.c(25),{children:o,tooltip:l,accessory:i}=s,{isExpanded:n,toggle:a,headerId:d,contentId:c}=Pe(),[r,x]=v.useState(!1),u=r?"border-token-border-default":"border-transparent";let f;e[0]!==u?(f=H("bg-token-bg-elevated-secondary sticky top-0 z-20 flex w-full min-w-0 items-center border-b",u),e[0]=u,e[1]=f):f=e[1];const p=!n&&"-rotate-90";let g;e[2]!==p?(g=H("icon-sm shrink-0 transition-transform",p),e[2]=p,e[3]=g):g=e[3];let h;e[4]!==g?(h=t.jsx(dt,{className:g}),e[4]=g,e[5]=h):h=e[5];let b;e[6]!==o?(b=t.jsx("span",{className:"flex min-w-0 flex-1 items-center gap-2",children:o}),e[6]=o,e[7]=b):b=e[7];let j;e[8]!==c||e[9]!==d||e[10]!==n||e[11]!==h||e[12]!==b||e[13]!==a?(j=t.jsxs("button",{type:"button",id:d,"aria-controls":c,"aria-expanded":n,onClick:a,className:"text-token-text-secondary focus-visible:ring-token-border-strong flex min-w-0 flex-1 items-center gap-2 rounded-sm px-3 py-3 text-start text-sm focus-visible:ring-1 focus-visible:outline-none",children:[h,b]}),e[8]=c,e[9]=d,e[10]=n,e[11]=h,e[12]=b,e[13]=a,e[14]=j):j=e[14];let M;e[15]!==i?(M=i&&t.jsx("div",{className:"ms-auto py-1 ps-2 pe-3",children:i}),e[15]=i,e[16]=M):M=e[16];let C;e[17]!==f||e[18]!==j||e[19]!==M?(C=t.jsxs("div",{className:f,children:[j,M]}),e[17]=f,e[18]=j,e[19]=M,e[20]=C):C=e[20];const y=C;let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("span",{"aria-hidden":"true",className:"pointer-events-none absolute block h-[1px] bg-transparent",ref:Be({options:{threshold:0},onChange(ce,V){x(V.intersectionRatio===0)}})}),e[21]=I):I=e[21];let E;return e[22]!==y||e[23]!==l?(E=t.jsxs(t.Fragment,{children:[I,l?t.jsx(Fe,{side:"left",triggerAs:null,labelTextAlign:"left",label:t.jsx(qe,{size:"small",className:"text-sm leading-5 font-normal",forceDarkMode:!0,children:l}),children:y}):y]}),e[22]=y,e[23]=l,e[24]=E):E=e[24],E},m={Content:ft,Header:mt,Root:ut};function pt(s){return!s}const xt=re(()=>B(()=>import("./mij1of41w6dqogjy.js").then(s=>s._),__vite__mapDeps([6,1])),{loading:s=>ie(s)}),gt=re(()=>B(()=>import("./jgvrewhnjcf398o6.js").then(s=>s._),__vite__mapDeps([7,1])),{loading:s=>ie(s)}),ht=re(()=>B(()=>import("./gsas8pb1acnf7jnd.js").then(s=>s._),__vite__mapDeps([8,1])),{loading:s=>ie(s)}),jt=s=>{"use forget";var _e,be,ke,we;const e=S.c(55),{focusedMessages:o,conversation:l}=s,i=We(),n=Le(),a=Ce(0),[d,c]=v.useState(!1),[r,x]=v.useState(!1),u=Ce(400);let f;e[0]!==a||e[1]!==u?(f=[u,a],e[0]=a,e[1]=u,e[2]=f):f=e[2];const p=Ue(f,vt),{assistantMessage:g,toolMessages:h}=ot(o),{platformConnectors:b,refetch:j}=Ge(),{connectorLinks:M,refetch:C}=Ke(),{path:y,args:I}=(_e=lt(g))!=null?_e:{},E=y===void 0?"":y,ce=I===void 0?{}:I,[,V,ge]=E.split("/").filter(Boolean),he=ct(M,V),w=he?b.get(he.connector_id):null,{actions:Te}=Xe(w),_=Te.find(N=>N.name===ge),$=(be=_==null?void 0:_.templates)==null?void 0:be[0],P=h.findLast(_t),de=P?rt(P):null,ue=(ke=P==null?void 0:P.metadata)!=null&&ke.chatgpt_sdk?et(P.metadata.chatgpt_sdk):null,je=h.findLast(bt),ve=je?it(je):null;let T;e[3]!==C||e[4]!==j?(T=async N=>{await Ye(N),await Promise.all([C(),j()])},e[3]=C,e[4]=j,e[5]=T):T=e[5];let D;e[6]!==i?(D=N=>{i.danger({defaultMessage:"Error refreshing actions.",description:"Error message when refreshing actions fails"},{error:N})},e[6]=i,e[7]=D):D=e[7];let R;e[8]!==n||e[9]!==i?(R=()=>{i.success(n.formatMessage({id:"n9Ee37",defaultMessage:"Tool updated"}))},e[8]=n,e[9]=i,e[10]=R):R=e[10];let J;e[11]!==T||e[12]!==D||e[13]!==R?(J={mutationFn:T,onError:D,onSuccess:R},e[11]=T,e[12]=D,e[13]=R,e[14]=J):J=e[14];const W=Oe(J);let U;e[15]!==d?(U=d&&t.jsx("div",{className:"fixed inset-0 z-0 bg-transparent"}),e[15]=d,e[16]=U):U=e[16];let L;e[17]!==a?(L=()=>{c(!0),a.set(0)},e[17]=a,e[18]=L):L=e[18];let O;e[19]!==p||e[20]!==a||e[21]!==u?(O=()=>{c(!1),a.set(0),u.set(p.get())},e[19]=p,e[20]=a,e[21]=u,e[22]=O):O=e[22];let A;e[23]!==a?(A=N=>a.set(a.get()+N.delta.x),e[23]=a,e[24]=A):A=e[24];let G;e[25]!==O||e[26]!==A||e[27]!==L?(G=t.jsx(nt,{onDragStart:L,onDragEnd:O,onDrag:A}),e[25]=O,e[26]=A,e[27]=L,e[28]=G):G=e[28];let K;e[29]!==p?(K={width:p},e[29]=p,e[30]=K):K=e[30];const fe=(w==null?void 0:w.logo_url)&&t.jsx("img",{className:"h-4 w-4 rounded-md",src:w.logo_url,alt:w.name}),me=(we=w==null?void 0:w.name)!=null?we:t.jsx(k,{id:"lDDPYo",defaultMessage:"Unknown Connector"});let z;e[31]!==me?(z=t.jsx("span",{className:"text-token-text-primary text-lg",children:me}),e[31]=me,e[32]=z):z=e[32];let X;e[33]!==fe||e[34]!==z?(X=t.jsxs("div",{className:"flex items-center gap-2",children:[fe,z]}),e[33]=fe,e[34]=z,e[35]=X):X=e[35];const De=W.isPending,pe=W.isPending&&"motion-safe:animate-spin";let Q;e[36]!==pe?(Q=H("icon",pe),e[36]=pe,e[37]=Q):Q=e[37];let Y;e[38]!==l?(Y=t.jsx(Ze,{onClick:()=>Se(l).blur()}),e[38]=l,e[39]=Y):Y=e[39];let Z;e[40]!==_?(Z=_&&t.jsx(le,{content:_.description}),e[40]=_,e[41]=Z):Z=e[41];let q;e[42]!==_||e[43]!==r?(q=_&&t.jsxs(m.Content,{children:[t.jsx("span",{className:H("text-token-text-primary ps-6 text-sm whitespace-pre-wrap",r?"line-clamp-none":"line-clamp-4"),children:_.description}),t.jsx("button",{className:"text-token-text-secondary ms-6 mt-1 flex justify-start text-sm hover:underline",onClick:()=>x(!r),children:r?t.jsx(k,{id:"Mggt6n",defaultMessage:"See less"}):t.jsx(k,{id:"yhD38v",defaultMessage:"See all"})})]}),e[42]=_,e[43]=r,e[44]=q):q=e[44];let ee;e[45]!==$?(ee=$&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{accessory:t.jsx(Qe,{href:"https://developers.openai.com/apps-sdk",children:t.jsx(ht,{className:"icon-sm opacity-60"})}),children:t.jsx(k,{id:"hHDKiZ",defaultMessage:"Widget"})}),t.jsx(m.Content,{children:t.jsx(F,{isInitialLevelExpanded:!0,unwrap:!0,className:"!text-xs !leading-5",value:$.meta})})]}),e[45]=$,e[46]=ee):ee=e[46];let te;e[47]!==n?(te=n.formatMessage({id:"yXxwQR",defaultMessage:"Tool input is the model-written input to the MCP tool. It is exposed to the widget code as `window.openai.toolInput`."}),e[47]=n,e[48]=te):te=e[48];let se;e[49]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(k,{id:"t5GE25",defaultMessage:"Tool input"}),e[49]=se):se=e[49];let oe;e[50]!==n?(oe=n.formatMessage({id:"85NXIC",defaultMessage:"Tool output is the `structuredContent` field of the MCP tool response. It is exposed to the model, and to the widget code as `window.openai.toolOutput`."}),e[50]=n,e[51]=oe):oe=e[51];let ne;e[52]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(k,{id:"E9SGiy",defaultMessage:"Tool output"}),e[52]=ne):ne=e[52];const xe=de?t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:de}):t.jsx("span",{className:"text-token-text-secondary",children:t.jsx(k,{id:"lpg5UJ",defaultMessage:"No tool response"})});let ae;return e[53]!==xe?(ae=t.jsx(m.Content,{children:xe}),e[53]=xe,e[54]=ae):ae=e[54],t.jsxs(t.Fragment,{children:[U,t.jsxs("div",{className:"border-token-border-default bg-token-bg-elevated-secondary z-10 h-full border-s",children:[G,t.jsxs(Ie.div,{className:"relative flex h-full flex-col",style:K,children:[t.jsxs("div",{className:"flex h-(--header-height) items-center gap-1 ps-3 pe-2",children:[X,t.jsx(tt,{className:"ms-auto",onClick:()=>W.mutate(V),disabled:De,icon:W.isPending?xt:gt,iconClassName:Q}),Y]}),t.jsxs("div",{className:"flex h-full flex-col overflow-x-hidden overflow-y-auto",children:[t.jsxs(m.Root,{children:[t.jsx(m.Header,{accessory:Z,children:t.jsx("span",{className:"truncate font-mono text-sm",children:ge})}),q]}),ee,t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:te,accessory:t.jsx(le,{content:JSON.stringify(ce)}),children:se}),t.jsx(m.Content,{children:t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ce})})]}),t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:oe,accessory:t.jsx(le,{content:JSON.stringify(de)}),children:ne}),ae]}),ve&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:n.formatMessage({id:"4BhV8x",defaultMessage:"The tool response metadata is the `_meta` field of the MCP tool response. It is not exposed to the model, but is exposed to widget code as `window.openai.toolResponseMetadata`."}),children:t.jsx(k,{id:"OP/Fmv",defaultMessage:"Tool response metadata"})}),t.jsx(m.Content,{children:t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ve})})]}),ue&&t.jsxs(m.Root,{children:[t.jsx(m.Header,{tooltip:n.formatMessage({id:"pPuRCH",defaultMessage:"Persisted state of the widget. It is exposed to the widget code as `window.openai.widgetState`, and updated via `window.openai.setWidgetState`."}),accessory:t.jsx(le,{content:JSON.stringify(ue)}),children:t.jsx(k,{id:"BtTaJR",defaultMessage:"Widget state"})}),t.jsx(m.Content,{children:t.jsx(F,{className:"!text-xs !leading-5",isInitialLevelExpanded:!0,unwrap:!0,value:ue})})]})]})]})]},"dev-mode-sidebar")]})},Nt=s=>{"use forget";const e=S.c(10),{clientThreadId:o}=s,l=He();let i,n;e[0]!==o||e[1]!==l?(i=Ve(l,o),n=Se(i),e[0]=o,e[1]=l,e[2]=i,e[3]=n):(i=e[2],n=e[3]);const a=n;let d;e[4]!==a?(d=()=>a.focusedMessages$(),e[4]=a,e[5]=d):d=e[5];const c=$e(d);let r;return e[6]!==i||e[7]!==a||e[8]!==c?(r=c.length>0&&t.jsx(Je,{name:"DevModeSidebar",onError:()=>a.blur(),children:t.jsx(jt,{focusedMessages:c,conversation:i})}),e[6]=i,e[7]=a,e[8]=c,e[9]=r):r=e[9],r};function vt(s){const[e,o]=s;return st(e-o,200,800)}function _t(s){var e;return(e=s.author.name)==null?void 0:e.startsWith("api_tool.call_tool")}function bt(s){var e;return(e=s.author.name)==null?void 0:e.startsWith("api_tool.call_tool")}export{Nt as DevModeSidebar};
//# sourceMappingURL=esg7wcf05m2ztpph.js.map

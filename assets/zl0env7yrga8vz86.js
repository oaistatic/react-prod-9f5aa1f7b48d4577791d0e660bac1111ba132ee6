var T=Object.defineProperty,O=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var a=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var I=(s,o,i)=>o in s?T(s,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[o]=i,d=(s,o)=>{for(var i in o||(o={}))f.call(o,i)&&I(s,i,o[i]);if(a)for(var i of a(o))D.call(o,i)&&I(s,i,o[i]);return s},p=(s,o)=>O(s,P(o));var k=(s,o)=>{var i={};for(var e in s)f.call(s,e)&&o.indexOf(e)<0&&(i[e]=s[e]);if(s!=null&&a)for(var e of a(s))o.indexOf(e)<0&&D.call(s,e)&&(i[e]=s[e]);return i};import{al as R,h3 as q,h4 as w}from"./ghewn7l2ynbm32fm.js";import{h as B,m as S,a as x}from"./mnf9y116wq0a5kdn.js";const u={cartId:"",cartMetadata:void 0,isCheckoutOpen:!1,items:[],shippingAddress:void 0,billingAddress:void 0,shippingMethodId:void 0,totals:void 0,merchant:void 0,paymentDetails:void 0,currencyCode:"USD",shippingOptions:[],grandTotal:{title:"",subtitle:"",value:"",value_minor:0,formatted_value:""},paymentTypes:{},cartStatus:"idle",isShippingAddressSameAsBilling:!1,errors:void 0,preloadCustomerSessionClientSecret:void 0,cachedPaymentDetailsResponse:void 0,agreements:void 0},b=R(()=>q((s,o)=>p(d({},u),{openNewCheckout:l=>{var n=l,{metadata:i}=n,e=k(n,["metadata"]);return s(r=>{var t,c,g,h;return p(d(d({},u),e),{cartMetadata:i?d({},i):void 0,isCheckoutOpen:!0,paymentDetails:(t=r.paymentDetails)!=null&&t.complete?d({},r.paymentDetails):void 0,shippingAddress:(c=r.shippingAddress)!=null&&c.complete?d({},r.shippingAddress):void 0,billingAddress:(g=r.billingAddress)!=null&&g.complete?d({},r.billingAddress):void 0,cachedPaymentDetailsResponse:r.cachedPaymentDetailsResponse?d({},r.cachedPaymentDetailsResponse):void 0,isShippingAddressSameAsBilling:((h=r.billingAddress)==null?void 0:h.complete)&&r.isShippingAddressSameAsBilling})})},closeCheckout:(i=!1)=>s(e=>d({},i?u:p(d({},e),{isCheckoutOpen:!1}))),setInitialCart:i=>{const e=i.cart.line_items[0].item,l=e.item_metadata;s(n=>{var r,t,c,g,h,m,_,v,A;return p(d({},n),{cartId:i.id,totals:i.cart.totals,grandTotal:i.cart.grand_total,shippingAddress:i.cart.shipping_address?p(d({},S(i.cart.shipping_address)),{complete:!0}):(r=n.shippingAddress)!=null&&r.complete?d({},n.shippingAddress):void 0,shippingOptions:(t=i.cart.shipping_options)!=null?t:[],shippingMethodId:(c=i.cart.shipping_option_id)!=null?c:void 0,footerMessage:(g=i.cart.footer_level_message)!=null?g:void 0,agreements:(h=i.agreements)!=null?h:[],paymentTypes:Object.fromEntries(((m=i.payment_surfaces_and_types)!=null?m:[]).map(y=>[y.surface,y.types])),currencyCode:i.cart.currency,errors:i.cart.errors,merchant:{title:l==null?void 0:l.merchant_title,subtitle:l==null?void 0:l.merchant_subtitle,url:l==null?void 0:l.product_url,logoUrl:l==null?void 0:l.merchant_logo_url,externalId:i.seller_details.external_id,networkId:i.seller_details.network_id},items:[{id:(_=e.id)!=null?_:"",productId:l==null?void 0:l.product_id,quantity:e.quantity,value:e.value,title:l==null?void 0:l.product_title,variant:l==null?void 0:l.product_variant_info,price:l==null?void 0:l.product_price,imageUrl:l==null?void 0:l.product_image_url,url:l==null?void 0:l.product_url,metadata:{isDigital:l==null?void 0:l.is_digital}}],allowedCountries:(v=i.allowed_countries)!=null?v:[],additionalFields:(A=i.additional_fields)!=null?A:[]})})},updateCart:i=>s(e=>{var l,n,r,t;return p(d({},e),{totals:i.cart.totals,grandTotal:i.cart.grand_total,shippingOptions:(l=i.cart.shipping_options)!=null?l:[],shippingMethodId:(n=i.cart.shipping_option_id)!=null?n:void 0,footerMessage:(r=i.cart.footer_level_message)!=null?r:void 0,errors:i.cart.errors,cartStatus:e.cartStatus==="updating"?"idle":e.cartStatus,items:[p(d({},e.items[0]),{id:(t=i.cart.line_items[0].item.id)!=null?t:"",quantity:i.cart.line_items[0].item.quantity,value:i.cart.line_items[0].item.value})]})}),updateQuantity:(i,e)=>{const n=o().items.map(r=>r.id===i?p(d({},r),{quantity:e}):r);return s({items:n}),n},setShippingAddress:i=>s(e=>p(d({},e),{shippingAddress:i?d({},i):void 0})),setHasAcceptedAgreement:(i,e)=>{var n;const l=(n=o().agreements)==null?void 0:n.map(r=>r.id===i?p(d({},r),{is_checked:e}):r);s(d({agreements:l},B(l)?{errors:void 0}:{}))},setBillingAddress:i=>s(e=>p(d({},e),{billingAddress:d({},i)})),setShippingMethodId:i=>s(e=>p(d({},e),{shippingMethodId:i})),setMerchant:i=>s(e=>p(d({},e),{merchant:d({},i)})),setCachedPaymentDetailsResponse:i=>s(e=>p(d({},e),{cachedPaymentDetailsResponse:i})),setPaymentDetails:i=>s(e=>p(d({},e),{paymentDetails:i?d({},i):void 0})),setCartStatus:i=>s(e=>p(d({},e),{cartStatus:i})),setIsShippingAddressSameAsBilling:i=>s(e=>p(d({},e),{isShippingAddressSameAsBilling:i})),setErrors:i=>s(e=>p(d({},e),{errors:i}))}))),L=s=>b(s).getState(),N=s=>w(b(s)),j=s=>{var o,i;return!!((o=s.shippingAddress)!=null&&o.complete&&((i=s.paymentDetails)!=null&&i.complete)&&(s.shippingMethodId||x(s.items)))};export{j as a,L as g,N as u};
//# sourceMappingURL=zl0env7yrga8vz86.js.map

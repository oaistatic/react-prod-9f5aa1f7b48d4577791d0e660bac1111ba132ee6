const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/3j20em1lilnrpdcm.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css","assets/emdum0m248izhpjl.js","assets/dt74bs5wyg16icnh.js","assets/bci083mws0hai8bl.js","assets/khzlteyrl3j9opbq.js","assets/hj7440dgahtucv4l.js","assets/ooz2slmm8agf6bjp.js","assets/c8g7bbhygzmjvepl.js","assets/ck5iljwscti74kix.js","assets/kk2lrj1fitwzfksu.js","assets/ewkru1hsxkjpuxt5.js","assets/f87olchknhsp1yyk.js","assets/hl1zoffowk2zds15.js","assets/ogo8hvquv5crkyqt.js"])))=>i.map(i=>d[i]);
var C=Object.freeze,F=Object.defineProperty,re=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(e,n,a)=>n in e?F(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,u=(e,n)=>{for(var a in n||(n={}))V.call(n,a)&&B(e,a,n[a]);if(E)for(var a of E(n))W.call(n,a)&&B(e,a,n[a]);return e},P=(e,n)=>re(e,oe(n));var G=(e,n)=>{var a={};for(var s in e)V.call(e,s)&&n.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&E)for(var s of E(e))n.indexOf(s)<0&&W.call(e,s)&&(a[s]=e[s]);return a};var v=(e,n)=>C(F(e,"raw",{value:C(n||e.slice())}));import{r as b,b as le,e as $,j as t,M as f,f as q,_ as c,h as N,d as H,k as J}from"./i8clt0mfz495j7ii.js";import{pA as ce,pB as de,iC as me,pC as ue,cd as ge,cc as xe,pD as pe,B as L,u as j,h as X,R as fe,e as _e,bH as he,$ as ve,o as d,L as m,F as w,f as T,ar as Z,z as k,W as be,bE as je,i4 as S,d as D,aM as ee,b0 as ye,T as Ee,aY as Pe,P as Ie}from"./ghewn7l2ynbm32fm.js";import{cE as te,kj as we,b3 as Ae,b2 as Se,et as Me,d6 as Ne,aP as Le,B as Te}from"./j0yo6uv6652vva62.js";import{b as ke}from"./fb2095ktsebx1zzy.js";import{L as ne}from"./mpzbsmypy64alaao.js";import{j as De}from"./kgnykbdth8mb50na.js";function Oe({cycleReferenceDate:e,cycleIndex:n,targetDate:a=new Date,period:s}){const r=s==="yearly"?ce:de,i=r(a,n),o=A(e,i,s);return me(o,i)?{start:A(e,r(i,-1),s),end:o}:{start:o,end:A(e,r(i,1),s)}}function A(e,n,a){return ue(e,u({year:xe(n)},a==="monthly"&&{month:ge(n)}))}function pt(e=0){const n=te();return b.useMemo(()=>{var i,o,l;if(n.status==="pending")return"pending";const a=n.data;if(!a)return;const s=(o=(i=a.next_credit_grant_update)!=null?i:a.active_start)!=null?o:a.active_until;if(!s)return;let r=(l=a.billing_period)!=null?l:"monthly";if(a.last_credit_grant_update&&a.next_credit_grant_update){const g=new Date(a.last_credit_grant_update),_=new Date(a.next_credit_grant_update);if(r=pe(_,g)>1?"yearly":"monthly",e===0)return{start:g,end:_,period:r}}return P(u({},Oe({cycleReferenceDate:new Date(s),cycleIndex:e,period:r})),{period:r})},[n,e])}function Re(){var i;const e=L(),n=j(),s=X(n,"2861925050")&&e!=null&&e.isEnterprisey()&&(e.isAdminOfAccount()||e.isOwnerOfAccount())&&e.organizationId!=null,r=le({queryKey:Ce(e==null?void 0:e.organizationId),queryFn:()=>fe.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:e==null?void 0:e.organizationId}}}),enabled:s});return s&&((i=r.data)==null?void 0:i.organization_at_overage_limit)===!0}function Ce(e){return["is-at-overage-limit",e]}function Be({accountId:e,subscription:n}){const a=$(),s=_e(),r=we(e),[i,o]=b.useState(!1),l=De(e),g=async()=>{o(!0);try{await r.mutateAsync(e)}catch(_){s.warning(a.formatMessage(I.errorRenewingSubscription),{hasCloseButton:!0})}finally{o(!1)}};return t.jsx("div",{className:"bg-token-main-surface-secondary",children:t.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[t.jsxs("div",{className:"mx-2 grow md:mx-4",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx(he,{className:"me-4 hidden text-orange-500 md:block"}),t.jsx("p",{className:"text-lg font-semibold",children:t.jsx(f,u({},I.workspaceWillBeDeactivated))})]}),n.active_until!=null&&t.jsx("p",{className:"md:ms-8",children:t.jsx(f,P(u({},I.retainAccessUntil),{values:{expiryDate:new Date(n.active_until)}}))})]}),l&&t.jsx(ve,{color:"primary",onClick:g,loading:i,children:t.jsx(f,u({},I.reactivateBtn))})]})})}const I=q({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),Fe=d(()=>c(()=>import("./3j20em1lilnrpdcm.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>m(e)}),Ve=d(()=>c(()=>import("./j0yo6uv6652vva62.js").then(e=>e.ym),__vite__mapDeps([2,1,3,4,5])),{loading:e=>m(e)}),We=d(()=>c(()=>import("./emdum0m248izhpjl.js").then(e=>e._),__vite__mapDeps([6,1])),{loading:e=>m(e)}),Ge=d(()=>c(()=>import("./dt74bs5wyg16icnh.js").then(e=>e._),__vite__mapDeps([7,1])),{loading:e=>m(e)}),He=d(()=>c(()=>import("./bci083mws0hai8bl.js").then(e=>e._),__vite__mapDeps([8,1])),{loading:e=>m(e)}),Ue=d(()=>c(()=>import("./khzlteyrl3j9opbq.js").then(e=>e._),__vite__mapDeps([9,1])),{loading:e=>m(e)}),ze=d(()=>c(()=>import("./hj7440dgahtucv4l.js").then(e=>e._),__vite__mapDeps([10,1])),{loading:e=>m(e)}),Qe=d(()=>c(()=>import("./ooz2slmm8agf6bjp.js").then(e=>e._),__vite__mapDeps([11,1])),{loading:e=>m(e)}),Ye=d(()=>c(()=>import("./c8g7bbhygzmjvepl.js").then(e=>e._),__vite__mapDeps([12,1])),{loading:e=>m(e)}),U=d(()=>c(()=>import("./ck5iljwscti74kix.js").then(e=>e._),__vite__mapDeps([13,1])),{loading:e=>m(e)}),Ke=d(()=>c(()=>import("./kk2lrj1fitwzfksu.js").then(e=>e._),__vite__mapDeps([14,1])),{loading:e=>m(e)}),$e=d(()=>c(()=>import("./j0yo6uv6652vva62.js").then(e=>e.yx),__vite__mapDeps([2,1,3,4,5])),{loading:e=>m(e)}),qe=d(()=>c(()=>import("./ewkru1hsxkjpuxt5.js").then(e=>e._),__vite__mapDeps([15,1])),{loading:e=>m(e)}),Je=d(()=>c(()=>import("./f87olchknhsp1yyk.js").then(e=>e._),__vite__mapDeps([16,1])),{loading:e=>m(e)}),Xe=d(()=>c(()=>import("./hl1zoffowk2zds15.js").then(e=>e._),__vite__mapDeps([17,1])),{loading:e=>m(e)}),Ze=d(()=>c(()=>import("./ogo8hvquv5crkyqt.js").then(e=>e._),__vite__mapDeps([18,1])),{loading:e=>m(e)}),M="/admin/billing";function p(r){var i=r,{route:e,icon:n,upsellEnterprise:a=!1}=i,s=G(i,["route","icon","upsellEnterprise"]);const o=J().pathname.replace(/\/$/,"")||"/",l=N();return a?t.jsx(Ee,{label:t.jsx(f,u({},x.availableForEnterprise)),side:"right",contentClassName:"cant-hover:hidden",children:t.jsx(S,{as:"div",role:"button",fillContainer:!0,icon:Qe,label:"name"in s?t.jsx(f,u({},s.name)):s.children})}):t.jsx(S,{as:"div",role:"button",fillContainer:!0,active:o===e,onClick:g=>{l(e),g.stopPropagation()},icon:n,label:"name"in s?t.jsx(f,u({},s.name)):s.children})}function et({workspace:e,hasAdminPrivileges:n,hasOwnerPrivileges:a}){var R;const s=N(),r=L(),i=T(be.isEnterpriseyPlan),o=b.useCallback(()=>{s("/")},[s]),l=j(),g=X(l,"4105779609"),_=Z(),O=(r==null?void 0:r.isSelfServeBusiness())&&g,{data:h}=je(e==null?void 0:e.id);let y=!1;a||n||!i?y=!0:y=!!((R=h==null?void 0:h.permissions)!=null&&R.includes("chatgpt.workspace.member.role.view"));const se=Me(We,Ve,!1,!0),ie=$().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"});return t.jsxs("nav",{className:"pb-1.5",children:[!_&&t.jsx("div",{className:"h-header-height flex items-center px-2",children:t.jsx(Ne,{className:"no-draggable","aria-label":ie,onClick:()=>{Le.setSidebarOpen(!1)},icon:se,mobileIcon:Ue,"data-testid":"close-sidebar-button"})}),t.jsx("div",{className:"h-header-height flex flex-col justify-center",children:t.jsx(S,{as:"button",onClick:o,icon:t.jsx(Je,{className:"icon-sm"}),label:t.jsx(f,u({},x.backToChat))})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:D("flex flex-col gap-2 rounded p-4"),children:[t.jsx(Te,{size:"large",src:e==null?void 0:e.profilePictureUrl}),t.jsx("div",{className:"align-center flex min-w-0 flex-row",children:t.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:e==null?void 0:e.name})})]}),n&&t.jsx(p,{route:"/admin",icon:He,name:x.generalSettingsPageTitle}),y&&t.jsx(p,{route:"/admin/members",icon:ze,name:x.membersPageTitle}),i&&y&&t.jsx(p,{route:"/admin/groups",icon:U,upsellEnterprise:!i,name:H({id:"aecR1i",defaultMessage:"Groups"})}),a&&t.jsx(p,{route:"/admin/permissions",icon:Ge,name:x.permissions}),n&&t.jsx(p,{route:M,icon:Ke,name:x.billing}),a&&t.jsx(p,{route:"/admin/gpts",icon:Ze,name:x.gpts}),n&&t.jsx(p,{route:"/admin/ca",icon:$e,name:x.connections}),!i&&t.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),!i&&t.jsx(p,{route:"/admin/groups",icon:U,upsellEnterprise:!i,name:H({id:"aecR1i",defaultMessage:"Groups"})}),n&&t.jsx(p,{route:"/admin/usage",icon:Xe,upsellEnterprise:!i,children:t.jsx("div",{className:"flex flex-row items-center gap-2",children:t.jsx(f,u({},x.userAnalytics))})}),a&&t.jsx(p,{route:"/admin/identity",upsellEnterprise:!i&&!O,icon:Ye,name:x.identity}),!1]})]})}function ft({mobilePageTitle:e,requireAdminPrivileges:n=!1,requireOwnerPrivileges:a=!1,children:s}){const r=T(h=>h.currentWorkspace),i=N(),o=r!=null?Ae(r.role):void 0,l=r!=null?Se(r.role):void 0;b.useEffect(()=>{n&&o===!1&&i("/admin/members"),a&&l===!1&&i("/admin/members")},[n,o,i,a,l]);const g=Z(),_=j();return k(_)==null?null:t.jsx(t.Fragment,{children:t.jsx(ke,{mobileHeaderContent:e,mobileHeaderRightContent:t.jsx(ne,{}),forceOpenDesktopSidebar:g,renderNavSidebar:()=>t.jsx(et,{workspace:r!=null?r:void 0,hasAdminPrivileges:o,hasOwnerPrivileges:l}),children:s})})}function tt(){return t.jsxs(t.Fragment,{children:[t.jsx(nt,{}),t.jsx(at,{})]})}function nt(){const{data:e}=te(),n=j(),a=k(n),s=a&&e&&e.plan_type===Pe.SELF_SERVE_BUSINESS&&!e.will_renew;return t.jsx(t.Fragment,{children:s&&t.jsx(Be,{accountId:a.id,subscription:e})})}function at(){const e=L(),n=Re(),a=J().pathname!==M;return b.useEffect(()=>{n&&Ie.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:e==null?void 0:e.id,workspaceName:e==null?void 0:e.name})},[n,e]),t.jsx(t.Fragment,{children:n&&t.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:t.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[t.jsx(Fe,{className:"me-2 shrink-0"}),t.jsx(f,P(u({},x.atOverageLimitBannerText),{values:{link:s=>a?t.jsx(ee,{className:"mx-1",href:M,children:s}):s}}))]})})})}var z;const ae=w.div(z||(z=v(["w-full flex-row items-center gap-2"])));var Q;const st=w(ae)(Q||(Q=v(["text-sm text-token-text-tertiary"])));var Y;const it=w.div(Y||(Y=v(["mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10"])));function _t({title:e,subtitle:n,actions:a,tabsHeader:s,badge:r,navigation:i}){return t.jsxs(t.Fragment,{children:[t.jsx(tt,{}),t.jsxs("div",{className:D("border-token-bg-tertiary flex flex-col gap-6 border-b md:mt-12",!s&&"pb-6"),children:[i&&t.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:i}),t.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:t.jsxs("div",{className:"flex flex-row items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs(ae,{className:"hidden md:flex",children:[t.jsx("h2",{children:e}),r]}),n&&t.jsx(st,{className:"mt-1",children:n})]}),t.jsx("div",{className:"flex",children:a})]})}),s&&t.jsx(it,{children:s})]}),t.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:t.jsx(ne,{})})]})}function ht({items:e}){return t.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:e.map((n,a)=>{const s=D(a===e.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return t.jsxs(t.Fragment,{children:[n.href?t.jsx(ee,{href:n.href,style:{textDecoration:"none"},className:s,children:n.label},a):t.jsx("div",{className:s,children:n.label},a),a<e.length-1&&t.jsx(qe,{className:"icon-sm"})]})})})}var K;const rt=w.div(K||(K=v(["max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10"])));function vt({children:e,showSpinner:n,skipLegacyWorkspaceCheck:a}){const s=j(),r=k(s),i=T(g=>g.currentWorkspace),o=!a&&!i,l=!r||n;return t.jsxs(rt,{children:[l&&t.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:t.jsx(ye,{})}),!l&&o&&t.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:t.jsx(f,u({},x.workspaceNotFound))}),!l&&!o&&e]})}const x=q({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},generalSettingsPageTitle:{id:"6Gjoj5",defaultMessage:"General"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Connectors"},permissions:{id:"/HwRtL",defaultMessage:"Permissions & roles"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & access"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."},agreements:{id:"workspaceAgreements.agreementsTitle",defaultMessage:"Agreements"}});export{ft as A,_t as a,ht as b,vt as c,pt as d,Ce as g,Re as u};
//# sourceMappingURL=k11vc5v60fqtwe47.js.map

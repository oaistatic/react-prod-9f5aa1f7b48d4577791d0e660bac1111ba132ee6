import{r as i,j as g}from"./i8clt0mfz495j7ii.js";import{u as N,ff as P,b1 as M,b7 as b,kP as k,bL as w,dM as F,bN as A,bO as C,bQ as I,mO as _,J as E}from"./ghewn7l2ynbm32fm.js";import{gK as S,gL as f,gM as j,aS as L,aT as T}from"./j0yo6uv6652vva62.js";import{s as z}from"./eosy1ymy279c5qnc.js";import{A as O,V as U}from"./ejbyq0lrsu2qu7eg.js";import"./h8pr5f6a9kp0y6hm.js";import"./bxgk09qvxvkate6l.js";const $=()=>{const o=S();return i.useCallback(s=>{z.set(s),o.setState({isVoiceModeActive:!0})},[o])};function y(){const o=L(T.hasSeenAdvancedVoiceNuxFullPage);return!o.isLoading&&o.eligible}function Q({clientThreadId:o}){const s=N(),n=f(e=>e.showVoicePicker),V=f(e=>e.showNuxFullPage),a=S(),c=P(o),t=c!=null?c:o,{isUnauthenticated:r}=M(),{setValue:u}=j(b.VoiceName),d=y(),l=k(),m=$();return i.useEffect(()=>{const e=sessionStorage.getItem("selectedVoiceName"),v=h=>{const x=w(()=>F(A(s,t)).id);try{sessionStorage.removeItem("selectedVoiceName"),m({voice:h,conversation_id:void 0,eventSource:"login_page",voice_mode:"advanced",clientThreadId:_(),gizmo_id:C.getGizmoId(I(t)),requested_default_model:x,skipCacheReason:"login-direct-to-voice-mode"})}catch(p){E.addError("Failed to start voice mode after voice picker: ".concat(p),{protocol:l})}};e&&!r&&(u(e),v(e))},[s,t,r,u,m,l]),i.useEffect(()=>{d||a.setState(e=>{e.showNuxFullPage=!1})},[d,a]),V?g.jsx(O,{conversationId:t}):n?g.jsx(U,{isOpen:n,onClose:()=>{a.setState(e=>{e.showVoicePicker=!1})},conversationId:t,cameFromNux:!0}):null}export{Q as VoiceModals};
//# sourceMappingURL=jz6627o4ye424akj.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fg1cwp14kl8llosr.js","assets/i8clt0mfz495j7ii.js","assets/e216z3zqjas1rma2.js"])))=>i.map(i=>d[i]);
var B=Object.defineProperty,Q=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var S=(e,s,n)=>s in e?B(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,y=(e,s)=>{for(var n in s||(s={}))T.call(s,n)&&S(e,n,s[n]);if(j)for(var n of j(s))A.call(s,n)&&S(e,n,s[n]);return e},k=(e,s)=>Q(e,q(s));var R=(e,s)=>{var n={};for(var t in e)T.call(e,t)&&s.indexOf(t)<0&&(n[t]=e[t]);if(e!=null&&j)for(var t of j(e))s.indexOf(t)<0&&A.call(e,t)&&(n[t]=e[t]);return n};import{j as a,M as v,c as K,r as M,e as O,_ as V}from"./i8clt0mfz495j7ii.js";import{cd as N,ce as L,bQ as X,bU as Y,cf as Z,cg as w,bu as J,ch as ee,ci as te,cj as F,ck as se,cl as ne}from"./j0yo6uv6652vva62.js";import{u as D,i as H,d as E,cH as U,mf as ae,aV as re,o as $,ff as oe,dw as le,L as G,gj as ie,P,hg as ce,gH as ue}from"./ghewn7l2ynbm32fm.js";import{f as fe}from"./nvrhbbc4qxooogd5.js";const de=$(()=>V(()=>import("./fg1cwp14kl8llosr.js"),__vite__mapDeps([0,1])),{loading:e=>G(e)}),ge=$(()=>V(()=>import("./e216z3zqjas1rma2.js").then(e=>e._),__vite__mapDeps([2,1])),{loading:e=>G(e)});function he(e,s,n){"use forget";var _;const t=K.c(12),[d,c]=ke(e,n);let u;t[0]!==n||t[1]!==s?(u=x=>{var p;const g=se(x,s);return[(p=x==null?void 0:x.tree.getNodeIfExists(n))==null?void 0:p.message,...g]},t[0]=n,t[1]=s,t[2]=u):u=t[2];const o=U(e,u);let r;t[3]!==o?(r=o.flatMap(xe),t[3]=o,t[4]=r):r=t[4];const l=r;let i;t[5]!==l?(i=fe(l,pe).toSorted(me),t[5]=l,t[6]=i):i=t[6];const h=i,f=d.length+((_=c==null?void 0:c.length)!=null?_:0)+0+h.length;let m;return t[7]!==d||t[8]!==h||t[9]!==c||t[10]!==f?(m={citations:d,fastNavLinks:c,collapsedAndSortedSearchResults:h,sourcesCount:f},t[7]=d,t[8]=h,t[9]=c,t[10]=f,t[11]=m):m=t[11],m}function me(e,s){var n,t;return((n=s==null?void 0:s.pub_date)!=null?n:0)-((t=e==null?void 0:e.pub_date)!=null?t:0)}function pe(e){return e.entries}function xe(e){return ae(e)}function Ce({clientThreadId:e,turnIndex:s,messageId:n,isInSidebar:t=!1,isN7JUPDSidebar:d=!1,scrollToHeader:c,shouldAnimateScroll:u,combineSections:o=!1}){const r=D(),l=H(r),{fastNavLinks:i,citations:h,collapsedAndSortedSearchResults:f}=he(e,s,n),m={clientThreadId:e,messageId:n,turnIndex:s};return a.jsxs("div",{className:E("bg-token-bg-primary flex w-full flex-col",t&&!o?l?"mt-[calc(var(--threadFlyOut-leading-height,var(--header-height))*-1)] min-h-screen":"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)] min-h-screen":"mt-0",t?"":"border-token-border-default border-t"),children:[i&&i.length>0&&a.jsx(C,{title:o?null:a.jsx(v,{id:"fYO0jL",defaultMessage:"Links"}),items:i,analyticsMetadata:k(y({},m),{linkType:"links"}),scrollToHeader:c===N.Links,shouldAnimateScroll:u,messageId:n,isN7JUPDSidebar:d,combineSections:o}),a.jsx(C,{title:o?null:a.jsx(v,{id:"dlVlo6",defaultMessage:"Citations"}),items:h,analyticsMetadata:k(y({},m),{linkType:"citation"}),scrollToHeader:c===N.Citations,shouldAnimateScroll:u,messageId:n,isN7JUPDSidebar:d,combineSections:o}),a.jsx(C,{title:o?null:a.jsx(v,{id:"Gz+4tE",defaultMessage:"More"}),items:f,analyticsMetadata:k(y({},m),{linkType:"search_result"}),messageId:n,scrollToHeader:c===N.SearchResults,shouldAnimateScroll:u,isN7JUPDSidebar:d,combineSections:o})]},"".concat(s,"-").concat(e))}function C({title:e,items:s,analyticsMetadata:n,scrollToHeader:t,messageId:d,shouldAnimateScroll:c,isN7JUPDSidebar:u,combineSections:o=!1}){const r=D(),l=H(r),i=M.useRef(null);return M.useEffect(()=>{i.current&&t&&setTimeout(()=>{i.current&&i.current.scrollIntoView({behavior:c?"smooth":"instant"})},300)},[t,c]),!s||s.length===0?null:a.jsxs("div",{ref:i,children:[e&&a.jsx(z,{className:E("bg-token-bg-primary text-token-text-primary sticky top-0 z-1 flex items-center px-6 pt-4 pb-4 text-sm font-medium",l?"border-b-thin h-[var(--header-height,3.5rem)] border-(--bento-border-color)":"border-token-border-light h-[calc(var(--header-height,3.5rem)+1px)] border-b"),children:e}),a.jsx("ul",{className:E("flex flex-col",o?"py-0":"px-3 py-2"),children:s.map((h,f)=>a.jsx(z,{index:f,children:a.jsx(ye,{item:h,analyticsMetadata:k(y({},n),{groupIndex:f}),messageId:d,isN7JUPDSidebar:u},f)},"".concat(e,"-").concat(f)))})]})}function z({children:e,index:s=0,className:n=""}){return a.jsx(re.li,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(s+1)*.03+.2},children:e})}function _e({item:e,analyticsMetadata:s}){var m,_,x,g,p;const n=O(),{clientThreadId:t}=s,d=oe(t),c=(_=(m=e.asset_pointer_links)==null?void 0:m[0])!=null?_:"",u=J(c),o=ee({asset:{content_type:le.ImageAssetPointer,size_bytes:0,width:0,height:0,asset_pointer:u},conversationId:d}),r=(x=e.clicked_from_url)!=null?x:"",l=o.data?{url:o.data.url,thumbnail_url:o.data.url,content_url:r,title:(g=e.clicked_from_title)!=null?g:n.formatMessage({id:"jLfAkx",defaultMessage:"Image"}),content_size:{width:0,height:0},thumbnail_size:{width:0,height:0},is_proxied_image:!0,attribution:L(r,"hostname")}:null,i=te.useStore(),h=b=>{b.preventDefault(),b.stopPropagation(),l&&i.setCurrentImage({image:l})},f=L(r,"hostname");return a.jsx("li",{children:a.jsxs(W,{analyticsMetadata:s,href:(p=l==null?void 0:l.content_url)!=null?p:"#",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",onClick:h,rel:"noopener",children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[l?a.jsx("img",{src:l.thumbnail_url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",alt:n.formatMessage({id:"LUO0a4",defaultMessage:"Image thumbnail"})}):a.jsx("span",{className:"icon-sm bg-token-main-surface-primary rounded-full"}),f]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:e.clicked_from_title?e.clicked_from_title:a.jsx(v,{id:"mmoVoz",defaultMessage:"Unknown"})})]})})}function ye({item:e,analyticsMetadata:s,messageId:n,isN7JUPDSidebar:t}){var m,_,x,g,p,b;const d=O();if(e.type==="image_inline"&&t)return a.jsx(_e,{item:e,analyticsMetadata:s});const u=(_=e.attribution)!=null?_:L((m=e==null?void 0:e.url)!=null?m:"","short"),o=(x=e.url)!=null?x:"",r=X(o),l=r?r.Icon:e.type==="file"?ge:null,i=r?r.type:e.type==="file"?d.formatMessage({id:"8ny9KX",defaultMessage:"File"}):void 0,h=I=>"ref_id"in I&&"content_type"in I;return a.jsxs(W,{analyticsMetadata:s,href:o,target:"_blank",rel:"noopener",className:"hover:bg-token-surface-hover dark:hover:bg-token-main-surface-tertiary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",onMouseEnter:()=>{w.setHighlightBySource(n,e)},onMouseLeave:()=>{w.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[l?a.jsx(l,{className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",alt:i}):a.jsx(Y,{url:(g=e==null?void 0:e.url)!=null?g:"",className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:a.jsx(de,{className:"icon-sm text-token-text-quaternary"})}),u,h(e)&&a.jsx(Z,{searchResult:e,className:"text-token-text-tertiary inline h-4 w-4"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:(b=(p=e.title)!=null?p:e.name)!=null?b:""}),a.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:a.jsx(be,{date:e.pub_date,snippet:e.snippet})})]})}const W=M.forwardRef(function(s,n){const l=s,{analyticsMetadata:t}=l,d=R(l,["analyticsMetadata"]),i=t,{groupIndex:c,linkType:u}=i,o=R(i,["groupIndex","linkType"]),r=k(y({},ie(o)),{url:s.href,section_index:(c+1).toString(),link_type:"text",section:u,section_location:"sidebar"});return M.useEffect(()=>{P.logEvent("link_action",k(y({},r),{action:"show"}))},[]),a.jsx("a",k(y({ref:n},d),{onClick:h=>{var f;(f=s.onClick)==null||f.call(s,h),h.stopPropagation(),P.logEvent("link_action",k(y({},r),{action:"click"}))}}))}),ke=(e,s)=>U(e,n=>{var f,m,_,x;const t=n&&((f=n.tree.getNodeIfExists(s))==null?void 0:f.message),d=(m=ce(t))!=null?m:[],c=Object.values((x=(_=t==null?void 0:t.metadata)==null?void 0:_.content_references_by_file)!=null?x:{}).flat(),u=ue([...d,...c]),o=ne(u);let r=[];const l=u.filter(g=>g.type==="navigation");l.length>0&&(r=l.flatMap(g=>g.domains.flatMap(p=>[{title:p.title,snippet:p.domain,url:p.url},...p.sub_domains.map(b=>({title:b.title,snippet:p.domain,url:b.url}))])));const i=u.filter(g=>g.type==="tldr").filter(g=>!g.used_as_navigation);i.length>0&&i.forEach(g=>{r.push({title:g.display_title,url:g.url})});const h=r.length>0?r:void 0;return[o,h]});function be({date:e,snippet:s}){return!e&&!s?null:e&&!s?a.jsx(F,{date:e}):!e&&s?a.jsx(a.Fragment,{children:s}):a.jsx("span",{children:a.jsx(v,{id:"bgWoDg",defaultMessage:"{date} â€” {snippet}",values:{date:a.jsx(F,{date:e}),snippet:s}})})}export{z as A,Ce as S,he as u};
//# sourceMappingURL=fy1n36to2eb0czaf.js.map

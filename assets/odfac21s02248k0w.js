var x=(o,e)=>(e=Symbol[o])?e:Symbol.for("Symbol."+o);var g=(o,e,r)=>(e=o[x("asyncIterator")])?e.call(o):(o=o[x("iterator")](),e={},r=(i,d)=>(d=o[i])&&(e[i]=n=>new Promise((a,u,m)=>(n=d.call(o,n),m=n.done,Promise.resolve(n.value).then(p=>a({value:p,done:m}),u)))),r("next"),r("return"),e);import{A as R,ab as F,m as N,h as A,r as c,u as B,j as t}from"./i8clt0mfz495j7ii.js";import{u as D,e9 as T,ho as v,fj as H,bs as L,bN as y,cJ as Q,cN as j,mL as _,mM as k,lq as O,f5 as $,cE as q,dv as G}from"./ghewn7l2ynbm32fm.js";import{C as J}from"./ixwp0fvcs3jhuh48.js";import{r as K,u as V,s as W,C as b,a as z,g as U,b as P,T as X,c as Y}from"./j0yo6uv6652vva62.js";import{T as Z,C as ee}from"./epmur8ofujia0j6q.js";import{g as te}from"./o564tkn3ln8nzryq.js";import{C as w,T as oe}from"./lbjflerr8tmfc11q.js";import"./mqebxepg7t6q2tie.js";import"./drmwaklva7v056il.js";import"./ns51nblw8ziscsgd.js";import"./6ji8ehbh56ghw0zw.js";import"./cb0ba83bmi83mjz2.js";import"./ce3hgmw4iyyhicud.js";import"./dxyrjy681bkwlnj8.js";import"./f76gy0b8ieo4s693.js";import"./icuos2x1zai4tnyd.js";import"./iakvhqfu6nmvphq6.js";import"./lo4w8zafp8iqjpvk.js";import"./mstl8wgfzorpgdoe.js";import"./pc7u7c6vz2ia5xux.js";import"./kfdkis1zwf4ccfgg.js";import"./ol9d5wxhynx9q2is.js";import"./mbmcx8v24u1ao1ke.js";import"./jh95iaetowvobxaf.js";import"./deakbbf27g8e7ba0.js";import"./omoqxnq6po1pmb00.js";import"./kl7c6054usfnqmd4.js";import"./k97n0y6ba9c9h39c.js";import"./hu1kfuw35sk0pi95.js";import"./kiv50zw1ij6k8vyj.js";import"./gdq1l97elemowxcc.js";import"./inhyojyded8f1i4q.js";import"./e4uyedc9wylrl0pu.js";import"./f5qlxxpahyz6p72m.js";import"./jdfzk1zd468oela3.js";import"./l2r1du6tfxyv7jaj.js";import"./ln88gzx578175chd.js";import"./hlon4mihnqp86jji.js";import"./b6hyii2315xk7j19.js";import"./olrcssu7duieo6m7.js";import"./irqko7c1s7qpl41n.js";import"./1u88i8jf4mwk3mc5.js";import"./mpzbsmypy64alaao.js";import"./fvjpw0lui4wq7vv3.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";import"./pajs134rv9yn6t4z.js";const Ze=()=>(K(),null),et=R(function(){const e=D(),r=F(),[i]=N(),d=A(),n=T(r.conversationId),a=v(i.get("readonly"),!1),u=v(i.get("isFullScreen"),!1),m=v(i.get("header"),!0),p=v(i.get("appPreview"),!1),C=H(),I=L(),S=v(i.get("hideBottomComposer"),!!a),f=T(r.canmoreId),s=c.useMemo(()=>y(e,n),[e,n]),l=V();c.useEffect(()=>{W({type:b.Textdoc,textdocId:f})},[f]),z(s.id,{kind:Q.PrimaryAssistant});const h=B();if(c.useEffect(()=>(j.retainThread(s.id),()=>{setTimeout(()=>{h.invalidateQueries(U({clientThreadId:s.id}))},0),j.releaseThread(s.id)}),[s.id,h]),c.useEffect(()=>{f||d("/")},[f,d]),c.useEffect(()=>{P().sendMessage({type:w.Loaded})},[f]),!f||(l==null?void 0:l.type)!==b.Textdoc)return null;const M=()=>{P().sendMessage({type:w.Close})},E=a&&!m;return t.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[t.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),t.jsx(_.Provider,{value:y(e,s.id),children:t.jsx(k,{conversation:s,children:t.jsx(O,{conversation:s,children:t.jsx(X,{clientThreadId:s.id,children:p?t.jsx($,{children:t.jsx(se,{textdocId:l.textdocId})}):E?t.jsxs(t.Fragment,{children:[t.jsx(Z,{clientThreadId:s.id,disableScroll:!C,textdocId:l.textdocId}),t.jsx(ee,{})]}):t.jsx(oe,{isEmbedded:!0,hideRunCode:!C,isFullScreen:u,hideHeader:!m,hideBottomComposer:S,isReadonlyFromQueryParam:a,hideRenameButton:I,clientThreadId:s.id,focusedTextdoc:l,onClose:M},"textdocContent")})})})})]})}),se=({textdocId:o})=>{var m;const e=c.useRef(null),r=Y(o),[i,d]=c.useState(!1),n=(m=r==null?void 0:r.versions)!=null?m:[],a=q(n),u=c.useCallback(G(async p=>{const C=te(p.type,p.content);if(e.current&&(C==="react"||C==="html")){d(!0);const s=e.current.evalAsync({language:C,code:p.content});try{for(var re=g(s),I,S,f;I=!(S=await re.next()).done;I=!1){const l=S.value;console.debug(l)}}catch(S){f=[S]}finally{try{I&&(S=re.return)&&await S.call(re)}finally{if(f)throw f[0]}}}d(!1)},100),[]);return c.useEffect(()=>{a&&u(a)},[a,u]),t.jsx(J,{id:o,visuallyHidden:!i,ref:e,enableTransition:!0,title:""})};export{Ze as clientLoader,et as default};
//# sourceMappingURL=odfac21s02248k0w.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ooz2slmm8agf6bjp.js","assets/i8clt0mfz495j7ii.js","assets/g8c1dqtl8z7ap2w4.js","assets/mk3mxdrbga0ztefz.js","assets/o9sv1qatwktfhtds.js","assets/is520d6nq4ucffx8.js","assets/fudxe3e6ciniw76h.js","assets/pabef28rs0urara1.js","assets/d2ynpexsjjgituh8.js","assets/nslvb1rlrsw3n7xb.js","assets/e4slqzd3gvdh4gpj.js","assets/mssovsxx0prqqx4y.js","assets/m53ly4eu8e9c6q19.js","assets/e7wuev8c8ywokymc.js","assets/gryeadru0tqqt3vi.js","assets/bthkwnb2znu2hg0o.js","assets/eahqa2opfkdu04yb.js","assets/mjnk1x5y7ytu1o7k.js","assets/kaxn2bizrxslkpa3.js","assets/fomrqem1h10p4nhy.js","assets/lqf1d5aq38lhhvj4.js","assets/biezqtzsomegvlsv.js","assets/m7ju152dn5ab1rui.js","assets/jqab1cg1m48dccx8.js","assets/igq4g5h0kvd74hab.js","assets/gdj7aa3kvh4x8qzj.js","assets/kt3nk4bhi2101czn.js","assets/d3y46a2mpr2sbz7s.js","assets/i5yf1gdrsw413d7n.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/hvuzea5wyep6l0ub.js","assets/emqvkcmhapaejsp0.js","assets/cx4oo5wqa9uf3in8.js","assets/kmbpv6g63y0ugt37.js","assets/izvx0vf35f3cqx26.js","assets/dyjp0wep007vxvkq.js","assets/ia54sddtrl9qa2wj.js","assets/nrby27vmpob112wj.js","assets/iv5du6yfmw73d3gx.js","assets/pdp94tw1ktf1pj0a.js","assets/d8z3f1hrx0jbde1l.js","assets/hso6u8eab07t04qb.js","assets/mxwy4kmdaryrewzb.js","assets/bgxcag65uz54fc39.js","assets/c8sj5q0wb2w4qlno.js","assets/mpv78j7w75btco0v.js","assets/lpn18ascydaxcdfj.js","assets/gvo1fqf7h2313x3d.js","assets/lb3e2s17svct1mam.js","assets/nnzgss862gapaux3.js","assets/nfccle6oyncifphl.js","assets/hu1bt0oauegdhua6.js","assets/h1em0bjkpkjv8ykw.js","assets/mjbhy8c4bs0n8qw2.js","assets/gy1lpvuoewmzh42c.js","assets/hxdh3tr5l8kut4ed.js","assets/ieykhlrsk25lij4e.js","assets/i03gut32e8jn5ajq.js","assets/e26n6uhwwtwdmiki.js","assets/mjq17q47489shd3e.js","assets/ozby1o16tp40naiq.js","assets/mzyl3pd4zxnxoe9i.js","assets/lep2wptoy14cfe2w.js","assets/eb6zep29zccfypdc.js","assets/cxbsld3botts7bfn.js","assets/da0eqg5j39u1e96s.js","assets/bbipyj9bituayr8q.js","assets/ivb8c1xam3e690hh.js","assets/kmo5unuf793khl43.js","assets/zl0env7yrga8vz86.js","assets/mnf9y116wq0a5kdn.js","assets/product-variants-gcznzbx5.css","assets/ov015nmz1yxh95ok.js","assets/olrcssu7duieo6m7.js","assets/czlj2e41cb4c3w4v.js","assets/k5zh2h7fpzx4n2oe.js","assets/iiok29s29bpdre61.js","assets/gjgbg8mnok0ngaoo.js","assets/f5bdf2ynleqr2zah.js","assets/kq8d654gegx6snmr.js","assets/ozgq3nk5vhninx80.js","assets/i94vqq9eycryltby.js","assets/g5lgy1otfli5p2x7.js","assets/pn83wqr6w775mq4b.js","assets/chs4g5r39qlnqw6r.js","assets/nzsqhqpna1ee8hwf.js","assets/ivhm4b1s5w1b1cuw.js","assets/eh21clr7cewe9q6y.js","assets/gutjuo0v1j4y19t1.js","assets/c80gqv0732s10rnu.js","assets/g69peh4qbpo7a7d7.js","assets/bzqztn8malpuegtc.js","assets/zul7780usssm7kro.js","assets/ansi-1f6vhsjh.css","assets/jyyjaseddjwyjwou.js","assets/kz85ppopzltkr0hm.js","assets/o9vew0btr2k0i59c.js","assets/f76gy0b8ieo4s693.js","assets/dxyrjy681bkwlnj8.js","assets/iakvhqfu6nmvphq6.js","assets/l0icc3zt92jpknxy.js","assets/iarex6kxmgocprus.js","assets/go502v54gisfd23y.js","assets/6ji8ehbh56ghw0zw.js","assets/ce3hgmw4iyyhicud.js","assets/mqebxepg7t6q2tie.js","assets/jdfzk1zd468oela3.js","assets/gdq1l97elemowxcc.js","assets/l2r1du6tfxyv7jaj.js","assets/ln88gzx578175chd.js","assets/hf25g8jqpmy99k5w.js","assets/omoqxnq6po1pmb00.js","assets/o56jrqjpjpipvc65.js","assets/kl7c6054usfnqmd4.js","assets/k97n0y6ba9c9h39c.js","assets/ew5h1tpzyj1oiamp.js","assets/dwikchly7agkd2y3.js","assets/julkxv3pzs8k4gnq.js","assets/bgrybb42icl9dini.js","assets/zm1ki9l766pgg0bx.js","assets/ib30xv8geh252fv7.js","assets/ol9d5wxhynx9q2is.js","assets/fna9z31n721lpf9f.js","assets/table-components-iztk4amh.css","assets/FormattedText-cp0srdqe.css","assets/mdgmhl7nsma70wnx.js","assets/iokrzhs8g9j8y9mp.js","assets/fp27qqwhg12gsehb.js","assets/e6eptpe9toj61kmv.js","assets/d5ow8gf4p19sa04c.js","assets/jydiuhuavfnsv8jk.js","assets/dkkcsrii3168szu2.js","assets/bz46otimdhidcz20.js","assets/ewkru1hsxkjpuxt5.js","assets/f87olchknhsp1yyk.js","assets/dzlsnt42nnmwuxsc.js","assets/gsas8pb1acnf7jnd.js","assets/di5elmieu5gkw656.js","assets/ceivmd4pm4umbvdn.js","assets/kn7epy984tqokc8q.js","assets/nju52ppu7cxhyzrm.js","assets/l907avfvlrp6ls67.js","assets/jy80tlibto3eimlf.js","assets/jmnvgtzhse37m0ro.js","assets/7drepi7d7klmi8rs.js","assets/neqq8ytwrb2pfsnd.js","assets/n2ejmom9s19yf10c.js","assets/j4okl08ry9q28iod.js","assets/n66ksdtiegytmoc2.js","assets/jv60r5969xbi17uj.js","assets/d3dln9os66orvpws.js","assets/b25488i064kv0fy8.js","assets/n4tew1fjlr8lryav.js","assets/edqpi59mx50h2olv.js","assets/ca6k1nnqi7yhzx8h.js","assets/ervkdkvfcpetg66z.js","assets/h5p5j45icn4dtxiq.js","assets/l6gjlh1w2nj1iunq.js","assets/li7c43yugisf62ut.js","assets/emsd9j2cfeekq0nv.js","assets/mtv2tygp7qg4w29d.js","assets/haju4e4zwcujvapb.js","assets/gh6n1nw0no6exqi4.js","assets/igs51pxvo37j2sw6.js","assets/hnj5r83zdnbmj5rs.js","assets/geuwu6jacpefv5lc.js","assets/ok5p8aikglnqqd82.js","assets/gqfz9aslm9c83gz5.js","assets/muqo0278pvyecf62.js","assets/fiwz0q9upm2smym5.js","assets/lclapmfd9avap15p.js","assets/klevl8sdnpainbl3.js","assets/nri0hrl47ygf8w0p.js","assets/ip1bg22t0287c8cy.js","assets/abwq3htfqpekhs38.js","assets/j4nmkdkymh0gf9lt.js","assets/i6ojecmupi4ar5tq.js","assets/l0g4prc0o7s7grky.js","assets/nhoyj7vucpkkecfi.js","assets/oqpuvdflzxc04e1g.js","assets/oypcm2vgt5u5uwnk.js","assets/hvpetgiyil1u6k8k.js","assets/cygq8mxjp86vbmk2.js","assets/jo4b6i1j3zlywpeh.js","assets/ef28lc1b3o54kec9.js","assets/bci083mws0hai8bl.js","assets/bwwtp434e5t8plq3.js","assets/loigwwkjnze49dp5.js","assets/dw2sagcmxsd9pyji.js","assets/cr5h05bhk5js9k9c.js","assets/fwyctp3zfyh6emd2.js","assets/orvtgt57nxqo5v9x.js","assets/dyie70wwv508ud8r.js","assets/eyatw3wgc1bbpoog.js","assets/nzmq5nvm0e97q2e1.js","assets/mnpqan18b42bsh1o.js","assets/hw5dmskx8fqgh0xb.js","assets/iyq5w8n4elzr597d.js","assets/pcwyhd2ia1xnez4s.js","assets/nw44vms3p4cc1mrm.js","assets/fobvway9e4v0s6vc.js","assets/d5usxzmea5cxgha2.js","assets/m8rwdn0e0vratxed.js","assets/ma6nalw6t5402ja2.js","assets/ex0j05iz0foxj7rk.js","assets/gu1hhvf1emaykrbn.js","assets/mfw23qkpoldespd9.js","assets/mr0t7vtj2washkif.js","assets/h95am3x7frofk8a1.js","assets/o6zuph8g9nfa6t2k.js","assets/jz1xchahtfv1p8lw.js","assets/f1yqacxntwh7hwye.js","assets/i1yh71mwqfml3mls.js","assets/hrwv1vx3vlx2ogy2.js","assets/svmcys0zax3ucc8o.js","assets/hdjlegm8snk3xktc.js","assets/munnqoeyncq84hhw.js","assets/eu4d2sy2duibeikv.js","assets/ciotlj9oq1d7s8l3.js","assets/opxpbab5xffcn23x.js","assets/lw3yydat7krj8i7u.js","assets/ijcujlccg0r2esif.js","assets/e7uwndqnn646up0x.js","assets/nfkiizgqej9iev15.js","assets/fm5f9wgufd7zdlo5.js","assets/f9yi509nsc3hdreq.js","assets/hzpop33aow4rbsuf.js","assets/hjlr7f1x1wl0ovkt.js","assets/c04xnziq7ngh3xcz.js","assets/o0dd5f2xwmjkwdno.js","assets/pcgps09l9meg23og.js","assets/kaiq6xsce2ce9jwc.js","assets/ocm696u96obhapt8.js","assets/f0job1fk4zp8yzbu.js","assets/d3vtc5549jidf46x.js","assets/h3fnimorznpglu1m.js","assets/nd0l334cflqun5zf.js","assets/d1o0uedh3d9ew7ib.js","assets/d8877bxkmz2am6pw.js","assets/nlapoxbdtdpwvd2h.js","assets/d63jm146253lx3xq.js","assets/f1ck6gk84p2xkr4m.js","assets/fefndn2gt024gfqh.js","assets/kqljukn7m8ep0np1.js","assets/dujttbag0lb0tmgz.js","assets/oylpo2l5g6gyz7yn.js","assets/efrtjupvbvunv8ff.js","assets/l4pli7qldeykp9cl.js","assets/jq6zcafi39e65jll.js","assets/ebe73b5ila3cf4xf.js","assets/8ogegalkndkolczu.js","assets/kfdkis1zwf4ccfgg.js","assets/mbmcx8v24u1ao1ke.js","assets/dt74bs5wyg16icnh.js","assets/jaj7xqi147v16cd7.js","assets/etwtyusadum8sxs7.js","assets/huxxd6cqecfry0y3.js","assets/fmspz7huzt2iefwt.js","assets/bixu5vz33dd1zzrz.js","assets/cli58vk9v08cn6jk.js","assets/o564tkn3ln8nzryq.js","assets/ns51nblw8ziscsgd.js","assets/lo4w8zafp8iqjpvk.js","assets/mstl8wgfzorpgdoe.js","assets/pc7u7c6vz2ia5xux.js","assets/jh95iaetowvobxaf.js","assets/deakbbf27g8e7ba0.js","assets/hu1kfuw35sk0pi95.js","assets/epmur8ofujia0j6q.js","assets/bj1ejin6tzi0v3v8.js","assets/cun3s29ggxbwe4ui.js","assets/mqkppnsks40c5l5b.js","assets/lbr5dcyofn0xux3u.js","assets/egemo5clxk1flxmw.js","assets/htbwawyw7ysxilu7.js","assets/nvaqdt3y30npjcvs.js","assets/fdkwc23ton7ihjd6.js","assets/jwwofwbvdtftvupg.js","assets/gmvm3a44s5px1mmy.js","assets/nybp4ord8gyv67lt.js","assets/kpucc6kjx38gmgn0.js","assets/ca33yvtckkoksjrq.js","assets/hszplc0bkj6ysztt.js","assets/jj35k2l0yxs98vlp.js","assets/g7blak97rvihtacv.js","assets/eksnz7unqn6y0zbq.js","assets/oz2w8uv2a0ics46w.js","assets/du2nevxu1vmhk9y6.js","assets/jl3h9zo6ij9nwubd.js","assets/d9j8u3rncvh4iedh.js","assets/ivu8omwsepspweze.js","assets/eyp3kz606u6ff1xy.js","assets/myvdm65kegx88luy.js","assets/pdnyr73t8ws12mes.js","assets/otyqbgm5k20lfbwp.js","assets/n1njhaxkf65rrafr.js","assets/k8bvofl8txmce9x3.js","assets/jn7f46w9midpij9z.js","assets/mo3vn6pamotgno2w.js","assets/e216z3zqjas1rma2.js","assets/mbhfxri3syrb9rbq.js","assets/fg7gn2618r3hvum8.js","assets/n8qbc0log2m0cne7.js","assets/iguylefzk1dr51wi.js","assets/fy6752fpzkgozktl.js","assets/ADAVisualizationComponent-kv1hz405.css","assets/hr4c3yfmv4kj7cs0.js","assets/bqk4d9uy5l3d6vsz.js","assets/jyroje0qaxw6h3z1.js","assets/mkw62yhdl76wvm98.js","assets/llet3iu13s5doohp.js","assets/k7gle8iztcijpdqk.js","assets/kl3c7pa639r7ky2c.js","assets/mhp2kzvwnqoxwf6q.js","assets/d7u80wg0bm7kxo6u.js","assets/pe47guieqa4pccw0.js","assets/fg1cwp14kl8llosr.js","assets/hnl1ywqdt0z6ew0k.js","assets/c7eenf6ati4uj8ol.js","assets/cikz7bq6q4slq8dq.js","assets/nm6d95nu0wxxwv4z.js","assets/jqogk2ff4pp5or3y.js","assets/l4cbw33k2a0g7zpo.js","assets/eby1bla1a7jk4r4q.js","assets/jopff0alscxytldr.js","assets/iqtx95r64vhr7h1k.js","assets/i7yquu4hfwxnlo7t.js","assets/nxae90yqtxhnic4y.js","assets/ech7w6ifmhmaazwo.js","assets/h8noe1whamzp5j6y.js","assets/o84nb2862ibyoi1c.js","assets/rsi9kppw43ykrsgk.js","assets/fie3xvluxpg2pnx2.js","assets/c09b3wnyb7ragkgg.js","assets/is1k3hg6hctfw3sz.js","assets/gri0killvjo5c85i.js","assets/e3jwynezq3sbw7bs.js","assets/fsmgof058qqyu9y1.js","assets/g8i6bixylsxyemsr.js","assets/ogo8hvquv5crkyqt.js","assets/cwvii49m4h3oz7sn.js","assets/itwig1mb68mn0y5d.js","assets/zzvv5yubwwtkudan.js","assets/jl0gmzdyiwz0e04r.js","assets/nyiv7m02dbt9yeja.js","assets/cfouv5uwei17418c.js","assets/bh6hb7ypq0ifozyx.js","assets/md1kcnxjf4p73avd.js","assets/gkltu4ukkxzucs68.js","assets/okzny25t09iyl31t.js","assets/eetxjvcpvrpbo7qr.js","assets/o6v567j44kxgowzp.js","assets/n5fd4985ipltjznc.js","assets/foxtdwhog9l3iocy.js","assets/nnak5qlpz7soad97.js","assets/gs5bu6f3nr32m7h6.js","assets/d8qw1bl2m42jcptw.js","assets/d2d1p33trde830sx.js","assets/fqz8sozslskhjbvs.js","assets/l69z6zkz8odqz99t.js","assets/o16x9m1k4d29ak42.js","assets/c8nigctmte2h5zb2.js","assets/doippqp4i4x3ehuc.js","assets/n8tfpmgkqe98i7yl.js","assets/kgnykbdth8mb50na.js","assets/nkzzfmws4g2cwqnd.js","assets/hht3m8p9e0s4tqnx.js","assets/ktw3b87sujui39wx.js","assets/nrrhfi0a0bbsg9w2.js","assets/dw5r5zt0675lb73y.js","assets/e4831ztdomqzv5q3.js","assets/pc8anf0wrjlgogua.js","assets/o9hljbbpo7aqoo2o.js","assets/dkwbd01msodbgagg.js","assets/ippis36bhy56w9ig.js","assets/3j20em1lilnrpdcm.js","assets/gn07ixwwa4zyd9g5.js","assets/jgvrewhnjcf398o6.js","assets/gyslsi6u3sjz2wcb.js","assets/gpmvxeb8kgs3tobh.js","assets/dx8c7lvygozv45al.js","assets/d69imh1iyv32gaf9.js","assets/bzgf4ifuffcltugf.js","assets/jz6627o4ye424akj.js","assets/eosy1ymy279c5qnc.js","assets/h8pr5f6a9kp0y6hm.js","assets/bxgk09qvxvkate6l.js","assets/ejbyq0lrsu2qu7eg.js","assets/ecpt9jb1cc653p1n.js","assets/okk8l59g9pi0np0z.js","assets/i1vfxlpgdgslxqwx.js","assets/efcqr1k3spvze0uw.js","assets/ohp971zrcpar3sy7.js","assets/b0t5nk82pz9yweia.js","assets/db2vbext8urnm82g.js","assets/jlbpmfnxy8htpnjq.js","assets/i8srkfobxvgw8sgj.js","assets/d3awu4bo9vouiss6.js","assets/ekpl12ubjxpdxfy1.js","assets/h1jbqtena24viel6.js","assets/m89x2zftpo6hrypr.js","assets/j2tk9qhizy0n5zaq.js","assets/ivwhma44lqs3zafn.js","assets/gbxm5e2h7cqar0c9.js","assets/dkkqsrmgpmz14chv.js","assets/gr73ffwzttzymtep.js","assets/od3rnm4927scb9m9.js","assets/bfbugzzlr3yhrunk.js","assets/gjip6pne3m251qjn.js","assets/odg6tnre74z3nvyt.js","assets/ntllkljs03gtr0eq.js","assets/f6ek1vdaohim72xh.js","assets/mpzbsmypy64alaao.js","assets/fvjpw0lui4wq7vv3.js","assets/msa4w63vhygpe5iv.js","assets/fy1n36to2eb0czaf.js","assets/nvrhbbc4qxooogd5.js","assets/l3jkxavl2du23cqn.js","assets/hdvkrxbvy7kwpghs.js","assets/hkwy60i7c1zytn8i.js","assets/ksuwacyo5m7qmkk7.js","assets/blz4q0fq9ltf2r30.js","assets/h2fsh6u947t1mvet.js","assets/owvt7s3ln6qx5fou.js","assets/hk7ym2rzlomukbdz.js","assets/pbvsc3do5o365cxq.js","assets/o2ch1u40q6bs5ljp.js","assets/mefat3kp0bny0xvn.js","assets/lcprnl5smvp60nx3.js","assets/jck4acc8t15jgzfz.js","assets/fsehb5gxjzapxyup.js","assets/d37wnl6f0j36qmcs.js","assets/ecfi069fherkr66q.js","assets/joa8jajuiu4xqpzn.js","assets/jwaqw91gvomlruq4.js","assets/i62z0czv9p8e8lku.js","assets/g67jqqe3hqj7p3s8.js","assets/ixwp0fvcs3jhuh48.js","assets/drmwaklva7v056il.js","assets/cb0ba83bmi83mjz2.js","assets/icuos2x1zai4tnyd.js","assets/k6dbkwjaexelrlgh.js","assets/kiv50zw1ij6k8vyj.js","assets/k1t8elp5z7nmkg2d.js","assets/kau2ug0899cbkpxh.js","assets/comments-plugin-tah3dlup.css","assets/codemirror-g1j9yafs.css","assets/nrnf80lbyqanffwr.js","assets/prosemirror-egdr15sq.css","assets/gru2v64zamj4frog.js","assets/hlon4mihnqp86jji.js","assets/b6hyii2315xk7j19.js","assets/agji492j2wlm3ws1.js","assets/f510v2yorm9a64cn.js","assets/cffo1yt0w7ufpf9i.js","assets/b3nbyz21c52nzclw.js","assets/mri7dbc9l2sw15zb.js","assets/n3koeaekxk6giq83.js","assets/h2i1yqha5tvddfdm.js","assets/nb9dlstb4iu1wrqb.js","assets/eyao241335injypy.js","assets/fkxibn5xlry0itzs.js","assets/e5a6ih8pvtg5hkvc.js","assets/e9gtc6k4kfmwzcn1.js","assets/srab5nufkcaxuad9.js","assets/dr0tvd8qnw5fl2kx.js","assets/ko9i87h17rh10t5i.js","assets/gkuehqsbo5y71nbh.js","assets/c1l8fjfcsh4r8b9b.js","assets/l5kfsysq1i5mongk.js","assets/eqmr3ssx7mhy67lm.js","assets/da9ysnvw39tlmcb1.js","assets/f2hykrvh1au16wwb.js","assets/b0k25fupgmbv7hs2.js","assets/f75y3r4bqi9ww2e3.js","assets/cbq186c7y6011gk6.js","assets/gdbkrtxajxy6ul7n.js","assets/m360psfv67etw60z.js","assets/2uk20wu2pu1737un.js","assets/j7q6dd79tspx35h1.js","assets/c8g7bbhygzmjvepl.js","assets/f3ayl2xqr3q5cwjf.js","assets/kwxtgizebk06tny0.js","assets/ozne4j3oo0wdlmeq.js","assets/nvq9tj7793nseqek.js","assets/ghu42c4s93zulelp.js","assets/i5ul706mvzl44ckw.js","assets/no9gq0vcq6wwuw16.js","assets/feinpytms1ktgvew.js","assets/gkchj3gt2d9zqfx9.js","assets/o39b1dsvjygcu6em.js","assets/ohx0iiiymbe8tpfk.js","assets/kbowh9zd5zxac3v2.js","assets/d2ojcu4ayxxwx05r.js","assets/gxl97nh5abz8zsuj.js","assets/ggcep01jaih29s37.js","assets/laww2sl42347dzof.js","assets/bd0h74jwf5k75ln3.js","assets/clxmfjmtyojr2by1.js","assets/frf0wu8ouyfyu06j.js","assets/nr1vc1815n1t71bd.js","assets/g8rditsarfiblili.js","assets/kcu5x5iyzqj0di3k.js","assets/ddurw41ljhd63sp4.js","assets/ngzddsuq9p60x7qe.js","assets/dyr84rl26v62d8gl.js","assets/mtsfsh7z74bmo6ig.js","assets/f2itj05whsmn3kgs.js","assets/s6zt7e1362fzrink.js","assets/ftif1cjhtov9wlz9.js","assets/ler6n501y0bzhqn2.js","assets/iqoo5whnx14dvo9x.js","assets/khzlteyrl3j9opbq.js","assets/eirsr72354ogpfn5.js","assets/nlf69pu4xn6tl2q3.js","assets/6h7aompsg2q7gg0f.js","assets/iwl9ls3posey4bk1.js","assets/hz39tsbsdm5qfpb0.js","assets/bc51ukj7a2qfpnc3.js","assets/hhl3vz1yrrpnwu4u.js","assets/kj8h59p17s2tn6gp.js","assets/mh1u90j45tiq86ol.js","assets/cmfcekeagu7lnouo.js","assets/fn0h0oidnzmutllx.js","assets/fb2095ktsebx1zzy.js","assets/lvme5c5hzbidy3v7.js","assets/ntuoxtu7ohytvwjv.js","assets/kkginmfs5ty8sze2.js","assets/dm9rysukg8j76j38.js","assets/eh8svzo9pdq7gt5c.js","assets/eol79s9yacok2dwq.js","assets/cebio9b3sfo538q5.js","assets/n1bc4nh6f8gygv9r.js","assets/ijwos19b21syb4e3.js","assets/gkuhfrmysvpuw4uo.js","assets/ghnvrdqxofgwprfv.js","assets/f2nizyutacfhjly3.js","assets/ImageLightbox-j22hx8sz.css"])))=>i.map(i=>d[i]);
var wC=Object.freeze,kC=Object.defineProperty,HV=Object.defineProperties;var WV=Object.getOwnPropertyDescriptors;var xf=Object.getOwnPropertySymbols;var MC=Object.prototype.hasOwnProperty,TC=Object.prototype.propertyIsEnumerable;var Yl=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),d_=t=>{throw TypeError(t)};var c_=(t,e,n)=>e in t?kC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))MC.call(e,n)&&c_(t,n,e[n]);if(xf)for(var n of xf(e))TC.call(e,n)&&c_(t,n,e[n]);return t},B=(t,e)=>HV(t,WV(e));var Me=(t,e)=>{var n={};for(var s in t)MC.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&xf)for(var s of xf(t))e.indexOf(s)<0&&TC.call(t,s)&&(n[s]=t[s]);return n};var ne=(t,e,n)=>c_(t,typeof e!="symbol"?e+"":e,n),u_=(t,e,n)=>e.has(t)||d_("Cannot "+n);var Mn=(t,e,n)=>(u_(t,e,"read from private field"),n?n.call(t):e.get(t)),co=(t,e,n)=>e.has(t)?d_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Fr=(t,e,n,s)=>(u_(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n),Qt=(t,e,n)=>(u_(t,e,"access private method"),n);var rt=(t,e)=>wC(kC(t,"raw",{value:wC(e||t.slice())}));var ts=function(t,e){this[0]=t,this[1]=e},Br=(t,e,n)=>{var s=(i,l,c,d)=>{try{var u=n[i](l),m=(l=u.value)instanceof ts,f=u.done;Promise.resolve(m?l[0]:l).then(p=>m?s(i==="return"?i:"next",l[1]?{done:p.done,value:p.value}:p,c,d):c({value:p,done:f})).catch(p=>s("throw",p,c,d))}catch(p){d(p)}},o=i=>a[i]=l=>new Promise((c,d)=>s(i,l,c,d)),a={};return n=n.apply(t,e),a[Yl("asyncIterator")]=()=>a,o("next"),o("throw"),o("return"),a},m_=t=>{var e=t[Yl("asyncIterator")],n=!1,s,o={};return e==null?(e=t[Yl("iterator")](),s=a=>o[a]=i=>e[a](i)):(e=e.call(t),s=a=>o[a]=i=>{if(n){if(n=!1,a==="throw")throw i;return i}return n=!0,{done:!1,value:new ts(new Promise(l=>{var c=e[a](i);c instanceof Object||d_("Object expected"),l(c)}),1)}}),o[Yl("iterator")]=()=>o,s("next"),"throw"in e?s("throw"):o.throw=a=>{throw a},"return"in e&&s("return"),o},jo=(t,e,n)=>(e=t[Yl("asyncIterator")])?e.call(t):(t=t[Yl("iterator")](),e={},n=(s,o)=>(o=t[s])&&(e[s]=a=>new Promise((i,l,c)=>(a=o.call(t,a),c=a.done,Promise.resolve(a.value).then(d=>i({value:d,done:c}),l)))),n("next"),n("return"),e);import{c as H,u as xt,a as Bt,g as zV,j as r,r as _,d as He,b as lt,e as J,f as be,_ as I,M as P,R as Kn,h as at,i as fi,q as io,k as ls,l as Wn,m as zs,s as Jv,L as Aa,n as R6,o as vi,v as _s,p as qV,t as YV,w as ZV,x as KV,y as L6,z as QV,A as JV,B as yf,F as XV}from"./i8clt0mfz495j7ii.js";import{u as G,i as cs,a as ue,b as th,c as In,s as Qe,g as Nu,R as pe,d as W,F as ct,T as kt,e as Ut,D as f_,f as $o,W as va,h as xe,j as Vn,k as Xv,l as O6,A as qt,m as ry,G as Tn,n as Js,o as j,L,p as bl,C as Pt,q as rs,M as so,P as U,r as eG,t as tG,v as Kt,w as mt,x as Le,y as nG,O as iy,z as ut,B as _n,E as Nn,H as qo,I as D6,J as Oe,S as We,K as sG,N as ur,Q as cn,U as Rt,V as oG,X as nh,Y as F6,Z as sh,_ as B6,$ as he,a0 as Ve,a1 as _t,a2 as oh,a3 as aG,a4 as Co,a5 as pn,a6 as U6,a7 as Sl,a8 as Cl,a9 as xm,aa as Rn,ab as rG,ac as wl,ad as dd,ae as iG,af as eb,ag as tb,ah as ud,ai as nb,aj as V6,ak as Ie,al as xs,am as Nt,an as Hn,ao as sb,ap as Qn,aq as Jn,ar as Yo,as as pt,at as ob,au as ah,av as qu,aw as lG,ax as cG,ay as ab,az as rb,aA as dG,aB as mr,aC as md,aD as G6,aE as uG,aF as $6,aG as Ia,aH as mG,aI as fG,aJ as fd,aK as pd,aL as Bn,aM as rh,aN as vn,aO as H6,aP as ym,aQ as ih,aR as fn,aS as fr,aT as zc,aU as bt,aV as Xe,aW as dn,aX as un,aY as Je,aZ as W6,a_ as Gs,a$ as En,b0 as Ws,b1 as Un,b2 as lh,b3 as pG,b4 as z6,b5 as q6,b6 as wo,b7 as en,b8 as It,b9 as ib,ba as Zo,bb as Ee,bc as Ae,bd as gd,be as ds,bf as Y6,bg as lb,bh as Z6,bi as kl,bj as Ct,bk as ja,bl as gG,bm as vf,bn as hG,bo as K6,bp as Vo,bq as Cn,br as vm,bs as hd,bt as _G,bu as xG,bv as yG,bw as Yu,bx as cb,by as Ko,bz as qs,bA as db,bB as Q6,bC as vG,bD as bG,bE as ch,bF as ub,bG as SG,bH as J6,bI as Sn,bJ as ri,bK as _d,bL as hn,bM as Yt,bN as ht,bO as me,bP as CG,bQ as ft,bR as jt,bS as wG,bT as qe,bU as hp,bV as xd,bW as Bp,bX as ko,bY as ln,bZ as kG,b_ as MG,b$ as TG,c0 as EG,c1 as AG,c2 as yd,c3 as mb,c4 as $s,c5 as Qo,c6 as dh,c7 as ba,c8 as bi,c9 as fb,ca as pb,cb as IG,cc as EC,cd as jG,ce as ns,cf as PG,cg as nl,ch as ly,ci as NG,cj as pa,ck as bm,cl as oo,cm as pr,cn as dt,co as Ze,cp as X6,cq as eA,cr as gb,cs as RG,ct as tA,cu as LG,cv as hb,cw as OG,cx as uh,cy as DG,cz as FG,cA as nA,cB as BG,cC as _b,cD as UG,cE as Wo,cF as Zu,cG as gr,cH as Ue,cI as Jo,cJ as Tt,cK as Pa,cL as sA,cM as qi,cN as hr,cO as Cr,cP as Sm,cQ as VG,cR as oA,cS as ii,cT as aA,cV as GG,cW as $G,cX as HG,cY as p_,cZ as pi,c_ as rA,c$ as WG,d0 as iA,d1 as _r,d2 as xr,d3 as zG,d4 as uo,d5 as vd,d6 as Xa,d7 as jc,d8 as xb,d9 as cy,da as qG,db as AC,dc as YG,dd as gi,de as Na,df as ZG,dg as KG,dh as QG,di as JG,dj as gt,dk as is,dl as Ru,dm as Hr,dn as Up,dp as mh,dq as bd,dr as lA,ds as cA,dt as Ku,du as IC,dv as yr,dw as Sa,dx as hu,dy as XG,dz as e$,dA as fh,dB as ph,dC as t$,dD as yb,dE as dA,dF as n$,dG as vb,dH as Cm,dI as jC,dJ as bb,dK as us,dL as uA,dM as wn,dN as gh,dO as mA,dP as hh,dQ as Vp,dR as s$,dS as o$,dT as a$,dU as r$,dV as PC,dW as i$,dX as l$,dY as Sb,dZ as c$,d_ as ml,d$,e0 as fA,e1 as Ho,e2 as NC,e3 as g_,e4 as K,e5 as Gp,e6 as u$,e7 as m$,e8 as Go,e9 as hs,ea as pA,eb as f$,ec as gA,ed as Io,ee as Xo,ef as $p,eg as Es,eh as wm,ei as km,ej as li,ek as zo,el as Cb,em as hA,en as Sd,eo as Si,ep as p$,eq as _A,er as xA,es as Mm,et as wb,eu as ss,ev as g$,ew as kb,ex as yA,ey as Mb,ez as vA,eA as bA,eB as SA,eC as Qu,eD as _h,eE as h$,eF as _$,eG as xh,eH as fl,eI as Cd,eJ as Tm,eK as wd,eL as Zl,eM as CA,eN as x$,eO as y$,eP as v$,eQ as Tb,eR as Ml,eS as Gn,eT as Em,eU as Am,eV as b$,eW as S$,eX as C$,eY as w$,eZ as wA,e_ as Eb,e$ as kA,f0 as MA,f1 as TA,f2 as k$,f3 as M$,f4 as Cs,f5 as kd,f6 as T$,f7 as Mo,f8 as E$,f9 as EA,fa as yh,fb as A$,fc as vh,fd as I$,fe as j$,ff as Xn,fg as Tl,fh as Ab,fi as P$,fj as N$,fk as R$,fl as L$,fm as O$,fn as bh,fo as D$,fp as F$,fq as B$,fr as U$,fs as Im,ft as AA,fu as V$,fv as Oo,fw as Sh,fx as Ch,fy as bf,fz as fs,fA as ea,fB as Ib,fC as G$,fD as jb,fE as Pb,fF as $$,fG as Md,fH as IA,fI as jA,fJ as PA,fK as NA,fL as H$,fM as W$,fN as z$,fO as q$,fP as Y$,fQ as RA,fR as Z$,fS as dy,fT as K$,fU as LA,fV as OA,fW as Nb,fX as DA,fY as Q$,fZ as Td,f_ as FA,f$ as xa,g0 as J$,g1 as jm,g2 as wh,g3 as BA,g4 as kh,g5 as Rb,g6 as UA,g7 as VA,g8 as GA,g9 as $A,ga as HA,gb as WA,gc as zA,gd as qA,ge as YA,gf as Lb,gg as X$,gh as ya,gi as eH,gj as An,gk as El,gl as tH,gm as nH,gn as sH,go as ZA,gp as oH,gq as aH,gr as KA,gs as rH,gt as iH,gu as lH,gv as cH,gw as dH,gx as uH,gy as mH,gz as Mh,gA as RC,gB as LC,gC as Ed,gD as fH,gE as Hp,gF as h_,gG as Ob,gH as Th,gI as pH,gJ as Eh,gK as Ah,gL as gH,gM as hH,gN as Ju,gO as _H,gP as xH,gQ as Al,gR as yH,gS as vH,gT as QA,gU as Wp,gV as Ih,gW as bH,gX as To,gY as SH,gZ as CH,g_ as OC,g$ as wH,h0 as JA,h1 as kH,h2 as Xu,h3 as XA,h4 as Db,h5 as sr,h6 as e9,h7 as ao,h8 as MH,h9 as t9,ha as sl,hb as TH,hc as EH,hd as As,he as Fb,hf as Bb,hg as jh,hh as AH,hi as Sf,hj as IH,hk as jH,hl as n9,hm as s9,hn as ci,ho as Lu,hp as Ph,hq as Ub,hr as o9,hs as PH,ht as a9,hu as NH,hv as or,hw as Pm,hx as r9,hy as uy,hz as RH,hA as LH,hB as em,hC as tm,hD as i9,hE as OH,hF as DH,hG as DC,hH as FH,hI as BH,hJ as UH,hK as VH,hL as _u,hM as Vb,hN as GH,hO as Gb,hP as $b,hQ as $t,hR as my,hS as l9,hT as c9,hU as $H,hV as it,hW as HH,hX as d9,hY as WH,hZ as u9,h_ as pl,h$ as Yi,i0 as _p,i1 as zH,i2 as FC,i3 as qH,i4 as Hb,i5 as YH,i6 as ZH,i7 as KH,i8 as QH,i9 as JH,ia as XH,ib as Ad,ic as eW,id as tW,ie as nW,ig as sW,ih as oW,ii as aW,ij as rW,ik as iW,il as lW,im as Nh,io as Wt,ip as cW,iq as m9,ir as Id,is as dW,it as uW,iu as Ci,iv as ar,iw as ol,ix as vo,iy as f9,iz as Wb,iA as Il,iB as zb,iC as mW,iD as fW,iE as Rh,iF as pW,iG as p9,iH as gW,iI as hW,iJ as _W,iK as Kl,iL as BC,iM as jl,iN as Pc,iO as xW,iP as yW,iQ as vW,iR as Lh,iS as bW,iT as g9,iU as qb,iV as h9,iW as SW,iX as Et,iY as Yb,iZ as Oh,i_ as CW,i$ as wW,j0 as _9,j1 as __,j2 as x_,j3 as kW,j4 as Zb,j5 as MW,j6 as TW,j7 as EW,j8 as AW,j9 as IW,ja as bo,jb as jW,jc as Ft,jd as ma,je as qc,jf as PW,jg as NW,jh as RW,ji as LW,jj as zp,jk as x9,jl as OW,jm as Kb,jn as DW,jo as FW,jp as BW,jq as Eo,jr as UW,js as VW,jt as y9,ju as GW,jv as fy,jw as $W,jx as HW,jy as WW,jz as Qb,jA as v9,jB as Nm,jC as Jb,jD as zW,jE as wi,jF as Ca,jG as qW,jH as wr,jI as YW,jJ as Xb,jK as Jr,jL as Ln,jM as ZW,jN as e2,jO as t2,jP as KW,jQ as QW,jR as n2,jS as JW,jT as XW,jU as xp,jV as s2,jW as b9,jX as S9,jY as Rm,jZ as ez,j_ as Dh,j$ as o2,k0 as tz,k1 as nz,k2 as C9,k3 as yc,k4 as w9,k5 as sz,k6 as oz,k7 as az,k8 as rz,k9 as iz,ka as lz,kb as cz,kc as dz,kd as uz,ke as Fh,kf as mz,kg as qp,kh as fz,ki as pz,kj as gz,kk as hz,kl as _z,km as k9,kn as xz,ko as yz,kp as M9,kq as vz,kr as bz,ks as a2,kt as T9,ku as E9,kv as Bh,kw as Sz,kx as Cz,ky as wz,kz as A9,kA as I9,kB as j9,kC as UC,kD as py,kE as kz,kF as Mz,kG as Tz,kH as Ez,kI as P9,kJ as Az,kK as jd,kL as Iz,kM as r2,kN as jz,kO as Pz,kP as i2,kQ as N9,kR as Nz,kS as gl,kT as Rz,kU as Yp,kV as R9,kW as VC,kX as Lz,kY as L9,kZ as Oz,k_ as O9,k$ as Dz,l0 as Fz,l1 as Bz,l2 as Uz,l3 as Vz,l4 as Gz,l5 as D9,l6 as $z,l7 as Hz,l8 as Pi,l9 as So,la as Wz,lb as zz,lc as qz,ld as Yz,le as Uh,lf as F9,lg as Zd,lh as Zz,li as B9,lj as Kz,lk as Qz,ll as U9,lm as kr,ln as Mr,lo as V9,lp as GC,lq as Jz,lr as Ou,ls as l2,lt as Xz,lu as $C,lv as eq,lw as HC,lx as tq,ly as nq,lz as G9,lA as sq,lB as oq,lC as WC,lD as aq,lE as $9,lF as rq,lG as H9,lH as W9,lI as iq,lJ as $i,lK as lq,lL as cq,lM as z9,lN as dq,lO as q9,lP as Y9,lQ as Z9,lR as uq,lS as mq,lT as Cf,lU as fq,lV as pq,lW as gq,lX as zt,lY as K9,lZ as hq,l_ as _q,l$ as Q9,m0 as xq,m1 as yq,m2 as vq,m3 as bq,m4 as Sq,m5 as Cq,m6 as wq,m7 as gy,m8 as J9,m9 as kq,ma as Mq,mb as Tq,mc as Eq,md as Aq,me as Iq,mf as zC,mg as jq,mh as Pq,mi as Nq,mj as wf,mk as X9,ml as Rq,mm as hy,mn as Lq,mo as Oq,mp as Kd,mq as qC,mr as Dq,ms as Fq,mt as YC,mu as Bq,mv as Uq,mw as e7,mx as Vq,my as ZC,mz as Gq,mA as $q,mB as t7,mC as KC,mD as Ni,mE as Ql,mF as Hq}from"./ghewn7l2ynbm32fm.js";var Ye=(t=>(t.Onboarding="oai/apps/hasSeenOnboarding",t.hasSeenExistingUserPersonalityOnboarding="oai/apps/hasSeenExistingUserPersonalityOnboarding",t.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",t.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",t.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",t.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",t.NewOnboardingConvo="oai/apps/hasSeenNewUserOnboardingConvo",t.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",t.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",t.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",t.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",t.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",t.UseSidekick="oai/apps/hasDismissedUseSidekick",t.UseSidetron="oai/apps/hasDismissedUseSidetron",t.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",t.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",t.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",t.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",t.hasSeenComposerContextualAnswerTooltip="oai/apps/hasSeenComposerContextualAnswerTooltip",t.hasSeenConnectorsNuxModal="oai/apps/hasSeenConnectorsNuxModal",t.hasSeenGoogleConnectorsNuxModal="oai/apps/hasSeenGoogleConnectorsNuxModal",t.hasSeenContextualAnswerGoogleSyncFinished="oai/apps/hasSeenContextualAnswerGoogleSyncFinished",t.hasSeenConnectorsSourcesPillTooltip="oai/apps/hasSeenConnectorsSourcesPillTooltip",t.hasSeenConnectorsUpgradeFileAccessModal="oai/apps/hasSeenConnectorsUpgradeFileAccessModal",t.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",t.hasSeenPioneer="oai/apps/hasSeenPioneer",t.hasSeenMaverick="oai/apps/hasSeenMaverick",t.hasSeenMaverickCapi="oai/apps/hasSeenMaverickCapi",t.hasSeenTrailBlazer="oai/apps/hasSeenTrailBlazer",t.hasSeenStratos="oai/apps/hasSeenStratos",t.hasSeenWayfinder="oai/apps/hasSeenWayfinder",t.hasSeenStarpath01="oai/apps/hasSeenStarpath01",t.hasSeenStarpath02="oai/apps/hasSeenStarpath02",t.hasSeenStarpath03="oai/apps/hasSeenStarpath03",t.hasSeenStarpath04="oai/apps/hasSeenStarpath04",t.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",t.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",t.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",t.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",t.DesktopOperatorAnnouncement="oai/apps/hasSeenDesktopOperatorAnnouncement",t.DesktopClassmatesPromotionAnnouncement="oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement",t.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",t.NewStaticOnboardingFlow="oai/apps/hasSeenStaticOnboarding",t.NewPromptOnboardingFlow="oai/apps/hasSeenPromptOnboarding",t.CreateExampleChatsOnboarding="oai/apps/hasCreatedExampleChats",t.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",t.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",t.hasSeenPotionOnboarding="oai/apps/hasSeenPotionOnboarding",t.hasSeenProjectsUpdateNuxTooltip="oai/apps/hasSeenProjectsUpdateNuxTooltip",t.hasSeenProjectsToFree="oai/apps/hasSeenProjectsToFree",t.hasSeenMemoryInSearch="oai/apps/hasSeenMemoryInSearch",t.hasSeenMoonshineNux="oai/apps/hasSeenMoonshineNux",t.hasSeenMoonshineNuxV2="oai/apps/hasSeenMoonshineNuxV2",t.hasSeenGoldenHourNux="oai/apps/hasSeenGoldenHourNux",t.hasSeenGoldenHourNuxV2="oai/apps/hasSeenGoldenHourNuxV2",t.hasSeenGoldenHourAnnouncement="oai/apps/hasSeenGoldenHourAnnouncement",t.hasSeenInlineFeedbackCustomInstrMessage="oai/apps/hasSeenInlineFeedbackCustomInstrMessage",t.hasSeenCaSystemHint="oai/apps/hasSeenCaSystemHint",t.hasDismissedPromoRedemption="oai/apps/hasDismissedPromoRedemption",t.hasSeenFilePickerNuxTooltip="oai/apps/hasSeenFilePicker",t.hasSeenMultipleGPTEditorsTooltip="oai/apps/hasSeenMultipleGPTEditorsTooltip",t.hasSeenSharedProjectsTooltip="oai/apps/hasSeenSharedProjectsTooltip",t.hasSeenPhoenixNux="oai/apps/hasSeenPhoenixNux",t.hasSeenPhoenixFreeNux="oai/apps/hasSeenPhoenixFreeNux",t.hasSeenAshwingNux="oai/apps/hasSeenAshwingNux",t.hasDismissedReferrerRedemption="oai/apps/hasDismissedReferrerRedemption",t.hasDismissedRefereeRedemption="oai/apps/hasDismissedRefereeRedemption",t.hasSeenReferralUpsellAnnouncement="oai/apps/hasSeenReferralProgramUpsell",t.hasSeenTatertotIntakeForm="oai/apps/hasSeenTatertotIntakeForm",t.hasSeenComposerBigBoxEnterHint="oai/apps/hasSeenComposerBigBoxEnterHint",t.d2dee219="oai/apps/d2dee219",t.hasSeenStudentsUpsellAnnouncement="oai/apps/hasSeenStudentsUpsellAnnouncement",t.hasSeenMemoryUpdatedTooltip="oai/apps/hasSeenMemoryUpdatedTooltip",t.hasSeenTeamSeatsPromoAnnouncement="oai/apps/hasSeenTeamSeatsPromoAnnouncement",t.hasSeenTeamsContextualAnswersUpsell="oai/apps/hasSeenTeamsContextualAnswersUpsell",t.hasSeenO3O4MiniAutomations="oai/apps/hasSeenO3O4MiniAutomations",t.hasSeenn7jupdNux="oai/apps/hasSeenn7jupdNux",t.hasSeenTatertotNux="oai/apps/hasSeenTatertotNux",t.hasSeenTatertotQuizNux="oai/apps/hasSeenTatertotQuizNux",t.hasSeenAudioParagenPrompt="oai/apps/hasSeenAudioParagenPrompt",t.hasSeenOdysseyConnectorsModal="oai/apps/hasSeenOdysseyConnectorsModal",t.hasSeenOdysseyTakeoverModal="oai/apps/hasSeenOdysseyTakeoverModal",t.hasSeenAgentModeAnnouncementBanner="oai/apps/hasSeenAgentModeAnnouncementBanner",t.hasSeenWorkspaceDiscoveryFirstLogin="oai/apps/hasSeenWorkspaceDiscoveryFirstLogin",t.hasSeenFreeTrialUpsellModal="oai/apps/hasSeenPlusOrBusinessFreeTrial",t.hasSeenGoFreeTrialUpsellModal="oai/apps/hasSeenGoTwelveMonthFreeTrial",t.hasSeenPlusFreeTrialHomepageAnnouncementBanner="oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner",t.hasSeenWorkSpacePolicy="oai/apps/hasSeenWorkSpacePolicy",t.hasSeenJoinWorkspaceBanner="oai/apps/hasSeenJoinWorkspaceBanner",t.hasSeenl1239dk1AlphaBanner="oai/apps/hasSeenl1239dk1AlphaBanner",t.hasSeenWhamCombinedSubmitButtonNux="oai/apps/hasSeenWhamCombinedSubmitButtonNux",t))(Ye||{});function Wq(){"use forget";return th(zq)}function zq(t){return t==null?void 0:t.eligible_announcements}const n7=In(()=>Qe(!1));function $e(t){"use forget";const e=H.c(25),{data:n,isLoading:s}=Wq();let o;e[0]!==n?(o=n===void 0?[]:n,e[0]=n,e[1]=o):o=e[1];const a=o,i=G();let l;e[2]!==i?(l=cs(i),e[2]=i,e[3]=l):l=e[3];const c=l;let d;e[4]!==c||e[5]!==t?(d=c&&!Qq(t),e[4]=c,e[5]=t,e[6]=d):d=e[6];const u=d,{mutate:m}=qq(),{mutate:f}=Zq();let p;e[7]!==t||e[8]!==m?(p=()=>m({key:t}),e[7]=t,e[8]=m,e[9]=p):p=e[9];const g=p;let h;e[10]!==t||e[11]!==f?(h=()=>f({key:t}),e[10]=t,e[11]=f,e[12]=h):h=e[12];const x=h;let y;e[13]!==i?(y=()=>n7(i),e[13]=i,e[14]=y):y=e[14];const b=ue(y);let v;e[15]!==b||e[16]!==a||e[17]!==u||e[18]!==t?(v=!b&&a.includes(t)&&!u,e[15]=b,e[16]=a,e[17]=u,e[18]=t,e[19]=v):v=e[19];let S;return e[20]!==s||e[21]!==g||e[22]!==x||e[23]!==v?(S={eligible:v,markAsViewed:g,markAsViewedDontInvalidateCache:x,isLoading:s},e[20]=s,e[21]=g,e[22]=x,e[23]=v,e[24]=S):S=e[24],S}function qq(){"use forget";const t=H.c(2),e=xt();let n;return t[0]!==e?(n={mutationFn:Yq,onMutate:s=>{var i;const{key:o}=s,a=e.getQueryData(Nu().queryKey);(i=a==null?void 0:a.persistent_announcements)!=null&&i.includes(o)||e.setQueryData(Nu().queryKey,l=>l&&B(w({},l),{eligible_announcements:l.eligible_announcements.filter(c=>c!==o)}))},onSuccess:()=>{e.invalidateQueries(Nu())}},t[0]=e,t[1]=n):n=t[1],Bt(n)}function Yq(t){const{key:e}=t;return pe.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}})}function Zq(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:Kq},t[0]=e):e=t[0],Bt(e)}function Kq(t){const{key:e}=t;return pe.safePost("/settings/announcement_viewed",{parameters:{query:{announcement_id:e}}})}function Qq(t){switch(t){case"oai/apps/hasSeenOnboarding":case"oai/apps/hasSeenTeamOwnerOnboarding":case"oai/apps/hasSeenMemoryOnboarding":case"oai/apps/hasSeenTemporaryChatOnboarding":case"oai/apps/hasSeenArchiveConversationOnboarding":case"oai/apps/hasSeenNewUserOnboardingConvo":case"oai/apps/hasSeenDalleEditingOnboarding":case"oai/apps/hasSeenModelSwitcherAutoDowngrade":case"oai/apps/hasDismissedCanvasOnboarding":case"oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26":case"oai/apps/hasSeenAdvancedVoice/2024-09-24":case"oai/apps/hasSeenSidekickLauncherOnboarding":case"oai/apps/hasDismissedUseSidekick":case"oai/apps/hasDismissedUseSidetron":case"oai/apps/hasSeenSncUsageNux":case"oai/apps/hasSeenSncWelcomeNux":case"oai/apps/hasSeenSncSourcesTooltip":case"oai/apps/hasSeenComposerSearchButtonTooltip":case"oai/apps/hasSeenComposerContextualAnswerTooltip":case"oai/apps/hasSeenConnectorsNuxModal":case"oai/apps/hasSeenGoogleConnectorsNuxModal":case"oai/apps/hasSeenContextualAnswerGoogleSyncFinished":case"oai/apps/hasSeenConnectorsSourcesPillTooltip":case"oai/apps/hasSeenConnectorsUpgradeFileAccessModal":case"oai/apps/hasSeenComposerSystemHintButtonTooltip":case"oai/apps/hasSeenPioneer":case"oai/apps/hasSeenExistingUserPersonalityOnboarding":case"oai/apps/hasSeenMaverick":case"oai/apps/hasSeenMaverickCapi":case"oai/apps/hasSeenTrailBlazer":case"oai/apps/hasSeenStratos":case"oai/apps/hasSeenWayfinder":case"oai/apps/hasSeenStarpath01":case"oai/apps/hasSeenStarpath02":case"oai/apps/hasSeenStarpath03":case"oai/apps/hasSeenStarpath04":case"oai/apps/hasSeenWindowsAppOnboarding":case"oai/apps/hasSeenDesktopBrowserExtensionAnnouncement":case"oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement":case"oai/apps/hasSeenDesktopOperatorAnnouncement":case"oai/apps/hasSeenDesktopClassmatesPromotionAnnouncement":case"oai/apps/hasSeenOnboardingFlow":case"oai/apps/hasSeenStaticOnboarding":case"oai/apps/hasSeenPromptOnboarding":case"oai/apps/hasCreatedExampleChats":case"oai/apps/hasUsedNewUserStarterPrompt":case"oai/apps/hasSeenProjectsWebNuxTooltip":case"oai/apps/hasSeenProjectsUpdateNuxTooltip":case"oai/apps/hasSeenProjectsToFree":case"oai/apps/hasSeenMemoryInSearch":case"oai/apps/hasSeenMemoryUpdatedTooltip":case"oai/apps/hasSeenMoonshineNux":case"oai/apps/hasSeenMoonshineNuxV2":case"oai/apps/hasSeenGoldenHourNux":case"oai/apps/hasSeenGoldenHourNuxV2":case"oai/apps/hasSeenGoldenHourAnnouncement":case"oai/apps/hasSeenInlineFeedbackCustomInstrMessage":case"oai/apps/hasSeenCaSystemHint":case"oai/apps/hasSeenFilePicker":case"oai/apps/hasSeenMultipleGPTEditorsTooltip":case"oai/apps/hasSeenSharedProjectsTooltip":case"oai/apps/hasSeenComposerBigBoxEnterHint":case"oai/apps/hasSeenPhoenixNux":case"oai/apps/hasSeenPhoenixFreeNux":case"oai/apps/hasSeenAshwingNux":case"oai/apps/hasSeenAudioParagenPrompt":case"oai/apps/hasDismissedPromoRedemption":case"oai/apps/hasDismissedReferrerRedemption":case"oai/apps/hasDismissedRefereeRedemption":case"oai/apps/hasSeenReferralProgramUpsell":case"oai/apps/hasSeenStudentsUpsellAnnouncement":case"oai/apps/hasSeenTeamSeatsPromoAnnouncement":case"oai/apps/hasSeenTeamsContextualAnswersUpsell":case"oai/apps/hasSeenWorkspaceDiscoveryFirstLogin":case"oai/apps/hasSeenWorkSpacePolicy":case"oai/apps/hasSeenJoinWorkspaceBanner":case"oai/apps/hasSeenl1239dk1AlphaBanner":case"oai/apps/hasSeenWhamCombinedSubmitButtonNux":case"oai/apps/hasSeenTatertotIntakeForm":case"oai/apps/hasSeenO3O4MiniAutomations":case"oai/apps/hasSeenOdysseyConnectorsModal":case"oai/apps/hasSeenOdysseyTakeoverModal":case"oai/apps/hasSeenAgentModeAnnouncementBanner":case"oai/apps/hasSeenPlusOrBusinessFreeTrial":case"oai/apps/hasSeenGoTwelveMonthFreeTrial":case"oai/apps/hasSeenPlusFreeTrialHomepageAnnouncementBanner":case"oai/apps/d2dee219":case"oai/apps/hasSeenPotionOnboarding":return!0;case"oai/apps/hasSeenTatertotNux":case"oai/apps/hasSeenTatertotQuizNux":case"oai/apps/hasSeenn7jupdNux":return!1}}const s7="oai/apps/hasSeenl1239dk1LaunchNux",Jq="oai/apps/hasSeenl1239dk1Onboarding",Xq="oai/apps/hasSeenl1239dk1Bon",eY="oai/apps/hasSeenl1239dk1CreateFirstEnvModal",tY="oai/apps/hasSeenl1239dk1NewFeatures",nY="oai/apps/hasSeenl1239dk1NewFeaturesSlack",sY="oai/apps/hasSeenl1239dk1AlphaBanner",oY="oai/apps/hasSeenl1239dk1CodeReviewTab",aY="oai/apps/hasSeenWhamCombinedSubmitButtonNux",rY="oai/apps/hasCompletedWhamCodeReviewOnboardingFlow";function iY(){return $e(s7)}function o7(){return $e(Jq)}function Y$e(){return $e(Xq)}function Z$e(){return $e(eY)}function K$e(){return $e(tY)}function Q$e(){return $e(nY)}function J$e(){return $e(oY)}function X$e(){return $e(sY)}function eHe(){return $e(aY)}function tHe(){return $e(rY)}var a7=(t=>(t.Personal="chat",t.Workspace="workspace",t.Team="team",t))(a7||{});const nHe=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/;var sHe={};const Nc=2147483647,ga=36,c2=1,nm=26,lY=38,cY=700,r7=72,i7=128,l7="-",dY=/^xn--/,uY=/[^\0-\x7F]/,mY=/[\x2E\u3002\uFF0E\uFF61]/g,fY={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y_=ga-c2,ha=Math.floor,v_=String.fromCharCode;function Wr(t){throw new RangeError(fY[t])}function pY(t,e){const n=[];let s=t.length;for(;s--;)n[s]=e(t[s]);return n}function c7(t,e){const n=t.split("@");let s="";n.length>1&&(s=n[0]+"@",t=n[1]),t=t.replace(mY,".");const o=t.split("."),a=pY(o,e).join(".");return s+a}function d2(t){const e=[];let n=0;const s=t.length;for(;n<s;){const o=t.charCodeAt(n++);if(o>=55296&&o<=56319&&n<s){const a=t.charCodeAt(n++);(a&64512)==56320?e.push(((o&1023)<<10)+(a&1023)+65536):(e.push(o),n--)}else e.push(o)}return e}const d7=t=>String.fromCodePoint(...t),gY=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:ga},QC=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},u7=function(t,e,n){let s=0;for(t=n?ha(t/cY):t>>1,t+=ha(t/e);t>y_*nm>>1;s+=ga)t=ha(t/y_);return ha(s+(y_+1)*t/(t+lY))},u2=function(t){const e=[],n=t.length;let s=0,o=i7,a=r7,i=t.lastIndexOf(l7);i<0&&(i=0);for(let l=0;l<i;++l)t.charCodeAt(l)>=128&&Wr("not-basic"),e.push(t.charCodeAt(l));for(let l=i>0?i+1:0;l<n;){const c=s;for(let u=1,m=ga;;m+=ga){l>=n&&Wr("invalid-input");const f=gY(t.charCodeAt(l++));f>=ga&&Wr("invalid-input"),f>ha((Nc-s)/u)&&Wr("overflow"),s+=f*u;const p=m<=a?c2:m>=a+nm?nm:m-a;if(f<p)break;const g=ga-p;u>ha(Nc/g)&&Wr("overflow"),u*=g}const d=e.length+1;a=u7(s-c,d,c==0),ha(s/d)>Nc-o&&Wr("overflow"),o+=ha(s/d),s%=d,e.splice(s++,0,o)}return String.fromCodePoint(...e)},m2=function(t){const e=[];t=d2(t);const n=t.length;let s=i7,o=0,a=r7;for(const c of t)c<128&&e.push(v_(c));const i=e.length;let l=i;for(i&&e.push(l7);l<n;){let c=Nc;for(const u of t)u>=s&&u<c&&(c=u);const d=l+1;c-s>ha((Nc-o)/d)&&Wr("overflow"),o+=(c-s)*d,s=c;for(const u of t)if(u<s&&++o>Nc&&Wr("overflow"),u===s){let m=o;for(let f=ga;;f+=ga){const p=f<=a?c2:f>=a+nm?nm:f-a;if(m<p)break;const g=m-p,h=ga-p;e.push(v_(QC(p+g%h,0))),m=ha(g/h)}e.push(v_(QC(m,0))),a=u7(o,d,l===i),o=0,++l}++o,++s}return e.join("")},m7=function(t){return c7(t,function(e){return dY.test(e)?u2(e.slice(4).toLowerCase()):e})},f7=function(t){return c7(t,function(e){return uY.test(e)?"xn--"+m2(e):e})},hY={version:"2.3.1",ucs2:{decode:d2,encode:d7},decode:u2,encode:m2,toASCII:f7,toUnicode:m7},_Y=Object.freeze(Object.defineProperty({__proto__:null,decode:u2,default:hY,encode:m2,toASCII:f7,toUnicode:m7,ucs2decode:d2,ucs2encode:d7},Symbol.toStringTag,{value:"Module"})),oHe=zV(_Y);function yp({id:t,label:e,checked:n,onChange:s,disabled:o,className:a,labelClassName:i,readOnly:l,containerClassName:c,labelSide:d="right",style:u}){const m=e&&r.jsx("label",{className:W("form-check-label text-token-text-primary",i),htmlFor:t,children:e});return r.jsxs("div",{className:W("form-check flex items-center gap-2",c),children:[d==="left"&&m,r.jsx("input",{className:W("bg-token-bg-primary float-start h-4 w-4 appearance-none rounded-xs border border-gray-300 bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-500 checked:bg-blue-500 dark:border-gray-700 dark:checked:border-blue-400 dark:checked:bg-blue-400",o?"cursor-not-allowed":"cursor-pointer",a),type:"checkbox",disabled:o,onChange:s,checked:n,readOnly:l,id:t,"data-testid":t,style:u}),d==="right"&&m]})}function sm(t){"use forget";var Lt;const e=H.c(108);let n,s,o,a,i,l,c,d,u,m,f,p,g,h,x,y,b,v,S,C,k,M,T,E,A,N,R,O,D,F,V,z;e[0]!==t?(Lt=t,{name:h,placeholder:T,type:V,role:A,list:p,ariaLabel:s,displayName:u,onChange:y,onFocus:b,onBlur:x,value:z,saveOnBlur:N,icon:n,iconPosition:O,onInputIconClick:v,className:l,inputClassName:m,containerInputClassName:c,autoComplete:a,autoCapitalize:o,spellCheck:R,autoFocus:i,onPressEnter:k,onPaste:C,disabled:d,maxLength:g,color:D,onKeyDown:S,suppressFocus:F,ref:E,insideContainerChildren:f}=Lt,M=Me(Lt,["name","placeholder","type","role","list","ariaLabel","displayName","onChange","onFocus","onBlur","value","saveOnBlur","icon","iconPosition","onInputIconClick","className","inputClassName","containerInputClassName","autoComplete","autoCapitalize","spellCheck","autoFocus","onPressEnter","onPaste","disabled","maxLength","color","onKeyDown","suppressFocus","ref","insideContainerChildren"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d,e[9]=u,e[10]=m,e[11]=f,e[12]=p,e[13]=g,e[14]=h,e[15]=x,e[16]=y,e[17]=b,e[18]=v,e[19]=S,e[20]=C,e[21]=k,e[22]=M,e[23]=T,e[24]=E,e[25]=A,e[26]=N,e[27]=R,e[28]=O,e[29]=D,e[30]=F,e[31]=V,e[32]=z):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8],u=e[9],m=e[10],f=e[11],p=e[12],g=e[13],h=e[14],x=e[15],y=e[16],b=e[17],v=e[18],S=e[19],C=e[20],k=e[21],M=e[22],T=e[23],E=e[24],A=e[25],N=e[26],R=e[27],O=e[28],D=e[29],F=e[30],V=e[31],z=e[32]);const $=O===void 0?"right":O,Y=D===void 0?"tertiary":D,Z=F===void 0?!1:F,[Q,q]=_.useState(z);let X;e[33]!==x||e[34]!==N?(X=vt=>{x==null||x(vt),N&&q(vt.target.value)},e[33]=x,e[34]=N,e[35]=X):X=e[35];const oe=X;let se;e[36]!==y||e[37]!==N?(se=vt=>{y==null||y(vt),N&&q(vt.target.value)},e[36]=y,e[37]=N,e[38]=se):se=e[38];const de=se;let ie;e[39]!==Q||e[40]!==S||e[41]!==k?(ie=vt=>{S==null||S(vt),!vt.nativeEvent.isComposing&&vt.key==="Enter"&&k&&(vt.preventDefault(),k(Q,vt))},e[39]=Q,e[40]=S,e[41]=k,e[42]=ie):ie=e[42];const ae=ie;let ce,ye;e[43]!==z?(ce=()=>{q(z)},ye=[z],e[43]=z,e[44]=ce,e[45]=ye):(ce=e[44],ye=e[45]),_.useEffect(ce,ye);let fe;e[46]!==N||e[47]!==z?(fe=N?{}:{value:z},e[46]=N,e[47]=z,e[48]=fe):fe=e[48];let Ce;e[49]!==Q||e[50]!==N?(Ce=N?{value:Q}:{},e[49]=Q,e[50]=N,e[51]=Ce):Ce=e[51];let ee;e[52]!==Ce||e[53]!==fe?(ee=w(w({},fe),Ce),e[52]=Ce,e[53]=fe,e[54]=ee):ee=e[54];const te=ee,le=Y==="neutral"&&(Z?"-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2":"focus-within:bg-token-main-surface-tertiary hover:bg-token-main-surface-tertiary border-transparent px-3 py-2 focus-within:border-green-500 focus-within:ring-1 focus-within:ring-transparent"),re=Y==="tertiary"&&(Z?"border-token-border-medium px-3 py-2":"border-token-border-medium focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1"),ve=Y==="search"&&(Z?"border-token-border-medium bg-token-main-surface-primary dark:border-token-border-medium rounded-xl p-4":"border-token-border-medium bg-token-main-surface-primary focus-within:border-token-border-xheavy dark:border-token-border-medium dark:focus-within:border-token-border-xheavy rounded-xl p-4 focus-within:ring-0 dark:focus-within:ring-0"),_e=Y==="quaternary"&&(Z?"border-token-main-surface-quaternary text-token-text-quaternary px-3 py-2":"border-token-main-surface-quaternary text-token-text-quaternary focus-within:border-token-border-xheavy focus-within:ring-token-text-secondary px-3 py-2 focus-within:ring-1");let we;e[55]!==l||e[56]!==le||e[57]!==re||e[58]!==ve||e[59]!==_e?(we=W("rounded-md border shadow-none",le,re,ve,_e,l),e[55]=l,e[56]=le,e[57]=re,e[58]=ve,e[59]=_e,e[60]=we):we=e[60];let De;e[61]!==u||e[62]!==h?(De=r.jsx("label",{htmlFor:h,className:"text-token-text-primary block text-xs font-semibold",children:u}),e[61]=u,e[62]=h,e[63]=De):De=e[63];const ge=u&&"mt-1";let Ne;e[64]!==c||e[65]!==ge?(Ne=W(ge,"relative",c),e[64]=c,e[65]=ge,e[66]=Ne):Ne=e[66];const je=s||void 0,Te=n!=null&&$==="right"&&"pe-6",Fe=n!=null&&$==="left"&&"ps-6",Ge=Y==="neutral"||Y==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",Se=Y==="quaternary"?"placeholder:text-token-text-quaternary":"placeholder-gray-500";let Re;e[67]!==m||e[68]!==Te||e[69]!==Fe||e[70]!==Ge||e[71]!==Se?(Re=W("block w-full border-0 p-0 shadow-none outline-hidden focus-within:shadow-none focus-within:ring-0 focus-within:outline-hidden focus:border-none focus:ring-0 sm:text-sm",Te,Fe,Ge,Se,m),e[67]=m,e[68]=Te,e[69]=Fe,e[70]=Ge,e[71]=Se,e[72]=Re):Re=e[72];let tt;e[73]!==te||e[74]!==o||e[75]!==a||e[76]!==i||e[77]!==d||e[78]!==oe||e[79]!==de||e[80]!==ae||e[81]!==p||e[82]!==g||e[83]!==h||e[84]!==b||e[85]!==C||e[86]!==M||e[87]!==T||e[88]!==E||e[89]!==A||e[90]!==R||e[91]!==je||e[92]!==Re||e[93]!==V?(tt=r.jsx("input",w(B(w({},M),{ref:E,type:V,name:h,id:h,list:p,role:A,"aria-label":je,onPaste:C,className:Re,placeholder:T,onBlur:oe,onFocus:b,onChange:de,onKeyDown:ae,autoComplete:a,spellCheck:R,autoCapitalize:o,autoFocus:i,disabled:d,maxLength:g}),te)),e[73]=te,e[74]=o,e[75]=a,e[76]=i,e[77]=d,e[78]=oe,e[79]=de,e[80]=ae,e[81]=p,e[82]=g,e[83]=h,e[84]=b,e[85]=C,e[86]=M,e[87]=T,e[88]=E,e[89]=A,e[90]=R,e[91]=je,e[92]=Re,e[93]=V,e[94]=tt):tt=e[94];let Ke;e[95]!==n||e[96]!==$||e[97]!==v?(Ke=n!=null&&r.jsx("button",{className:W("absolute top-1/2 -translate-y-1/2",{"end-0":$==="right","start-0":$==="left"}),onClick:v,children:r.jsx(n,{className:"icon-sm"})}),e[95]=n,e[96]=$,e[97]=v,e[98]=Ke):Ke=e[98];let nt;e[99]!==f||e[100]!==Ne||e[101]!==tt||e[102]!==Ke?(nt=r.jsxs("div",{className:Ne,children:[tt,Ke,f]}),e[99]=f,e[100]=Ne,e[101]=tt,e[102]=Ke,e[103]=nt):nt=e[103];let ot;return e[104]!==we||e[105]!==De||e[106]!==nt?(ot=r.jsxs("div",{className:we,children:[De,nt]}),e[104]=we,e[105]=De,e[106]=nt,e[107]=ot):ot=e[107],ot}var CE;const aHe=ct.div(CE||(CE=rt(["text-base text-token-text-primary flex flex-col gap-9 my-6"])));var wE;const xY=ct.div(wE||(wE=rt(["text-base font-semibold"])));var kE;const rHe=ct.div(kE||(kE=rt(["text-base font-semibold"])));var ME;const iHe=ct.div(ME||(ME=rt(["flex flex-col divide-y divide-token-border-default border-y border-token-border-default"])));var TE;const yY=ct.div(TE||(TE=rt(["flex flex-col w-full m-auto md:m-0"])));var EE;const vY=ct.div(EE||(EE=rt(["text-sm"])));var AE;const lHe=ct.div(AE||(AE=rt(["flex justify-between py-3 gap-4"])));var IE;const cHe=ct.hr(IE||(IE=rt(["max-w-xl border-token-border-default"])));var jE;const dHe=ct.div(jE||(jE=rt(["text-token-text-secondary text-sm mt-6"]))),uHe=({icon:t,title:e,body:n,toggle:s,disabled:o=!1,disabledPill:a,disabledMessage:i,children:l,showDivider:c=!0})=>r.jsx(kt,{label:i,side:"top",disabled:!o||!i,className:"max-w-xl",triggerAs:null,children:r.jsxs("div",{children:[r.jsxs(yY,{className:W("border-token-border-default mb-3 p-6",o&&"text-token-text-tertiary"),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t&&r.jsx(t,{className:"icon-sm"}),r.jsxs(xY,{className:"flex items-center gap-3",children:[e,o&&a&&r.jsx("span",{className:"bg-token-main-surface-tertiary rounded-xl px-2 pb-0.5 text-sm",children:a})]})]}),r.jsx("div",{children:s})]}),r.jsx(vY,{children:n}),l&&r.jsx("div",{className:"mt-4",children:l})]}),c&&r.jsx("div",{className:"border-token-border-default mt-6 border border-t"})]})});function p7(t,e){return lt({queryKey:["workspace/identity",t],queryFn:async()=>{if(t!==void 0)return await pe.safeGet("/accounts/{account_id}/identity",{parameters:{path:{account_id:t}}})},enabled:e})}function mHe(t){const e=Xv(t),n=e?O6(e):null,s=n==null?void 0:n.pwd_auth_time;return s==null?!1:Date.now()-s<1800*1e3}function bY(t){return lt({queryKey:["sso/workos/connections",t],queryFn:()=>{if(t!==void 0)return pe.safeGet("/accounts/{account_id}/sso/workos/connections/list",{authOption:qt.SendIfAvailable,parameters:{path:{account_id:t}}})},enabled:t!=null,retry:(e,n)=>n instanceof Vn&&(n.status===401||n.code==="reauth_required")?!1:e<3})}function fHe(){const t=$o(va.businessWorkspaceId),e=G(),n=xe(e,"4105779609"),o=$o(va.isTeamPlan)?n:!0,{data:a,isFetching:i,isPending:l}=bY(o&&t!=null?t:void 0),c=a instanceof Vn?a:void 0;return{connection:c||a==null?void 0:a[0],error:c,enabled:o,isLoading:i||l}}function pHe(t){const e=xt();return Bt({mutationFn:()=>pe.safePost("/accounts/{account_id}/sso/connections/workos",{requestBody:{enabled_client_names:["chat"]},authOption:qt.SendIfAvailable,parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function gHe(){const t=$o(va.businessWorkspaceId),{data:e}=p7(t!=null?t:void 0,t!=null);return e==null?void 0:e.allow_external_domain_invites}function hHe(){const t=$o(va.businessWorkspaceId),{data:e}=p7(t!=null?t:void 0,t!=null);return _.useMemo(()=>(e==null?void 0:e.domains)&&(e==null?void 0:e.domains.filter(n=>n.status==="verified")),[e==null?void 0:e.domains])}function _He(t){const e=J(),n=Ut(),s=xt();return Bt({mutationFn:({shouldAutoProvision:o})=>pe.safePost("/accounts/{account_id}/settings/auto_provision",{parameters:{path:{account_id:t}},requestBody:{value:o}}).then(a=>{const i=o?rr.autoProvisionEnabledToast:rr.autoProvisionDisabledToast;return n.success(e.formatMessage(i),{duration:3}),a}).catch(a=>{throw n.danger(a.message,{toastId:"useShouldAutoProvisionMutation",loggingTitle:a.message,loggingDescription:"Auto provisioning toggle failed"}),a}),onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function xHe(t){const e=J(),n=Ut(),s=xt();return Bt({mutationFn:async({shouldAllowExternalDomainInvites:o})=>{try{const a=await pe.safePost("/accounts/{account_id}/settings/allow_external_domain_invites",{parameters:{path:{account_id:t}},requestBody:{value:o}}),i=o?rr.allowExternalDomainInvitesToast:rr.disableExternalDomainInvitesToast;return n.success(e.formatMessage(i),{duration:3}),a}catch(a){throw n.danger(a.message,{toastId:"useShouldDisableExternalDomainInvitesMutation",loggingTitle:a.message,loggingDescription:"External domain invites toggle failed"}),a}},onSuccess:()=>{s.invalidateQueries({queryKey:["workspace/identity",t]})}})}function yHe(t){const e=xt(),n=Ut();return Bt({mutationFn:({hostname:s})=>pe.safePost("/accounts/{account_id}/domains",{parameters:{path:{account_id:t}},requestBody:{hostname:s}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace/identity",t]}),e.invalidateQueries({queryKey:["builderProfile"]})},onError:s=>{n.danger(s.message,{toastId:"useAddDomainMutation",loggingTitle:s.message,loggingDescription:"Domain add failed"})}})}function SY(t){const e=xt();return Bt({mutationFn:({domainId:n})=>pe.safeDelete("/accounts/{account_id}/domains/{domain_id}",{parameters:{path:{account_id:t,domain_id:n}}}),onSuccess:()=>{e.refetchQueries({queryKey:["workspace/identity",t]}),e.refetchQueries({queryKey:["builderProfile"]})}})}function vHe(t,e){var i;const n=xt(),s=Ut(),o=J(),a=(i=e==null?void 0:e.suppressSuccessToast)!=null?i:!1;return Bt({mutationFn:({value:l,public_display_name:c,use_workspace_name_for_discovery:d})=>pe.safePost("/accounts/{account_id}/settings/workspace_discoverable",{parameters:{path:{account_id:t}},requestBody:{value:l,public_display_name:c,use_workspace_name_for_discovery:d}}),onSuccess:(l,c)=>{if(n.invalidateQueries({queryKey:["workspace-settings",t]}),n.invalidateQueries({queryKey:["discoverable-workspaces"]}),!a){let d;c.action==="name"?d=rr.discoveryDisplayNameUpdatedToast:d=c.value?rr.discoveryEnabledToast:rr.discoveryDisabledToast,s.success(o.formatMessage(d),{duration:3})}},onError:l=>{var c;s.danger((c=l.message)!=null?c:"Failed to update discovery settings",{toastId:"workspace_discoverability",loggingTitle:l.message,loggingDescription:"Workspace discoverability update failed"})}})}function bHe(t){const e=xt(),n=Ut(),s=J();return Bt({mutationFn:({autoAcceptRequests:o})=>pe.safePost("/accounts/{account_id}/settings/auto_accept_requests",{parameters:{path:{account_id:t}},requestBody:{value:o}}),onSuccess:(o,a)=>{e.invalidateQueries({queryKey:["workspace-settings",t]});const i=a.autoAcceptRequests?rr.manualApprovalDisabledToast:rr.manualApprovalEnabledToast;n.success(s.formatMessage(i),{duration:3})},onError:o=>{var a;n.danger((a=o.message)!=null?a:"Failed to update approval setting",{toastId:"workspace_manual_approval",loggingTitle:o.message,loggingDescription:"Workspace manual approval update failed"})}})}function SHe(t){const e=xt();return Bt({mutationFn:({enforcementStatus:n})=>pe.safePost("/accounts/{account_id}/sso/workos/connections/workos_enforcement",{parameters:{path:{account_id:t}},requestBody:{enforcement_status:n}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}function CHe(t){const e=xt();return Bt({mutationFn:()=>pe.safePost("/accounts/{account_id}/sso/workos/connections/toggle_enabled",{parameters:{path:{account_id:t}}}),onSuccess:()=>{e.refetchQueries({queryKey:["sso/workos/connections",t]})}})}var PE;ct.div(PE||(PE=rt(["text-md mb-4 text-token-text-secondary"])));const wHe={[f_.VERIFIED]:He({id:"i7FkyS",defaultMessage:"Verified"}),[f_.PENDING]:He({id:"THBv/l",defaultMessage:"Pending"}),[f_.EXPIRED]:He({id:"+sjWGK",defaultMessage:"Expired"})},rr=be({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"},allowExternalDomainInvitesToast:{id:"j0jI/4",defaultMessage:"External domain invites are allowed for this workspace"},disableExternalDomainInvitesToast:{id:"67yB97",defaultMessage:"External domain invites are disabled for this workspace"},discoveryEnabledToast:{id:"workspaceIdentity.discoveryEnabledToast",defaultMessage:"Workspace is now discoverable"},discoveryDisabledToast:{id:"workspaceIdentity.discoveryDisabledToast",defaultMessage:"Workspace is no longer discoverable"},discoveryDisplayNameUpdatedToast:{id:"workspaceIdentity.discoveryDisplayNameUpdatedToast",defaultMessage:"Workspace display name updated"},manualApprovalEnabledToast:{id:"workspaceIdentity.manualApprovalEnabledToast",defaultMessage:"Join requests now require manual approval"},manualApprovalDisabledToast:{id:"workspaceIdentity.manualApprovalDisabledToast",defaultMessage:"Join requests will be auto-accepted"}});function kHe(t){return t===ry.ADMIN||t===ry.OWNER}function MHe(t){return t===ry.OWNER}function THe(t,e){switch(e){case Js.BROWSER:return"Web browsing";case Js.PYTHON:return"Code interpreter & Data Analysis";case Js.JIT_PLUGIN:return"Custom actions";case Js.RETRIEVAL:return"File retrieval";case Js.DALLE:return"DALLE image generation";case Js.IMAGE_GEN:return"4o image generation";case Js.CANVAS:return"Canvas";case Tn.Private:return"Builder only";case Tn.Workspace:return t.data.name;case Tn.Link:return"Anyone with link";case Tn.Marketplace:return"Public";default:return null}}const CY=j(()=>I(()=>import("./ooz2slmm8agf6bjp.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>L(t)});function EHe(){const{data:t}=bl(),e=G(),n=t==null?void 0:t.accountItems.find(l=>l.ssoConnectionName),s=t==null?void 0:t.accountItems.find(l=>!l.ssoConnectionName),o=!!n,a=!o&&!!s,i=()=>{const l=n!=null&&n.ssoConnectionName&&o?{connection:n.ssoConnectionName}:void 0;Kt(e,{fallbackScreenHint:"login",additionalAuthParams:l})};return r.jsx(Pt,{testId:"modal-invalid-accounts",isOpen:!0,onClose:rs,type:"warning",size:"custom",className:"max-w-3xl",title:r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"text-lg",children:r.jsx(P,w({},Ri.title))})}),icon:CY,primaryButton:r.jsx(so.Button,{onClick:()=>{U.logLogOutButtonClicked({location:"invalid_account_modal"},eG.ACCESS_LOGOUT_ACTION_LOCATION_INVALID_ACCOUNT_MODAL),tG()},color:"primary",children:r.jsx(P,w({},Ri.logOut))}),secondaryButton:o||a?r.jsx(so.Button,{onClick:i,color:"primary",children:r.jsx(P,w({},o?Ri.ssoButton:Ri.noSSOButton))}):null,children:r.jsx("div",{className:"flex flex-col space-y-4",children:r.jsxs("div",{children:[r.jsx("p",{children:r.jsx(P,w({},Ri.description))}),r.jsx("br",{}),o&&r.jsx("p",{children:r.jsx(P,w({},Ri.ssoSuggestion))}),a&&r.jsx("p",{children:r.jsx(P,w({},Ri.noSSOSuggestion))})]})})})}const Ri=be({title:{id:"sMC0Cy",defaultMessage:"No Accessible Workspaces"},description:{id:"ADpJJ4",defaultMessage:"It looks like you're currently unable to access any of your accounts. Try waiting a minute and logging in again."},logOut:{id:"KlMYRb",defaultMessage:"Log out"},ssoSuggestion:{id:"KCNTGv",defaultMessage:"Logging in with SSO may fix these issues."},noSSOSuggestion:{id:"mp/4+s",defaultMessage:"Logging in without SSO may fix these issues."},ssoButton:{id:"Nsa12I",defaultMessage:"Log in with SSO"},noSSOButton:{id:"60pUg9",defaultMessage:"Log in"}}),AHe=(t,e=10080*60*1e3)=>{if(!t)return{isFresh:!1,hasWorkspacesToJoin:null};try{const n=JSON.parse(t),s=Number(n.set_at);if(Number.isNaN(s))return{isFresh:!1,hasWorkspacesToJoin:null};const o=Date.now()-s<e,a=n.hasWorkspacesToJoin===!0||n.hasWorkspacesToJoin==="true";return{isFresh:o,hasWorkspacesToJoin:o?a:null}}catch(n){return{isFresh:!1,hasWorkspacesToJoin:null}}};function IHe(t){"use forget";var u;const e=H.c(7),n=t===void 0?!0:t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=["discoverable-workspaces"],e[0]=s):s=e[0];const o=n;let a;e[1]!==o?(a={queryKey:s,enabled:o,refetchOnMount:"always",queryFn:kY},e[1]=o,e[2]=a):a=e[2];const i=lt(a);let l;e[3]!==i.data?(l=()=>{var m;if((m=i.data)!=null&&m.workspaces){const f=i.data.workspaces.some(wY),p=JSON.stringify({set_at:Date.now(),hasWorkspacesToJoin:f});mt.setItem(Le.WorkspaceDiscoveryInfo,p)}},e[3]=i.data,e[4]=l):l=e[4];const c=(u=i.data)==null?void 0:u.workspaces;let d;return e[5]!==c?(d=[c],e[5]=c,e[6]=d):d=e[6],_.useEffect(l,d),i}function wY(t){return!t.requested}async function kY(){return await pe.safeGet("/accounts/discoverable-workspaces")}const MY=Ye.hasSeenWorkspaceDiscoveryFirstLogin,jHe=()=>{const{eligible:t,markAsViewed:e,markAsViewedDontInvalidateCache:n,isLoading:s}=$e(MY);return{setHasSeenWorkspaceDiscoveryFirstLogin:e,setHasSeenWorkspaceDiscoveryFirstLoginDontInvalidateCache:n,hasSeenWorkspaceDiscoveryFirstLoginDate:s?null:!t}},TY=j(()=>I(()=>import("./g8c1dqtl8z7ap2w4.js"),__vite__mapDeps([2,1])),{loading:t=>L(t)}),EY=j(()=>I(()=>import("./mk3mxdrbga0ztefz.js"),__vite__mapDeps([3,1])),{loading:t=>L(t)}),AY=j(()=>I(()=>import("./o9sv1qatwktfhtds.js"),__vite__mapDeps([4,1])),{loading:t=>L(t)}),IY=j(()=>I(()=>import("./is520d6nq4ucffx8.js"),__vite__mapDeps([5,1])),{loading:t=>L(t)}),jY=j(()=>I(()=>import("./fudxe3e6ciniw76h.js"),__vite__mapDeps([6,1])),{loading:t=>L(t)}),PY=j(()=>I(()=>import("./pabef28rs0urara1.js"),__vite__mapDeps([7,1])),{loading:t=>L(t)}),NY=j(()=>I(()=>import("./d2ynpexsjjgituh8.js"),__vite__mapDeps([8,1])),{loading:t=>L(t)}),RY=j(()=>I(()=>import("./nslvb1rlrsw3n7xb.js"),__vite__mapDeps([9,1])),{loading:t=>L(t)}),LY=j(()=>I(()=>import("./e4slqzd3gvdh4gpj.js"),__vite__mapDeps([10,1])),{loading:t=>L(t)}),OY=j(()=>I(()=>import("./mssovsxx0prqqx4y.js"),__vite__mapDeps([11,1])),{loading:t=>L(t)}),DY=j(()=>I(()=>import("./m53ly4eu8e9c6q19.js").then(t=>t._),__vite__mapDeps([12,1])),{loading:t=>L(t)}),JC=j(()=>I(()=>import("./e7wuev8c8ywokymc.js").then(t=>t._),__vite__mapDeps([13,1])),{loading:t=>L(t)}),XC=j(()=>I(()=>Promise.resolve().then(()=>nC),void 0),{loading:t=>L(t)}),FY=j(()=>I(()=>import("./gryeadru0tqqt3vi.js").then(t=>t._),__vite__mapDeps([14,1])),{loading:t=>L(t)}),ew=j(()=>I(()=>import("./bthkwnb2znu2hg0o.js").then(t=>t._),__vite__mapDeps([15,1])),{loading:t=>L(t)}),tw=j(()=>I(()=>import("./eahqa2opfkdu04yb.js").then(t=>t._),__vite__mapDeps([16,1])),{loading:t=>L(t)}),BY=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),UY=j(()=>I(()=>import("./kaxn2bizrxslkpa3.js").then(t=>t._),__vite__mapDeps([18,1])),{loading:t=>L(t)}),VY=j(()=>I(()=>import("./fomrqem1h10p4nhy.js").then(t=>t._),__vite__mapDeps([19,1])),{loading:t=>L(t)}),GY=j(()=>I(()=>import("./lqf1d5aq38lhhvj4.js").then(t=>t._),__vite__mapDeps([20,1])),{loading:t=>L(t)});function $Y(t){switch(t){case"genius":return VY;case"idea":return ew;case"code":return DY;case"data-vis":return GY;case"dalle":return NY;case"local":return FY;case"math":return PY;case"misc":return LY;case"news":return IY;case"teach-or-explain":return tw;case"read-or-analyze":return AY;case"rank-or-rate":return jY;case"current-event":return XC;case"shop":return EY;case"travel":return OY;case"weather":return RY;case"work":return tw;case"write":return TY;case"vision":return UY;case"file-upload-document":return BY;case"browse":return XC;case"onboarding":return JC;case"for-you":return JC;default:return ew}}function HY(t){switch(t){case"write":case"shop":return"#cb8bd0";case"idea":case"travel":return"#e2c541";case"code":case"vision":return"#6C71FF";case"file-upload-document":return"#EA8444";case"dalle":return"#35AE47";case"genius":return"#E659C2";case"for-you":return"#ED6262";case"teach-or-explain":case"misc":default:return"#76d0eb"}}const vc=["#cb8bd0","#e2c541","#ed6262","#76d0eb"];function WY(t){switch(t){case"write":case"shop":return vc[0];case"idea":case"travel":return vc[1];case"code":case"vision":return vc[2];case"teach-or-explain":case"misc":default:return vc[3]}}function zY({category:t,useV2Colors:e}){if(t==null)return null;const n=$Y(t);return r.jsx(n,{className:"icon",style:{color:e?HY(t):WY(t)}})}const g7=j(()=>I(()=>import("./biezqtzsomegvlsv.js").then(t=>t._),__vite__mapDeps([21,1])),{loading:t=>L(t)}),h7=t=>{var a,i,l,c;const e=t.split(" ").map(d=>d.trim()).filter(Boolean);if(e.length===0)return"";const n=(i=(a=e[0])==null?void 0:a[0])!=null?i:"",s=e.length>1&&(c=(l=e[e.length-1])==null?void 0:l[0])!=null?c:"";return(e.length>1?"".concat(n).concat(s):n).toUpperCase()},qY=t=>{const e=["bg-blue-800","bg-red-800","bg-green-800","bg-blue-500","bg-yellow-800","bg-gray-800","bg-orange-800"],n=t.split("").map(s=>s.charCodeAt(0)).reduce((s,o)=>s+o,0);return e[n%e.length]},_7=({IconComponent:t,className:e,size:n="default",rounded:s=!1})=>r.jsx("div",{className:W("relative flex items-center justify-center",al[n],s?"rounded-full":"rounded-xs",e),children:r.jsx(t,{className:x7[n]})}),Zp=({iconName:t,className:e,size:n="default"})=>{let s=iy;return t==="user"&&(s=g7),r.jsx(_7,{IconComponent:s,className:e,size:n})},al={default:"h-6 w-6 shrink-0",small:"h-5 w-5 shrink-0",large:"h-12 w-12 shrink-0"},x7={default:"icon",small:"icon-sm",large:"icon-lg"},_y=({user:t,size:e="default",isLoading:n,dotted:s=!1})=>{var a;const o=J();return r.jsx("div",{className:W("flex overflow-hidden rounded-full select-none",s?"border-global-border-heavy border-token-border-heavy border border-dashed":"bg-gray-500/30",al[e]),children:r.jsx(y7,{fallback:!n&&r.jsx(YY,{user:t,size:e,dotted:s}),src:(a=t==null?void 0:t.picture)!=null?a:void 0,alt:o.formatMessage({id:"avatar.profileimage",defaultMessage:"Profile image"}),className:W(al[e],n&&"invisible","object-cover")})})};function YY({user:t,size:e,dotted:n=!1}){var o;const s=h7((o=t==null?void 0:t.name)!=null?o:"");return r.jsx("div",{className:W("flex h-full w-full items-center justify-center",n?"text-token-text-tertiary":"bg-blue-300 text-white dark:bg-blue-500"),children:s?r.jsx("div",{className:W(e==="small"||e==="default"?"text-xs":"indent-[0.1em] text-sm tracking-widest"),children:s}):r.jsx(g7,{className:x7[e]})})}function y7(o){var a=o,{fallback:t,src:e,alt:n}=a,s=Me(a,["fallback","src","alt"]);const[i,l]=_.useState(!1);return i||!e?t:r.jsx("img",B(w({src:e,alt:n},s),{onError:()=>{l(!0)},referrerPolicy:"no-referrer"}))}const Kp=({size:t="default",src:e,alt:n})=>r.jsx("div",{className:W("overflow-hidden rounded-full bg-gray-500/30 select-none",al[t]),children:r.jsx(y7,{fallback:r.jsx(nG,{className:al[t]}),src:e!=null?e:void 0,alt:n!=null?n:"",className:al[t]})});function PHe({iconSize:t="default",workspace:e,showPlanTypeBadge:n=!1}){const s=G(),o=ut(s),a=_n(),i=e!=null?e:a,{data:l,isLoading:c}=lt(D6),d=Nn(s),u=l!=null?l:"user"in d?d.user:void 0,m=!i||c,p=n&&!m&&((o==null?void 0:o.isPro())||(o==null?void 0:o.isPlus()))&&qo(s).getLayer("2775247110").get("show_plan_type_badge",!1)&&(o!=null&&o.isPlus()?r.jsx(KY,{}):o!=null&&o.isPro()?r.jsx(ZY,{}):null);return i&&!i.isPersonalAccount()?r.jsx(Kp,{src:i.data.profilePictureUrl,size:t}):p?r.jsxs("div",{className:"relative",children:[r.jsx(_y,{user:u,size:t,isLoading:m}),p]}):r.jsx(_y,{user:u,size:t,isLoading:m})}const ZY=()=>r.jsx("span",{className:"absolute end-[4.8px] top-[21.5px] -me-2 flex items-center justify-center rounded-full bg-black text-[8px] font-medium text-white",style:{height:"0.75rem",width:"1.4rem",letterSpacing:"-0.4px"},children:"PRO"}),KY=()=>r.jsx("span",{className:"absolute end-[4.8px] top-[21.5px] -me-2 flex h-3 items-center justify-center rounded-full bg-white text-[8px] font-medium text-black",style:{width:"1.6rem",boxShadow:"0 0 0 1.1px rgba(128, 128, 128, 0.1)",letterSpacing:"-0.5px"},children:"PLUS"});function NHe({name:t,size:e="default",className:n,initialsCount:s=1}){let o="";return s===1?o=t.charAt(0):o=t.split(" ").slice(0,2).map(a=>a[0]).join(""),r.jsx("div",{className:W("overflow-hidden rounded-full pt-[4.5px] text-center text-[9px] font-extralight text-white",al[e],n),style:{backgroundColor:QY(t)},children:o})}function QY(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)+e^t.charCodeAt(n);return vc[Math.abs(e)%vc.length]}const Lm="default",rl=new Map,Vh=new Set([Lm]),JY="sidebar",XY="composer";let xy=0,yy=0,Qp=0,Du=null;typeof PerformanceObserver<"u"&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(Du=new PerformanceObserver(t=>{t.getEntries().forEach(e=>{if(e.entryType==="longtask"&&(xy+=e.duration),e.entryType==="layout-shift"){if(e.hadRecentInput)return;yy+=1,performance.timeOrigin&&(Qp=Math.max(performance.timeOrigin+e.startTime,Qp))}})}),Du.observe({entryTypes:["longtask","layout-shift"]}));const eZ=(t,e=Lm)=>{if(Yc)return;rl.has(e)||rl.set(e,new Map);const n=rl.get(e);n.has(t)||(Gh(),n.set(t,{start:Date.now()}))},tZ=(t,e=Lm)=>{var s;if(Yc)return;const n=(s=rl.get(e))==null?void 0:s.get(t);if(n&&n.end===void 0){n.end=Date.now();const o=Vh.has(e)?"visible":"hidden";Oe.addTiming("render.".concat(t,".").concat(o),n.end),Gh()}},nZ=(t,e=Lm)=>{if(Yc)return;const n=rl.get(e);!n||!n.get(t)||(n.delete(t),Gh())};let Yc=!1;const nw=()=>{if(!Yc){Yc=!0;for(const[t,e]of rl.entries()){const n=Vh.has(t)?"visible":"hidden";for(const[s,o]of e.entries())o.end||Oe.addFirstTiming("render.".concat(s,".").concat(n,".timeout"))}}},sZ=3e4;let b_;const Gh=()=>{b_&&clearTimeout(b_),b_=setTimeout(oZ,1e3)},oZ=()=>{if(Yc)return;let t=0,e;for(const[o,a]of rl.entries())if(Vh.has(o)){if(![...a.values()].every(i=>i.end)){if(performance.now()<sZ){Gh();return}Oe.addFirstTiming("render.StablePage.timeout"),nw();return}for(const[i,l]of a.entries())l.end!==void 0&&l.end>t&&(t=l.end,e=i)}Oe.addFirstTiming("render.StablePage.complete",t);const n=t-performance.timeOrigin,s=sG(n);We.logEvent("chatgpt_web_stable_page_complete_time",void 0,{raw_duration_ms:String(n),trimmed_duration_ms:String(s)}),e!==void 0&&Oe.addAction("render.stablePage.lastComponent",{componentName:e}),xy>0&&Oe.addFirstDurationVital("render.StablePage.longTaskDuration",Date.now(),xy),yy>0&&Oe.addFirstDurationVital("render.StablePage.layoutShifts",Date.now(),yy),Qp>0&&Oe.addFirstTiming("render.StablePage.lastLayoutShift",Qp),Du==null||Du.disconnect(),nw(),typeof window<"u"&&window.dispatchEvent(new Event("allComponentsRendered"))},aZ=t=>{Vh.add(t)},_a={markStart:eZ,markRendered:tZ,cancelRender:nZ,trackNamespace:aZ,NS_DEFAULT:Lm,NS_COMPOSER:XY,NS_SIDEBAR:JY};var rZ="Toggle",v7=_.forwardRef((t,e)=>{const c=t,{pressed:n,defaultPressed:s=!1,onPressedChange:o}=c,a=Me(c,["pressed","defaultPressed","onPressedChange"]),[i=!1,l]=ur({prop:n,onChange:o,defaultProp:s});return r.jsx(cn.button,B(w({type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":t.disabled?"":void 0},a),{ref:e,onClick:Rt(t.onClick,()=>{t.disabled||l(!i)})}))});v7.displayName=rZ;var Pd="ToggleGroup",[b7,RHe]=oG(Pd,[nh]),S7=nh(),f2=Kn.forwardRef((t,e)=>{const o=t,{type:n}=o,s=Me(o,["type"]);if(n==="single"){const a=s;return r.jsx(iZ,B(w({},a),{ref:e}))}if(n==="multiple"){const a=s;return r.jsx(lZ,B(w({},a),{ref:e}))}throw new Error("Missing prop `type` expected on `".concat(Pd,"`"))});f2.displayName=Pd;var[C7,w7]=b7(Pd),iZ=Kn.forwardRef((t,e)=>{const c=t,{value:n,defaultValue:s,onValueChange:o=()=>{}}=c,a=Me(c,["value","defaultValue","onValueChange"]),[i,l]=ur({prop:n,defaultProp:s,onChange:o});return r.jsx(C7,{scope:t.__scopeToggleGroup,type:"single",value:i?[i]:[],onItemActivate:l,onItemDeactivate:Kn.useCallback(()=>l(""),[l]),children:r.jsx(k7,B(w({},a),{ref:e}))})}),lZ=Kn.forwardRef((t,e)=>{const u=t,{value:n,defaultValue:s,onValueChange:o=()=>{}}=u,a=Me(u,["value","defaultValue","onValueChange"]),[i=[],l]=ur({prop:n,defaultProp:s,onChange:o}),c=Kn.useCallback(m=>l((f=[])=>[...f,m]),[l]),d=Kn.useCallback(m=>l((f=[])=>f.filter(p=>p!==m)),[l]);return r.jsx(C7,{scope:t.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:d,children:r.jsx(k7,B(w({},a),{ref:e}))})});f2.displayName=Pd;var[cZ,dZ]=b7(Pd),k7=Kn.forwardRef((t,e)=>{const f=t,{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:o=!0,orientation:a,dir:i,loop:l=!0}=f,c=Me(f,["__scopeToggleGroup","disabled","rovingFocus","orientation","dir","loop"]),d=S7(n),u=sh(i),m=w({role:"group",dir:u},c);return r.jsx(cZ,{scope:n,rovingFocus:o,disabled:s,children:o?r.jsx(B6,B(w({asChild:!0},d),{orientation:a,dir:u,loop:l,children:r.jsx(cn.div,B(w({},m),{ref:e}))})):r.jsx(cn.div,B(w({},m),{ref:e}))})}),Jp="ToggleGroupItem",M7=Kn.forwardRef((t,e)=>{const n=w7(Jp,t.__scopeToggleGroup),s=dZ(Jp,t.__scopeToggleGroup),o=S7(t.__scopeToggleGroup),a=n.value.includes(t.value),i=s.disabled||t.disabled,l=B(w({},t),{pressed:a,disabled:i}),c=Kn.useRef(null);return s.rovingFocus?r.jsx(F6,B(w({asChild:!0},o),{focusable:!i,active:a,ref:c,children:r.jsx(sw,B(w({},l),{ref:e}))})):r.jsx(sw,B(w({},l),{ref:e}))});M7.displayName=Jp;var sw=Kn.forwardRef((t,e)=>{const c=t,{__scopeToggleGroup:n,value:s}=c,o=Me(c,["__scopeToggleGroup","value"]),a=w7(Jp,n),i={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return r.jsx(v7,B(w(w({},l),o),{ref:e,onPressedChange:d=>{d?a.onItemActivate(s):a.onItemDeactivate(s)}}))}),LHe=f2,OHe=M7;const ps=be({joinAndLaunchTitle:{id:"workspaceSwitcherFullscreen.joinAndLaunchTitle",defaultMessage:"Join and launch your workspaces"},launchWorkspaceTitle:{id:"workspaceSwitcherFullscreen.launchWorkspaceTitle",defaultMessage:"Launch a workspace"},joinWorkspacesTitle:{id:"workspaceSwitcherFullscreen.joinWorkspacesTitle",defaultMessage:"Join workspaces"},collaborationSubtitle:{id:"workspaceSwitcherFullscreen.collaborationSubtitle",defaultMessage:"Securely collaborate with coworkers using{lineBreak}tools like projects and custom GPTs"},title:{id:"workspaceSwitcherFullscreen.title",defaultMessage:"Select a workspace"},noTopSectionTitle:{id:"workspaceSwitcherFullscreen.noTopSectionTitle",defaultMessage:"Join your teams workspace"},close:{id:"workspaceSwitcherFullscreen.close",defaultMessage:"Close"},emailCanJoinWorkspaces:{id:"workspaceSwitcherFullscreen.emailCanJoinWorkspaces",defaultMessage:"{email} can join {count, plural, one {# workspace} other {# workspaces}}."},accessAndRequestLine:{id:"workspaceSwitcherFullscreen.accessAndRequestLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}} and can join {requestCount, plural, one {# workspace} other {# workspaces}}."},memberCount:{id:"workspaceSwitcherFullscreen.memberCount",defaultMessage:"{count, plural, one {# member} other {# members}}"},accessOnlyLine:{id:"workspaceSwitcherFullscreen.accessOnlyLine",defaultMessage:"{email} has access to {accessCount, plural, one {# workspace} other {# workspaces}}."},request:{id:"workspaceSwitcherFullscreen.request",defaultMessage:"Request"},requested:{id:"workspaceSwitcherFullscreen.requested",defaultMessage:"Requested"},open:{id:"workspaceSwitcherFullscreen.open",defaultMessage:"Open"},personalWorkspace:{id:"workspaceSwitcherFullscreen.personalWorkspace",defaultMessage:"Personal workspace"},createNewWorkspacePrefix:{id:"workspaceSwitcherFullscreen.createNewWorkspacePrefix",defaultMessage:"Want something new?"},createNewWorkspaceLink:{id:"workspaceSwitcherFullscreen.createNewWorkspaceLink",defaultMessage:"Create a new workspace"},hiddenWorkspacesFooter:{id:"workspaceSwitcherFullscreen.hiddenWorkspacesFooter",defaultMessage:"Some workspaces are hidden, contact your admin for more info."},noWorkspacesToJoin:{id:"workspaceSwitcherFullscreen.noWorkspacesToJoin",defaultMessage:"No workspaces to join"},done:{id:"workspaceSwitcherFullscreen.done",defaultMessage:"Done"},requestAccessError:{id:"workspaceSwitcherFullscreen.requestAccessError",defaultMessage:"Something went wrong requesting access. Please try again."}});function T7({children:t}){return r.jsx("div",{className:"border-token-main-surface-tertiary text-token-text-secondary mb-2 flex max-w-[500px] flex-col gap-4 rounded-2xl border border-solid p-[22px] pt-[18px] shadow-sm",children:t})}function er({className:t}){return r.jsx("div",{className:W("loading-results-shimmer rounded-md",t),children:""})}function S_({className:t}){return r.jsxs("div",{className:W("flex w-full flex-col gap-1",t),children:[r.jsx(er,{className:"h-[26px] w-[105px]"}),r.jsx(er,{className:"h-[42px] w-full"})]})}function uZ(){return r.jsxs(T7,{children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[r.jsx(S_,{className:"col-span-1"}),r.jsx(S_,{className:"col-span-1"}),r.jsx(S_,{className:"col-span-1 sm:col-span-2"})]}),r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx(he,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(P,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{disabled:!0,color:"secondary",className:"text-token-text-secondary",children:r.jsx(P,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(he,{disabled:!0,children:r.jsx(P,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function DHe({existingCount:t,discoverableCount:e,accountEmail:n,showCollaborationSubtitle:s}){const o=t>0,a=e>0,i=_.useMemo(()=>o&&a?ps.joinAndLaunchTitle:o?ps.launchWorkspaceTitle:a?ps.joinWorkspacesTitle:ps.noTopSectionTitle,[o,a]),l=o||a,c=s?"mt-2":"mt-3";return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(P,w({},i))}),s&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(P,B(w({},ps.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),l&&r.jsx("div",{className:"text-token-text-secondary ".concat(c," text-sm"),children:o?a?r.jsx(P,B(w({},ps.accessAndRequestLine),{values:{email:n,accessCount:t,requestCount:e}})):r.jsx(P,B(w({},ps.accessOnlyLine),{values:{email:n,accessCount:t}})):r.jsx(P,B(w({},ps.emailCanJoinWorkspaces),{values:{email:n,count:e}}))})]})}function FHe({showCollaborationSubtitle:t}){return r.jsxs("div",{className:"mb-6 text-center",children:[r.jsx("h1",{className:"text-3xl font-semibold tracking-tight",children:r.jsx(P,w({},ps.noTopSectionTitle))}),t&&r.jsx("p",{className:"text-token-text-secondary mt-3 text-base leading-6",children:r.jsx(P,B(w({},ps.collaborationSubtitle),{values:{lineBreak:r.jsx("br",{})}}))}),r.jsx("div",{className:"text-token-text-secondary ".concat(t?"mt-2":"mt-3"," text-sm"),children:r.jsx(er,{className:"mx-auto h-4 w-64"})})]})}const mZ=j(()=>I(()=>import("./m7ju152dn5ab1rui.js").then(t=>t._),__vite__mapDeps([22,1])),{loading:t=>L(t)});function BHe({workspace:t,isLoading:e,onRequestAccess:n,onHoverRequest:s}){var l,c;const o=J(),a=_.useRef(!1),i=()=>{a.current||(a.current=!0,s(t))};return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","data-testid":"discoverable-workspace-row","data-row-type":"discoverable","data-workspace-id":t.id,children:[r.jsx(Kp,{src:(l=t.profile_picture_url)!=null?l:void 0,size:"large"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-token-text-primary truncate font-medium",title:(c=t.name)!=null?c:void 0,children:t.name}),r.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:r.jsx(P,B(w({},ps.memberCount),{values:{count:t.member_count}}))})]}),r.jsx("div",{className:"shrink-0",children:t.requested?r.jsx(he,{color:"primary",icon:mZ,label:o.formatMessage(ps.requested),onClick:d=>{d.preventDefault(),d.stopPropagation()},children:o.formatMessage(ps.requested)}):r.jsx(he,{color:"secondary",onClick:d=>{d.preventDefault(),d.stopPropagation(),n(t)},onMouseEnter:i,onFocus:i,visuallyDisabled:e,disabled:e,children:r.jsx(P,w({},ps.request))})})]})}const fZ=25;function pZ(t,e=0,n="",s=fZ,o=void 0,a=void 0){const i=_.useMemo(()=>a?[...a].sort().join(","):void 0,[a]);return lt({queryKey:["workspace",t,e,n,s,i],queryFn:async()=>await pe.safeGet("/accounts/{account_id}/users",{parameters:{path:{account_id:t},query:{offset:e,limit:s,query:n,role:i}}}),placeholderData:o,enabled:!!t})}function UHe(){return r.jsxs("div",{className:"flex w-full cursor-default items-center gap-3 border-t p-5 first:border-t-0",role:"listitem","aria-busy":"true",children:[r.jsx("div",{className:"h-12 w-12 shrink-0 overflow-hidden rounded-full",children:r.jsx(er,{className:"h-full w-full rounded-none"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"mb-1",children:r.jsx(er,{className:"h-5 w-48"})}),r.jsx(er,{className:"h-4 w-28"})]}),r.jsx("div",{className:"shrink-0",children:r.jsx(er,{className:"h-8 w-24 rounded-md"})})]})}const E7=["AD","AE","AF","AG","AL","AM","AO","AR","AT","AU","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BN","BO","BR","BS","BT","BW","BZ","CA","CD","CF","CG","CH","CI","CL","CM","CO","CR","CV","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","ER","ES","ET","FI","FJ","FM","FR","GA","GB","GD","GE","GF","GH","GM","GN","GP","GQ","GR","GT","GW","GY","HN","HR","HT","HU","ID","IE","IL","IN","IQ","IS","IT","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MQ","MR","MT","MU","MV","MW","MX","MY","MZ","NA","NE","NG","NI","NL","NO","NP","NR","NZ","OM","PA","PE","PG","PH","PK","PL","PR","PS","PT","PW","PY","QA","RE","RO","RS","RW","SA","SB","SC","SD","SE","SG","SH","SI","SK","SL","SM","SN","SO","SR","SS","ST","SV","SZ","TD","TF","TG","TH","TJ","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VN","VU","WS","XK","YE","YT","ZA","ZM","ZW"],gZ=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GF","GP","GR","HU","IS","IE","IT","LV","LI","LT","LU","MF","MQ","MT","NL","NO","PL","PT","RE","RO","SK","SI","ES","SE","YT"]),hZ=new Set(["GF","GP","MF","MQ","RE","YT"]),vy="US",_Z="IN",xZ={AL:"Albania",DZ:"Algeria",AF:"Afghanistan",AD:"Andorra",AO:"Angola",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BE:"Belgium",BZ:"Belize",BJ:"Benin",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia & Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cape Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CF:"Central African Republic",TD:"Chad",CL:"Chile",CO:"Colombia",KM:"Comoros",CG:"Congo - Brazzaville",CD:"Congo - Kinshasa",CR:"Costa Rica",CI:"Cte dIvoire",HR:"Croatia",CY:"Cyprus",CZ:"Czechia",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GR:"Greece",GD:"Grenada",GP:"Guadeloupe",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",VA:"Vatican City",HN:"Honduras",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",MK:"North Macedonia",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PR:"Puerto Rico",PT:"Portugal",QA:"Qatar",RE:"Runion",RO:"Romania",RW:"Rwanda",KN:"St. Kitts & Nevis",LC:"St. Lucia",VC:"St. Vincent & Grenadines",SH:"Saint Helena",MF:"Saint Martin",WS:"Samoa",SM:"San Marino",ST:"So Tom & Prncipe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",KR:"South Korea",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SR:"Suriname",SE:"Sweden",CH:"Switzerland",SD:"Sudan",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Trkiye",TM:"Turkmenistan",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VN:"Vietnam",XK:"Kosovo",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};function A7(t){return E7.includes(t)}function yZ({country:t,shouldUseDefaultCountryCode:e}){return t==null||!A7(t)?(Oe.addError("User country is null or unrecognized - will use ".concat(vy),{user_country:t}),vy):t}function vZ(t){try{const e=new Intl.DisplayNames([t],{type:"region"});return n=>{var s;return(s=e.of(n))!=null?s:""}}catch(e){return Oe.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:e}),n=>{var s;return(s=xZ[n])!=null?s:""}}}function bZ(){const t=G(),e=Nn(t);return _.useMemo(()=>vZ(e.locale),[e.locale])}function VHe(){const t=bZ();return _.useMemo(()=>[...E7].sort((n,s)=>{const o=t(n),a=t(s);return o.localeCompare(a)}),[t])}function SZ(t){return gZ.has(t)}function GHe(t){return t==null?(Oe.addError(new Error("nullish_country_for_vat_collection_exclusion_check"),{country:t}),!1):hZ.has(t)}const $He="https://help.openai.com/en/collections/3943089-billing",CZ="https://openai.com/chatgpt/enterprise",HHe="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",WHe="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",zHe="https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",qHe="https://help.openai.com/en/articles/11989085-chatgpt-go",p2="pricing",Om="team-pricing",YHe="plus-pricing",$h="account-payment-modal-open-from-location",C_="account-payment-modal-view",Hh="plus_free_trial",wZ="promo_campaign",w_={CHATGPT_IOS:"chatgpt_mobile_ios",SORA_IOS:"sora_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android"};function ZHe(t){return t.hash.split("#")[1]===p2}function kZ(t){return t.hash.split("#")[1]===Om}function gn(t,e,n=p2,s,o){const a=new URL(window.location.href);s&&a.searchParams.set(wZ,s),o?a.searchParams.set(C_,o):a.searchParams.delete(C_),t({hash:n,search:a.search},{state:{[$h]:e,[C_]:o}})}function KHe(t){t({hash:""})}function Dm(t){switch(Ve(t,"2788179050").get("plus_upsell_cta_copy","get_plus")){case"upgrade_to_plan":return _t.upgradeToPlus;case"upgrade_your_plan":return _t.upgradeYourPlan;case"upgrade":return _t.upgrade;case"get_plus":default:return _t.getPlus}}function MZ(t){switch(Ve(t,"2788179050").get("pro_upsell_cta_copy","get_pro")){case"upgrade_to_plan":return _t.upgradeToPro;case"upgrade_your_plan":return _t.upgradeYourPlan;case"upgrade":return _t.upgrade;case"get_pro":default:return _t.getPro}}function Xp(t){return xe(t,"3600660324")}function TZ(t,e,n){var x;const s=at(),o=G(),a=ut(o),{data:i}=bl(),l=(x=a==null?void 0:a.isWorkspaceAccount())!=null?x:!1,c=a==null?void 0:a.isPlus(),d=a==null?void 0:a.isPro(),u=a==null?void 0:a.planType,m=i&&oh(i),f=!l&&!c&&m&&Ve(o,"2670443078").get("is_gating_fix_enabled",!1),p=!l&&!f&&!d&&Ve(o,"2888142241").get("is_upgrade_in_settings",!1);return{showUpgradePlan:!p&&i&&!aG(i)&&n==="profile-dropdown-menu"&&Co(o,"2471442003").get("enabled",!1)||p,onUpgradeClick:y=>{qo(o).logEvent(t,void 0,{current_plan_type:u!=null?u:"unknown"}),U.logEvent(e,{planType:u!=null?u:"unknown"}),gn(s,y)}}}function QHe({showHiddenWorkspacesNote:t=!1}){const{showUpgradePlan:e,onUpgradeClick:n}=TZ("chatgpt_upgrade_in_workspace_switcher_clicked","Upgrade In Workspace Switcher Clicked","create-workspace-upgrade-cta"),s=!!e;return!(s||t)?null:r.jsxs("div",{className:"text-token-text-secondary mt-6 text-center text-sm",children:[t&&r.jsx("span",{className:"me-1",children:r.jsx(P,w({},ps.hiddenWorkspacesFooter))}),s&&r.jsxs(r.Fragment,{children:[r.jsx(P,w({},ps.createNewWorkspacePrefix)),"",r.jsx("button",{onClick:()=>n("fullscreen-workspace-switcher"),className:"underline",children:r.jsx(P,w({},ps.createNewWorkspaceLink))})]})]})}function JHe({source:t,existingCount:e,discoverableCount:n}){const s=pn(),o=s==null?void 0:s.email_domain_type,a=_.useMemo(()=>({source:t,join_flow:"discovery",platform:"web",email_domain_type:o}),[o,t]),i=_.useMemo(()=>({existing_workspace_count:e,joinable_workspace_count:n,has_joinable_workspaces:n>0}),[n,e]),l=_.useCallback((p,g,h={})=>{U.logEventWithStatsig(p,g,B(w(w(w({},a),i),h),{ts:new Date().toISOString()}))},[a,i]),c=_.useCallback((p,g={})=>{l("Account: Workspace Discovery Fullscreen Exit","chatgpt_workspace_discovery_fullscreen_exit",w({exit_action:p},g))},[l]),d=_.useRef(!1),u=_.useCallback(p=>{l("Account: Workspace Discovery Request Hovered","chatgpt_workspace_discovery_request_hovered",{workspace_id:p.id})},[l]),m=_.useCallback(p=>{l("Account: Workspace Discovery Request Clicked","chatgpt_workspace_discovery_request_clicked",{workspace_id:p.id})},[l]),f=_.useCallback(()=>{d.current||(d.current=!0,l("Account: Workspace Discovery Fullscreen Viewed","chatgpt_workspace_discovery_fullscreen_viewed"))},[l]);return{hasLoggedFullscreenView:d.current,logFullscreenViewedOnce:f,logExitEvent:c,logRequestButtonHovered:u,logRequestButtonClicked:m}}var I7="AlertDialog",[EZ]=wl(I7,[U6]),Tr=U6(),j7=t=>{const o=t,{__scopeAlertDialog:e}=o,n=Me(o,["__scopeAlertDialog"]),s=Tr(e);return r.jsx(Sl,B(w(w({},s),n),{modal:!0}))};j7.displayName=I7;var AZ="AlertDialogTrigger",IZ=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=Me(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(nb,B(w(w({},o),s),{ref:e}))});IZ.displayName=AZ;var jZ="AlertDialogPortal",P7=t=>{const o=t,{__scopeAlertDialog:e}=o,n=Me(o,["__scopeAlertDialog"]),s=Tr(e);return r.jsx(Cl,w(w({},s),n))};P7.displayName=jZ;var PZ="AlertDialogOverlay",N7=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=Me(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(xm,B(w(w({},o),s),{ref:e}))});N7.displayName=PZ;var Rc="AlertDialogContent",[NZ,RZ]=EZ(Rc),R7=_.forwardRef((t,e)=>{const d=t,{__scopeAlertDialog:n,children:s}=d,o=Me(d,["__scopeAlertDialog","children"]),a=Tr(n),i=_.useRef(null),l=Rn(e,i),c=_.useRef(null);return r.jsx(rG,{contentName:Rc,titleName:L7,docsSlug:"alert-dialog",children:r.jsx(NZ,{scope:n,cancelRef:c,children:r.jsxs(dd,B(w(w({role:"alertdialog"},a),o),{ref:l,onOpenAutoFocus:Rt(o.onOpenAutoFocus,u=>{var m;u.preventDefault(),(m=c.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[r.jsx(iG,{children:s}),r.jsx(OZ,{contentRef:i})]}))})})});R7.displayName=Rc;var L7="AlertDialogTitle",O7=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=Me(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(eb,B(w(w({},o),s),{ref:e}))});O7.displayName=L7;var D7="AlertDialogDescription",F7=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=Me(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(tb,B(w(w({},o),s),{ref:e}))});F7.displayName=D7;var LZ="AlertDialogAction",B7=_.forwardRef((t,e)=>{const a=t,{__scopeAlertDialog:n}=a,s=Me(a,["__scopeAlertDialog"]),o=Tr(n);return r.jsx(ud,B(w(w({},o),s),{ref:e}))});B7.displayName=LZ;var U7="AlertDialogCancel",V7=_.forwardRef((t,e)=>{const l=t,{__scopeAlertDialog:n}=l,s=Me(l,["__scopeAlertDialog"]),{cancelRef:o}=RZ(U7,n),a=Tr(n),i=Rn(e,o);return r.jsx(ud,B(w(w({},a),s),{ref:i}))});V7.displayName=U7;var OZ=({contentRef:t})=>{const e="`".concat(Rc,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(Rc,"` by passing a `").concat(D7,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(Rc,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return _.useEffect(()=>{var s;document.getElementById((s=t.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},DZ=j7,FZ=P7,BZ=N7,UZ=R7,VZ=B7,GZ=V7,$Z=O7,ow=F7;function G7({title:t,description:e,contentClassName:n,onClose:s,actionButton:o,cancelButton:a,moreInfoLink:i}){return r.jsx(DZ,{open:!0,onOpenChange:l=>{l||s()},children:r.jsxs(FZ,{children:[r.jsx(BZ,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0"}),r.jsxs(UZ,{className:W("bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",n),onEscapeKeyDown:l=>l.preventDefault(),children:[r.jsx($Z,{className:"border-token-border-default border-b p-4 text-lg font-semibold md:p-6",children:t}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:[r.jsx(ow,{className:"text-base",children:e}),r.jsxs("div",{className:"flex justify-end gap-2",children:[i&&r.jsx(ow,{className:"grow",children:i}),a&&r.jsx(GZ,{asChild:!0,children:a}),r.jsx(VZ,{asChild:!0,children:o})]})]})]})]})})}function HZ(t){return V6(new URL(t,window.location.origin).searchParams).includes(Ie.Search)}var Zc=(t=>(t.DownloadMessages="download-messages",t.InviteUsersToWorkspace="invite-users-to-workspace",t.WorkspaceAppearance="workspace-appearance",t.KeyboardActions="keyboard-actions",t.WorkspaceSwitcher="workspace-switcher",t.ReadOnlyConversationTemplate="read-only-conversation-template",t.CookieManagement="cookie-management",t.AgeVerificationInterstitial="age-verification-interstitial",t.GPTDetails="gpt-details",t.GPTPrivacySettings="gpt-privacy-settings",t.GPTFeedbackEmail="gpt-support-email",t.GPTReview="gpt-review",t.GPTRemoveThirdParty="gpt-remove-third-party",t.SharedConversationModeration="shared-conversation-moderation",t.ReportConversation="report-conversation",t.BlockingInitialComponent="blocking-initial-component",t.NoAuthNewChat="no-auth-new-chat",t.GlobalMemoryOnboarding="global-memory-onboarding",t.AccountPayment="account-payment",t.CreateExclusion="create-exclusion",t.AddServiceAccountKey="add-service-account-key",t.DeleteServiceAccountKey="delete-service-account-key",t.LogoutConfirm="logout-confirm",t.NotificationFeed="notification-feed",t.DeepResearchShare="deep-research-share",t))(Zc||{});function WZ({isOpen:t}){Qn.setCookie(Jn.NavigationState,t?"1":"0",{maxAge:2*365*24*60*60})}const zZ={isThreadHeaderVisible:!0,isSlideoverSidebarOpen:void 0,isPopoverSidebarOpen:!1,isVoiceActive:!1,isConversationScrolledFromTop:!1,sharingModalThreadId:void 0,deepResearchShareTaskId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,browseMode:"conversation",voiceFeedbackThread:null,lastVoiceSessionStartTime:null,lastVoiceSessionEndTime:null,displayAnnouncementTooltip:null,noAuthMadlibsModalOpen:!1,onboardingConvoState:null,autoHighlightNicknameInput:!1,shouldShowThreadModelPickerDot:!1},Wh=xs(()=>Nt()(()=>zZ));function wa(t){"use no forget";const e=G(),n=Wh(e);return t?n(t):n()}function $7(){const t=Hn();return Wh(t).getState()}function rn(t){const e=Hn();Wh(e).setState(t)}const XHe={isLatencyDevtoolsVisible:t=>t.isLatencyDevToolsVisible},yn={setBrowseMode:t=>{rn(e=>B(w({},e),{browseMode:t}))},setIsConversationScrolledFromTop:t=>{rn(e=>B(w({},e),{isConversationScrolledFromTop:t}))},enterGizmoEditor:()=>{rn({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{rn({browseMode:"conversation"})},setAutoHighlightNicknameInput:t=>{rn({autoHighlightNicknameInput:t})},setSidebarOpen(t){z7()?yn.setPopoverSidebarOpen(t):yn.setSlideoverSidebarOpen(t)},setPopoverSidebarOpen:t=>{rn(({isPopoverSidebarOpen:e})=>({isPopoverSidebarOpen:t!=null?t:!e}))},setSlideoverSidebarOpen:t=>{rn(({isSlideoverSidebarOpen:e})=>{const n=t!=null?t:!(e!=null?e:H7());return WZ({isOpen:n}),U.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!n,action:"button_click"}),{isSlideoverSidebarOpen:n}}),W7=!1},hideThreadHeader:()=>{rn({isThreadHeaderVisible:!1})},showThreadHeader:()=>{rn({isThreadHeaderVisible:!0})},openSharingModal(t,e){rn({sharingModalThreadId:t}),U.logEvent("Share Conversation: Open Modal",{location:e})},closeSharingModal(){rn({sharingModalThreadId:void 0})},openFeedbackModal(t){rn({feedbackModalThreadId:t})},closeFeedbackModal(){rn({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(t){rn({leaveWorkspaceData:t})},setPurchaseWorkspaceData(t){rn({purchaseWorkspaceData:t})},setActiveSidebar(t){rn({activeSidebar:t})},setThreadModelPickerAlertDot:t=>{rn(({shouldShowThreadModelPickerDot:e})=>(e!==t&&U.logEvent("Notifications: Thread Model Picker Alert Dot",{shown:t}),{shouldShowThreadModelPickerDot:t}))},toggleActiveSidebar(t){rn(e=>({activeSidebar:e.activeSidebar===t?!1:t}))},closeActiveSidebar(){rn(()=>({activeSidebar:!1}))},setActiveStageSidebar(t){rn({activeStageSidebar:t})},toggleModal(t){rn(e=>{const n=new Set(e.activeModals);return n.has(t)?n.delete(t):n.add(t),{activeModals:n}})},openModal(t){rn(e=>{if(e.activeModals.has(t))return e;const n=new Set(e.activeModals);return n.add(t),{activeModals:n}})},closeModal(t){rn(e=>{if(!e.activeModals.has(t))return e;const n=new Set(e.activeModals);return n.delete(t),{activeModals:n}})},openDeepResearchShare(t){rn(e=>B(w({},e),{deepResearchShareTaskId:t})),yn.openModal("deep-research-share")},closeAllActiveModals(){$7().activeModals.size>0&&rn({activeModals:new Set})},hideLatencyDevTools:()=>{rn({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{rn({isLatencyDevToolsVisible:!0})},showAnnouncementTooltipExclusively(t,e=!1){rn(n=>n.displayAnnouncementTooltip&&!e?n:{displayAnnouncementTooltip:t})},setNoAuthMadlibsModalOpen:t=>{rn({noAuthMadlibsModalOpen:t}),mt.setItem(Le.NoAuthMadlibsModalState,"seen")},setOnboardingConvoState:t=>{rn({onboardingConvoState:t})}};function qZ(t){return wa(e=>e.activeModals.has(t))}function H7(){if(W7)return!1;const t=Qn.getCookie(Jn.NavigationState);return t!=null?t==="1":!0}let W7=HZ(window.location.href);function z7(){const t=$7().activeStageSidebar,e=sb();return t||!e}function YZ(){const t=wa(n=>n.activeStageSidebar),e=Yo();return t||!e}function ZZ(){const t=G(),e=YZ(),n=wa(s=>s.isSlideoverSidebarOpen);return pt(t)&&!e&&(n!=null?n:H7())}function KZ(){return wa(t=>t.activeModals.has("blocking-initial-component"))}function QZ(){const t=G(),[e,n]=_.useState(!1);return _.useEffect(()=>Wh(t).subscribe(o=>{o.activeModals.has("blocking-initial-component")&&n(a=>a||o.activeModals.has("blocking-initial-component"))}),[t]),e}var g2="ToastProvider",[h2,JZ,XZ]=ob("Toast"),[q7]=wl("Toast",[XZ]),[eK,zh]=q7(g2),Y7=t=>{const{__scopeToast:e,label:n="Notification",duration:s=5e3,swipeDirection:o="right",swipeThreshold:a=50,children:i}=t,[l,c]=_.useState(null),[d,u]=_.useState(0),m=_.useRef(!1),f=_.useRef(!1);return n.trim()||console.error("Invalid prop `label` supplied to `".concat(g2,"`. Expected non-empty `string`.")),r.jsx(h2.Provider,{scope:e,children:r.jsx(eK,{scope:e,label:n,duration:s,swipeDirection:o,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:_.useCallback(()=>u(p=>p+1),[]),onToastRemove:_.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:f,children:i})})};Y7.displayName=g2;var Z7="ToastViewport",tK=["F8"],by="toast.viewportPause",Sy="toast.viewportResume",K7=_.forwardRef((t,e)=>{const x=t,{__scopeToast:n,hotkey:s=tK,label:o="Notifications ({hotkey})"}=x,a=Me(x,["__scopeToast","hotkey","label"]),i=zh(Z7,n),l=JZ(n),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),m=_.useRef(null),f=Rn(e,m,i.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;_.useEffect(()=>{const y=b=>{var S;s.length!==0&&s.every(C=>b[C]||b.code===C)&&((S=m.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),_.useEffect(()=>{const y=c.current,b=m.current;if(g&&y&&b){const v=()=>{if(!i.isClosePausedRef.current){const M=new CustomEvent(by);b.dispatchEvent(M),i.isClosePausedRef.current=!0}},S=()=>{if(i.isClosePausedRef.current){const M=new CustomEvent(Sy);b.dispatchEvent(M),i.isClosePausedRef.current=!1}},C=M=>{!y.contains(M.relatedTarget)&&S()},k=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",v),y.addEventListener("focusout",C),y.addEventListener("pointermove",v),y.addEventListener("pointerleave",k),window.addEventListener("blur",v),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",v),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",v),y.removeEventListener("pointerleave",k),window.removeEventListener("blur",v),window.removeEventListener("focus",S)}}},[g,i.isClosePausedRef]);const h=_.useCallback(({tabbingDirection:y})=>{const v=l().map(S=>{const C=S.ref.current,k=[C,...gK(C)];return y==="forwards"?k:k.reverse()});return(y==="forwards"?v.reverse():v).flat()},[l]);return _.useEffect(()=>{const y=m.current;if(y){const b=v=>{var k,M,T;const S=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!S){const E=document.activeElement,A=v.shiftKey;if(v.target===y&&A){(k=d.current)==null||k.focus();return}const O=h({tabbingDirection:A?"backwards":"forwards"}),D=O.findIndex(F=>F===E);k_(O.slice(D+1))?v.preventDefault():A?(M=d.current)==null||M.focus():(T=u.current)==null||T.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[l,h]),r.jsxs(lG,{ref:c,role:"region","aria-label":o.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&r.jsx(Cy,{ref:d,onFocusFromOutsideViewport:()=>{const y=h({tabbingDirection:"forwards"});k_(y)}}),r.jsx(h2.Slot,{scope:n,children:r.jsx(cn.ol,B(w({tabIndex:-1},a),{ref:f}))}),g&&r.jsx(Cy,{ref:u,onFocusFromOutsideViewport:()=>{const y=h({tabbingDirection:"backwards"});k_(y)}})]})});K7.displayName=Z7;var Q7="ToastFocusProxy",Cy=_.forwardRef((t,e)=>{const i=t,{__scopeToast:n,onFocusFromOutsideViewport:s}=i,o=Me(i,["__scopeToast","onFocusFromOutsideViewport"]),a=zh(Q7,n);return r.jsx(ab,B(w({"aria-hidden":!0,tabIndex:0},o),{ref:e,style:{position:"fixed"},onFocus:l=>{var u;const c=l.relatedTarget;!((u=a.viewport)!=null&&u.contains(c))&&s()}}))});Cy.displayName=Q7;var qh="Toast",nK="toast.swipeStart",sK="toast.swipeMove",oK="toast.swipeCancel",aK="toast.swipeEnd",J7=_.forwardRef((t,e)=>{const d=t,{forceMount:n,open:s,defaultOpen:o,onOpenChange:a}=d,i=Me(d,["forceMount","open","defaultOpen","onOpenChange"]),[l=!0,c]=ur({prop:s,defaultProp:o,onChange:a});return r.jsx(ah,{present:n||l,children:r.jsx(lK,B(w({open:l},i),{ref:e,onClose:()=>c(!1),onPause:qu(t.onPause),onResume:qu(t.onResume),onSwipeStart:Rt(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rt(t.onSwipeMove,u=>{const{x:m,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(m,"px")),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(f,"px"))}),onSwipeCancel:Rt(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rt(t.onSwipeEnd,u=>{const{x:m,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(m,"px")),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(f,"px")),c(!1)})}))})});J7.displayName=qh;var[rK,iK]=q7(qh,{onClose(){}}),lK=_.forwardRef((t,e)=>{const D=t,{__scopeToast:n,type:s="foreground",duration:o,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:f,onSwipeEnd:p}=D,g=Me(D,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),h=zh(qh,n),[x,y]=_.useState(null),b=Rn(e,F=>y(F)),v=_.useRef(null),S=_.useRef(null),C=o||h.duration,k=_.useRef(0),M=_.useRef(C),T=_.useRef(0),{onToastAdd:E,onToastRemove:A}=h,N=qu(()=>{var V;(x==null?void 0:x.contains(document.activeElement))&&((V=h.viewport)==null||V.focus()),i()}),R=_.useCallback(F=>{!F||F===1/0||(window.clearTimeout(T.current),k.current=new Date().getTime(),T.current=window.setTimeout(N,F))},[N]);_.useEffect(()=>{const F=h.viewport;if(F){const V=()=>{R(M.current),d==null||d()},z=()=>{const $=new Date().getTime()-k.current;M.current=M.current-$,window.clearTimeout(T.current),c==null||c()};return F.addEventListener(by,z),F.addEventListener(Sy,V),()=>{F.removeEventListener(by,z),F.removeEventListener(Sy,V)}}},[h.viewport,C,c,d,R]),_.useEffect(()=>{a&&!h.isClosePausedRef.current&&R(C)},[a,C,h.isClosePausedRef,R]),_.useEffect(()=>(E(),()=>A()),[E,A]);const O=_.useMemo(()=>x?oI(x):null,[x]);return h.viewport?r.jsxs(r.Fragment,{children:[O&&r.jsx(cK,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:O}),r.jsx(rK,{scope:n,onClose:N,children:fi.createPortal(r.jsx(h2.ItemSlot,{scope:n,children:r.jsx(cG,{asChild:!0,onEscapeKeyDown:Rt(l,()=>{h.isFocusedToastEscapeKeyDownRef.current||N(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(cn.li,B(w({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":h.swipeDirection},g),{ref:b,style:w({userSelect:"none",touchAction:"none"},t.style),onKeyDown:Rt(t.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:Rt(t.onPointerDown,F=>{F.button===0&&(v.current={x:F.clientX,y:F.clientY})}),onPointerMove:Rt(t.onPointerMove,F=>{if(!v.current)return;const V=F.clientX-v.current.x,z=F.clientY-v.current.y,$=!!S.current,Y=["left","right"].includes(h.swipeDirection),Z=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,Q=Y?Z(0,V):0,q=Y?0:Z(0,z),X=F.pointerType==="touch"?10:2,oe={x:Q,y:q},se={originalEvent:F,delta:oe};$?(S.current=oe,kf(sK,m,se,{discrete:!1})):aw(oe,h.swipeDirection,X)?(S.current=oe,kf(nK,u,se,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(V)>X||Math.abs(z)>X)&&(v.current=null)}),onPointerUp:Rt(t.onPointerUp,F=>{const V=S.current,z=F.target;if(z.hasPointerCapture(F.pointerId)&&z.releasePointerCapture(F.pointerId),S.current=null,v.current=null,V){const $=F.currentTarget,Y={originalEvent:F,delta:V};aw(V,h.swipeDirection,h.swipeThreshold)?kf(aK,p,Y,{discrete:!0}):kf(oK,f,Y,{discrete:!0}),$.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})}))})}),h.viewport)})]}):null}),cK=t=>{const d=t,{__scopeToast:e,children:n}=d,s=Me(d,["__scopeToast","children"]),o=zh(qh,e),[a,i]=_.useState(!1),[l,c]=_.useState(!1);return fK(()=>i(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:r.jsx(rb,{asChild:!0,children:r.jsx(ab,B(w({},s),{children:a&&r.jsxs(r.Fragment,{children:[o.label," ",n]})}))})},dK="ToastTitle",X7=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=Me(o,["__scopeToast"]);return r.jsx(cn.div,B(w({},s),{ref:e}))});X7.displayName=dK;var uK="ToastDescription",mK=_.forwardRef((t,e)=>{const o=t,{__scopeToast:n}=o,s=Me(o,["__scopeToast"]);return r.jsx(cn.div,B(w({},s),{ref:e}))});mK.displayName=uK;var eI="ToastAction",tI=_.forwardRef((t,e)=>{const o=t,{altText:n}=o,s=Me(o,["altText"]);return n.trim()?r.jsx(sI,{altText:n,asChild:!0,children:r.jsx(_2,B(w({},s),{ref:e}))}):(console.error("Invalid prop `altText` supplied to `".concat(eI,"`. Expected non-empty `string`.")),null)});tI.displayName=eI;var nI="ToastClose",_2=_.forwardRef((t,e)=>{const a=t,{__scopeToast:n}=a,s=Me(a,["__scopeToast"]),o=iK(nI,n);return r.jsx(sI,{asChild:!0,children:r.jsx(cn.button,B(w({type:"button"},s),{ref:e,onClick:Rt(t.onClick,o.onClose)}))})});_2.displayName=nI;var sI=_.forwardRef((t,e)=>{const a=t,{__scopeToast:n,altText:s}=a,o=Me(a,["__scopeToast","altText"]);return r.jsx(cn.div,B(w({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0},o),{ref:e}))});function oI(t){const e=[];return Array.from(t.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),pK(s)){const o=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!o)if(a){const i=s.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...oI(s))}}),e}function kf(t,e,n,{discrete:s}){const o=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?dG(o,a):o.dispatchEvent(a)}var aw=(t,e,n=0)=>{const s=Math.abs(t.x),o=Math.abs(t.y),a=s>o;return e==="left"||e==="right"?a&&s>n:!a&&o>n};function fK(t=()=>{}){const e=qu(t);mr(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[e])}function pK(t){return t.nodeType===t.ELEMENT_NODE}function gK(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function k_(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var hK=Y7,_K=K7,xK=J7,aI=X7,yK=tI,rI=_2;function iI({children:t}){return r.jsxs(hK,{children:[r.jsx(xK,{className:"radix-state-closed:animate-hide radix-state-open:animate-slideIn popover bg-token-main-surface-primary grid grid-cols-[auto_max-content] items-center gap-x-4 rounded-lg p-4 shadow-xs [grid-template-areas:_'title_action'_'description_action'] sm:max-w-2xl",open:!0,children:t}),r.jsx(_K,{className:"fixed end-0 bottom-0 z-50 m-0 flex max-w-[100vw] list-none flex-col gap-4 p-6 outline-hidden"})]})}const fc="compliance",vK=3600*24*30*6,bK={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},SK={IT:"countdown",KR:"passive"};function CK(t,e){var i,l,c,d,u,m,f,p;const n=$6(e),s=(i=t.registration_country)!=null?i:"",o=s in G6&&((l=t.age_verification)==null?void 0:l.is_required);if(!n&&!o)return bK;const a=n&&!!t.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:a?(d=(c=t.cookie_consent)==null?void 0:c.analytics_cookies_accepted)!=null?d:!1:!0,showCookieConsentBanner:a&&!!((u=t.cookie_consent)!=null&&u.is_required),isStorageComplianceEnabled:a,ageVerificationDeadline:o&&(f=(m=t.age_verification)==null?void 0:m.remaining_seconds)!=null?f:null,ageVerificationType:o&&(p=SK[s])!=null?p:"none"}}const lI=io({queryKey:[fc],queryFn:async()=>{var e;let t;try{t=await pe.safeGet("/compliance")}catch(n){t={registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1}}}if((e=t.cookie_consent)!=null&&e.is_required){const n=Qn.getBooleanCookie(Jn.AllowNonessential),s=t.cookie_consent.analytics_cookies_accepted;if(n===void 0&&s!=null)Qn.setBooleanCookie(Jn.AllowNonessential,s,{maxAge:vK,domain:uG});else if(n!==s&&n!=null){const o={analytics_cookies_accepted:n};return pe.safePost("/compliance/cookie_consent",{authOption:qt.SendIfAvailable,requestBody:o}),B(w({},t),{cookie_consent:w(w({},t.cookie_consent),o)})}}return t}});function cI({enabled:t,select:e}){return lt(B(w({},lI),{enabled:t,select:e}))}function dI(){const t=G(),{country:e}=md(t),n=e!=null&&e in G6,s=lt(B(w({},lI),{enabled:n,select:o=>CK(o,e)}));return B(w({},s),{isEnabled:n})}function wK(){const t=xt();return Bt({mutationFn:e=>pe.safePost("/compliance/cookie_consent",{requestBody:e}),onSuccess:()=>{t.refetchQueries({queryKey:[fc]})},onMutate:async e=>{await t.cancelQueries({queryKey:[fc]});const n=t.getQueryData([fc]);return t.setQueryData([fc],s=>{var a;if(s===void 0)return;const o=!!((a=s.cookie_consent)!=null&&a.is_required);return B(w({},s),{cookie_consent:w({is_required:o},e)})}),{previousValue:n}},onError:(e,n,s)=>{s!==void 0&&t.setQueryData([fc],s.previousValue)}})}function eWe({serverPrimedAllowBrowserStorageValue:t,enabled:e}){const{data:n,isLoading:s}=cI({enabled:e,select:o=>{var a;return((a=o.cookie_consent)==null?void 0:a.analytics_cookies_accepted)===!0}});return s||!e?t:n!=null?n:!1}const kK=3600*24;function tWe(t,e=!1){return Ia()==null||e?"loading":!t||Qn.getCookie(Jn.AgeVerification)||t.ageVerificationDeadline==null||t.ageVerificationType==="none"?"hide":"show"}function nWe({onClose:t}){const{data:{ageVerificationType:e,ageVerificationDeadline:n}={}}=dI();return e==="passive"?r.jsx(MK,{onClose:t}):e==="countdown"&&n!=null?r.jsx(TK,{onClose:t,ageVerificationDeadline:n}):null}const MK=({onClose:t})=>{const e=G(),{country:n}=md(e);return _.useEffect(()=>{Oe.addAction("privacy_policy.show_age_verification_modal",{country:n})},[n]),r.jsx(G7,{onClose:t,title:"OpenAI      ",description:r.jsx("div",{className:"whitespace-pre-wrap",children:r.jsxs("p",{children:["ChatGPT  .     , OpenAI  OpenAI       . ChatGPT  ,  18 , 14        .",r.jsx("br",{}),r.jsx("br",{}),"OpenAI  "," ",r.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"    ."})]})}),actionButton:r.jsx(he,{color:"primary",onClick:async()=>{await pe.safePost("/compliance/age_verification"),t()},children:" OpenAI  "}),cancelButton:r.jsx(he,{as:"link",color:"secondary",to:"/auth/logout",children:""})})},TK=({onClose:t,ageVerificationDeadline:e})=>{const n=G(),s=e!=null?Math.floor(e/60/60/24):0;_.useEffect(()=>{We.logEvent("chatgpt_compliance_age_verification_seen"),U.logEvent("Compliance Age Verification Seen")},[]);const{country:o}=md(n);return _.useEffect(()=>{Oe.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),r.jsxs(iI,{children:[r.jsx(aI,{className:"text-sm font-semibold [grid-area:_title]",children:r.jsx(P,B(w({},rw.ageVerificationTitle),{values:{deadline:s,learnMoreLink:a=>r.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:a})}}))}),r.jsx(yK,{altText:"Dismiss notification",asChild:!0,children:r.jsx(he,{color:"primary",size:"small",onClick:()=>{We.logEvent("chatgpt_compliance_age_verification_clicked"),U.logEvent("Compliance Age Verification Clicked"),Qn.setCookie(Jn.AgeVerification,"true",{maxAge:kK,path:"/"}),t(),yn.openModal(Zc.AgeVerificationInterstitial)},children:r.jsx(P,w({},rw.startVerification))})}),r.jsx(rI,{})]})},rw=be({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that youre old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardians permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function Fm(){const{hash:t}=ls(),e=at();return{openSettings:(n,s)=>{e(fd(n,s))},closeSettings:()=>{e({hash:""})},isOpen:fG(t),currentTab:mG(t)}}const sWe=io({queryKey:["clientApplications"],queryFn:()=>pe.safeGet("/client_applications")});function oWe(){const t=Ut();return Bt({mutationFn:e=>pe.safeDelete("/client_applications/{client_id}",{parameters:{path:{client_id:e}}}),onSuccess:()=>{window.location.reload()},onError:e=>{Oe.addError("Failed to revoke client application",{error:e}),t.danger("Failed to disconnect. Please try again later.",{toastId:"revoke_client_application"})}})}function aWe({onClose:t}){const e=G(),n=J(),s=Ut(),{openSettings:o}=Fm(),a=wK(),{session:i}=pd(e),{data:{isStorageComplianceEnabled:l}={}}=dI(),{data:c,isLoading:d}=cI({enabled:!!(l&&i),select:u=>{var m;return!((m=u.cookie_consent)!=null&&m.is_required)}});return _.useEffect(()=>{c===!0&&t()},[c,t]),d?null:r.jsx(EK,{onReject:()=>{a.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){s.success(n.formatMessage(bc.updateSuccess))},onError(){s.danger(bc.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},onAccept:()=>{a.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){s.success(n.formatMessage(bc.updateSuccess))},onError(){s.danger(bc.updateFailure,{toastId:"cookie_consent_banner"})}}),t()},children:r.jsx(P,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:u=>r.jsx(rh,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:u}),manageLink:u=>r.jsx(AK,{onClick:()=>{o(Bn.DataControls)},children:u})}})})}function EK({children:t,onAccept:e,onReject:n}){return _.useEffect(()=>{Oe.addAction("privacy_policy.show_cookie_consent_banner")},[]),r.jsxs(iI,{children:[r.jsxs(aI,{className:"text-sm font-semibold [grid-area:_title]",children:[t,r.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[r.jsx(he,{color:"secondary",size:"small",onClick:n,children:r.jsx(P,w({},bc.reject))}),r.jsx(he,{color:"secondary",size:"small",onClick:e,children:r.jsx(P,w({},bc.accept))})]})]}),r.jsx(rI,{})]})}var NE;const AK=ct.button(NE||(NE=rt(["underline font-normal text-green-600"]))),bc=be({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),IK=j(()=>I(()=>import("./jqab1cg1m48dccx8.js").then(t=>t._),__vite__mapDeps([23,1])),{loading:t=>L(t)}),iw=j(()=>I(()=>import("./igq4g5h0kvd74hab.js").then(t=>t._),__vite__mapDeps([24,1])),{loading:t=>L(t)}),jK=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),PK="https://persistent.oaistatic.com/chatgpt/connector-promo-light.png",NK="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-1.png",RK="https://persistent.oaistatic.com/chatgpt/connector-nux-banner-bg-2.png",rWe=()=>{const{isLoading:t,eligible:e}=$e(Ye.hasSeenConnectorsNuxModal),n=vn(un),s=_n(),o=!!(s!=null&&s.isAdminOfAccount()||s!=null&&s.isOwnerOfAccount()),{isLoading:a}=H6(),i=ym(),{availableConnectors:l}=ih();if(n)return"hide";const c=t||a,d=e&&(i==null?void 0:i.enabled)&&(i==null?void 0:i.can_see_system_hint_announcement)&&(o||l.length>0);return c?"loading":d?"show":"hide"},iWe=({onClose:t})=>{const{canUpgradeGDrive:e,canUpgradeSharepoint:n}=H6();return e||n?r.jsx(LK,{canUpgradeGDrive:e,canUpgradeSharepoint:n,onClose:t}):r.jsx(DK,{onClose:t})},LK=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n})=>r.jsx(OK,{canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n}),OK=({canUpgradeGDrive:t,canUpgradeSharepoint:e,onClose:n})=>{const s=J(),o=_n(),a=!!(o!=null&&o.isAdminOfAccount()||o!=null&&o.isOwnerOfAccount()),i=!!(o!=null&&o.isPersonalAccount()),{markAsViewed:l}=$e(Ye.hasSeenConnectorsNuxModal),[c,d]=_.useState(!1),[u,m]=_.useState(!1),f=t?NK:RK,p=()=>{l(),n()},{CitationIcon:g,description:h,LoadingIcon:x,loadingText:y,onContinue:b,primaryButtonLabel:v,title:S}=_.useMemo(()=>t?{CitationIcon:IK,description:s.formatMessage({id:"T7ohyZ",defaultMessage:"Ask ChatGPT anything about your Google Docs, Sheets, Slides, and files."}),LoadingIcon:jK,loadingText:s.formatMessage({id:"Z5098P",defaultMessage:"Reading Google Drive..."}),primaryButtonLabel:s.formatMessage({id:"GmC5aI",defaultMessage:"Connect Google"}),title:s.formatMessage({id:"3HJBih",defaultMessage:"ChatGPT + Google Drive"}),onContinue:()=>{a&&!i?window.location.href="/admin/ca":window.location.hash="#settings/".concat(Bn.Connectors,"?connector=").concat(fr[bt.GDRIVE_ACTION_CONNECTOR],"&add-connector-link=true&referrer=").concat(zc.ConnectorNuxModal)}}:{CitationIcon:iw,description:s.formatMessage({id:"Bq7hPi",defaultMessage:"Ask ChatGPT anything about your shared sites and OneDrive files."}),LoadingIcon:iw,loadingText:s.formatMessage({id:"CTgrFA",defaultMessage:"Reading Sharepoint..."}),primaryButtonLabel:s.formatMessage({id:"d89pUX",defaultMessage:"Connect Sharepoint"}),title:s.formatMessage({id:"mliVAI",defaultMessage:"ChatGPT + Sharepoint"}),onContinue:()=>{a&&!i?window.location.href="/admin/ca":window.location.hash="#settings/".concat(Bn.Connectors,"?connector=").concat(fr[bt.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(zc.ConnectorNuxModal)}},[t,s,a,i]),C=()=>{U.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{targetted_connector:t?"gdrive":"sharepoint"}),l(),n(),b()};return _.useEffect(()=>{const k=new Image;k.src=f,k.onload=()=>d(!0)},[f]),_.useEffect(()=>{U.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{targetted_connector:t?"gdrive":"sharepoint"})},[t,e]),_.useEffect(()=>{if(!c)return;const k=setTimeout(()=>{m(!0)},3e3);return()=>clearTimeout(k)},[c]),r.jsxs(Pt,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:p,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(fn,{onClick:p,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:f,alt:s.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"h-[213px] w-full object-cover object-bottom"}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center",children:r.jsxs("div",{className:"flex w-full flex-col gap-4 px-8",children:[r.jsx(Xe.div,{className:"relative flex w-auto self-end rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)]",initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.2,duration:.3},layout:"position",children:r.jsx(P,{id:"2VNiPu",defaultMessage:"Where's the next company conference?"})}),r.jsx(Xe.div,{className:"relative flex w-auto self-start rounded-3xl bg-white px-4 py-2.5 text-lg backdrop-blur-[24px] dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"pe-3":""),initial:{opacity:0,y:16},animate:c?{opacity:1,y:0}:{opacity:0,y:8},transition:{type:"tween",ease:"easeInOut",stiffness:400,damping:30,delay:.5,duration:.3},layout:"position",children:r.jsx(dn,{mode:"wait",initial:!1,children:u?r.jsxs(Xe.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(P,{id:"hBFvRz",defaultMessage:"The next conference is in New York City."}),r.jsx("span",{className:"text-token-text-secondary dark:bg-token-tertiary relative flex items-center rounded-xl bg-[#f4f4f4] px-1.5 py-0.5",children:r.jsx(g,{className:"h-5 w-5 object-contain"})})]},"answer"):r.jsxs(Xe.div,{className:"flex items-center gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,width:"100%"},transition:{opacity:{duration:.2}},style:{width:"100%"},layout:!0,children:[r.jsx(x,{className:"h-5 w-5 object-contain"}),r.jsx("span",{className:"loading-shimmer",children:y})]},"loading")})})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:S}),r.jsx("div",{className:"text-token-text-secondary",children:h}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(he,{color:"secondary",onClick:p,children:r.jsx(P,{id:"ZeZf5A",defaultMessage:"Try later"})}),r.jsx(he,{color:"primary",onClick:C,children:v})]})]})]})},DK=({onClose:t})=>{const e=J(),n=_n(),s=!!(n!=null&&n.isAdminOfAccount()||n!=null&&n.isOwnerOfAccount()),o=!!(n!=null&&n.isPersonalAccount()),{openSettings:a}=Fm(),{markAsViewed:i}=$e(Ye.hasSeenConnectorsNuxModal);_.useEffect(()=>{U.logEventWithStatsig("Connectors Nux Modal Shown","chatgpt_connectors_nux_modal_shown",{isAdmin:s&&!o?"true":"false"})},[s,o]);const l=()=>{U.logEventWithStatsig("Connectors Nux Modal Confirmation Button Clicked","chatgpt_connectors_nux_modal_confirmation_button_clicked",{isAdmin:s&&!o?"true":"false"}),i(),s&&!o?window.location.href="/admin/ca":(t(),a(Bn.Connectors))},c=()=>{i(),t()},d=e.formatMessage({id:"l6VLn3",defaultMessage:"Your apps, smarter chats"}),u=e.formatMessage({id:"QTZ7a/",defaultMessage:"Find answers, summarize info, or get things done with tools you use every day."});return r.jsxs(Pt,{testId:"modal-connectors-nux",isOpen:!0,noPadding:!0,onClose:c,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsxs("div",{className:"relative h-[213px]",children:[r.jsx(fn,{onClick:c,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("img",{src:PK,alt:e.formatMessage({id:"yNEeCK",defaultMessage:"Modal splash image"}),className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 py-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:d}),r.jsx("div",{className:"text-token-text-secondary",children:u}),r.jsxs("div",{className:"mt-5 flex justify-end gap-3",children:[r.jsx(he,{color:"secondary",onClick:c,children:r.jsx(P,{id:"S6nkY/",defaultMessage:"Not now"})}),r.jsx(he,{color:"primary",onClick:()=>l(),children:r.jsx(P,{id:"1pAV1c",defaultMessage:"Connect apps"})})]})]})]})},FK="/assets/business_free_trial_upsell_background-disf9zbl.webp",BK={src:FK},UK="/assets/no_auth_go_upsell_background-gp1k7btd.webp",uI={src:UK},VK="/assets/plus_free_trial_upsell_background-ct52ve11.webp",GK={src:VK};function Pl(t){const{data:e}=bl(),n=W6(e);_.useEffect(()=>{!e||n||Gs.warn("Unable to resolve current account for promo eligibility",{planType:t,currentAccountId:e.currentAccountId,availableAccountIds:e.accountItems.map(({id:o})=>o)})},[e,n,t]);const s=n==null?void 0:n.getEligiblePromoCampaignId(t);return t===Je.PLUS&&((n==null?void 0:n.planType)==null||n.planType!==Je.FREE)?{eligible:!1}:s?{eligible:!0,campaignId:s}:{eligible:!1}}function mI(){return Pl(Je.PLUS).eligible}function $K(){return Pl(Je.GO).eligible}function HK(){return Pl(Je.SELF_SERVE_BUSINESS).eligible}function WK(){return Pl(Je.PLUS)}function zK(){return Pl(Je.GO)}function qK(){return Pl(Je.SELF_SERVE_BUSINESS)}function lWe(){return Pl(Je.PLUS)}function YK(t){const e=_.useRef(t);return En(()=>{e.current=t}),e}function fI(t){const e=YK(t);_.useEffect(()=>{e.current()},[e])}const ZK=()=>{const{eligible:t,markAsViewed:e}=$e(Ye.hasSeenFreeTrialUpsellModal),{eligible:n,markAsViewed:s}=$e(Ye.hasSeenGoFreeTrialUpsellModal),o=G(),a=pt(o),i=mI(),l=$K(),c=HK(),d=t&&c&&a,u=n&&l&&!d&&a,m=t&&i&&!d&&!u&&a,f=_.useCallback(()=>{d&&U.logEventWithStatsig("Business Free Trial Upsell Modal Shown","chatgpt_business_free_trial_upsell_modal_shown"),u&&U.logEventWithStatsig("Go Free Trial Upsell Modal Shown","chatgpt_go_free_trial_upsell_modal_shown"),m&&U.logEventWithStatsig("Plus Free Trial Upsell Modal Shown","chatgpt_plus_free_trial_upsell_modal_shown")},[d,u,m]);return{isOpen:d||u||m,showBusiness:d,showGo:u,showPlus:m,onClose:()=>{d&&(U.logEventWithStatsig("Business Free Trial Upsell Modal Dismissed","chatgpt_business_free_trial_upsell_modal_dismissed"),e()),u&&(U.logEventWithStatsig("Go Free Trial Upsell Modal Dismissed","chatgpt_go_free_trial_upsell_modal_dismissed"),s()),m&&(U.logEventWithStatsig("Plus Free Trial Upsell Modal Dismissed","chatgpt_plus_free_trial_upsell_modal_dismissed"),e())},onMount:f}};function KK({onClose:t,onPrimaryClick:e,isButtonLoading:n,type:s}){let o,a,i,l;switch(s){case"business":o=BK.src,a=lw.subtitle,i=_t.tryBusiness,l=r.jsxs("p",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 text-center text-[34px] font-semibold text-white",children:[r.jsx("span",{className:"text-center font-semibold text-black",children:r.jsx(P,w({},_t.chatGPT))}),r.jsx("span",{className:"ms-2.5 text-center font-semibold text-[#5D5D5D]",children:r.jsx(P,w({},lw.imageText2))})]});break;case"go":o=uI.src,a=dw.subtitle,i=_t.tryGo,l=r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(P,w({},dw.imageText))});break;default:o=GK.src,a=cw.subtitle,i=_t.tryPlus,l=r.jsx("p",{className:"text-token-text-default-primary absolute start-1/2 top-1/2 w-full -translate-x-1/2 -translate-y-1/2 text-center text-[48px] font-semibold text-white",children:r.jsx(P,w({},cw.imageText))})}return r.jsxs(Pt,{testId:"modal-free-trial-upsell",isOpen:!0,onClose:t,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[r.jsxs("div",{className:"relative",children:[r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:o,loading:"eager",fetchPriority:"high"}),l]}),r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[r.jsx("p",{className:"text-token-text-secondary dark:text-gray-solid-300 mb-6 text-center",children:r.jsx(P,w({},a))}),r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[r.jsx(he,{size:"large",color:"secondary",onClick:t,className:"w-full focus-visible:outline-none md:w-auto",children:r.jsx(P,w({},_t.maybeLater))}),r.jsx(he,{size:"large",color:"primary",onClick:e,className:"w-full min-w-[130px] md:w-auto",children:n?r.jsx(Ws,{}):r.jsx(P,w({},i))})]})]})]})}const cWe=({onClose:t})=>{const{onMount:e,onClose:n,showGo:s,showPlus:o}=ZK(),a=at(),[i,l]=_.useState(!1);fI(e);function c(){l(!0),gn(a,"Plus Free Trial Upsell Modal",void 0,void 0,Hh),setTimeout(()=>{t(),n()},1e3)}function d(){l(!0),gn(a,"Go Free Trial Upsell Modal"),setTimeout(()=>{t(),n()},1e3)}function u(){l(!0),gn(a,"Business Free Trial Upsell Modal"),setTimeout(()=>{t(),n()},1e3)}let m,f;return o?(m="plus",f=c):s?(m="go",f=d):(m="business",f=u),r.jsx(KK,{onClose:()=>{t(),n()},onPrimaryClick:f,isButtonLoading:i,type:m})},lw=be({subtitle:{id:"BusinessFreeTrialUpsellModal.subtitle",defaultMessage:"Unlock a secure workspace with advanced models and connectors to internal sources to supercharge your work"},imageText2:{id:"BusinessFreeTrialUpsellModal.imageText2",defaultMessage:"Business"}}),cw=be({subtitle:{id:"FreeTrialUpsellModal.subtitle",defaultMessage:"Enjoy faster responses, more advanced reasoning, higher file upload limits, and expanded image generation  all free for the next 30 days."},imageText:{id:"FreeTrialUpsellModal.imageText",defaultMessage:"Try Plus, Free"}}),dw=be({subtitle:{id:"GoFreeTrialUpsellModal.subtitle",defaultMessage:"Enjoy faster responses, higher file upload limits, and expanded image generation with a Go plan  all free for the next 12 months."},imageText:{id:"GoFreeTrialUpsellModal.imageText",defaultMessage:"Try Go, Free"}}),QK=j(()=>I(()=>import("./kt3nk4bhi2101czn.js").then(t=>t._),__vite__mapDeps([26,1])),{loading:t=>L(t)}),JK=j(()=>I(()=>import("./d3y46a2mpr2sbz7s.js").then(t=>t._),__vite__mapDeps([27,1])),{loading:t=>L(t)}),XK="https://persistent.oaistatic.com/chatgpt/google-connectors-nux.jpg",dWe=()=>{const t=G(),e=xe(t,"2400167019"),{isLoading:n,eligible:s}=$e(Ye.hasSeenGoogleConnectorsNuxModal);return e?n?"loading":s?"show":"hide":"hide"};function uWe({onClose:t}){const{markAsViewed:e}=$e(Ye.hasSeenGoogleConnectorsNuxModal);_.useEffect(()=>{U.logEventWithStatsig("Google Connectors Nux Modal Shown","chatgpt_google_connectors_nux_modal_shown")},[]);const n=()=>{U.logEventWithStatsig("Google Connectors Nux Modal Dismissed","chatgpt_google_connectors_nux_modal_dismissed"),e(),t()},s=at(),o=(l,c,d)=>{U.logEventWithStatsig("Google Connectors Nux Modal Show Me Continued","chatgpt_google_connectors_nux_modal_continued",{target:d}),e(),t(),s({pathname:"/",search:"q=".concat(c)})},[a,i]=_.useState(!1);return r.jsxs(Pt,{testId:"modal-google-connectors-nux",isOpen:!0,noPadding:!0,onClose:n,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"flex max-w-[480px] flex-col",children:[r.jsx(fn,{onClick:n,className:"text-token-text-secondary absolute end-0 top-0 z-10 me-2 mt-2 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"}),r.jsx("div",{className:W("h-[224px] w-full transition-opacity duration-200",a?"opacity-100":"opacity-0"),children:r.jsx("img",{src:XK,draggable:!1,className:"object-cover object-center",alt:"",onLoad:()=>i(!0)})}),r.jsxs("div",{className:"flex flex-col p-8",children:[r.jsx("div",{className:"text-center text-[22px] font-medium",children:r.jsx(P,w({},Ur.title))}),r.jsx("div",{className:"text-token-text-secondary mt-2 text-center",children:r.jsx(P,B(w({},Ur.subtitle),{values:{link:l=>r.jsx("a",{href:Ur.subtitle.link,target:"_blank",rel:"noopener noreferrer",className:"underline",children:l},"learn-more-link")}}))}),r.jsxs("div",{className:"text-token-text-tertiary mt-6 flex items-center gap-2",children:[r.jsx("div",{className:"h-px flex-1 border-t"}),r.jsx(P,w({},Ur.tryItOut)),r.jsx("div",{className:"h-px flex-1 border-t"})]}),r.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[r.jsx(he,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,Ur.gmailPrompt.defaultMessage,"gmail"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(JK,{className:"icon-lg"}),r.jsx(P,w({},Ur.gmailPrompt))]})}),r.jsx(he,{type:"button",className:"w-fit px-4 py-2",color:"secondary",onClick:l=>o(l,Ur.gcalPrompt.defaultMessage,"googleCalendar"),children:r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.jsx(QK,{className:"icon-lg"}),r.jsx(P,w({},Ur.gcalPrompt))]})})]})]})]})}const Ur=be({title:{id:"xQB7J6",defaultMessage:"Gmail and Google Calendar, now in chat"},subtitle:{id:"bMcG4Z",defaultMessage:"ChatGPT can now reference your emails and calendar events in responses. <link>Learn more</link>",link:"https://help.openai.com/en/articles/11487775-connectors-in-chatgpt"},tryItOut:{id:"Wkoh8S",defaultMessage:"Try it out"},gmailPrompt:{id:"GoogleConnectorsNuxModal.gmailPrompt",defaultMessage:"Which emails should I reply to?"},gcalPrompt:{id:"GoogleConnectorsNuxModal.googleCalendarPrompt",defaultMessage:"Help me with tomorrow's calendar"}}),eQ=()=>{const t=_.useRef(pI()),{isUnauthenticated:e,isLoading:n}=Un(),s=lh(),o=pG(),a=!n&&e&&o&&!t.current&&!s,i=_.useCallback(()=>{a&&(tQ(),U.logEventWithStatsig("Meet ChatGPT Modal Shown","chatgpt_meet_chatgpt_modal_shown"))},[a]),l=()=>{U.logEventWithStatsig("Meet ChatGPT Modal Confirmation Button Clicked","chatgpt_meet_chatgpt_modal_confirmation_button_clicked")};return n?{onConfirmationButtonClick:l,onMount:i,state:"loading"}:a?{onConfirmationButtonClick:l,onMount:i,state:"show"}:{onConfirmationButtonClick:l,onMount:i,state:"hide"}};function pI(){return!!localStorage.getItem(Le.HasSeenMeetChatGptModal)}function tQ(){return localStorage.setItem(Le.HasSeenMeetChatGptModal,"true")}const mWe=({onClose:t})=>{const e=G(),{onConfirmationButtonClick:n,onMount:s,state:o}=eQ(),a=z6(e)?uw.trainingDisclaimer:uw.safetyAndAbuseDisclaimer;return _.useEffect(s,[s]),o!=="show"?null:r.jsx(Pt,{testId:"modal-meet-chatgpt",isOpen:!0,noPadding:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6 text-center",children:[r.jsx("div",{className:"-mt-5 -mb-4 self-center",children:r.jsx(q6,{})}),r.jsx("div",{className:"mb-2 text-2xl font-medium",children:r.jsx(P,{id:"fnY8gE",defaultMessage:"Meet ChatGPT"})}),r.jsx("div",{className:"text-token-text-secondary mb-6",children:r.jsx(P,{id:"OdX5ix",defaultMessage:"AI that can help with brainstorming, researching, planning, and more. Just ask."})}),r.jsx(he,{color:"primary",size:"large",className:"mb-4",onClick:()=>{n(),t()},children:r.jsx(P,w({},_t.gotItButtonText))}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(P,B(w({},a),{values:{learnMoreLink:i=>r.jsx("a",{className:"underline",href:"https://help.openai.com/en/articles/9737562",rel:"noreferrer",target:"_blank",children:i})}}))})]})})},uw=be({trainingDisclaimer:{id:"hebnC4",defaultMessage:"Chats may be reviewed and used to train our models. You can opt out in settings. <learnMoreLink>Learn more</learnMoreLink>"},safetyAndAbuseDisclaimer:{id:"KpKqVi",defaultMessage:"Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"}});function x2(){const{data:t}=th(n=>n==null?void 0:n.settings),e=t==null?void 0:t.amphora_locks;return typeof e=="object"&&e!=null?e:void 0}const nQ="disable_history",fWe="user_latency_tools",pWe="mfa",gWe="chatgpt_allow_workspace_instruction",hWe="chatgpt_allow_workspace_policy",_We="workspace_ip_allowlist";var Rs=(t=>(t.BrowsingAvailable="browsing_available",t.Sunshine="sunshine_available",t.WorkspaceGPTCustomActions="workspace_gpt_custom_actions",t.WorkspaceShareLinks="workspace_share_links",t.GizmoSupportEmails="gizmo_support_emails",t.D3Editor="d3_editor",t.D3EditorAllGpts="d3_editor_gpts",t.DataAnalysisV2="graphite",t.ChartSerialization="chart_serialization",t.SearchTool="search_tool",t.SearchToolHoldout="search_tool_holdout",t.MemoryInSearch="memory_in_search",t.Canvas="canvas",t.CanvasCodeExecution="canvas_code_execution",t.CanvasCodeNetworkAccess="canvas_code_network_access",t.DisableWritingBlockRendering="disable_writing_block_rendering",t.GizmoCanvasToggle="gizmo_canvas_toggle",t.Moonshine="moonshine",t.VideoScreenSharing="video_screen_sharing",t.DeepResearch="caterpillar",t.AllowVoiceUse="breeze_available",t.ImageGenToggle="image_gen_toggle",t.EditInCanvas="edit_in_canvas",t.MagicEditEnabled="magic_edit_enabled",t))(Rs||{});const sQ=In(t=>It(()=>{var e,n;return(n=(e=ib(t))==null?void 0:e.includes(Rs.Sunshine))!=null?n:!1}));function Bm(){"use forget";const t=H.c(2),e=G();let n;return t[0]!==e?(n=()=>sQ(e),t[0]=e,t[1]=n):n=t[1],ue(n)}function ki(){"use forget";const{data:t}=wo(en.Sunshine),e=Bm();return!!t&&e}function gI(t){return xe(t,"507055138")}function hI(){"use forget";const t=H.c(4),e=G();let n;t[0]!==e?(n=gI(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o;return t[2]!==e?(o=xe(e,"1946731762"),t[2]=e,t[3]=o):o=t[3],s&&o}function oQ(){"use forget";const t=hI(),{data:e}=wo(en.GoldenHour);return!!e&&t}const aQ=In(t=>It(()=>{var e,n;return(n=(e=ib(t))==null?void 0:e.includes(Rs.Moonshine))!=null?n:!1}));function Yh(){"use forget";const t=H.c(2),e=G();let n;return t[0]!==e?(n=()=>aQ(e),t[0]=e,t[1]=n):n=t[1],ue(n)}function xWe(){"use forget";const t=Yh(),{data:e}=wo(en.Moonshine);return t&&!!e}const rQ=In(t=>It(()=>{var e,n;return(n=(e=ib(t))==null?void 0:e.includes(Rs.MemoryInSearch))!=null?n:!1}));function iQ(){"use forget";const t=H.c(2),e=G();let n;return t[0]!==e?(n=()=>rQ(e),t[0]=e,t[1]=n):n=t[1],ue(n)}function yWe(){"use forget";const t=ki(),{data:e}=wo(en.MemoryInSearch),n=iQ();return t&&!!e&&n}function vWe(){"use forget";var a;const t=H.c(2),e=G();let n;t[0]!==e?(n=(a=xe(e,"645560164"))!=null?a:!1,t[0]=e,t[1]=n):n=t[1];const s=n;return ki()&&s}const bWe=t=>xe(t,"667937038");function lQ(t){var e;return(e=xe(t,"1611573287"))!=null?e:!1}function Zh(){"use forget";const t=H.c(2),e=G(),n=ki();let s;return t[0]!==e?(s=lQ(e),t[0]=e,t[1]=s):s=t[1],n&&s}const cQ="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",dQ="https://persistent.oaistatic.com/moonshine/moonshine_nux_light.jpeg",uQ="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47";function SWe(){const[t,e]=_.useState("loading"),n=vn(un),s=Yh(),{eligible:o,isLoading:a}=$e(Ye.hasSeenMoonshineNuxV2);return _.useEffect(()=>{if(n){t!=="hide"&&e("hide");return}t==="loading"&&!a&&e(!s||!o?"hide":"show")},[t,a,s,o,n]),t}function CWe({onClose:t}){const{markAsViewed:e}=$e(Ye.hasSeenMoonshineNuxV2),s=Zo()?dQ:cQ,[o,a]=_.useState(!1);_.useEffect(()=>{o||(e(),a(!0),U.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Shown","chatgpt_moonshine_nux_v2_modal_shown"),Ee.count(Ae.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_shown"))},[e,o]);const[i,l]=_.useState(!1);_.useEffect(()=>{const N=new Image;N.src=s,N.onload=()=>l(!0)},[s]);const[c,d]=_.useState(!1),[u,m]=_.useState(!1);_.useEffect(()=>{if(!i)return;const N=setTimeout(()=>{d(!0)},200),R=setTimeout(()=>{m(!0)},300);return()=>{clearTimeout(N),clearTimeout(R)}},[i]);const f=()=>{window.open(uQ,"_blank","noopener noreferrer"),U.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Learn More Clicked","chatgpt_moonshine_nux_v2_modal_learn_more_clicked"),Ee.count(Ae.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_learn_more_clicked")},p=at(),g=G(),h=xe(g,"1542198993"),x=gd(),y=x2(),[b,v]=_.useState(!1),S=ds(g,"3934129380"),C=mQ.describeMePrompt.defaultMessage,k=S.get("model","gpt-4o"),M=ut(g),T=M==null?void 0:M.hasPlusFeatures(),E=()=>{b||(v(!0),t(),p({pathname:"/",search:"?q=".concat(C,"&model=").concat(k,"&skip_instant_query=1&hints=").concat(Ie.Moonshine)}),U.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Show Me Clicked","chatgpt_moonshine_nux_v2_modal_show_me_clicked"),Ee.count(Ae.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_show_me_clicked"))},A=()=>{x.mutate({setting:en.Moonshine,value:!0},{onSettled:()=>{t()}}),U.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Enable Clicked","chatgpt_moonshine_nux_v2_modal_enable_clicked"),Ee.count(Ae.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_enable_clicked")};return i?r.jsxs(Pt,{testId:"modal-moonshine-nux-v2",isOpen:!0,noPadding:!0,onClose:()=>{t(),U.logEventWithStatsig("ChatGPT Moonshine Nux V2 Modal Closed","chatgpt_moonshine_nux_v2_modal_closed"),Ee.count(Ae.MOONSHINE,"chatgpt_moonshine_nux_v2_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(fn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(c?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(P,{id:"MoonshineNuxV2Modal.firstBubble",defaultMessage:"Hey ChatGPT!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(u?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(P,{id:"MoonshineNuxV2Modal.secondBubble",defaultMessage:"Describe me based on our chats"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(P,{id:"MoonshineNuxV2Modal.title",defaultMessage:"Introducing new, improved memory"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:h?T?r.jsx(P,{id:"MoonshineNuxV2Modal.subtitleDefaultOff",defaultMessage:"ChatGPT can now remember more of your past chats to better personalize its responses. Want to change what it knows about you? Just ask."}):r.jsx(P,{id:"MoonshineNuxV2Modal.subtitleDefaultOff.freeMoonshine",defaultMessage:"ChatGPT can now remember your recent chats to better personalize its responses. Want to change what it knows about you? Just ask."}):T?r.jsx(P,{id:"MoonshineNuxV2Modal.subtitle",defaultMessage:"ChatGPT can now remember more of your past chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."}):r.jsx(P,{id:"MoonshineNuxV2Modal.subtitle.freeMoonshine",defaultMessage:"ChatGPT now remembers your recent chats, so you won't need to repeat yourself as often. Want to change what it knows about you? Just ask."})}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-between",children:[r.jsx(he,{color:"secondary",onClick:f,children:r.jsx(P,{id:"MoonshineNuxV2Modal.learnMoreButton",defaultMessage:"Learn more"})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(he,{color:"secondary",onClick:t,children:r.jsx(P,{id:"MoonshineNuxV2Modal.notNowButton",defaultMessage:"Not now"})}),h?r.jsx(he,{color:"secondary",onClick:A,disabled:(y==null?void 0:y[en.Moonshine])===!0,children:r.jsx(P,{id:"MoonshineNuxV2Modal.enableButton",defaultMessage:"Enable"})}):r.jsx(he,{color:"primary",onClick:E,children:r.jsx(P,{id:"MoonshineNuxV2Modal.showMeButton",defaultMessage:"Show me"})})]})]})]})]}):null}const mQ=be({describeMePrompt:{id:"MoonshineNuxV2Modal.describeMePrompt",defaultMessage:"Describe me based on all our chats  make it catchy!"}});function Nl(t){return Ve(t,"3637408529").get("is_login_primary_button",!1)}const fQ=t=>Ve(t,"1346366956").get("signup_cta_copy","SIGN_UP"),pQ=t=>Ve(t,"1803944755").get("login_or_signup_cta_copy","LOGIN_OR_SIGNUP"),wWe=()=>{const t=G();switch(pQ(t)){case"LOGIN_OR_SIGNUP":return mw.loginOrSignup;case"SIGNIN":return mw.signin}},Nd=t=>{const e=G();switch(fQ(e)){case"SIGN_UP":return t;case"SIGN_UP_FOR_FREE":return Sc.signUpForFreeCta;case"CREATE_ACCOUNT":return Sc.createAccountCta;case"CREATE_NEW_ACCOUNT":return Sc.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return Sc.createFreeAccountCta}},mw=be({loginOrSignup:{id:"loginOrSignupCta.loginOrSignup",defaultMessage:"Log in or sign up"},signin:{id:"loginOrSignupCta.signin",defaultMessage:"Sign in"}}),Sc=be({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}});var M_,fw;function gQ(){if(fw)return M_;fw=1;var t=Y6(),e=lb(),n="[object Boolean]";function s(o){return o===!0||o===!1||e(o)&&t(o)==n}return M_=s,M_}var hQ=gQ();const Kh=Wn(hQ),_Q="https://persistent.oaistatic.com/image-gen/nux.222e584e.mp4",_I=()=>ja(Le.HasSeenNoAuthImagegenNux,!1,Kh),kWe=()=>{const{isUnauthenticated:t}=Un(),e=lh(),[n]=_I(),s=Z6(),o=G(),a=Ve(o,"2118136551");return!t||e||n||s?"hide":a.get("should_show_imagegen_nux",!1)?"show":"hide"},MWe=({onClose:t})=>{const n=kl()?"center":"bottom",s=G(),[o,a]=_.useState(!1),i=ds(s,"2604379743").value,l=typeof i.nux_video_url=="string"?i.nux_video_url:_Q,c=typeof i.nux_image_url=="string"?i.nux_image_url:"",[,d]=_I(),u=()=>{d(!0),mt.setItem(Le.HasSeenNoAuthImagegenNux,!0)},m=Nl(s),p=Ve(s,"2118136551").get("sign_up_button_has_the_word_free",!0),g=Nd(p?Sc.signUpForFreeCta:_t.signUpButtonText),h=r.jsx(he,{as:"button",size:"large",color:m?"secondary":"primary",onClick:()=>{u(),Kt(s,{fallbackScreenHint:"signup",callback:b=>{U.logSignUpButtonClicked({provider:b,location:"No Auth Imagegen Nux Modal"},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},fullWidth:!0,children:r.jsx(P,w({},g))}),x=r.jsx(he,{as:"button",size:"large",color:m?"primary":"secondary",fullWidth:!0,onClick:()=>{u(),Kt(s,{fallbackScreenHint:"login",callback:b=>{U.logLogInButtonClicked({provider:b,location:"No Auth Imagegen Nux Modal"},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_IMAGEGEN_NUX_MODAL)},skipLoginModal:!1})},children:r.jsx(P,w({},_t.logInButtonText))}),y=()=>{t(),u(),U.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_dismissed","chatgpt_no_auth_imagegen_nux_modal_dismissed")};return _.useEffect(()=>{U.logEventWithStatsig("chatgpt_no_auth_imagegen_nux_modal_shown","chatgpt_no_auth_imagegen_nux_modal_shown")},[]),r.jsxs(Pt,{testId:"modal-no-auth-imagegen-nux",isOpen:!0,noPadding:!0,onClose:y,showCloseButton:!1,size:"custom",type:"success",className:"max-w-lg",position:n,children:[r.jsxs("div",{className:"relative aspect-3/2 w-full",children:[!o&&r.jsx("img",{src:c,alt:"",className:"absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),r.jsx("video",{src:l,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"h-full w-full object-cover object-bottom",onLoadedData:()=>a(!0)}),r.jsx("div",{className:"absolute end-4 top-4",children:r.jsx(fn,{onClick:y})})]}),r.jsxs("div",{className:"flex flex-col gap-2 px-8 pt-6 pb-8 text-center",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(P,{id:"OxVK72",defaultMessage:"Bring your ideas to life with images"})}),r.jsx("div",{className:"text-token-text-secondary w-full",children:r.jsx(P,{id:"bVWvdX",defaultMessage:"Create a free account to make illustrations, charts, comics, and more."})}),r.jsx("div",{className:"mt-4 mb-2 flex w-full flex-col gap-3",children:m?[x,h]:[h,x]}),r.jsx(he,{color:"ghost",className:"text-token-text-secondary font-semibold underline hover:bg-transparent",onClick:y,children:r.jsx(P,w({},_t.stayLoggedOut))})]})]})},xQ=()=>{"use forget";const t=H.c(11),[e,n]=ja(Le.NoAuthGoUpsellModalDismissed,!1,Kh),[s]=zs(),o=s.get(gG.NoAuthPlan);let a;e:switch(o){case vf.Business:{a="Business";break e}case vf.Go:{a="Go";break e}case vf.Plus:{a="Plus";break e}case vf.Pro:{a="Pro";break e}default:a=""}const i=a,l=G();let c;t[0]!==l?(c=pt(l),t[0]=l,t[1]=c):c=t[1];const u=!!(!e&&!c&&i);let m;t[2]!==u?(m=()=>{u&&U.logEventWithStatsig("No Auth Plan Upsell Modal Shown","chatgpt_no_auth_plan_upsell_shown")},t[2]=u,t[3]=m):m=t[3];const f=m;let p;t[4]!==n?(p=()=>{U.logEventWithStatsig("No Auth Plan Upsell Modal Dismissed","chatgpt_no_auth_plan_upsell_dismissed"),n(!0),mt.setItem(Le.NoAuthGoUpsellModalDismissed,!0)},t[4]=n,t[5]=p):p=t[5];const g=p;let h;return t[6]!==u||t[7]!==g||t[8]!==f||t[9]!==i?(h={isOpen:u,onClose:g,onMount:f,planType:i},t[6]=u,t[7]=g,t[8]=f,t[9]=i,t[10]=h):h=t[10],h},TWe=t=>{"use forget";const e=H.c(30),{onClose:n}=t,s=G(),{onMount:o,onClose:a,planType:i}=xQ(),[l,c]=_.useState(!1);let d;e[0]!==s?(d=Nl(s),e[0]=s,e[1]=d):d=e[1];const u=d;fI(o);let m;e[2]!==s||e[3]!==u?(m=function(){c(!0),Kt(s,{fallbackScreenHint:u?"login":"signup",callbackUrl:"/#pricing",callback:E=>{u?U.logLogInButtonClicked({location:"No Auth Plan Upsell Modal",provider:E},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL):U.logSignUpButtonClicked({location:"No Auth Plan Upsell Modal",provider:E},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PLAN_UPSELL_MODAL),mt.setItem(Le.NoAuthGoUpsellModalDismissed,!0),c(!1)},skipLoginModal:!1})},e[2]=s,e[3]=u,e[4]=m):m=e[4];const f=m;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("img",{className:"h-[220px] w-full overflow-hidden object-cover",alt:"","aria-hidden":"true",src:uI.src,loading:"eager",fetchPriority:"high"}),e[5]=p):p=e[5];let g;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx("h2",{className:"mb-1 text-center text-xl font-semibold",children:r.jsx(P,w({},T_.title))}),e[6]=g):g=e[6];let h;e[7]!==i?(h=r.jsx("p",{className:"text-token-text-default-secondary text-gray-solid-500 mb-6 text-center",children:r.jsx(P,B(w({},T_.subtitle),{values:{planType:i}}))}),e[7]=i,e[8]=h):h=e[8];let x;e[9]!==n||e[10]!==a?(x=()=>{n(),a()},e[9]=n,e[10]=a,e[11]=x):x=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(P,w({},_t.maybeLater)),e[12]=y):y=e[12];let b;e[13]!==x?(b=r.jsx(he,{size:"large",color:"secondary",onClick:x,className:"w-full md:w-auto",children:y}),e[13]=x,e[14]=b):b=e[14];let v;e[15]!==l||e[16]!==i?(v=l?r.jsx(Ws,{}):r.jsx(P,B(w({},T_.primaryButton),{values:{planType:i}})),e[15]=l,e[16]=i,e[17]=v):v=e[17];let S;e[18]!==f||e[19]!==v?(S=r.jsx(he,{size:"large",color:"primary",onClick:f,className:"w-full min-w-[130px] md:w-auto",children:v}),e[18]=f,e[19]=v,e[20]=S):S=e[20];let C;e[21]!==S||e[22]!==b?(C=r.jsxs("div",{className:"flex w-full flex-col-reverse gap-3 md:flex-row md:justify-center",children:[b,S]}),e[21]=S,e[22]=b,e[23]=C):C=e[23];let k;e[24]!==C||e[25]!==h?(k=r.jsxs("div",{className:"flex flex-col items-center justify-center self-center px-6 py-6 md:w-[464px] md:py-8",children:[g,h,C]}),e[24]=C,e[25]=h,e[26]=k):k=e[26];let M;return e[27]!==n||e[28]!==k?(M=r.jsxs(Pt,{testId:"modal-no-auth-go-upsell",isOpen:!0,onClose:n,type:"success",noPadding:!0,position:"center",size:"large",contentClassName:"flex flex-col",children:[p,k]}),e[27]=n,e[28]=k,e[29]=M):M=e[29],M},T_=be({title:{id:"NoAuthGoUpsellModal.title",defaultMessage:"Unlock more of ChatGPT"},subtitle:{id:"NoAuthGoUpsellModal.subtitle",defaultMessage:"Upgrade to ChatGPT {planType} for extra messaging, uploads, and memory to keep your conversations going"},primaryButton:{id:"NoAuthGoUpsellModal.primaryButton",defaultMessage:"Upgrade to {planType}"}});function xI(){const[t]=zs();return t.get("promoCode")}const EWe=({onClose:t})=>{const e=G(),n=kl(),s=Nd(_t.signUpButtonText),o=n?"center":"bottom",a=xI();if(_.useEffect(()=>{a?U.logEventWithStatsig("No Auth Promo Redemption Modal Shown","chatgpt_no_auth_promo_redemption_modal_shown",{promoCode:a}):console.warn("Mounted NoAuthPromoRedemptionModal without a valid promo code")},[a]),!a)return null;const i="/p/".concat(a);return r.jsx(Pt,{testId:"modal-no-auth-promo-redemption",isOpen:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:o,children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[r.jsx("p",{className:"mb-6 text-center text-2xl font-semibold",children:r.jsx(P,w({},pw.title))}),r.jsx(he,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3",onClick:()=>{Kt(e,{fallbackScreenHint:"login",callback:l=>{U.logLogInButtonClicked({provider:l,location:"No Auth Promo Redemption Modal"},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)},callbackUrl:i,skipLoginModal:!1})},children:r.jsx(P,w({},_t.logInButtonText))}),r.jsx(he,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{Kt(e,{fallbackScreenHint:"signup",callback:l=>{U.logSignUpButtonClicked({provider:l,location:"No Auth Promo Redemption Modal"},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PROMO_REDEMPTION_MODAL)},callbackUrl:i,skipLoginModal:!1})},children:r.jsx(P,w({},s))}),r.jsx("a",{href:"#",className:"text-token-text-secondary cursor-pointer font-semibold underline sm:text-sm",onClick:l=>{l.preventDefault(),U.logEventWithStatsig("No Auth Promo Redemption Modal Dismissed","chatgpt_no_auth_promo_redemption_modal_dismissed",{promoCode:a}),t()},children:r.jsx(P,w({},pw.stayLoggedOutLink))})]})})},pw=be({title:{id:"NoAuthPromoRedemptionModal.title",defaultMessage:"Log in or sign up to redeem your promotion"},stayLoggedOutLink:{id:"NoAuthPromoRedemptionModal.stayLoggedOut",defaultMessage:"Stay logged out"}});function AWe(){const{isUnauthenticated:t,isLoading:e}=Un(),n=xI(),s=G();return hG(()=>K6(s))?{isOpen:!1,isLoading:e}:{isOpen:n!=null&&t,isLoading:e}}const IWe=j(()=>I(()=>import("./i5yf1gdrsw413d7n.js"),__vite__mapDeps([28,1,29,30,31,32,33,34,35,36,37])).then(t=>t.NoAuthWelcomeBackModal)),yQ=({dismissLink:t,onLogInButtonClick:e,onSignUpButtonClick:n,subtitle:s,title:o})=>{const a=G(),l=kl()?"center":"bottom",c=Nl(a),u=Ve(a,"2118136551").get("sign_up_button_has_the_word_free",!0),m=Nd(u?Sc.signUpForFreeCta:gw.signUpCta),f=r.jsx(he,{as:"button",size:"large",color:c?"secondary":"primary",onClick:n,fullWidth:!0,children:r.jsx(P,w({},m))}),p=r.jsx(he,{as:"button",size:"large",color:c?"primary":"secondary",fullWidth:!0,onClick:e,children:r.jsx(P,w({},gw.logInCta))}),g=c?[p,f]:[f,p];return r.jsx(Pt,{testId:"modal-no-auth-rate-limit",isOpen:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:l,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:px-10 sm:pt-12 sm:pb-10",children:[r.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:r.jsx(P,w({},o))}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(P,w({},s))}),r.jsx("div",{className:"flex w-full flex-col gap-2 sm:gap-2.5",children:g}),t?r.jsx("a",{href:"#",className:"text-token-text-secondary mt-5 cursor-pointer text-sm font-semibold underline",onClick:h=>{h.preventDefault(),t.onClick()},children:r.jsx(P,w({},t.text))}):null]})})},gw=be({signUpCta:{id:"NoAuthModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthModal.logInCta",defaultMessage:"Log in"}}),yI={[Vo.LoggedIn]:Le.LoggedInUserMessageCount,[Vo.LoggedOut]:Le.NoAuthUserMessageCount},Qh=Nt(Cn(()=>({messageCountByAuthStatus:{[Vo.LoggedIn]:hw(Vo.LoggedIn),[Vo.LoggedOut]:hw(Vo.LoggedOut)}})));function vI(t){return t.messageCountByAuthStatus[Vo.LoggedOut]}function vQ(t){return t.messageCountByAuthStatus[Vo.LoggedIn]}const bQ={incrementUserMessageCount:t=>{Qh.setState(e=>{const n=e.messageCountByAuthStatus[t]+1;e.messageCountByAuthStatus[t]=n,SQ({authStatus:t,messageCount:n})})}};function hw(t){const e=localStorage.getItem(yI[t]);return e?Number(e):0}function SQ({authStatus:t,messageCount:e}){localStorage.setItem(yI[t],String(e))}const CQ=10,wQ=({type:t="default"}={})=>{const e=G(),s=Ve(e,"3637408529").get("no_auth_soft_rate_limit",CQ),[o,a]=_.useState(()=>sessionStorage.getItem(Le.NoAuthHasDismissedSoftRateLimitModal)!=null),{isUnauthenticated:i,isLoading:l}=Un(),c=lh(),d=Qh(vI),u=_.useRef(d),m=d>=s,[f,p]=_.useState(!1);_.useEffect(()=>{u.current<d&&(u.current=d,d===s&&p(!0))},[d,s]);const g=vm(),h=i&&m&&(t==="default"||f)&&!o&&!c&&!g&&!l,x=_.useCallback(()=>{h&&(U.logEvent("No Auth Soft Rate Limit Modal Shown"),We.logEvent("chatgpt_no_auth_soft_rate_limit_modal_shown"))},[h]),y=()=>{a(!0),sessionStorage.setItem(Le.NoAuthHasDismissedSoftRateLimitModal,"true")};return l?{isLoading:!0,isOpen:null,onClose:null,onMount:null}:{isLoading:!1,isOpen:h,onClose:y,onMount:x}},jWe=({onClose:t})=>{const e=G(),n=Nl(e),{isOpen:s,onClose:o,onMount:a}=wQ();return _.useEffect(()=>{a==null||a()},[a]),s?r.jsx(yQ,{dismissLink:{text:Mf.stayLoggedOutLink,onClick:()=>{U.logEvent("No Auth Soft Rate Limit Modal Stay Logged out Link Clicked"),We.logEvent("chatgpt_no_auth_soft_rate_limit_modal_stay_logged_out_link_clicked"),t(),o()}},onLogInButtonClick:()=>{Kt(e,{fallbackScreenHint:"login",callback:i=>{U.logLogInButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},onSignUpButtonClick:()=>{Kt(e,{fallbackScreenHint:"signup",callback:i=>{U.logSignUpButtonClicked({provider:i,location:"No Auth Soft Rate Limit Modal"},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_SOFT_RATE_LIMIT_MODAL)},skipLoginModal:!1})},subtitle:n?Mf.logInSubtitle:Mf.signUpSubtitle,title:Mf.title}):null},Mf=be({title:{id:"NoAuthSoftRateLimitModal.title",defaultMessage:"Thanks for trying ChatGPT"},signUpSubtitle:{id:"zpngdW",defaultMessage:"Sign up or log in to get smarter responses, upload files and images, and more."},logInSubtitle:{id:"iVew+I",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),kQ=3600*24*30*12;function MQ(){var l;const{isLoading:t,data:e}=lt(D6),n=_.useRef(TQ()),s=(l=e==null?void 0:e.email)!=null?l:null,o=_.useCallback(()=>{n.current&&e?U.logEventWithStatsig("Punch Out Anon To Authed Modal Shown","chatgpt_punch_out_anon_to_authed_modal_shown"):console.warn("PunchOutAnonToAuthedModal is being mounted without a user and a token")},[e]),a=c=>{U.logEventWithStatsig("Punch Out Anon To Authed Modal Continue Button Clicked","chatgpt_punch_out_anon_to_authed_modal_continue_button_clicked"),_w(),EQ(),window.location.href="/continue_from_api?token=".concat(c)},i=()=>{_w(),U.logEventWithStatsig("Punch Out Anon To Authed Modal Cancel Button Clicked","chatgpt_punch_out_anon_to_authed_modal_cancel_button_clicked")};return t?{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"loading",token:null}:n.current&&s?{email:s,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"show",token:n.current}:{email:null,onCancelButtonClick:i,onContinueButtonClick:a,onMount:o,state:"hide",token:null}}function TQ(){var t;return(t=Qn.getCookie(Jn.PunchOutRequireAnonToAuthedToken))!=null?t:null}function _w(){return Qn.deleteCookie(Jn.PunchOutRequireAnonToAuthedToken)}function EQ(){Qn.setCookie(Jn.PunchOutAnonToAuthedEnabled,"true",{maxAge:kQ})}const PWe=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:n,onMount:s,token:o,email:a,state:i}=MQ(),c=Yo()?"medium":"large";return _.useEffect(s,[s]),i!=="show"?null:r.jsx(Pt,{testId:"modal-punch-out-anon-to-authed",isOpen:!0,noPadding:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-2 text-center text-xl font-medium md:text-start",children:r.jsx(P,{id:"qAel0I",defaultMessage:"Always open in ChatGPT?"})}),r.jsx("div",{className:"text-token-text-secondary mb-6 text-center md:text-start",children:r.jsx(P,{id:"9Pb+Og",defaultMessage:"Chats you open from Siri will be saved in your account <emailContainer>({email})</emailContainer>.",values:{emailContainer:d=>r.jsx("span",{className:"font-medium",children:d}),email:a}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(he,{color:"primary",size:c,onClick:()=>n(o),children:r.jsx(P,w({},_t.continueButtonText))}),r.jsx(he,{color:"secondary",size:c,onClick:()=>{e(),t()},children:r.jsx(P,w({},_t.cancelButtonText))})]})]})})};function NWe(t){return Ve(t,"3233347819").get("has_content_improvements",!1)}function Ja(t){return Ve(t,"3233347819").get("is_login_modal_phase2_enabled",!1)&&!hd()}function AQ(){const t=_.useRef(IQ()),e=G(),n=_.useCallback(()=>{t.current?U.logEventWithStatsig("No Auth Punch Out Sign In As Modal Shown","chatgpt_no_auth_punch_out_sign_in_as_modal_shown"):console.warn("PunchOutSignInAsModal is being mounted without punchOutRequireLoginInfo")},[]);return{onCancelButtonClick:()=>{U.logEventWithStatsig("No Auth Punch Out Sign In As Modal Cancel Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_cancel_button_clicked"),wy()},onContinueButtonClick:({token:a})=>{U.logEventWithStatsig("No Auth Punch Out Sign In As Modal Continue Button Clicked","chatgpt_no_auth_punch_out_sign_in_as_modal_continue_button_clicked"),wy(),Kt(e,{fallbackScreenHint:"login",callback:i=>{U.logLogInButtonClicked({location:"No Auth Punch Out Sign In As Modal",provider:i},Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_PUNCH_OUT_SIGN_IN_AS_MODAL)},callbackUrl:"/continue_from_api?token=".concat(a),skipLoginModal:!Ja(e)})},onMount:n,punchOutRequireLoginInfo:t.current}}function IQ(){if(typeof window>"u")return null;const t=Qn.getCookie(Jn.PunchOutRequireLoginInfo);if(!t)return null;try{const e=JSON.parse(t);return _G(e,xG),e}catch(e){wy(),e instanceof yG?console.warn("Invalid struct for punch out require login info",e):Oe.addError("Failed to parse punch out require login info",{error:e})}return null}function wy(){Qn.deleteCookie(Jn.PunchOutRequireLoginInfo)}const RWe=({onClose:t})=>{const{onCancelButtonClick:e,onContinueButtonClick:n,onMount:s,punchOutRequireLoginInfo:o}=AQ(),i=Yo()?"medium":"large";if(_.useEffect(s,[s]),!o)return null;const{email:l}=o;return r.jsx(Pt,{testId:"modal-punch-out-sign-in-as",isOpen:!0,noPadding:!0,onClose:rs,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:r.jsxs("div",{className:"flex flex-col p-6",children:[r.jsx("div",{className:"mb-6 text-center text-xl font-medium md:text-start",children:r.jsx(P,{id:"0e8g2r",defaultMessage:"Sign in as {email}?",values:{email:l}})}),r.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[r.jsx(he,{color:"primary",size:i,onClick:()=>n(o),children:r.jsx(P,w({},_t.continueButtonText))}),r.jsx(he,{color:"secondary",size:i,onClick:()=>{e(),t()},children:r.jsx(P,w({},_t.cancelButtonText))})]})]})})};var ke=(t=>(t.Starter="starter",t.Reply="reply",t.Capabilities="capabilities",t.Autocomplete="autocomplete",t.Trending="trending",t.Templated="templated",t))(ke||{}),et=(t=>(t.Search="Search",t.Canvas="Canvas",t.Image="Image",t.ContextualAnswers="ContextualAnswers",t.ContextualAnswersNUX="ContextualAnswersNUX",t.ChatGPTTrending="ChatGPTTrending",t.ImageGenTrending="ImageGenTrending",t.Slurm="Slurm",t.Tatertot="Tatertot",t.Glaux="Glaux",t.TemplatedPrompts="TemplatedPrompts",t))(et||{});const Do=be({searchPlaceholder:{id:"PromptTextarea.searchPlaceholder",defaultMessage:"Search the web"},internalSearchPlaceholder:{id:"PromptTextarea.internalSearchPlaceholder",defaultMessage:"Ask anything about {workspaceName}..."},thinkPlaceholder:{id:"PromptTextarea.thinkPlaceholder",defaultMessage:"Ask anything"},connectorPlaceholder:{id:"PromptTextarea.connectorPlaceholder",defaultMessage:"Search connected sources"},apiToolPlaceholder:{id:"PromptTextarea.apiToolPlaceholder",defaultMessage:"Use tools"},researchPlaceholder:{id:"PromptTextarea.researchPlaceholder",defaultMessage:"Get a detailed report"},canvasPlaceholder:{id:"PromptTextarea.canvasPlaceholder",defaultMessage:"Write or code"},picturePlaceholder:{id:"PromptTextarea.picturePlaceholder",defaultMessage:"Describe an image"},pictureV2Placeholder:{id:"PromptTextarea.pictureV2Placeholder",defaultMessage:"Describe an image"},tatertotPlaceholder:{id:"PromptTextarea.studyAndLearnPlaceholder",defaultMessage:"Learn something new"},continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasnt approved this GPT."},pimBlockPlaceholder:{id:"PromptTextarea.pimBlockPlaceholder",defaultMessage:"Potentially Malicious Content Detected"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},placeholderAskAnythingVariant:{id:"PromptTextarea.placeholderAskAnythingVariant",defaultMessage:"Ask anything"},placeholderAskNameAnythingVariant:{id:"PromptTextarea.placeholderAskNameAnythingVariant",defaultMessage:"Ask {name} anything"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},readOnlyConversationPlaceholder:{id:"PromptTextarea.readOnlyConversationPlaceholder",defaultMessage:"This conversation is read-only."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."},n7jupdSystemHintPlaceholder:{id:"3pa1zs",defaultMessage:"Describe a task"},n7jupdActivePlaceholder:{id:"0qUILF",defaultMessage:"Follow up"},addDetailsActivePlaceholder:{id:"d5okKH",defaultMessage:"Add details"}});function Jh(t){"use forget";var f;const e=H.c(7),{lightLogoUrl:n,darkLogoUrl:s,enabled:o}=t,a=o===void 0?!0:o,l=(f=Zo()?s!=null?s:n:n!=null?n:s)!=null?f:null;let c,d;e[0]!==l?(c=["connector-logo",l],d=()=>jQ(l),e[0]=l,e[1]=c,e[2]=d):(c=e[1],d=e[2]);const u=a&&!!l;let m;return e[3]!==c||e[4]!==d||e[5]!==u?(m={queryKey:c,queryFn:d,enabled:u},e[3]=c,e[4]=d,e[5]=u,e[6]=m):m=e[6],lt(m)}async function jQ(t){var e;if(t!=null&&t.startsWith("connectors://")){const n=new URL(t),s=n.hostname,o=(e=n.searchParams.get("theme"))!=null?e:"light",a=await pe.safeGet("/aip/connectors/{connector_id}/logo",{parameters:{path:{connector_id:s},query:{theme:o}},skipJsonTransform:!0});if(!a.ok)throw new Error("Failed to get connector logo: ".concat(await a.text()));const i=await a.blob();return{url:URL.createObjectURL(i),text:await i.text()}}return{url:t}}const PQ=j(()=>I(()=>import("./nrby27vmpob112wj.js").then(t=>t._),__vite__mapDeps([38,1])),{loading:t=>L(t)}),NQ=j(()=>I(()=>import("./iv5du6yfmw73d3gx.js").then(t=>t._),__vite__mapDeps([39,1])),{loading:t=>L(t)}),RQ=j(()=>I(()=>import("./pdp94tw1ktf1pj0a.js").then(t=>t._),__vite__mapDeps([40,1])),{loading:t=>L(t)}),LQ=j(()=>I(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([41,1])),{loading:t=>L(t)}),OQ=j(()=>I(()=>Promise.resolve().then(()=>$l),void 0),{loading:t=>L(t)}),DQ=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),bI=j(()=>I(()=>Promise.resolve().then(()=>hf),void 0),{loading:t=>L(t)}),FQ=j(()=>I(()=>Promise.resolve().then(()=>H1),void 0),{loading:t=>L(t)}),BQ=j(()=>I(()=>import("./hso6u8eab07t04qb.js").then(t=>t._),__vite__mapDeps([42,1])),{loading:t=>L(t)}),il=t=>{"use forget";var h,x,y,b,v;const e=H.c(29);let n,s,o;e[0]!==t?(h=t,{hint:n,isNextToLabel:s}=h,o=Me(h,["hint","isNextToLabel"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o):(n=e[1],s=e[2],o=e[3]);let a;e[4]!==n?(a=UQ(n),e[4]=n,e[5]=a):a=e[5];const i=a,l=i&&(x=n.connectorLogoUrl)!=null?x:null,c=i&&(y=n.connectorLogoUrlDark)!=null?y:null,d=n.isConnector&&i;let u;e[6]!==l||e[7]!==c||e[8]!==d?(u={lightLogoUrl:l,darkLogoUrl:c,enabled:d},e[6]=l,e[7]=c,e[8]=d,e[9]=u):u=e[9];const m=Jh(u);if(n.isConnector){if((b=m.data)!=null&&b.url){const k=(v=m.data)==null?void 0:v.url,M=s?"":n.name;let T;return e[10]!==o||e[11]!==k||e[12]!==M?(T=r.jsx("img",w({src:k,alt:M,className:"icon"},o)),e[10]=o,e[11]=k,e[12]=M,e[13]=T):T=e[13],T}if(n.logo&&!m.isLoading){const k=s?"":n.name;let M;return e[14]!==n.logo||e[15]!==o||e[16]!==k?(M=r.jsx(Yu,w({svgString:n.logo,className:"icon","aria-label":k},o)),e[14]=n.logo,e[15]=o,e[16]=k,e[17]=M):M=e[17],M}const S=s?"":n.name;let C;return e[18]!==o||e[19]!==S?(C=r.jsx(bI,w({className:"icon","aria-label":S},o)),e[18]=o,e[19]=S,e[20]=C):C=e[20],C}let f;e[21]!==n.systemHint?(f=vp(n.systemHint),e[21]=n.systemHint,e[22]=f):f=e[22];const p=f;let g;return e[23]!==p||e[24]!==n.logo||e[25]!==n.name||e[26]!==s||e[27]!==o?(g=p?r.jsx(p,w({className:"icon","aria-label":s?"":n.name},o)):r.jsx(Yu,w({svgString:n.logo,className:"icon","aria-label":s?"":n.name},o)),e[23]=p,e[24]=n.logo,e[25]=n.name,e[26]=s,e[27]=o,e[28]=g):g=e[28],g};function vp(t){switch(t){case Ie.Search:return DQ;case Ie.Think:return LQ;case Ie.Research:return PQ;case Ie.Canvas:return RQ;case Ie.Picture:case Ie.PictureV2:return OQ;case Ie.Video:return NQ;case Ie.Slurm:case Ie.ApiTool:return bI;case Ie.Agent:return BQ;case Ie.Tatertot:return FQ;default:return}}function UQ(t){return"connectorLogoUrl"in t||"connectorLogoUrlDark"in t}const VQ=j(()=>I(()=>import("./mxwy4kmdaryrewzb.js").then(t=>t._),__vite__mapDeps([43,1])),{loading:t=>L(t)}),GQ=j(()=>I(()=>Promise.resolve().then(()=>cf),void 0),{loading:t=>L(t)}),$Q=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])),{loading:t=>L(t)}),HQ=j(()=>I(()=>import("./bthkwnb2znu2hg0o.js").then(t=>t._),__vite__mapDeps([15,1])),{loading:t=>L(t)}),WQ=j(()=>I(()=>Promise.resolve().then(()=>$l),void 0),{loading:t=>L(t)}),zQ=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),qQ=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)}),YQ=j(()=>I(()=>Promise.resolve().then(()=>H1),void 0),{loading:t=>L(t)}),ZQ="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png",LWe=()=>{const{eligible:t,isLoading:e}=$e(Ye.hasSeenTatertotNux),n=G();return!(!xe(n,"1586944302")&&xe(n,"2342247883"))||!cb(n)?"hide":e?"loading":t?"show":"hide"};function OWe({onClose:t}){var b,v,S;const{markAsViewed:e}=$e(Ye.hasSeenTatertotNux),{systemHints:n}=Ko(),s=ZQ,o=J(),a=_.useRef(!1),[i,l]=_.useState(!1);_.useEffect(()=>{const C=new Image;C.src=s,C.onload=()=>l(!0)},[s]),_.useEffect(()=>{!i||a.current||(a.current=!0,Ee.count(Ae.TATERTOT,"tatertot_nux_modal_v2_shown"),U.logEventWithStatsig("Tatertot Nux Modal V2 Shown","chatgpt_tatertot_nux_modal_v2_shown"))},[i]);const c=at(),d=_.useMemo(()=>n?Object.fromEntries(n.map(C=>[C.systemHint,C])):{},[n]),u=d[Ie.PictureV2],m=d[Ie.Search],f=d[Ie.Tatertot],p=qs(),[g,h]=_.useState(!1),x=_.useCallback(()=>{e(),t(),Ee.count(Ae.TATERTOT,"tatertot_nux_modal_v2_closed"),U.logEventWithStatsig("Tatertot Nux Modal V2 Closed","chatgpt_tatertot_nux_modal_v2_closed")},[e,t]),y=_.useCallback(()=>{g||(h(!0),e(),t(),c({pathname:"/",search:"?hints=".concat(db)}),p(Ie.Tatertot),Ee.count(Ae.TATERTOT,"tatertot_nux_modal_v2_show_me_clicked"),U.logEventWithStatsig("Tatertot Nux Modal V2 Show Me Clicked","chatgpt_tatertot_nux_modal_v2_show_me_clicked"))},[g,e,t,c,p]);return i?r.jsxs(Pt,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:x,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(fn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:x})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsxs("div",{className:"relative mx-auto w-full",children:[r.jsx("div",{className:"relative mx-auto mt-6 w-full max-w-[240px]",children:r.jsxs("div",{className:"flex items-center justify-start",children:[r.jsx("div",{className:"me-3 flex h-12 w-12 items-center justify-center rounded-full bg-white/80 drop-shadow-sm",children:r.jsx(GQ,{className:"h-6 w-6 text-black"})}),r.jsx("div",{className:"w-[181px] flex-1 rounded-full bg-white/30 px-5 py-3 text-[17px] backdrop-blur-sm",children:r.jsx("span",{className:"text-black/30",children:o.formatMessage(Do.placeholderAskAnythingVariant)})})]})}),r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[162px] max-w-full min-w-[240px] -translate-x-1/2 translate-y-44 flex-col items-start justify-end rounded-xl bg-white/80 p-4 drop-shadow-xs backdrop-blur-xs",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-3 flex-col items-start justify-end",children:[r.jsx("span",{className:"ms-2 mb-4 flex items-center gap-4 text-[17px] font-medium whitespace-nowrap text-gray-600",children:u?r.jsxs(r.Fragment,{children:[r.jsx(il,{hint:u,isNextToLabel:!0,className:"h-6 w-6"}),(b=u.actionLabel)!=null?b:u.name]}):r.jsxs(r.Fragment,{children:[r.jsx(WQ,{className:"h-6 w-6 text-gray-600"}),o.formatMessage(Cc.createImagePill)]})}),r.jsx("span",{className:"ms-2 mb-2 flex items-center gap-4 text-[17px] font-medium whitespace-nowrap text-gray-600",children:m?r.jsxs(r.Fragment,{children:[r.jsx(il,{hint:m,isNextToLabel:!0,className:"h-6 w-6"}),(v=m.actionLabel)!=null?v:m.name]}):r.jsxs(r.Fragment,{children:[r.jsx(zQ,{className:"h-6 w-6 text-gray-600"}),o.formatMessage(Cc.webSearchPill)]})})]})})}),r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex max-w-full min-w-[264px] -translate-x-1/2 translate-y-21 flex-col items-start",children:r.jsx("div",{className:"flex min-h-[60px] w-auto max-w-full min-w-[264px] items-center justify-center rounded-xl bg-white px-4 py-2 shadow-lg",children:r.jsxs("span",{className:"flex items-center text-[20px] font-medium whitespace-nowrap text-blue-400",children:[f?r.jsxs(r.Fragment,{children:[r.jsx(il,{hint:f,isNextToLabel:!0,className:"h-7 w-7"}),r.jsx("span",{className:"mx-3.5",children:(S=f.actionLabel)!=null?S:f.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(YQ,{className:"h-7 w-7 text-blue-400"}),r.jsx("span",{className:"mx-3.5",children:o.formatMessage(Cc.studyAndLearnPill)})]}),r.jsx(qQ,{className:"ms-3 h-7 w-7 text-blue-400"})]})})})]})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:r.jsx(P,{id:"StudyandLearn.learnAnythingTitle",defaultMessage:"Learn anything, step by step"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx($Q,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(P,{id:"StudyandLearnNux.quizFeatureTitle",defaultMessage:"Practice with quizzes"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"StudyandLearnNux.quizFeatureDescription",defaultMessage:"Create quizzes and flashcards to test your knowledge."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(VQ,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(P,{id:"StudyandLearnNux.homeworkFeatureTitle",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"StudyandLearnNux.homeworkFeatureDescription",defaultMessage:"Break down tough problems with simple, step-by-step guidance."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(HQ,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(P,{id:"StudyandLearnNux.exploreFeatureTitle",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"StudyandLearnNux.exploreFeatureDescription",defaultMessage:"Dive into anything you're curious about and get quick, clear answers."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(he,{color:"primary",onClick:y,size:"large",fullWidth:!0,className:"px-12",children:o.formatMessage(Cc.tryItNowButton)})})})]})]}):null}const Cc=be({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),ky=j(()=>I(()=>import("./mxwy4kmdaryrewzb.js").then(t=>t._),__vite__mapDeps([43,1])),{loading:t=>L(t)}),SI=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])),{loading:t=>L(t)}),KQ=j(()=>I(()=>import("./bthkwnb2znu2hg0o.js").then(t=>t._),__vite__mapDeps([15,1])),{loading:t=>L(t)}),QQ=j(()=>I(()=>import("./mpv78j7w75btco0v.js").then(t=>t._),__vite__mapDeps([46,1])),{loading:t=>L(t)}),y2="tatertot_create_flashcards_or_quiz",JQ="https://persistent.oaistatic.com/chatgpt/NUX_StudyMode_16x9.png";function XQ({onClose:t}){const{markAsViewed:e}=$e(Ye.hasSeenTatertotNux),n=JQ,[s,o]=_.useState(!1);_.useEffect(()=>{s||(e(),o(!0),Ee.count(Ae.TATERTOT,"tatertot_nux_modal_shown"),U.logEventWithStatsig("Tatertot Nux Modal Shown","chatgpt_tatertot_nux_modal_shown"))},[e,s]);const[a,i]=_.useState(!1);_.useEffect(()=>{const x=new Image;x.src=n,x.onload=()=>i(!0)},[n]);const[l,c]=_.useState(!1),[d,u]=_.useState(!1);_.useEffect(()=>{if(!a)return;const x=setTimeout(()=>{c(!0)},200),y=setTimeout(()=>{u(!0)},300);return()=>{clearTimeout(x),clearTimeout(y)}},[a]);const m=at(),[f,p]=_.useState(!1),g=J(),h=()=>{f||(p(!0),t(),m({pathname:"/",search:"?hints=".concat(db)}),Ee.count(Ae.TATERTOT,"tatertot_nux_modal_show_me_clicked"),U.logEventWithStatsig("Tatertot Nux Modal Show Me Clicked","chatgpt_tatertot_nux_modal_show_me_clicked"))};return a?r.jsxs(Pt,{testId:"modal-tatertot-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),Ee.count(Ae.TATERTOT,"tatertot_nux_modal_closed"),U.logEventWithStatsig("Tatertot Nux Modal Closed","chatgpt_tatertot_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(fn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:n,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"mx-auto flex max-w-full flex-col items-end gap-2 px-8",children:[r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(l?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(P,{id:"StudyandLearnNux.firstBubble",defaultMessage:"Hey Chat!"})}),r.jsx("div",{className:"relative flex w-auto rounded-3xl bg-white/80 px-5 py-2.5 text-lg backdrop-blur-[24px] transition-all duration-300 ease-in-out dark:bg-[rgba(48,48,48,0.8)] ".concat(d?"translate-y-0 opacity-100":"translate-y-2 opacity-0"),children:r.jsx(P,{id:"StudyandLearnNux.secondBubble",defaultMessage:"Help me with my homework"})})]})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-6 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-center text-[20px] leading-7 font-medium",children:g.formatMessage(Cc.studyAndLearnTitle)}),r.jsx("div",{className:"text-token-text-secondary -mt-4 w-full text-center text-[17px]",children:r.jsx(P,{id:"StudyandLearnNux.subtitle",defaultMessage:"Your step-by-step guide to learning anything"})}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(SI,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(P,{id:"StudyandLearnNux.featureTitle1",defaultMessage:"Get homework help"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"StudyandLearnNux.featureDescription1",defaultMessage:"Break down complex problems with approachable, guided explanations."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(ky,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(P,{id:"StudyandLearnNux.featureTitle2",defaultMessage:"Prep for tests"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"StudyandLearnNux.featureDescription2",defaultMessage:"Test your knowledge with quizzes on any topic."})})]})]}),r.jsxs("div",{className:"flex w-full items-start gap-4 text-[17px]",children:[r.jsx(KQ,{className:"h-6 w-6 shrink-0"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"font-medium",children:r.jsx(P,{id:"StudyandLearnNux.featureTitle3",defaultMessage:"Explore new subjects"})}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"StudyandLearnNux.featureDescription3",defaultMessage:"Go deep on any topic and ask any question."})})]})]}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4",children:r.jsx(he,{color:"primary",onClick:h,size:"large",fullWidth:!0,className:"px-6",children:g.formatMessage(Cc.tryItNowButton)})})})]})]}):null}function v2(t,e){const n=[{type:ke.Autocomplete,id:"tatertot_homework_autocomplete",title:t.formatMessage({id:"8ZR8F6",defaultMessage:"Help me with my homework"}),prompt:t.formatMessage({id:"3Cdh/P",defaultMessage:"Help me with my homework"}),icon:r.jsx(SI,{className:"h-full w-full"}),body:"",theme:et.Tatertot},{type:ke.Autocomplete,id:"tatertot_explain_topic",title:t.formatMessage({id:"eOU1s2",defaultMessage:"Explain a topic to me"}),prompt:t.formatMessage({id:"/SVEgw",defaultMessage:"Explain a topic to me"}),icon:r.jsx(QQ,{className:"h-full w-full"}),body:"",theme:et.Tatertot}];return e?n.push({type:ke.Autocomplete,id:y2,title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"bNSdL3",defaultMessage:"Create a practice quiz with quizgpt"}),icon:r.jsx(ky,{className:"h-full w-full"}),body:"",theme:et.Tatertot}):n.push({type:ke.Autocomplete,id:"tatertot_create_quiz",title:t.formatMessage({id:"reHqfm",defaultMessage:"Create a practice quiz"}),prompt:t.formatMessage({id:"MSsW2T",defaultMessage:"Create a practice quiz"}),icon:r.jsx(ky,{className:"h-full w-full"}),body:"",theme:et.Tatertot}),n}const eJ=Object.freeze(Object.defineProperty({__proto__:null,TATERTOT_CREATE_QUIZ_PROMPT_STARTER_ID:y2,TatertotNuxModal:XQ,getTatertotStaticPromptStarters:v2},Symbol.toStringTag,{value:"Module"})),tJ="https://persistent.oaistatic.com/chatgpt/nux-quiz.jpg",DWe=()=>{const{eligible:t,isLoading:e}=$e(Ye.hasSeenTatertotQuizNux),n=G();return!xe(n,"550187082")||!cb(n)?"hide":e?"loading":t?"show":"hide"};function FWe({onClose:t}){const{markAsViewed:e}=$e(Ye.hasSeenTatertotQuizNux),{systemHints:n}=Ko(),s=tJ,o=J(),a=G(),i=pt(a),c=v2(o,i).find(y=>y.id===y2),d=_.useRef(!1),[u,m]=_.useState(!1);_.useEffect(()=>{const y=new Image;y.src=s,y.onload=()=>m(!0)},[s]),_.useEffect(()=>{!u||d.current||(d.current=!0,Ee.count(Ae.TATERTOT,"tatertot_quiz_nux_modal_shown"),U.logEventWithStatsig("Tatertot Quiz Nux Modal Shown","chatgpt_tatertot_quiz_nux_modal_shown"))},[u]);const f=at();_.useMemo(()=>n?Object.fromEntries(n.map(y=>[y.systemHint,y])):{},[n]);const[p,g]=_.useState(!1),h=_.useCallback(()=>{e(),t(),Ee.count(Ae.TATERTOT,"tatertot_quiz_nux_modal_closed"),U.logEventWithStatsig("Tatertot Quiz Nux Modal Closed","chatgpt_tatertot_quiz_nux_modal_closed")},[e,t]),x=_.useCallback(()=>{p||(g(!0),e(),t(),f({pathname:"/",search:"?hints=".concat(db,"&q=").concat(c==null?void 0:c.prompt)}),Ee.count(Ae.TATERTOT,"tatertot_quiz_nux_modal_show_me_clicked"),U.logEventWithStatsig("Tatertot Quiz Nux Modal Show Me Clicked","chatgpt_tatertot_quiz_nux_modal_show_me_clicked"))},[c==null?void 0:c.prompt,e,t,f,p]);return u?r.jsxs(Pt,{testId:"modal-tatertot-quiz-nux",isOpen:!0,noPadding:!0,onClose:h,showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(fn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:h})}),r.jsxs("div",{className:"relative w-full flex-1",children:[r.jsx("img",{src:s,className:"h-[232px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-start justify-center",children:r.jsx("div",{className:"relative mx-auto w-full",children:r.jsx("div",{className:"absolute start-1/2 bottom-0 z-10 flex h-[200px] max-w-[172px] -translate-x-1/2 translate-y-60 flex-col items-start justify-end rounded-xl bg-white p-4",children:r.jsx("div",{className:"flex h-full w-auto flex-col items-start justify-end",children:r.jsxs("div",{className:"flex h-full w-auto translate-y-2 flex-col items-start justify-end",children:[r.jsx("span",{className:"mb-5 flex items-center gap-4 font-serif text-xl text-[15px] leading-[1.5] font-medium text-black",children:r.jsx(r.Fragment,{children:o.formatMessage(Ba.quizQuestion)})}),r.jsx("div",{className:"mb-2 flex flex-col gap-2",children:[Ba.quizAnswer1,Ba.quizAnswer2,Ba.quizAnswer3].map((y,b)=>{const v=[Ba.quizOptionA,Ba.quizOptionB,Ba.quizOptionC];return r.jsx(Kn.Fragment,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("label",{className:"flex items-center gap-2 text-[11.5px] text-black",children:[r.jsx("span",{className:"inline-block rounded bg-gray-100 px-1.5 py-0.5 text-[9px] font-medium text-gray-700",children:r.jsx(P,w({},v[b]))}),o.formatMessage(y)]}),r.jsx("div",{className:"ms-6.5 mt-1 h-[0.5px] w-[calc(100%+1.5rem)] bg-gray-200"})]})},y.id||b)})})]})})})})})]}),r.jsxs("div",{className:"dark:bg-gray-750 relative z-30 flex flex-1 flex-col items-center gap-6 bg-white px-8 pt-8 pb-8",children:[r.jsx("div",{className:"flex w-80 items-center justify-center text-center text-4xl font-semibold",children:o.formatMessage(Ba.quizNUXTitle)}),r.jsx("div",{className:"flex w-full items-center justify-center text-[17px]",children:r.jsx("div",{className:"flex w-90 flex-col items-center",children:r.jsx("div",{className:"text-token-text-secondary text-center",children:o.formatMessage(Ba.quizNUXDescription)})})}),r.jsx("div",{className:"flex w-full items-center justify-center",children:r.jsx("div",{className:"flex gap-4 text-[17px]",children:r.jsx(he,{color:"primary",onClick:x,size:"large",fullWidth:!0,className:"px-12",children:r.jsx(P,{id:"StudyandLearnNux.quizNuxButton",defaultMessage:"Try it"})})})})]})]}):null}const Ba=be({studyAndLearnTitle:{id:"StudyandLearnNux.title",defaultMessage:"Study and Learn"},studyAndLearnPill:{id:"StudyandLearnNux.studyAndLearnBubble",defaultMessage:"Study and learn"},createImagePill:{id:"StudyandLearnNux.createImagePill",defaultMessage:"Create image"},webSearchPill:{id:"StudyandLearnNux.webSearchPill",defaultMessage:"Web search"},quizQuestion:{id:"StudyandLearnNux.quizQuestion",defaultMessage:'How do you say "bathroom" in Spanish?'},quizAnswer1:{id:"StudyandLearnNux.quizAnswer1",defaultMessage:"bao"},quizAnswer2:{id:"StudyandLearnNux.quizAnswer2",defaultMessage:"calle"},quizAnswer3:{id:"StudyandLearnNux.quizAnswer3",defaultMessage:"cocina"},quizNUXTitle:{id:"StudyandLearnNux.quizNUXTitle",defaultMessage:"Quiz yourself with ChatGPT"},quizNUXDescription:{id:"StudyandLearnNux.quizNUXDescription",defaultMessage:"Quickly create quizzes and flashcards on any topic so you feel exam-ready"},quizOptionA:{id:"StudyandLearnNux.quizOptionA",defaultMessage:"A"},quizOptionB:{id:"StudyandLearnNux.quizOptionB",defaultMessage:"B"},quizOptionC:{id:"StudyandLearnNux.quizOptionC",defaultMessage:"C"},tryItNowButton:{id:"StudyandLearnNux.tryItNowButton",defaultMessage:"Try it now"},notNowButton:{id:"StudyandLearnNux.notNowButton",defaultMessage:"Not now"}}),CI="has-dismissed-welcome-back-modal",BWe=()=>{"use forget";const t=H.c(17),e=G(),[n,s]=_.useState(nJ);let o;t[0]!==e?(o=Ve(e,"3637408529").get("is_no_auth_welcome_back_modal_enabled",!1),t[0]=e,t[1]=o):o=t[1];const a=o,i=Q6(),{isUnauthenticated:l,isLoading:c}=Un();let d;t[2]===Symbol.for("react.memo_cache_sentinel")?(d=lh(),t[2]=d):d=t[2];const u=d,m=Z6();let f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{s(!0),sessionStorage.setItem(CI,"true")},t[3]=f):f=t[3];const p=f;let g;t[4]!==e?(g=()=>K6(e),t[4]=e,t[5]=g):g=t[5];const h=ue(g);if(c){let b;return t[6]===Symbol.for("react.memo_cache_sentinel")?(b={isLoading:!0,isOpen:null,onClose:null},t[6]=b):b=t[6],b}if(h){let b;return t[7]===Symbol.for("react.memo_cache_sentinel")?(b={isLoading:!1,isOpen:!1,onClose:null},t[7]=b):b=t[7],b}let x;t[8]!==e||t[9]!==n||t[10]!==m||t[11]!==a||t[12]!==i||t[13]!==l?(x=l&&a&&!n&&u&&!i&&!m&&(vG()||!bG(e)),t[8]=e,t[9]=n,t[10]=m,t[11]=a,t[12]=i,t[13]=l,t[14]=x):x=t[14];let y;return t[15]!==x?(y={isLoading:!1,isOpen:x,onClose:p},t[15]=x,t[16]=y):y=t[16],y};function nJ(){return sessionStorage.getItem(CI)!=null}const Hs=j(()=>I(()=>import("./lpn18ascydaxcdfj.js").then(t=>t.F),__vite__mapDeps([47,1,48,29,30,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125])).then(t=>t.FormattedText));function sJ(){return _.use(Hs.prefetch()),null}function wI({workspaceId:t,enabled:e=!0}){return lt({queryKey:["workspace-policy",t],queryFn:t?()=>pe.safeGet("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}}}):Jv,enabled:!!t&&e})}function UWe(t){const e=xt();return Bt({mutationFn:n=>pe.safePost("/accounts/{account_id}/workspace_policy",{parameters:{path:{account_id:t}},requestBody:{workspace_policy:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["workspace-policy",t]})}})}const oJ=Ye.hasSeenWorkSpacePolicy;function aJ(t){"use forget";const e=H.c(9),{workspaceId:n}=t,s=xt();let o;e[0]!==n?(o=()=>pe.safePost("/accounts/{account_id}/workspace_policy/acknowledge",{parameters:{path:{account_id:n}}}),e[0]=n,e[1]=o):o=e[1];let a,i;e[2]!==s?(a=()=>{s.setQueryData(Nu().queryKey,rJ)},i=()=>{s.invalidateQueries(Nu())},e[2]=s,e[3]=a,e[4]=i):(a=e[3],i=e[4]);let l;return e[5]!==o||e[6]!==a||e[7]!==i?(l={mutationFn:o,onMutate:a,onSuccess:i},e[5]=o,e[6]=a,e[7]=i,e[8]=l):l=e[8],Bt(l)}function rJ(t){return t&&B(w({},t),{eligible_announcements:t.eligible_announcements.filter(iJ)})}function iJ(t){return t!==oJ}const kI=t=>{let e=0;if(!t)return"";for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e.toString()},lJ=720*60*60*1e3,cJ=(t,e,n)=>{const s={hash:n,expiresAt:Date.now()+lJ};mt.setItem(Le.WorkspacePolicyViewed,JSON.stringify(s),{userId:e,workspaceId:t})},dJ=(t,e)=>{const n=mt.getItem(Le.WorkspacePolicyViewed,{userId:e,workspaceId:t});if(!n)return null;try{const s=JSON.parse(n);if(s.expiresAt>Date.now())return s.hash}catch(s){}return null},VWe=()=>{"use forget";var b,v,S;const t=H.c(14),e=$o(va.businessWorkspaceId),n=(b=pn())==null?void 0:b.id,{data:s,isLoading:o}=ch(e!=null?e:void 0),a=!!((v=s==null?void 0:s.beta_settings)!=null&&v.workspace_policy),i=e!=null?e:void 0;let l;t[0]!==a||t[1]!==i?(l={workspaceId:i,enabled:a},t[0]=a,t[1]=i,t[2]=l):l=t[2];const{data:c,isLoading:d}=wI(l),u=o||d,m=(S=c==null?void 0:c.workspace_policy)!=null?S:"";let f;t[3]!==m?(f=kI(m),t[3]=m,t[4]=f):f=t[4];const p=f;if(!e){let C;return t[5]===Symbol.for("react.memo_cache_sentinel")?(C={isLoading:!1,isOpen:!1},t[5]=C):C=t[5],C}if(u||!n){let C;return t[6]===Symbol.for("react.memo_cache_sentinel")?(C={isLoading:!0,isOpen:!1},t[6]=C):C=t[6],C}if(!a||!c||!m){let C;return t[7]===Symbol.for("react.memo_cache_sentinel")?(C={isLoading:!1,isOpen:!1},t[7]=C):C=t[7],C}if((s==null?void 0:s.beta_settings_str.workspace_policy_cadence)==="every_login"){let C;return t[8]===Symbol.for("react.memo_cache_sentinel")?(C={isLoading:!1,isOpen:!0},t[8]=C):C=t[8],C}let g;t[9]!==n||t[10]!==e?(g=dJ(e,n),t[9]=n,t[10]=e,t[11]=g):g=t[11];const x=p!==g;let y;return t[12]!==x?(y={isLoading:!1,isOpen:x},t[12]=x,t[13]=y):y=t[13],y},GWe=({onClose:t})=>{var f,p,g;const e=J(),n=$o(va.businessWorkspaceId),s=(f=pn())==null?void 0:f.id,{mutate:o}=aJ({workspaceId:n!=null?n:""}),{data:a,isLoading:i}=wI({workspaceId:n!=null?n:void 0}),l=(p=a==null?void 0:a.workspace_policy)!=null?p:"",c=$o(va.isBusinessWorkspace),d=$o(h=>h.currentWorkspace);if(!Kp)return null;const u=e.formatMessage(xw.workspaceWelcome,{workspaceName:d==null?void 0:d.name}),m=()=>{t(),o(),n&&s&&cJ(n,s,kI(l))};return r.jsx(Pt,{testId:"modal-workspace-policy",isOpen:!0,onClose:m,type:"success",icon:c?r.jsx(Kp,{size:"small",src:d==null?void 0:d.profilePictureUrl}):void 0,title:u,size:"xlarge",shouldIgnoreClickOutside:!0,className:"h-[50vh]! min-h-[500px]!",children:i?r.jsx(Ws,{}):r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(Hs,{size:"small",className:"px-4 md:px-6",children:(g=a==null?void 0:a.workspace_policy)!=null?g:""}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(ub,{title:e.formatMessage(xw.gettingStartedButton),onClick:m,color:"primary"})})]})})},xw=be({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},gettingStartedButton:{id:"BlockingInitialModals.acknowledgeButton",defaultMessage:"Acknowledge"}}),uJ=j(()=>I(()=>import("./ooz2slmm8agf6bjp.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>L(t)}),MI=j(()=>I(()=>import("./mdgmhl7nsma70wnx.js").then(t=>t._),__vite__mapDeps([126,1])),{loading:t=>L(t)}),mJ=Ye.Onboarding,TI=()=>{const{eligible:t,markAsViewed:e,isLoading:n}=$e(mJ);return{setHasSeenOnboarding:e,hasSeenOnboardingDate:n?null:!t}},$We=()=>{const{eligible:t,markAsViewed:e,isLoading:n}=$e(Ye.TeamOwnerOnboarding);return{setHasSeenTeamOwnerOnboarding:e,hasSeenTeamOwnerOnboardingDate:n?null:!t}};function HWe({onClose:t,scope:e}){const{setHasSeenOnboarding:n}=TI(),s=_.useCallback(()=>{t(!0),n()},[t,n]);return e===a7.Personal?r.jsx(pJ,{onSubmit:s}):r.jsx(gJ,{onSubmit:()=>{t(!0)}})}const Lc=({icon:t,title:e,body:n})=>r.jsxs("div",{className:"flex flex-col gap-2 md:w-1/3",children:[r.jsxs("div",{className:"flex flex-row items-start gap-2",children:[r.jsx("div",{className:"mt-1",children:t}),r.jsx("div",{className:"text-token-text-primary font-semibold",children:e})]}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:n})]}),fJ="https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",pJ=({onSubmit:t})=>{const e=J();return r.jsxs("div",{className:"flex flex-col gap-3 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(Lc,{icon:r.jsx(MI,{isSolid:!0,className:"icon text-green-600"}),title:r.jsx(P,w({},Bs.askAway)),body:r.jsx(P,w({},Bs.askAwayBody))}),r.jsx(Lc,{icon:r.jsx(SG,{className:"icon text-brand-purple"}),title:r.jsx(P,w({},Bs.warning)),body:r.jsx(P,B(w({},Bs.warningBody),{values:{article:n=>r.jsx("a",{href:fJ,target:"_blank",className:"underline",rel:"noopener noreferrer",children:n})}}))}),r.jsx(Lc,{icon:r.jsx(J6,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(P,w({},Bs.accuracy)),body:r.jsx(P,w({},Bs.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(ub,{title:e.formatMessage(Bs.gettingStartedButton),onClick:t,color:"primary","data-testid":"getting-started-button"})})]})},gJ=({onSubmit:t})=>{const e=J();return r.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[r.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[r.jsx(Lc,{icon:r.jsx(uJ,{className:"icon text-brand-purple"}),title:r.jsx(P,w({},Bs.workUse)),body:r.jsx(P,w({},Bs.workUseBody))}),r.jsx(Lc,{icon:r.jsx(MI,{className:"icon text-green-600"}),title:r.jsx(P,w({},Bs.askAway)),body:r.jsx(P,w({},Bs.askAwayBody))}),r.jsx(Lc,{icon:r.jsx(J6,{className:"icon mt-0.5 text-orange-300"}),title:r.jsx(P,w({},Bs.accuracy)),body:r.jsx(P,w({},Bs.accuracyBody))})]}),r.jsx("div",{className:"flex flex-row justify-end",children:r.jsx(ub,{title:e.formatMessage(Bs.gettingStartedButton),onClick:t,color:"primary"})})]})},Bs=be({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more."},warning:{id:"onboarding.warning",defaultMessage:"Dont share sensitive info"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>."},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. Its not intended to give advice."},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, lets go"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits."},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"By default, chats in this workspace are not used to train our AI models."}}),hJ=j(()=>I(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([41,1])),{loading:t=>L(t)}),_J=j(()=>I(()=>import("./iokrzhs8g9j8y9mp.js").then(t=>t._),__vite__mapDeps([127,1])),{loading:t=>L(t)}),xJ=j(()=>I(()=>import("./mpv78j7w75btco0v.js").then(t=>t._),__vite__mapDeps([46,1])),{loading:t=>L(t)}),EI=Ye.MemoryOnboarding;function WWe(){const t=Bm(),{eligible:e,isLoading:n}=$e(EI);return{eligible:e&&t,isLoading:n}}function E_({icon:t,title:e,description:n}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"text-token-text-secondary mt-1",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function zWe({onClose:t}){const e=G(),n=yJ(e),s=gd(),o=x2(),a=(o==null?void 0:o[en.Sunshine])===!0,i=J(),{markAsViewed:l}=$e(EI),c=_.useCallback(()=>{l(),t()},[l,t]);return r.jsx(Pt,{testId:"modal-memory-onboarding",isOpen:!0,onClose:rs,size:"custom",className:"max-w-xl",type:"success",title:i.formatMessage(sa.title),secondaryButton:n?r.jsx(so.Button,{onClick:async()=>{try{await s.mutateAsync({setting:en.Sunshine,value:!1}),c()}catch(d){}},title:i.formatMessage(sa.notNow),color:"secondary",disabled:a}):null,primaryButton:n?r.jsx(so.Button,{onClick:async()=>{try{await s.mutateAsync({setting:en.Sunshine,value:!0}),c()}catch(d){}},title:i.formatMessage(sa.enable),color:"primary",disabled:a}):r.jsx(so.Button,{onClick:c,title:i.formatMessage(sa.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(E_,{icon:r.jsx(xJ,{}),title:i.formatMessage(sa.bulletTitle1),description:i.formatMessage(sa.bulletDescription1)}),r.jsx(E_,{icon:r.jsx(hJ,{}),title:i.formatMessage(sa.bulletTitle2),description:r.jsx(P,w({},sa.bulletDescription2))}),r.jsx(E_,{icon:r.jsx(_J,{}),title:i.formatMessage(sa.bulletTitle3),description:r.jsx(P,B(w({},sa.bulletDescription3),{values:{link1:d=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:d}),link2:d=>r.jsx(Aa,{to:fd(Bn.Personalization),className:"underline",children:d}),link3:d=>r.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq#h_b8745c1ae1",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:d})}}))})]})})}function yJ(t){return xe(t,"1542198993")}const sa=be({title:{id:"MemoryOnboardingModal.title.1",defaultMessage:"ChatGPT now has memory"},bulletTitle1:{id:"MemoryOnboardingModal.bulletTitle1",defaultMessage:"Keep the conversation going"},bulletDescription1:{id:"MemoryOnboardingModal.bulletDescription1.1",defaultMessage:"ChatGPT will automatically remember useful details and preferences you share in all your conversations, carrying them between chats."},bulletTitle2:{id:"MemoryOnboardingModal.bulletTitle2.1",defaultMessage:"A more personalized assistant"},bulletDescription2:{id:"MemoryOnboardingModal.bulletDescription2.2",defaultMessage:"Memories and your chat history are used to give you more relevant responses. Want to change what ChatGPT remembers? Just ask."},bulletTitle3:{id:"MemoryOnboardingModal.bulletTitle3",defaultMessage:"You're in control"},bulletDescription3:{id:"MemoryOnboardingModal.bulletDescription3.2",defaultMessage:"<link1>Learn more</link1> about how memory works. You can turn off memory at any time in <link2>settings</link2>. Memories may be used to <link3>train our models</link3> if you have model training enabled."},continue:{id:"MemoryOnboardingModal.continue",defaultMessage:"Continue"},notNow:{id:"MemoryOnboardingModal.notNow",defaultMessage:"Not now"},enable:{id:"MemoryOnboardingModal.enable",defaultMessage:"Enable"}});function vJ(t){"use no forget";Sn()&&ri.then(e=>{e.getHost().userStoppedAgentConversation(t)})}function bJ(t,e,n=!1,s=!1,o=null){"use no forget";if(!Sn())return;const a=e==null?void 0:e.slice(-10).map(d=>{var u=d,{metadata:l}=u,c=Me(u,["metadata"]);return c}),i=JSON.stringify({messages:a});ri.then(l=>{l.getHost().userSentMessageInAgentConversation(t,i,n,s,o)})}function SJ(t,e=!1){"use no forget";Sn()&&ri.then(n=>{n.getHost().agentConversationStopped(t,e)})}function CJ(t){"use no forget";return Sn()?ri.then(e=>e.getHost().getAgentStatus(t)):Promise.resolve("stopped")}function wJ(t,e,n,s,o=!1,a=void 0,i={},l=void 0){const c=B(w({client_thread_id:String(t),client_initiated:e,reason:n,is_agent_hint_enabled:a},i),{has_stop_conduit_token:l});if(!(a||s))return;if(o&&a!==void 0&&a!==s){const u=s?"from_agent_to_non_agent":"from_non_agent_to_agent",m="conversation.transition_".concat(u);Oe.addAction(m,B(w({},c),{action_type:"abort_completion"})),U.logEventWithStatsig("Agent Conversation Transition","chatgpt_agent_conversation_transition",B(w({},c),{action_type:"abort_completion"}))}Ee.count(Ae.DEFAULT,"chatgpt_web_conversation_stop",[{key:"has_stop_conduit_token",value:l?"true":"false"},{key:"stop_reason",value:n}]),s&&(Oe.addAction("conversation.stop_attempted",B(w({},c),{is_last_turn_agent:!0})),U.logEventWithStatsig("Agent Conversation Stop","chatgpt_agent_conversation_stop",w({},c)))}const AI=_d(()=>Qe(null));function Mi(t){return AI(t)()}function b2(t,e){const n=AI(t);kJ(hn(()=>n()),e)&&n.set(e)}function kJ(t,e){return!((t==null?void 0:t.value)===Yt.REALTIME&&(e==null?void 0:e.value)===Yt.STREAMING)}const Xh=t=>{"use forget";const e=H.c(3),n=G();let s;return e[0]!==n||e[1]!==t?(s=()=>{if(t===void 0)return null;const o=ht(n,t);return Mi(o)},e[0]=n,e[1]=t,e[2]=s):s=e[2],ue(s)},S2=(t,e)=>{const n=ht(t,e);return Mi(n)},Ps=(t,e)=>{const n=ht(Hn(),t);b2(n,e)};async function e1(t,e=me.getRequestId(ft(t)),{clientInitiated:n=!1,reason:s="other",isLastTurnAgent:o=void 0,hasAgentSystemHint:a=void 0}={}){var T,E,A,N;const i=CG(e),l=Hn(),c=ft(t),d=jt(t),u=S2(l,t),m=(u==null?void 0:u.value)===Yt.REALTIME,f=(u==null?void 0:u.value)===Yt.STREAMING,p=me.getCurrentNode(c),g=(T=c==null?void 0:c.stopConduitToken)!=null?T:null,h=g!==null,y=(()=>{const R=p==null?void 0:p.message;return R?wG(R):!1})(),b=f&&((N=(A=(E=p==null?void 0:p.message)==null?void 0:E.metadata)==null?void 0:A.model_slug)==null?void 0:N.endsWith("-pro")),v=f&&n,S=xe(l,"877631007");if(!i&&!m&&!b&&!v)return;qe(t,R=>{R.interruptionInProgress=!0});const C=()=>{var F,V,z;const O=(c?me.getLastMessageSystemHints(c):[]).includes(Ie.Agent),D=!!((z=(V=(F=me.getCurrentNode(c))==null?void 0:F.message)==null?void 0:V.metadata)!=null&&z.n7jupd_message);return O||D},k=o!=null?o:C();k&&d&&vJ(d);let M;if(d&&xe(l,"3922476776")){const O=w({requestBody:{conversation_id:d,exclude_async_types:S?["pro_mode"]:[]},authOption:qt.SendIfAvailable},g?{additionalHeaders:{"x-conduit-token":g}}:{});M=await pe.safePost("/stop_conversation",O),g&&qe(t,D=>{D.stopConduitToken=null});try{wJ(t,n,s,k,!0,a,{},h)}catch(D){Gs.error("Error logging abort completion attempt for analytics",{error:D})}}return i&&!y&&hp.abortRequest(e),qe(t,R=>{R.interruptionInProgress=!1}),M}const Kc=new Set,MJ=(t,e=()=>!0)=>{const n={callback:t,shouldBlock:e};return Kc.add(n),()=>Kc.delete(n)},qWe=(t,e=()=>!0)=>{_.useEffect(()=>{const n={callback:t,shouldBlock:e};return Kc.add(n),()=>{Kc.delete(n)}},[t,e])},TJ=()=>Array.from(Kc).some(t=>t.shouldBlock()),EJ=()=>Promise.allSettled(Array.from(Kc).filter(t=>t.shouldBlock()).map(t=>t.callback()));class AJ{constructor(){ne(this,"completionStartTime",Date.now());ne(this,"completionEndTime");ne(this,"blurDuringCompletionTime");ne(this,"refocusTime");ne(this,"logFocusAfterBlurDuringCompletionEvent",()=>{We.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)}),U.logEvent("Focus After Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime),refocus_time_ms:"".concat(this.refocusTime-this.completionStartTime)})});ne(this,"onWindowBlur",()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))});ne(this,"onWindowFocusAfterBlur",()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()});ne(this,"cleanupFocusAfterBlurListener",()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)});ne(this,"onMessageError",()=>{window.removeEventListener("blur",this.onWindowBlur)});ne(this,"onMessageDone",()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),We.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),U.logEvent("Blur During Completion",{completion_duration_ms:"".concat(this.completionEndTime-this.completionStartTime),blur_time_ms:"".concat(this.blurDuringCompletionTime-this.completionStartTime)}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())});window.addEventListener("blur",this.onWindowBlur)}}const My=new Set,II=t=>{_.useEffect(()=>(My.add(t),()=>{My.delete(t)}),[t])},yw=t=>{for(const e of My)try{e({error:t})}catch(n){Oe.addError(n)}},Rd=Nt(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),IJ=()=>Rd.getState().ui.focusedNodeId,Ld=()=>Rd.getState().messagesDevData;function YWe(t){const e=Object.keys(Ld()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n+1)%e.length;return e[s]}function ZWe(t){const e=Object.keys(Ld()),n=e.indexOf(t);if(n===-1)throw new Error("Key not found in object");const s=(n-1+e.length)%e.length;return e[s]}function KWe(t){return Object.keys(Ld()).indexOf(t)}const QWe=()=>Object.keys(Ld()).length;var A_,vw;function jJ(){if(vw)return A_;vw=1;function t(e,n){for(var s,o=-1,a=e.length;++o<a;){var i=n(e[o]);i!==void 0&&(s=s===void 0?i:s+i)}return s}return A_=t,A_}var I_,bw;function PJ(){if(bw)return I_;bw=1;var t=jJ(),e=NaN;function n(s,o){var a=s==null?0:s.length;return a?t(s,o)/a:e}return I_=n,I_}var j_,Sw;function NJ(){if(Sw)return j_;Sw=1;var t=PJ(),e=xd();function n(s){return t(s,e)}return j_=n,j_}var RJ=NJ();const LJ=Wn(RJ);function OJ(t){return t.length===0?null:t.reduce((n,s)=>n+s,0)/t.length}function DJ(t){const e=t.length;if(e===0)return 0;const n=OJ(t)||0,s=t.reduce((o,a)=>o+Math.pow(a-n,2),0)/e;return Math.sqrt(s)}function Cw(t,e){const n=t.slice().sort((l,c)=>l-c),s=e*(n.length-1),o=Math.floor(s),a=Math.ceil(s);if(o===a)return n[o];const i=s-o;return(1-i)*n[o]+i*n[a]}function FJ(t){if(t.length===0)return null;const e=t.slice().sort((s,o)=>s-o),n=Math.floor(e.length/2);return e.length%2===0?(e[n-1]+e[n])/2:e[n]}var Ro=(t=>(t.FirstTokenLatency="first_token_lat",t.TotalRequestTime="total_request_time",t.TokenCount="token_count",t.StdDevTokenLatency="std_dev_token_lat",t.MeanTokenLatency="mean_token_lat",t.MedianTokenLatency="median_token_lat",t.MinTokenLatency="min_token_lat",t.MaxTokenLatency="max_token_lat",t.P95TokenLatency="p95_token_lat",t.P99TokenLatency="p99_token_lat",t))(Ro||{});const jI=t=>{var f;const e=t.filter(p=>p.requestCount>1);let n=0;for(let p=0;p<t.length;p++){const g=t[p];if(n=g.requestDuration,g.content!=="")break}const s=Cw(e.map(p=>p.lastTokenDuration),.95),o=Cw(e.map(p=>p.lastTokenDuration),.99),a=LJ(e.map(p=>p.lastTokenDuration)),i=FJ(e.map(p=>p.lastTokenDuration)),l=e.filter(p=>p.lastTokenDuration!==0).reduce((p,g)=>Math.min(p,g.lastTokenDuration),1/0),c=e.reduce((p,g)=>Math.max(p,g.lastTokenDuration),-1/0),d=DJ(e.map(p=>p.lastTokenDuration)),u=(f=t[t.length-1])==null?void 0:f.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:n>0?"".concat(n.toFixed(2),"ms"):null,value:n>0?n:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:u?"".concat((u/1e3).toFixed(2),"s"):null,value:u||null,category:"summary"},{id:"token_count",name:"Token count",stat:"".concat(t.length),value:t.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:"".concat(d.toFixed(2)),value:d,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:a?"".concat(a.toFixed(2),"ms"):null,value:a!=null?a:null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:i?"".concat(i.toFixed(2),"ms"):null,value:i!=null?i:null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:"".concat(l.toFixed(2),"ms"),value:l!=null?l:null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:"".concat(c.toFixed(2),"ms"),value:c!=null?c:null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:s?"".concat(s.toFixed(2),"ms"):null,value:s!=null?s:null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:o?"".concat(o.toFixed(2),"ms"):null,value:o!=null?o:null,category:"aggregate"}]},JWe=()=>{var a;const t=Ld(),e=IJ();if(!t||!e)return{stats:[],targetLatencyData:[]};const n=t[e],s=(a=n==null?void 0:n.data)!=null?a:[];return{stats:jI(s),targetLatencyData:s}},BJ=(t,e,n,s)=>{Rd.setState(o=>{const a={focusedNodeId:t},i={status:"active",data:[],model:e,serverRequestId:n,preflightTime:s};return B(w({},o),{activeNodeId:t,ui:a,messagesDevData:B(w({},o.messagesDevData),{[t]:i})})})},UJ=(t,e,n)=>{const s=n==null?void 0:n.search_source;Rd.setState(o=>{var i;const a=o.messagesDevData[t];return B(w({},o),{activeNodeId:t,messagesDevData:B(w({},o.messagesDevData),{[t]:B(w({},a),{data:[...(i=a==null?void 0:a.data)!=null?i:[],e],searchSource:s})})})})},oa=(t,e)=>{var n;return(n=e.find(s=>s.id===t))==null?void 0:n.value},VJ=t=>{var c;if(!pt(Hn()))return;const n=Ld()[t],s=jI(n.data),{preflightTime:o,model:a,serverRequestId:i,searchSource:l}=n;return pe.safePost("/lat/r",{requestBody:{server_request_id:i,model:a,preflight_time_ms:o,search_source:l,count_tokens:(c=oa(Ro.TokenCount,s))!=null?c:0,ts_first_token_ms:oa(Ro.FirstTokenLatency,s),ts_max_token_time_ms:oa(Ro.MaxTokenLatency,s),ts_mean_token_without_first_ms:oa(Ro.MeanTokenLatency,s),ts_median_token_without_first_ms:oa(Ro.MedianTokenLatency,s),ts_min_token_time_ms:oa(Ro.MinTokenLatency,s),ts_p95_token_without_first_ms:oa(Ro.P95TokenLatency,s),ts_p99_token_without_first_ms:oa(Ro.P99TokenLatency,s),ts_std_dev_token_ms:oa(Ro.StdDevTokenLatency,s),ts_total_request_ms:oa(Ro.TotalRequestTime,s)}})},GJ=t=>Rd.setState(e=>{const n=B(w({},e.messagesDevData[t]),{status:"finished"});return B(w({},e),{messagesDevData:B(w({},e.messagesDevData),{[t]:n})})}),XWe=t=>Rd.setState(e=>B(w({},e),{ui:B(w({},e.ui),{focusedNodeId:t})}));class $J{constructor(e,n){ne(this,"requestLastTokenTime");ne(this,"requestCount",0);ne(this,"requestTimes",[]);this.requestLatencyId=e,this.requestStartTime=n,this.requestLastTokenTime=n}onResponse(e,n,s){const o=performance.now(),a=o-this.requestLastTokenTime,i=o-this.requestStartTime;this.requestLastTokenTime=o,this.requestCount+=1;const l={requestCount:this.requestCount,requestDuration:i,lastTokenDuration:Number(JSON.stringify(a)),messageType:n.content.content_type,content:Bp(n)?ko(n):""};this.requestTimes.push(l),e.type==="message"?UJ(this.requestLatencyId,l,n.metadata):e.type==="done"&&s!=null&&(GJ(this.requestLatencyId),VJ(this.requestLatencyId))}}const PI=(t,e)=>{const{isCompletion:n,messageId:s,conversationId:o,flagged:a,blocked:i,disclaimers:l,metadata:c,shouldDisableConversation:d}=t,u=!!(l!=null&&l.length);qe(e,m=>{ln.updateTree(m,f=>{var x,y;const p=f.messageIdToNodeId(s);i&&f.clearNodeMessageParts(p);const g=i,h=(x=c==null?void 0:c.safety_limited)!=null?x:!1;f.updateNodeMetadata(p,B(w(w(w(w({},(y=u&&!!(l!=null&&l.length)&&EG(l,i))!=null?y:{}),a&&TG),i&&MG({isSafetyLimited:h,shouldDisableConversation:d,isModelIncompatibility:g})),d&&kG),{completionSampleFinishTime:Date.now()}))})}),U.logEvent(n?i?"Moderation: Completion Content Blocked":"Moderation: Completion Content Flagged":i?"Moderation: Prompt Content Blocked":"Moderation: Prompt Content Flagged",{threadId:o,id:s})},ww={base_config:void 0,eval_preset:void 0,sonicberry_model_ids:void 0,settings_overrides:void 0,dump_sub_conversation:void 0};Nt(t=>({settings:Um(),setSettings:e=>{t({settings:e}),Qn.setCookie(Jn.InternalSearchSettings,JSON.stringify(e),{maxAge:2*365*24*60*60})}}));function Um(){let t;try{const e=Qn.getCookie(Jn.InternalSearchSettings);t=e?JSON.parse(e):ww}catch(e){t=ww}return AG(t,e=>!!e)}const NI=(t=Hn(),e=!1)=>{var n;return pt(t)?((n=ut(t))==null?void 0:n.planType)===Je.FREE?Ve(t,"3178812292",{disableExposureLog:e}):Ve(t,"3703416703",{disableExposureLog:e}):Ve(t,"2861477803",{disableExposureLog:e})},HJ=(t=Hn())=>{const e=yd().fConversationEndpoint;return e==="convo2"?!0:e==="convo1"?!1:xe(t,"4154476537")?!0:NI(t,!0).get("use_f_prepare",!1)},t1=(t=Hn(),e=!1)=>{const n=yd().fConversationEndpoint;return n==="convo2"?!0:n==="convo1"?!1:xe(t,"4154476537")?!0:NI(t,e).get("use_f_convo",!1)},WJ=()=>{var t;return(t=Um().fast_search)!=null?t:!1},C2=(t=Hn())=>xe(t,"2881402514");function kw(t,e){mb.setState(n=>{const s=n.threads[t];if(s)s.prepareRequestBlocked=e,e||(s.lastCompletionFinishedTimestamp=performance.now());else{const o=jt(t);if(o){const a=n.threads[o];a&&(a.prepareRequestBlocked=e,e||(a.lastCompletionFinishedTimestamp=performance.now()))}}})}const wc="starredConversations",om=5,Ns="snorlaxConversations";var RE;const eze=ct.div(RE||(RE=rt(["text-sm text-red-500"]))),zJ=5,qJ=25,YJ=40,ZJ=t=>{switch(t){case Je.FREE:return zJ;case Je.GO:case Je.PLUS:case Je.EDUCATION_CBP:case Je.QUORUM:case Je.DEPRECATED_EDU:case Je.K12:return qJ;case Je.DEPRECATED_ENTERPRISE:case Je.PRO:case Je.SELF_SERVE_BUSINESS:case Je.ENTERPRISE_CBP:return YJ}};function tze({accountPlanType:t,numFiles:e}){return!t||![Je.FREE,Je.GO,Je.PLUS].includes(t)?!1:e>=ZJ(t)}const eg=28,xo="conversationHistory",Mw="conversation-history",KJ=1,n1=xs(()=>Qe([]));function QJ(t,e,n){if(!xe(t,"1753085879"))return;n1(t).set(o=>{const a=o.findIndex(i=>i.conversationId===e);if(a!==-1){const i=o.slice();return i[a]=B(w({},i[a]),{title:n}),i}return[{conversationId:e,title:n},...o]})}function w2(){return R6({queryKey:[xo],queryFn:async({pageParam:t})=>{const e=await pe.safeGet("/conversations",{parameters:{query:{offset:t,limit:eg,order:"updated",is_archived:!1,is_starred:!1}},intercomEventOnError:"fetch-error:conversations:get",authOption:qt.SendIfAvailable});return Oe.addFirstTiming("load.conversationHistory"),ba(()=>{const n=n1(Hn()),s=hn(()=>n());for(const o of e.items){if(o.async_status!=null){const a=ht(Hn(),o.id);b2(a,{source:ns.SERVER,value:o.async_status})}s.some(a=>a.conversationId===o.id)&&n.set(a=>a.filter(i=>i.conversationId!==o.id))}}),e},initialPageParam:0,getNextPageParam:t=>{var n,s,o;const e=((n=t.offset)!=null?n:0)+((s=t.limit)!=null?s:0);return e<((o=t.total)!=null?o:0)?e:void 0}})}function k2(t){"use forget";var ae,ce;const e=H.c(45);let n;e[0]!==t?(n=t===void 0?{}:t,e[0]=t,e[1]=n):n=e[1];const s=n,{buckets:o,recentConversationLimit:a}=s,i=Ia();let l;e[2]!==i?(l=(ae=i==null?void 0:i.includes(nQ))!=null?ae:!1,e[2]=i,e[3]=l):l=e[3];const c=l,d=G();let u;e[4]!==d?(u=ut(d),e[4]=d,e[5]=u):u=e[5];const f=!c&&!!u,p=J(),g=bi();let h;e[6]!==d?(h=()=>n1(d)(),e[6]=d,e[7]=h):h=e[7];const x=ue(h),y=g;let b;e[8]===Symbol.for("react.memo_cache_sentinel")?(b=[xo],e[8]=b):b=e[8];const v=fb(Mw,KJ,b);let S;e[9]===Symbol.for("react.memo_cache_sentinel")?(S=w2(),e[9]=S):S=e[9];const C=y?"always":!0,k=y?"always":!0;let M;e[10]!==f||e[11]!==v||e[12]!==C||e[13]!==k?(M=B(w({},S),{enabled:f,refetchOnReconnect:C,refetchOnWindowFocus:k,placeholderData:v}),e[10]=f,e[11]=v,e[12]=C,e[13]=k,e[14]=M):M=e[14];const{data:T,fetchNextPage:E,hasNextPage:A,isLoading:N,isFetchingNextPage:R,isError:O,refetch:D}=vi(M);let F,V;e[15]!==d||e[16]!==O?(F=()=>{O&&PG(d,Mw)},V=[O,d],e[15]=d,e[16]=O,e[17]=F,e[18]=V):(F=e[17],V=e[18]),_.useEffect(F,V);let z;if(e[19]!==(T==null?void 0:T.pages)||e[20]!==x){const ye=(ce=T==null?void 0:T.pages.flatMap(XJ))!=null?ce:[];z=[...x.map(JJ).filter(Ce=>!ye.some(ee=>ee.id===Ce.id)),...ye],e[19]=T==null?void 0:T.pages,e[20]=x,e[21]=z}else z=e[21];const $=z;let Y;e[22]!==$||e[23]!==a?(Y=$.slice(0,a!=null?a:5),e[22]=$,e[23]=a,e[24]=Y):Y=e[24];const Z=Y;let Q;e[25]!==p?(Q=p.formatMessage(xu.historyBucketRecent),e[25]=p,e[26]=Q):Q=e[26];let q;e[27]!==Z||e[28]!==Q?(q={key:"recents",label:Q,items:Z},e[27]=Z,e[28]=Q,e[29]=q):q=e[29];const X=q,oe=eX($);let se;e[30]!==oe||e[31]!==o||e[32]!==T?(se=!T||!o?[]:oe,e[30]=oe,e[31]=o,e[32]=T,e[33]=se):se=e[33];const de=se;let ie;return e[34]!==$||e[35]!==T||e[36]!==E||e[37]!==A||e[38]!==O||e[39]!==R||e[40]!==N||e[41]!==X||e[42]!==D||e[43]!==de?(ie={buckets:de,conversations:$,data:T,fetchNextPage:E,hasNextPage:A,refetch:D,recents:X,isLoading:N,isFetchingNextPage:R,isError:O},e[34]=$,e[35]=T,e[36]=E,e[37]=A,e[38]=O,e[39]=R,e[40]=N,e[41]=X,e[42]=D,e[43]=de,e[44]=ie):ie=e[44],ie}function JJ(t){return{id:t.conversationId,title:t.title}}function XJ(t){return t.items}function eX(t){"use forget";const e=H.c(7),n=J();let s;e[0]!==t||e[1]!==n?(s=oX(t,n),e[0]=t,e[1]=n,e[2]=s):s=e[2];const o=s;let a;return e[3]!==o.dynamicMonths||e[4]!==o.dynamicYears||e[5]!==o.recent?(a=[o.recent,o.dynamicMonths,o.dynamicYears].flatMap(nX).filter(tX),e[3]=o.dynamicMonths,e[4]=o.dynamicYears,e[5]=o.recent,e[6]=a):a=e[6],a}function tX(t){return t.items.length>0}function nX(t){return Object.entries(t).map(sX)}function sX(t,e){const[n,s]=t,{items:o,label:a}=s;return{key:"".concat(n,"-").concat(e),label:a,items:o}}function oX(t,e){return t.reduce((n,s)=>{var i,l;const o=new Date((l=(i=s.update_time)!=null?i:s.create_time)!=null?l:0),a=pb(new Date,o);if(a===0)n.recent.today.items.push(s);else if(a<=1)n.recent.yesterday.items.push(s);else if(a<=7)n.recent.lastSeven.items.push(s);else if(a<=30)n.recent.lastThirty.items.push(s);else if(IG(o)){const c=EC(o),d=jG(o),u="".concat(c,"-").concat(d);n.dynamicMonths[u]?n.dynamicMonths[u].items.push(s):n.dynamicMonths[u]={label:e.formatDate(o,{month:"long"}),items:[s]}}else{const c=EC(o),d="".concat(c,"-");n.dynamicYears[d]?n.dynamicYears[d].items.push(s):n.dynamicYears[d]={label:e.formatDate(o,{year:"numeric"}),items:[s]}}return n},{recent:{today:{label:e.formatMessage(xu.historyBucketToday),items:[]},yesterday:{label:e.formatMessage(xu.historyBucketYesterday),items:[]},lastSeven:{label:e.formatMessage(xu.historyBucketLastSeven),items:[]},lastThirty:{label:e.formatMessage(xu.historyBucketLastThirty),items:[]}},dynamicMonths:{},dynamicYears:{}})}function ro(t,e){t.invalidateQueries({queryKey:[xo]}),t.invalidateQueries({queryKey:[wc]}),e?t.invalidateQueries({queryKey:[Ns,{gizmoId:e}]}):t.invalidateQueries({queryKey:[Ns]})}function aX(t,e){e&&$s(e)&&t.invalidateQueries({queryKey:[Ns,{gizmoId:e}]})}function rX(t,e,n){Qo(t).setQueryData(w2().queryKey,s=>{if(s!==void 0){if(!Array.isArray(s.pages)){Oe.addError("Bad conversation history",{pages:s.pages});return}return dh(s,o=>{for(const a of o.pages)for(const i of a.items)i.id===e&&(i.title=n)})}})}const xu=be({historyBucketRecent:{id:"history.bucket.recent",defaultMessage:"Recent"},historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}});function s1(t,e,n,s){qe(e,o=>{o.title=n,o.titleSource=s}),nl.publish({kind:"updateThreadTitle",conversationId:e}),rX(t,e,n)}function iX(t){window.history.pushState({},"",t)}function lX(t,e,n){const o=me.getCurrentNode(ft(e)).message.id;pe.safePost("/conversation/gen_title/{conversation_id}",{parameters:{path:{conversation_id:e}},requestBody:{message_id:o},intercomEventOnError:"fetch-error:conversation:generate-title",authOption:qt.SendIfAvailable}).then(({title:a})=>{const i=me.getGizmoId(ft(e));s1(t,e,a,bm.Generated),ro(Qo(t),i),U.logEvent("Rename Thread",{threadId:e,content:a,model:n})})}function M2(t,e,n,s,o){var d;const a=ft(n),i=me.getGizmoId(a),c=(d=new URLSearchParams(window.location.search).get(ly))!=null?d:void 0;i!=null?NG(e,i).then(u=>{if(s){const m=u.gizmo;t(pa(n,{project:m,superWidgetTab:c}));return}iX(pa(n,{gizmo:u,superWidgetTab:c}))}).catch(u=>{Oe.addError(u),t(pa(n,{superWidgetTab:c}))}):t(pa(n,{superWidgetTab:c}))}var la=(t=>(t.Unavailable="unavailable",t.Thinking="thinking",t.Generating="generating",t.AsyncGenerating="async_generating",t.AsyncHanging="async_hanging",t.Complete="complete",t.Errored="errored",t.Empty="empty",t))(la||{});const cX=["generating","async_generating","async_hanging","thinking"],dX="sj1i4kz",ll="".concat(oo.T2UAY3K,".").concat(dX);function o1(t){return t.author.role==="tool"&&t.author.name===ll&&t.content.content_type===dt.MultimodalText}function uX(t,{skipSort:e}={skipSort:!1}){let n=t.filter(a=>{var i;return o1(a)&&!((i=a.metadata)!=null&&i.is_visually_hidden_from_conversation)});e||(n=[...n].sort((a,i)=>{var l,c,d,u;return((c=(l=a.metadata)==null?void 0:l.generation_index)!=null?c:0)-((u=(d=i.metadata)==null?void 0:d.generation_index)!=null?u:0)}));const s=n.flatMap(a=>pr.getImageAssetPointers(a)),o=n.map(a=>a.id);return{imageAssetPointers:s,messageIds:o}}const RI=(t,e)=>{var h,x,y,b,v;const n=t.find(S=>{var C;return S.author.role===Ze.Tool&&[dt.Error,dt.SystemError].includes(S.content.content_type)||((C=S.metadata)==null?void 0:C.is_error)}),{imageAssetPointers:s}=uX(t),o=s.length>0,i=t.some(S=>o1(S))&&!o,l=t.some(S=>{var T,E;if((T=S.metadata)!=null&&T.image_gen_async)return!1;const C=S.author.name===oo.IMAGE_GEN_HALLUCINATED||S.author.name===ll,k=S.content.content_type===dt.Text,M=!!((E=S.metadata)!=null&&E.is_visually_hidden_from_conversation);return C&&k&&M}),c=t.length>0&&!!((x=(h=t[t.length-1])==null?void 0:h.metadata)!=null&&x.image_gen_async),u=!t.some(S=>{var C;return[ll,oo.IMAGE_GEN_HALLUCINATED].includes((C=S.author.name)!=null?C:"")&&S.content.content_type===dt.MultimodalText})&&t.some(S=>{var M;const C=[ll,oo.IMAGE_GEN_HALLUCINATED].includes((M=S.author.name)!=null?M:""),k=S.recipient==="assistant";return C&&k});let m=0;for(const S of s){const C=S.height,k=(v=(b=(y=S.metadata)==null?void 0:y.generation)==null?void 0:b.height)!=null?v:void 0;m+=C!==void 0&&k!==void 0?k/C:0}const f=s.length>0?m/s.length:0,p=n!==void 0,g=e?la.AsyncGenerating:la.AsyncHanging;if(i||l||u)return la.Empty;if(p)return la.Errored;if(f){if(f<1)return c?g:la.Generating;if(f===1)return la.Complete}else return c?g:la.Thinking;return la.Unavailable},mX=t=>RI([t],!0)===la.Complete,fX=t=>t.author.role===Ze.Assistant&&t.recipient===ll;function nze(t){return(t.author.name===ll||fX(t))&&cX.includes(RI([t],!0))}const pX=j(()=>I(()=>import("./fp27qqwhg12gsehb.js").then(t=>t._),__vite__mapDeps([128,1])),{loading:t=>L(t)}),gX=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),hX=j(()=>I(()=>import("./d5ow8gf4p19sa04c.js").then(t=>t._),__vite__mapDeps([130,1])),{loading:t=>L(t)});function _X(t){"use forget";const e=H.c(29),{onClose:n,effect:s}=t,o=ue(kX),a=_.useRef(!1);let i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{a.current||(a.current=!0,U.logEvent("SMHRK Intervention: Helpline Modal Opened",{}))},l=[],e[0]=i,e[1]=l):(i=e[0],l=e[1]),_.useEffect(i,l);const c=wX;let d;if(e[2]!==s.text){const k=s.text.split(/\n+/).map(CX);d=[];let M=null;for(const T of k){const E=T.match(/^[-]\s+(.*)$/);E?(M==null&&(M=[]),M.push(E[1])):(M&&(d.push({type:"ul",content:M}),M=null),T&&d.push({type:"p",content:[T]}))}if(M){let T;e[4]!==M?(T={type:"ul",content:M},e[4]=M,e[5]=T):T=e[5],d.push(T)}e[2]=s.text,e[3]=d}else d=e[3];const u=d;let m;e[6]!==n?(m=()=>{pe.safePost("/sentinel/modal_ack",{authOption:qt.SendIfAvailable}).catch(SX),n()},e[6]=n,e[7]=m):m=e[7];const f=m,p=s.title;let g;e[8]!==u?(g=r.jsx("div",{className:"text-token-text-secondary space-y-3",children:u.map(vX)}),e[8]=u,e[9]=g):g=e[9];let h;if(e[10]!==s.helplines||e[11]!==o){let k;e[13]!==o?(k=(M,T)=>{var E,A;return r.jsxs("div",{className:"border-token-border-heavy rounded-lg border p-4",children:[r.jsx("div",{className:"text-base font-semibold",children:M.name}),M.description?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm",children:M.description}):null,r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:(A=o?M.links:(E=M.links)==null?void 0:E.filter(yX))==null?void 0:A.map((N,R)=>r.jsxs(he,{as:"a",to:MX(N.kind,N.href),openNewTab:N.kind==="url"||N.kind==="chat",color:N.kind==="call"?"secondary":"ghost",className:N.kind==="call"?void 0:"border-token-border-heavy border",size:"small",label:N.label,onClick:()=>c(M.name,N.href,N.kind),children:[TX(N.kind),N.label]},R))})]},T)},e[13]=o,e[14]=k):k=e[14],h=s.helplines.map(k),e[10]=s.helplines,e[11]=o,e[12]=h}else h=e[12];let x;e[15]!==h?(x=r.jsx("div",{className:"flex flex-col gap-4",children:h}),e[15]=h,e[16]=x):x=e[16];let y;e[17]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("div",{className:"text-token-text-tertiary mt-1 text-xs",children:r.jsx(P,B(w({},Tw.disclaimer),{values:{link:xX}}))}),e[17]=y):y=e[17];let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(P,w({},Tw.close)),e[18]=b):b=e[18];let v;e[19]!==f?(v=r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsx(he,{as:"button",color:"primary-inverse",onClick:f,size:"large",children:b})}),e[19]=f,e[20]=v):v=e[20];let S;e[21]!==v||e[22]!==g||e[23]!==x?(S=r.jsxs("div",{className:"flex flex-col gap-4 px-6 ps-6 pt-4 pb-6",children:[g,x,y,v]}),e[21]=v,e[22]=g,e[23]=x,e[24]=S):S=e[24];let C;return e[25]!==s.title||e[26]!==n||e[27]!==S?(C=r.jsx(Pt,{testId:"modal-crisis-helpline",isOpen:!0,onClose:n,title:p,showCloseButton:!1,noPadding:!0,position:"center",size:"custom",className:"max-w-[640px]",headerClassName:"ps-6 pe-6 pt-6 pb-0",shouldIgnoreClickOutside:!0,children:S}),e[25]=s.title,e[26]=n,e[27]=S,e[28]=C):C=e[28],C}function xX(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/12315645",target:"_blank",rel:"noreferrer",className:"underline",children:t})}function yX(t){return t.kind!=="call"&&t.kind!=="text"}function vX(t,e){return t.type==="p"?r.jsx("p",{className:"text-pretty",children:t.content[0]},"p-".concat(e)):r.jsx("ul",{className:"list-disc space-y-2 ps-5",children:t.content.map(bX)},"ul-".concat(e))}function bX(t,e){return r.jsx("li",{children:t},e)}function SX(){}function CX(t){return t.trim()}function wX(t,e,n){U.logEvent("SMHRK Intervention: Helpline Modal Button Clicked",{helplineName:t,linkHref:e,linkKind:n})}function kX(){return X6()}function MX(t,e){switch(t){case"call":return e.startsWith("tel:")?e:"tel:".concat(e);case"text":return e.startsWith("sms:")?e:"sms:".concat(e);default:return e}}const Tw=be({close:{id:"crisisHelplineModal.close",defaultMessage:"Close"},disclaimer:{id:"crisisHelplineModal.disclaimer",defaultMessage:"Services unaffiliated with ChatGPT"}});function TX(t){const e=t==="call"?pX:t==="text"||t==="chat"?hX:gX;return r.jsx(e,{className:"icon-sm me-1","aria-label":""})}const EX=["notificationSettings"];class AX{static async getOrCreateSubscription({endpoint:e,p256dh:n,auth:s}){return pe.safePost("/notifications/subscription/register",{requestBody:{platform:"web",web_metadata:{endpoint:e,p256dh:n},token:s}})}static async getSettings(){return pe.safeGet("/notifications/settings")}static async updateSettings(e){const o=e,{category:n}=o,s=Me(o,["category"]);return pe.safePatch("/notifications/settings",{requestBody:{updates:{[n]:s}}})}}const IX=1e4,T2=Nt(Cn(()=>({notifications:[]}))),tg=t=>{var s;const e=crypto.randomUUID();T2.setState(o=>{o.notifications.push(B(w({},t),{id:e}))});const n=(s=t.timeout)!=null?s:IX;setTimeout(()=>{E2(e)},n)},E2=t=>{T2.setState(e=>{e.notifications=e.notifications.filter(n=>n.id!==t)})},sze=({onSuccess:t,alwaysRefetchOnMount:e=!1})=>lt({queryKey:EX,queryFn:async()=>{const s=(await AX.getSettings()).settings;return t==null||t(s),s},refetchOnMount:e?"always":!0});function jX(t,e){if(t.length<=e)return t;const n=t.slice(0,Math.min(t.length,e+20)),s=n.lastIndexOf("."),o=n.lastIndexOf("!"),a=n.lastIndexOf("?"),i=Math.max(s,o,a);if(i>0&&i<=e&&i>=Math.floor(e*.4))return t.slice(0,i+1).trim()+"";const l=t.lastIndexOf(" ",e);return l>Math.floor(e*.25)?t.slice(0,l).trim()+"":t.slice(0,e).trim()+""}class PX{constructor(e){ne(this,"activeSystemHintSuggestionChips$",Qe([]));this.conversation=e,this.conversation=e}addActiveSystemHintSuggestionChips(e){const n=e.filter(s=>!this.activeSystemHintSuggestionChips$().some(o=>o.systemHint===s.systemHint));n.length&&this.activeSystemHintSuggestionChips$.set(s=>[...s!=null?s:[],...n])}removeActiveSystemHintSuggestionChip(e){this.activeSystemHintSuggestionChips$.set(s=>[...(s!=null?s:[]).filter(o=>o.systemHint!==e.systemHint)]);const n=e==null?void 0:e.systemHint;n&&pe.safePost("/system_hints/suggestion_cooldown",{requestBody:{system_hint:n}})}clearActiveSystemHintSuggestionChips(){this.activeSystemHintSuggestionChips$.set([])}}const am=_d(t=>new PX(t));class A2{static async getTask({taskId:e}){return pe.safeGet("/task/{task_id}",{parameters:{path:{task_id:e}}})}static async cancelTask({taskId:e}){return pe.safePost("/task/cancel",{requestBody:{task_id:e}})}static async answerNowTask({taskId:e}){return pe.safePost("/task/answer_now",{requestBody:{task_id:e}})}static async getTasks({cursor:e}){return pe.safeGet("/tasks",{parameters:{query:{cursor:e!=null?e:null}}})}static async addResultMessage({taskId:e,parentConversationId:n,leafNodeToAppendTo:s}){return pe.safePost("/task/add_result_message",{requestBody:{task_id:e,parent_conversation_id:n,leaf_node_to_append_to:s}})}static async interruptTask({taskId:e,prompt:n}){return pe.safePost("/task/interrupt",{requestBody:{task_id:e,prompt:n}})}static async addResultMessageToCanvas({taskId:e,parentConversationId:n,leafNodeToAppendTo:s}){return pe.safePost("/task/add_result_message_to_canvas",{requestBody:{task_id:e,parent_conversation_id:n,leaf_node_to_append_to:s}})}}async function NX(t,e){const n=t.getReader();let s;for(;!(s=await n.read()).done;)e(s.value)}function RX(t){let e,n,s,o=!1;return function(i){e===void 0?(e=i,n=0,s=-1):e=OX(e,i);const l=e.length;let c=0;for(;n<l;){o&&(e[n]===10&&(c=++n),o=!1);let d=-1;for(;n<l&&d===-1;++n)switch(e[n]){case 58:s===-1&&(s=n-c);break;case 13:o=!0;case 10:d=n;break}if(d===-1)break;t(e.subarray(c,d),s),c=n,s=-1}c===l?e=void 0:c!==0&&(e=e.subarray(c),n-=c)}}function LX(t,e,n){let s=Ew();const o=new TextDecoder;return function(i,l){if(i.length===0)n==null||n(s),s=Ew();else if(l>0){const c=o.decode(i.subarray(0,l)),d=l+(i[l+1]===32?2:1),u=o.decode(i.subarray(d));switch(c){case"data":s.data=s.data?s.data+"\n"+u:u;break;case"event":s.event=u;break;case"id":t(s.id=u);break;case"retry":const m=parseInt(u,10);isNaN(m)||e(s.retry=m);break}}}}function OX(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Ew(){return{data:"",event:"",id:"",retry:void 0}}var DX=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(t);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(t,s[o])&&(n[s[o]]=t[s[o]]);return n};const ng="text/event-stream",FX=1e3,Aw="last-event-id";function LI(t,e){var{signal:n,headers:s,onopen:o,onmessage:a,onclose:i,onerror:l,openWhenHidden:c,fetch:d}=e,u=DX(e,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((m,f)=>{const p=Object.assign({},s);p.accept||(p.accept=ng);let g;function h(){g.abort(),document.hidden||C()}c||document.addEventListener("visibilitychange",h);let x=FX,y=0;function b(){document.removeEventListener("visibilitychange",h),window.clearTimeout(y),g.abort()}n==null||n.addEventListener("abort",()=>{b(),m()});const v=d!=null?d:window.fetch,S=o!=null?o:BX;async function C(){var k;g=new AbortController;try{const M=await v(t,Object.assign(Object.assign({},u),{headers:p,signal:g.signal}));await S(M),await NX(M.body,RX(LX(T=>{T?p[Aw]=T:delete p[Aw]},T=>{x=T},a))),i==null||i(),b(),m()}catch(M){if(!g.signal.aborted)try{const T=(k=l==null?void 0:l(M))!==null&&k!==void 0?k:x;window.clearTimeout(y),y=window.setTimeout(C,T)}catch(T){b(),f(T)}}}C()})}function BX(t){const e=t.headers.get("content-type");if(!(e!=null&&e.startsWith(ng)))throw new Error("Expected content-type to be ".concat(ng,", Actual: ").concat(e))}var P_,Iw;function UX(){if(Iw)return P_;Iw=1;var t=eA(),e=gb();function n(s,o){var a=-1,i=e(s)?Array(s.length):[];return t(s,function(l,c,d){i[++a]=o(l,c,d)}),i}return P_=n,P_}var N_,jw;function VX(){if(jw)return N_;jw=1;function t(e,n){var s=e.length;for(e.sort(n);s--;)e[s]=e[s].value;return e}return N_=t,N_}var R_,Pw;function GX(){if(Pw)return R_;Pw=1;var t=RG();function e(n,s){if(n!==s){var o=n!==void 0,a=n===null,i=n===n,l=t(n),c=s!==void 0,d=s===null,u=s===s,m=t(s);if(!d&&!m&&!l&&n>s||l&&c&&u&&!d&&!m||a&&c&&u||!o&&u||!i)return 1;if(!a&&!l&&!m&&n<s||m&&o&&i&&!a&&!l||d&&o&&i||!c&&i||!u)return-1}return 0}return R_=e,R_}var L_,Nw;function $X(){if(Nw)return L_;Nw=1;var t=GX();function e(n,s,o){for(var a=-1,i=n.criteria,l=s.criteria,c=i.length,d=o.length;++a<c;){var u=t(i[a],l[a]);if(u){if(a>=d)return u;var m=o[a];return u*(m=="desc"?-1:1)}}return n.index-s.index}return L_=e,L_}var O_,Rw;function HX(){if(Rw)return O_;Rw=1;var t=tA(),e=LG(),n=hb(),s=UX(),o=VX(),a=OG(),i=$X(),l=xd(),c=uh();function d(u,m,f){m.length?m=t(m,function(h){return c(h)?function(x){return e(x,h.length===1?h[0]:h)}:h}):m=[l];var p=-1;m=t(m,a(n));var g=s(u,function(h,x,y){var b=t(m,function(v){return v(h)});return{criteria:b,index:++p,value:h}});return o(g,function(h,x){return i(h,x,f)})}return O_=d,O_}var D_,Lw;function OI(){if(Lw)return D_;Lw=1;var t=xd(),e=DG(),n=FG();function s(o,a){return n(e(o,a,t),o+"")}return D_=s,D_}var F_,Ow;function a1(){if(Ow)return F_;Ow=1;var t=nA(),e=gb(),n=BG(),s=_b();function o(a,i,l){if(!s(l))return!1;var c=typeof i;return(c=="number"?e(l)&&n(i,l.length):c=="string"&&i in l)?t(l[i],a):!1}return F_=o,F_}var B_,Dw;function WX(){if(Dw)return B_;Dw=1;var t=UG(),e=HX(),n=OI(),s=a1(),o=n(function(a,i){if(a==null)return[];var l=i.length;return l>1&&s(a,i[0],i[1])?i=[]:l>2&&s(i[0],i[1],i[2])&&(i=[i[0]]),e(a,t(i,1),[])});return B_=o,B_}var zX=WX();const DI=Wn(zX);var Ms=(t=>(t.CANCELLED="cancelled",t.CREATED="created",t.RUNNING="running",t.COMPLETED="completed",t.FAILED="failed",t.FINALIZING="finalizing",t.UNDETERMINED="undetermined",t))(Ms||{}),pc=(t=>(t.UNKNOWN="unknown",t.RESEARCH="research",t.PRO_MODE="pro_mode",t.THINKING="thinking",t.IMAGE_GEN="image_gen",t))(pc||{});function qX(t){return t.status==="completed"}function YX(t){return t.status==="cancelled"||t.status==="failed"}function ZX(t){return t.status==="running"||t.status==="undetermined"||t.status==="created"||t.status==="finalizing"}function KX(t){return t.taskId.startsWith("promode_")?"pro_mode":t.taskId.startsWith("thinking_")?"thinking":t.taskId.startsWith("deepresch_")||t.taskId.startsWith("shishito_")?"research":t.taskId.startsWith("imagegen_")?"image_gen":"unknown"}function QX(t,e){var a;if(!qX(t))return null;const n=(a=e.update_time)!=null?a:e.create_time,s=n?new Date(n*1e3):null,o=t.updatedAt?new Date(t.updatedAt):null;return o?s?+o>+s?o:s:o:s}const ta=Nt(Cn(()=>({tasks:{},taskIdsByConversationId:{},taskStreams:{},researchShareIntent:null}))),Ui=ta.getState,Ys=ta.setState,Zn={setTask:(t,e)=>{Ys(n=>{var s;n.tasks[t]=e,n.taskIdsByConversationId[e.originalConversationId]=[...(s=n.taskIdsByConversationId[e.originalConversationId])!=null?s:[],t]})},setTaskStatus:(t,e)=>{Ys(n=>{if(n.tasks[t]){if(n.tasks[t].status==="cancelled")return;n.tasks[t].status=e}})},setTaskMetadataItems:({taskId:t,originalConversationId:e,responseMessageId:n,canvasTextdocId:s})=>{Ys(o=>{o.tasks[t]&&(o.tasks[t].originalConversationId=e,o.tasks[t].responseMessageId=n,o.tasks[t].responseCanvasTextdocId=s)})},loadBulkTasks:t=>{Ys(e=>{t.forEach(n=>{var o,a,i;const s=e.tasks[n.taskId];e.tasks[n.taskId]=B(w({},n),{rows:(o=s==null?void 0:s.rows)!=null?o:[],finalMessage:(a=s==null?void 0:s.finalMessage)!=null?a:Wo(n.messages)}),e.taskIdsByConversationId[n.originalConversationId]=[...(i=e.taskIdsByConversationId[n.originalConversationId])!=null?i:[],n.taskId]})})},addTaskRow:(t,e)=>{Ys(n=>{var a;const s=n.tasks[t];if(s==null)return;const o=[...(a=s.rows)!=null?a:[]];o.find(i=>i.id===e.id)||(o.push(e),s.rows=o)})},setTaskCompleted:(t,e)=>{Ys(n=>{var o;const s=n.tasks[t];s!=null&&(s.status!=="completed"&&(s.collapsed=!0),s.status="completed",s.updatedAt=((o=QX(s,e))==null?void 0:o.toString())||s.updatedAt,s.finalMessage=e,s.responseMessageId=e.id)})},setTaskRecentlyCompleted:t=>{Ys(e=>{const n=e.tasks[t];n!=null&&(n.notificationStatus||(n.notificationStatus={recentlyCompleted:!0,notificationSent:!1}),n.notificationStatus.recentlyCompleted=!0)})},setTaskNotificationSent:t=>{Ys(e=>{var n;(n=e.tasks[t])!=null&&n.notificationStatus&&(e.tasks[t].notificationStatus.notificationSent=!0)})},setResearchShareIntent:t=>{Ys(e=>{e.researchShareIntent=t})},setTaskTitle:(t,e)=>{Ys(n=>{n.tasks[t]&&(n.tasks[t].title=e)})},async retainTaskStream(t){var i;const n=Ui().taskStreams[t],s=(i=n==null?void 0:n.refCount)!=null?i:0;let o,a=null;s===0&&(o=new AbortController,a=see(t,o)),Ys(l=>{var d;const c=o||((d=l.taskStreams[t])==null?void 0:d.abortController);if(!c)throw Error("Missing abort controller");l.taskStreams[t]=B(w({},l.taskStreams[t]),{refCount:s+1,abortController:c})}),a&&await a},releaseTaskStream(t){Ys(e=>{const n=e.taskStreams[t];n&&(n.refCount-=1)})},abortTaskStream(t){Ys(e=>{const n=e.taskStreams[t];!n||n.refCount||(n.abortController.abort(),delete e.taskStreams[t])})}},Fw=[],hl={getTask:(t,e=Ui())=>e.tasks[t],getAllTasks:(t=Ui())=>Object.values(t.tasks).filter(e=>!!e),getAllTasksOrdered:(t=Ui())=>DI(hl.getAllTasks(t),e=>-new Date(e.createdAt)),hasTaskStreamEntry:(t,e=Ui())=>!!e.taskStreams[t],getTaskIdsByConversationId:(t,e=Ui())=>{var n;return t&&(n=e.taskIdsByConversationId[t])!=null?n:Fw},getResearchShareIntent:(t=Ui())=>t.researchShareIntent};function JX(t){var s,o,a,i,l;const e=t.task_id;return{conversationId:(s=t.conversation_id)!=null?s:"",taskId:e,title:t.title,prompt:t.prompt,createdAt:t.created_at,updatedAt:t.updated_at,status:t.status,messages:(o=t.messages)!=null?o:[],rows:[],originalConversationId:t.original_conversation_id,responseMessageId:(a=t.response_message_id)!=null?a:void 0,responseCanvasTextdocId:(i=t.response_canvas_textdoc_id)!=null?i:void 0,originalConversationUserMessageId:(l=t.original_conversation_user_message_id)!=null?l:void 0}}function XX(t){var e,n,s,o,a,i,l,c,d,u,m;switch(t.type){case"website_open":return{id:t.id,type:"websiteOpen",url:t.url,rowText:t.row_text,activeRowText:t.active_row_text,sanitizedUrl:(e=t.sanitized_url)!=null?e:null,created_at:(n=t.created_at)!=null?n:null};case"summary":return{id:t.id,type:"summary",title:t.title,summary:(s=t.summary)!=null?s:null,message:(o=t.message)!=null?o:null,created_at:(a=t.created_at)!=null?a:null};case"search":return{id:t.id,type:"search",query:(i=t.query)!=null?i:null,created_at:(l=t.created_at)!=null?l:null,urls:(c=t.urls)!=null?c:null};case"python_analysis":return{id:t.id,type:"pythonAnalysis",analysisSummary:(d=t.analysis_summary)!=null?d:null,created_at:(u=t.created_at)!=null?u:null};case"file_open":return{id:t.id,type:"fileOpen",fileName:t.file_name,iconType:t.icon_type,fileExt:t.file_ext,rowText:t.row_text,activeRowText:t.active_row_text,created_at:(m=t.created_at)!=null?m:null}}}function eee(){const t=vi({queryKey:["fetch-tasks"],queryFn:async({pageParam:e})=>{const n=await A2.getTasks({cursor:e});return Zn.loadBulkTasks(n.tasks.map(s=>JX(s)).filter(s=>s!==null)),n},initialPageParam:null,getNextPageParam:({cursor:e})=>e!=null?e:null,enabled:!0});return{isLoading:t.isLoading,isFetching:t.isFetching}}const tee=30,nee=30;async function see(t,e){if(hl.hasTaskStreamEntry(t))return!1;const s=Zu();s["content-type"]="application/json";let o=0,a=0;return LI("".concat(gr,"/tasks/").concat(t,"/stream"),{headers:s,signal:e.signal,openWhenHidden:!0,onopen:async i=>{if(!(i.ok&&i.headers.get("content-type")===ng))if(o<tee)o++;else throw new Error("Failure opening stream")},onmessage(i){const l=JSON.parse(i.data);if(l.task_status)Zn.setTaskStatus(l.task_id,l.task_status);else if(l.final_message)Zn.setTaskCompleted(t,l.final_message),l.was_recently_completed&&Zn.setTaskRecentlyCompleted(t);else if(l.row){const c=XX(l.row);c&&Zn.addTaskRow(t,c)}else l.title&&Zn.setTaskTitle(t,l.title)},onerror(i){if(a<nee){a++;return}throw e.abort(),i},onclose(){}}),!0}function oee(t){"use forget";const e=H.c(3);let n,s;e[0]!==t?(n=()=>{if(t)return Zn.retainTaskStream(t),()=>{Zn.releaseTaskStream(t)}},s=[t],e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]),_.useEffect(n,s)}function aee(t){"use forget";const e=H.c(2);let n;return e[0]!==t?(n=o=>hl.getTaskIdsByConversationId(t,o).map(a=>hl.getTask(a,o)).filter(iee).filter(ree),e[0]=t,e[1]=n):n=e[1],ta(n)}function ree(t){return t.status==="created"||t.status==="running"||t.status==="finalizing"}function iee(t){return t!==void 0}const lee=t=>{"use forget";var N;const e=H.c(12),{isOdysseyTurn:n,isMercuryTurn:s,hasMercurySystemHint:o,hasConduitToken:a,isProTurn:i,isDeepResearchTurn:l,isImageGenAsync:c,isImageGenSync:d,metadataNode:u,isInterruptionBlocked:m,requestId:f}=Ue(t,cee),p=G(),g=(N=u==null?void 0:u.message.metadata)==null?void 0:N.async_task_id,h=Jo(f);let x;e[0]!==g?(x=R=>g?R.tasks[g]:null,e[0]=g,e[1]=x):x=e[1];const y=ta(x);let b;e[2]!==p?(b=xe(p,"1439437954"),e[2]=p,e[3]=b):b=e[3];const v=b;let S;e[4]!==p||e[5]!==(y==null?void 0:y.status)?(S=(y==null?void 0:y.status)===Ms.RUNNING&&xe(p,"877631007"),e[4]=p,e[5]=y==null?void 0:y.status,e[6]=S):S=e[6];const C=S;let k;e[7]!==p||e[8]!==(y==null?void 0:y.status)?(k=((y==null?void 0:y.status)===Ms.RUNNING||(y==null?void 0:y.status)===Ms.FINALIZING)&&xe(p,"1927459101"),e[7]=p,e[8]=y==null?void 0:y.status,e[9]=k):k=e[9];const M=k;let T;e[10]!==p?(T=Ve(p,"3396794266").get("enable_interruption",!1),e[10]=p,e[11]=T):T=e[11];const A=T&&a&&!i&&!l&&!c&&!d;return m?!1:v||n||(s||o)&&!h||A||C||M},Od=()=>{"use forget";const t=H.c(2),e=G();let n;return t[0]!==e?(n=xe(e,"1927459101"),t[0]=e,t[1]=n):n=t[1],n},oze=()=>{"use forget";const t=H.c(2),e=G();let n;return t[0]!==e?(n=FI(e),t[0]=e,t[1]=n):n=t[1],n},FI=t=>xe(t,"877631007");function cee(t){var e,n,s,o,a,i,l,c,d,u,m,f,p,g,h,x,y;return{isOdysseyTurn:!!((n=(e=me.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message),isMercuryTurn:!!((o=(s=me.getCurrentNode(t))==null?void 0:s.message.metadata)!=null&&o.mercury_message),hasMercurySystemHint:!1,hasConduitToken:(t==null?void 0:t.conduitToken)!=null,isProTurn:!!(((a=me.getCurrentNode(t))==null?void 0:a.message.author.name)===oo.A8KM123||(c=(l=(i=me.getCurrentNode(t))==null?void 0:i.message.metadata)==null?void 0:l.model_slug)!=null&&c.endsWith("-pro")),isDeepResearchTurn:!!((u=(d=me.getCurrentNode(t))==null?void 0:d.message.metadata)!=null&&u.deep_research_version),isImageGenAsync:!!((f=(m=me.getCurrentNode(t))==null?void 0:m.message.metadata)!=null&&f.image_gen_async),isImageGenSync:((g=(p=me.getCurrentNode(t))==null?void 0:p.message.author)==null?void 0:g.role)===Ze.Assistant&&((h=me.getCurrentNode(t))==null?void 0:h.message.recipient)===ll,metadataNode:me.findAsyncTaskMetadataNode(t),isInterruptionBlocked:!!((y=(x=me.getCurrentNode(t))==null?void 0:x.message.metadata)!=null&&y.block_interruption),requestId:me.getRequestId(t)}}function dee(t,e){return e&&((t==null?void 0:t.kind)===Tt.GizmoInteraction||(t==null?void 0:t.kind)===Tt.PrimaryAssistant)?{gizmo_id:e,kind:Tt.GizmoInteraction}:t}function uee(t){return t==null||[Tt.PrimaryAssistant,Tt.GizmoInteraction].includes(t.kind)}function r1(t,e){"use forget";const n=H.c(5);let s;n[0]!==e?(s=i=>dee(i==null?void 0:i.mode,e),n[0]=e,n[1]=s):s=n[1];const o=Ue(t,s),{data:a}=Pa(o!=null&&"gizmo_id"in o?o.gizmo_id:void 0,(o==null?void 0:o.kind)===Tt.GizmoTest);if(o!=null)switch(o.kind){case Tt.GizmoInteraction:case Tt.GizmoMagicCreate:case Tt.GizmoTest:{let i;return n[2]!==o||n[3]!==a?(i=w({gizmo:a},o),n[2]=o,n[3]=a,n[4]=i):i=n[4],i}case Tt.FlyingCircusCustomization:case Tt.PrimaryAssistant:return o}}const mee="gpt-4",fee="oai/apps/capExpiresAt";Nt(()=>({serverThreadIds:new Set}));function pee(){const t=i1(o=>o.isoDate),e=Date.now(),n=t&&new Date(t).getTime(),s=t&&n&&n<=e;return _.useEffect(()=>{s&&BI()},[s]),s?null:t?mee:null}const i1=Nt()(sA(()=>({isoDate:""}),{name:fee}));function gee(t){i1.setState({isoDate:t})}function BI(){i1.setState({isoDate:""})}const sg=Nt(Cn(()=>null)),Qc={updateDetails:t=>{["beacon_banner_info","beacon_modal_info"].includes(t.ui_info.type)&&sg.setState(()=>w({},t),!0)},dismiss:()=>{sg.setState(()=>null,!0)}};function UI(){return sg(t=>(t==null?void 0:t.ui_info.type)==="beacon_banner_info"?t:null)}function hee(){return sg(t=>(t==null?void 0:t.ui_info.type)==="beacon_modal_info"?t:null)}const _ee=t=>{const e=Object.entries(t.mapping).find(([n])=>n==="");if(e!==void 0){const n=qi(t),[,s]=e,o=s.children;n.mapping["client-created-root"]=B(w({},s),{id:"client-created-root"}),delete n.mapping[""];for(const a of o)n.mapping[a].parent="client-created-root";return n}return t},aze=t=>(t.parent_message_id==="client-created-root"&&delete t.parent_message_id,t),I2={};function rze(t,e){I2[t]=e}function xee(t){var e;return(e=I2[t])!=null?e:null}function VI(t){return t in I2}async function ka(t,e={}){const n=xee(t),s={};e.projectId&&$s(e.projectId)&&(s["chatgpt-project-id"]=e.projectId,e.ownerUserId&&(s["chatgpt-conv-owner-id"]=e.ownerUserId));const o=n!=null?n:await pe.safeGet("/conversation/{conversation_id}",w({parameters:{path:{conversation_id:t}},intercomEventOnError:"fetch-error:conversations:get",authOption:qt.SendIfAvailable},s?{additionalHeaders:s}:{}));n||Oe.addTiming("chatgpt.web.chatPage.loadExistingConversation");const a=_ee(o);return hr.updateThreadFromServer(t,a,{skipIfExisting:e==null?void 0:e.skipIfExisting}),Ps(a.conversation_id,a.async_status?{source:ns.SERVER,value:a.async_status}:null),a}const l1=o=>{var a=o,{clientThreadId:t,alwaysForceUpdate:e=!1,onError:n}=a,s=Me(a,["clientThreadId","alwaysForceUpdate","onError"]);return io({queryKey:["conversation",t],queryFn:()=>ka(t,B(w({},s),{skipIfExisting:!e})).catch(i=>{throw n==null||n(i),i})})},Bw="atlas",yee="side_chat",vee="new_tab_page",bee=window.location.host;function GI(t){return hn(()=>un(t)?{app_name:Bw,app_surface:yee}:Cr(t)?{app_name:Bw,app_surface:vee}:{app_name:bee})}const See="https://help.openai.com/en/articles/8590148-memory-faq",Zi=80,Tf=100;function Cee(t){return t==="cold"?"cold":"warm"}function wee(t){return t==="user"?"user":"assistant"}function $I(t){const e=t.last_updated,n=s=>s?{actor:wee(s.actor),timestamp:s.timestamp}:null;return B(w({},t),{status:Cee(t.status),last_updated:n(e)})}function og(t){if(!(!t||t.length===0))return Array.from(t).sort()}function HI(t,e=!0,n,s,o){const a=s?void 0:og(n),i=s?void 0:og(o);return["memories",w(w(w({gizmoId:t,includeMemoryEntries:e},a?{contextScopes:a}:{}),i?{requiredContextScopes:i}:{}),s?{memoryEntriesFilter:s}:{})]}function Vm(t,e=!0,n=!0,s,o,a){const i=o?void 0:og(s),l=o?void 0:og(a);return lt({queryKey:HI(t,e,i,o,l),queryFn:async()=>{const c={gizmo_id:t,include_memory_entries:e};o?c.memory_entries_filter=o:(i&&(c.context_scopes=i),l&&(c.required_context_scopes=l));const d=await pe.safeGet("/memories",{parameters:{query:c}}),u=Math.min(Math.floor(100*d.memory_num_tokens/d.memory_max_tokens),100);return B(w({},d),{memoryFullPct:u,memories:d.memories.map(m=>$I(m))})},refetchOnMount:"always",enabled:n})}function WI(t=50){return["memory_history",{limit:t}]}function ize(t=50,e=!0){return lt({queryKey:WI(t),queryFn:async()=>{const n=await pe.safeGet("/memories/history",{parameters:{query:{limit:t}}}),s=Array.isArray(n.history)?n.history:[];return B(w({},n),{history:s.map(o=>B(w({},o),{memories:o.memories.map(a=>$I(a))}))})},refetchOnMount:"always",enabled:e})}function j2(t,e,n=!1){var l;const s="684023316",a=(l=Ve(t,s,{disableExposureLog:!0}).get("memory_almost_full_threshold",Zi))!=null?l:Zi;if((e!=null?e:0)<a)return"control";const i=Ve(t,s);return n?{threshold:a,layer:i.get("upsell_variant","control")}:i.get("upsell_variant","control")}function kee(t,e=!0){return Ve(t,"684023316",{disableExposureLog:e}).get("upsell_variant","control")}const Mee=(t,e)=>{window.__reactRouterDataRouter.navigate(t,e)};let Ki=null;const Tee=2e3,P2=Sm(Le.PendingSurveySpec,()=>null);function Eee(){return mt.getItem(Le.PendingSurveySpec)}function Aee(t){Ki&&clearTimeout(Ki),Ki=setTimeout(()=>{Ki=null,P2.set(t)},Tee)}function zI(){P2.set(null),Ki&&(clearTimeout(Ki),Ki=null)}const kc=Nt(t=>({survey:null,triggered:!1,setSurvey:e=>t({survey:e}),setTriggered:e=>t({triggered:e})}));function Iee(){const{setTriggered:t}=kc.getState();t(!0)}function jee(){const t=kc(a=>a.survey),e=kc(a=>a.triggered),n=kc(a=>a.setSurvey),s=kc(a=>a.setTriggered);return _.useEffect(()=>{if(!e||t)return;const a=Eee();zI(),n(a)},[t,e,n]),{survey:t,finishSurvey:()=>{n(null),s(!1)}}}function Pee(){const t=kc(o=>o.setTriggered),e=ue(()=>P2()),n=ls(),s=_.useRef(null);_.useEffect(()=>{if(typeof document<"u"&&document.visibilityState!=="visible"){t(!1);return}if(!e){t(!1);return}n.pathname==="/"&&n.key!==s.current&&(s.current=n.key,t(!0))},[n.key,n.pathname,t,e])}function Uw(t){return!(t.type==="perf_stats"||t.type==="server_ste_metadata"||t.type==="message_marker")}let Hi=null;const Nee="".concat(oA,".suggest_agent");async function N2(){return Hi==null&&(Hi=await VG()),Hi!=null?Hi:[]}function bp(t){return Hi==null?!1:Hi.includes(t)}function Ree(t){let e=2166136261;for(let n=0;n<t.length;n++)e^=t.charCodeAt(n),e=Math.imul(e,16777619)>>>0;return e^=e>>>16,e=Math.imul(e,2246822507)>>>0,e^=e>>>13,e=Math.imul(e,3266489909)>>>0,e^=e>>>16,(e>>>0).toString(16).padStart(8,"0")}class Lee{constructor(){ne(this,"answers",new Map);ne(this,"maxAttempts",5e5);ne(this,"requirementsSeed",Oee());ne(this,"sid",_s());ne(this,"errorPrefix","wQ8Lk5FbGpA2NcR9dShT6gYjU7VxZ4D");ne(this,"_runCheck",(e,n,s,o,a)=>{o[3]=a,o[9]=Math.round(performance.now()-e);const i=Ef(o);return Ree(n+i).substring(0,s.length)<=s?i+"~S":null})}async initializeAndGatherData(e){this._getAnswer(e)}async startEnforcement(e){this._getAnswer(e)}getEnforcementTokenSync(e){const n=this._getAnswer(e);return typeof n=="string"?n:null}async getEnforcementToken(e,n){return this._getAnswer(e,n==null?void 0:n.forceSync)}async getRequirementsToken(){return this.answers.has(this.requirementsSeed)||this.answers.set(this.requirementsSeed,this._generateAnswerAsync(this.requirementsSeed,"0")),"gAAAAAC"+await this.answers.get(this.requirementsSeed)}getRequirementsTokenBlocking(){return"gAAAAAC"+this._generateRequirementsTokenAnswerBlocking()}_getAnswer(e,n=!1){var l;const s="gAAAAAB";if(!((l=e==null?void 0:e.proofofwork)!=null&&l.required))return null;const{seed:o,difficulty:a}=e.proofofwork;if(!(typeof o=="string"&&typeof a=="string"))return null;const i=this.answers.get(o);if(typeof i=="string")return i;if(n){const c=this._generateAnswerSync(o,a),d=s+c;return this.answers.set(o,d),d}return this.answers.has(o)||this.answers.set(o,this._generateAnswerAsync(o,a)),Promise.resolve().then(async()=>s+await this.answers.get(o)).then(c=>(this.answers.set(o,c),c))}buildGenerateFailMessage(e){return this.errorPrefix+Ef(String(e!=null?e:"e"))}_generateAnswerSync(e,n){const s=performance.now();try{const o=this.getConfig();for(let a=0;a<this.maxAttempts;a++){const i=this._runCheck(s,e,n,o,a);if(i)return i}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}async _generateAnswerAsync(e,n){const s=performance.now();try{let o=null;const a=this.getConfig();for(let i=0;i<this.maxAttempts;i++){(!o||o.timeRemaining()<=0)&&(o=await Fee());const l=this._runCheck(s,e,n,a,i);if(l)return l}}catch(o){return this.buildGenerateFailMessage(o)}return this.buildGenerateFailMessage()}_generateRequirementsTokenAnswerBlocking(){let e="e";const n=performance.now();try{const s=this.getConfig();return s[3]=1,s[9]=Math.round(performance.now()-n),Ef(s)}catch(s){e=Ef(String(s))}return this.errorPrefix+e}getConfig(){var e,n,s,o;return[(screen==null?void 0:screen.width)+(screen==null?void 0:screen.height),""+new Date,(e=performance==null?void 0:performance.memory)==null?void 0:e.jsHeapSizeLimit,Math==null?void 0:Math.random(),navigator.userAgent,Sp(Array.from(document.scripts).map(a=>a==null?void 0:a.src).filter(a=>a)),(s=((n=Array.from(document.scripts||[]).map(a=>{var i;return(i=a==null?void 0:a.src)==null?void 0:i.match("c/[^/]*/_")}).filter(a=>a==null?void 0:a.length)[0])!=null?n:[])[0])!=null?s:document.documentElement.getAttribute("data-build"),navigator.language,(o=navigator.languages)==null?void 0:o.join(","),Math==null?void 0:Math.random(),Dee(),Sp(Object.keys(document)),Sp(Object.keys(window)),performance.now(),this.sid,[...new URLSearchParams(window.location.search).keys()].join(","),navigator==null?void 0:navigator.hardwareConcurrency,performance.timeOrigin]}}function Sp(t){return t[Math.floor(Math.random()*t.length)]}function Oee(){return""+Math.random()}function Dee(){const t=Sp(Object.keys(Object.getPrototypeOf(navigator)));try{return"".concat(t,"").concat(navigator[t].toString())}catch(e){return"".concat(t)}}function Ef(t){return t=JSON.stringify(t),window.TextEncoder?btoa(String.fromCharCode(...new TextEncoder().encode(t))):btoa(unescape(encodeURIComponent(t)))}function Fee(){return new Promise(t=>{(window.requestIdleCallback||Bee)(n=>{t(n)},{timeout:10})})}function Bee(t){return setTimeout(()=>{t({timeRemaining:()=>1,didTimeout:!1})},0),0}const vr=new Lee,qI=new WeakMap;function Ty(t,e){qI.set(t,e)}function YI(t){return qI.get(t)}const Uee=0,Vee=1,Gee=2,ZI=3,KI=4,$ee=5,Hee=6,Wee=24,zee=7,qee=8,no=9,Yee=10,Zee=11,Kee=12,Qee=13,Jee=14,Xee=15,Ey=16,ete=17,tte=18,nte=19,ste=23,ote=20,ate=21,rte=22,ite=25,lte=26,cte=27,dte=28,ute=29,QI=30,mte=33,fte=34,Pe=new Map;let Xr=0,Vw=Promise.resolve();function JI(t){const e=Vw.then(t,t);return Vw=e.then(()=>{},()=>{}),e}async function rm(){for(;Pe.get(no).length>0;){const[t,...e]=Pe.get(no).shift(),n=Pe.get(t)(...e);n&&typeof n.then=="function"&&await n,Xr++}}function pte(t){return JI(()=>new Promise((e,n)=>{let s=!1;setTimeout(()=>{s=!0,e(""+Xr)},500),Pe.set(ZI,o=>{s||(s=!0,e(btoa(""+o)))}),Pe.set(KI,o=>{s||(s=!0,n(btoa(""+o)))}),Pe.set(QI,(o,a,i,l)=>{const c=Array.isArray(l),d=c?i:[],u=(c?l:i)||[];Pe.set(o,(...m)=>{if(s)return;const p=[...Pe.get(no)];if(c)for(let g=0;g<d.length;g++){const h=d[g],x=m[g];Pe.set(h,x)}return Pe.set(no,[...u]),rm().then(()=>Pe.get(a)).catch(g=>""+g).finally(()=>{Pe.set(no,p)})})});try{Pe.set(no,JSON.parse(R2(atob(t),""+Pe.get(Ey)))),rm().catch(o=>{e(btoa(Xr+": "+o))})}catch(o){e(btoa(Xr+": "+o))}}))}function gte(t,e){return JI(()=>new Promise((n,s)=>{var i;const o=(i=YI(t!=null?t:{}))!=null?i:"";hte(),Xr=0,Pe.set(Ey,o);let a=!1;setTimeout(()=>{a=!0,n(""+Xr)},500),Pe.set(ZI,l=>{a||(a=!0,n(btoa(""+l)))}),Pe.set(KI,l=>{a||(a=!0,s(btoa(""+l)))}),Pe.set(QI,(l,c,d,u)=>{const m=Array.isArray(u),f=m?d:[],p=(m?u:d)||[];Pe.set(l,(...g)=>{if(a)return;const x=[...Pe.get(no)];if(m)for(let y=0;y<f.length;y++){const b=f[y],v=g[y];Pe.set(b,v)}return Pe.set(no,[...p]),rm().then(()=>Pe.get(c)).catch(y=>""+y).finally(()=>{Pe.set(no,x)})})});try{Pe.set(no,JSON.parse(R2(atob(e),""+Pe.get(Ey)))),rm().catch(l=>{n(btoa(Xr+": "+l))})}catch(l){n(btoa(Xr+": "+l))}}))}function R2(t,e){let n="";for(let s=0;s<t.length;s++)n+=String.fromCharCode(t.charCodeAt(s)^e.charCodeAt(s%e.length));return n}function hte(){Pe.clear(),Pe.set(Uee,pte),Pe.set(Vee,(t,e)=>Pe.set(t,R2(""+Pe.get(t),""+Pe.get(e)))),Pe.set(Gee,(t,e)=>Pe.set(t,e)),Pe.set($ee,(t,e)=>{const n=Pe.get(t);Array.isArray(n)?n.push(Pe.get(e)):Pe.set(t,n+Pe.get(e))}),Pe.set(cte,(t,e)=>{const n=Pe.get(t);Array.isArray(n)?n.splice(n.indexOf(Pe.get(e)),1):Pe.set(t,n-Pe.get(e))}),Pe.set(ute,(t,e,n)=>Pe.set(t,Pe.get(e)<Pe.get(n))),Pe.set(mte,(t,e,n)=>{const s=Number(Pe.get(e)),o=Number(Pe.get(n));Pe.set(t,s*o)}),Pe.set(Hee,(t,e,n)=>Pe.set(t,Pe.get(e)[Pe.get(n)])),Pe.set(zee,(t,...e)=>Pe.get(t)(...e.map(n=>Pe.get(n)))),Pe.set(ete,(t,e,...n)=>{try{const s=Pe.get(e)(...n.map(o=>Pe.get(o)));if(s&&typeof s.then=="function")return s.then(o=>{Pe.set(t,o)}).catch(o=>{Pe.set(t,""+o)});Pe.set(t,s)}catch(s){Pe.set(t,""+s)}}),Pe.set(Qee,(t,e,...n)=>{try{Pe.get(e)(...n)}catch(s){Pe.set(t,""+s)}}),Pe.set(qee,(t,e)=>Pe.set(t,Pe.get(e))),Pe.set(Yee,window),Pe.set(Zee,(t,e)=>{var n,s;return Pe.set(t,(s=((n=Array.from(document.scripts||[]).map(o=>{var a;return(a=o==null?void 0:o.src)==null?void 0:a.match(Pe.get(e))}).filter(o=>o==null?void 0:o.length)[0])!=null?n:[])[0])!=null?s:null)}),Pe.set(Kee,t=>Pe.set(t,Pe)),Pe.set(Jee,(t,e)=>Pe.set(t,JSON.parse(""+Pe.get(e)))),Pe.set(Xee,(t,e)=>Pe.set(t,JSON.stringify(Pe.get(e)))),Pe.set(tte,t=>Pe.set(t,atob(""+Pe.get(t)))),Pe.set(nte,t=>Pe.set(t,btoa(""+Pe.get(t)))),Pe.set(ote,(t,e,n,...s)=>Pe.get(t)===Pe.get(e)?Pe.get(n)(...s):null),Pe.set(ate,(t,e,n,s,...o)=>Math.abs(Pe.get(t)-Pe.get(e))>Pe.get(n)?Pe.get(s)(...o):null),Pe.set(ste,(t,e,...n)=>Pe.get(t)!==void 0?Pe.get(e)(...n):null),Pe.set(Wee,(t,e,n)=>Pe.set(t,Pe.get(e)[Pe.get(n)].bind(Pe.get(e)))),Pe.set(fte,(t,e)=>{try{const n=Pe.get(e);return Promise.resolve(n).then(s=>{Pe.set(t,s)})}catch(n){return}}),Pe.set(rte,(t,e)=>{const n=[...Pe.get(no)];return Pe.set(no,[...e]),rm().catch(s=>{Pe.set(t,""+s)}).finally(()=>{Pe.set(no,n)})}),Pe.set(dte,()=>{}),Pe.set(lte,()=>{}),Pe.set(ite,()=>{})}const _te="https://challenges.cloudflare.com/turnstile/v0/api.js",xte="chatgpt-paid",yte="chatgpt-freeaccount",Ay="chatgpt-noauth",Gw={[xte]:"0x4AAAAAAASbFNinhLLnW5f1",[yte]:"0x4AAAAAAACPe2BTwOIpYk6H",[Ay]:"0x4AAAAAAASbHVR44GU82lOI"};class ag{toString(){return JSON.stringify(this.toJSON())}}class U_ extends ag{constructor(e){super(),this.message=e,this.message=e}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class vte extends ag{constructor(e){super(),this.errorCode=e,this.errorCode=e}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class bte{constructor(){ne(this,"app",Ay);ne(this,"status","idle");ne(this,"turnstileInstancePromise",null);ne(this,"enforcementTokenPromise",null);ne(this,"enforcementTokenCache",new WeakMap);ne(this,"requestStartTimeMs",0);ne(this,"_onCompleted");ne(this,"_onError");ne(this,"dxPromiseCache",new Map)}async initializeAndGatherData(e){this._getOrCreateInstance(e)}cacheEnforcementToken(e,n){n&&this.enforcementTokenCache.set(e,n)}async _getOrCreateInstance(e){var n,s,o;return!((n=e.turnstile)!=null&&n.required)||(s=e.turnstile)!=null&&s.dx?null:(this.app!==e.persona&&(this.app=e.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),(o=this.turnstileInstancePromise)!=null?o:new U_("Turnstile instance not initialized."))}getEnforcementTokenSync(e){const n=this.enforcementTokenCache.get(e);return n!=null?n:null}async getEnforcementToken(e){var n;if((n=e.turnstile)!=null&&n.dx){const s=e.turnstile.dx,o=YI(e),a=o?"".concat(o,"::").concat(s):s,i=this.dxPromiseCache.get(a);if(i)return i;const c=gte(e,s).then(d=>(d&&this.enforcementTokenCache.set(e,d),d)).finally(()=>{this.dxPromiseCache.delete(a)});return this.dxPromiseCache.set(a,c),c}return this.startEnforcement(e).then(s=>(this.enforcementTokenPromise=null,s?s.toString():null))}async startEnforcement(e){var n,s;return(n=e.turnstile)!=null&&n.required?(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(e):null}precomputeEnforcementToken(e){var s;const n=this.enforcementTokenCache.get(e);return n?Promise.resolve(n):(s=e.turnstile)!=null&&s.dx?this.getEnforcementToken(e):this.startEnforcement(e).then(o=>{var a;return typeof o=="string"?o:(a=o==null?void 0:o.toString())!=null?a:null})}async _getEnforcementToken(e,n){const s=await this._getOrCreateInstance(e);return s instanceof ag||s===null?s:new Promise((o,a)=>{this.setOnCompleted(i=>{const l=performance.now()-this.requestStartTimeMs;Oe.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:l}),o(i)}),this.setOnError(i=>{if(!n)this._getEnforcementToken(e,!0).then(o,a);else{const l=performance.now()-this.requestStartTimeMs;Oe.addAction("turnstile_get_token_error",{app_release:"9f5aa1f7b48d4577791d0e660bac1111ba132ee6",error:i,app:this.app.toString(),durationMs:l}),o(new vte(i))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),s.reset(),s.execute()})}setStatus(e){this.status=e}onCompleted(e){var n;(n=this._onCompleted)==null||n.call(this,e)}setOnCompleted(e){this._onCompleted=e}onError(e){var n;(n=this._onError)==null||n.call(this,e)}setOnError(e){this._onError=e}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(e){if(this.turnstileInstancePromise!==null)if(e)this.turnstileInstancePromise.then(n=>{n instanceof ag||n.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((n,s)=>{var d,u;const o="onloadTurnstileCallback";Object.defineProperty(window,o,{value:()=>{var f;if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:m}=window;if(m===null){this.setStatus("error"),e?(Oe.addAction("turnstile_instance_missing",{app_release:"9f5aa1f7b48d4577791d0e660bac1111ba132ee6",app:this.app.toString()}),n(new U_("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(n,s);return}m.render("#"+a,{sitekey:(f=Gw[this.app])!=null?f:Gw[Ay],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),n(m)}});const a="cf-turnstile",i="cf-turnstile-script";(d=document.getElementById(a))==null||d.remove(),(u=document.getElementById(i))==null||u.remove();const l=document.createElement("div");l.id=a,l.hidden=!0,document.body.appendChild(l),this.setStatus("loading");const c=document.createElement("script");c.id=i,c.src=_te+"?onload=".concat(o),c.async=!0,c.defer=!0,c.onerror=()=>{this.setStatus("error"),e?(Oe.addAction("turnstile_script_load_error",{app_release:"9f5aa1f7b48d4577791d0e660bac1111ba132ee6",app:this.app.toString()}),n(new U_("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(n,s)},document.body.appendChild(c)}),this.turnstileInstancePromise}}const im=new bte,Ste=1e3*60*9;var gc=(t=>(t.ChatRequirementsToken="OpenAI-Sentinel-Chat-Requirements-Token",t.TurnstileToken="OpenAI-Sentinel-Turnstile-Token",t.ProofToken="OpenAI-Sentinel-Proof-Token",t.Token="OpenAI-Sentinel-Token",t))(gc||{});let Cte=-1,Ks=null;const wte="2115167980";function kte(){try{const t=Hn(),e=xe(t,wte);return e!=null?e:!1}catch(t){return!1}}async function Mte(t){const e=await pe.safePost("/sentinel/chat-requirements",{requestBody:{p:t},authOption:qt.SendIfAvailable});return Ty(e,t),e}async function Tte(t){const n=await pe.safePost("/sentinel/chat-requirements/prepare",{requestBody:{p:t},authOption:qt.SendIfAvailable}),s={token:void 0,persona:n.persona,turnstile:n.turnstile,proofofwork:n.proofofwork,force_login:n.force_login};Ty(s,t);const[o,a]=await Promise.all([vr.getEnforcementToken(s,{forceSync:!0}),im.getEnforcementToken(s)]),i={prepare_token:n.prepare_token};o&&(i.proofofwork=o),a&&(i.turnstile=a);const c=await pe.safePost("/sentinel/chat-requirements/finalize",{requestBody:i,authOption:qt.SendIfAvailable});return Object.assign(s,c),s.persona=c.persona,Ty(s,t),a&&im.cacheEnforcementToken(s,a),s}function Ete(){if(Ks){const{chatRequirements:t,expiration:e}=Ks;if(Date.now()>=e)return Ks=null,null;if(t)return Ks=null,t}return null}function XI(t=!1){if(Ks){const{expiration:o,chatRequirementsPromise:a}=Ks;if(Date.now()<o)try{return t||(Ks=null),a}catch(i){}else a.then(i=>Oe.addAction("chat_requirements_cache_expired",{app:i.persona.toString()}));Ks=null}const e=vr.getRequirementsTokenBlocking();let n;kte()?n=Tte(e):n=Mte(e);const s=++Cte;return t&&(Ks={id:s,chatRequirements:null,chatRequirementsPromise:n.then(o=>((Ks==null?void 0:Ks.id)===s&&(Ks.chatRequirements=o),o)),expiration:Date.now()+Ste}),n}const Ate=window.location.origin+"/backend-api/sentinel/sdk.js",Ite="https://sentinel.openai.com/backend-api/sentinel/sdk.js";function jte(t){return new Promise((e,n)=>{const s=document.createElement("script");s.type="text/javascript",s.src=t,s.async=!0,s.defer=!0,s.onload=e,s.onerror=n,document.getElementsByTagName("head")[0].appendChild(s)})}function ej(t){let e;return()=>(e||(e=jte(t)),e)}const Pte=ej(Ate),Nte=ej(Ite);function tj(t,e){var o;return(((o=e==null?void 0:e.sdkVariant)!=null?o:"chatgpt")==="openai"?Nte:Pte)().then(()=>window.SentinelSDK.token(t))}function L2(t,e,n,s){const o={};return t!=null&&t.token&&(o["OpenAI-Sentinel-Chat-Requirements-Token"]=t.token),e&&(o["OpenAI-Sentinel-Turnstile-Token"]=e),n&&(o["OpenAI-Sentinel-Proof-Token"]=n),s&&(o["OpenAI-Sentinel-Token"]=s),o}async function Rte(){try{const t=await XI(!0);t&&(await im.precomputeEnforcementToken(t),await vr.startEnforcement(t))}catch(t){}}function nj(t,e){var l;const n=!!((l=e==null?void 0:e.prefetchIds)!=null&&l.length),s=performance.now(),o=[],a=Ete();if(a==null)return o.push("chatReq"),XI().then(i);return i(a);function i(c){c.force_login&&Kt(t,{fallbackScreenHint:"login"});const d=im.getEnforcementTokenSync(c);if(d==null)return o.push("turnstile"),im.getEnforcementToken(c).then(u);return u(d);function u(m){const f=performance.now(),p=vr.getEnforcementTokenSync(c);if(p==null)return o.push("proofofwork"),vr.getEnforcementToken(c,{forceSync:n}).then(g);return g(p);function g(h){const x=String(performance.now()-f),y=o.includes("chatReq")?"false":"true",b=o.includes("turnstile")?"false":"true",v=o.includes("proofofwork")?"false":"true";return Ee.hist(Ae.DEFAULT,"chat_req_time",[{key:"wasChatReqSync",value:y},{key:"wasTurnstileSync",value:b},{key:"wasProofofworkSync",value:v}],performance.now()-s),ii(Hn(),{eventName:"chatgpt_web_completion_integrity_checks",value:o.length===0?"true":"false",metadata:{wasChatReqSync:y,wasTurnstileSync:b,wasProofofworkSync:v,isPrefetchInitialLoad:n?"true":"false",powTime:x}}),{chatReq:c,turnstileToken:m,proofToken:h}}}}}var qa=(t=>(t.Success="success",t.Error="error",t.Canceled="canceled",t))(qa||{});const O2="RESUME_TOKEN_STORE_KEY",Lte=1e3,Ote=Lte*60,Dte=Ote*60;function D2(){var s;const t=(s=localStorage.getItem(O2))!=null?s:"{}",e=JSON.parse(t);return Object.fromEntries(Object.entries(e).filter(([o,a])=>a.expiresAt>Date.now()))}function sj(t){const e=JSON.stringify(t);localStorage.setItem(O2,e)}function Fte(t,e){const n=D2();n[t]={token:e,expiresAt:Date.now()+Dte},sj(n)}function Bte(t){var n;return(n=D2()[t])==null?void 0:n.token}function Ute(t){const e=D2();delete e[t],sj(e)}function Vte(){localStorage.removeItem(O2)}const Fu={set:Fte,get:Bte,remove:Ute,clear:Vte};function F2(t){return xe(t,"988697485")}const Gte=In(t=>It(()=>F2(t)&&B2(t)&&aA(t,en.UkdvthEntrypointVisible)===!0)),$te=In(t=>It(()=>F2(t)&&aA(t,en.UkdvthMemoryEnabled))),B2=t=>$te(t)===!0,oj=In(()=>Sm(Le.LastOpenedPulseId,()=>null)),lze=t=>In(e=>It(()=>oj(e)===t));function cze(t){"use forget";const e=H.c(4),n=G();let s,o;e[0]!==n||e[1]!==t?(s=()=>{t&&oj.set(n,t)},o=[t,n],e[0]=n,e[1]=t,e[2]=s,e[3]=o):(s=e[2],o=e[3]),_.useEffect(s,o)}function U2(t){return t.content_type==="card"}function $w(t){return t.replace("..."," ")}function Hte(t,e){const n=t.filter(U2),o=n.findIndex(a=>a.id===e)+1;return o<n.length?n[o]:null}function Wte(){"use forget";return qV("/pulse/*")!=null}function zte(t){switch(t.type){case"card":return"feed/card/".concat(t.card_id,"/conversation");case"feedback-conversation":return"feed/feedback/conversation"}}function qte(t,e){e.type==="feedback-conversation"&&e.feedback_card_id&&t.searchParams.set("card_id",e.feedback_card_id)}function aj(t){return{url:t,fallback_url:t,id:t}}function rj(t,e){return Br(this,null,function*(){let n=null;try{for(var s=jo(t),o,a,i;o=!(a=yield new ts(s.next())).done;o=!1){const l=a.value;if("response"in l)yield l;else if(l.event==="delta_encoding"){const c=String(l.data);if(e==null||e(c),c==="v1")n=new Yte;else throw new Error("[delta] unknown delta encoding: ".concat(c))}else if(l.event==="delta"){if(!n)throw new Error("[delta] delta event before delta_encoding");yield{data:n.applyDelta(l.data)}}else yield l}}catch(a){i=[a]}finally{try{o&&(a=s.return)&&(yield new ts(a.call(s)))}finally{if(i)throw i[0]}}})}var ij=(t=>(t.V1="v1",t))(ij||{});class Yte{constructor(){ne(this,"prevObjByChannel",[]);ne(this,"prevDelta",{channel:0,op:"add",path:"",value:void 0})}applyDelta(e){try{const n=this.decodeDelta(e),s=n.channel,o=this.prevObjByChannel[s],a=Qte(o,n);return this.prevObjByChannel[s]=a,a}catch(n){Oe.addError("Error applying delta: ".concat(n))}}decodeDelta(e){Kte(e);const n=Zte(e,this.prevDelta),s=lj(n);return this.prevDelta=s,s}}function Zte(t,e){for(const[n,s]of cj)n!=="value"&&!(s in t)&&(t[s]=e[n]);return t}function lj(t){const e=t;for(const[n,s]of cj)s in t&&(e[n]=t[s],delete t[s]);return e.op==="patch"&&(e.value=e.value.map(lj)),e}function Kte(t){if(!t||typeof t!="object")throw new Error("Unexpected delta non-object")}const cj=[["channel","c"],["path","p"],["op","o"],["value","v"]];function Qte(t,e){return dh({__root:t},s=>dj(s,e)).__root}function dj(t,e){var o;const n=ene((o=e.path)!=null?o:"");for(let a=0;a<n.length-1;a++)t[n[a]]===void 0&&(typeof n[a+1]=="number"?t[n[a]]=[]:t[n[a]]={}),t=t[n[a]];const s=n[n.length-1];switch(e.op){case"patch":for(const a of e.value){const i={__root:t[s]};dj(i,a),t[s]=i.__root}break;case"add":Array.isArray(t)?t.splice(s,0,e.value):t[s]=e.value;break;case"remove":Array.isArray(t)?t.splice(s,1):delete t[s];break;case"replace":t[s]=e.value;break;case"append":if(typeof t[s]=="string")t[s]+=e.value;else if(Array.isArray(t[s]))t[s].push(...tne(e.value));else if(Hw(t[s])&&Hw(e.value))for(const a in e.value)t[s][a]=e.value[a];else t[s]=e.value;break;case"truncate":t[s]&&(typeof t[s]=="string"?t[s]=t[s].substring(0,e.value):Array.isArray(t[s])&&(t[s].length=e.value));break;default:throw new Error("Unknown json delta operation")}}function Jte(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}const Xte=new RegExp("^(?:0|[1-9]\\d*)$","d");function ene(t){const e=["__root"];if(t==="")return e;t[0]==="/"&&(t=t.substring(1));for(const n of t.split("/"))Xte.test(n)?e.push(parseInt(n,10)):e.push(Jte(n));return e}function tne(t){return Array.isArray(t)?t:[t]}function Hw(t){return typeof t=="object"&&t!=null&&!Array.isArray(t)}function nne(t){let e=!1;const n=[],s=[];function o(c){n.length>0?n.shift()(c):s.push(c)}function a(c){e||o({value:c,done:!1})}function i(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(o(Promise.reject(c)),i())}try{t(a,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{s.length>0?c(s.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}function Ww(t){var e,n;return(n=(e=t.headers.get("x-request-id"))!=null?e:t.headers.get("cf-ray"))!=null?n:void 0}function rg(t,{accessToken:e,ctx:n,method:s,headers:o,body:a,intercomEventOnError:i,signal:l,observer:c}={}){return nne((d,u,m)=>{let f=!1,p=!1,g=null;const h=void 0;function x(v,S="manual_error"){var C;if(f)return v;f=!0,h==null||h({reason:"error",source:S,error:v});try{return m(v),(C=c==null?void 0:c.onClose)==null||C.call(c,"error",v),v}finally{v instanceof Vn?(GG(v,"stream"),$G(v),i&&HG(i,{url:v.url,message:v.message})):(Oe.addError(v),U.logValueEventWithStatsig({segmentEventName:"request_stream_error",statsigEventName:"chatgpt_request_stream_error",data:{error:v instanceof Error?v.message:String(v)}}))}}function y(v){var S,C,k;if(!f)if(f=!0,l!=null&&l.aborted){const M=(S=l.reason)!=null?S:new DOMException("Aborted","AbortError");h==null||h({reason:"aborted",source:"abort_signal",error:M}),m(M),(C=c==null?void 0:c.onClose)==null||C.call(c,"aborted",M)}else h==null||h({reason:"completed",source:v}),(k=c==null?void 0:c.onClose)==null||k.call(c,"completed"),u()}const b=e!=null?e:n?Xv(n):void 0;LI(t,{method:s,credentials:"include",headers:w(w(w({},b?Zu({accessToken:b}):iA()),a?{"Content-Type":"application/json"}:null),o),body:a?JSON.stringify(a):void 0,signal:l,openWhenHidden:!0,async onopen(v){var C,k;g=v;const S=(C=v.headers.get("content-type"))!=null?C:"";if(v.ok&&S.includes("text/event-stream"))d({response:v}),(k=c==null?void 0:c.onOpen)==null||k.call(c,v);else if(S.includes("application/json")){const M=await v.json();throw x(new Vn(t,v.status,M,Ww(v),new Error(JSON.stringify(M))),"onopen_error")}else{const T=(await v.text()).substring(0,1e3);throw x(new Vn(t,v.status,{detail:{message:WG,code:"unexpected_content_type",contentType:S,text:T}},Ww(v),new Error(T)),"onopen_error")}},onmessage(v){var M;const S=new TextEncoder,C=v.data==="[DONE]";if((M=c==null?void 0:c.onEvent)==null||M.call(c,{byteLength:S.encode(v.data).length,isDoneEvent:C}),v.event==="ping"||!v.data)return;if(C){y("done_event");return}const k=JSON.parse(v.data);if(k.error){const T=new Error(k.error);U.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:T.message,isNetworkError:p_(T),isErrorInMessageData:!0,messageData:k}}),x(Vn.createWithErrorMessage(t,"server",k.error,void 0,new Error(k.error)),"onmessage_error")}else d({event:v.event||void 0,data:k})},onerror(v){const S=v instanceof Error?v:new Error(JSON.stringify(v));throw U.logValueEventWithStatsig({segmentEventName:"raw_request_stream_error",statsigEventName:"chatgpt_raw_request_stream_error",data:{errorMessage:S.message,isNetworkError:p_(S),isErrorInMessageData:!1}}),p_(S)?x(Vn.createWithErrorMessage(t,"client",pi,void 0,S),"onerror"):S.message==="Failed to fetch"?(U.logFailedToFetchError({source:"request_stream"}),x(Vn.createWithErrorMessage(t,"server","An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ".concat(rA),void 0,S),"onerror")):x(S,"onerror")}}).then(()=>y("fetch_resolved"),x)})}const sne=t=>new Promise(e=>setTimeout(e,t));function uj(t,c){return Br(this,null,function*(){var d=c,{shouldRetry:e=()=>!0,retryConfig:{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:a},onRetry:i}=d,l=Me(d,["shouldRetry","retryConfig","onRetry"]);let u=!1,m=!1,f=l;const p=S=>{const C=S.observer;return B(w({},S),{observer:B(w({},C),{onClose:(k,M)=>{var T;(T=C==null?void 0:C.onClose)==null||T.call(C,k,M),k==="completed"&&(m=!0)}})})};let g=rg(t,p(f)),h=0;for(;!u&&!m;)try{try{for(var x=jo(g),y,b,v;y=!(b=yield new ts(x.next())).done;y=!1){const S=b.value;"response"in S&&(u=!0),yield S}}catch(b){v=[b]}finally{try{y&&(b=x.return)&&(yield new ts(b.call(x)))}finally{if(v)throw v[0]}}m=!0}catch(S){if(m)return;if(u||!e(S)||h>=a)throw S;const C=Math.min(n*o**h,s);if(yield new ts(sne(C)),h++,i){const k=yield new ts(i());Ee.count(Ae.DEFAULT,"chat_requirements.retry_refetch_token"),f=B(w(w({},f),k),{headers:k.headers!==void 0?k.headers:f.headers,body:k.body!==void 0?k.body:f.body})}g=rg(t,p(f))}})}const yo=t=>{if(t.type===ke.Starter&&t.category==="onboarding")return"";switch(t.type){case ke.Reply:return t.text;case ke.Templated:case ke.Starter:case ke.Autocomplete:case ke.Trending:case ke.Capabilities:return t.prompt}},one=t=>t.type===ke.Reply,mj=t=>t.type===ke.Starter,V2=t=>t.type===ke.Autocomplete,ig=t=>t.type===ke.Trending,lg=t=>V2(t)&&!!t.theme,G2=t=>t.type===ke.Capabilities,ane=t=>t.type===ke.Templated,rne=t=>ig(t)||G2(t)||V2(t)&&!lg(t),c1=(t,e,n,s)=>{var o,a,i;switch(We.logEvent("chatgpt_prompt_use_suggestion",rne(t)?"":yo(t),{id:(mj(t)||lg(t)||ig(t))&&(o=t.id)!=null?o:"",index:"".concat(e),type:t.type,theme:ig(t)&&t.theme?t.theme:""}),t.type){case ke.Reply:U.logEvent("Use Suggested Reply",{value:yo(t),prompt_type:ke.Reply,messageId:s});break;case ke.Capabilities:U.logEvent("Use Capabilities Suggestion",{prompt_type:ke.Capabilities,categoryId:t.categoryId,client_thread_id:n,messageId:s});break;case ke.Starter:U.logEvent("Use Starter Prompt",{value:yo(t),prompt_type:ke.Starter,title:t.title,body:t.body,id:t.id,category:t.category,client_thread_id:n,messageId:s,index:e,theme:t.theme});break;case ke.Autocomplete:{const l=lg(t);U.logEvent("Use Autocomplete",{value:l?yo(t):"",prompt_type:ke.Autocomplete,title:l?t.title:"",body:l?t.body:"",id:l?t.id:"",category:t.category,index:e,messageId:s,client_thread_id:n,theme:(a=t.theme)!=null?a:""});break}case ke.Trending:{U.logEvent("Use Trending Prompt",{prompt_type:ke.Trending,title:t.title,index:e,messageId:s,client_thread_id:n,theme:(i=t.theme)!=null?i:""});break}}},fj=(t,e)=>{if(t.length===0)return;const s=me.getCurrentNode(ft(e)).message.id;We.logEvent("chatgpt_prompt_show_suggestions","count_".concat(t.length),{type:t[0].type});const o=a=>{var i;for(let l=0;l<a.length;l++){const c=a[l];U.logEventWithStatsig("Show Trending Prompt","chatgpt_prompt_show_suggestion",{type:c.type,id:c.id,index:l,client_thread_id:e,message_id:s,theme:(i=c.theme)!=null?i:""})}};if(t.every(one))U.logEvent("Show Suggested Replies",{prompt_count:t.length,prompt_type:ke.Reply,client_thread_id:e,suggestions:t.map(a=>a.text),message_id:s});else if(t.every(mj)){const{isAdditional:a}=t[0];U.logEvent(a?"More Starter Prompts Shown":"Show Starter Prompts",{prompt_count:t.length,prompt_type:ke.Starter,titles:t.map(i=>i.title),bodies:t.map(i=>i.body),ids:t.map(i=>i.id),client_thread_id:e,message_id:s,themes:t.map(i=>{var l;return(l=i.theme)!=null?l:""})}),a&&U.logEvent("Expand More Starter Prompts",{client_thread_id:e,message_id:s}),o(t)}else if(t.every(V2)){const a=!!t.find(i=>lg(i));U.logEvent("Show Autocomplete Prompts",{prompt_count:t.length,prompt_type:t[0].type,titles:t.map(i=>a?i.title:""),bodies:t.map(i=>a?i.body:""),ids:t.map(i=>a?i.id:""),client_thread_id:e,message_id:s,themes:t.map(i=>{var l;return(l=i.theme)!=null?l:""})})}else t.every(ig)?(U.logEvent("Show Trending Prompts",{prompt_count:t.length,prompt_type:ke.Trending,titles:t.map(a=>a.title),client_thread_id:e,message_id:s}),o(t)):t.every(G2)?U.logEvent("Show Capabilities Suggestions",{prompt_count:t.length,prompt_type:ke.Capabilities,category_ids:t.map(a=>a.categoryId),client_thread_id:e,message_id:s}):t.every(ane)?U.logEvent("Show Templated Suggestions",{prompt_count:t.length,prompt_type:ke.Templated,titles:t.map(a=>a.title),client_thread_id:e,message_id:s}):Oe.addError("Unhandled suggestion type",{type:t[0].type})},dze=t=>{const n=me.getCurrentNode(ft(t)).message.id;U.logEvent("Show Expand More Starter Prompts Button",{client_thread_id:t,message_id:n})},uze=t=>{const n=me.getCurrentNode(ft(t)).message.id;U.logEvent("Expand More Starter Prompts",{client_thread_id:t,message_id:n})},cg="prompt-textarea";function $2(){var t;(t=document.getElementById(cg))==null||t.focus()}const mze={getAndReset:(t,e)=>{const n=mt.getItem(Le.RestoreMessageAfterOauthRedirect);return mt.removeItem(Le.RestoreMessageAfterOauthRedirect),!n||n.userId!==t||e!==n.serverThreadId||Date.now()>n.expiresAt?null:n},set:(t,e,n)=>{const s={userId:t,serverThreadId:e,inputText:n,expiresAt:Date.now()+6e4};mt.setItem(Le.RestoreMessageAfterOauthRedirect,s)}},na=()=>{"use forget";const t=H.c(16),e=qs(),n=_r.useStore();let s;t[0]!==n?(s=g=>n.getPersistedSystemHintTrigger(g),t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==e?(a=g=>e(null,{ifPrevSystemHint:g}),t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]!==e?(l=()=>e(null),t[4]=e,t[5]=l):l=t[5];const c=l;let d;t[6]!==e?(d=(g,h,x,y)=>{h?e(g,{analyticsMetadata:x,triggerSource:y}):e(null,{ifPrevSystemHint:g,analyticsMetadata:x})},t[6]=e,t[7]=d):d=t[7];const u=d;let m;t[8]!==e?(m=(g,h)=>{e(g,{analyticsMetadata:h})},t[8]=e,t[9]=m):m=t[9];const f=m;let p;return t[10]!==c||t[11]!==i||t[12]!==o||t[13]!==u||t[14]!==f?(p={getSystemHintModeTrigger:o,clearSystemHintModeTrigger:i,setThreadSystemHintMode:u,clearAllSystemHintModeTriggers:c,updateSystemHint:f},t[10]=c,t[11]=i,t[12]=o,t[13]=u,t[14]=f,t[15]=p):p=t[15],p},fze=({promptDisabledReason:t,hasPendingFiles:e,hasTextContent:n,isTextContentTooLong:s,hasAsyncTaskPending:o,noSourceSelectedDr:a,isDeepResearchTaskStreaming:i,isThreadHardBlocked:l})=>t||(l?"rate_limit_hard_block":e?"file_upload_pending":o?i?void 0:"async_task_pending":n?s?"text_content_too_long":a?"no_source_selected_dr":void 0:"empty_text_content");function pze(t,e){const n=Math.ceil(e/4);return typeof(t==null?void 0:t.maxTokens)=="number"&&n>t.maxTokens}function gze(t,e){return t?e===void 0?!0:e.includes(t):!1}const ine=t=>{switch(t){case"readOnlyConversation":return{placeholder:Do.readOnlyConversationPlaceholder,isLastingDisabledStyle:!0};case"pimBlock":return{placeholder:Do.pimBlockPlaceholder,isLastingDisabledStyle:!0};case"workspaceDisallowsGizmo":return{placeholder:Do.disallowedByWorkspacePlaceholder,isLastingDisabledStyle:!0};case"noModelsAvailable":return{placeholder:Do.noModelsAvailablePlaceholder,isLastingDisabledStyle:!0};case"requiresPluginsToBeInstalled":return{placeholder:Do.requiresPluginsToBeInstalled,isLastingDisabledStyle:!0};case"loadingPlugins":return{placeholder:Do.loading,isLastingDisabledStyle:!0};case"noTestGizmoId":return{placeholder:Do.noTestGizmoId,isLastingDisabledStyle:!0}}return null},lne="OAI-Echo-Logs",Jl={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},pj=[];function Xl(t){return()=>{pj.push({type:t,ts:Math.round(performance.now())})}}const cne={focusin:Xl(Jl.FOCUS_IN),focusout:Xl(Jl.FOCUS_OUT),copy:Xl(Jl.COPY),paste:Xl(Jl.PASTE),touchstart:Xl(Jl.TOUCH_START),touchend:Xl(Jl.TOUCH_END)};function dne(t){const e=t!=null?t:document.getElementById(cg);for(const[n,s]of Object.entries(cne))e==null||e.removeEventListener(n,s),e==null||e.addEventListener(n,s)}function d1(){return{[lne]:pj.slice(0,10).map(t=>"".concat(t.type,",").concat(t.ts)).join(",")}}var une=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Qi="1.6.0",zw=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function mne(t){var e=new Set([t]),n=new Set,s=t.match(zw);if(!s)return function(){return!1};var o={major:+s[1],minor:+s[2],patch:+s[3],prerelease:s[4]};if(o.prerelease!=null)return function(c){return c===t};function a(l){return n.add(l),!1}function i(l){return e.add(l),!0}return function(c){if(e.has(c))return!0;if(n.has(c))return!1;var d=c.match(zw);if(!d)return a(c);var u={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return u.prerelease!=null||o.major!==u.major?a(c):o.major===0?o.minor===u.minor&&o.patch<=u.patch?i(c):a(c):o.minor<=u.minor?i(c):a(c)}}var fne=mne(Qi),pne=Qi.split(".")[0],lm=Symbol.for("opentelemetry.js.api."+pne),cm=une;function Gm(t,e,n,s){var o;s===void 0&&(s=!1);var a=cm[lm]=(o=cm[lm])!==null&&o!==void 0?o:{version:Qi};if(!s&&a[t]){var i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(i.stack||i.message),!1}if(a.version!==Qi){var i=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+t+" does not match previously registered API v"+Qi);return n.error(i.stack||i.message),!1}return a[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+Qi+"."),!0}function _l(t){var e,n,s=(e=cm[lm])===null||e===void 0?void 0:e.version;if(!(!s||!fne(s)))return(n=cm[lm])===null||n===void 0?void 0:n[t]}function $m(t,e){e.debug("@opentelemetry/api: Unregistering a global for "+t+" v"+Qi+".");var n=cm[lm];n&&delete n[t]}var gne=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},hne=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},_ne=(function(){function t(e){this._namespace=e.namespace||"DiagComponentLogger"}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Qd("debug",this._namespace,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Qd("error",this._namespace,e)},t.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Qd("info",this._namespace,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Qd("warn",this._namespace,e)},t.prototype.verbose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Qd("verbose",this._namespace,e)},t})();function Qd(t,e,n){var s=_l("diag");if(s)return n.unshift(e),s[t].apply(s,hne([],gne(n),!1))}var Qs;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})(Qs||(Qs={}));function xne(t,e){t<Qs.NONE?t=Qs.NONE:t>Qs.ALL&&(t=Qs.ALL),e=e||{};function n(s,o){var a=e[s];return typeof a=="function"&&t>=o?a.bind(e):function(){}}return{error:n("error",Qs.ERROR),warn:n("warn",Qs.WARN),info:n("info",Qs.INFO),debug:n("debug",Qs.DEBUG),verbose:n("verbose",Qs.VERBOSE)}}var yne=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},vne=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},bne="diag",Ma=(function(){function t(){function e(o){return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var l=_l("diag");if(l)return l[o].apply(l,vne([],yne(a),!1))}}var n=this,s=function(o,a){var i,l,c;if(a===void 0&&(a={logLevel:Qs.INFO}),o===n){var d=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((i=d.stack)!==null&&i!==void 0?i:d.message),!1}typeof a=="number"&&(a={logLevel:a});var u=_l("diag"),m=xne((l=a.logLevel)!==null&&l!==void 0?l:Qs.INFO,o);if(u&&!a.suppressOverrideMessage){var f=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";u.warn("Current logger will be overwritten from "+f),m.warn("Current logger will overwrite one already registered from "+f)}return Gm("diag",m,n,!0)};n.setLogger=s,n.disable=function(){$m(bne,n)},n.createComponentLogger=function(o){return new _ne(o)},n.verbose=e("verbose"),n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t})(),Sne=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},Cne=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wne=(function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var n=this._entries.get(e);if(n)return Object.assign({},n)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var n=Sne(e,2),s=n[0],o=n[1];return[s,o]})},t.prototype.setEntry=function(e,n){var s=new t(this._entries);return s._entries.set(e,n),s},t.prototype.removeEntry=function(e){var n=new t(this._entries);return n._entries.delete(e),n},t.prototype.removeEntries=function(){for(var e,n,s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=new t(this._entries);try{for(var i=Cne(s),l=i.next();!l.done;l=i.next()){var c=l.value;a._entries.delete(c)}}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return a},t.prototype.clear=function(){return new t},t})(),kne=Symbol("BaggageEntryMetadata"),Mne=Ma.instance();function Tne(t){return t===void 0&&(t={}),new wne(new Map(Object.entries(t)))}function hze(t){return typeof t!="string"&&(Mne.error("Cannot create baggage metadata from unknown type: "+typeof t),t=""),{__TYPE__:kne,toString:function(){return t}}}function gj(t){return Symbol.for(t)}var Ene=(function(){function t(e){var n=this;n._currentContext=e?new Map(e):new Map,n.getValue=function(s){return n._currentContext.get(s)},n.setValue=function(s,o){var a=new t(n._currentContext);return a._currentContext.set(s,o),a},n.deleteValue=function(s){var o=new t(n._currentContext);return o._currentContext.delete(s),o}}return t})(),Ane=new Ene,Dd=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function s(){this.constructor=e}e.prototype=n===null?Object.create(n):(s.prototype=n.prototype,new s)}})(),Ine=(function(){function t(){}return t.prototype.createHistogram=function(e,n){return Bne},t.prototype.createCounter=function(e,n){return Fne},t.prototype.createUpDownCounter=function(e,n){return Une},t.prototype.createObservableGauge=function(e,n){return Gne},t.prototype.createObservableCounter=function(e,n){return Vne},t.prototype.createObservableUpDownCounter=function(e,n){return $ne},t.prototype.addBatchObservableCallback=function(e,n){},t.prototype.removeBatchObservableCallback=function(e){},t})(),H2=(function(){function t(){}return t})(),jne=(function(t){Dd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(H2),Pne=(function(t){Dd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.add=function(n,s){},e})(H2),Nne=(function(t){Dd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.record=function(n,s){},e})(H2),W2=(function(){function t(){}return t.prototype.addCallback=function(e){},t.prototype.removeCallback=function(e){},t})(),Rne=(function(t){Dd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W2),Lne=(function(t){Dd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W2),One=(function(t){Dd(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(W2),Dne=new Ine,Fne=new jne,Bne=new Nne,Une=new Pne,Vne=new Rne,Gne=new Lne,$ne=new One,Hne={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}},Wne={set:function(t,e,n){t!=null&&(t[e]=n)}},zne=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},qne=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},Yne=(function(){function t(){}return t.prototype.active=function(){return Ane},t.prototype.with=function(e,n,s){for(var o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return n.call.apply(n,qne([s],zne(o),!1))},t.prototype.bind=function(e,n){return n},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t})(),Zne=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var s=n.call(t),o,a=[],i;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(l){i={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return a},Kne=function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))},V_="context",Qne=new Yne,u1=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return Gm(V_,e,Ma.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,n,s){for(var o,a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return(o=this._getContextManager()).with.apply(o,Kne([e,n,s],Zne(a),!1))},t.prototype.bind=function(e,n){return this._getContextManager().bind(e,n)},t.prototype._getContextManager=function(){return _l(V_)||Qne},t.prototype.disable=function(){this._getContextManager().disable(),$m(V_,Ma.instance())},t})(),Iy;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(Iy||(Iy={}));var hj="0000000000000000",_j="00000000000000000000000000000000",Jne={traceId:_j,spanId:hj,traceFlags:Iy.NONE},Bu=(function(){function t(e){e===void 0&&(e=Jne),this._spanContext=e}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,n){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,n){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,n){},t})(),z2=gj("OpenTelemetry Context Key SPAN");function q2(t){return t.getValue(z2)||void 0}function Xne(){return q2(u1.getInstance().active())}function Y2(t,e){return t.setValue(z2,e)}function ese(t){return t.deleteValue(z2)}function tse(t,e){return Y2(t,new Bu(e))}function xj(t){var e;return(e=q2(t))===null||e===void 0?void 0:e.spanContext()}var nse=/^([0-9a-f]{32})$/i,sse=/^[0-9a-f]{16}$/i;function ose(t){return nse.test(t)&&t!==_j}function ase(t){return sse.test(t)&&t!==hj}function yj(t){return ose(t.traceId)&&ase(t.spanId)}function rse(t){return new Bu(t)}var G_=u1.getInstance(),vj=(function(){function t(){}return t.prototype.startSpan=function(e,n,s){s===void 0&&(s=G_.active());var o=!!(n!=null&&n.root);if(o)return new Bu;var a=s&&xj(s);return ise(a)&&yj(a)?new Bu(a):new Bu},t.prototype.startActiveSpan=function(e,n,s,o){var a,i,l;if(!(arguments.length<2)){arguments.length===2?l=n:arguments.length===3?(a=n,l=s):(a=n,i=s,l=o);var c=i!=null?i:G_.active(),d=this.startSpan(e,a,c),u=Y2(c,d);return G_.with(u,l,void 0,d)}},t})();function ise(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}var lse=new vj,cse=(function(){function t(e,n,s,o){this._provider=e,this.name=n,this.version=s,this.options=o}return t.prototype.startSpan=function(e,n,s){return this._getTracer().startSpan(e,n,s)},t.prototype.startActiveSpan=function(e,n,s,o){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):lse},t})(),dse=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){return new vj},t})(),use=new dse,qw=(function(){function t(){}return t.prototype.getTracer=function(e,n,s){var o;return(o=this.getDelegateTracer(e,n,s))!==null&&o!==void 0?o:new cse(this,e,n,s)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:use},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,n,s){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,n,s)},t})(),Yw;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Yw||(Yw={}));var Zw;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(Zw||(Zw={}));var Kw;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(Kw||(Kw={}));var _ze=u1.getInstance(),xze=Ma.instance(),mse=(function(){function t(){}return t.prototype.getMeter=function(e,n,s){return Dne},t})(),fse=new mse,$_="metrics",pse=(function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalMeterProvider=function(e){return Gm($_,e,Ma.instance())},t.prototype.getMeterProvider=function(){return _l($_)||fse},t.prototype.getMeter=function(e,n,s){return this.getMeterProvider().getMeter(e,n,s)},t.prototype.disable=function(){$m($_,Ma.instance())},t})(),yze=pse.getInstance(),gse=(function(){function t(){}return t.prototype.inject=function(e,n){},t.prototype.extract=function(e,n){return e},t.prototype.fields=function(){return[]},t})(),Z2=gj("OpenTelemetry Baggage Key");function bj(t){return t.getValue(Z2)||void 0}function hse(){return bj(u1.getInstance().active())}function _se(t,e){return t.setValue(Z2,e)}function xse(t){return t.deleteValue(Z2)}var H_="propagation",yse=new gse,vse=(function(){function t(){this.createBaggage=Tne,this.getBaggage=bj,this.getActiveBaggage=hse,this.setBaggage=_se,this.deleteBaggage=xse}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return Gm(H_,e,Ma.instance())},t.prototype.inject=function(e,n,s){return s===void 0&&(s=Wne),this._getGlobalPropagator().inject(e,n,s)},t.prototype.extract=function(e,n,s){return s===void 0&&(s=Hne),this._getGlobalPropagator().extract(e,n,s)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){$m(H_,Ma.instance())},t.prototype._getGlobalPropagator=function(){return _l(H_)||yse},t})(),vze=vse.getInstance(),W_="trace",bse=(function(){function t(){this._proxyTracerProvider=new qw,this.wrapSpanContext=rse,this.isSpanContextValid=yj,this.deleteSpan=ese,this.getSpan=q2,this.getActiveSpan=Xne,this.getSpanContext=xj,this.setSpan=Y2,this.setSpanContext=tse}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){var n=Gm(W_,this._proxyTracerProvider,Ma.instance());return n&&this._proxyTracerProvider.setDelegate(e),n},t.prototype.getTracerProvider=function(){return _l(W_)||this._proxyTracerProvider},t.prototype.getTracer=function(e,n){return this.getTracerProvider().getTracer(e,n)},t.prototype.disable=function(){$m(W_,Ma.instance()),this._proxyTracerProvider=new qw},t})(),Sse=bse.getInstance();function Cse(t,e,n,s,o,a){const i=Mse(t,e,n,o,a);return Sj(n,s,i)}function wse(t,e,n,s,o,a){const{conversationId:i,resumeToken:l,model:c}=e;let d=Ej({ctx:t,conversationId:i,resumeToken:l,model:c,turnTracker:n,offset:0,signal:o!=null?o:null});d=Tj(d,{ctx:t,model:c,turnTracker:n,signal:o!=null?o:null}),d=Aj(d,{turnTracker:n,prepareState:null,signal:o!=null?o:null,f_completion:!0});const m=rj(d,f=>{n.stream_encoding=f});return Sj(n,s,Cj(m))}const kse=1e3*30,Jd=Sse.getTracer("completion");function z_(t,e){Ee.count(Ae.DEFAULT,t,[{key:"prepare_sent",value:e&&e!=="none"?"true":"false"},{key:"prepare_succeeded",value:e==="success"?"true":"false"},{key:"prepare_failed",value:e==="failure"?"true":"false"}])}function Sj(t,e,n){return Br(this,null,function*(){var h;let s=!1,o=!1,a=!1,i=!1,l,c,d,u,m;Jd.startActiveSpan("completion.response",S=>{l=Jd.startSpan("completion.first_response"),c=Jd.startSpan("completion.first_token_including_tool_calls"),d=Jd.startSpan("completion.first_token_including_visible_content"),u=Jd.startSpan("completion.first_token"),m=S});const f=Date.now();let p=!1,g=setTimeout(()=>{U.logEvent("SSE Response Took Too Long to Come Back",{}),t.logCompletion({type:qa.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}}),p=!0},kse);try{e==null||e.logTimingOnce("prompt_submitted");try{for(var x=jo(n),y,b,v;y=!(b=yield new ts(x.next())).done;y=!1){const S=b.value;yield S,S.type!=="connected"&&g&&(clearTimeout(g),g=null),S.type!=="connected"&&p&&(p=!1,t.logger.info("Late message received after ".concat(Date.now()-f,"ms"),t.createLogPayload()),Ee.count(Ae.DEFAULT,"conversation.stream.late_message_received",[{key:"trigger",value:(h=t.trigger)!=null?h:"null"}])),S.type==="message"&&(t.onMessageUpdate(S.message),s||(s=!0,l==null||l.end(),e==null||e.logTimingOnce("first_response")),!o&&S.message.author.role===Ze.Assistant&&(o=!0,c==null||c.end(),e==null||e.logTimingOnce("first_assistant_token")),!a&&S.message.author.role===Ze.Assistant&&Bp(S.message)&&(a=!0,d==null||d.end(),e==null||e.logTimingOnce("first_visible_content_token")),!i&&S.message.author.role===Ze.Assistant&&zG(S.message)&&(i=!0,u==null||u.end(),e==null||e.logTimingOnce("first_message_token"))),S.type==="perf_stats"&&t.addServerPerfStats(S),S.type==="server_ste_metadata"&&t.addServerSteMetadata(S),S.type==="message_marker"&&t.onMessageMarker(S),S.type==="done"&&t.onStreamClose()}}catch(b){v=[b]}finally{try{y&&(b=x.return)&&(yield new ts(b.call(x)))}finally{if(v)throw v[0]}}}catch(S){throw g&&(clearTimeout(g),g=null),S}finally{m==null||m.end()}})}function Mse(t,e,n,s,o){return Br(this,null,function*(){const{conduitToken:a,prepareState:i,model:l,f_completion:c,f_search:d,expireConduit:u}=e,m=xr(3010482349,"".concat(l,"-AAAA"))||xr(3240390095,"".concat(l,"-AAAA")),f=pt(t)?m?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon";let p="".concat(f,"/conversation");c&&(p="".concat(f,"/f/conversation")),e.pulseCompletionParams&&(p="".concat(f,"/").concat(zte(e.pulseCompletionParams)));const g=Ase(p);e.pulseCompletionParams&&qte(g,e.pulseCompletionParams),xe(t,"212625335")&&g.searchParams.set("debug","true"),n.onSentUserMessage();const h=Sn()?yield new ts(N2()):void 0,x=()=>w(w(w({},d1()),L2(e.chatReq,e.turnstileToken,e.proofToken,null)),a?{"x-conduit-token":a}:{}),y=()=>wj(e,h),b=async()=>{const k=await nj(t,e.completionMetadata);if(e.chatReq=k.chatReq,e.turnstileToken=k.turnstileToken,e.proofToken=k.proofToken,k.chatReq.force_login)throw new Error("force_login during retry");return{headers:x(),body:y()}};let v=uj(g.toString(),{ctx:t,method:"POST",headers:x(),body:y(),intercomEventOnError:"fetch-error:conversation:new-message",signal:s,observer:{onEvent:k=>{n.onStreamEvent(k.byteLength,k.isDoneEvent)}},shouldRetry:k=>(dg(k)||k instanceof Vn&&K2(k.status))&&Ve(t,"603105008").get("retry_stream_requests",!1),retryConfig:Q2(t),onRetry:b});v=Tj(v,{ctx:t,model:l,turnTracker:n,signal:s!=null?s:null}),v=Aj(v,{turnTracker:n,prepareState:i,signal:s!=null?s:null,f_completion:c!=null?c:null}),c&&o&&qe(o,k=>{k.stopConduitToken=a!=null?a:null,u&&(k.conduitToken=null),k.prepareState=null,k.lastPrepareTimestamp=null});const C=rj(v,k=>{n.stream_encoding=k});try{yield*m_(Cj(C,{onPrematureTermination:()=>{n.onPrematureStreamTermination()}}))}finally{xe(t,"4178431533")&&Rte()}})}function Cj(n){return Br(this,arguments,function*(t,e={}){var o,a,i,l,f;let s=!1;try{for(var c=jo(t),d,u,m;d=!(u=yield new ts(c.next())).done;d=!1){const p=u.value;if("response"in p){const g=p.response,h=(a=(o=g==null?void 0:g.headers)==null?void 0:o.get("Cf-Ray"))!=null?a:null,x=(l=(i=g==null?void 0:g.headers)==null?void 0:i.get("X-Conduit-Token"))!=null?l:null;yield{type:"connected",serverRequestId:h,interruptConversationToken:x}}else{const g=Mj(p.data);g&&(g.type==="done"&&(s=!0),yield g)}}}catch(u){m=[u]}finally{try{d&&(u=c.return)&&(yield new ts(u.call(c)))}finally{if(m)throw m[0]}}s||((f=e.onPrematureTermination)==null||f.call(e),yield{type:"done"})})}function wj(t,e){var s,o,a,i,l,c,d,u;const n="threadId"in t?t.threadId:void 0;return B(w({action:t.completionType,messages:t.messages.length>0?t.messages.map(kj):void 0,continue_from_shared_conversation_id:"continueFromSharedConversationId"in t&&n==null?t.continueFromSharedConversationId:void 0,branching_from_conversation_id:"branchingFromConversationId"in t&&n==null?t.branchingFromConversationId:void 0,branching_from_message_id:"branchingFromMessageId"in t&&n==null?t.branchingFromMessageId:void 0,continue_from_shared_post_id:"continueFromSharedPostId"in t?t.continueFromSharedPostId:void 0,fork_from_shared_post:"forkFromSharedPost"in t?t.forkFromSharedPost:void 0},"sharedProjectConversationOwnerId"in t&&"sharedProjectConversationId"in t&&t.sharedProjectConversationId&&t.sharedProjectConversationOwnerId?{continue_from_shared_project_conversation_id:t.sharedProjectConversationId,shared_project_conversation_owner_id:t.sharedProjectConversationOwnerId}:{conversation_id:n}),{parent_message_id:t.parentMessageId,model:t.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:(s=t.completionMetadata)==null?void 0:s.variantPurpose,suggestions:(o=t.completionMetadata)!=null&&o.suggestions?t.completionMetadata.suggestions.map(m=>yo(m)):void 0,chosen_suggestion:(a=t.completionMetadata)!=null&&a.suggestion?{type:t.completionMetadata.suggestion.type,index:t.completionMetadata.suggestionIndex,source:t.completionMetadata.suggestion.type===ke.Autocomplete?t.completionMetadata.suggestion.source:void 0,user_input:t.completionMetadata.suggestion.type===ke.Autocomplete?t.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:Po(t.historyDisabled),conversation_mode:uo((i=t.completionMetadata)==null?void 0:i.conversationMode),force_paragen:Po(t.forceParagen),force_paragen_model_slug:t.forceParagenModel,force_indepth_feedback:Po(t.forceIndepthFeedback),force_rate_limit:Po(t.forceRateLimit),reset_rate_limits:Po(t.resetRateLimits),record_rendering:Po(t.recordRendering),record_transformed_convo_json:Po(t.recordTransformedConvoJson),disable_system_content_toggling:Po(t.disableSystemContentToggling),enable_message_followups:t.enableMessageFollowups,source:(l=t.completionMetadata)==null?void 0:l.source,system_hints:(c=t.completionMetadata)==null?void 0:c.systemHints,prefetch_ids:(d=t.completionMetadata)==null?void 0:d.prefetchIds,supports_buffering:!0,supported_encodings:[ij.V1],conversation_origin:Os(t.conversationOrigin),force_use_search:Os(t.forceUseSearch),force_disable_features:Os(t.forceDisableFeatures),client_reported_search_source:(u=t.completionMetadata)==null?void 0:u.searchSource,client_contextual_info:t.contextualInfo,paragen_stream_type_override:Os(t.paragenStreamType==="none"?null:t.paragenStreamType),paragen_cot_summary_display_override:Os(t.paragenCotSummaryDisplay==="none"?null:t.paragenCotSummaryDisplay),is_onboarding_conversation:Po(t.isOnboardingConversation),is_visible:Os(t.isVisible),override_infer_treatment:Os(t.overrideInferTreatment),model_slug_stats_override:Os(t.modelSlugStatsOverride),is_anon_mode:Po(t.isAnonModeEnabled),is_reasoning_skipped:Po(t.isReasoningSkipped),async_task_id:Os(t.asyncTaskId),force_parallel_switch:Os(t.forceParallelSwitch),thinking_effort:Os(t.thinkingEffort),juice_score:Os(t.juiceScore),multimodal_juice_score:Os(t.multimodalJuiceScore),local_function_names:Sn()&&e?[...e]:void 0,api_tool_expansion_type:Os(t.apiToolExpansionType)})}function kj(t){let e=t;return t.clientMetadata&&(e=w({},t),delete e.clientMetadata),e}function Po(t){if(t===!0)return t}function Os(t){if(t!=null)return t}function Mj(t){if("type"in t)switch(t.type){case"gizmo_inline_review":return{type:"gizmo_inline_review",gizmoId:t.gizmo_id};case"title_generation":return{type:"title_generation",title:t.title,conversation_id:t.conversation_id};case"moderation":return{type:"moderation",conversationId:t.conversation_id,messageId:t.message_id,isCompletion:t.is_completion,flagged:t.moderation_response.flagged,blocked:t.moderation_response.blocked,shouldDisableConversation:!!t.moderation_response.should_disable_conversation,disclaimers:t.moderation_response.disclaimers,metadata:t.moderation_response.metadata};case"url_moderation":return{type:"url_moderation",conversationId:t.conversation_id,messageId:t.message_id,url:t.url_moderation_result.full_url,isSafe:t.url_moderation_result.is_safe};case"num_variants_in_stream":return{type:"num_variants_in_stream",num_variants_in_stream:t.num_variants_in_stream,display_treatment:t.display_treatment};case"input_message":return{type:"input_message",message:t.input_message,conversationId:t.conversation_id};case"display_crisis_helpline_message":return{type:"display_crisis_helpline_message",text:t.text,links:t.links,conversationId:t.conversation_id,messageId:t.message_id};case"perf_stats":case"conversation_detail_metadata":case"beacon_ui_response":case"resume_conversation_token":case"conversation_async_status":case"server_ste_metadata":case"message_marker":case"survey_campaign_effect":case"system_hint_suggestion":case"display_crisis_helpline_modal":return t;case"message_stream_complete":return{type:"done"};default:return}if(t.message)return{type:"message",message:t.message,conversationId:t.conversation_id}}async function Tse(t,e,n=[],s,o){var M,T,E,A,N,R,O,D;const a=Hn();if(!t1(a,!0)||!HJ(a)||Ve(a,"1925940714").get("disable-convo-2",!1))return;const l=jt(t),c=ft(t);if(c!=null&&c.prepareRequestBlocked)return;const d=3e3;if(o.delayAfterCompletion&&(c!=null&&c.lastCompletionFinishedTimestamp)){const F=performance.now()-c.lastCompletionFinishedTimestamp,V=d-F;V>0&&await new Promise(z=>setTimeout(z,V))}const u=(M=c==null?void 0:c.conversationOrigin)!=null?M:null;let m;if(o.isRegen){const F=me.getParentPromptNode(c);m=(T=F==null?void 0:F.id)!=null?T:""}else m=me.getCurrentNode(c).message.id;const f=yd(),p=hn(()=>vd(a)),g=(E=c==null?void 0:c.conduitToken)!=null?E:null,h=(A=c==null?void 0:c.prepareState)!=null?A:"none",x={threadId:l,prepareState:h,conduitToken:g,continueFromSharedPostId:c==null?void 0:c.continuingFromSharedPostId,forkFromSharedPost:!!(c!=null&&c.continuingFromSharedPostId),continueFromSharedConversationId:c==null?void 0:c.continuingFromSharedConversationId,branchingFromMessageId:c==null?void 0:c.branchingFromMessageId,branchingFromConversationId:c==null?void 0:c.branchingFromConversationId,sharedProjectConversationId:c==null?void 0:c.continuingFromSharedProjectConversationId,sharedProjectConversationOwnerId:(N=c==null?void 0:c.sharedProjectConversationOwner)==null?void 0:N.id,isOnboardingConversation:o.isOnboardingConversation,conversationOrigin:u,model:e,completionType:Xa.Next,completionMetadata:{systemHints:n,conversationMode:(R=c==null?void 0:c.mode)!=null?R:{kind:Tt.PrimaryAssistant}},messages:[],parentMessageId:m,recordRendering:f.recordRendering,recordTransformedConvoJson:f.recordTransformedConvoJson,historyDisabled:p,apiToolExpansionType:(O=f.apiToolExpansionType)!=null?O:void 0,asyncTaskId:(D=c==null?void 0:c.steeringAsyncTaskId)!=null?D:void 0,contextualInfo:GI(a)},y=Sn()?await N2():void 0,b=wj(x,y),v={"x-conduit-token":g!=null?g:"no-token"},S=xr(3010482349,"".concat(e,"-AAAA"))||xr(3240390095,"".concat(e,"-AAAA"));if(S){qe(t,F=>{F.conduitToken=null,F.prepareState=null});return}const C=pt(a)?S?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon",k="".concat(C,"/f/conversation/prepare");try{qe(t,z=>{z.prepareState="sent",z.lastPrepareTimestamp=performance.now()});const F=await jc.post(k,b,{additionalHeaders:v,authOption:qt.SendIfAvailable}),{conduit_token:V}=F;s(V)}catch(F){Ee.count(Ae.DEFAULT,"conduit_f_conversation_prepare_api_error"),Oe.addError(F),!C2(a)&&qe(t,z=>{z.conduitToken=null,z.prepareState="failure"})}}const Ese=t=>new Promise(e=>setTimeout(e,t));function Tj(t,e){return Br(this,null,function*(){const{MIN_RETRY_INTERVAL:n,MAX_RETRY_INTERVAL:s,RETRY_FACTOR:o,MAX_RETRY_COUNT:a}=Q2(e.ctx),{signal:i}=e;let l=!1;const c={onClose:(S,C)=>{S==="completed"&&(l=!0)}};let d,u,m=t,f=0,p=0,g=0,h=0;for(;m!=null;)try{try{for(var x=jo(m),y,b,v;y=!(b=yield new ts(x.next())).done;y=!1){const S=b.value;const C="response"in S;!C&&S.data!=null&&typeof S.data=="object"&&"type"in S.data&&S.data.type==="resume_conversation_token"&&"token"in S.data&&"conversation_id"in S.data?(u=String(S.data.token),d=String(S.data.conversation_id),Fu.set(d,u)):yield S,p>0&&(h++,U.logEventWithStatsig("ChatGPT Convo Stream: Resume Succeeded","chatgpt_convo_stream_resume_succeeded",{conversationId:d,offset:f,afterRetryCount:p,successfulResumeCount:h}),p=0),C||f++}}catch(b){v=[b]}finally{try{y&&(b=x.return)&&(yield new ts(b.call(x)))}finally{if(v)throw v[0]}}U.logEventWithStatsig("ChatGPT Convo Stream: Stream Completed","chatgpt_convo_stream_completed",{conversationId:d,resumeAttempts:g,successfulResumeCount:h}),d!=null&&Fu.remove(d),m=null,l=!0}catch(S){if(l)return;const C=dg(S);p===0&&U.logEventWithStatsig("ChatGPT Convo Stream: Error","chatgpt_convo_stream_error",{conversationId:d,offset:f,isNetworkError:C,successfulResumeCount:h,errorMessage:S instanceof Error?S.message:String(S)});const k=S instanceof Vn&&K2(S.status);if(p<a&&!(i!=null&&i.aborted)&&u!=null&&d!=null&&(dg(S)||k)&&Ve(e.ctx,"2489999880").get("is_resume_enabled",!1)){p===0&&U.logEventWithStatsig("ChatGPT Convo Stream: Resume Attempted","chatgpt_convo_stream_resume_attempted",{conversationId:d,offset:f,retryCount:p,successfulResumeCount:h}),p++,g++;const T=Math.min(n*o**p,s)*(.5+Math.random()*.5);yield new ts(Ese(T)),m=Ej(B(w({},e),{observer:c,resumeToken:u,conversationId:d,offset:f}))}else{const M=S instanceof Vn&&S.status===404;throw(p>=a||M&&p>0)&&U.logEventWithStatsig("ChatGPT Convo Stream: Resume Failed","chatgpt_convo_stream_resume_failed",{conversationId:d,offset:f,afterRetryCount:p,successfulResumeCount:h,isNetworkError:C,is404:M}),m=null,S instanceof Vn&&S.status===404&&p>0?(d!=null&&Fu.remove(d),Vn.createWithErrorMessage(S.url,"client",pi,void 0,S)):S}}})}function dg(t){return t instanceof Error&&t.message===pi||typeof t=="string"&&t===pi}function K2(t){return t===408||t===409||t===425||t===429||t===502||t===504}function Ej({ctx:t,conversationId:e,resumeToken:n,model:s,turnTracker:o,offset:a,signal:i,observer:l={}}){const c=xr(3010482349,"".concat(s,"-AAAA"))||xr(3240390095,"".concat(s,"-AAAA")),d=pt(t)?c?window.location.origin+"/backend-alt":window.location.origin+"/backend-api":window.location.origin+"/backend-anon",u={"x-conduit-token":n!=null?n:"no-token"},m="".concat(d,"/f/conversation/resume"),f=t?Xv(t):void 0,p={conversation_id:e,offset:a};return uj(m,{method:"POST",headers:B(w(w(w({},d1()),f?Zu({accessToken:f}):iA()),u),{"Content-Type":"application/json"}),body:p,intercomEventOnError:"fetch-error:conversation:new-message",signal:i!=null?i:void 0,observer:B(w({},l),{onEvent:h=>{var x;(x=l.onEvent)==null||x.call(l,h),o.onStreamEvent(h.byteLength,h.isDoneEvent)}}),ctx:t,retryConfig:Q2(t),shouldRetry:h=>(dg(h)||h instanceof Vn&&K2(h.status))&&Ve(t,"603105008").get("retry_stream_requests",!1)})}function Aj(a,i){return Br(this,arguments,function*(t,{turnTracker:e,prepareState:n,f_completion:s,signal:o}){try{try{for(var l=jo(t),c,d,u;c=!(d=yield new ts(l.next())).done;c=!1){const m=d.value;yield m}}catch(d){u=[d]}finally{try{c&&(d=l.return)&&(yield new ts(d.call(l)))}finally{if(u)throw u[0]}}e.onStreamClose(),s&&z_("conduit_f_conversation_api.success",n)}catch(m){throw Ee.count(Ae.DEFAULT,"conversation_api.client_request_error"),o!=null&&o.aborted?(e.handleAbort(m),s&&z_("conduit_f_conversation_api.aborted",n)):(e.handleRawError(m instanceof Error||typeof m=="string"?m:JSON.stringify(m)),s&&z_("conduit_f_conversation_api.error",n)),m}})}function Q2(t){const e=ds(t,"3165814200");return{MIN_RETRY_INTERVAL:e.get("MIN_RETRY_INTERVAL",300),MAX_RETRY_INTERVAL:e.get("MAX_RETRY_INTERVAL",5e3),RETRY_FACTOR:e.get("RETRY_FACTOR",1.5),MAX_RETRY_COUNT:e.get("MAX_RETRY_COUNT",12)}}function Ase(t){try{return new URL(t)}catch(e){return new URL(t,window.location.origin)}}const Ise=.5,jse=j(()=>I(()=>import("./jydiuhuavfnsv8jk.js"),__vite__mapDeps([131,1,29,30])).then(t=>t.QuietHoursModal));function Pse(){const t=Nse();return t?t.gapPx>t.viewportHeightPx*Ise:!1}function Nse(){if(typeof window>"u"||typeof document>"u")return null;const t=document.getElementById("thread");if(!t)return null;const e=t.querySelectorAll('[data-turn="user"]');if(!e.length)return null;const n=e[e.length-1],s=window.innerHeight;if(!Number.isFinite(s)||s<=0)return null;const{bottom:o}=n.getBoundingClientRect();return{gapPx:s-o,viewportHeightPx:s}}var Mt,jj,jy,gm,Cp,Pj,Nj,Rj,Lj,Oj,Dj,Fj,Bj,Uj,Vj,Gj,$j,Py,Ny,Ry,Ly;class Ij{constructor(e,n,s,o,a,i,l,c,d,u,m,f,p,g,h,x,y,b,v,S,C=!1,k,M=!1,T=!1,E,A=void 0,N,R,O=!0){co(this,Mt);ne(this,"isFirstCompletionInThread");ne(this,"activeBranchLastMessage");ne(this,"messagesToUpdate",{});ne(this,"allIncompleteMessageIds",new Set);ne(this,"responseThreadId");ne(this,"isCompletionBlocked",!1);ne(this,"isEitherFlagged",!1);ne(this,"sentNotification",!1);ne(this,"variantsInStreamInfo");ne(this,"blurDuringCompletionTracker",new AJ);ne(this,"completionLatencyTracker");ne(this,"preflightTime");ne(this,"treatCompletionAsAsync",!1);ne(this,"realtimeAsyncCompletion",!1);ne(this,"resumeToken");ne(this,"placeholderNodeId");co(this,gm,e=>{var n,s,o;if(this.activeBranchLastMessage&&this.completionLatencyTracker.onResponse(e,this.activeBranchLastMessage,this.responseThreadId),this.responseThreadId===void 0&&"conversationId"in e){const a=e.conversationId;if(this.responseThreadId=a,Na(this.conversation.id)&&jt(this.conversation.id)!==a&&(ZG(this.ctx,this.conversation.id,a),U.logEvent("Attribution: Client Thread to Server Thread",{client_thread_id:this.conversation.id,server_thread_id:a})),this.isContinuingFromSharedConversation&&(qe(this.conversation.id,l=>{delete l.continuingFromSharedConversationId}),We.logEvent("chatgpt_continue_conversation_first_message_sent"),U.logEvent("Continue Conversation: First Message Sent",{forked_conversation_id:a,shared_conversation_id:(n=this.initialThread)==null?void 0:n.continuingFromSharedConversationId})),this.isContinuingFromBranchingConversation&&qe(this.conversation.id,l=>{delete l.branchingFromConversationId,delete l.branchingFromMessageId}),this.isContinuingFromSharedProjectConversation&&qe(this.conversation.id,l=>{delete l.continuingFromSharedProjectConversationId,delete l.sharedProjectConversationOwner}),this.isContinuableSharedPost&&qe(this.conversation.id,l=>{delete l.continuingFromSharedPostId,delete l.forkFromSharedPost}),this.isFirstCompletionInThread){const l=ft(this.conversation.id);U.logEvent("Create New Thread"),!this.isHistoryAndTrainingDisabled&&uee(l==null?void 0:l.mode)&&pt(this.ctx)&&(ro(this.queryClient,me.getGizmoId(l)),l!=null&&l.disableConversationNavigation||M2(Mee,this.queryClient,a,this.isSnorlaxEnabledForGizmo))}const i={id:this.requestId,threadId:this.responseThreadId,completionType:this.completionType,eventSource:this.eventSource,model:this.model};if(this.completionType===Xa.Next){const l=me.getConversationTurns(ft(this.conversation.id)),c=l.length,d=l.filter(m=>m.role===Ze.User),u=d&&((s=d[d.length-1])==null?void 0:s.messages[0]);if((u==null?void 0:u.content.content_type)===dt.Text){const m=u.content.parts.join("").length,f=(o=d==null?void 0:d.length)!=null?o:0;i.countConversationTurns=c,i.countUserSubmittedMessages=f,i.countLastUserPromptTextMessageLength=m}}U.logEvent("Generate Completion",i)}switch(e.type){case"num_variants_in_stream":Qt(this,Mt,Fj).call(this,e);break;case"moderation":Qt(this,Mt,Gj).call(this,e);break;case"url_moderation":Qt(this,Mt,$j).call(this,e);break;case"message":Qt(this,Mt,Py).call(this,e);break;case"input_message":Qt(this,Mt,Py).call(this,e);break;case"done":Qt(this,Mt,Ry).call(this);break;case"gizmo_inline_review":Qt(this,Mt,Pj).call(this,e);break;case"title_generation":Qt(this,Mt,Nj).call(this,e);break;case"conversation_detail_metadata":Qt(this,Mt,Rj).call(this,e);break;case"beacon_ui_response":Qt(this,Mt,Lj).call(this,e);break;case"survey_campaign_effect":Aee(e);break;case"conversation_async_status":Qt(this,Mt,Oj).call(this,e);break;case"resume_conversation_token":Qt(this,Mt,Dj).call(this,e);break;case"system_hint_suggestion":Qt(this,Mt,Bj).call(this,e);break;case"display_crisis_helpline_message":Qt(this,Mt,Uj).call(this,e);break;case"display_crisis_helpline_modal":Qt(this,Mt,Vj).call(this,e);break}});ne(this,"debouncedUpdateExistingMessages",yr(()=>{if(this.isCompletionBlocked)return;const e=Object.values(this.messagesToUpdate);e.length!==0&&(qe(this.conversation.id,n=>{ln.updateTree(n,s=>{for(const o of e)s.updateNodeMessage(o.id,o),o.status!=="in_progress"&&(s.updateNodeMetadata(o.id,{completionSampleFinishTime:Date.now()}),this.allIncompleteMessageIds.delete(o.id))})}),this.messagesToUpdate={})},50,{leading:!0,maxWait:50}));this.ctx=e,this.requestId=n,this.queryClient=s,this.initialThread=o,this.conversation=a,this.parentMessageId=i,this.prependMessages=l,this.promptMessage=c,this.appendMessages=d,this.completionType=u,this.model=m,this.eventSource=f,this.isHistoryAndTrainingDisabled=p,this.startPreflightTime=g,this.isSnorlaxEnabledForGizmo=h,this.isNewThread=x,this.isContinuingFromSharedConversation=y,this.isContinuingFromBranchingConversation=b,this.isContinuingFromSharedProjectConversation=v,this.turnTracker=S,this.isAnonModeEnabled=k,this.isContinuableSharedPost=M,this.isReasoningSkipped=T,this.thinkingEffort=E,this.modelSlugStatsOverride=A,this.asyncTaskId=N,this.expireConduit=O,this.completionLatencyTracker=new $J(this.requestId,g),this.isFirstCompletionInThread=x||this.isContinuingFromSharedConversation||this.isContinuingFromSharedProjectConversation||this.isContinuableSharedPost||this.isContinuingFromBranchingConversation,R!=null&&R.disablePlaceholder||(this.placeholderNodeId="".concat(xb).concat(n)),C&&(this.sentNotification=!0)}updateBeforeRequest(){bQ.incrementUserMessageCount(pt(this.ctx)?Vo.LoggedIn:Vo.LoggedOut),hr.retainThread(this.conversation.id),qe(this.conversation.id,e=>{var a,i,l,c,d;e.stopConduitToken=(a=e.conduitToken)!=null?a:null,this.expireConduit&&(e.conduitToken=null),e.prepareState=null,e.lastPrepareTimestamp=null;const n=this.parentMessageId?me.getNode(e,this.parentMessageId):void 0,s=(n==null?void 0:n.message.author.role)===Ze.User,o=Pse();this.completionType===Xa.Next&&me.hasUserMessage(e)&&((i=this.promptMessage)==null?void 0:i.author.role)===Ze.User&&!((c=(l=this.promptMessage)==null?void 0:l.metadata)!=null&&c.is_visually_hidden_from_conversation)&&!(s&&o)&&(e.scrollToMessageId=(d=this.promptMessage)==null?void 0:d.id),ln.updateTree(e,(u,m)=>{var p,g;if(this.parentMessageId&&(m=me.getNode(e,this.parentMessageId).id),this.prependMessages)for(const h of this.prependMessages)h.clientMetadata=B(w({},h.clientMetadata),{isOptimistic:!0}),m=u.addMessageNode(m,h);if(this.promptMessage){const h=this.promptMessage;h.clientMetadata=B(w({},h.clientMetadata),{isOptimistic:!0}),m=u.addMessageNode(m,h)}if(this.appendMessages)for(const h of this.appendMessages)h.clientMetadata=B(w({},h.clientMetadata),{isOptimistic:!0}),m=u.addMessageNode(m,h);const f=(g=(p=this.promptMessage)==null?void 0:p.metadata)==null?void 0:g.gizmo_id;if(this.placeholderNodeId){const h=cy("",f?{gizmo_id:f}:void 0,{requestId:this.requestId,isPlaceholder:!0},this.placeholderNodeId);m=u.addMessageNode(m,h)}return m})})}async sendRequest({conduitToken:e,turnstileToken:n,proofToken:s,completionMetadata:o,resolvedParentMessageId:a,messages:i,extraStreamParams:l,chatReq:c,profiler:d}){var g,h,x,y,b,v,S,C,k,M,T,E,A,N;kw(this.conversation.id,!0);const u=new AbortController;hp.addRequest(this.requestId,u,this.turnTracker);const m=yd(),f=hn(this.conversation.serverId$);if(this.completionType===Xa.Variant&&f==null){Oe.addError("Generating variant without conversation_id"),Qt(this,Mt,Cp).call(this,new Error("Regeneration must have conversation_id"));return}const p=Cse(this.ctx,w(w(B(w({conversationOrigin:(h=(g=this.initialThread)==null?void 0:g.conversationOrigin)!=null?h:null,model:this.model,completionType:this.completionType,prepareState:(y=(x=this.initialThread)==null?void 0:x.prepareState)!=null?y:"none",conduitToken:e,threadId:f,isReasoningSkipped:this.isReasoningSkipped,asyncTaskId:this.asyncTaskId,overrideInferTreatment:m.autoSwitcherTreatmentOverride,modelSlugStatsOverride:this.modelSlugStatsOverride,continueFromSharedConversationId:(b=this.initialThread)==null?void 0:b.continuingFromSharedConversationId,branchingFromConversationId:(v=this.initialThread)==null?void 0:v.branchingFromConversationId,branchingFromMessageId:(S=this.initialThread)==null?void 0:S.branchingFromMessageId,sharedProjectConversationOwnerId:(k=(C=this.initialThread)==null?void 0:C.sharedProjectConversationOwner)==null?void 0:k.id,sharedProjectConversationId:(M=this.initialThread)==null?void 0:M.continuingFromSharedProjectConversationId,continueFromSharedPostId:(T=this.initialThread)==null?void 0:T.continuingFromSharedPostId,forkFromSharedPost:(E=this.initialThread)==null?void 0:E.forkFromSharedPost,historyDisabled:this.isHistoryAndTrainingDisabled,isAnonModeEnabled:this.isAnonModeEnabled,parentMessageId:a,messages:i,chatReq:c,turnstileToken:n,proofToken:s,completionMetadata:o,contextualInfo:w({is_dark_mode:qG(),time_since_loaded:Math.floor(performance.now()/1e3),page_height:window.innerHeight,page_width:window.innerWidth,pixel_ratio:window.devicePixelRatio,screen_height:window.screen.height,screen_width:window.screen.width,window_style:Nn(this.ctx).windowStyle},GI(this.ctx)),isOnboardingConversation:o==null?void 0:o.isOnboardingConversation,thinkingEffort:Qt(this,Mt,jj).call(this),forceParagen:m.forceParagen,forceParagenModel:m.forceParagen?m.forceParagenModel.value:void 0,forceRateLimit:m.forceRateLimit,resetRateLimits:m.resetRateLimits,recordRendering:m.recordRendering,recordTransformedConvoJson:m.recordTransformedConvoJson,disableSystemContentToggling:m.rebaseSystemMessageContent!=null,forceUseSearch:(A=m.forceUseSearch)!=null?A:void 0,paragenStreamType:m.paragenStreamType,paragenCotSummaryDisplay:m.paragenCotSummaryDisplay,forceParallelSwitch:m.forceParallelSwitch,juiceScore:m.juiceScore,multimodalJuiceScore:m.multimodalJuiceScore,apiToolExpansionType:(N=m.apiToolExpansionType)!=null?N:void 0},t1(this.ctx)?{f_completion:!0}:{}),{expireConduit:this.expireConduit}),WJ()?{f_search:!0}:{}),l),this.turnTracker,d,u.signal,this.conversation.id);try{try{for(var R=jo(p),O,D,F;O=!(D=await R.next()).done;O=!1){const V=D.value;V.type==="connected"?Qt(this,Mt,jy).call(this,V):Uw(V)&&Mn(this,gm).call(this,V)}}catch(D){F=[D]}finally{try{O&&(D=R.return)&&await D.call(R)}finally{if(F)throw F[0]}}}catch(V){AC(V)||u.signal.aborted?Qt(this,Mt,Ny).call(this,V):Qt(this,Mt,Cp).call(this,V)}finally{kw(this.conversation.id,!1)}}async sendResumeRequest({conversationId:e,resumeToken:n,profiler:s}){const o=new AbortController;hp.addRequest(this.requestId,o,this.turnTracker),qe(this.conversation.id,u=>{ln.setRequestIdOnCurrentLeaf(u,this.requestId)});const a=wse(this.ctx,{conversationId:e,resumeToken:n,model:this.model},this.turnTracker,s,o.signal,this.conversation.id);try{try{for(var i=jo(a),l,c,d;l=!(c=await i.next()).done;l=!1){const u=c.value;u.type==="connected"?Qt(this,Mt,jy).call(this,u):Uw(u)&&Mn(this,gm).call(this,u)}}catch(c){d=[c]}finally{try{l&&(c=i.return)&&await c.call(i)}finally{if(d)throw d[0]}}}catch(u){AC(u)||o.signal.aborted?Qt(this,Mt,Ny).call(this,u):Qt(this,Mt,Cp).call(this,u)}}async maybeSendNotification(){var i;if(this.sentNotification)return;const e=ft(this.conversation.id),n=(i=e==null?void 0:e.title)!=null?i:void 0;if(!n)return;const s=me.getCurrentNode(e).message;if(o1(s)&&!mX(s))return;const o=s.content,a=(o==null?void 0:o.content_type)===dt.Text?jX(await I(()=>import("./iarex6kxmgocprus.js"),__vite__mapDeps([102,29,1,30,49,50,51,52,53,54,55,56,58,59,60])).then(l=>{var c;return l.markdownToPlaintext((c=o.parts[0])!=null?c:"")}),120):void 0;tg({title:n,subtitle:a,clientThreadId:this.conversation.id}),this.sentNotification=!0}}Mt=new WeakSet,jj=function(){if(this.model!==YG)return;if(Ve(this.ctx,"790459319").get("show-juice-control",!1))return this.thinkingEffort},jy=function(e){const{serverRequestId:n,interruptConversationToken:s}=e;this.turnTracker.onStreamOpen(s!==null),n&&this.turnTracker.onReceivedServerRequestId(n),s&&qe(this.conversation.id,o=>{o.conduitToken=s}),BJ(this.requestId,this.model,n,gi(this.preflightTime))},gm=new WeakMap,Cp=function(e){var d,u,m,f;const n=KG(e),s=n.message,o=e instanceof Vn?e.code:void 0,a=e instanceof Vn?(d=e.detail)==null?void 0:d.can_retry:void 0,i=s===pi,l=i&&!this.treatCompletionAsAsync&&pt(this.ctx)&&Ve(this.ctx,"2489999880").get("is_polling_enabled",!1);l&&(this.treatCompletionAsAsync=!0),this.debouncedUpdateExistingMessages.flush(),this.treatCompletionAsAsync&&s===pi&&!l||qe(this.conversation.id,p=>{ln.updateTree(p,(g,h)=>{var b,v,S,C,k;const x=this.variantsInStreamInfo&&(v=(b=me.getParentPromptNode(p))==null?void 0:b.id)!=null?v:h,y={err:l?JG:s,errType:l?"info":"danger",errCode:l?QG.NetworkErrorWithReconnection:o,completionSampleFinishTime:Date.now(),canRetry:l?!1:a};if(((k=(C=(S=g.getNodeIfExists(x))==null?void 0:S.message)==null?void 0:C.content)==null?void 0:k.content_type)!==dt.Text){const M=cy("");return M.clientMetadata=w(w({},M.clientMetadata),y),g.addMessageNode(x,M)}else g.updateNodeMetadata(x,y)})});try{typeof s=="string"&&s.toLowerCase().includes("blackout hours")&&gt(this.ctx,jse)}catch(p){}try{const p=ft(this.conversation.id),g=me.getLastMessageSystemHints(p);if(g==null?void 0:g.includes(is)){const x=e instanceof Vn?e:void 0,y=x==null?void 0:x.status,b=(u=x==null?void 0:x.isClientError())!=null?u:!1,v=(m=x==null?void 0:x.isServerError())!=null?m:!1,S=i?"network":v?"server":b?"client":"unknown";Oe.addAction("agent.conversation.start_failed",{request_id:this.requestId,model:this.model,error_code:o!=null?o:"unknown",is_network_error:i,is_recoverable_error:l,error_status:y,is_client_error:b,is_server_error:v,error_type:S})}}catch(p){}switch(i&&U.logNetworkError({source:"request_stream",type:l?"info_polling":"error"}),o){case Hr.ContentPolicy:case Hr.ContentOrTos:case Ru.ModelCapExceeded:case Ru.HistoryDisabledConversationNotFound:break;default:s!==void 0&&We.logEvent("chatgpt_conversation_error_web",s)}if(this.blurDuringCompletionTracker.onMessageError(),yw(n),Qt(this,Mt,Ly).call(this),nl.publish({kind:"completionFinished",serverThreadId:this.responseThreadId}),e instanceof Vn&&e.code===Ru.ModelCapExceeded){const p=(f=e.detail)==null?void 0:f.clears_in;p&&(gee(new Date(Date.now()+p*1e3).toISOString()),setTimeout(()=>{BI()},p*1e3))}},Pj=function({gizmoId:e}){qe(this.conversation.id,n=>{n.promptGptRating={gizmoId:e}})},Nj=function(e){s1(this.ctx,e.conversation_id,e.title,bm.Generated),this.isSnorlaxEnabledForGizmo||QJ(this.ctx,e.conversation_id,e.title),this.maybeSendNotification()},Rj=function(e){const{default_model_slug:n}=e,s=FI(this.ctx)&&n===Up.GPT5_PRO?Up.GPT5:n;n&&!mh({id:n},this.ctx)&&(qe(this.conversation.id,a=>{a.defaultModelId=s}),s&&n!==s&&bd(this.conversation,s)),xe(this.ctx,"3315017149")&&lA(e)&&this.queryClient.invalidateQueries({queryKey:cA()}),Ku.updateDetails(e)},Lj=function(e){Qc.updateDetails(e)},Oj=function(e){const{async_status:n}=e;n===Yt.REALTIME&&(this.realtimeAsyncCompletion=!0),this.responseThreadId&&Ps(this.responseThreadId,{source:ns.SERVER,value:n}),Ps(this.conversation.id,{source:ns.SERVER,value:n})},Dj=function(e){var i,l;const{token:n}=e;this.resumeToken=n!=null?n:void 0;const s=ft(this.conversation.id),o=me.getLastMessageSystemHints(s),a=o==null?void 0:o.includes(is);this.realtimeAsyncCompletion&&a&&Oe.addAction("agent.conversation.start_succeeded",{conversation_id:(l=(i=e.conversation_id)!=null?i:this.responseThreadId)!=null?l:"",request_id:this.requestId,model:this.model})},Fj=function(e){this.variantsInStreamInfo=e,qe(this.conversation.id,n=>{ln.updateTree(n,(s,o)=>{var i;const a=(i=me.getParentPromptNode(n))!=null?i:s.getNodeByIdOrMessageId(o);s.updateNodeMetadata(a.id,{variantsInStreamInfo:this.variantsInStreamInfo})})})},Bj=function(e){let n=[];const{chips:s}=e;if(s!=null&&s.length)n=s.map(a=>({actionLabel:a.action_label,systemHint:a.system_hint}));else return null;am(this.conversation).addActiveSystemHintSuggestionChips(n)},Uj=function(e){qe(this.conversation.id,n=>{ln.updateTree(n,s=>{s.updateNodeMessageMetadata(e.messageId,{crisis_helpline_message:e})})})},Vj=function(e){gt(this.ctx,_X,{effect:e})},Gj=function(e){const{isCompletion:n,flagged:s,blocked:o,disclaimers:a}=e,i=!!(a!=null&&a.length);(s||o||i)&&(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged=!0,o&&n&&(this.isCompletionBlocked=!0),PI(e,this.conversation.id))},$j=function(e){const{conversationId:n,url:s,isSafe:o}=e;o&&qe(n,a=>{a.safeUrls.push(s)})},Py=function({type:e,message:n,conversationId:s}){var o,a,i;if(e==="message"&&(this.activeBranchLastMessage=n),(n==null?void 0:n.author.role)===Ze.Tool&&(n==null?void 0:n.author.name)==="bio"){const l=(o=n.metadata)==null?void 0:o.gizmo_id;setTimeout(()=>{this.queryClient.invalidateQueries({queryKey:HI(l)}),this.queryClient.invalidateQueries({queryKey:WI()})},5e3)}if((a=n.metadata)!=null&&a.trigger_async_ux&&(this.treatCompletionAsAsync=!0,Ps(this.conversation.id,{source:ns.SERVER,value:Yt.STREAMING})),me.getTree(ft(s)).containsNodeOrMessageId(n.id)){this.messagesToUpdate[n.id]=n,this.debouncedUpdateExistingMessages();const l=(i=n.metadata)==null?void 0:i.parent_id;if(!l)return;qe(this.conversation.id,c=>{ln.updateTree(c,d=>{const u=d.getNodeIfExists(n.id),m=d.getNodeIfExists(l);if(!u){Oe.addError(new Error("CompletionRequest handleMessage: message ".concat(n.id," not found in tree")));return}if(!m){Oe.addAction("conversation.input_missing_expected_parent",{message_id:n.id,parent_id:l,completion_type:this.completionType});return}u.parentId!==m.id&&d.moveNode(m.id,u.id)})});return}this.debouncedUpdateExistingMessages.flush(),qe(this.conversation.id,l=>{ln.updateTree(l,(c,d)=>{var p,g,h,x,y;const u={requestId:this.requestId};n.status!=="in_progress"?u.completionSampleFinishTime=Date.now():this.allIncompleteMessageIds.add(n.id);const m=B(w({},n),{clientMetadata:u});(p=n.metadata)!=null&&p.invoked_resource&&(l.startedWithByoMcp||(l.startedWithByoMcp=((g=n.metadata)==null?void 0:g.invoked_resource.publish_status)==="private"));const f=(h=n.metadata)==null?void 0:h.parent_id;if(f){if(this.placeholderNodeId&&c.getParent(this.placeholderNodeId).id===c.getNodeByIdOrMessageId(f).id)if(IC(m)){c.prependNode(this.placeholderNodeId,m);return}else c.getNodeIfExists(this.placeholderNodeId)&&c.deleteNode(this.placeholderNodeId),this.placeholderNodeId=void 0;const b=c.getNodeByIdOrMessageId(f).children,v=c.addMessageNode(f,m);if(this.completionType===Xa.Next&&((y=(x=this.variantsInStreamInfo)==null?void 0:x.num_variants_in_stream)!=null?y:0)<=1&&b.length>0){for(const S of b)S!==v&&c.moveNode(v,S);return}return v}else{const b=c.findFirst(v=>!IC(v.message));if(b)c.prependNode(b.id,m);else return c.addMessageNode(d,m)}})})},Ny=function(e){this.debouncedUpdateExistingMessages.flush(),qe(this.conversation.id,n=>{ln.updateTree(n,s=>{for(const o of this.allIncompleteMessageIds)s.updateNodeMessageMetadata(o,{finish_details:{type:"interrupted"}})})}),Qt(this,Mt,Ry).call(this)},Ry=function(){var e;if(this.debouncedUpdateExistingMessages.flush(),this.isEitherFlagged||(this.isFirstCompletionInThread&&this.responseThreadId&&!this.isHistoryAndTrainingDisabled&&!We.checkGate("2562876640")&&lX(this.ctx,this.responseThreadId,this.model),nl.publish({kind:"completionFinished",serverThreadId:this.responseThreadId})),this.isFirstCompletionInThread&&this.responseThreadId){const n=me.getGizmoId(ft(this.responseThreadId)),s=this.queryClient.getQueryState([Ns,{gizmoId:n}]);if((s==null?void 0:s.fetchStatus)!=="fetching"){const o=this.queryClient.getQueryData([Ns,{gizmoId:n}]);((e=o==null?void 0:o.pages.flatMap(l=>l.items))!=null?e:[]).some(l=>l.id===this.responseThreadId)||(aX(this.queryClient,n),U.logEventWithStatsig("Refetch Project Conversation in Completion Request","chatgpt_web_projects_completion_request_new_chat_refetch"))}}nl.publish({kind:"createConversation",clientThreadId:this.conversation.id}),this.blurDuringCompletionTracker.onMessageDone(),yw(),Qt(this,Mt,Ly).call(this)},Ly=function(){qe(this.conversation.id,e=>{if(e.shouldRefetchConvoOnFinalize){const n=jt(this.conversation.id);n&&(ka(n,{skipIfExisting:!1}),ln.setShouldRefetchConvoOnFinalize(e,!1))}ln.updateTree(e,n=>{for(const s of this.allIncompleteMessageIds)n.updateNodeMetadata(s,{completionSampleFinishTime:Date.now()})})}),this.allIncompleteMessageIds.clear(),this.expireConduit&&qe(this.conversation.id,e=>{e.conduitToken=null}),setTimeout(()=>{if(this.treatCompletionAsAsync||this.realtimeAsyncCompletion){const e=this.treatCompletionAsAsync?Yt.STREAMING:Yt.REALTIME,n=s=>{if(!s)return;const o=S2(this.ctx,s);(o==null||o.source===ns.CLIENT)&&Ps(s,{source:ns.SERVER,value:e})};n(this.responseThreadId),n(this.conversation.id)}else Ps(this.conversation.id,{source:ns.CLIENT,value:Yt.UNREAD});this.maybeSendNotification(),hp.removeRequest(this.requestId),hr.releaseThread(this.conversation.id)},0)};const Rse=10,Lse=Nt(Cn(()=>({requests:{},requestIds:[]}))),Af=(t,e,n)=>{if(!qo(Hn()).checkGate("1154002920"))return null;Lse.setState(s=>{var o,a;if(s.requestIds.length===Rse){const i=s.requestIds.shift();i!=null&&delete s.requests[i]}(a=(o=s.requests)[t])!=null||(o[t]={serverRequestId:null,timeToFirstToken:null,apiStartDelay:null,serverStats:null}),s.requests[t][e]=n})},If={publishServerRequestId:(t,e)=>{Af(t,"serverRequestId",e)},publishServerStats:(t,e)=>{Af(t,"serverStats",e)},publishApiStartDelay:(t,e)=>{Af(t,"apiStartDelay",e)},publishTimeToFirstToken:(t,e)=>{Af(t,"timeToFirstToken",e)}},Hj=t=>{var e,n;return!!((n=(e=t.metadata)==null?void 0:e.attachments)!=null&&n.length)},Wj=t=>{const e=t.content;return e.content_type!==dt.MultimodalText?!1:e.parts.some(Ose)},Ose=t=>typeof t=="string"?!1:t.content_type===Sa.ImageAssetPointer||t.content_type===Sa.Image;class Dse{constructor(e){ne(this,"isAuraRequest");ne(this,"surface");ne(this,"hasSearchHint",!1);ne(this,"hasAuraContextToolMessage",!1);ne(this,"hasAuraContextAttachments",!1);ne(this,"hasAuraContextImageContent",!1);ne(this,"hasFileSearchToolCall",!1);ne(this,"modelSlug");this.ctx=e,this.isAuraRequest=Sn(),this.surface=this.isAuraRequest?this.resolveSurface():null}trackMessage(e){var a,i,l,c,d,u;if(!this.isAuraRequest)return;const n=(d=(l=(a=e.metadata)==null?void 0:a.model_slug)!=null?l:(i=e.metadata)==null?void 0:i.default_model_slug)!=null?d:(c=e.author.metadata)==null?void 0:c.model_slug;n&&(this.modelSlug=n),this.recordSystemHints((u=e.metadata)==null?void 0:u.system_hints);const s=e.author.name,o=e.author.role;o===Ze.Tool&&s===hu&&(this.hasAuraContextToolMessage||(this.hasAuraContextToolMessage=!0),this.hasAuraContextAttachments||(this.hasAuraContextAttachments=Hj(e)),this.hasAuraContextImageContent||(this.hasAuraContextImageContent=Wj(e))),!this.hasFileSearchToolCall&&o===Ze.Tool&&s===oo.FILE_SEARCH&&(this.hasFileSearchToolCall=!0)}recordSystemHints(e){if(!(!this.isAuraRequest||this.hasSearchHint||!e)){for(const n of e)if(n===Ie.Search){this.hasSearchHint=!0;break}}}getTags(){var o,a,i,l;if(!this.isAuraRequest)return;const e=c=>c?"true":"false",n=(a=(o=ut(this.ctx))==null?void 0:o.planType)!=null?a:"unknown",s=(i=this.modelSlug)!=null?i:"unknown";return[{key:"surface",value:(l=this.surface)!=null?l:"unknown"},{key:"is_search_request",value:e(this.hasSearchHint)},{key:"has_".concat(hu,"_tool"),value:e(this.hasAuraContextToolMessage)},{key:"has_".concat(hu,"_attachments"),value:e(this.hasAuraContextAttachments)},{key:"has_".concat(hu,"_image_content"),value:e(this.hasAuraContextImageContent)},{key:"has_file_search_tool_call",value:e(this.hasFileSearchToolCall)},{key:"plan_type",value:n},{key:"model_slug",value:s}]}resolveSurface(){return hn(()=>Cr(this.ctx)?"mini-web":un(this.ctx)?"sidebar":"unknown")}}var q_,Qw;function Fse(){if(Qw)return q_;Qw=1;function t(e){return e===void 0}return q_=t,q_}var Bse=Fse();const Use=Wn(Bse);var Y_,Jw;function Vse(){if(Jw)return Y_;Jw=1;var t="Expected a function";function e(n){if(typeof n!="function")throw new TypeError(t);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}return Y_=e,Y_}var Z_,Xw;function Gse(){if(Xw)return Z_;Xw=1;var t=hb(),e=Vse(),n=XG();function s(o,a){return n(o,e(t(a)))}return Z_=s,Z_}var $se=Gse();const Hse=Wn($se);function Wse(t){return typeof t=="number"?Math.trunc(t):t}const zse=["time_since_prompt_sent_ms","time_since_last_event_ms","first_token_lat","api_start_delay","completion_request_time_to_first_visible_message"],jf="is_kaur1br5";class zj{constructor({ctx:e,clientRequestId:n,gizmoType:s,preflightTime:o,isTemporaryChat:a}){ne(this,"ctx");ne(this,"start_time_ms");ne(this,"turn_id");ne(this,"trigger");ne(this,"result");ne(this,"time_since_prompt_sent_ms");ne(this,"stream_update_event_count",0);ne(this,"first_token_lat");ne(this,"first_visible_content_token_lat");ne(this,"first_nav_link_token_lat");ne(this,"last_model_message_received");ne(this,"api_start_time");ne(this,"time_since_last_event_ms");ne(this,"api_start_delay");ne(this,"completion_request_time_to_first_visible_message");ne(this,"model_slug");ne(this,"last_message_model_slug");ne(this,"tools_used");ne(this,"system_hints");ne(this,"gizmo_id");ne(this,"promptSentTimestamp");ne(this,"serverStats");ne(this,"serverSteMetadata");ne(this,"logger");ne(this,"server_request_id");ne(this,"client_request_id");ne(this,"completed",!1);ne(this,"num_images_attached",0);ne(this,"num_files_attached",0);ne(this,"hasKaur1br5ContextAttachments",!1);ne(this,"hasKaur1br5ContextImageContent",!1);ne(this,"bytes_received",0);ne(this,"model_message_update_count",0);ne(this,"stream_encoding");ne(this,"stream_buffering",!0);ne(this,"gizmo_type");ne(this,"isStreamOpen",!1);ne(this,"isTemporaryChat");ne(this,"hasReceivedAgentMetadataMessage",!1);ne(this,"streamTerminatedPrematurely",!1);ne(this,"auraTimeToFirstTokenTracker");ne(this,"messageMarkerLatencies",{});this.ctx=e,this.client_request_id=n,this.start_time_ms=performance.now(),this.turn_id=_s(),this.promptSentTimestamp=o!=null?o:performance.now(),this.tools_used=new Set,this.system_hints=new Set,this.logger=e$.createLogger("turn-analytics","info","http"),this.auraTimeToFirstTokenTracker=new Dse(e),s&&(this.gizmo_type=s),this.isTemporaryChat=a}truncateValueForKey(e){const n=Wse(this[e]);n!==void 0&&(this[e]=n)}onUserMessages(e){e.forEach(n=>{var s,o,a,i;this.auraTimeToFirstTokenTracker.trackMessage(n),this.updateAuraContextToolMetadata(n),n.author.role==="user"&&((o=(s=n.metadata)==null?void 0:s.attachments)==null||o.forEach(l=>{l.height&&l.width?this.num_images_attached+=1:this.num_files_attached+=1}),(i=(a=n.metadata)==null?void 0:a.system_hints)==null||i.forEach(l=>{this.system_hints.add(l)}))})}addServerPerfStats(e){If.publishServerStats(this.client_request_id,e),this.serverStats=e}addServerSteMetadata(e){this.serverSteMetadata=e.metadata}onMessageMarker(e){const s="".concat(e.event,"_").concat("received");this.messageMarkerLatencies[e.marker]=B(w({},this.messageMarkerLatencies[e.marker]),{[s]:performance.now()-this.promptSentTimestamp})}onStreamOpen(e){this.isStreamOpen=!0,this.logCompletionStarted(),this.logTimeToInterruptToken(e!=null?e:!1)}onStreamClose(){this.model_message_update_count>0?this.logCompletion({type:qa.Success}):this.logCompletion({type:qa.Error,error:{reason:"empty_response",message:"Successful completion ended with no messages"}})}onPrematureStreamTermination(){var n,s,o;if(this.streamTerminatedPrematurely)return;this.streamTerminatedPrematurely=!0;const e=Sn()?"true":"false";Oe.addAction("conversation.stream.terminated_prematurely",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,system_hints:this.system_hints,model_slug:(s=(n=this.model_slug)!=null?n:this.last_message_model_slug)!=null?s:void 0,message_count:this.model_message_update_count,[jf]:e}),Ee.count(Ae.DEFAULT,"conversation.stream.terminated_prematurely",[{key:"first_system_hint",value:[...this.system_hints][0]||"n/a"},{key:"trigger",value:(o=this.trigger)!=null?o:"unknown"},{key:jf,value:e}])}onCompletionStarted(e,n){switch(e){case"next":this.trigger="submit";break;case"variant":this.trigger="reroll";break;case"continue":this.trigger="continue";break}this.model_slug=n}onReceivedServerRequestId(e){this.server_request_id=e,If.publishServerRequestId(this.client_request_id,this.server_request_id)}onStreamEvent(e,n){this.bytes_received+=e,n||(this.stream_update_event_count+=1)}onSentUserMessage(){this.api_start_time=performance.now(),this.api_start_delay=this.api_start_time-this.promptSentTimestamp,If.publishApiStartDelay(this.client_request_id,this.api_start_delay)}onMessageUpdate(e){var i,l,c,d;this.auraTimeToFirstTokenTracker.trackMessage(e),this.updateAuraContextToolMetadata(e),e.author.name===oo.n7jupd_m&&(this.hasReceivedAgentMetadataMessage=!0);const{model_slug:n,gizmo_id:s}=(i=e.metadata)!=null?i:{},{role:o,name:a}=e.author;if(this.gizmo_id=(l=this.gizmo_id)!=null?l:s,o===Ze.Tool&&a&&this.tools_used.add(a),o!==Ze.User&&o!==Ze.System&&o!==Ze.Developer&&o!==Ze.Root&&(this.model_message_update_count+=1,this.last_model_message_received=performance.now(),this.last_message_model_slug=n!=null?n:this.last_message_model_slug),!this.first_token_lat&&e.author.role!==Ze.User&&Bp(e)&&ko(e).length>0){const u=performance.now();this.first_token_lat=u-this.promptSentTimestamp,this.api_start_time&&(this.completion_request_time_to_first_visible_message=u-this.api_start_time),If.publishTimeToFirstToken(this.client_request_id,this.first_token_lat);const m=this.auraTimeToFirstTokenTracker.getTags();m&&Ee.hist(Ae.DEFAULT,"conversation.kaur1br5.time_to_first_token",m,this.first_token_lat)}if(!this.first_visible_content_token_lat&&e.author.role===Ze.Assistant&&Bp(e)&&(this.first_visible_content_token_lat=performance.now()-this.promptSentTimestamp),!this.first_nav_link_token_lat&&fh(e)===ph.SuperWidget){const u=e.content;(d=(c=u==null?void 0:u.widgets)==null?void 0:c.navlinks)!=null&&d.length&&(this.first_nav_link_token_lat=performance.now()-this.promptSentTimestamp)}}updateAuraContextToolMetadata(e){e.author.role!==Ze.Tool||e.author.name!==hu||(this.hasKaur1br5ContextAttachments||(this.hasKaur1br5ContextAttachments=Hj(e)),this.hasKaur1br5ContextImageContent||(this.hasKaur1br5ContextImageContent=Wj(e)))}handleAbort(e){this.logCompletion({type:qa.Canceled})}handleRawError(e){var a;let n,s=null,o=null;e instanceof Error?(s=(a=e.message)!=null?a:"Something went wrong",o=e instanceof Vn?e.status:void 0):s=e,o===400||s===pi||s==="NetworkError when attempting to fetch resource."||s==="The network connection was lost."?n="network_error":s==="Request timed out"?n="timeout":n="request_failed",this.logCompletion({type:qa.Error,error:w({reason:n,message:s},o&&{status_code:o})})}getFeatureFlags(){const e={"resumable-streaming":Ve(this.ctx,"2489999880",{disableExposureLog:!0}).get("is_resume_enabled",!1)},n=Object.entries(e),s=n.filter(([a,i])=>i).map(([a])=>a),o=n.filter(([a,i])=>!i).map(([a])=>a);return{enabled_feature_flags:s,disabled_feature_flags:o}}createLogPayload(){var i,l,c,d,u;const{enabled_feature_flags:e,disabled_feature_flags:n}=this.getFeatureFlags(),s=Nn(this.ctx),o=t$(this.ctx),a=B(w({turn_id:this.turn_id,trigger:this.trigger,result:gi((i=this.result)==null?void 0:i.type)},((l=this.result)==null?void 0:l.type)===qa.Error?{error:this.result.error}:void 0),{time_since_prompt_sent_ms:this.time_since_prompt_sent_ms,stream_update_event_count:this.stream_update_event_count,model_message_update_count:this.model_message_update_count,time_since_last_event_ms:this.time_since_last_event_ms,first_token_lat:this.first_token_lat,first_visible_content_token_lat:this.first_visible_content_token_lat,first_nav_link_token_lat:this.first_nav_link_token_lat,api_start_delay:this.api_start_delay,completion_request_time_to_first_visible_message:this.completion_request_time_to_first_visible_message,bytes_received:this.bytes_received,stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used],system_hints:[...this.system_hints],gizmo_id:this.gizmo_id,attachments:{files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached},has_kaur1br5_context_attachments:this.hasKaur1br5ContextAttachments,has_kaur1br5_context_image_content:this.hasKaur1br5ContextImageContent,temporary_chat:this.isTemporaryChat,gizmo_type:this.gizmo_type,server_ste_metadata:this.serverSteMetadata,message_marker_latencies:this.messageMarkerLatencies,cluster:(c=s.cluster)!=null?c:void 0,residency_region:(d=o==null?void 0:o.residencyRegion)!=null?d:void 0,compute_residency:(u=o==null?void 0:o.computeResidency)!=null?u:void 0,enabled_feature_flags:e,disabled_feature_flags:n});return{request_id:this.server_request_id,turn_analytics:a}}createStatsigPayload(){var e,n;return Hse({turn_id:String(this.turn_id),trigger:this.trigger,result:(e=this.result)==null?void 0:e.type,error:JSON.stringify(((n=this.result)==null?void 0:n.type)===qa.Error?{error:this.result.error}:void 0),time_since_prompt_sent_ms:String(this.time_since_prompt_sent_ms),stream_update_event_count:String(this.stream_update_event_count),model_message_update_count:String(this.model_message_update_count),time_since_last_event_ms:JSON.stringify(this.time_since_last_event_ms),first_token_lat:String(this.first_token_lat),api_start_delay:String(this.api_start_delay),completion_request_time_to_first_visible_message:String(this.completion_request_time_to_first_visible_message),bytes_received:String(this.bytes_received),stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,last_message_model_slug:this.last_message_model_slug,tools_used:[...this.tools_used].join(", "),system_hints:[...this.system_hints].join(", "),gizmo_id:this.gizmo_id,attachments:JSON.stringify({files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached}),has_kaur1br5_context_attachments:String(this.hasKaur1br5ContextAttachments),has_kaur1br5_context_image_content:String(this.hasKaur1br5ContextImageContent),temporary_chat:String(this.isTemporaryChat),gizmo_type:this.gizmo_type,server_ste_metadata:JSON.stringify(this.serverSteMetadata),message_marker_latencies:JSON.stringify(this.messageMarkerLatencies)},Use)}logCompletionStarted(){U.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_started","chatgpt_conversation_turn_turn_exchange_started",this.createStatsigPayload())}logTimeToInterruptToken(e){e&&Ee.hist(Ae.DEFAULT,"chatgpt_web_interrupt_token_latency",[],performance.now()-this.promptSentTimestamp),Ee.count(Ae.DEFAULT,"chatgpt_web_interrupt_token_exists",[{key:"has_conduit_token",value:e?"true":"false"}])}logCompletion(e){var s,o,a;if(this.completed)return;const n=performance.now();Ee.count(Ae.DEFAULT,"completion_request"),Ee.hist(Ae.DEFAULT,"completion_request_time",[],n-this.start_time_ms),this.completed=!0,this.result=e;for(const i of zse)this.truncateValueForKey(i);if(this.time_since_prompt_sent_ms=n-this.promptSentTimestamp,this.last_model_message_received&&(this.time_since_last_event_ms=n-this.last_model_message_received),e.type===qa.Error?this.logger.error("Turn exchange complete",this.createLogPayload()):this.logger.info("Turn exchange complete",this.createLogPayload()),this.system_hints.has(is)&&!this.hasReceivedAgentMetadataMessage){const i=Sn()?"true":"false";Oe.addAction("conversation.stream.agent_metadata_message_missing",{turn_id:this.turn_id,client_request_id:this.client_request_id,server_request_id:this.server_request_id,completion_result:e.type,stream_terminated_prematurely:this.streamTerminatedPrematurely,model_slug:(o=(s=this.model_slug)!=null?s:this.last_message_model_slug)!=null?o:void 0,trigger:this.trigger,[jf]:i}),Ee.count(Ae.DEFAULT,"conversation.stream.agent_metadata_message_missing",[{key:"trigger",value:(a=this.trigger)!=null?a:"null"},{key:jf,value:i}])}U.logEventWithStatsig("chatgpt_conversation_turn_turn_exchange_complete","chatgpt_conversation_turn_turn_exchange_complete",this.createStatsigPayload())}}const Oy=yb(()=>Qe(!1));function qse(t){return dA(t)&&!n$(t)}const Pf=50,Yse=95;function Zse(t,e){if(t<=e)return t/e*Pf;{const n=Pf,s=Yse-Pf,o=t-e,i=-(Pf/e)/s;return n+s*(1-Math.exp(i*o))}}class Kse{constructor(){ne(this,"mostRecentCompletionRequest");ne(this,"loggedRequests",new Set)}onCompletionRequestStarted(e){this.mostRecentCompletionRequest={requestId:e,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(e,n,s,o,a){var l;const i=this.mostRecentCompletionRequest;i!=null&&!this.loggedRequests.has(e)&&((l=me.getNode(ft(n),s).message.clientMetadata)==null?void 0:l.requestId)===i.requestId&&(U.logEvent(e,w({messageId:s,timeMs:Date.now()-i.timestamp},o)),a==null||a(),this.loggedRequests.add(e))}}const qj=new Kse;function Qse(t){var o,a;const e=t.find(i=>{var l;return((l=i.metadata)==null?void 0:l.image_search_results)!==void 0});return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.image_search_results)!=null?a:[]).slice(0,5)}function Jse(t){return{event:"attributes",data:{attributes:{isForceHide:t}}}}function K_(t,e){return{event:"fetch.status",data:{useCases:{[t]:{started:Date.now(),status:e}}}}}function Yj(t,e){switch(e){case"navlinks":return t.navlinks.length>0;case"images":return t.images.length>0;case"videos":return t.videos.length>0;case"news":return t.news.length>0}return!1}const Xse=new Set(["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_id","utm_name","utm_creative","gclid","fbclid","igshid","msclkid","vero_id","oly_enc_id","oly_anon_id","mc_eid","mc_cid","ref","ref_src","trk","spm"]);function eoe(t){if(t.hostname=t.hostname.toLowerCase().replace(/^www\./,""),/(^|\.)youtube\.com$/.test(t.hostname)||t.hostname==="youtu.be"){if(t.hostname==="youtu.be"){const s=t.pathname.replace(/^\/+/,"");t.hostname="youtube.com",t.pathname="/watch",t.searchParams.set("v",s)}const e=t.pathname.match(/^\/shorts\/([^/]+)\/?$/i);e&&(t.pathname="/watch",t.searchParams.set("v",e[1])),t.hostname!=="youtube.com"&&(t.hostname="youtube.com");const n=new Set(["t","time_continue","start","feature","si","pp","ab_channel","index","redir_token"]);for(const s of[...t.searchParams.keys()])n.has(s.toLowerCase())&&t.searchParams.delete(s)}if(t.hostname==="x.com"||t.hostname==="twitter.com"||t.hostname==="mobile.twitter.com"||t.hostname==="m.twitter.com"){t.hostname="twitter.com";const e=new Set(["s","t","ref_src"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}if(t.hostname==="instagram.com"||t.hostname==="m.instagram.com"){t.hostname="instagram.com";const e=new Set(["hl"]);for(const n of[...t.searchParams.keys()])e.has(n.toLowerCase())&&t.searchParams.delete(n)}}function ug(t){const e=(t!=null?t:"").trim();if(!e)return"";try{const n=/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e),s=new URL(n?e:"http://".concat(e));s.protocol=s.protocol.toLowerCase(),s.username="",s.password="",s.hostname=s.hostname.replace(/\.$/,""),(s.protocol==="http:"&&s.port==="80"||s.protocol==="https:"&&s.port==="443")&&(s.port=""),s.hash="",s.pathname=s.pathname.replace(/\/{2,}/g,"/"),s.pathname!=="/"&&s.pathname.endsWith("/")&&(s.pathname=s.pathname.slice(0,-1)),eoe(s);const o=s.searchParams,a=[],i=new Set;for(const d of o.keys()){const u=d.toLowerCase();u.startsWith("utm_")||Xse.has(u)||i.has(d)||(i.add(d),a.push([d,o.getAll(d).sort((m,f)=>m.localeCompare(f))]))}a.sort((d,u)=>d[0].localeCompare(u[0]));const l=new URLSearchParams;for(const[d,u]of a)for(const m of u)l.append(d,m);return"".concat(s.hostname.toLowerCase()).concat(s.pathname).concat(l.toString()?"?".concat(l.toString()):"").toLowerCase()}catch(n){return e.replace(/^https?:\/\//i,"").replace(/^www\./i,"").replace(/\/{2,}/g,"/").replace(/\/+$/g,"").toLowerCase()}}function Ji(t,e,n){var a,i,l;if(!(e!=null&&e.length))return t;const s=[...t],o=new Map;for(let c=0;c<s.length;c++)o.set(ug(s[c].url),c);for(const c of e){const d=ug(c.url);if(!o.has(d)){const h=c.sources===void 0&&c.source!==void 0?B(w({},c),{sources:[c.source]}):c;o.set(d,s.push(h)-1);continue}const u=o.get(d);if(u===void 0)continue;let m=!0;if(c.domain!==void 0){const h=s[u].domain;(h===void 0||n&&c.domain!==h)&&(s[u]=B(w({},s[u]),{domain:c.domain}),m=!1)}c.snippet!==void 0&&c.snippet!==s[u].snippet&&(m?(s[u]=B(w({},s[u]),{snippet:c.snippet}),m=!1):s[u].snippet=c.snippet);let f=s[u];const p=f.source;p&&(f.sources===void 0||!f.sources.includes(p))&&(m&&(s[u]=w({},s[u]),f=s[u],m=!1),f.sources=(a=f.sources)!=null?a:[],f.sources.push(p));const g=[...c.source?[c.source]:[],...(i=c.sources)!=null?i:[]];if(g.length)for(const h of g)h&&(f.sources===void 0||!f.sources.includes(h))&&(m&&(s[u]=w({},s[u]),f=s[u],m=!1),f.sources=(l=f.sources)!=null?l:[],f.sources.push(h))}return s}function Q_(t,e=[]){if(!t.length||!e.length)return t;const n=new Map;for(const a of e){const i=ug(a.url);i&&n.set(i,a.attribution)}let s=!1;const o=t.map(a=>{const i=ug(a.url),l=i?n.get(i):void 0;return l&&a.domain!==l?(s=!0,B(w({},a),{domain:l})):a});return s?o:t}var ir=(t=>(t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.DONE=1]="DONE",t[t.ERROR=2]="ERROR",t))(ir||{});const mg={navlinks:[],images:[],videos:[],news:[],isSearchLikely:void 0,analytics:{}},toe=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var i,l,c,d,u,m,f,p,g,h,x,y,b;const o=(i=s.entries[e])!=null?i:mg;let a=o;switch(n.event){case"navlinks":a=B(w({},o),{navlinks:Ji(o.navlinks,(l=n.data.navlinks)!=null?l:[],!1),images:Ji(o.images,(c=n.data.images)!=null?c:[],!1),videos:Ji(o.videos,(d=n.data.videos)!=null?d:[],!1),news:Ji(o.news,(u=n.data.news)!=null?u:[],!1)}),o.analytics.firstNavlinkFetched===void 0&&((m=n.data.navlinks)!=null?m:[]).length>0&&(a.analytics=B(w({},o.analytics),{firstNavlinkFetched:n.processTime,firstNavlinksFetchedTS:n.timestampMs}));break;case"search.classifier":a=B(w({},o),{isSearchLikely:n.data.is_search_likely}),o.analytics.firstClassifierFetched===void 0&&n.data.is_search_likely&&(a.analytics=B(w({},o.analytics),{firstClassifierFetched:n.processTime,firstClassifierFetchedTS:n.timestampMs}));break;case"attributions":a=B(w({},o),{navlinks:Q_(o.navlinks,(f=n.data.attributions)!=null?f:[]),videos:Q_(o.videos,(p=n.data.attributions)!=null?p:[]),news:Q_(o.news,(g=n.data.attributions)!=null?g:[])});break;case"attributes":{const v=(h=n.data.attributes)!=null?h:{};a=B(w({},o),{isNoForceSearch:v.shortQueryNoOptimize!==void 0?!!v.shortQueryNoOptimize:o.isNoForceSearch,isNavlinkIntent:v.isNavlinkIntent!==void 0?!!v.isNavlinkIntent:o.isNavlinkIntent,isForceHide:v.isForceHide!==void 0?!!v.isForceHide:o.isForceHide,truncateFastNavlinks:v.truncateFastNavlinks!==void 0?Number(v.truncateFastNavlinks):o.truncateFastNavlinks});break}case"fetch.status":a=B(w({},o),{fetchingStatus:w(w({},(x=o.fetchingStatus)!=null?x:{}),(y=n.data.useCases)!=null?y:{})});break;case"log":switch(n.data.event){case"fetchSonicNavLinks.start":a=B(w({},o),{analytics:B(w({},o.analytics),{lastStartFetch:n.processTime,lastStartFetchTS:n.timestampMs,firstStartFetch:o.analytics.firstStartFetch!==void 0?o.analytics.firstStartFetch:n.processTime})});break;case"fetchBENavlinks.start":o.analytics.firstRoundtripTime===void 0&&(a=B(w({},o),{analytics:B(w({},o.analytics),{firstRoundtripTime:n.processTime})}));break;case"fetchNavlinks.finished":a=B(w({},o),{fetchingStatus:B(w({},(b=o.fetchingStatus)!=null?b:{}),{navlinks:{started:0,status:1}})});break;case"navlinkRequested":a=B(w({},o),{analytics:B(w({},o.analytics),{requestedTimeUnixEpochMs:n.timestampMs})});break;case"shortQueryNoOptimize":a=B(w({},o),{isNoForceSearch:!0});break;case"isNavlinkIntent":a=B(w({},o),{isNavlinkIntent:!0});break}break}return{entries:B(w({},s.entries),{[e]:a})}})}),ei=vb()(toe,Cm);function noe(t){return ei(e=>{var n;return t==null?mg:(n=e.entries[t])!=null?n:mg})}const soe=8e3;async function yu(t,e,n){var x,y;if(e.length===0)return;const s=ei.getState(),o=s.entries[e];if(o&&Yj(o,n)||((y=(x=o==null?void 0:o.fetchingStatus)==null?void 0:x[n])==null?void 0:y.started)!==void 0)return;ei.getState().updateFromEvent(e,K_(n,ir.IN_PROGRESS));const i={query:e,classifier:!1,attributions:n!=="images",[n]:!0};let l=null,c=!1;const u=ds(t,"3205212221").get("retry",{}),m=typeof u[n]=="number"?Math.max(Math.min(u[n],10),0):0,f=typeof u.timeoutMs=="number"?Math.max(u.timeoutMs,500):6e3;let g=typeof u.retryDelayMs=="number"?u.retryDelayMs:0;const h=async()=>{var b;try{const M="".concat(gr,"/navlinks");try{for(var v=jo(rg(M,{ctx:t,method:"POST",headers:w({},d1()),body:i})),S,C,k;S=!(C=await v.next()).done;S=!1){const T=C.value;if("response"in T)continue;const E=(b=T.event)!=null?b:void 0;if(E===void 0)continue;const A=T.data;s.updateFromEvent(e,{event:E,data:A,timestampMs:Date.now()})}}catch(C){k=[C]}finally{try{S&&(C=v.return)&&await C.call(v)}finally{if(k)throw k[0]}}c=!0,ei.getState().updateFromEvent(e,K_(n,ir.DONE))}catch(M){l=M}};for(let b=0;b<=m;b++){b>0&&(await ek(g),g=g*2+Math.random()*10);const v=h(),S=ek(f);if(await Promise.race([v,S]),c)break}!c&&l!=null&&(ei.getState().updateFromEvent(e,K_(n,ir.ERROR)),Oe.addError(new Error("Failed to fetch navlinks",{cause:l})))}function Zj(t,e){var i,l,c,d,u,m;const n=(l=(i=t.fetchingStatus)==null?void 0:i[e])==null?void 0:l.started;if(!n)return!1;const o=Date.now()-n>soe;return!(Yj(t,e)||o||((d=(c=t.fetchingStatus)==null?void 0:c[e])==null?void 0:d.status)===ir.DONE||((m=(u=t.fetchingStatus)==null?void 0:u[e])==null?void 0:m.status)===ir.ERROR)}function Nf(t,e){var s;if(!t)return!1;const n=(s=ei.getState().entries[t])!=null?s:mg;return Zj(n,e)}function ek(t){return new Promise(e=>setTimeout(e,t))}const ooe=(t,e=!1)=>{var n;return t==="web"?jC.Web:t==="cloud"?jC.Cloud:(n=bb[t])!=null?n:e?t:void 0},hi=(t,e=!1)=>Array.from(t.values()).map(n=>ooe(n,e)).filter(Boolean),aoe="I took control of the virtual browser. If you're unsure what changed, ask for more context. If the task is complete, just acknowledge and wrap it up. Otherwise, please proceed.",$n=Nt(()=>({token:null,clientThreadId:null,isOpen:!1,isResuming:!1,isTakeoverInProgress:!1,parentMessageId:null,vmId:null,abortPromise:null})),bze=(t,e)=>{$n.setState(n=>B(w({},n),{clientThreadId:t,token:e}))},roe=t=>{var n;const e=J2();((n=e.clientMetadata)!=null?n:e.clientMetadata={}).isPlaceholder=!0,qe(t,s=>{ln.appendMessage(s,e)})},Kj=t=>{qe(t,e=>{ln.updateTree(e,n=>{const s=n.nodes.filter(o=>{var l,c,d;const a=(l=o.message)==null?void 0:l.metadata,i=(c=o.message)==null?void 0:c.clientMetadata;return(i==null?void 0:i.isPlaceholder)&&(a==null?void 0:a.is_takeover_ended_message)&&((d=a==null?void 0:a.system_hints)==null?void 0:d.includes(is))});for(const o of s)n.updateNodeMetadata(o.id,{isPlaceholder:!1})})})},J2=(t,e)=>us(aoe,w(w({is_takeover_ended_message:!0,system_hints:[is]},t&&{selected_sources:hi(t)}),e!=null?e:{})),Sze=()=>{$n.setState({token:null,clientThreadId:null,isOpen:!1,isTakeoverInProgress:!1})};function ioe(t){return t instanceof KeyboardEvent||"key"in t||"detail"in t&&t.detail===0?"keyboard":"mouse"}async function Er({conversation:t,requestedModelId:e,completionType:n=Xa.Next,sourceEvent:s,eventSource:o,completionMetadata:a,extraStreamParams:i,parentMessageId:l,promptMessage:c,existingMessages:d,prependMessages:u,appendMessages:m,profiler:f,skipNotification:p,disablePlaceholder:g,isReasoningSkipped:h,parentMessageIdPromise:x,thinkingEffort:y}){var Ne,je,Te,Fe,Ge,Se,Re,tt,Ke,nt;const b=t.ctx;Oy.set(t,!0);const v=Qo(b),S=(Ne=s==null?void 0:s.timeStamp)!=null?Ne:performance.now(),C=o!=null?o:s?ioe(s):"mouse",k=uA(),M="request-".concat(t.id,"-").concat(k),T=ft(t.id),{conduitToken:E=null,prepareState:A="none",lastPrepareTimestamp:N=null}=T!=null?T:{},R=e!=null?e:hn(()=>wn(t).id),O=hn(()=>gh(b)),D=me.findNode(T,ot=>ot.message.author.role===Ze.Assistant||ot.message.author.role===Ze.Tool)==null,F=(T==null?void 0:T.continuingFromSharedConversationId)!=null,V=(T==null?void 0:T.continuingFromSharedProjectConversationId)!=null,z=!!(T!=null&&T.continuingFromSharedPostId),$=(T==null?void 0:T.branchingFromConversationId)!=null,Y=me.getConversationLastTurn(T),Z=Y==null?void 0:Y.messages.some(ot=>{var Lt;return(Lt=ot.metadata)==null?void 0:Lt.mercury_message}),Q=Y==null?void 0:Y.messages.some(ot=>{var Lt;return(Lt=ot.metadata)==null?void 0:Lt.n7jupd_message});let q=l?me.getNode(T,l):d!=null&&d[0]?me.getParentNode(T,d[0].id):me.getCurrentNode(T),X=l;q.message.id.startsWith(xb)&&(q=me.getParentNode(T,q.message.id),X=(je=q.message.id)!=null?je:q.id);let oe=(Te=q.message.id)!=null?Te:q.id;$n.getState().isTakeoverInProgress&&($n.setState({isTakeoverInProgress:!1}),Kj(t.id),u=[...u!=null?u:[],J2()]);const se=[...d!=null?d:[],...u!=null?u:[],...c?[c]:[],...m!=null?m:[]],de=hn(()=>mA(b,hh(t))),ie=new zj({ctx:b,clientRequestId:M,gizmoType:de,preflightTime:S,isTemporaryChat:O});if(ie.onUserMessages(se),de===Vp.PROJECT&&D&&!Co(b,"269676899",{disableExposureLog:!0}).get("clear_all",!1)){const ot=a==null?void 0:a.systemHints;s$.set(t,ot)}const ae=hn(()=>vd(b)),ce=hn(()=>o$(b)),ye=mt.getItem(Le.ModelSlugStatsOverride),fe=new Ij(b,M,v,T,t,X,u,c,m,n,R,C,ae,S,de===Vp.PROJECT,D,F,$,V,ie,p!=null?p:!1,ce,z,h,y,ye,(Fe=T==null?void 0:T.steeringAsyncTaskId)!=null?Fe:void 0,{disablePlaceholder:g!=null?g:!1},!C2(b));a$(t.id);const Ce=(Ge=a==null?void 0:a.systemHints)==null?void 0:Ge.includes(is),ee=Sn();if(ee){const ot=!((a==null?void 0:a.systemHints)===void 0||a.systemHints.length===0||a.systemHints.length===1&&a.systemHints.includes(Ie.Search)),Lt=((tt=(Re=(Se=c==null?void 0:c.metadata)==null?void 0:Se.attachments)==null?void 0:Re.length)!=null?tt:0)>0,vt=c!=null&&c.metadata?c.metadata[oA]:void 0,Ht=!!((Ke=vt==null?void 0:vt.sources)!=null&&Ke.length),nn=ot||Lt||Ht;if(c){const sn=ko(c,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(ei.getState().updateFromEvent(sn,Jse(nn)),D)try{const kn=ds(b,"3205212221").get("optimistic_fetch",{}),an=jn=>{const Pn=kn[jn];typeof Pn!="number"||!isFinite(Pn)||Pn<=0||Math.random()<Pn&&yu(b,sn,jn)};an("images"),an("videos"),an("news")}catch(on){}}}Ce&&Oe.addAction("agent.conversation.start_attempted",{client_thread_id:String(t.id),model:R});let te;if(Z||(te=e1(t.id,void 0,{clientInitiated:!0,reason:"new_completion",hasAgentSystemHint:Ce})),nl.publish({kind:"requestCompletion"}),Ps(t.id,{source:ns.CLIENT,value:Ce?Yt.REALTIME:Yt.STREAMING}),qj.onCompletionRequestStarted(M),fe.updateBeforeRequest(),((nt=S2(b,t.id))==null?void 0:nt.value)===Yt.REALTIME&&!!!(Q&&h)&&te){const ot=await te;ot!=null&&ot.last_message_id&&(oe=ot.last_message_id)}if(x){const ot=await x;ot&&(oe=ot)}const ve=nj(b,a),{chatReq:_e,turnstileToken:we,proofToken:De}=r$(ve)?await ve:ve;if(_e.force_login)return;if(v.getQueriesData(PC())==null&&await v.ensureQueryData(PC()),TJ()){const ot=await EJ(),Lt=Ht=>typeof Ht=="object"&&Ht!=null&&"id"in Ht,vt=ot.flatMap(Ht=>Ht.status!=="fulfilled"||!Ht.value?[]:Array.isArray(Ht.value)?Ht.value.filter(Lt):Lt(Ht.value)?[Ht.value]:[]);if(vt.length>0){const Ht=[...vt].reverse();se.unshift(...Ht),loe({conversation:t,request:fe,messages:Ht})}}ie.onCompletionStarted(n,R),fe.preflightTime=performance.now()-S;const ge=t1(b);if(Oe.addFeatureFlagEvaluation("fast_convo",ge),ge&&N!=null){const ot=performance.now()-N;ot<=6e4&&Ee.hist(Ae.DEFAULT,"fast_conversation_last_prepare_to_convo_client",[{key:"model_id",value:R},{key:"prepare_state",value:String(A)},{key:"has_conduit_token",value:E!=null?"true":"false"}],ot)}ge&&ee&&Ee.count(Ae.DEFAULT,"client_request_conduit_token",[{key:"has_conduit_token",value:E!=null?"true":"false"}]),ee&&(f==null||f.logTimingOnce("prompt_request_started")),await fe.sendRequest({conduitToken:E,turnstileToken:we,proofToken:De,completionMetadata:a,resolvedParentMessageId:oe,messages:se,extraStreamParams:i,chatReq:_e,profiler:f})}function loe({conversation:t,request:e,messages:n}){qe(t.id,s=>{ln.updateTree(s,o=>{var i,l,c,d;const a=(d=(l=(i=e.prependMessages)==null?void 0:i[0])!=null?l:e.promptMessage)!=null?d:(c=e.appendMessages)==null?void 0:c[0];if(a&&o.containsNodeOrMessageId(a.id)){for(const u of n)o.containsNodeOrMessageId(u.id)||o.prependNode(a.id,u);return}})})}async function coe({ctx:t,conversation:e,completionType:n,token:s,serverThreadId:o,preflightTime:a}){const i=a!=null?a:performance.now();if(hn(()=>Oy(e)))return;Oy.set(e,!0);const l=Qo(t),c=hn(()=>mA(t,hh(e))),d=hn(()=>wn(e).id),u=hn(()=>gh(t)),m=hn(()=>vd(t));Ps(e.id,{source:ns.CLIENT,value:Yt.STREAMING});const f=uA(),p="request-".concat(e.id,"-").concat(f),g=new zj({ctx:t,clientRequestId:p,gizmoType:c,preflightTime:i,isTemporaryChat:u});ft(e.id)||hr.initThread({clientThreadId:e.id,conversationMode:{kind:Tt.PrimaryAssistant},userId:void 0,accountId:void 0}),hr.retainThread(e.id);const h=new Ij(t,p,l,void 0,e,void 0,void 0,void 0,void 0,n,d,"url",m,i,c===Vp.PROJECT,!1,!1,!1,!1,g,void 0,!1,void 0,void 0,void 0,void 0,void 0,{disablePlaceholder:!0},!C2(t));h.preflightTime=0,await h.sendResumeRequest({conversationId:o,resumeToken:s,profiler:void 0})}function Hm(t){"use forget";const e=H.c(5),n=G();let s;e[0]!==t||e[1]!==n?(s=ht(n,t),e[0]=t,e[1]=n,e[2]=s):s=e[2];const o=s;let a;return e[3]!==o?(a=i=>Er(w({conversation:o},i)),e[3]=o,e[4]=a):a=e[4],a}function Qj(t){return Nn(t).windowStyle==="chatbar_view"}const Xi=In(()=>Qe(null)),dm=In(()=>Qe(null));function doe(){"use forget";var g;const t=H.c(18),e=G(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.NewOnboardingFlow);let a;t[0]!==e?(a=()=>Xi(e)===!0,t[0]=e,t[1]=a):a=t[1];const i=ue(a),l=Jj();let c;t[2]!==e?(c=(g=ut(e))==null?void 0:g.isFree(),t[2]=e,t[3]=c):c=t[3];const d=c;let u,m;t[4]!==e||t[5]!==n||t[6]!==l||t[7]!==d||t[8]!==s?(u=()=>{if(n&&!s&&!l&&d){Xi.set(e,uoe),dm.set(e,!1);const h=Ve(e,"997657492",{disableExposureLog:!0}).get("onboarding-mode",void 0)==="personality";n7.set(e,h)}},m=[e,n,s,l,d],t[4]=e,t[5]=n,t[6]=l,t[7]=d,t[8]=s,t[9]=u,t[10]=m):(u=t[9],m=t[10]),_.useEffect(u,m);let f;t[11]!==e?(f=()=>Xi.set(e,!1),t[11]=e,t[12]=f):f=t[12];let p;return t[13]!==s||t[14]!==i||t[15]!==o||t[16]!==f?(p={isOpen:i,isLoading:s,closeModal:f,markAsViewed:o},t[13]=s,t[14]=i,t[15]=o,t[16]=f,t[17]=p):p=t[17],p}function uoe(t){return t!=null?t:!0}function moe(){"use forget";const t=H.c(22),e=G();let n,s,o;if(t[0]!==e){const x=ut(e);s=x==null?void 0:x.isWorkspacePlan(),n=x==null?void 0:x.isEnterprise(),o=x==null?void 0:x.isSelfServeBusiness(),t[0]=e,t[1]=n,t[2]=s,t[3]=o}else n=t[1],s=t[2],o=t[3];const a=o,{eligible:i,isLoading:l,markAsViewed:c}=$e(Ye.Onboarding),d=Jj();let u;t[4]!==e?(u=()=>Xi(e)===!0,t[4]=e,t[5]=u):u=t[5];const m=ue(u);let f,p;t[6]!==e||t[7]!==i||t[8]!==d||t[9]!==n||t[10]!==l||t[11]!==a||t[12]!==s?(f=()=>{if(!(!s||!i||l||d)){if(n){const x=Co(e,"36981021");x!=null&&x.get("enabled")&&(Xi.set(e,poe),dm.set(e,!1))}else if(a){const x=Co(e,"2552486509");x!=null&&x.get("enabled")&&(Xi.set(e,foe),dm.set(e,!1))}}},p=[e,s,i,l,d,n,a],t[6]=e,t[7]=i,t[8]=d,t[9]=n,t[10]=l,t[11]=a,t[12]=s,t[13]=f,t[14]=p):(f=t[13],p=t[14]),_.useEffect(f,p);let g;t[15]!==e?(g=()=>Xi.set(e,!1),t[15]=e,t[16]=g):g=t[16];let h;return t[17]!==l||t[18]!==m||t[19]!==c||t[20]!==g?(h={isOpen:m,isLoading:l,closeModal:g,markAsViewed:c},t[17]=l,t[18]=m,t[19]=c,t[20]=g,t[21]=h):h=t[21],h}function foe(t){return t!=null?t:!0}function poe(t){return t!=null?t:!0}function goe(){"use forget";const t=H.c(6),e=G();let n;if(t[0]!==e){const l=ut(e);n=l==null?void 0:l.isWorkspacePlan(),t[0]=e,t[1]=n}else n=t[1];const s=n,o=doe(),a=moe();let i;return t[2]!==s||t[3]!==o||t[4]!==a?(i=s?B(w({},a),{isWorkspaceUser:!0}):B(w({},o),{isWorkspaceUser:!1}),t[2]=s,t[3]=o,t[4]=a,t[5]=i):i=t[5],i}function Jj(){"use forget";const t=H.c(2),[e]=zs();let n;return t[0]!==e?(n=e.has("prompt"),t[0]=e,t[1]=n):n=t[1],n}const Jc=be({hi:{id:"new_user_onboarding.hi",defaultMessage:"Hi"},hiThere:{id:"new_user_onboarding.hi_there",defaultMessage:"Hi there"},tryUploadingAFile:{defaultMessage:"Try uploading a file",id:"chatgpt.new-onboarding.try-uploading-a-file"},uploadFileExample:{defaultMessage:"ChatGPT can summarize and analyze your files or images.",id:"chatgpt.new-onboarding.upload-file-exp"},school:{defaultMessage:"School",id:"chatgpt.new-onboarding.school"},schoolPrompt:{defaultMessage:"Im trying to learn and do better in school.",id:"chatgpt.new-onboarding.school-prompt"},work:{defaultMessage:"Work",id:"chatgpt.new-onboarding.work"},workPrompt:{defaultMessage:"I'm here to learn and grow in my work.",id:"chatgpt.new-onboarding.work-prompt"},personalTasks:{defaultMessage:"Personal tasks",id:"chatgpt.new-onboarding.personal-tasks"},personalTasksPrompt:{defaultMessage:"I'm here for my personal tasks",id:"chatgpt.new-onboarding.personal-tasks-prompt"},funAndEntertainment:{defaultMessage:"Fun and entertainment",id:"chatgpt.new-onboarding.fun-and-entertainment"},funAndEntertainmentPrompt:{defaultMessage:"I'm here to explore fun ideas and relax.",id:"chatgpt.new-onboarding.fun-and-entertainment-prompt"},other:{defaultMessage:"Other",id:"chatgpt.new-onboarding.other"},justCurious:{defaultMessage:"Just curious",id:"chatgpt.new-onboarding.just-curious"},justCuriousPrompt:{defaultMessage:"I'm just curious, exploring what you can do.",id:"chatgpt.new-onboarding.just-curious-prompt"},tryAnExample:{defaultMessage:"Try an example below or send any message in the message box below.",id:"chatgpt.new-onboarding.try-an-example"}});function hoe(){"use forget";const t=H.c(3),{eligible:e,isLoading:n,markAsViewed:s}=$e(Ye.NewOnboardingConvo),o=e&&!n;let a;return t[0]!==s||t[1]!==o?(a={isEligible:o,markAsViewed:s},t[0]=s,t[1]=o,t[2]=a):a=t[2],a}function Cze(t){"use forget";const e=H.c(20),n=G();let s;e[0]!==n?(s=Qj(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=wa(_oe),{isEligible:i,markAsViewed:l}=hoe();let c;e[2]!==t?(c={clientThreadId:t},e[2]=t,e[3]=c):c=e[3];const d=X2(c);let u;e[4]!==n?(u=Ve(n,"109457"),e[4]=n,e[5]=u):u=e[5];const m=u,f=J(),p=Q6(),g=ls();let h;e[6]!==p||e[7]!==g?(h=p||kZ(g),e[6]=p,e[7]=g,e[8]=h):h=e[8];const x=h;let y,b;e[9]!==t||e[10]!==d||e[11]!==x||e[12]!==f||e[13]!==o||e[14]!==i||e[15]!==m||e[16]!==l||e[17]!==a?(y=()=>{i&&!a&&(f.locale===i$||f.messages!==l$)&&!o&&!x&&m.get("onboarding_style","")==="CONVO"&&(yn.setOnboardingConvoState({onboardingConvoClientThreadId:t}),l(),d({eventSource:"url",stepPrompt:f.formatMessage(Jc.hi),messageMetadata:{is_visually_hidden_from_conversation:!0},authorMetadata:{real_author:Sb.Onboarding}}),We.logEvent("chatgpt_convo_onboarding_started"))},b=[i,l,d,a,f,f.locale,f.messages,t,m,o,x],e[9]=t,e[10]=d,e[11]=x,e[12]=f,e[13]=o,e[14]=i,e[15]=m,e[16]=l,e[17]=a,e[18]=y,e[19]=b):(y=e[18],b=e[19]),_.useEffect(y,b)}function _oe(t){var e;return(e=t.onboardingConvoState)!=null?e:void 0}const X2=t=>{"use forget";const e=H.c(2),{clientThreadId:n}=t,s=Hm(n);let o;return e[0]!==s?(o=a=>{var m;const u=a,{stepPrompt:i,messageMetadata:l,authorMetadata:c}=u,d=Me(u,["stepPrompt","messageMetadata","authorMetadata"]);s(B(w({},d),{promptMessage:us(i,l!=null?l:void 0,c!=null?c:void 0),completionMetadata:{isOnboardingConversation:!0,conversationMode:{kind:Tt.PrimaryAssistant},systemHints:(m=l==null?void 0:l.onboarding)==null?void 0:m.system_hints},skipNotification:!0}))},e[0]=s,e[1]=o):o=e[1],o},wze=t=>{"use forget";const e=H.c(5),{clientThreadId:n}=t,s=Hm(n),{markAsViewed:o}=$e(Ye.Onboarding),{open:a}=eS();let i;return e[0]!==n||e[1]!==o||e[2]!==a||e[3]!==s?(i=l=>{const{suggestedPrompt:c,index:d,isOnboarding:u}=l;u&&(o(),a()),s({promptMessage:us(c.prompt,{is_starter_prompt:!0,suggestion_type:ke.Starter,starter_prompt_id:c.id}),eventSource:"mouse",completionMetadata:{conversationMode:{kind:Tt.PrimaryAssistant}},skipNotification:!0}),c1(c,d,n)},e[0]=n,e[1]=o,e[2]=a,e[3]=s,e[4]=i):i=e[4],i};function Xj(t){"use forget";var c;const e=H.c(7),n=Ue(t,xoe),{eligible:s,isLoading:o,markAsViewed:a}=$e(Ye.hasSeenFilePickerNuxTooltip);let i;e[0]!==s||e[1]!==o||e[2]!==(n==null?void 0:n.triggered_tools)?(i=((c=n==null?void 0:n.triggered_tools)==null?void 0:c.includes("file_upload"))&&s&&!o,e[0]=s,e[1]=o,e[2]=n==null?void 0:n.triggered_tools,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l={isEligible:i,markAsViewed:a},e[4]=a,e[5]=i,e[6]=l):l=e[6],l}function xoe(t){var e,n;return(n=(e=me.findNode(t,yoe))==null?void 0:e.message.metadata)==null?void 0:n.onboarding}function yoe(t){return t.message.author.role===Ze.User}function kze(t){return Ve(t,"109457",{disableExposureLog:!0}).get("onboarding_show_followups",!1)}const J_=In(()=>Qe(null)),Rf=In(()=>Qe({isOpen:null,isUserTriggered:!1}));function Mze(){"use forget";var v;const t=H.c(23),e=G(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.NewPromptOnboardingFlow);let a;t[0]!==e?(a=()=>Rf(e),t[0]=e,t[1]=a):a=t[1];const{isOpen:i,isUserTriggered:l}=ue(a),c=G();let d;t[2]!==c?(d=Ve(c,"109457",{disableExposureLog:!0}).get("prompt_onboarding_style","list"),t[2]=c,t[3]=d):d=t[3];const u=d;let m;t[4]!==e?(m=(v=ut(e))==null?void 0:v.isFree(),t[4]=e,t[5]=m):m=t[5];const f=m;let p,g;t[6]!==e||t[7]!==n||t[8]!==f||t[9]!==s?(p=()=>{n&&!s&&f&&Rf.set(e,boe)},g=[e,n,s,f],t[6]=e,t[7]=n,t[8]=f,t[9]=s,t[10]=p,t[11]=g):(p=t[10],g=t[11]),_.useEffect(p,g);const h=!!i;let x,y;t[12]!==e?(x=()=>Rf.set(e,{isOpen:!0,isUserTriggered:!0}),y=()=>Rf.set(e,voe),t[12]=e,t[13]=x,t[14]=y):(x=t[13],y=t[14]);let b;return t[15]!==s||t[16]!==l||t[17]!==o||t[18]!==u||t[19]!==h||t[20]!==x||t[21]!==y?(b={isOpen:h,isUserTriggered:l,isLoading:s,onboardingStyle:u,reopenModal:x,closeModal:y,markAsViewed:o},t[15]=s,t[16]=l,t[17]=o,t[18]=u,t[19]=h,t[20]=x,t[21]=y,t[22]=b):b=t[22],b}function voe(t){return B(w({},t),{isOpen:!1})}function boe(t){var e;return B(w({},t),{isOpen:(e=t.isOpen)!=null?e:!0})}function Tze(){"use forget";var g;const t=H.c(17),e=G(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.NewStaticOnboardingFlow);let a;t[0]!==e?(a=()=>J_(e)===!0,t[0]=e,t[1]=a):a=t[1];const i=ue(a);let l;t[2]!==e?(l=(g=ut(e))==null?void 0:g.isFree(),t[2]=e,t[3]=l):l=t[3];const c=l;let d,u;t[4]!==e||t[5]!==n||t[6]!==c||t[7]!==s?(d=()=>{n&&!s&&c&&(J_.set(e,Soe),dm.set(e,!1))},u=[e,n,s,c],t[4]=e,t[5]=n,t[6]=c,t[7]=s,t[8]=d,t[9]=u):(d=t[8],u=t[9]),_.useEffect(d,u);const m=!!i;let f;t[10]!==e?(f=()=>{J_.set(e,!1),dm.set(e,!0)},t[10]=e,t[11]=f):f=t[11];let p;return t[12]!==s||t[13]!==o||t[14]!==m||t[15]!==f?(p={isOpen:m,isLoading:s,closeModal:f,markAsViewed:o},t[12]=s,t[13]=o,t[14]=m,t[15]=f,t[16]=p):p=t[16],p}function Soe(t){return t!=null?t:!0}const Lf=In(()=>Qe({isOpen:!1,viewedInClientThreadId:null}));function eS(){"use forget";const t=H.c(12),e=G();let n;t[0]!==e?(n=()=>Lf(e),t[0]=e,t[1]=n):n=t[1];const{isOpen:s,viewedInClientThreadId:o}=ue(n);let a,i,l;t[2]!==e?(a=()=>Lf.set(e,woe),i=()=>Lf.set(e,Coe),l=d=>Lf.set(e,u=>B(w({},u),{viewedInClientThreadId:d})),t[2]=e,t[3]=a,t[4]=i,t[5]=l):(a=t[3],i=t[4],l=t[5]);let c;return t[6]!==s||t[7]!==a||t[8]!==i||t[9]!==l||t[10]!==o?(c={isOpen:s,viewedInClientThreadId:o,close:a,open:i,markViewedInClientThreadId:l},t[6]=s,t[7]=a,t[8]=i,t[9]=l,t[10]=o,t[11]=c):c=t[11],c}function Coe(t){return B(w({},t),{isOpen:!0})}function woe(t){return B(w({},t),{isOpen:!1})}function Eze(){"use forget";const t=H.c(7),e=G(),n=Ve(e,"109457",{disableExposureLog:!0}),s=pn();let o;t[0]!==e?(o=pt(e),t[0]=e,t[1]=o):o=t[1];const a=o,[i,l]=ja(Le.HasDismissedOnboardingSidebarEntry,!1,Kh),c=typeof(s==null?void 0:s.created)=="number"?s.created>1e12?s.created:s.created*1e3:void 0,d=typeof window<"u"&&window.innerHeight>=667,u=!!(a&&c!=null&&Date.now()-c<=6048e5&&d),m=n.get("onboarding_sidebar_entry_style","");let f;return t[2]!==i||t[3]!==u||t[4]!==l||t[5]!==m?(f={style:m,hasDismissed:i,setHasDismissed:l,isEligible:u},t[2]=i,t[3]=u,t[4]=l,t[5]=m,t[6]=f):f=t[6],f}function Aze(t,e=!1){return Ve(t,"109457",{disableExposureLog:!e})}const zn=be({marketing:{id:"onboarding.departments.marketing",defaultMessage:"Marketing"},analytics:{id:"onboarding.departments.analytics",defaultMessage:"Data or Analytics"},product:{id:"onboarding.departments.product",defaultMessage:"Product Management"},comms:{id:"onboarding.departments.comms",defaultMessage:"Communications"},finance:{id:"onboarding.departments.finance",defaultMessage:"Finance or Accounting"},customer_experience:{id:"onboarding.departments.customer_experience",defaultMessage:"Customer Experience"},project_management:{id:"onboarding.departments.project_management",defaultMessage:"Project or Program Management"},engineering:{id:"onboarding.departments.engineering",defaultMessage:"Engineering"},education_professional:{id:"onboarding.departments.education_professional",defaultMessage:"Education Professional"},design:{id:"onboarding.departments.design",defaultMessage:"Design"},administrative:{id:"onboarding.departments.administrative",defaultMessage:"Administrative Assistant"},partnerships:{id:"onboarding.departments.partnerships",defaultMessage:"Partnerships"},it:{id:"onboarding.departments.it",defaultMessage:"Information Technology (IT)"},ops:{id:"onboarding.departments.ops",defaultMessage:"Operations"},human_resources:{id:"onboarding.departments.human_resources",defaultMessage:"Human Resources"},research:{id:"onboarding.departments.research",defaultMessage:"Research & Development"},sales:{id:"onboarding.departments.sales",defaultMessage:"Sales"},legal:{id:"onboarding.departments.legal",defaultMessage:"Legal"},healthcare:{id:"onboarding.departments.healthcare",defaultMessage:"Healthcare Professional"},other:{id:"onboarding.departments.other",defaultMessage:"Other"}}),ys=be({engineering:{id:"onboarding.edu_departments.engineering",defaultMessage:"Engineering"},math:{id:"onboarding.edu_departments.math",defaultMessage:"Mathematics"},applied_sciences:{id:"onboarding.edu_departments.applied_sciences",defaultMessage:"Applied Sciences"},finance:{id:"onboarding.edu_departments.finance",defaultMessage:"Finance or Accounting"},health:{id:"onboarding.edu_departments.health",defaultMessage:"Health or Medical"},law:{id:"onboarding.edu_departments.law",defaultMessage:"Law"},business:{id:"onboarding.edu_departments.business",defaultMessage:"Business"},social:{id:"onboarding.edu_departments.social",defaultMessage:"Social Sciences"},liberal_art:{id:"onboarding.edu_departments.liberal_art",defaultMessage:"Liberal Arts"},fine_art:{id:"onboarding.edu_departments.fine_art",defaultMessage:"Fine Arts"},linguistics:{id:"onboarding.edu_departments.linguistics",defaultMessage:"Linguistics"},teaching:{id:"onboarding.edu_departments.teaching",defaultMessage:"Teaching"},dev:{id:"onboarding.edu_departments.dev",defaultMessage:"Research & Development"},campus_ops:{id:"onboarding.edu_departments.campus_ops",defaultMessage:"Campus Operations"},it:{id:"onboarding.edu_departments.it",defaultMessage:"Information Technology (IT)"},other:{id:"onboarding.edu_departments.other",defaultMessage:"Other"}}),Vr=be({team_member:{id:"onboarding.role.team_member",defaultMessage:"Team Member/ Individual Contributor"},manager:{id:"onboarding.role.manager",defaultMessage:"Manager"},student:{id:"onboarding.role.student",defaultMessage:"Student"},executive:{id:"onboarding.role.executive",defaultMessage:"Executive"},director:{id:"onboarding.role.director",defaultMessage:"Director"},business_owner:{id:"onboarding.role.business_owner",defaultMessage:"Business Owner"},freelancer:{id:"onboarding.role.freelancer",defaultMessage:"Freelancer"},other:{id:"onboarding.role.other",defaultMessage:"Other"}}),ec=be({student:{id:"onboarding.edu_role.student",defaultMessage:"Student"},instructional_staff:{id:"onboarding.edu_role.instructional_staff",defaultMessage:"Instructional Staff"},researcher:{id:"onboarding.edu_role.researcher",defaultMessage:"Researcher"},admin:{id:"onboarding.edu_role.admin",defaultMessage:"Administration"},alumni:{id:"onboarding.edu_role.alumni",defaultMessage:"Alumni"},other:{id:"onboarding.edu_role.other",defaultMessage:"Other"}}),Ize=[{id:"team_member",displayValue:Vr.team_member},{id:"manager",displayValue:Vr.manager},{id:"director",displayValue:Vr.director},{id:"executive",displayValue:Vr.executive},{id:"business_owner",displayValue:Vr.business_owner},{id:"freelancer",displayValue:Vr.freelancer},{id:"student",displayValue:Vr.student},{id:"other",displayValue:Vr.other}],jze=[{id:"student",displayValue:ec.student},{id:"instructional_staff",displayValue:ec.instructional_staff},{id:"researcher",displayValue:ec.researcher},{id:"admin",displayValue:ec.admin},{id:"alumni",displayValue:ec.alumni},{id:"other",displayValue:ec.other}],Pze=[{id:"marketing",displayValue:zn.marketing},{id:"analytics",displayValue:zn.analytics},{id:"product",displayValue:zn.product},{id:"comms",displayValue:zn.comms},{id:"engineering",displayValue:zn.engineering},{id:"education_professional",displayValue:zn.education_professional},{id:"finance",displayValue:zn.finance},{id:"customer_experience",displayValue:zn.customer_experience},{id:"project_management",displayValue:zn.project_management},{id:"design",displayValue:zn.design},{id:"administrative",displayValue:zn.administrative},{id:"it",displayValue:zn.it},{id:"ops",displayValue:zn.ops},{id:"human_resources",displayValue:zn.human_resources},{id:"research",displayValue:zn.research},{id:"sales",displayValue:zn.sales},{id:"partnerships",displayValue:zn.partnerships},{id:"legal",displayValue:zn.legal},{id:"healthcare",displayValue:zn.healthcare},{id:"other",displayValue:zn.other}],Nze=[{id:"engineering",displayValue:ys.engineering},{id:"math",displayValue:ys.math},{id:"applied_sciences",displayValue:ys.applied_sciences},{id:"finance",displayValue:ys.finance},{id:"health",displayValue:ys.health},{id:"law",displayValue:ys.law},{id:"business",displayValue:ys.business},{id:"social",displayValue:ys.social},{id:"liberal_art",displayValue:ys.liberal_art},{id:"fine_art",displayValue:ys.fine_art},{id:"linguistics",displayValue:ys.linguistics},{id:"teaching",displayValue:ys.teaching},{id:"dev",displayValue:ys.dev},{id:"campus_ops",displayValue:ys.campus_ops},{id:"it",displayValue:ys.it},{id:"other",displayValue:ys.other}],Rze=[{id:"2-10",displayValue:"2-10"},{id:"11-50",displayValue:"11-50"},{id:"51-200",displayValue:"51-200"},{id:"201-500",displayValue:"201-500"},{id:"500+",displayValue:"500+"}],eP=In(()=>c$(()=>({width:window.innerWidth,height:window.innerHeight}),t=>ml(window,{resize:t}),{getServerFallback:()=>({width:d$()?360:768,height:640})}));function Lze({onClose:t}){const e=G(),n=J(),{eligible:s,markAsViewed:o}=o7(),[a,i]=_.useState(!0),[l,c]=_.useState(0),d=fA(),u=ue(()=>Math.min(390,Math.round(eP(e).height*.4))),m=u<260,f=_.useRef(null);_.useEffect(()=>{var S;(S=f.current)==null||S.focus()},[]);const p="https://persistent.oaistatic.com/chatgpt/codex-web-view-diff.png",g="https://persistent.oaistatic.com/chatgpt/codex-supported-platform-apple-icons.png",h="https://persistent.oaistatic.com/chatgpt/codex-code-review.png",x=_.useMemo(()=>[{id:"welcome",image:p,title:n.formatMessage({id:"wham.codexOnboardingModal.title.welcome",defaultMessage:"Your software engineering agent"}),body:n.formatMessage({id:"wham.codexOnboardingModal.body.welcome",defaultMessage:"Codex understands your codebase, answers questions, and writes tested code you can ship."})},{id:"everywhere",image:g,title:n.formatMessage({id:"wham.codexOnboardingModal.title.everywhere",defaultMessage:"Everywhere you work"}),body:n.formatMessage({id:"wham.codexOnboardingModal.body.everywhere",defaultMessage:"Codex is built into your IDE, CLI, GitHub, and the web. Work side-by-side locally, or let it keep going in the cloud when you step away."})},{id:"code-review",image:h,title:n.formatMessage({id:"wham.codexOnboardingModal.title.code-review",defaultMessage:"Deep code review"}),body:n.formatMessage({id:"wham.codexOnboardingModal.body.code-review",defaultMessage:"Codex reviews pull requests using the entire codebase, running code when needed to suggest improvements."})}],[n]);if(!s||!a)return null;const y=()=>{o(),i(!1),t==null||t()},b=()=>{c(S=>S>0?S-1:S)},v=()=>{l<x.length-1?c(S=>S+1):(o(),i(!1),t==null||t())};return r.jsx(Pt,{isOpen:!0,onClose:()=>{i(!1),t==null||t()},testId:"modal-codex-onboarding",position:"center",size:"custom",className:"max-h-[90vh] w-[640px] max-w-[640px]",noPadding:!0,showOverlayBackground:!0,shouldIgnoreClickOutside:!0,children:r.jsxs("div",{className:"relative flex h-full flex-col",children:[!m&&r.jsxs("div",{className:"relative w-full select-none",style:{height:u},children:[r.jsx(dn,{children:r.jsx(Xe.img,{src:x[l].image,alt:n.formatMessage({id:"wham.codexOnboardingModal.illustration",defaultMessage:"Codex onboarding illustration"}),className:"absolute inset-0 h-full w-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:d?1e-5:.25,ease:"easeInOut"}},x[l].image)}),r.jsx("div",{"aria-hidden":!0,className:W("pointer-events-none absolute inset-0 z-10","dark:bg-none","bg-[radial-gradient(ellipse_140%_90%_at_50%_130%,var(--bg-primary)_0%,var(--bg-primary)_50%,transparent_90%)]")}),r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(fn,{onClick:y,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})})]}),m&&r.jsx("div",{className:"absolute start-3 top-3 z-20",children:r.jsx(fn,{onClick:y,className:"bg-transparent! text-black/20 transition-transform duration-100 hover:text-black/60 focus-visible:bg-transparent!",bg:"transparent"})}),r.jsx("div",{className:"relative min-h-[220px] flex-1 select-none",children:r.jsxs("div",{className:W("mx-auto flex h-full max-w-[400px] flex-col items-center justify-center gap-2",m?null:"-translate-y-6 dark:-translate-y-0"),children:[r.jsx("div",{className:"max-w-[260px] text-center text-2xl font-semibold",children:x[l].title}),r.jsx("div",{className:"text-token-text-secondary text-md w-full text-center leading-6",children:x[l].body})]})}),r.jsxs("div",{className:"relative flex items-center px-6 py-5 pt-2",children:[l>0?r.jsx("div",{children:r.jsx(he,{color:"secondary",onClick:b,children:r.jsx(P,{id:"wham.codexOnboardingModal.back",defaultMessage:"Back"})})}):r.jsx("div",{}),r.jsx("div",{className:"absolute start-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:r.jsx("div",{className:"flex items-center gap-1.5",children:x.map((S,C)=>r.jsx("button",{type:"button",onClick:()=>c(C),"aria-label":n.formatMessage({id:"wham.codexOnboardingModal.goToStep",defaultMessage:"Go to step {step}"},{step:C+1}),"aria-current":C===l?"page":void 0,className:W("h-1.5 w-1.5 cursor-pointer rounded-full",C===l?"bg-token-text-primary":"bg-token-text-primary opacity-20")},S.id))})}),r.jsx("div",{className:"ms-auto",children:r.jsx(he,{color:"primary",onClick:v,ref:f,children:l<x.length-1?r.jsx(P,{id:"wham.codexOnboardingModal.continue",defaultMessage:"Continue"}):r.jsx(P,{id:"wham.codexOnboardingModal.done",defaultMessage:"Done"})})})]})]})})}function Oze(){const{eligible:t,isLoading:e}=o7();return e?"loading":t?"show":"hide"}const koe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg",Moe="https://persistent.oaistatic.com/golden_hour/golden_hour_nux_light.jpg";function Dze(){const t=hI(),{eligible:e,isLoading:n}=$e(Ye.hasSeenGoldenHourNuxV2);return vn(un)||!t?"hide":n?"loading":e?"show":"hide"}function Toe(){const[t,e]=_.useState(!1);return _.useEffect(()=>{const n=setTimeout(()=>e(!0),1e3);return()=>clearTimeout(n)},[]),r.jsx("div",{"aria-hidden":!0,className:"relative box-content h-6 w-10 shrink-0 rounded-full p-[2px] ".concat(t?"bg-blue-400":"bg-gray-200 dark:bg-gray-600"),children:r.jsx(Xe.div,{className:"absolute top-1/2 h-[21px] w-[21px] -translate-y-1/2 rounded-full bg-white shadow",animate:{x:t?17:1.5},transition:{type:"spring",stiffness:350,damping:25}})})}function Fze({onClose:t}){const{markAsViewed:e}=$e(Ye.hasSeenGoldenHourNuxV2),s=Zo()?Moe:koe,[o,a]=_.useState(!1);_.useEffect(()=>{const m=new Image;m.src=s,m.onload=()=>a(!0)},[s]);const[i,l]=_.useState(!1);_.useEffect(()=>{o&&(i||(e(),l(!0),U.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Shown","chatgpt_golden_hour_nux_modal_shown"),Ee.count(Ae.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_shown")))},[e,i,o]);const c=be({optm:{id:"GoldenHourNux.optm",defaultMessage:"Automatically manage"},title:{id:"GoldenHourNux.title",defaultMessage:'Say goodbye to "Memory full"'},subtitle:{id:"GoldenHourNux.subtitle",defaultMessage:"ChatGPT now manages saved memories automatically  so it wont fill up and stays focused on what matters."},learnMoreButton:{id:"GoldenHourNux.learnMoreButton",defaultMessage:"Learn more"},gotItButton:{id:"GoldenHourNux.gotItButton",defaultMessage:"Got it"}}),d="https://help.openai.com/en/articles/8590148-memory-faq#h_f78fa25e47",u=()=>{window.open(d,"_blank","noopener noreferrer"),U.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Learn More Clicked","chatgpt_golden_hour_nux_modal_learn_more_clicked"),Ee.count(Ae.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_learn_more_clicked")};return o?r.jsxs(Pt,{testId:"modal-golden-hour-nux",isOpen:!0,noPadding:!0,onClose:()=>{t(),U.logEventWithStatsig("ChatGPT Golden Hour Nux Modal Closed","chatgpt_golden_hour_nux_modal_closed"),Ee.count(Ae.GOLDEN_HOUR,"chatgpt_golden_hour_nux_modal_closed")},showCloseButton:!1,size:"custom",type:"success",className:"relative flex max-w-[480px] flex-col",children:[r.jsx("div",{className:"absolute end-4 top-4 z-50",children:r.jsx(fn,{className:"text-token-text-secondary ring-0! outline-0! hover:bg-transparent focus:ring-0! focus:ring-offset-0! focus:outline-0! dark:hover:bg-transparent",onClick:t})}),r.jsxs("div",{className:"relative flex flex-1 overflow-x-clip",children:[r.jsx("img",{src:s,className:"h-[213px] w-full object-cover object-bottom",alt:""}),r.jsx("div",{className:"pointer-events-none absolute inset-0 flex w-full items-center justify-center",children:r.jsx("div",{className:"pointer-events-auto",children:r.jsx("div",{className:"inline-flex w-full rounded-[40px] bg-white/40 p-1 shadow-[0_0_84px_0_rgba(0,105,209,0.5)] backdrop-blur-[2px] dark:bg-black/60",children:r.jsx("div",{className:"bg-token-bg-secondary flex max-w-full items-center justify-end gap-[10px] overflow-hidden rounded-[38px] bg-white py-2.5 ps-4.5 pe-3 dark:bg-[#101010]",children:r.jsxs("div",{className:"flex w-full items-center gap-3",children:[r.jsx("div",{className:"text-token-text-primary flex min-w-0 flex-1 items-center gap-[9px] truncate text-[21px] leading-[30px] tracking-[-0.27px]",children:r.jsx(P,w({},c.optm))}),r.jsx("div",{className:"text-token-text-primary flex shrink-0 items-center gap-[18px]",children:r.jsx(Toe,{})})]})})})})})]}),r.jsxs("div",{className:"flex flex-1 flex-col gap-2 px-8 pt-8 pb-8",children:[r.jsx("div",{className:"text-[22px] leading-7 font-medium",children:r.jsx(P,w({},c.title))}),r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,w({},c.subtitle))}),r.jsxs("div",{className:"mt-4 flex w-full items-center justify-end gap-3",children:[r.jsx(he,{color:"secondary",onClick:u,children:r.jsx(P,w({},c.learnMoreButton))}),r.jsx(he,{color:"primary",onClick:t,children:r.jsx(P,w({},c.gotItButton))})]})]})]}):null}var Eoe=(t=>(t.unsupported_app_version="unsupported_app_version",t))(Eoe||{});const Bze=()=>{const t=G(),e=xe(t,"2335877601");return Ho?e?{isLoading:!1,isOpen:!0,modalType:"unsupported_app_version",onClose:()=>{}}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}},Uze="chatgpt",Vze="chatgpt-alt",Gze="oauth_complete",$ze="ms-windows-store://pdp/?productid=9nt1r1c2hh7j",Hze="https://apps.microsoft.com/detail/9nt1r1c2hh7j",Aoe=({className:t})=>r.jsxs("div",{className:W("flex-column flex gap-[10px]",t),children:[r.jsx("div",{className:"relative flex h-[62px] w-[88px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(P,w({},tk.alt))})}),r.jsx("div",{className:"relative flex h-[62px] w-[232px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-linear-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:r.jsx("span",{className:"text-token-text-secondary absolute end-[12px] bottom-[8px] text-[12px] leading-[15px] font-semibold tracking-[-0.197499px]",children:r.jsx(P,w({},tk.space))})})]}),tk=be({alt:{id:"DesktopOnboardingKeyboardIllustration.altKeyboardKeyLabel",defaultMessage:"alt"},space:{id:"DesktopOnboardingKeyboardIllustration.spaceKeyboardKeyLabel",defaultMessage:"space"}}),Ioe=Ye.hasSeenWindowsAppOnboarding,joe=()=>{const t=G(),{eligible:e,markAsViewed:n,isLoading:s}=$e(Ioe);return!Ho||Qj(t)?{isLoading:!1,isOpen:!1,onClose:null}:s?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:e,onClose:n}},Wze=({onClose:t})=>{const{isOpen:e,onClose:n}=joe();return e?(We.logEvent("chatgpt_sidetron_onboarding_nux_shown"),r.jsx(Pt,{testId:"modal-desktop-onboarding",isOpen:!0,onClose:rs,type:"success",noPadding:!0,position:"center",className:"max-w-[552px] p-14 sm:max-w-[552px]",children:r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[r.jsx(fn,{className:"absolute end-4 top-4",onClick:()=>{t(),n()}}),r.jsx("p",{className:"mb-3 text-center text-2xl font-bold",children:r.jsx(P,w({},Of.title))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(P,w({},Of.subtitle))}),r.jsx(Aoe,{className:"my-8"}),r.jsx("p",{className:"mb-2 text-center text-lg font-semibold",children:r.jsx(P,w({},Of.keyboardShortcut))}),r.jsx("p",{className:"text-token-text-tertiary text-center text-lg",children:r.jsx(P,w({},Of.keyboardShortcutHint))})]})})):null},Of=be({title:{id:"DesktopOnboardingModal.title",defaultMessage:"Quickly access ChatGPT"},subtitle:{id:"DesktopOnboardingModal.subtitle",defaultMessage:"Use a shortcut to ask questions, upload files, or take screenshots from anywhere on your computer."},keyboardShortcut:{id:"DesktopOnboardingModal.keyboardShortcut1",defaultMessage:"Press Alt+Space to open the companion window"},keyboardShortcutHint:{id:"DesktopOnboardingModal.keyboardShortcutHint",defaultMessage:"You can change this shortcut in Settings."}});function zze(t=30){"use no forget";const e=G(),{session:n}=pd(e);return _.useMemo(()=>{const s=n==null?void 0:n.accessToken;if(!s)return!1;let o;try{const d=O6(s);o=d==null?void 0:d.pwd_auth_time}catch(d){return!1}if(o==null)return!1;const a=o<1e12?o*1e3:o,l=Date.now()-a;return l>=0&&l<=t*1e3},[n==null?void 0:n.accessToken,t])}function Poe(){const t=G(),e=ut(t),{data:n,isLoading:s,isError:o}=ch(e==null?void 0:e.getWorkspaceId()),a=G(),i=xe(a,"616577762");return!(e!=null&&e.isEnterprisey())||i?"ENABLED":s&&n==null?"LOADING":o?"ERROR":n!=null&&n.beta_settings.wham_access?"ENABLED":"DISABLED"}var nk=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Noe(t,e){return!!(t===e||nk(t)&&nk(e))}function Roe(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!Noe(t[n],e[n]))return!1;return!0}function Rl(t,e){e===void 0&&(e=Roe);var n=null;function s(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(n&&n.lastThis===this&&e(o,n.lastArgs))return n.lastResult;var i=t.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return s.clear=function(){n=null},s}const Loe=/#/g,Ooe=/&/g,Doe=/\//g,Foe=/=/g,tS=/\+/g,Boe=/%5e/gi,Uoe=/%60/gi,Voe=/%7c/gi,Goe=/%20/gi;function $oe(t){return encodeURI(""+t).replace(Voe,"|")}function Dy(t){return $oe(typeof t=="string"?t:JSON.stringify(t)).replace(tS,"%2B").replace(Goe,"+").replace(Loe,"%23").replace(Ooe,"%26").replace(Uoe,"`").replace(Boe,"^").replace(Doe,"%2F")}function X_(t){return Dy(t).replace(Foe,"%3D")}function tP(t=""){try{return decodeURIComponent(""+t)}catch(e){return""+t}}function Hoe(t){return tP(t.replace(tS," "))}function Woe(t){return tP(t.replace(tS," "))}function zoe(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const s=n.match(/([^=]+)=?(.*)/)||[];if(s.length<2)continue;const o=Hoe(s[1]);if(o==="__proto__"||o==="constructor")continue;const a=Woe(s[2]||"");e[o]===void 0?e[o]=a:Array.isArray(e[o])?e[o].push(a):e[o]=[e[o],a]}return e}function qoe(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>"".concat(X_(t),"=").concat(Dy(n))).join("&"):"".concat(X_(t),"=").concat(Dy(e)):X_(t)}function Yoe(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>qoe(e,t[e])).filter(Boolean).join("&")}const Zoe=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Koe=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Qoe=/^([/\\]\s*){2,}[^/\\]/;function Joe(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Zoe.test(t):Koe.test(t)||(e.acceptRelative?Qoe.test(t):!1)}function Xoe(t,e){const n=eae(t),s=w(w({},zoe(n.search)),e);return n.search=Yoe(s),tae(n)}const nP=Symbol.for("ufo:protocolRelative");function eae(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(n){const[,m,f=""]=n;return{protocol:m.toLowerCase(),pathname:f,href:m+f,auth:"",host:"",search:"",hash:""}}if(!Joe(t,{acceptRelative:!0}))return sk(t);const[,s="",o,a=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,i="",l=""]=a.match(/([^#/?]*)(.*)?/)||[];s==="file:"&&(l=l.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:c,search:d,hash:u}=sk(l);return{protocol:s.toLowerCase(),auth:o?o.slice(0,Math.max(0,o.length-1)):"",host:i,pathname:c,search:d,hash:u,[nP]:!s}}function sk(t=""){const[e="",n="",s=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:s}}function tae(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",s=t.hash||"",o=t.auth?t.auth+"@":"",a=t.host||"";return(t.protocol||t[nP]?(t.protocol||"")+"//":"")+o+a+e+n+s}var Df={exports:{}},Ff={exports:{}},ok;function nS(){return ok||(ok=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){if(s==null)throw new TypeError("Expected a string but received a ".concat(s));if(s.constructor.name!=="String")throw new TypeError("Expected a string but received a ".concat(s.constructor.name))}t.exports=e.default,t.exports.default=e.default})(Ff,Ff.exports)),Ff.exports}var Bf={exports:{}},ak;function nae(){return ak||(ak=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;function n(o){return Object.prototype.toString.call(o)==="[object RegExp]"}function s(o,a){for(var i=0;i<a.length;i++){var l=a[i];if(o===l||n(l)&&l.test(o))return!0}return!1}t.exports=e.default,t.exports.default=e.default})(Bf,Bf.exports)),Bf.exports}var Uf={exports:{}},rk;function sae(){return rk||(rk=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(o,a){return o.indexOf(a)!==-1};e.default=n,t.exports=e.default,t.exports.default=e.default})(Uf,Uf.exports)),Uf.exports}var Vf={exports:{}},Gf={exports:{}},ik;function sP(){return ik||(ik=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;for(var a in o)typeof s[a]>"u"&&(s[a]=o[a]);return s}t.exports=e.default,t.exports.default=e.default})(Gf,Gf.exports)),Gf.exports}var lk;function oae(){return lk||(lk=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=o(nS()),s=o(sP());function o(l){return l&&l.__esModule?l:{default:l}}var a={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function i(l,c){(0,n.default)(l),c=(0,s.default)(c,a),c.allow_trailing_dot&&l[l.length-1]==="."&&(l=l.substring(0,l.length-1)),c.allow_wildcard===!0&&l.indexOf("*.")===0&&(l=l.substring(2));var d=l.split("."),u=d[d.length-1];return c.require_tld&&(d.length<2||!c.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(u)||/\s/.test(u))||!c.allow_numeric_tld&&/^\d+$/.test(u)?!1:d.every(function(m){return!(m.length>63&&!c.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(m)||/[\uff01-\uff5e]/.test(m)||/^-|-$/.test(m)||!c.allow_underscores&&/_/.test(m))})}t.exports=e.default,t.exports.default=e.default})(Vf,Vf.exports)),Vf.exports}var $f={exports:{}},ck;function aae(){return ck||(ck=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=s(nS());function s(m){return m&&m.__esModule?m:{default:m}}function o(m){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o(m)}var a="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",i="(".concat(a,"[.]){3}").concat(a),l=new RegExp("^".concat(i,"$")),c="(?:[0-9a-fA-F]{1,4})",d=new RegExp("^("+"(?:".concat(c,":){7}(?:").concat(c,"|:)|")+"(?:".concat(c,":){6}(?:").concat(i,"|:").concat(c,"|:)|")+"(?:".concat(c,":){5}(?::").concat(i,"|(:").concat(c,"){1,2}|:)|")+"(?:".concat(c,":){4}(?:(:").concat(c,"){0,1}:").concat(i,"|(:").concat(c,"){1,3}|:)|")+"(?:".concat(c,":){3}(?:(:").concat(c,"){0,2}:").concat(i,"|(:").concat(c,"){1,4}|:)|")+"(?:".concat(c,":){2}(?:(:").concat(c,"){0,3}:").concat(i,"|(:").concat(c,"){1,5}|:)|")+"(?:".concat(c,":){1}(?:(:").concat(c,"){0,4}:").concat(i,"|(:").concat(c,"){1,6}|:)|")+"(?::((?::".concat(c,"){0,5}:").concat(i,"|(?::").concat(c,"){1,7}|:))")+")(%[0-9a-zA-Z.]{1,})?$");function u(m){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(0,n.default)(m);var p=(o(f)==="object"?f.version:arguments[1])||"";return p?p.toString()==="4"?l.test(m):p.toString()==="6"?d.test(m):!1:u(m,{version:4})||u(m,{version:6})}t.exports=e.default,t.exports.default=e.default})($f,$f.exports)),$f.exports}var dk;function rae(){return dk||(dk=1,(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=y;var n=c(nS()),s=c(nae()),o=c(sae()),a=c(oae()),i=c(aae()),l=c(sP());function c(b){return b&&b.__esModule?b:{default:b}}function d(b,v){return g(b)||p(b,v)||m(b,v)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(b,v){if(b){if(typeof b=="string")return f(b,v);var S={}.toString.call(b).slice(8,-1);return S==="Object"&&b.constructor&&(S=b.constructor.name),S==="Map"||S==="Set"?Array.from(b):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?f(b,v):void 0}}function f(b,v){(v==null||v>b.length)&&(v=b.length);for(var S=0,C=Array(v);S<v;S++)C[S]=b[S];return C}function p(b,v){var S=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(S!=null){var C,k,M,T,E=[],A=!0,N=!1;try{if(M=(S=S.call(b)).next,v!==0)for(;!(A=(C=M.call(S)).done)&&(E.push(C.value),E.length!==v);A=!0);}catch(R){N=!0,k=R}finally{try{if(!A&&S.return!=null&&(T=S.return(),Object(T)!==T))return}finally{if(N)throw k}}return E}}function g(b){if(Array.isArray(b))return b}var h={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},x=/^\[([^\]]+)\](?::([0-9]+))?$/;function y(b,v){if((0,n.default)(b),!b||/[\s<>]/.test(b)||b.indexOf("mailto:")===0||(v=(0,l.default)(v,h),v.validate_length&&b.length>v.max_allowed_length)||!v.allow_fragments&&(0,o.default)(b,"#")||!v.allow_query_components&&((0,o.default)(b,"?")||(0,o.default)(b,"&")))return!1;var S,C,k,M,T,E,A,N;if(A=b.split("#"),b=A.shift(),A=b.split("?"),b=A.shift(),A=b.split("://"),A.length>1){if(S=A.shift().toLowerCase(),v.require_valid_protocol&&v.protocols.indexOf(S)===-1)return!1}else{if(v.require_protocol)return!1;if(b.slice(0,2)==="//"){if(!v.allow_protocol_relative_urls)return!1;A[0]=b.slice(2)}}if(b=A.join("://"),b==="")return!1;if(A=b.split("/"),b=A.shift(),b===""&&!v.require_host)return!0;if(A=b.split("@"),A.length>1){if(v.disallow_auth||A[0]===""||(C=A.shift(),C.indexOf(":")>=0&&C.split(":").length>2))return!1;var R=C.split(":"),O=d(R,2),D=O[0],F=O[1];if(D===""&&F==="")return!1}M=A.join("@"),E=null,N=null;var V=M.match(x);if(V?(k="",N=V[1],E=V[2]||null):(A=M.split(":"),k=A.shift(),A.length&&(E=A.join(":"))),E!==null&&E.length>0){if(T=parseInt(E,10),!/^[0-9]+$/.test(E)||T<=0||T>65535)return!1}else if(v.require_port)return!1;return v.host_whitelist?(0,s.default)(k,v.host_whitelist):k===""&&!v.require_host?!0:!(!(0,i.default)(k)&&!(0,a.default)(k,v)&&(!N||!(0,i.default)(N,6))||(k=k||N,v.host_blacklist&&(0,s.default)(k,v.host_blacklist)))}t.exports=e.default,t.exports.default=e.default})(Df,Df.exports)),Df.exports}var iae=rae();const lae=Wn(iae);function cae(t){return(t.type==="containerDirective"||t.type==="textDirective"||t.type==="leafDirective")&&"name"in t}function qze(t){return t.type==="containerDirective"}function Yze(t){return t.type==="code"}function Zze(t){if(t!=null)return new Date(t*1e3).toISOString()}const dae=t=>{let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e^t.charCodeAt(n);return(e>>>0).toString(36)},Kze=t=>{try{return"".concat(t?dae(t):"")}catch(e){return""}},uae=window.location.host,mae=(t,e={})=>{const n=Object.keys(e).length?e:{utm_source:uae};try{const s=t.trim();return lae(s,{protocols:["http","https"]})?Xoe(s,n):t}catch(s){return t}},Qze=(t,e={},n=[])=>{const s=NC(t);return n.some(a=>a&&NC(a)===s)?mae(t,e):t},Jze=t=>{try{return me.getConversationSearchEntryUrls(t&&ft(t))}catch(e){return[]}},Xze=(t,e)=>{try{return t&&e?me.getNode(ft(t),e).message:void 0}catch(n){return}},oP=(function(t){if(t==null)return hae;if(typeof t=="function")return m1(t);if(typeof t=="object")return Array.isArray(t)?fae(t):pae(t);if(typeof t=="string")return gae(t);throw new Error("Expected function, string, or object as test")});function fae(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=oP(t[n]);return m1(s);function s(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function pae(t){const e=t;return m1(n);function n(s){const o=s;let a;for(a in t)if(o[a]!==e[a])return!1;return!0}}function gae(t){return m1(e);function e(n){return n&&n.type===t}}function m1(t){return e;function e(n,s,o){return!!(_ae(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function hae(){return!0}function _ae(t){return t!==null&&typeof t=="object"&&"type"in t}const aP=[],xae=!0,uk=!1,yae="skip";function vae(t,e,n,s){let o;typeof e=="function"&&typeof n!="function"?(s=n,n=e):o=e;const a=oP(o),i=s?-1:1;l(t,void 0,[])();function l(c,d,u){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const p=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=aP,g,h,x;if((!e||a(c,d,u[u.length-1]||void 0))&&(p=bae(n(c,u)),p[0]===uk))return p;if("children"in c&&c.children){const y=c;if(y.children&&p[0]!==yae)for(h=(s?y.children.length:-1)+i,x=u.concat(y);h>-1&&h<y.children.length;){const b=y.children[h];if(g=l(b,h,x)(),g[0]===uk)return g;h=typeof g[1]=="number"?g[1]:h+i}}return p}}}function bae(t){return Array.isArray(t)?t:typeof t=="number"?[xae,t]:t==null?aP:[t]}function sS(t,e,n,s){let o,a,i;typeof e=="function"&&typeof n!="function"?(a=void 0,i=e,o=n):(a=e,i=n,o=s),vae(t,a,l,o);function l(c,d){const u=d[d.length-1],m=u?u.children.indexOf(c):void 0;return i(c,m,u)}}const Sae={red:"bg-red-500",yellow:"bg-yellow-500",blue:"bg-blue-500"},Cae={sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4"},rP=({color:t,size:e="sm",className:n})=>r.jsx("div",{className:W("rounded-full",t?Sae[t]:void 0,Cae[e],n)});function eqe(t){return qo(t).checkGate("2067628123")}const wae=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),kae=j(()=>I(()=>import("./iokrzhs8g9j8y9mp.js").then(t=>t._),__vite__mapDeps([127,1])),{loading:t=>L(t)}),e0="oai-chat-backend",tqe=()=>{var o;const[t,e]=_.useState(!1),[n,s]=_.useState(((o=g_.getCookie(e0))==null?void 0:o.toString())==="preview");return r.jsxs(r.Fragment,{children:[r.jsxs(K.CheckboxItem,{icon:wae,checked:t,onCheckedChange:a=>{e(a),requestAnimationFrame(()=>{window.location.href=a?"/preview":"/public"})},children:["Preview",r.jsx(Gp,{children:"web"})]}),r.jsxs(K.CheckboxItem,{icon:kae,checked:n,onCheckedChange:a=>{a?(s(!0),g_.setCookie(e0,"preview")):g_.deleteCookie(e0),window.location.reload()},children:["Preview",r.jsx(Gp,{children:"sa-server"})]})]})},fg=Nt(()=>({focusedObject:null}));function iP(){return fg(t=>t.focusedObject)}var cl=(t=>(t[t.Textdoc=0]="Textdoc",t[t.ADAVisualization=1]="ADAVisualization",t))(cl||{});const _i=Nt(()=>({focusedObject:null,fromMessageId:null})),nqe=(t,e)=>{const n=_i.getState();e!==n.fromMessageId&&_i.setState({focusedObject:t,fromMessageId:e})},dl=t=>{_i.setState({focusedObject:t,fromMessageId:null})},xi=t=>{fg.setState({focusedObject:null});const e=_i.getState(),{focusedObject:n}=e;(!n||n.type!==0||n.textdocId!==t)&&lP(t)},lP=t=>{dl({type:0,textdocId:t})},Mae=(t,e,n)=>{dl({type:0,textdocId:t,history:e,showChangesAtVersion:n})},sqe=(t,e,n)=>{dl({type:0,textdocId:t,showChangesAtVersion:e,history:n!=null?n:void 0})},oS=()=>{_i.setState({focusedObject:null})},Tae=()=>{_i.setState({focusedObject:null,fromMessageId:null})};var t0,mk;function Eae(){if(mk)return t0;mk=1;var t=u$();function e(n,s,o,a){return t(n,function(i,l,c){s(a,o(i),l,c)}),a}return t0=e,t0}var n0,fk;function Aae(){if(fk)return n0;fk=1;var t=Eae();function e(n,s){return function(o,a){return t(o,n,s(a),{})}}return n0=e,n0}var s0,pk;function Iae(){if(pk)return s0;pk=1;var t=m$(),e=Aae(),n=xd(),s=Object.prototype,o=s.toString,a=e(function(i,l,c){l!=null&&typeof l.toString!="function"&&(l=o.call(l)),i[l]=c},t(n));return s0=a,s0}var jae=Iae();const Pae=Wn(jae);function aS(t,e){var a,i,l,c;if(!t||e==null)return null;const{resolveTempTextdocId:n}=t,s=(a=n==null?void 0:n[e])!=null?a:e;let o=(l=(i=t.textdocById[s])!=null?i:t.textdocById[e])!=null?l:null;if(!o&&n){const d=Pae(n);o=(c=t.textdocById[d[s]])!=null?c:null}return o}var o0=YV();const pg=Symbol(),Nae=Symbol(),Rae=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),cP=Rae?_.useEffect:_.useLayoutEffect,Lae=o0.unstable_runWithPriority?t=>{try{o0.unstable_runWithPriority(o0.unstable_NormalPriority,t)}catch(e){if(e.message==="Not implemented.")t();else throw e}}:t=>t(),Oae=t=>({value:n,children:s})=>{const o=_.useRef(n),a=_.useRef(0),[i,l]=_.useState(null);i&&(i(n),l(null));const c=_.useRef();if(!c.current){const d=new Set,u=(m,f)=>{a.current+=1;const p={n:a.current};f!=null&&f.suspense&&(p.n*=-1,p.p=new Promise(g=>{l(()=>h=>{p.v=h,delete p.p,g(h)})})),d.forEach(g=>g(p)),m()};c.current={[pg]:{v:o,n:a,l:d,u}}}return cP(()=>{o.current=n,a.current+=1,Lae(()=>{c.current[pg].l.forEach(d=>{d({n:a.current,v:n})})})},[n]),_.createElement(t,{value:c.current},s)};function Dae(t){const e=_.createContext({[pg]:{v:{current:t},n:{current:-1},l:new Set,u:n=>n()}});return e[Nae]=e.Provider,e.Provider=Oae(e.Provider),delete e.Consumer,e}function Fae(t,e){const n=_.useContext(t)[pg],{v:{current:s},n:{current:o},l:a}=n,i=e(s),[l,c]=_.useReducer((d,u)=>{if(!u)return[s,i];if("p"in u)throw u.p;if(u.n===o)return Object.is(d[1],i)?d:[s,i];try{if("v"in u){if(Object.is(d[0],u.v))return d;const m=e(u.v);return Object.is(d[1],m)?d:[u.v,m]}}catch(m){}return[...d]},[s,i]);return Object.is(l[1],i)||c(),cP(()=>(a.add(c),()=>{a.delete(c)}),[a]),l[1]}var Fy=(t=>(t.NATIVE="native",t.LAST_TURN="last_turn",t))(Fy||{});const dP=Dae(null);function Bae(){return{lastCanvasAssistantMessageById:{},resolveTempCommentId:{},resolveTempTextdocId:{},latestTextdocId:null}}function uP(t){return w({fetchError:null,isFetchingFromPersistence:!1,textdocById:{},allTextdocIdSet:{},streamingSource:null},t!=null?t:Bae())}function ti(t,e){return dh(t,e)}function Uu(t,e,n=!0){var o,a,i,l;const s=t.textdocById[e.textdocId];if(s)t.textdocById[e.textdocId]=s,s.metadata.type=e.type,s.metadata.title=e.title,s.metadata.updatedAt=e.createdAt,s.metadata.contentReferences=(i=e.metadata)==null?void 0:i.content_references,s.metadata.hiveId=(l=e.metadata)==null?void 0:l.hive_id,n?s.versions.push(e):s.versions[s.versions.length-1]=e;else{const c={metadata:{textdocId:e.textdocId,type:e.type,title:e.title,createdAt:e.createdAt,updatedAt:e.createdAt,contentReferences:(o=e.metadata)==null?void 0:o.content_references,hiveId:(a=e.metadata)==null?void 0:a.hive_id},versions:[e]};t.allTextdocIdSet[e.textdocId]=e.textdocId,t.textdocById[e.textdocId]=c}}var Uae=xd();const Vae=Wn(Uae);function Ao(t=Vae){return Fae(dP,t)}function Gae(){return Ao(t=>t==null?void 0:t.isFetchingFromPersistence)}function oqe(){return Ao(t=>t==null?void 0:t.resolveTempCommentId)}function $ae(){return Ao(t=>{var e;return(e=t==null?void 0:t.latestTextdocId)!=null?e:null})}function aqe(){return Ao(t=>{var e;return(e=t==null?void 0:t.streamingSource)!=null?e:null})}function rqe(t){return Ao(e=>aS(e,t))}function f1(t){return Ao(e=>{var n,s;return(s=(n=aS(e,t))==null?void 0:n.metadata)!=null?s:null})}function mP(){const t=Ao(e=>e==null?void 0:e.allTextdocIdSet);return t?Object.keys(t):null}function Hae(){return Ao(t=>t?Object.keys(t.allTextdocIdSet).length>1:!1)}function Wae({textdocId:t,assistantMessageId:e}){return Ao(n=>{const s=n==null?void 0:n.lastCanvasAssistantMessageById;return s==null||t==null?!0:s[t]==null||s[t]===e})}function fP(){return _i(t=>t.focusedObject)}function iqe(){const t=_i(e=>e.focusedObject);return(t==null?void 0:t.type)!==cl.Textdoc?null:t}function Wm(){return fP()!=null}function rS(t){const e=fP();return Ao(n=>{var i,l,c;if(!t||(e==null?void 0:e.type)!==cl.Textdoc)return!1;const s=(i=n==null?void 0:n.resolveTempTextdocId)!=null?i:{},o=(l=s[e.textdocId])!=null?l:e.textdocId,a=(c=s[t])!=null?c:t;return o===a})}function Ti(t,e){t({pathname:"/",search:(e==null?void 0:e.params)&&"?".concat(e.params)},{replace:e==null?void 0:e.replace,state:gP(e==null?void 0:e.config)})}function pP(){"use no forget";const t=ls(),e=qae(t),n=_.useRef(e!=null?e:{});return e?n.current=e:n.current}function p1(){"use forget";const t=H.c(2),e=pP();let n;return t[0]!==e?(n=zae(),t[0]=e,t[1]=n):n=t[1],n}function zae(t){return gP()}function gP(t){return{newConversationConfig:w({},t)}}function qae(t){var e;return(e=t.state)==null?void 0:e.newConversationConfig}function g1(c){var d=c,{icon:t,mobileIcon:e,color:n="primary",iconClassName:s,children:o,as:a,ref:i}=d,l=Me(d,["icon","mobileIcon","color","iconClassName","children","as","ref"]);let u=o;t&&(u=r.jsxs(r.Fragment,{children:[r.jsx(t,{className:W(s!=null?s:"icon",e!=null&&"max-md:hidden")}),e?r.jsx(e,{className:W(s!=null?s:"icon","md:hidden")}):null]}));const m=p1();switch(a){case"link":case"a":{const f=l;return r.jsx(Aa,B(w({},f),{className:W(n==="primary"?"text-token-text-primary":n==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",l.className),ref:i,to:"/",state:m,children:u}))}case"button":default:{const f=l;return r.jsx("button",B(w({},f),{className:W(n==="primary"?"text-token-text-primary":n==="tertiary"?"text-token-text-tertiary":"text-token-text-secondary","no-draggable hover:bg-token-surface-hover keyboard-focused:bg-token-surface-hover touch:h-10 touch:w-10 flex h-9 w-9 items-center justify-center rounded-lg focus:outline-none disabled:opacity-50",l.className),ref:i,children:u}))}}}var h1=(t=>(t.ACCELERATOR="accelerator",t.BLOCK_COMMENT_LAUNCHER="block_comment_launcher",t.CLOSE_TEXTDOC="close_textdoc",t.COLLAPSED_COMMENT="collapsed_comment",t.COMMENT_ACCEPT="comment_accept",t.COMMENT_DISMISS="comment_dismiss",t.COPY="copy",t.DOWNLOAD="download",t.EXPANDED_COMMENT="expanded_comment",t.FILE_DRAWER_ITEM="file_drawer_item",t.HISTORY_NEXT="history_next",t.HISTORY_PREVIOUS="history_previous",t.MESSAGE_ATTACHMENT="message_attachment",t.OPEN_SHARE_MENU="open_share_menu",t.CREATE_SHARE_LINK="create_share_link",t.UPDATE_SHARE_LINK_TO_LATEST="update_share_link_to_latest",t.COPY_SHARE_LINK="copy_share_link",t.UPDATE_SHARE_LINK_PRIVATE="update_share_link_private",t.UPDATE_SHARE_LINK_PUBLIC="update_share_link_public",t.SHOW_CHANGES="show_changes",t.TOOLBAR_FORMAT_BOLD="toolbar_format_bold",t.TOOLBAR_FORMAT_HEADER1="toolbar_format_header1",t.TOOLBAR_FORMAT_HEADER2="toolbar_format_header2",t.TOOLBAR_FORMAT_HEADER3="toolbar_format_header3",t.TOOLBAR_FORMAT_ITALIC="toolbar_format_italic",t.TOOLBAR_FORMAT_PARAGRAPH="toolbar_format_paragraph",t.TOOLBAR_FORMAT_STYLE="toolbar_format_style",t.TOOLBAR_ASK_CHATGPT="toolbar_ask_chatgpt",t.EDIT_IN_CANVAS_MESSAGE="edit_in_canvas_message",t.EDIT_IN_CANVAS_CODE_SNIPPET="edit_in_canvas_code_snippet",t.OPEN_IN_CANVAS_WRITING_BLOCK="open_in_canvas_writing_block",t.SAVE_TO_CHAT_ON_EDITOR_CLOSE="save_to_chat_on_editor_close",t.CLOSE_WITHOUT_SAVING="close_without_saving",t.LEARN_MODE_ABOUT_NETWORK_REQUESTS="learn_more_about_network_requests",t))(h1||{}),gg=(t=>(t.Unknown="unknown",t.ShowToast="show_toast",t.CanvasMessage="canvas_message",t.TurnComplete="turn_complete",t))(gg||{});const Yae={canvas_message:Go({message:pA}),turn_complete:Go({}),unknown:Go({}),show_toast:Go({text:hs})},gk=f$(Object.values(gg));function Zae(t){const{type:e}=gA(t,{type:gk}),n=gk(e);return w({type:n},Yae[n](t))}function hk(t,e){Qae(n=>{n.type===t&&e(n)})}function Kae(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new TextDecoder("utf-8").decode(n)}function Qae(t){_.useEffect(()=>ml(window,{message:n=>{const s=n.data;if(!(typeof s!="object"||(s==null?void 0:s.type)!=="canmore_native"))try{const o=Kae(s.msg),a=Zae(JSON.parse(o));t(a)}catch(o){console.warn("Unknown message from native app: ".concat(s.msg))}}}),[t])}function hP(){var n;let t;const e=Jae();switch(e){case"android":t=window.CanmoreNative;break;case"ios":t=(n=window.webkit)==null?void 0:n.messageHandlers.canmoreNative;break;case"web":t=void 0;break}return{platform:e,isNative:e!=="web",bridge:t,sendMessage:s=>t==null?void 0:t.postMessage(btoa(JSON.stringify(s)))}}function Jae(){return typeof window.CanmoreNative<"u"?"android":typeof window.webkit<"u"&&typeof window.webkit.messageHandlers.canmoreNative<"u"?"ios":"web"}function _1(t,e){U.logEvent(t,w({platform:hP().platform},e!=null?e:{}))}function Xae(t,e,n){U.logEventWithStatsig(t,e,w({platform:hP().platform},n))}function ere(t,e,n){_1(t,w({distributionValue:e},n!=null?n:{}))}function tre(t,e){_1("Canvas Button Clicked",w({buttonName:t},e!=null?e:{}))}function nre(t){if(t instanceof Error){const{name:e,message:n,stack:s,cause:o}=t;return{name:e,message:n,stack:s,cause:o}}return t}function sre(t,e,n){_1("Canvas Client Error",{message:t,error:e==null?t:nre(e),attributes:n}),Oe.addError(e)}const Ll={logButtonClick:tre,logEvent:_1,logEventWithStatsig:Xae,logError:sre,logDistribution:ere},ore=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),are=({children:t})=>{const e=mP(),n=Io();return!(e!=null&&e.length)||n?null:r.jsxs(K.Root,{children:[r.jsx(K.BasicTrigger,{children:t}),r.jsx(K.Portal,{children:r.jsx(K.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:e.map(s=>r.jsx(rre,{textdocId:s},s))})})]})},rre=({textdocId:t})=>{const e=gi(f1(t));return r.jsx(K.Item,{icon:ore,onClick:()=>{Ll.logButtonClick(h1.FILE_DRAWER_ITEM),xi(e.textdocId)},children:r.jsx("span",{className:"block max-w-[200px] truncate",children:e.title})})},ire=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),lqe=()=>{const t=mP(),e=Wm();return!t||e?null:t.length===1?r.jsx(lre,{textdocId:t[0]}):r.jsx(are,{children:r.jsx(_P,{})})},lre=({textdocId:t})=>{const e=gi(f1(t));return r.jsx(_P,{onClick:()=>xi(e.textdocId)})},_P=({onClick:t})=>{const e=J();return r.jsx(kt,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:r.jsx(g1,{onClick:t,icon:ire,style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"}})})};function xP(t){const e=xt();return _.useCallback(async()=>{if(!t)return;const n=await ka(t);ro(e,n.gizmo_id)},[e,t])}function cre(t,e){const n=t.originalConversationId;tg({clientThreadId:n,title:t.title?e.formatMessage({id:"R1QYtC",defaultMessage:"Completed {taskTitle}"},{taskTitle:t.title}):e.formatMessage({id:"qi9HQV",defaultMessage:"Task complete"}),subtitle:e.formatMessage({id:"EgCRBg",defaultMessage:"Click here to view the result of your task"})})}function dre({task:t}){const e=J(),n=G(),s=t.originalConversationId,o=Xo(),a=ue(()=>o==null?void 0:o.serverId$()),i=!1,l=xP(s),c=Od(),d=a===s,{clearSystemHintModeTrigger:u}=na();return _.useEffect(()=>{var m,f;(m=t.notificationStatus)!=null&&m.recentlyCompleted&&!((f=t.notificationStatus)!=null&&f.notificationSent)&&!i&&(c&&$p(n)?qe(s,p=>{ln.setShouldRefetchConvoOnFinalize(p,!0)}):(l(),d||cre(t,e),u(Ie.Research),Zn.setTaskNotificationSent(t.taskId)))},[t,e,l,i,u,c,d,n,s]),r.jsx(Kn.Fragment,{})}function cqe(){const t=ta(hl.getAllTasksOrdered);return eee(),t.length?r.jsx(r.Fragment,{children:t.map(e=>r.jsx(dre,{task:e},e.taskId))}):null}const yP="personalization:open-memories-modal",a0=j(()=>I(()=>import("./dkkcsrii3168szu2.js").then(t=>t._),__vite__mapDeps([132,1])),{loading:t=>L(t)}),ure=j(()=>I(()=>Promise.resolve().then(()=>JS),void 0),{loading:t=>L(t)});function Hf({label:t,tooltip:e,Icon:n,tooltipInteractive:s=!1}){return r.jsx(kt,{label:e,interactive:s,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold opacity-70",children:[n&&r.jsx(n,{className:"icon-sm"}),r.jsx("div",{children:t})]})})}function dqe({clientThreadId:t,gizmoId:e}){const n=G(),s=J(),o=at(),{openSettings:a}=Fm(),i=Bm(),l=ki(),c=Zh(),{data:d}=Vm(e,!1,c),u=!!e,m=oQ(),f=j2(n,d==null?void 0:d.memoryFullPct),p=f!=="control",g=Es(),h=Ue(t,me.getIsNewConversation),x=ue(()=>wm(n));if(!c)return null;const y=()=>{var b;if(typeof window<"u")try{(b=window.sessionStorage)==null||b.setItem(yP,"true")}catch(v){}};if(g&&(!h||u))return r.jsx(Hf,{label:s.formatMessage(Ua.temporaryChat),tooltip:s.formatMessage(Ua.temporaryChatTooltip),Icon:ure});if(x&&!h)return r.jsx(Hf,{label:s.formatMessage(Ua.memoryOff),tooltip:s.formatMessage(Ua.developerModeTooltip),Icon:a0});if(i&&!l&&!g)return r.jsx(Hf,{label:s.formatMessage(Ua.memoryOff),tooltip:s.formatMessage(Ua.memoryOffTooltip),Icon:a0});if(d&&(d==null?void 0:d.memoryFullPct)>=100&&!g&&!m){const b=()=>{U.logEventWithStatsig("Memory Indicator Upgrade Clicked","chatgpt_memory_indicator_upgrade_clicked",{memoryFullButtonVariant:f}),gn(o,"Memory Indicator")},v=()=>{U.logEventWithStatsig("Memory Indicator Manage Clicked","chatgpt_memory_indicator_manage_clicked",{memoryFullButtonVariant:f}),y(),a(Bn.Personalization)};return r.jsx(Hf,{label:s.formatMessage(Ua.memoryFull),tooltip:r.jsx("div",{className:"whitespace-normal",children:r.jsx(P,B(w({},p?Ua.memoryFullTooltipGoldenHour:Ua.memoryFullTooltip),{values:{upgrade:S=>r.jsx("button",{onClick:b,className:"text-token-text-link underline",children:S}),manage:S=>r.jsx("button",{onClick:v,className:"text-token-text-link underline",children:S}),link:S=>r.jsx(Aa,{to:fd(Bn.Personalization),className:"underline",children:S})}}))}),Icon:a0,tooltipInteractive:!0})}else return null}const Ua=be({temporaryChat:{id:"ConversationPrivacyIndicator.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatTooltip:{id:"ConversationPrivacyIndicator.temporaryChatTooltip",defaultMessage:"Temporary Chats won't appear in your history, and ChatGPT won't remember anything you talk about."},memoryOff:{id:"ConversationPrivacyIndicator.memoryOff",defaultMessage:"Memory Off"},memoryOffTooltip:{id:"ConversationPrivacyIndicator.memoryOffTooltip",defaultMessage:"ChatGPT won't remember anything you talk about in this conversation."},developerModeTooltip:{id:"ConversationPrivacyIndicator.developerModeTooltip",defaultMessage:"ChatGPT won't reference past memories, or create new memories from this chat."},memoryFull:{id:"Z4zW/R",defaultMessage:"Memory full"},memoryFullTooltip:{id:"7IKefd",defaultMessage:"ChatGPT's out of space for saved memories. <link>Manage saved memories</link> to create more space."},memoryFullTooltipGoldenHour:{id:"mc0vkm",defaultMessage:"New memories can't be saved. <upgrade>Upgrade</upgrade> for more memory or <manage>manage</manage> saved memories."}});let r0="",_k="",Xd;const Vt={logProductEvent(t,e){const n=w(w({referrals_session_id:r0,program_name:_k},Xd?{is_referrer:Xd}:{}),e!=null?e:{});U.logEvent(t,n)},logAnnouncementProductEvent(t,e){U.logEvent(t,e)},createNewSession(t,e=void 0){r0=_s(),_k=t,Xd=e},logShowReferralDiscount(t,e){Vt.createNewSession(t,e),Ee.count(Ae.REFERRALS,"referrals.web.showReferralDiscount"),Vt.logProductEvent("Referrals: Show Referral Discount")},logShowReferralLinkGenerationModal(t){Vt.createNewSession(t,!0),Ee.count(Ae.REFERRALS,"referrals.web.showReferralLinkGenerationModal"),Vt.logProductEvent("Referrals: Show Referral Link Generation Modal")},logClickReferralGetLinkButton(){Ee.count(Ae.REFERRALS,"referrals.web.clickReferralGetLinkButton"),Vt.logProductEvent("Referrals: Click Referral Get Link Button")},logCopyReferralLink(){Ee.count(Ae.REFERRALS,"referrals.web.copyReferralLinkSuccess"),Vt.logProductEvent("Referrals: Copy Referral Link")},logClickReferrerIntroNotNowButton(){Ee.count(Ae.REFERRALS,"referrals.web.clickReferrerIntroNotNowButton"),Vt.logProductEvent("Referrals: Click Referrer Intro Not Now Button")},logShowReferrerConclusion(){Ee.count(Ae.REFERRALS,"referrals.web.showReferrerConclusion"),Vt.logProductEvent("Referrals: Show Referrer Conclusion")},logClickUpgradeButton(t){const e=[{key:"is_paying_user",value:t?"true":"false"}];Xd!==void 0&&e.push({key:"is_referrer",value:Xd?"true":"false"}),Ee.count(Ae.REFERRALS,"referrals.web.clickUpgradeButton",e),Vt.logProductEvent("Referrals: Click Upgrade Button",{is_paying_user:t})},logReferralDiscountContinue(){Ee.count(Ae.REFERRALS,"referrals.web.referralDiscountContinue"),Vt.logProductEvent("Referrals: Referral Discount Continue")},logClose(t){Ee.count(Ae.REFERRALS,"referrals.web.close",[{key:"source",value:t}]),U.logEvent("Referrals: Close",{referrals_session_id:r0,source:t})},logClickValidateEmail(){Ee.count(Ae.REFERRALS,"referrals.web.clickValidateEmail"),Vt.logProductEvent("Referrals: Click Validate Email")},logValidateEmailSuccess(){Ee.count(Ae.REFERRALS,"referrals.web.validateEmailSuccess")},logValidateEmailFailure(){Ee.count(Ae.REFERRALS,"referrals.web.validateEmailFailure")},logSendVerificationCode(){Ee.count(Ae.REFERRALS,"referrals.web.sendVerificationCode"),Vt.logProductEvent("Referrals: Send Verification Code")},logClickResendVerificationCodeButton(){Ee.count(Ae.REFERRALS,"referrals.web.resendVerificationCode"),Vt.logProductEvent("Referrals: Click Resend Verification Code Button")},logClickChangeEmailButton(){Ee.count(Ae.REFERRALS,"referrals.web.changeEmail"),Vt.logProductEvent("Referrals: Click Change Email Button")},logClickValidateVerificationCode(){Ee.count(Ae.REFERRALS,"referrals.web.validateVerificationCode"),Vt.logProductEvent("Referrals: Click Validate Verification Code")},logValidateVerificationCodeSuccess(){Ee.count(Ae.REFERRALS,"referrals.web.validateVerificationCodeSuccess")},logValidateVerificationCodeFailure(){Ee.count(Ae.REFERRALS,"referrals.web.validateVerificationCodeFailure")},logApplyDiscount(){Ee.count(Ae.REFERRALS,"referrals.web.applyDiscount"),Vt.logProductEvent("Referrals: Apply Discount")},logMobileSubscriptionTooltipOpen(){Ee.count(Ae.REFERRALS,"referrals.web.mobileSubscriptionTooltipOpen"),Vt.logProductEvent("Referrals: Show Mobile Subscription Tooltip")},logShowReferralUpsellAnnouncementBanner(){Ee.count(Ae.REFERRALS,"referrals.web.showReferralUpsellAnnouncementBanner"),Vt.logAnnouncementProductEvent("Referrals: Show Referral Upsell Announcement Banner")},logShowReferrerRedemptionBanner(){Ee.count(Ae.REFERRALS,"referrals.web.showReferrerRedemptionBanner"),Vt.logAnnouncementProductEvent("Referrals: Show Referrer Redemption Banner")},logShowRefereeRedemptionBanner(t){Ee.count(Ae.REFERRALS,"referrals.web.showRefereeRedemptionBanner"),Vt.logAnnouncementProductEvent("Referrals: Show Referee Redemption Banner",{referral_code:t})},logClickReferralUpsellButton(){Ee.count(Ae.REFERRALS,"referrals.web.clickReferralUpsellButton"),Vt.logProductEvent("Referrals: Click Referral Upsell Button")},logClickReferrerRedeemButton(){Ee.count(Ae.REFERRALS,"referrals.web.clickReferrerRedeemButton"),Vt.logProductEvent("Referrals: Click Referrer Redeem Button")},logClickRefereeRedeemButton(t){Ee.count(Ae.REFERRALS,"referrals.web.clickRefereeRedeemButton"),Vt.logProductEvent("Referrals: Click Referee Redeem Button",{referral_code:t})},logCloseReferralUpsellAnnouncementBanner(){Ee.count(Ae.REFERRALS,"referrals.web.closeReferralUpsellAnnouncementBanner"),Vt.logAnnouncementProductEvent("Referrals: Close Referral Upsell Announcement Banner")},logCloseReferrerRedemptionBanner(){Ee.count(Ae.REFERRALS,"referrals.web.closeReferrerRedemptionBanner"),Vt.logAnnouncementProductEvent("Referrals: Close Referrer Redemption Banner")},logCloseRefereeRedemptionBanner(t){Ee.count(Ae.REFERRALS,"referrals.web.closeRefereeRedemptionBanner"),Vt.logAnnouncementProductEvent("Referrals: Close Referee Redemption Banner",{referral_code:t})},logShowReferralUpsellHomepageButton(){Ee.count(Ae.REFERRALS,"referrals.web.showReferralUpsellHomepageButton"),Vt.logProductEvent("Referrals: Show Referral Upsell Homepage Button")},logClickReferralUpsellHomepageButton(){Ee.count(Ae.REFERRALS,"referrals.web.clickReferralUpsellHomepageButton"),Vt.logProductEvent("Referrals: Click Referral Upsell Homepage Button")}};function vP(t=!0){return lt({queryKey:["referral-upsell-announcement"],queryFn:async()=>await zm.getUpsellAnnouncementBannerInfo(),enabled:t})}class zm{static async getReferralProgramMetadata(e){return pe.safeGet("/referrals/{program_name}",{parameters:{path:{program_name:e}},authOption:qt.SendIfAvailable})}static async getReferralCodeMetadata(e){return pe.safeGet("/referrals/{referral_code}/metadata",{parameters:{path:{referral_code:e}},authOption:qt.SendIfAvailable})}static async createReferralCode(e){return pe.safePost("/referrals/create_referral_code",{requestBody:{transaction_id:e}})}static async getEnrollmentDetails(){return pe.safeGet("/referrals/enrollment_details")}static async validateEmail(e,n){return pe.safePost("/referrals/validate_email",{requestBody:{email:e,program_name:n}})}static async sendVerificationCode(e){return pe.safePost("/referrals/send_verification_code",{requestBody:{transaction_id:e}})}static async validateVerificationCode(e,n){return pe.safePost("/referrals/validate_verification_code",{requestBody:{transaction_id:e,verification_code:n}})}static async redeemReferral(e,n){return pe.safePost("/referrals/{referral_code}/redeem",{parameters:{path:{referral_code:e}},requestBody:{transaction_id:n}})}static async getReferralDiscount(){return pe.safeGet("/referrals/available_referral_discount")}static async getUpsellAnnouncementBannerInfo(){return pe.safeGet("/referrals/upsell_announcement_banner_info")}static async getIsEligibleForReferrals(){return pe.safeGet("/referrals/is_eligible_for_referrals")}static async trackReferralSignup(e){return pe.safePost("/referrals/track_referral_signup",{parameters:{query:{referral_code:e}},authOption:qt.SendIfAvailable})}}const mre=j(()=>I(()=>import("./bz46otimdhidcz20.js").then(t=>t._),__vite__mapDeps([133,1])),{loading:t=>L(t)});function uqe(){const t=G(),e=at(),{data:n}=lt({queryKey:["is-eligible-for-referrals"],queryFn:xe(t,"550432558")?()=>zm.getIsEligibleForReferrals():Jv}),s=n==null?void 0:n.eligible_program_name;if(_.useEffect(()=>{s&&Vt.logShowReferralUpsellHomepageButton()},[s,n]),!s)return null;const o="Refer";return r.jsx(kt,{side:"bottom",label:o,children:r.jsx(he,{color:"secondary",className:W("text-token-text-primary relative"),icon:mre,onClick:()=>{Vt.logClickReferralUpsellHomepageButton(),e("/refer/".concat(s))},label:o,children:o})})}function iS(t){var a;const e=Ia(),n=G(),s=ut(n);return!(s==null?void 0:s.isWorkspaceAccount())||((a=e==null?void 0:e.includes(t))!=null?a:!1)}const Gt=be({newChatInProject:{id:"proj-new-chat-placeholder",defaultMessage:"New chat in {projectName}"},emptyFileInstructions:{id:"si7jJz",defaultMessage:"Add documents, code files, images, and more. {gizmoNameText} can access their contents when you chat inside the project."},emptyFileGizmoName:{id:"xr5T2P",defaultMessage:"{gizmoName}"},moveConversationToProject:{id:"M97tb/",defaultMessage:"Move to project"},moveConversationToNamedProject:{id:"OA1Ljx",defaultMessage:"Move to {projectName}"},removeConversationFromProject:{id:"xSI3aZ",defaultMessage:"Remove from {projectName}"},moveConversation:{id:"GM4pWN",defaultMessage:"Move this conversation"},moveConversationToProjectError:{id:"mA7nfR",defaultMessage:"Failed to move the conversation to the project"},newProjectButton:{id:"2qkMU1",defaultMessage:"New project"},newProjectButtonWithNoProjects:{id:"nL/Xy7",defaultMessage:"Projects"},nameTooLong:{id:"feWA6K",defaultMessage:"Project names cannot be longer than {length} characters."},createProjectDisabledByAdmin:{id:"WosQBt",defaultMessage:"Create project is disabled by your admin"},createProjectSubmit:{id:"AHBOEO",defaultMessage:"Create project"},createProjectCancel:{id:"DxU9sm",defaultMessage:"Cancel"},projectNameLabel:{id:"aBtY0G",defaultMessage:"Project name"},projectNameDescription:{id:"NQrF3x",defaultMessage:"Give your project a name"},projectNamePlaceholder:{id:"XS7JR8",defaultMessage:"E.g. Birthday Party Planning"},newChatProjectDropdownItem:{id:"MutDla",defaultMessage:"New chat in {name}"},cancel:{id:"iz2OBQ",defaultMessage:"Cancel"},save:{id:"gTdsTU",defaultMessage:"Save"},removeFile:{id:"COAUqx",defaultMessage:"Remove file"},customInstructionsTitle:{id:"K7k/ns",defaultMessage:"Add instructions"},customInstructionsReadOnlyTitle:{id:"DC+Brl",defaultMessage:"Instructions not yet added"},customInstructionsDescription:{id:"mpKjkc",defaultMessage:"Tailor the way ChatGPT responds in this project"},customInstructionsReadOnlyDescription:{id:"lTa/PV",defaultMessage:"When a project owner or editor adds instructions, ChatGPT will tailor its responses"},filesCount:{id:"XKCsL9",defaultMessage:"{count} {count, plural, one {file} other {files}}"},interpreterOnlyLabel:{id:"/Bdw7C",defaultMessage:"File contents may not be accessible"},defaultColor:{id:"1nrbk9",defaultMessage:"Default color"},editColor:{id:"2r5j3V",defaultMessage:"Edit color"},editCustomInstructionsTitle:{id:"nedukh",defaultMessage:"Instructions"},editCustomInstructionsSubtitle:{id:"NgP+hF",defaultMessage:"How can ChatGPT best help you with this project?"},readOnlyCustomInstructionsTitle:{id:"kK/uLW",defaultMessage:"Custom instructions for ChatGPT to best help with this project"},editCustomInstructionsDescription:{id:"PNY7g9",defaultMessage:"You can ask ChatGPT to focus on certain topics, or ask it to use a certain tone or format for responses."},addInstructionsDropdownLabel:{id:"ArKRrM",defaultMessage:"Add instructions"},editInstructionsDropdownLabel:{id:"p3KE0Q",defaultMessage:"Edit instructions"},viewOnlyInstructionsDropdownLabel:{id:"wAT0FX",defaultMessage:"View instructions"},viewOnlyCustomInstructionsModalHeaderLabel:{id:"Kd53xN",defaultMessage:"View-only"},viewOnlyCustomInstructionsModalHeaderTooltip:{id:"hN4/oD",defaultMessage:"You can only chat in this project."},searchingProjectFiles:{id:"dZazsY",defaultMessage:"Searching project files"},addAction:{id:"vTkTuN",defaultMessage:"Add Action"},editActions:{id:"Lx3frs",defaultMessage:"Edit Actions"},addCustomInstructions:{id:"rEdrLS",defaultMessage:"Add custom instructions"},instructionsTooLong:{id:"hwBx62",defaultMessage:"Project instructions cannot be longer than {length} characters."},dragInstructions:{id:"yA3Jxu",defaultMessage:"Add anything"},dragAllAccepted:{id:"CJNN+O",defaultMessage:"Drop any file here to add it to the project"},dragTooManyFiles:{id:"O2Xr4P",defaultMessage:"Too many files"},unknownError:{id:"Eu2Hdz",defaultMessage:"Unknown error occurred"},dragTooManyFilesError:{id:"FJ8M/t",defaultMessage:"Error uploading: Projects can't contain more than {maxFileLimit} files"},dragTooManyFilesDescription:{id:"ZFLPRQ",defaultMessage:"Projects can't contain more than {maxFileLimit} files"},addFilesToProject:{id:"yMVX4l",defaultMessage:"Add files"},filesThatCanBeReferenced:{id:"0mQnwH",defaultMessage:"Add documents, code files, images, and more. {projectName} can access their contents when you chat inside the project."},projectFilesModalTitle:{id:"o6Ozbv",defaultMessage:"Project files"},addFilesButtonLabel:{id:"yMVX4l",defaultMessage:"Add files"},viewFilesButtonLabel:{id:"2lu9im",defaultMessage:"Files not yet added"},filesControlDescription:{id:"Y/Z2lM",defaultMessage:"Chats in this project can access file content"},projectCopyInProgressBanner:{id:"R1WXsJ",defaultMessage:"Your chats are still being copied and will appear here shortly."},noFilesReadOnlyDescription:{id:"HNxajn",defaultMessage:"When a project owner or editor adds files to this project, chats can access their contents"},projectDetailsSectionLabel:{id:"9y2Kag",defaultMessage:"Details"},hideProjectDetailsTooltip:{id:"Ar0X7X",defaultMessage:"Hide project details"},showProjectDetailsTooltip:{id:"a8ust8",defaultMessage:"Show project details"},showProjectDetailsButton:{id:"ni4Lkt",defaultMessage:"Show project details"},projectsHeading:{id:"GHFgIA",defaultMessage:"Projects"},seeMoreProjectItems:{id:"znMnZ9",defaultMessage:"See more"},emptyChatsInProjectTitle:{id:"BzycLE",defaultMessage:"Start a new chat, or drag an old one in"},chatsInProjectTitle:{id:"jgAOuP",defaultMessage:"Chats in this project"},projectSettingsSubmitButton:{id:"TayvQF",defaultMessage:"Save"},loadingProjects:{id:"oKi2Bo",defaultMessage:"Loading projects"},seeAllChats:{id:"PwRmke",defaultMessage:"See All"},newChatTitle:{id:"m3Az3N",defaultMessage:"New chat"},unableToLoadHistory:{id:"tQ7WMF",defaultMessage:"Unable to load projects"},retryLoadingHistory:{id:"IoImQ5",defaultMessage:"Retry"},showProjectDetailsDropdown:{id:"LUjGtd",defaultMessage:"Show project details"},deleteProjectModalTitle:{id:"pPgHKT",defaultMessage:"Delete project?"},deleteProjectModalButton:{id:"w2DKG5",defaultMessage:"Delete"},cancelDeleteProjectModalButton:{id:"E7RoUe",defaultMessage:"Cancel"},deleteProjectModalDescription:{id:"Vl4p9p",defaultMessage:"<bold>This will permanently delete all project files and chats.</bold> To save chats, move them to your chat list or another project before deleting."},deleteProjectDropdownButton:{id:"dD0vWg",defaultMessage:"Delete project"},deleteProjectFailedToast:{id:"KAw2h3",defaultMessage:"Failed to delete project. Please try again."},leaveProjectDropdownButton:{id:"FCEK0r",defaultMessage:"Leave project"},reportProjectButtonLabel:{id:"snorlax.project.reportButton",defaultMessage:"Report project"},leaveProjectModalTitle:{id:"VTNOvq",defaultMessage:"Leave {projectName}?"},leaveProjectModalButton:{id:"YZjX2E",defaultMessage:"Leave"},cancelLeaveProjectModalButton:{id:"56ATCt",defaultMessage:"Cancel"},leaveProjectModalDescription:{id:"80hv7n",defaultMessage:"<bold>You'll lose access to all project content, including your chats.</bold> To keep your chats, save a copy by checking the box below or move them to your chat list or another project before leaving."},leaveProjectSaveCopyLabel:{id:"emsuo1",defaultMessage:"Save a copy of my chats"},leaveProjectSaveCopyDescription:{id:"iwhK/O",defaultMessage:"A copy of this project will be made with only your chats. This can take a few minutes."},leaveProjectFailedToast:{id:"w6BO+i",defaultMessage:"Failed to leave project. Please try again."},projectInstructionsPlaceholder:{id:"w/NZvS",defaultMessage:"e.g. Respond in Spanish. Reference the latest JavaScript documentation. Keep answers short and focused."},newProjectButtonTooltip:{id:"oh2NTp",defaultMessage:"New project"},editProjectNameDropdownButton:{defaultMessage:"Rename project",id:"snorlax.edit-actions.rename-project"},hideChatsForProjectTooltip:{id:"ZjBLTY",defaultMessage:"Hide chats"},projectHelperBoxTitle:{id:"QIriII",defaultMessage:"What's a project?"},projectHelperBoxDescription:{id:"QEsg2b",defaultMessage:"Projects keep chats, files, and custom instructions in one place. Use them for ongoing work, or just to keep things tidy."},projectsNuxTooltipTitle:{id:"Ub7Cl2",defaultMessage:"Introducing projects"},projectsUpdateTooltipTitle:{id:"OyZXt4",defaultMessage:"Projects can do more"},projectsToFreeTitle:{id:"mWKZ6S",defaultMessage:"New"},projectsNuxTooltipDescription:{id:"aLohnf",defaultMessage:"Keep chats, files, and custom instructions all in one place. Ideal for organizing work or shaping big ideas."},projectsUpdateTooltipDescription:{id:"ZzivYc",defaultMessage:"Now you can run deep research and use voice mode within your projects."},projectShareButton:{id:"Sc1ypd",defaultMessage:"Share"},firstPartyProjectShareForbidden:{id:"ABFn5a",defaultMessage:"Default projects cannot be shared."},projectShareTitle:{id:"lYXaUt",defaultMessage:"Share this project"},projectShareChatTitle:{id:"YgsrLO",defaultMessage:"Share link to chat"},shareProjectExternalInviteNonMemberTooltip:{id:"snorlax.shareProjectExternalInviteNonMemberTooltip",defaultMessage:"This user is not a member of this workspace"},shareProjectExternalInviteBlockedTooltip:{id:"snorlax.shareProjectExternalInviteBlockedTooltip",defaultMessage:"You can't invite this email"},shareProjectPermissionCanEdit:{id:"snorlax.shareProjectPermissionCanEdit",defaultMessage:"Can edit"},shareProjectPermissionCanChat:{id:"snorlax.shareProjectPermissionCanChat",defaultMessage:"Can chat"},shareProjectPermissionUnknown:{id:"snorlax.shareProjectPermissionUnknown",defaultMessage:"Unknown"},shareProjectPermissionEditDescription:{id:"snorlax.shareProjectPermissionEditDescription",defaultMessage:"Chat and edit project content"},shareProjectPermissionViewDescription:{id:"snorlax.shareProjectPermissionViewDescription",defaultMessage:"Chat and view project content"},shareProjectGroupMembersCount:{id:"snorlax.shareProjectGroupMembersCount",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}"},shareProjectSearchPeopleOrGroups:{id:"snorlax.shareProjectSearchPeopleOrGroups",defaultMessage:"Search people or groups"},shareProjectSearchPeopleGroupsOrEmail:{id:"snorlax.shareProjectSearchPeopleGroupsOrEmail",defaultMessage:"Search people, groups, or enter an email"},shareProjectInviteEmailOption:{id:"snorlax.shareProjectInviteEmailOption",defaultMessage:'Invite "{email}"'},shareProjectInviteEmailPressEnter:{id:"snorlax.shareProjectInviteEmailPressEnter",defaultMessage:"Press enter to invite this email"},shareProjectEnterEmailNoOptions:{id:"snorlax.shareProjectEnterEmailNoOptions",defaultMessage:"Enter an email to invite people outside of your workspace"},shareProjectMemberAlreadyAdded:{id:"snorlax.shareProjectMemberAlreadyAdded",defaultMessage:"That person is already added"},shareOutsideWorkspaceTitle:{id:"snorlax.shareOutsideWorkspaceTitle",defaultMessage:"Invite users to workspace?"},shareOutsideWorkspaceSummarySingle:{id:"snorlax.shareOutsideWorkspaceSummarySingle",defaultMessage:"{invitee} isnt in this workspace yet. Theyll need to join before they can join this project."},shareOutsideWorkspaceSummaryMultiple:{id:"snorlax.shareOutsideWorkspaceSummaryMultiple",defaultMessage:"{firstInvitee} and {others} arent in this workspace yet. Theyll need to join before they can join this project."},shareOutsideWorkspaceSummaryFallback:{id:"snorlax.shareOutsideWorkspaceSummaryFallback",defaultMessage:"{inviteeGroup} arent in this workspace yet. Theyll need to join before they can join this project."},shareOutsideWorkspaceDefaultSummarySubject:{id:"snorlax.shareOutsideWorkspaceDefaultSummarySubject",defaultMessage:"These users"},shareOutsideWorkspaceInviteAfter:{id:"snorlax.shareOutsideWorkspaceInviteAfter",defaultMessage:"You can invite them to this project after they are added."},shareOutsideWorkspaceOthersLabel:{id:"snorlax.shareOutsideWorkspaceOthersLabel",defaultMessage:"{count, plural, one {# other} other {# others}}"},shareOutsideWorkspaceSendButton:{id:"snorlax.shareOutsideWorkspaceSendButton",defaultMessage:"{count, plural, one {Send workspace invite} other {Send workspace invites}}"},shareOutsideWorkspaceCancelButton:{id:"snorlax.shareOutsideWorkspaceCancelButton",defaultMessage:"Cancel"},shareOutsideWorkspaceSuccessTitle:{id:"snorlax.shareOutsideWorkspaceSuccessTitle",defaultMessage:"Invite sent"},shareOutsideWorkspaceSuccessBody:{id:"snorlax.shareOutsideWorkspaceSuccessBody",defaultMessage:"{count, plural, one {You have successfully invited <bold># user</bold> to {workspaceName}. You can invite them to this project after they join.} other {You have successfully invited <bold># users</bold> to {workspaceName}. You can invite them to this project after they join.}}"},shareOutsideWorkspaceSuccessButton:{id:"snorlax.shareOutsideWorkspaceSuccessButton",defaultMessage:"Done"},shareOutsideWorkspaceErrorTitle:{id:"snorlax.shareOutsideWorkspaceErrorTitle",defaultMessage:"Invite failed"},shareOutsideWorkspaceErrorBody:{id:"snorlax.shareOutsideWorkspaceErrorBody",defaultMessage:"There was an error inviting members to your workspace. Try again later."},shareProjectEmailPlaceholder:{id:"snorlax.shareProjectEmailPlaceholder",defaultMessage:"Email, separated by commas"},showChatsForProjectTooltip:{id:"FcBR2j",defaultMessage:"Show chats"},projectFileRateLimitBannerTitle:{id:"ghJIms",defaultMessage:"File limit reached"},projectFileRateLimitBannerPlusDescription:{id:"WOJ2H5",defaultMessage:"You can add up to {freeFileLimit} files on the free plan. Upgrade to plus to add {paidFileLimit} files."},projectFileRateLimitBannerProDescription:{id:"jXcJWN",defaultMessage:"You can add up to {paidFileLimit} files on the {planType} plan. Upgrade to pro to add {proFileLimit} files."},upgradeToPlus:{id:"ZO/XN9",defaultMessage:"Upgrade plan"},projectJoinModalWithCreatorTitle:{id:"q1fGPT",defaultMessage:"{projectCreator} invited you to join the project"},projectJoinModalWithoutCreatorTitle:{id:"j9rPp1",defaultMessage:"You've been invited to join the project"},membersCount:{id:"seSpmx",defaultMessage:"{count} {count, plural, one {member} other {members}}"},joinProjectButtonLabel:{id:"71Z5aG",defaultMessage:"Join project"}});function Wf(t){t&&t.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0,toastId:"copy_to_clipboard_failed_to_copy"})}function Ta(t,e,n){var o,a,i;const{navigator:s}=(i=(a=(o=n==null?void 0:n.target)==null?void 0:o.ownerDocument)==null?void 0:a.defaultView)!=null?i:window;return new Promise((l,c)=>{var d;if(!(s!=null&&s.clipboard)){Wf(e),c();return}try{if("write"in s.clipboard&&"supports"in ClipboardItem){const u=Object.entries(typeof t=="string"?{"text/plain":t}:t).map(([f,p])=>[f,typeof p=="string"?new Blob([p],{type:f}):p]);if(u.length===0){l("success");return}const m=new ClipboardItem(Object.fromEntries(u));s.clipboard.write([m]).then(()=>l("success"),()=>{Wf(e),c()})}else{const u=typeof t=="string"?t:(d=t["text/plain"])!=null?d:"";s.clipboard.writeText(u).then(()=>l("success"),()=>{Wf(e),c()})}}catch(u){Wf(e),c()}})}function fre(t,e){returnwindow.location.origin.concat(km(t,e))}async function mqe(t,e,n,s,o){await Ta(fre(t,e),n,s),o&&n.info(o,{id:"gizmo-copy-url",testId:"copy-gizmo-url-toast"})}function bP(t){return t.some(e=>e.type===Js.JIT_PLUGIN)}function pre(t){var e;return"gizmo_id"in t&&(e=t.gizmo_id)!=null?e:null}function fqe(t){var e,n,s,o,a,i,l,c,d,u,m;return{id:t.gizmo.id,instructions:t.gizmo.instructions,name:t.gizmo.display.name,description:(e=t.gizmo.display.description)!=null?e:"",emoji:(n=t.gizmo.display.emoji)!=null?n:void 0,theme:(s=t.gizmo.display.theme)!=null?s:void 0,profilePictureId:(o=t.gizmo.display.profile_pic_id)!=null?o:void 0,profilePictureUrl:(a=t.gizmo.display.profile_picture_url)!=null?a:void 0,promptStarters:(i=t.gizmo.display.prompt_starters)!=null?i:[],tools:qi(t.tools),files:qi(t.files),sharing:t.gizmo.sharing?qi(t.gizmo.sharing):{subjects:[],recipient:t.gizmo.share_recipient},trainingDisabled:(l=t.gizmo.training_disabled)!=null?l:!1,goal:(c=t.gizmo.goal)!=null?c:void 0,memoryScope:(d=t.gizmo.memory_scope)!=null?d:li.UNSET,sharingRecipient:t.gizmo.share_recipient,sharingTargets:qi(t.gizmo.sharing_targets),liveVersion:(u=t.gizmo.live_version)!=null?u:0,contextStuffingBudget:t.gizmo.context_stuffing_budget,defaultModel:(m=t.gizmo.default_model)!=null?m:void 0}}function gre(t){return t===li.GLOBAL||t===li.UNSET||t===li.PROJECT}function pqe(t){return gre(t)?li.GLOBAL:li.PROJECT_V2}function vu(t,e){return n=>n?B(w({},n),{pages:n.pages.map((s,o)=>o===0?B(w({},s),{items:[t,...s.items]}):s)}):{pages:[e],pageParams:[]}}function bu(t){return e=>e&&B(w({},e),{pages:e.pages.map(n=>B(w({},n),{items:n.items.filter(s=>s.id!==t)}))})}function hre({queryClient:t,newGizmoId:e,conversation:n,previousGizmoId:s}){const o=[],a=n.gizmo_id;return n.gizmo_id=e,o.push(()=>{n.gizmo_id=a}),e?(t.setQueryData([Ns,{gizmoId:e}],vu(n,{items:[n],cursor:null})),o.push(()=>{t.setQueryData([Ns,{gizmoId:e}],bu(n.id))})):(t.setQueryData([xo],vu(n,{items:[n],total:1,limit:eg,offset:0})),o.push(()=>{t.setQueryData([xo],bu(n.id))})),s?(t.setQueryData([Ns,{gizmoId:s}],bu(n.id)),o.push(()=>{t.setQueryData([Ns,{gizmoId:s}],vu(n,{items:[n],cursor:null}))})):(t.setQueryData([xo],bu(n.id)),o.push(()=>{t.setQueryData([xo],vu(n,{items:[n],total:1,limit:eg,offset:0}))})),qe(n.id,i=>{i.mode=uo(xk(e))}),o.push(()=>{qe(n.id,i=>{i.mode=uo(xk(a!=null?a:null))})}),()=>{o.forEach(i=>i())}}function xk(t){return t?{kind:Tt.GizmoInteraction,gizmo_id:t}:{kind:Tt.PrimaryAssistant}}class yk{constructor(e){ne(this,"conversationId");this.conversationId=e}}function SP(){const t=xt(),e=Ut();return _.useCallback(async({newGizmoId:s,conversation:o,previousGizmoId:a,optimistic:i=!0,contextScopes:l})=>{let c=()=>{};const d=()=>{a&&$s(a)&&t.invalidateQueries({queryKey:[Ns,{gizmoId:a}]}),s&&$s(s)&&t.invalidateQueries({queryKey:[Ns,{gizmoId:s}]}),(!s||!a||!$s(s)||!$s(a))&&t.invalidateQueries({queryKey:[xo]}),a&&t.invalidateQueries({queryKey:zo(t,a,!1).queryKey}),s&&t.invalidateQueries({queryKey:zo(t,s,!1).queryKey})};i&&!(o instanceof yk)&&(c=hre({queryClient:t,newGizmoId:s,conversation:o,previousGizmoId:a}));try{const u=o instanceof yk?o.conversationId:o.id,m={gizmo_id:s==null?"":s};l&&l.length>0&&(m.context_scopes=l),await pe.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:u}},requestBody:m})}catch(u){i&&(c(),d()),e.danger(Gt.moveConversationToProjectError,{toastId:"move_conversation_to_snorlax_error",hasCloseButton:!0})}i||d()},[t,e])}function lS({title:t,description:e,confirmText:n,cancelText:s,isOpen:o=!1,onClose:a,onConfirm:i,primaryButtonColor:l="primary",textCenter:c=!1,loading:d=!1,children:u}){const m=J();return r.jsx(Pt,{testId:"modal-confirm",isOpen:o,onClose:a,title:t,description:e,textCenter:c,primaryButton:r.jsx(so.Button,{title:n!=null?n:m.formatMessage(vk.confirmLabel),color:l,onClick:i,loading:d}),secondaryButton:r.jsx(so.Button,{title:s!=null?s:m.formatMessage(vk.cancelLabel),color:"secondary",onClick:a}),children:u})}const vk=be({confirmLabel:{id:"ConfirmModal.confirmLabel",defaultMessage:"Confirm"},cancelLabel:{id:"ConfirmModal.cancelLabel",defaultMessage:"Cancel"}}),Qr={messages:be({delete:{id:"jawbone.delete",defaultMessage:"Delete"},pause:{id:"jawbone.pause",defaultMessage:"Pause"},pauseFailure:{id:"jawbone.pauseAutomationFailure",defaultMessage:"Failed to pause the automation"},resume:{id:"jawbone.resume",defaultMessage:"Resume"},enableFailure:{id:"jawbone.resumeFailure",defaultMessage:"Failed to resume the automation"},notificationsTitle:{id:"jawbone.notificationsTitle",defaultMessage:"Notifications"},notificationsDesktopAndMobile:{id:"jawbone.notificationsDesktopAndMobile",defaultMessage:"Desktop & mobile"},notificationsEmail:{id:"jawbone.notificationsEmail",defaultMessage:"Email"}})};class qm{static async getAutomations(e=null,n=null){return pe.safeGet("/automations",{parameters:{query:{cursor:e,filter:n}}})}static getAutomationQueryKey(e){return["automation",e]}static async getAutomation(e){return pe.safeGet("/automation/{automation_id}",{parameters:{path:{automation_id:e}}})}static async setAutomationStatus(e,n){return pe.safePost("/automations/set_status",{requestBody:{jawbone_id:e,is_enabled:n}})}static async removeAutomation(e){return pe.safePost("/automations/remove",{requestBody:{automation_id:e}})}static async saveAutomation(e,n,s,o,a,i,l,c){return pe.safePost("/automations/save",{requestBody:{jawbone_id:e,title:n,schedule:s,is_enabled:o,prompt:a,default_timezone:i,notifications_enabled:!1,email_enabled:!1,schedule_components:l,last_run_time:c}})}static async getAutomationNextRunTimes(e,n=null,s=5){return pe.safeGet("/automation/{automation_id}/next_run_times",{parameters:{path:{automation_id:e},query:{last_run_time:n,page_size:s}}})}}const Dt=be({pageTitle:{id:"CHk10n",defaultMessage:"Tasks"},emptyStateTitle:{id:"WZwnBu",defaultMessage:"Start creating tasks"},emptyStateDescription:{id:"VGFt6n",defaultMessage:"Ask ChatGPT to do things in the future."},emptyStateTryYourOwn:{id:"ARS7Xs",defaultMessage:"Try your own"},makingAutomation:{id:"nngZkS",defaultMessage:"Creating task..."},updatingAutomation:{id:"TtVqbi",defaultMessage:"Updating task..."},cancelModalDescription:{id:"ovdvFi",defaultMessage:"Are you sure you want to cancel? Your changes will not be saved."},pauseBanner:{id:"Shy3x+",defaultMessage:"This task is paused."},editModalTitle:{id:"TATVBL",defaultMessage:"Task"},editModalName:{id:"6yXwm0",defaultMessage:"Name"},editModalInstructions:{id:"6m8uZT",defaultMessage:"Instructions"},editModalSchedule:{id:"huULIs",defaultMessage:"When"},editModalDelete:{id:"jmdwEu",defaultMessage:"Delete"},editModalCancel:{id:"CkqFyL",defaultMessage:"Cancel"},editModalSave:{id:"tw230z",defaultMessage:"Save"},editModalSaveSuccess:{id:"2bPf6t",defaultMessage:"Task saved"},editModalSaveFailure:{id:"s9XRUo",defaultMessage:"Failed to save task"},editModalMissingTaskName:{id:"Gvl61x",defaultMessage:"A task name is required."},editModalMissingInstructions:{id:"50eJR5",defaultMessage:"Instructions are required."},editModalTooFarInFuture:{id:"pRMB4Q",defaultMessage:"Tasks cant be scheduled more than 2 years in the future."},editModalInPast:{id:"og7U6X",defaultMessage:"Please choose a date in the future."},newScheduleTitle:{id:"T+KLUF",defaultMessage:"New schedule"},editScheduleTitle:{id:"foaSfJ",defaultMessage:"Edit schedule"},seeMore:{id:"e818FO",defaultMessage:"See more"},scheduleFrequencyOnce:{id:"ubLvlf",defaultMessage:"Doesn't repeat"},scheduleFrequencyDaily:{id:"fCPVKk",defaultMessage:"Daily"},scheduleFrequencyWeekly:{id:"LBJNa8",defaultMessage:"Weekly"},scheduleFrequencyMonthly:{id:"KtDbq5",defaultMessage:"Monthly"},scheduleFrequencyYearly:{id:"jPb1ga",defaultMessage:"Annually"},scheduleFrequencyCustom:{id:"aW+M+B",defaultMessage:"Custom"},scheduleNextThreeTimes:{id:"jHrFIq",defaultMessage:"Next three times"},scheduleCustomScheduleTitle:{id:"S55b0f",defaultMessage:"To update this custom schedule, just ask ChatGPT"},scheduleCustomScheduleContent:{id:"HzgAWq",defaultMessage:'For example, "do this every 3 weeks on Tuesday"'},scheduleCustomScheduleOpenChat:{id:"QIZwlV",defaultMessage:"Open chat"},pausedPill:{id:"H45WpI",defaultMessage:"Paused"},customSchedule:{id:"xBDjE1",defaultMessage:"Custom schedule"},deleteModalConfirmation:{id:"VvP/mR",defaultMessage:"Are you sure you want to delete this task? This cannot be undone."},deleteModalSuccess:{id:"yOFuly",defaultMessage:"Task deleted"},deleteScheduleModalSuccess:{id:"o9VBGa",defaultMessage:"Scheduled task deleted"},deleteModalFailure:{id:"/sJV6Y",defaultMessage:"Failed to delete task"},deleteModalTitle:{id:"ghUY4y",defaultMessage:"Delete task"},lastRunToday:{id:"32N654",defaultMessage:"Today"},lastRunYesterday:{id:"0J3FW6",defaultMessage:"Yesterday"},notificationsBannerAllow:{id:"cw4hGs",defaultMessage:"Allow"},notificationsBannerNotNow:{id:"zwEnmc",defaultMessage:"Not now"},notificationsBannerTitle:{id:"aZg1Bl",defaultMessage:"Turn on desktop notifications"},notificationsBannerContent:{id:"I6r+8F",defaultMessage:"Get notified when theres an update on your tasks."},notificationsDisabledBannerTitle:{id:"mVWjpz",defaultMessage:"Notifications are disabled in your browser."},notificationsDisabledBannerContent:{id:"wAahVE",defaultMessage:"You'll need to visit your browser preferences to allow them."},attachmentEdit:{id:"/KHfm0",defaultMessage:"Edit"},attachmentManageAll:{id:"hlEgKT",defaultMessage:"Schedules"},localizedRuntimeTomorrow:{id:"yK7y4m",defaultMessage:"Tomorrow"},scheduled:{id:"Vor1nS",defaultMessage:"Scheduled"},paused:{id:"ATWDeu",defaultMessage:"Paused"},completed:{id:"Ur4kmZ",defaultMessage:"Completed"}}),Uo={nextRunTime:t=>r.jsx(P,{id:"/OfbaB",defaultMessage:"Next run {nextRunTime}",values:{nextRunTime:t}}),runtimeDaily:t=>r.jsx(P,{id:"jawbone.runtime.daily",defaultMessage:"Daily at {localizedTime}",values:{localizedTime:t}}),runtimeWeeklyShort:t=>r.jsx(P,{id:"iTSfMl",defaultMessage:"Weekly on {localizedDayOfWeek}",values:{localizedDayOfWeek:t}}),runtimeWeekly:(t,e)=>r.jsx(P,{id:"jawbone.runtime.weekly",defaultMessage:"Weekly on {localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeMonthly:t=>r.jsx(P,{id:"jawbone.runtime.monthly",defaultMessage:"Monthly on the {monthDay, selectordinal, one {#st} two {#nd} few {#rd} other {#th}}",values:{monthDay:t}}),runtimeYearly:(t,e)=>r.jsx(P,{id:"jawbone.runtime.yearly",defaultMessage:"Annually on {localizedMonth} {day}",values:{localizedMonth:t,day:e}}),runtimeToday:t=>r.jsx(P,{id:"hStcUW",defaultMessage:"Today at {localizedTime}",values:{localizedTime:t}}),runtimeTomorrow:t=>r.jsx(P,{id:"BF9QGd",defaultMessage:"Tomorrow at {localizedTime}",values:{localizedTime:t}}),runtimeNextFiveDays:(t,e)=>r.jsx(P,{id:"UdC7R6",defaultMessage:"{localizedDayOfWeek} at {localizedTime}",values:{localizedDayOfWeek:t,localizedTime:e}}),runtimeThisYear:(t,e)=>r.jsx(P,{id:"L9Pqre",defaultMessage:"{localizedMonthDay} at {localizedTime}",values:{localizedMonthDay:t,localizedTime:e}}),runtimeOutsideThisYear:(t,e)=>r.jsx(P,{id:"XOR8K9",defaultMessage:"{localizedDate} at {localizedTime}",values:{localizedDate:t,localizedTime:e}})},x1=Nt(Cn(()=>({jawboneById:{},cursorsByFilter:{scheduled:null,paused:null,finished:null},maxBannerClientThreadId:void 0}))),Li=x1.getState,tc=x1.setState,y1={initJawbonesFromServerData:(t,e,n)=>{tc(s=>{t.forEach(o=>{s.jawboneById[o.id]=o}),s.cursorsByFilter[n]=e})},removeAutomation:t=>{tc(e=>{delete e.jawboneById[t]})},setAutomation:(t,e)=>{tc(n=>{const s=n.jawboneById[t];if(!s){n.jawboneById[t]=e;return}const o=new Date(s.updated_at),a=new Date(e.updated_at);(isNaN(o.getTime())||isNaN(a.getTime())||o<a)&&(n.jawboneById[t]=e)})},setAutomationStatus:(t,e)=>{tc(n=>{n.jawboneById[t].is_enabled=e})},clearMaxBannerClientThreadId:()=>{tc(t=>{t.maxBannerClientThreadId=void 0})},setMaxBannerClientThreadId:t=>{tc(e=>{e.maxBannerClientThreadId=t})}},v1={getAllJawbonesGrouped:(t=Li())=>vre(Object.values(t.jawboneById)),getAutomation:(t,e=Li())=>e.jawboneById[t],getCursor:(t,e=Li())=>e.cursorsByFilter[t],getHasJawbones:(t=Li())=>Object.values(t.jawboneById).length>0,getTargetTimeUTC:(t,e=Li())=>{var n;return(n=e.jawboneById[t])==null?void 0:n.target_time_utc},hasJawbones:(t=Li())=>Object.keys(t.jawboneById).length>0,getMaxBannerClientThreadId:(t=Li())=>t.maxBannerClientThreadId};function i0(t){const{isLoading:e}=vi({queryKey:["automations",t],queryFn:async({pageParam:n})=>{const s=await qm.getAutomations(n,t);return y1.initJawbonesFromServerData(s.items,s.cursor,t),s},initialPageParam:v1.getCursor(t),getNextPageParam:n=>{var s;return(s=n.cursor)!=null?s:void 0}});return{isLoading:e}}function _re(){const{isLoading:t}=i0("scheduled"),{isLoading:e}=i0("paused"),{isLoading:n}=i0("finished");return{isLoadingScheduled:t,isLoadingPaused:e,isLoadingFinished:n}}function xre({automation_id:t,onSuccess:e,onError:n}){return Bt({mutationFn:({is_enabled:s})=>qm.setAutomationStatus(t,s),onSuccess:s=>{y1.setAutomation(s.id,s),e&&e()},onError:(s,o)=>{n&&n(o.is_enabled)}})}function yre({automation_id:t,onSuccess:e,onError:n}){return Bt({mutationFn:()=>qm.removeAutomation(t),onSuccess:()=>{y1.removeAutomation(t),e&&e()},onError:()=>{n&&n()}})}function vre(t){return t.reduce((e,n)=>(n.next_run_times.length===0?e.completed.automations.push(n):n.is_enabled?e.scheduled.automations.push(n):e.paused.automations.push(n),e),{scheduled:{label:Dt.scheduled,filter:"scheduled",automations:[]},paused:{label:Dt.paused,filter:"paused",automations:[]},completed:{label:Dt.completed,filter:"finished",automations:[]}})}function CP({item:t,onClose:e,onConfirm:n}){const s=J(),o=Ut(),a=G(),i=xe(a,"733205176");let l;i?l=Dt.deleteScheduleModalSuccess:l=Dt.deleteModalSuccess;const{mutate:c,isPending:d}=yre({automation_id:t.id,onSuccess:()=>{o.success(s.formatMessage(l),{hasCloseButton:!0}),n==null||n(),e()},onError:()=>{o.danger(Dt.deleteModalFailure,{hasCloseButton:!0,toastId:"jawbone_delete_modal"})}});return r.jsx(lS,{isOpen:!0,title:s.formatMessage(Dt.deleteModalTitle),primaryButtonColor:"danger",onClose:e,confirmText:s.formatMessage(Qr.messages.delete),onConfirm:()=>{c()},loading:d,children:r.jsx("div",{className:"text-sm",children:r.jsx(P,w({},Dt.deleteModalConfirmation))})})}const bre=Object.freeze(Object.defineProperty({__proto__:null,JawboneDeleteModal:CP},Symbol.toStringTag,{value:"Module"})),lo=_.createContext({scheduleComponents:{frequency:"custom"},setFrequency:()=>{},setStartDate:()=>{},setByDay:()=>{},setByMonthDay:()=>{},setByYearDay:()=>{},setByMonth:()=>{},setTime:()=>{},startDate:void 0,nextRunTimes:[],scheduleErrors:void 0,validFrequencies:void 0,setValidFrequencies:()=>{}});function hg({initialScheduleComponents:t,initialValidFrequencies:e,nextRunTimes:n,children:s}){const[o,a]=_.useState(t),[i,l]=_.useState(void 0),[c,d]=_.useState(void 0),[u,m]=_.useState(e);return r.jsx(lo.Provider,{value:{scheduleComponents:o,setFrequency:f=>{a(B(w({},o),{frequency:f}))},setStartDate:f=>{l(f),d(Sre(f)),a(B(w({},o),{start_time:f.toISOString()}))},setByDay:f=>{a(B(w({},o),{by_day:f}))},setByMonthDay:f=>{a(B(w({},o),{by_month_day:f}))},setByYearDay:f=>{a(B(w({},o),{by_year_day:f}))},setByMonth:f=>{a(B(w({},o),{by_month:f}))},setTime:(f,p)=>{a(B(w({},o),{by_hour:f,by_minute:p,by_second:0}))},startDate:i,scheduleErrors:o.frequency!=="once"?void 0:c,nextRunTimes:n,setValidFrequencies:m,validFrequencies:u},children:s})}function Sre(t){let e=!1;const n=new Date;n.setFullYear(n.getFullYear()+2),t.getTime()>=n.getTime()&&(e=!0);let s=!1;const o=new Date;if(o.setSeconds(0,0),t.getTime()<o.getTime()&&(s=!0),e||s)return{tooFarInFuture:e,inPast:s}}function wP(t){switch(t.frequency){case"once":return t.start_time?new Date(t.start_time):void 0;case"daily":case"weekly":case"monthly":case"yearly":return t.by_hour==null||t.by_minute==null?void 0:new Date(0,0,0,t.by_hour,t.by_minute);case"custom":return}}function Cre(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setHours(t.getHours(),t.getMinutes()),e.setStartDate(n)}function wre(t,e){var o,a;const n=wP(e.scheduleComponents),s=new Date(t);s.setHours((o=n==null?void 0:n.getHours())!=null?o:0,(a=n==null?void 0:n.getMinutes())!=null?a:0),e.setStartDate(s)}function kre(t,e){const n=e.scheduleComponents.start_time?new Date(e.scheduleComponents.start_time):new Date;n.setDate(t),e.setStartDate(n)}const Mre=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),Tre=j(()=>I(()=>import("./f87olchknhsp1yyk.js").then(t=>t._),__vite__mapDeps([135,1])),{loading:t=>L(t)});function Ere({initialDate:t,onClick:e}){const n=J(),{scheduleComponents:s}=_.useContext(lo),o=_.useMemo(()=>Are(s),[s]),[a,i]=_.useState(t),c=new Intl.DateTimeFormat(n.locale,{month:"short",year:"numeric"}).format(a);return r.jsxs("div",{className:"mx-5 my-2 flex flex-col gap-0.5",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"grow text-lg font-semibold",children:c}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(bk,{onClick:()=>i(new Date(a.getFullYear(),a.getMonth()-1,1)),children:r.jsx(Tre,{className:"icon-sm"})}),r.jsx(bk,{onClick:()=>{i(new Date(a.getFullYear(),a.getMonth()+1,1))},children:r.jsx(Mre,{className:"icon-sm"})})]})]}),r.jsx(jre,{visibleDate:a,selectedDate:o,onClick:e})]})}function bk(t){const s=t,{children:e}=s,n=Me(s,["children"]);return r.jsx("button",B(w({},n),{className:"flex h-10 w-10 items-center justify-center",children:e}))}function Are(t){return t.start_time?new Date(t.start_time):void 0}function Sk(t,e){return new Date(t,e+1,0).getDate()}function Ire(t,e){return new Date(t,e,1).getDay()}function jre({visibleDate:t,selectedDate:e,onClick:n}){const s=J(),o=_.useContext(lo),a=6,i=_.useMemo(()=>{const d=t.getFullYear(),u=t.getMonth(),m=Sk(d,u),f=Ire(d,u),p=[];for(let h=f-1;h>=0;h--)p.push(new Date(d,u-1,Sk(d,u-1)-h));for(let h=1;h<=m;h++)p.push(new Date(d,u,h));const g=a*7-p.length;for(let h=1;h<=g;h++)p.push(new Date(d,u+1,h));return p},[t]),l=_.useMemo(()=>{const d=new Intl.DateTimeFormat(s.locale,{weekday:"narrow"});return Array.from({length:7},(u,m)=>d.format(new Date(1970,0,m+4)))},[s.locale]),c=new Date;return c.setHours(0,0,0,0),r.jsxs("div",{children:[r.jsx("div",{className:"flex",children:l.map((d,u)=>r.jsx("div",{className:"flex h-10 w-10 items-center justify-center text-sm font-medium",children:d},u))}),Array.from({length:a}).map((d,u)=>r.jsx("div",{className:"flex",children:i.slice(u*7,(u+1)*7).map(m=>{const f=m>=c;return r.jsx("button",{className:"h-10 w-10",onClick:()=>{f&&(wre(m,o),n())},children:r.jsx(kP,{dayNumber:m.getDate(),isSelected:!!e&&e.toDateString()===m.toDateString(),isSelectable:f})},m.getDay())})},u))]})}function kP({dayNumber:t,isSelected:e,isSelectable:n}){return r.jsx("div",{className:"h-full w-full p-1",children:r.jsx("div",{className:W("flex h-full w-full items-center justify-center rounded-full text-sm",!n&&"text-token-text-tertiary",!e&&n&&"hover:bg-token-main-surface-secondary",e&&"bg-black font-semibold text-white dark:bg-white dark:text-black"),children:t})})}function Pre({onClick:t,selectedDay:e}){const n=_.useContext(lo),s=_.useMemo(()=>{const o=[];let a=1;for(let i=0;i<5;i++){const l=[];for(let c=0;c<7&&a<=31;c++){const d=a;l.push(r.jsx("button",{className:"h-10 w-10 text-sm",onClick:()=>{kre(d,n),t(d)},children:r.jsx(kP,{dayNumber:d,isSelectable:!0,isSelected:a===e},a)},a)),a++}o.push(r.jsx("div",{className:"flex",children:l},i))}return r.jsxs("div",{children:[r.jsx("p",{className:"ms-2 mb-2 text-sm font-semibold",children:r.jsx(P,{id:"WOVV2Z",defaultMessage:"Repeat every month on the"})}),r.jsx("div",{children:o})]})},[e,t,n]);return r.jsx("div",{children:s})}const Nre=j(()=>I(()=>import("./dzlsnt42nnmwuxsc.js").then(t=>t._),__vite__mapDeps([136,1])),{loading:t=>L(t)}),Rre="flex-1",Lre="max-h-96 overflow-y-auto";function Ym({rootClassName:t,contentClassName:e,trigger:n,children:s,open:o,onOpenChange:a,onCloseAutoFocus:i}){return r.jsx("div",{className:W(t!=null?t:Rre),children:r.jsxs(K.Root,{open:o,onOpenChange:a,children:[n,r.jsx(K.Portal,{children:r.jsx(K.Content,{className:e!=null?e:Lre,side:"bottom",onCloseAutoFocus:i,children:s})})]})})}const Ore="w-full justify-start rounded-lg border-token-border-medium";function Zm({className:t,showError:e=!1,children:n}){return r.jsx(K.Trigger,{className:W(Ore,t),style:{borderColor:e?"var(--text-error)":void 0},children:r.jsxs("div",{className:"flex w-full items-center gap-1",children:[r.jsx("div",{className:"grow text-start",children:n}),r.jsx(Nre,{className:"icon-sm text-token-text-tertiary"})]})})}function cS({options:t,initialOption:e,showError:n=!1,onClick:s}){var o;return r.jsx(Ym,{trigger:r.jsx(Zm,{showError:n,children:(o=e==null?void 0:e.label)!=null?o:t[0].label}),children:r.jsx(dS,{options:t,onClick:s})})}function dS({options:t,onClick:e}){return r.jsx(r.Fragment,{children:t.map((n,s)=>r.jsx(K.Item,{onClick:()=>e==null?void 0:e(n),children:n.label},s))})}function MP({targetTimeUTC:t,useShortForm:e=!1}){return r.jsx(Cb,{fallback:void 0,name:"JawboneLocalizedRuntime",children:r.jsx(Dre,{targetTimeUTC:t,useShortForm:e})})}function Dre({targetTimeUTC:t,useShortForm:e=!1}){const n=J(),{localDate:s,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}=Fre(t,n.locale);if(s.toDateString()===o.toDateString())return Uo.runtimeToday(c);if(s.toDateString()===a.toDateString())return Uo.runtimeTomorrow(c);if(s>=i&&s<l){const d=new Intl.DateTimeFormat(n.locale,{weekday:"long"}).format(s);return Uo.runtimeNextFiveDays(d,c)}else if(s.getFullYear()===o.getFullYear()){const d=new Intl.DateTimeFormat(n.locale,{month:"long",day:"numeric"}).format(s);return e?d:Uo.runtimeThisYear(d,c)}else{const d=new Intl.DateTimeFormat(n.locale,{year:"numeric",month:"short",day:"numeric"}).format(s);return e?d:Uo.runtimeOutsideThisYear(d,c)}}function Fre(t,e){const n=new Date(t);if(isNaN(n.getTime()))throw new Error("Invalid targetTimeUTC provided: ".concat(t));const s=n,o=new Date;o.setHours(0,0,0,0);const a=new Date(o);a.setDate(a.getDate()+1);const i=new Date(o);i.setDate(i.getDate()+2);const l=new Date(o);l.setDate(o.getDate()+7);const c=new Intl.DateTimeFormat(e,{hour:"numeric",minute:s.getMinutes()===0?void 0:"numeric",hour12:!0}).format(s);return{localDate:s,today:o,tomorrow:a,dayAfterTomorrow:i,newWeek:l,localizedTime:c}}function TP(t){const e=new Date,n=e.getFullYear(),s=e.getMonth(),o=e.getDate();let a;if(a=t.match(/^(\d{1,2}):(\d{2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=parseInt(a[2],10),c=a[3].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(n,s,o,i,l)}if(a=t.match(/^([ap]m)\s?(\d{1,2}):(\d{2})$/i),a){let i=parseInt(a[2],10);const l=parseInt(a[3],10),c=a[1].toLowerCase();if(i>=1&&i<=12&&l>=0&&l<=59)return c==="pm"&&i!==12&&(i+=12),c==="am"&&i===12&&(i=0),new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})\s?([ap]m)$/i),a){let i=parseInt(a[1],10);const l=a[2].toLowerCase();if(i===12&&l==="am")return i=0,new Date(n,s,o,i,0);if(i>=1&&i<=11&&l==="pm")return i+=12,new Date(n,s,o,i,0);if(i>=1&&i<=12)return new Date(n,s,o,i,0)}if(a=t.match(/^(\d{1,2}):(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})(\d{2})$/),a){const i=parseInt(a[1],10),l=parseInt(a[2],10);if(i>=0&&i<=23&&l>=0&&l<=59)return new Date(n,s,o,i,l)}if(a=t.match(/^(\d{1,2})$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(n,s,o,i,0)}if(a=t.match(/^(\d{1,2}):$/),a){const i=parseInt(a[1],10);if(i>=0&&i<=23)return new Date(n,s,o,i,0)}}function Bre(t){return TP(t)}function EP(t){return t?t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!(new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h23"||new Intl.DateTimeFormat().resolvedOptions().hourCycle==="h24")}):""}function AP(t){if(!t)return"";const e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0");return"".concat(e,":").concat(n)}function IP(t,e){const n=new Date(0,0,0,t,e);return EP(n)}function Ure(t,e){return"".concat(String(t).padStart(2,"0"),":").concat(String(e).padStart(2,"0"))}function Ck(t){const[e,n]=t.split(":"),s=Number.parseInt(e!=null?e:"",10),o=Number.parseInt(n!=null?n:"",10);return Number.isNaN(s)||Number.isNaN(o)?"":IP(s,o)}function wk(t){const e=TP(t);if(e)return AP(e)}function Km(){const t=_.useContext(lo),[e,n]=_.useState(!1),[s,o]=_.useState(!0),a=_.useRef(null),i=_.useRef(null),l=_.useMemo(()=>Vre(),[]),c=wP(t.scheduleComponents),d=_.useMemo(()=>c!=null?c:new Date(new Date().setHours(14,0,0,0)),[c]);_.useEffect(()=>{c||jP(d,t)},[c,d,t]);const u=EP(d),m=AP(d),[f,p]=_.useState(!0),g=_.useRef(m),h=_.useRef(u),x=_.useRef(h.current);_.useEffect(()=>{const v=setTimeout(()=>{e&&a.current&&a.current.select()},0);return()=>clearTimeout(v)},[e]),_.useEffect(()=>{const v=setTimeout(()=>{if(e&&i.current){const S=hA(l,C=>C.value===g.current||C.value===Gre(g.current));if(S!==-1&&i.current){const C=i.current.children[S];C&&C.scrollIntoView({block:"center"})}}},0);return()=>clearTimeout(v)},[e,g,l]);const y=v=>{x.current=v;const S=wk(v),C=S!==void 0;p(C),C&&S&&(g.current=S,h.current=Ck(S))},b=()=>{const v=wk(x.current);v?(g.current=v,h.current=Ck(v),x.current=h.current,l0(v,t)):(x.current=h.current,l0(g.current,t)),p(!0),a.current&&(a.current.value=h.current)};return r.jsx(Ym,{trigger:r.jsx(Zm,{showError:!f||!!t.scheduleErrors,children:r.jsx("div",{className:"flex w-full items-center",children:r.jsx("textarea",{className:"m-0 w-full resize-none border-none bg-transparent p-0 text-sm",defaultValue:h.current,ref:a,rows:1,wrap:"off",onBlur:()=>{b()},onChange:v=>{const S=v.target.value;y(S)},onKeyDown:v=>{v.key===" "&&v.stopPropagation()}})})}),open:e,onOpenChange:v=>{n(v),v?o(!0):b()},onCloseAutoFocus:v=>{v.preventDefault(),a.current&&a.current.select()},children:r.jsx("ul",{ref:i,children:r.jsx(dS,{options:l,onClick:v=>{g.current=v.value,h.current=v.label,x.current=v.label,l0(v.value,t),p(!0),n(!1),a.current&&(a.current.value=v.label,a.current.select())}})})})}function Vre(){return Array.from({length:96},(e,n)=>{const s=Math.floor(n/4),o=n%4*15,a=Ure(s,o);return{label:IP(s,o),value:a}})}function Gre(t){if(!t)return t;const[e]=t.split(":");return e?"".concat(e.padStart(2,"0"),":00"):t}function jP(t,e){if(t)switch(e.scheduleComponents.frequency){case"once":{Cre(t,e);break}case"daily":case"weekly":case"monthly":case"yearly":{e.setTime(t.getHours(),t.getMinutes());break}}}function l0(t,e){const n=Bre(t);jP(n,e)}const $re=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),Hre=j(()=>I(()=>import("./dzlsnt42nnmwuxsc.js").then(t=>t._),__vite__mapDeps([136,1])),{loading:t=>L(t)});function Fd(){const t=J(),{scheduleComponents:e,scheduleErrors:n,setFrequency:s,validFrequencies:o}=_.useContext(lo),a=_.useMemo(()=>[{label:t.formatMessage(Dt.scheduleFrequencyOnce),value:"once"},{label:t.formatMessage(Dt.scheduleFrequencyDaily),value:"daily"},{label:t.formatMessage(Dt.scheduleFrequencyWeekly),value:"weekly"},{label:t.formatMessage(Dt.scheduleFrequencyMonthly),value:"monthly"},{label:t.formatMessage(Dt.scheduleFrequencyYearly),value:"yearly"},{label:t.formatMessage(Dt.scheduleFrequencyCustom),value:"custom"}].filter(c=>o===void 0||(o==null?void 0:o.includes(c.value))),[t,o]),i=a.find(l=>l.value===e.frequency);return _.useEffect(()=>{i||s(a[0].value)},[i,a,s]),r.jsx(cS,{options:a,initialOption:i,onClick:l=>s(l.value),showError:!!n})}function Wre(){const t=J(),{scheduleComponents:e,scheduleErrors:n,setByDay:s}=_.useContext(lo),o=Array.from({length:7},(c,d)=>new Intl.DateTimeFormat(t.locale,{weekday:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2021,2,d+1)))),a=["MO","TU","WE","TH","FR","SA","SU"],i=o.map((c,d)=>({label:c,value:a[d]})),l=i.find(c=>c.value===e.by_day);return _.useEffect(()=>{l||s(i[0].value)},[l,i,s]),r.jsx(cS,{options:i,initialOption:l,onClick:c=>s(c.value),showError:!!n})}function zre({useShortForm:t=!1}){var c;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=_.useContext(lo),o=Array.from({length:31},(d,u)=>({label:(u+1).toString(),value:u+1})),a=(d,u=new Date().getFullYear())=>new Date(u,d,0).getDate(),i=o.slice(0,a((c=e.by_month)!=null?c:1)),l=i.find(d=>d.value===e.by_month_day);return _.useEffect(()=>{l||s(i[0].value)},[l,i,s]),r.jsx(Ym,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(Zm,{className:t?"w-[75px]":void 0,showError:!!n,children:l==null?void 0:l.label}),children:r.jsx(dS,{options:i,onClick:d=>s(d.value)})})}function qre({useShortForm:t=!1}){var l;const{scheduleComponents:e,scheduleErrors:n,setByMonthDay:s}=_.useContext(lo),o=J(),a=(l=e.by_month_day)!=null?l:1,i=o.formatMessage(aie[a-1]);return r.jsx(Ym,{rootClassName:t?"flex-none":void 0,trigger:r.jsx(Zm,{className:t?"w-[75px]":void 0,showError:!!n,children:i}),children:r.jsx("div",{className:"m-4",children:r.jsx(Pre,{onClick:s,selectedDay:a})})})}function Yre(){const t=J(),{scheduleComponents:e,scheduleErrors:n,setByMonth:s}=_.useContext(lo),o=new Intl.DateTimeFormat(t.locale,{month:"long"}),a=Array.from({length:12},(l,c)=>({label:o.format(new Date(0,c)),value:c+1})),i=a.find(l=>l.value===e.by_month);return _.useEffect(()=>{i||s(a[0].value)},[i,a,s]),r.jsx(cS,{options:a,initialOption:i,onClick:l=>s(l.value),showError:!!n})}function Zre(){const t=J(),{scheduleComponents:e,scheduleErrors:n,setStartDate:s}=_.useContext(lo),[o,a]=_.useState(!1);_.useEffect(()=>{e.start_time||s(new Date)},[e.start_time,s]);const i=e.start_time?new Date(e.start_time):new Date,l=new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"long",day:"numeric"});return r.jsx(Ym,{trigger:r.jsx(Zm,{showError:!!n,children:l.format(i)}),contentClassName:"min-w-[224px]",open:o,onOpenChange:a,children:r.jsx(Ere,{initialDate:i,onClick:()=>a(!1)})})}function Kre(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fd,{}),r.jsx(Zre,{}),r.jsx(Km,{})]})}function Qre(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fd,{}),r.jsx(Km,{})]})}function Jre(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fd,{}),r.jsx(Wre,{}),r.jsx(Km,{})]})}function Xre(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fd,{}),r.jsx(qre,{}),r.jsx(Km,{})]})}function eie(){return r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Fd,{}),r.jsx(Yre,{}),r.jsx(zre,{useShortForm:!0}),r.jsx(Km,{})]})}function tie({automationId:t,conversationId:e,onModalClose:n}){return r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Fd,{}),r.jsx(nie,{automationId:t}),r.jsx(sie,{conversationId:e,onModalClose:n})]})}function nie({automationId:t}){var i;const{data:e,fetchNextPage:n,hasNextPage:s,isFetchingNextPage:o}=vi({queryKey:["automation-next-run-times",t],queryFn:({pageParam:l})=>qm.getAutomationNextRunTimes(t,l),getNextPageParam:l=>l.has_more?l.next_run_times[l.next_run_times.length-1]:void 0,initialPageParam:null}),a=_.useRef(null);return _.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e]),r.jsx("div",{className:"bg-token-main-surface-secondary rounded-lg p-3",children:r.jsxs("div",{ref:a,className:"flex h-full max-h-52 flex-col gap-3 overflow-y-auto text-sm",children:[(i=e==null?void 0:e.pages)==null?void 0:i.flatMap(l=>l.next_run_times).map((l,c)=>r.jsx("div",{children:r.jsx(MP,{targetTimeUTC:l})},c)),s&&r.jsx("button",{onClick:()=>n(),disabled:o,children:r.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium",children:[r.jsx(P,{id:"qL17GV",defaultMessage:"See more"}),r.jsx(Hre,{className:"icon"})]})})]})})}function sie({conversationId:t,onModalClose:e}){const n=at();return t?r.jsxs("div",{className:"border-token-border-medium flex gap-3 rounded-lg border p-4",children:[r.jsx($re,{}),r.jsxs("div",{className:"flex grow flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:r.jsx(P,w({},Dt.scheduleCustomScheduleTitle))}),r.jsx("span",{className:"text-token-text-secondary text-sm",children:r.jsx(P,w({},Dt.scheduleCustomScheduleContent))})]}),r.jsx(he,{onClick:()=>{e(),n(pa(t))},children:r.jsx(P,w({},Dt.scheduleCustomScheduleOpenChat))})]}):null}function oie({automationId:t,conversationId:e,onModalClose:n}){const{scheduleComponents:s}=_.useContext(lo);switch(s.frequency){case"once":return r.jsx(Kre,{});case"daily":return r.jsx(Qre,{});case"weekly":return r.jsx(Jre,{});case"monthly":return r.jsx(Xre,{});case"yearly":return r.jsx(eie,{});case"custom":return t?r.jsx(tie,{automationId:t,conversationId:e,onModalClose:n}):null}}const aie=new Array(31).fill(0).map((t,e)=>e+1).map(t=>{const e=t%10===1&&t!==11?"".concat(t,"st"):t===2||t===22?"".concat(t,"nd"):t===3||t===23?"".concat(t,"rd"):"".concat(t,"th");return{id:"date-ordinal-".concat(t),description:"Brief translation of a number's ordinal abbreviation, i.e. #1 = 1st (the 'st'), #2 = 2nd (the 'nd')",defaultMessage:e}});function rie(t){return!!t.id}const iie=j(()=>I(()=>import("./di5elmieu5gkw656.js").then(t=>t._),__vite__mapDeps([138,1])),{loading:t=>L(t)}),lie=j(()=>I(()=>import("./mpv78j7w75btco0v.js").then(t=>t._),__vite__mapDeps([46,1])),{loading:t=>L(t)});function cie({onClose:t,onConfirm:e}){const n=J();return r.jsx(lS,{isOpen:!0,title:n.formatMessage(Dt.editModalCancel),primaryButtonColor:"danger",onClose:()=>{t()},onConfirm:()=>{e()},children:r.jsx("div",{className:"text-sm",children:r.jsx(P,w({},Dt.cancelModalDescription))})})}function die({onClick:t}){return r.jsxs("div",{className:"border-token-border-medium flex items-center justify-between rounded-2xl border p-4",children:[r.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium",children:[r.jsx(iie,{className:"icon-lg"}),r.jsx(P,w({},Dt.pauseBanner))]}),r.jsx("div",{children:r.jsx(he,{onClick:t,children:r.jsx(P,w({},Qr.messages.resume))})})]})}function uS({item:t,source:e,onClose:n,onSave:s=qm.saveAutomation}){const o=J(),a=Ut();_.useEffect(()=>{Ee.count(Ae.JAWBONE,"jawbone_edit_modal.open")},[]);const{scheduleComponents:i,scheduleErrors:l}=_.useContext(lo),[c,d]=_.useState(!0),[u,m]=_.useState(!1),[f,p]=_.useState(!1),[g,h]=_.useState(t.title),[x,y]=_.useState(t.prompt),[b,v]=_.useState(t.is_enabled),S=_.useRef(null);_.useEffect(()=>{const O=S.current;if(!O)return;O.style.height="auto";const D=300;O.style.height="".concat(Math.min(O.scrollHeight,D),"px")},[x]);const C=!!t.id;_.useEffect(()=>{l!=null&&l.tooFarInFuture||l!=null&&l.inPast?d(!1):d(g.length>0&&x.length>0);const O=g!==t.title||x!==t.prompt||b!==t.is_enabled||!Sd(i,t.schedule_components);m(O)},[l==null?void 0:l.tooFarInFuture,l==null?void 0:l.inPast,g,x,b,t,i]);const{mutate:k}=Bt({mutationFn:()=>{var O;return s((O=t.id)!=null?O:null,g,t.schedule,b,x,t.schedule_components.start_time!==i.start_time?Intl.DateTimeFormat().resolvedOptions().timeZone:t.default_timezone,i,t.last_run_time)},onSuccess:O=>{O&&y1.setAutomation(O.id,O),n(o.formatMessage(Dt.editModalSaveSuccess))},onError:()=>{a.danger(Dt.editModalSaveFailure,{hasCloseButton:!0,toastId:"jawbone_edit_modal"}),d(!0),p(!1)}}),[M,T]=_.useState(!1),[E,A]=_.useState(!1),N=G();xe(N,"156153730");const R=at();return r.jsxs(r.Fragment,{children:[r.jsx(Pt,{testId:"modal-jawbone-edit",className:"min-w-[680px] text-sm",isOpen:!0,onClose:()=>{if(u){A(!0);return}n()},showCloseButton:!0,title:C?r.jsx(P,w({},Dt.editScheduleTitle)):r.jsx(P,w({},Dt.newScheduleTitle)),headerAccessory:e==="tasks"&&r.jsx(he,{icon:lie,color:"secondary",onClick:()=>{R(pa(t.conversation_id))},children:r.jsx(P,{id:"KkyshF",defaultMessage:"View chat"})}),type:"success",children:r.jsxs("div",{className:"flex flex-col gap-6",children:[!b&&r.jsx(die,{onClick:()=>{v(!0)}}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(P,w({},Dt.editModalName))}),r.jsx("textarea",{className:W("border-token-border-medium bg-token-main-surface-primary w-full resize-none rounded-lg text-sm",g.length===0&&"border-token-text-error focus:border-token-text-error"),rows:1,value:g,onChange:O=>h(O.target.value),placeholder:o.formatMessage({id:"GB3SVK",defaultMessage:"Summarize AI news"})}),g.length===0&&r.jsx(zf,{children:r.jsx(P,w({},Dt.editModalMissingTaskName))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(P,w({},Dt.editModalInstructions))}),r.jsx("textarea",{ref:S,className:W("border-token-border-medium bg-token-main-surface-primary w-full resize-none overflow-y-auto rounded-lg text-sm",x.length===0&&"border-token-text-error focus:border-token-text-error"),rows:3,value:x,onChange:O=>y(O.target.value),placeholder:o.formatMessage({id:"XDXPIp",defaultMessage:"Send a summary of the latest news in AI, focusing on especially surprising stories."})}),x.length===0&&r.jsx(zf,{children:r.jsx(P,w({},Dt.editModalMissingInstructions))})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-medium",children:r.jsx(P,w({},Dt.editModalSchedule))}),r.jsx("div",{children:r.jsx(oie,{automationId:t.id,conversationId:t.conversation_id,onModalClose:n})}),r.jsxs("div",{children:[(l==null?void 0:l.tooFarInFuture)&&r.jsx(zf,{children:r.jsx(P,w({},Dt.editModalTooFarInFuture))}),(l==null?void 0:l.inPast)&&r.jsx(zf,{children:r.jsx(P,w({},Dt.editModalInPast))})]}),!1]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{className:"flex gap-2",children:[b&&C&&r.jsx(he,{color:"secondary",onClick:()=>{v(!1)},children:r.jsx(P,w({},Qr.messages.pause))}),C&&r.jsx(he,{color:"danger-outline",onClick:()=>{T(!0)},children:r.jsx(P,w({},Dt.editModalDelete))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{color:"secondary",onClick:()=>{if(u){A(!0);return}n()},children:r.jsx(P,w({},Dt.editModalCancel))}),r.jsx(he,{disabled:!c,loading:f,color:"primary",onClick:()=>{p(!0),k()},children:r.jsx(P,w({},Dt.editModalSave))})]})]})]})}),E&&r.jsx(cie,{onClose:()=>A(!1),onConfirm:()=>n()}),M&&rie(t)&&r.jsx(CP,{item:t,onClose:()=>T(!1),onConfirm:()=>{T(!1),n()}})]})}function zf({children:t}){return r.jsx("div",{className:"text-token-text-error text-sm font-medium",children:t})}function uie({dateString:t}){switch(mie(t)){case"today":return r.jsx(P,w({},Dt.lastRunToday));case"yesterday":return r.jsx(P,w({},Dt.lastRunYesterday));case"weekday":return new Date(t).toLocaleDateString(void 0,{weekday:"long"});case"full":return new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}}function mie(t){const e=new Date(t),s=pb(new Date,e);return s===0?"today":s===1?"yesterday":s<=7?"weekday":"full"}function fie({item:t}){const{is_enabled:e,target_time_utc:n}=t,s=_.useMemo(()=>{if(!e)return r.jsx(P,w({},Dt.pausedPill));if(n){const o=new Date,a=new Date(n);if(o.getTime()-a.getTime()>=6e4)return r.jsx(P,{id:"ppsH3r",defaultMessage:"Delayed"})}return null},[e,n]);return s?r.jsxs(r.Fragment,{children:[" ",r.jsx("span",{className:"bg-token-main-surface-tertiary text-token-text-secondary rounded-[0.25rem] px-1 py-[1px] text-xs font-medium",children:s})]}):null}function pie({item:t,useShortForm:e=!1}){if(t.next_run_times.length===0&&t.last_run_time)return r.jsx(uie,{dateString:t.last_run_time});const n=t.schedule_components;switch(n.frequency){case"once":return r.jsx(hie,{automationId:t.id,useShortForm:e});case"daily":return r.jsx(_ie,{scheduleComponents:n,useShortForm:!1});case"weekly":return r.jsx(xie,{scheduleComponents:n,useShortForm:e});case"monthly":return r.jsx(yie,{scheduleComponents:n});case"yearly":return r.jsx(vie,{scheduleComponents:n});case"custom":{if(t.next_run_times.length===0)return r.jsx("div",{children:r.jsx(P,w({},Dt.customSchedule))});const o=new Date(t.next_run_times[0]).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return r.jsx("div",{children:Uo.nextRunTime(o)})}}}function gie({item:t}){return r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(pie,{item:t}),r.jsx(fie,{item:t})]})}function hie({automationId:t,useShortForm:e=!1}){const n=v1.getTargetTimeUTC(t);return n?r.jsx(MP,{targetTimeUTC:n,useShortForm:e}):null}function _ie({scheduleComponents:t,useShortForm:e=!1}){var o,a;const n=J(),s=PP((o=t.by_hour)!=null?o:0,(a=t.by_minute)!=null?a:0,n.locale);return e?r.jsx(P,w({},Dt.scheduleFrequencyDaily)):Uo.runtimeDaily(s)}function xie({scheduleComponents:t,useShortForm:e=!1}){var a,i;const n=J(),s=_.useMemo(()=>{var d;const l=new Date,c=bie((d=t.by_day)!=null?d:"")-l.getDay();return l.setDate(l.getDate()+(c>=0?c:c+7)),new Intl.DateTimeFormat(n.locale,{weekday:"long"}).format(l)},[t.by_day,n.locale]),o=PP((a=t.by_hour)!=null?a:0,(i=t.by_minute)!=null?i:0,n.locale);return e?Uo.runtimeWeeklyShort(s):Uo.runtimeWeekly(s,o)}function yie({scheduleComponents:t}){var e;return Uo.runtimeMonthly(String((e=t.by_month_day)!=null?e:1))}function vie({scheduleComponents:t}){var s;const e=J(),n=_.useMemo(()=>{var a;const o=new Date;return o.setMonth(((a=t.by_month)!=null?a:1)-1),new Intl.DateTimeFormat(e.locale,{month:"long"}).format(o)},[t.by_month,e.locale]);return Uo.runtimeYearly(n,(s=t.by_month_day)!=null?s:1)}function PP(t,e,n){return _.useMemo(()=>{const o=new Date;return o.setHours(t),o.setMinutes(e),new Intl.DateTimeFormat(n,{hour:"numeric",minute:e===0?void 0:"numeric",hour12:!0}).format(o)},[t,e,n])}function bie(t){switch(t){case"SU":return 0;case"MO":return 1;case"TU":return 2;case"WE":return 3;case"TH":return 4;case"FR":return 5;case"SA":return 6;default:return-1}}function Sie(){return"/tasks"}const Cie=j(()=>I(()=>import("./ceivmd4pm4umbvdn.js").then(t=>t._),__vite__mapDeps([139,1])),{loading:t=>L(t)}),wie=j(()=>I(()=>import("./kn7epy984tqokc8q.js").then(t=>t._),__vite__mapDeps([140,1])),{loading:t=>L(t)}),kie=j(()=>I(()=>import("./di5elmieu5gkw656.js").then(t=>t._),__vite__mapDeps([138,1])),{loading:t=>L(t)}),Mie=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)}),Tie=j(()=>I(()=>Promise.resolve().then(()=>pf),void 0),{loading:t=>L(t)}),Eie=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)}),Aie=j(()=>I(()=>Promise.resolve().then(()=>bre),void 0).then(t=>t.JawboneDeleteModal));function gqe(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(NP,{children:r.jsxs("div",{className:"flex h-full w-full flex-col justify-center py-4 ps-5 pe-3",children:[r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary h-4 w-1/2 rounded-sm"}),r.jsx("div",{className:"loading-results-shimmer bg-token-text-tertiary mt-2.5 h-4 w-2/5 rounded-sm"})]})}),t[0]=e):e=t[0],e}function NP(t){"use forget";const e=H.c(5),{children:n,fullWidth:s}=t,o=s?"w-full":"inline-block max-w-[360px] min-w-[320px]";let a;e[0]!==o?(a=W("border-token-border-default relative my-2 overflow-hidden rounded-xl border",o),e[0]=o,e[1]=a):a=e[1];let i;return e[2]!==n||e[3]!==a?(i=r.jsx("div",{className:a,children:n}),e[2]=n,e[3]=a,e[4]=i):i=e[4],i}function Iie(t){"use forget";const e=H.c(5),{automation:n,onSave:s,overrideManageAllAction:o,fullWidth:a}=t,i=a===void 0?!1:a;if(!n)return null;let l;return e[0]!==n||e[1]!==i||e[2]!==s||e[3]!==o?(l=r.jsx(jie,{item:n,onSave:s,overrideManageAllAction:o,fullWidth:i}),e[0]=n,e[1]=i,e[2]=s,e[3]=o,e[4]=l):l=e[4],l}function jie(t){"use forget";const e=H.c(40),{item:n,onSave:s,overrideManageAllAction:o,fullWidth:a}=t,i=Ut();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[0]=l):l=e[0],_.useEffect(Pie,l);const{id:c,is_enabled:d,title:u}=n,[m,f]=_.useState(!1),p=_.useRef(null);let g;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{if(p.current){const V=p.current.clientHeight,z=parseFloat(getComputedStyle(p.current).lineHeight);f(V>z)}},e[1]=g):g=e[1];let h;e[2]!==u?(h=[u],e[2]=u,e[3]=h):h=e[3],_.useEffect(g,h);const x=n.next_run_times.length===0,[y,b]=_.useState(!1);let v;e[4]===Symbol.for("react.memo_cache_sentinel")?(v=()=>b(!0),e[4]=v):v=e[4];const S=m?"items-start":"items-center";let C;e[5]!==S?(C=W("flex h-full w-full cursor-pointer justify-between py-4 ps-5 pe-3",S),e[5]=S,e[6]=C):C=e[6];let k;e[7]!==u?(k=r.jsx("div",{ref:p,className:"line-clamp-2 text-start font-medium",children:u}),e[7]=u,e[8]=k):k=e[8];let M;e[9]!==n?(M=r.jsx(gie,{item:n}),e[9]=n,e[10]=M):M=e[10];let T;e[11]!==n.next_run_times||e[12]!==n.schedule_components||e[13]!==M?(T=r.jsx("div",{className:"text-token-text-secondary text-start",children:r.jsx(hg,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:M})}),e[11]=n.next_run_times,e[12]=n.schedule_components,e[13]=M,e[14]=T):T=e[14];let E;e[15]!==k||e[16]!==T?(E=r.jsxs("div",{className:"flex flex-col gap-0.5 pe-8 text-sm",children:[k,T]}),e[15]=k,e[16]=T,e[17]=E):E=e[17];let A;e[18]!==E||e[19]!==C?(A=r.jsx("button",{className:"hover:bg-token-main-surface-secondary h-full w-full",onClick:v,children:r.jsx("div",{className:C,children:E})}),e[18]=E,e[19]=C,e[20]=A):A=e[20];let N;e[21]===Symbol.for("react.memo_cache_sentinel")?(N=()=>b(!0),e[21]=N):N=e[21];let R;e[22]!==c||e[23]!==x||e[24]!==d||e[25]!==n||e[26]!==o?(R=r.jsx("div",{className:"absolute end-3 top-1/2 -translate-y-1/2 transform",children:r.jsx("div",{className:"ms-4 flex",children:r.jsx(Nie,{automation_id:c,is_enabled:d,item:n,isFinished:x,onEditModalOpen:N,overrideManageAllAction:o})})}),e[22]=c,e[23]=x,e[24]=d,e[25]=n,e[26]=o,e[27]=R):R=e[27];let O;e[28]!==a||e[29]!==A||e[30]!==R?(O=r.jsxs(NP,{fullWidth:a,children:[A,R]}),e[28]=a,e[29]=A,e[30]=R,e[31]=O):O=e[31];let D;e[32]!==y||e[33]!==n||e[34]!==s||e[35]!==i?(D=y&&r.jsx(hg,{initialScheduleComponents:n.schedule_components,nextRunTimes:n.next_run_times,children:r.jsx(uS,{item:n,source:"chat",onSave:s,onClose:V=>{V&&i.success(V,{hasCloseButton:!0}),b(!1)}})}),e[32]=y,e[33]=n,e[34]=s,e[35]=i,e[36]=D):D=e[36];let F;return e[37]!==O||e[38]!==D?(F=r.jsxs(r.Fragment,{children:[O,D]}),e[37]=O,e[38]=D,e[39]=F):F=e[39],F}function Pie(){Ee.count(Ae.JAWBONE,"jawbone_message_attachment.open")}function Nie(t){"use forget";const e=H.c(34),{automation_id:n,is_enabled:s,item:o,isFinished:a,onEditModalOpen:i,overrideManageAllAction:l}=t,c=G(),d=J(),u=at(),m=Ut(),[f,p]=_.useState(s);let g,h;e[0]!==s?(g=()=>p(s),h=[s],e[0]=s,e[1]=g,e[2]=h):(g=e[1],h=e[2]),_.useEffect(g,h);let x;e[3]!==m?(x=O=>{m.danger(O?Qr.messages.enableFailure:Qr.messages.pauseFailure,{hasCloseButton:!0,toastId:"toggle_automation_status"}),p(!O)},e[3]=m,e[4]=x):x=e[4];let y;e[5]!==n||e[6]!==x?(y={automation_id:n,onError:x},e[5]=n,e[6]=x,e[7]=y):y=e[7];const{mutate:b,isPending:v}=xre(y);let S;e[8]!==d||e[9]!==u||e[10]!==l?(S=function(){return l===null?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),l!=null?l:r.jsx(K.Item,{icon:Eie,label:d.formatMessage(Dt.attachmentManageAll),onClick:()=>{u(Sie())}})]})},e[8]=d,e[9]=u,e[10]=l,e[11]=S):S=e[11];const C=S;let k;e[12]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx("button",{className:"hover:bg-token-surface-hover focus-visible:bg-token-surface-hover radix-state-open:bg-token-surface-hover flex h-9 w-9 items-center justify-center rounded-lg focus-visible:outline-0",children:r.jsx(Mie,{className:"icon"})}),e[12]=k):k=e[12];let M;e[13]!==f||e[14]!==d||e[15]!==a||e[16]!==v||e[17]!==i||e[18]!==b?(M=!a&&r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:Tie,label:d.formatMessage(Dt.attachmentEdit),onClick:i}),r.jsx(K.Item,{icon:f?kie:wie,label:d.formatMessage(f?Qr.messages.pause:Qr.messages.resume),onClick:()=>{const O=!f;p(O),b({is_enabled:O})},disabled:v})]}),e[13]=f,e[14]=d,e[15]=a,e[16]=v,e[17]=i,e[18]=b,e[19]=M):M=e[19];let T;e[20]!==d?(T=d.formatMessage(Qr.messages.delete),e[20]=d,e[21]=T):T=e[21];let E;e[22]!==c||e[23]!==o?(E=()=>{gt(c,Aie,{item:o})},e[22]=c,e[23]=o,e[24]=E):E=e[24];let A;e[25]!==T||e[26]!==E?(A=r.jsx(K.Item,{icon:Cie,color:"danger",label:T,onClick:E}),e[25]=T,e[26]=E,e[27]=A):A=e[27];let N;e[28]!==C?(N=C(),e[28]=C,e[29]=N):N=e[29];let R;return e[30]!==A||e[31]!==N||e[32]!==M?(R=r.jsxs(Si,{size:"auto",alignOffset:-8,sideOffset:4,triggerButton:k,children:[M,A,N]}),e[30]=A,e[31]=N,e[32]=M,e[33]=R):R=e[33],R}function Rie(t){return["odyssey_aut",t!=null?t:""]}function b1(t){const{data:e}=lt({queryKey:Rie(t),queryFn:()=>pe.safeGet("/agent_automation/{automation_id}",{parameters:{path:{automation_id:t!=null?t:""}}}),enabled:!!t});return e!=null?e:null}function RP(){return["odyssey_aut"]}function Lie(t){const{isLoading:e,data:n}=Oie(t),s=_.useMemo(()=>{var u;return(u=n==null?void 0:n.items.reduce((m,f)=>(m[f.id]=f,m),{}))!=null?u:void 0},[n]),o=_.useCallback(u=>u.map(m=>{const f=s==null?void 0:s[m.id];return f?w(w({},f),m):null}).filter(Boolean),[s]),{isLoadingScheduled:a,isLoadingPaused:i,isLoadingFinished:l}=_re(),c=x1(v1.getAllJawbonesGrouped),d=e||a||i||l;return _.useMemo(()=>{var u,m,f;return{isLoading:d,scheduledAutomations:o((u=c.scheduled.automations)!=null?u:[]),pausedAutomations:o((m=c.paused.automations)!=null?m:[]),completedAutomations:o((f=c.completed.automations)!=null?f:[])}},[d,c,o])}function Oie({enabled:t,staleTimeMs:e=1e3*5*60}){return lt({enabled:t,queryKey:RP(),queryFn:()=>pe.safeGet("/agent_automations"),refetchOnMount:"always",refetchOnWindowFocus:"always",staleTime:e})}function hqe(t,e=null){const n=_.useRef({}),[s,o]=_.useState({});return _.useEffect(()=>{async function a(l){const c=await pe.safeGet("/agent_automation/{automation_id}/conversations",{parameters:{path:{automation_id:l}}});o(d=>B(w({},d),{[l]:c.items}))}async function i(l,c){const d=await pe.safePost("/conversations/batch",{requestBody:{conversation_ids:[c]}});o(u=>B(w({},u),{[l]:d}))}for(const l of t)l.id in n.current||(l.job_type==="agent"||l.source_conversation_id&&l.source_message_id?n.current[l.id]=a(l.id):l.conversation_id&&(n.current[l.id]=i(l.id,l.conversation_id)))},[t]),_.useMemo(()=>{let a=[];return t.forEach(i=>{const l=s[i.id];if(l)for(const c of l)a.push({automation:i,conversation:c})}),e&&(a=a.filter(i=>{var c;return new Date((c=i.conversation.update_time)!=null?c:0).getTime()>e.getTime()})),a.sort((i,l)=>{var u,m;const c=new Date((u=i.conversation.update_time)!=null?u:0).getTime();return new Date((m=l.conversation.update_time)!=null?m:0).getTime()-c})},[s,t,e])}const Die=async t=>(await pe.safePost("/aip/connectors/github/has_installations",{requestBody:{link_id:t}})).has_installations,_qe=({linkId:t})=>lt({queryKey:["github-has-installations",t],enabled:!!t,queryFn:async()=>await Die(t),retry:1});function LP({enabled:t=!0,connectionInstanceId:e}){return lt({queryKey:["user_connection_sync_configuration",e],queryFn:async()=>{try{return await p$.user_connection_sync_configuration(e)}catch(n){return null}},enabled:!!(t&&e),retry:1})}function xqe(t){return ds(t,"1001765573").get("ca_github_sync_max_repos",5)}const OP="v1.0",_g=Le.SelectedGithubRepos,eu=({selectedReposMap:t,scope:e})=>{if(!t){mt.removeItem(_g,e);return}const n={selected_github_repos:[...t].map(([o,a])=>[o,a])},s={version:OP,data:n};mt.setItem(_g,JSON.stringify(s),e)},kk=t=>{const e=mt.getItem(_g,t);if(e)try{const{version:n,data:s}=JSON.parse(e);if(n!==OP){mt.removeItem(_g,t);return}return new Map(s.selected_github_repos)}catch(n){return}},Fie=t=>{var n;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const s of[...e].reverse()){const o=s.message;if(o.author.role!==Ze.User)continue;const a=(n=o.metadata)!=null?n:{},i=a.selected_github_repos,l=a.selected_all_github_repos;if(i||l)return{selectedRepos:i!=null?i:[],selectedAllRepos:l!=null?l:!1}}},Bie=kb(t=>Fie(t),{equals:Sd}),DP=()=>{var s,o;const t=ss(),e=ym(),n=G();if(t===Ie.Slurm){const a=(s=e==null?void 0:e.connectorConfig)==null?void 0:s[bt.GITHUB_CONNECTOR];return{maxRepos:(o=a==null?void 0:a.max_repos)!=null?o:3}}return t===Ie.Glaux?{maxRepos:g$(n)}:{maxRepos:void 0}};function FP(t){var C,k,M,T;const e=G(),{session:n}=pd(e),s=_A(),o=xA(),a=ue(o),{maxRepos:i}=DP(),{connectionInstanceData:l}=Mm({skip:!s}),c=(k=(C=l==null?void 0:l.connection_statuses.find(E=>E.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(E.user_connection_details.activation_status)&&!!E.user_connection_details.connection_instance_id&&!!E.user_connection_details.backing_link_id))==null?void 0:C.user_connection_details.connection_instance_id)!=null?k:"",{data:d}=LP({connectionInstanceId:c!=null?c:"",enabled:!!(c&&s)}),u=_.useMemo(()=>{var E,A;return{userId:(E=n==null?void 0:n.user)==null?void 0:E.id,workspaceId:(A=n==null?void 0:n.account)==null?void 0:A.id}},[(M=n==null?void 0:n.user)==null?void 0:M.id,(T=n==null?void 0:n.account)==null?void 0:T.id]),m=ht(e,t),f=ue(()=>Bie(m)),[p,g]=Ue(t,E=>[E==null?void 0:E.hasModifiedGithubRepos,E==null?void 0:E.selectedGithubRepos]);_.useEffect(()=>{var N,R,O,D,F,V;if(p||((N=g==null?void 0:g.has(a))!=null?N:!1))return;if(f&&BP(f)){if(i&&((O=(R=f.selectedRepos)==null?void 0:R.length)!=null?O:0)>i)return;qe(t,z=>{var $;($=z.selectedGithubRepos)!=null||(z.selectedGithubRepos=new Map),z.selectedGithubRepos.set(a,uo(f))});return}const A=kk(u);if(A&&A.has(a)){if(i&&((V=(F=(D=A.get(a))==null?void 0:D.selectedRepos)==null?void 0:F.length)!=null?V:0)>i)return;const z=A.get(a);z&&qe(t,$=>{var Y;(Y=$.selectedGithubRepos)!=null||($.selectedGithubRepos=new Map),$.selectedGithubRepos.set(a,uo(z))})}wb(n==null?void 0:n.user)&&qe(t,z=>{var $;($=z.selectedGithubRepos)!=null||(z.selectedGithubRepos=new Map),z.selectedGithubRepos.set(a,uo({selectedRepos:["openai/openai"],selectedAllRepos:!1}))})},[t,p,g,a,f,u,d==null?void 0:d.sync_enabled_objects,i,n==null?void 0:n.user]);const h=_.useMemo(()=>{var N,R,O,D;if(a==null&&(d!=null&&d.sync_enabled_objects))return{selectedRepos:d.sync_enabled_objects.filter(V=>V.object_type==="repository").map(V=>V.object_name).filter(V=>V!=null),selectedAllRepos:!1};const E=g==null?void 0:g.get(a);if(E)return E;if(f&&(((R=(N=f.selectedRepos)==null?void 0:N.length)!=null?R:0)>0||f.selectedAllRepos)&&(i==null||((D=(O=f.selectedRepos)==null?void 0:O.length)!=null?D:0)<=i))return f;const A=kk(u);if(A&&A.has(a)){const F=A.get(a);if(F)return F}return mS()},[a,d==null?void 0:d.sync_enabled_objects,g,f,u,i]),x=_.useCallback(E=>{t&&qe(t,A=>{var N;A.hasModifiedGithubRepos=!0,(N=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map),A.selectedGithubRepos.set(a,uo(E)),eu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),y=_.useCallback(E=>{t&&qe(t,A=>{var R,O;A.hasModifiedGithubRepos=!0,(R=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const N=(O=A.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(N.selectedRepos)&&!N.selectedRepos.includes(E)&&(N.selectedRepos=[...N.selectedRepos,E]),A.selectedGithubRepos.set(a,uo(N)),eu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),b=_.useCallback(E=>{t&&qe(t,A=>{var R,O;A.hasModifiedGithubRepos=!0,(R=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const N=(O=A.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(N.selectedRepos)&&(N.selectedRepos=N.selectedRepos.filter(D=>D!==E)),A.selectedGithubRepos.set(a,uo(N)),eu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),v=_.useCallback(E=>{t&&qe(t,A=>{var R,O;A.hasModifiedGithubRepos=!0,(R=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const N=(O=A.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};Array.isArray(N.selectedRepos)&&(N.selectedRepos.includes(E)?N.selectedRepos=N.selectedRepos.filter(D=>D!==E):N.selectedRepos=[...N.selectedRepos,E]),A.selectedGithubRepos.set(a,uo(N)),eu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]),S=_.useCallback(E=>{t&&qe(t,A=>{var R,O;A.hasModifiedGithubRepos=!0,(R=A.selectedGithubRepos)!=null||(A.selectedGithubRepos=new Map);const N=(O=A.selectedGithubRepos.get(a))!=null?O:{selectedRepos:[],selectedAllRepos:!1};N.selectedAllRepos=E,A.selectedGithubRepos.set(a,uo(N)),eu({selectedReposMap:A.selectedGithubRepos,scope:u})})},[t,a,u]);return{selectedRepos:h,setSelectedRepos:x,addRepo:y,removeRepo:b,toggleRepo:v,setAllRepos:S}}function yqe(t,e=null){var n,s,o;return(o=(s=(n=t==null?void 0:t.selectedGithubRepos)==null?void 0:n.get(e))!=null?s:Vie(e))!=null?o:mS()}function BP(t){return t.selectedAllRepos||t.selectedRepos!=null&&t.selectedRepos.length>0}function mS(){return{selectedRepos:[],selectedAllRepos:!1}}function Uie(t,e){var n;try{const s=JSON.parse(t);if("selectedRepos"in s&&"selectedAllRepos"in s)return s;const o=e==null?"__null__":e;return(n=s[o])!=null?n:void 0}catch(s){return}}function Vie(t){const e=Qn.getCookie(Jn.LastSelectedGithubRepo);return e?Uie(e,t):mS()}const Gie={disabledAutoConnectors:[],isLoading:!1},$ie=t=>{"use forget";var se,de;const e=H.c(55),{clientThreadId:n,includeAutoConnectors:s}=t,o=s===void 0?!1:s,a=G(),i=yA();let l;e[0]!==a?(l=()=>_h(a),e[0]=a,e[1]=l):l=e[1];const c=ue(l);let d;e[2]!==c||e[3]!==i?(d=(c==null?void 0:c.isPersonalAccount())&&i,e[2]=c,e[3]=i,e[4]=d):d=e[4];const u=!!d;let m;e[5]!==o?(m={includeAutoConnectors:o},e[5]=o,e[6]=m):m=e[6];const{connectedTypes:f,isLoading:p,linkIdToConnectedType:g}=Mb(m);let h;e[7]!==a||e[8]!==o?(h=()=>o?h$(a):Gie,e[7]=a,e[8]=o,e[9]=h):h=e[9];const{isLoading:x,disabledAutoConnectors:y}=ue(h);let b;e[10]!==n?(b={clientThreadId:n},e[10]=n,e[11]=b):b=e[11];const{connectorConfigMap:v}=Hie(b),{connectedTypes:S,isLoading:C}=vA(),{connectedTypes:k,isLoading:M}=bA(),{data:T,isLoading:E}=SA();let A;e[12]===Symbol.for("react.memo_cache_sentinel")?(A=Sn(),e[12]=A):A=e[12];const N=A,R=p||M||E||x||C;T==null||T.connection_statuses;let O,D,F,V,z,$,Y;if(e[13]!==k||e[14]!==S||e[15]!==f||e[16]!==y||e[17]!==o||e[18]!==v||e[19]!==g||e[20]!==(T==null?void 0:T.connection_statuses)||e[21]!==u){const ie=(se=T==null?void 0:T.connection_statuses.filter(Wie).map(zie))!=null?se:[],ae=(de=T==null?void 0:T.connection_statuses.reduce((te,le)=>{if(["activated","partially_activated"].includes(le.user_connection_details.activation_status)&&le.user_connection_details.backing_link_id){const re=g.get(le.user_connection_details.backing_link_id);re&&te.add(re)}return te},new Set))!=null?de:new Set,ce=[...f].filter(te=>{var le;if(te===bt.GDRIVE_ACTION_CONNECTOR&&u){if(ie.includes("gdrive_sync_connector"))return!1}else{if(ae.has(te))return!1;if(te===bt.SHAREPOINT_CONNECTOR&&ie.includes("sharepoint_admin_sync_connector"))return!1}return o&&y.includes(te)?!1:te!==Qu.MCP_CONNECTOR&&(!v.has(te)||!((le=v.get(te))!=null&&le.disabled))});let ye;e[29]!==k?(ye=[...k].filter(qie),e[29]=k,e[30]=ye):ye=e[30];let fe;e[31]!==ye?(fe=[...ye,"web"],e[31]=ye,e[32]=fe):fe=e[32],O=fe;const Ce=[...[...S].filter(Yie)];z=Map;let ee;e[33]!==O?(ee=new Set(O),e[33]=O,e[34]=ee):ee=e[34],e[35]!==ee?(D=[Ie.Research,ee],e[35]=ee,e[36]=D):D=e[36],F=[Ie.Slurm,new Set([...ce,...ie])],V=[Ie.Glaux,new Set([...Ce,...ie])],$=null,Y=new Set(ie),e[13]=k,e[14]=S,e[15]=f,e[16]=y,e[17]=o,e[18]=v,e[19]=g,e[20]=T==null?void 0:T.connection_statuses,e[21]=u,e[22]=O,e[23]=D,e[24]=F,e[25]=V,e[26]=z,e[27]=$,e[28]=Y}else O=e[22],D=e[23],F=e[24],V=e[25],z=e[26],$=e[27],Y=e[28];let Z;e[37]!==$||e[38]!==Y?(Z=[$,Y],e[37]=$,e[38]=Y,e[39]=Z):Z=e[39];let Q;e[40]!==D||e[41]!==F||e[42]!==V||e[43]!==Z?(Q=[D,F,V,Z],e[40]=D,e[41]=F,e[42]=V,e[43]=Z,e[44]=Q):Q=e[44];let q;if(e[45]!==O||e[46]!==z||e[47]!==Q){q=new z(Q);let ie;e[49]===Symbol.for("react.memo_cache_sentinel")?(ie=N?["cloud"]:[],e[49]=ie):ie=e[49];let ae;e[50]!==O?(ae=new Set([...O,"web",...ie]),e[50]=O,e[51]=ae):ae=e[51],q.set(is,ae),e[45]=O,e[46]=z,e[47]=Q,e[48]=q}else q=e[48];const X=q;let oe;return e[52]!==X||e[53]!==R?(oe={availableConnectorTypes:X,isLoading:R},e[52]=X,e[53]=R,e[54]=oe):oe=e[54],oe},Hie=t=>{"use forget";const e=H.c(12),{clientThreadId:n}=t,s=G();let o;e[0]!==n||e[1]!==s?(o=()=>wn(ht(s,n)),e[0]=n,e[1]=s,e[2]=o):o=e[2];const a=ue(o),i=J(),l=ym();l==null||l.connectorConfig;let c;if(e[3]!==a||e[4]!==i||e[5]!==(l==null?void 0:l.connectorConfig)){const m=(l==null?void 0:l.connectorConfig)||{};let f;e[7]!==a||e[8]!==i?(f=(p,g)=>{const[h,x]=g,y=h,b=x.enabledModels&&a?!x.enabledModels.includes(a.id):!1;return p.set(y,{disabled:b,disabledText:b?i.formatMessage({id:"1MD3y6",defaultMessage:"Switch to {model} model to use connectors"},{model:x.enabledModels.join(", ")}):void 0,hasBetaTag:x.beta}),p},e[7]=a,e[8]=i,e[9]=f):f=e[9],c=Object.entries(m).reduce(f,new Map),e[3]=a,e[4]=i,e[5]=l==null?void 0:l.connectorConfig,e[6]=c}else c=e[6];const d=c;let u;return e[10]!==d?(u={connectorConfigMap:d},e[10]=d,e[11]=u):u=e[11],u};function Wie(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function zie(t){return t.user_connection_details.connection_type}function qie(t){return t!==Qu.MCP_CONNECTOR}function Yie(t){return t!==Qu.MCP_CONNECTOR}const Zie=(t,e)=>{var s,o,a,i;if(!t)return{};const n=t.tree.getBranchFromLeaf(t.currentLeafId);for(const l of[...n].reverse()){const c=l.message;if(c.author.role!==Ze.User)continue;const d=(s=c.metadata)!=null?s:{};let u=[];e===Ie.Research?u=(o=d.caterpillar_selected_sources)!=null?o:[]:u=(a=d.selected_sources)!=null?a:[];const m=(i=d==null?void 0:d.selected_mcp_sources)!=null?i:[],f=u.map(p=>{if(p==="web"||p==="cloud")return p;const g=Object.entries(bb);for(const[h,x]of g)if(x===p)return h;return p});if(u.length||m.length){const p=new Set(f),g=new Set(m.map(x=>x.id)),h=new Set(m.filter(x=>x.status==="ONLY_ME").map(x=>x.id));return{selectedSources:p,selectedMCPSources:g,selectedByoMCPSources:h}}}return{}},Kie=t=>{var n,s,o,a,i,l,c,d;if(!t)return;const e=t.tree.getBranchFromLeaf(t.currentLeafId);for(const u of e){const m=u.message;if(m.author.role!==Ze.User&&((n=m.metadata)==null?void 0:n.invoked_resource)===void 0||m.content.content_type==="user_editable_context")continue;const f=(o=(s=m.metadata)==null?void 0:s.selected_sources)!=null?o:[],p=(i=(a=m.metadata)==null?void 0:a.selected_mcp_sources)!=null?i:[];if(((l=m.metadata)==null?void 0:l.invoked_resource)!==void 0||f.length>0||p.length>0)return p.some(g=>g.status==="ONLY_ME")||((d=(c=m.metadata)==null?void 0:c.invoked_resource)==null?void 0:d.publish_status)==="private"}},Qie=t=>{var e;return xe(t,"3544641259")||!!((e=y$(t))!=null&&e.enabled)},Jie=(t,e)=>[...t].filter(n=>e.includes(n)),tu=t=>{U.logEventWithStatsig("chatgpt_connectors_toggled_sources","chatgpt_connectors_toggled_sources",t)};function Ra(t,e=!1){var fe,Ce;const n=G(),{session:s}=pd(n),o=xe(n,"4059945251"),a=Qie(n),i=xA(),l=ue(i),c=_.useMemo(()=>kb(ee=>Zie(ee,i()),{equals:Sd}),[i]),d=ht(n,t),u=ue(()=>c(d)),m=_$(n),f=xh(n),p=xe(n,"1030527215"),{data:g}=wo(en.EnableRemoteBrowserData),{availableConnectorTypes:h,isLoading:x}=$ie({clientThreadId:t,includeAutoConnectors:e}),y=p&&!g&&fl(l),[b,v,S,C,k,M]=Ue(t,ee=>[Kie(ee),ee==null?void 0:ee.startedWithByoMcp,ee==null?void 0:ee.selectedSources,ee==null?void 0:ee.selectedMCPSources,ee==null?void 0:ee.hasModifiedSources,ee==null?void 0:ee.mentionedSources]),{platformConnectors:T,isLoading:E}=Cd(),A=ue(()=>wm(n)),N=_n(),R=(N==null?void 0:N.isWorkspacePlan())&&A;_.useEffect(()=>{t&&v===void 0&&b!==void 0&&qe(t,ee=>{ee.startedWithByoMcp=b})},[t,v,b]),_.useEffect(()=>{if(!t||v===void 0||E||R)return;const ee=S==null?void 0:S.get(l),te=C==null?void 0:C.get(l),le=new Set([...te!=null?te:[]].filter(ve=>{const _e=T.get(ve);return(_e==null?void 0:_e.status)==="ONLY_ME"})),re=new Set([...te!=null?te:[]].filter(ve=>{const _e=T.get(ve);return(_e==null?void 0:_e.status)!=="ONLY_ME"}));v?(ee&&ee.size>0||re.size>0)&&qe(t,ve=>{var _e,we,De,ge;(we=(_e=ve.selectedSources)==null?void 0:_e.get(l))==null||we.clear();for(const Ne of re)(ge=(De=ve.selectedMCPSources)==null?void 0:De.get(l))==null||ge.delete(Ne)}):le.size>0&&qe(t,ve=>{var _e,we;for(const De of le)(we=(_e=ve.selectedMCPSources)==null?void 0:_e.get(l))==null||we.delete(De)})},[t,v,S,C,l,T,E,R]),_.useEffect(()=>{var ve,_e,we,De;if(!t||k)return;const ee=(ve=S==null?void 0:S.has(l))!=null?ve:!1,te=(_e=C==null?void 0:C.has(l))!=null?_e:!1;if(!ee&&Tm(l)&&qe(t,ge=>{var Ne;(Ne=ge.selectedSources)!=null||(ge.selectedSources=new Map),ge.selectedSources.set(l,new Set([...m,...f]))}),ee||te)return;const le=u.selectedSources,re=u.selectedMCPSources;((we=le==null?void 0:le.size)!=null?we:0)===0&&((De=re==null?void 0:re.size)!=null?De:0)===0||qe(t,ge=>{var Ne,je;le&&le.size>0&&((Ne=ge.selectedSources)!=null||(ge.selectedSources=new Map),ge.selectedSources.set(l,new Set(le))),re&&re.size>0&&((je=ge.selectedMCPSources)!=null||(ge.selectedMCPSources=new Map),ge.selectedMCPSources.set(l,new Set(re)))})},[t,S,C,k,l,u.selectedSources,u.selectedMCPSources,m,f]);const O=_.useMemo(()=>{var le;const ee=(le=S==null?void 0:S.get(l))!=null?le:new Set;if(k)return[...ee];const te=u.selectedSources;return te&&te.size>0?[...te]:l===Ie.Glaux?[...ee,...m,...f]:y?ee.has("cloud")?["web","cloud"]:["web"]:[...ee]},[S,l,k,u.selectedSources,y,m,f]),D=_.useMemo(()=>new Set(M!=null?M:[]),[M]),F=_.useMemo(()=>{var ee;return x?new Set([...O,...M!=null?M:[]]):new Set([...Jie([...O],[...(ee=h.get(l))!=null?ee:[]]),...M!=null?M:[]])},[h,x,M,l,O]),V=_.useMemo(()=>{var le;const ee=(le=C==null?void 0:C.get(l))!=null?le:new Set;if(k)return ee;const te=u.selectedMCPSources;return te&&te.size>0?te:y?new Set:ee},[C,k,l,u.selectedMCPSources,y]),z=_.useMemo(()=>new Set(V),[V]),$=l===Ie.Research||fl(l),{connectorLinks:Y,isLoading:Z,isFetching:Q}=wd({skip:!a||!$,fetchValidLinksOnly:!0}),q=_.useMemo(()=>{if(!a||!$||Z||Q)return F;const ee=new Set;return F.forEach(te=>{if(te==="web"||te==="cloud"){ee.add(te);return}if(te in fr){const le=fr[te];Y.has(le)&&ee.add(te);return}if(Zl(te)){Y.has(te)&&ee.add(te);return}}),ee},[F,Y,a,$,Z,Q]),X=_.useCallback(ee=>{var te,le,re;CA({selectedSourcesMap:x$((te=ee.selectedSources)!=null?te:new Map),selectedMCPSourcesMap:ee.selectedMCPSources,scope:{userId:(le=s==null?void 0:s.user)==null?void 0:le.id,workspaceId:(re=s==null?void 0:s.account)==null?void 0:re.id}})},[(fe=s==null?void 0:s.user)==null?void 0:fe.id,(Ce=s==null?void 0:s.account)==null?void 0:Ce.id]),oe=_.useCallback(ee=>{const te=T.get(ee);return(te==null?void 0:te.status)==="ONLY_ME"},[T]),se=_.useCallback(ee=>{t&&qe(t,te=>{var Te,Fe,Ge,Se,Re,tt,Ke,nt;const le=(Fe=(Te=te.selectedSources)==null?void 0:Te.get(l))!=null?Fe:new Set,re=(Se=(Ge=te.selectedMCPSources)==null?void 0:Ge.get(l))!=null?Se:new Set,ve=new Set([...re].filter(oe)),_e=new Set([...re].filter(ot=>!oe(ot))),we=new Set([...le,...re,...(Re=te.mentionedSources)!=null?Re:[]]),De=(tt=te.mentionedSources)!=null?tt:new Set;let ge,Ne;const je=te.startedWithByoMcp!==void 0;if(Zl(ee))if(oe(ee)){if(Ne="mcp-byo",re.has(ee))ge="remove",re.delete(ee);else{if(je&&te.startedWithByoMcp===!1&&!R)return;if(ge="add",!je&&!R){le.clear();for(const Lt of _e)re.delete(Lt)}re.add(ee)}!o&&le.has("web")&&!te.hasRemovedWebSource&&(le.delete("web"),te.hasRemovedWebSource=!0)}else if(Ne="mcp-workspace",we.has(ee))ge="remove",re.delete(ee);else{if(je&&te.startedWithByoMcp&&!R)return;if(ge="add",!je&&ve.size>0&&!R)for(const ot of ve)re.delete(ot);re.add(ee),!o&&ee!=="web"&&ee!=="cloud"&&le.has("web")&&!te.hasRemovedWebSource&&(le.delete("web"),te.hasRemovedWebSource=!0)}else if(Ne="platform",ee==="sharepoint_admin_sync_connector"&&(le.delete("sharepoint_sync_connector"),De.delete("sharepoint_sync_connector"),le.delete(bt.SHAREPOINT_CONNECTOR),De.delete(bt.SHAREPOINT_CONNECTOR)),we.has(ee))ge="remove",le.delete(ee),De.has(ee)&&De.delete(ee);else{if(je&&te.startedWithByoMcp&&!R)return;if(ge="add",le.add(ee),!je&&ve.size>0&&!R)for(const ot of ve)re.delete(ot);!o&&ee!=="web"&&ee!=="cloud"&&le.has("web")&&!te.hasRemovedWebSource&&(le.delete("web"),te.hasRemovedWebSource=!0)}(Ke=te.selectedSources)!=null||(te.selectedSources=new Map),te.selectedSources.set(l,le),(nt=te.selectedMCPSources)!=null||(te.selectedMCPSources=new Map),te.selectedMCPSources.set(l,re),te.mentionedSources=De,te.hasModifiedSources=!0,tu({source:"toggle",action:ge,type:Ne,systemHint:l,selectedSource:ee}),X(te)})},[t,l,o,X,oe,R]),de=_.useCallback(ee=>{t&&qe(t,te=>{var ge,Ne,je,Te,Fe,Ge,Se,Re,tt;let le;const re=te.startedWithByoMcp!==void 0,ve=(Ne=(ge=te.selectedSources)==null?void 0:ge.get(l))!=null?Ne:new Set,_e=(Te=(je=te.selectedMCPSources)==null?void 0:je.get(l))!=null?Te:new Set,we=new Set([..._e].filter(oe)),De=new Set([..._e].filter(Ke=>!oe(Ke)));if(oe(ee)){if(le="mcp-byo",re&&te.startedWithByoMcp===!1&&!R)return;if(!re&&!R){((Se=(Ge=te.selectedSources)==null?void 0:Ge.get(l))!=null?Se:new Set).clear();for(const nt of De)_e.delete(nt)}_e.add(ee)}else{if(le=Zl(ee)?"mcp-workspace":"platform",re&&te.startedWithByoMcp&&!R)return;if((Zl(ee)?_e:ve).add(ee),!re&&!R){const Ke=(Fe=te.selectedMCPSources)==null?void 0:Fe.get(l);for(const nt of we)Ke==null||Ke.delete(nt)}}(Re=te.selectedSources)!=null||(te.selectedSources=new Map),te.selectedSources.set(l,ve),(tt=te.selectedMCPSources)!=null||(te.selectedMCPSources=new Map),te.selectedMCPSources.set(l,_e),tu({source:"toggle",action:"add",type:le,systemHint:l,selectedSource:ee}),X(te),te.hasModifiedSources=!0})},[t,l,X,oe,R]),ie=_.useCallback(ee=>{t&&qe(t,te=>{var ve,_e,we,De;const le=(ve=te.mentionedSources)!=null?ve:new Set;le.add(ee),te.mentionedSources=le;const re=(we=(_e=te.selectedSources)==null?void 0:_e.get(l))!=null?we:new Set;re.add(ee),(De=te.selectedSources)!=null||(te.selectedSources=new Map),te.selectedSources.set(l,re),tu({source:"mentions",action:"add",type:"platform",systemHint:l,selectedSource:ee}),X(te)})},[t,l,X]),ae=_.useCallback(ee=>{t&&qe(t,te=>{var re;const le=(re=te.mentionedSources)!=null?re:new Set;le.delete(ee),te.mentionedSources=le,tu({source:"mentions",action:"remove",type:"platform",systemHint:l,selectedSource:ee})})},[t,l]),ce=_.useCallback(ee=>{t&&qe(t,te=>{var we,De,ge,Ne,je,Te,Fe,Ge,Se;const le=(De=(we=te.selectedSources)==null?void 0:we.get(l))!=null?De:new Set,re=(Ne=(ge=te.selectedMCPSources)==null?void 0:ge.get(l))!=null?Ne:new Set,ve=(je=te.mentionedSources)!=null?je:new Set;let _e;oe(ee)?(_e="mcp-byo",((Fe=(Te=te.selectedMCPSources)==null?void 0:Te.get(l))!=null?Fe:new Set).delete(ee)):(_e=Zl(ee)?"mcp-workspace":"platform",le.delete(ee),re.delete(ee),ve.has(ee)&&ve.delete(ee)),(Ge=te.selectedSources)!=null||(te.selectedSources=new Map),te.selectedSources.set(l,le),(Se=te.selectedMCPSources)!=null||(te.selectedMCPSources=new Map),te.selectedMCPSources.set(l,re),te.mentionedSources=ve,tu({source:"toggle",action:"remove",type:_e,systemHint:l,selectedSource:ee}),X(te),te.hasModifiedSources=!0})},[t,l,X,oe]),ye=_.useRef(!1);return _.useEffect(()=>{if(ye.current||!$||Z||Q)return;const ee=[...F].filter(te=>!q.has(te)&&te!=="web"&&te!=="cloud");ee.length!==0&&(ye.current=!0,t&&(qe(t,te=>{var ve,_e,we,De;const le=(_e=(ve=te.selectedSources)==null?void 0:ve.get(l))!=null?_e:new Set,re=(we=te.mentionedSources)!=null?we:new Set;ee.forEach(ge=>{var Ne,je,Te;if(!Zl(ge))le.delete(ge),re.delete(ge);else{const Fe=(je=(Ne=te.selectedMCPSources)==null?void 0:Ne.get(l))!=null?je:new Set;Fe.delete(ge),(Te=te.selectedMCPSources)!=null||(te.selectedMCPSources=new Map),te.selectedMCPSources.set(l,Fe)}}),(De=te.selectedSources)!=null||(te.selectedSources=new Map),te.selectedSources.set(l,le),te.mentionedSources=re,X(te)}),ii(n,"chatgpt_connectors_toggled_sources",ee.length,{action:"expired_auto_removed",sources:ee.join(","),systemHint:String(l!=null?l:"")})))},[F,q,$,t,l,X,n,Z,Q]),a?{selectedSources:q,selectedMCPSources:z,mentionedSources:D,toggleSource:se,addSource:de,deleteSource:ce,addMentionedSource:ie,deleteMentionedSource:ae}:{selectedSources:void 0,selectedMCPSources:void 0,mentionedSources:void 0,toggleSource:()=>{},addSource:()=>{},deleteSource:()=>{},addMentionedSource:()=>{},deleteMentionedSource:()=>{}}}function UP(t,e="<unknown>"){if(!t)throw v$(new Error("".concat(e,": unexpected non-truthy condition: ").concat(JSON.stringify(t))),UP)}const Xie=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)}),Qm=_.createContext({sourceConversationId:null,sourceMessageId:null,automationId:null,isScheduledRun:!1,modalOpen:!1,openModal:()=>{},closeModal:()=>{}});function vqe({clientThreadId:t,children:e}){var f,p,g,h,x,y,b,v,S;const n=GP(t),s=rle(t),o=((f=s==null?void 0:s.metadata)==null?void 0:f.real_author_type)==="automation";let a=null;o?a=(g=(p=s==null?void 0:s.metadata)==null?void 0:p.real_author_id)!=null?g:null:n&&(a=(x=(h=n==null?void 0:n.metadata)==null?void 0:h.n7jupd_scheduled_id)!=null?x:null);const i=b1(a);let l=null,c=null;o?(l=(y=i==null?void 0:i.source_conversation_id)!=null?y:null,c=(b=i==null?void 0:i.source_message_id)!=null?b:null):n&&(l=(v=jt(t))!=null?v:null,c=(S=n==null?void 0:n.id)!=null?S:null);const[d,u]=_.useState(!1),m=_.useMemo(()=>({sourceConversationId:l,sourceMessageId:c,automationId:a,isScheduledRun:o,modalOpen:d,openModal:()=>u(!0),closeModal:()=>u(!1)}),[a,d,l,c,o]);return r.jsxs(Qm.Provider,{value:m,children:[e,r.jsx(tle,{clientThreadId:t})]})}const VP=["daily","weekly","monthly"],ele=Object.freeze({frequency:"monthly",by_hour:14,by_minute:0,by_month_day:1,by_second:0});function tle({clientThreadId:t}){const{sourceConversationId:e,sourceMessageId:n,modalOpen:s,closeModal:o,automationId:a}=_.useContext(Qm),i=GP(t),l=b1(a);return e?l&&n?r.jsx(sle,{automation:l,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:t,modalOpen:s,closeModal:o}):i?r.jsx(nle,{sourceClientThreadId:t,sourceConversationId:e,sourceMessage:i,modalOpen:s,closeModal:o}):null:null}function nle({sourceClientThreadId:t,sourceConversationId:e,sourceMessage:n,modalOpen:s,closeModal:o}){const a=lle(t,n),{selectedSources:i}=Ra(t),{selectedRepos:l}=FP(t),c=Intl.DateTimeFormat().resolvedOptions().timeZone,d=_.useMemo(()=>{var m;return w(w(w({system_hints:[is]},i&&{selected_sources:hi(i)}),l&&{selected_github_repos:[...(m=l.selectedRepos)!=null?m:[]],selected_all_github_repos:l.selectedAllRepos}),c&&{user_timezone:c})},[i,l,c]),u=pS(e,t,n.id,d,null);return a?r.jsx(r.Fragment,{children:r.jsx(hg,{initialScheduleComponents:a.schedule_components,nextRunTimes:a.next_run_times,initialValidFrequencies:VP,children:s&&r.jsx(uS,{source:"chat",item:a,onSave:u,onClose:o})},a.id)}):null}function sle({automation:t,sourceConversationId:e,sourceMessageId:n,sourceClientThreadId:s,modalOpen:o,closeModal:a}){var l;const i=pS(e,s,n,(l=t.user_message)==null?void 0:l.metadata,t.id);return r.jsx(r.Fragment,{children:r.jsx(hg,{initialScheduleComponents:t.schedule_components,nextRunTimes:t.next_run_times,initialValidFrequencies:VP,children:o&&r.jsx(uS,{source:"chat",item:t,onSave:i,onClose:a})},t.id)})}function fS({children:t}){const{openModal:e,automationId:n,sourceMessageId:s,isScheduledRun:o}=_.useContext(Qm);return t({openScheduleModal:e,isScheduled:!!n,isSchedulable:!n&&!!s,isScheduledRun:o})}function ole(){const{automationId:t,sourceConversationId:e,sourceMessageId:n}=_.useContext(Qm),s=b1(t);if(!s||!e||!n)return null;const o=Tb(e);return r.jsx(ale,{automation:s,sourceClientThreadId:o,sourceConversationId:e,sourceMessageId:n})}function ale({sourceConversationId:t,sourceClientThreadId:e,sourceMessageId:n,automation:s}){var l;const o=J(),a=at(),i=pS(t,e,n,(l=s.user_message)==null?void 0:l.metadata,s.id);return r.jsx(Iie,{automation:s,onSave:i,overrideManageAllAction:r.jsx(K.Item,{icon:Xie,label:o.formatMessage({id:"uPBjIE",defaultMessage:"Schedules"}),onClick:()=>a(cle())})})}function GP(t){return Ue(t,e=>{if(!e)return null;function n(){const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let o=s.length-1;o>=0;o--)if(ile(s[o].message))return s[o].message;return null}return n()})}function rle(t){return Ue(t,e=>{if(!e)return null;function n(){var o;const s=e==null?void 0:e.tree.getBranchFromLeaf(e.currentLeafId);if(!s)return null;for(let a=0;a<s.length;a++){const i=s[a].message;if(i.author.role===Ze.User&&((o=i.metadata)==null?void 0:o.real_author_type)==="automation")return i}return null}return n()})}function ile(t){var e,n;return((e=t.metadata)==null?void 0:e.n7jupd_schedulable)||((n=t.metadata)==null?void 0:n.n7jupd_schedulable_score)!==void 0}function lle(t,e){const n=J(),s=jt(t),o=Ue(t,l=>{const c=l==null?void 0:l.tree.getBranchFromLeaf(e.id);return Ml(c,d=>d.message.author.role===Ze.User)}),a=Ue(t,l=>{var c;return(c=l==null?void 0:l.title)!=null?c:n.formatMessage({id:"4lMgsa",defaultMessage:"New Task"})}),i=_.useMemo(()=>{var c,d;if((c=e.metadata)!=null&&c.n7jupd_summary)return(d=e.metadata)==null?void 0:d.n7jupd_summary;if(!o)return null;const l=o.message.content;return l.content_type==="text"?l.parts.join(""):null},[e,o]);return _.useMemo(()=>!o||!i||!s?null:{id:null,title:a,prompt:i,conversation_id:s,schedule:"",is_enabled:!0,notifications_enabled:!0,email_enabled:!0,target_time_utc:null,schedule_components:ele,default_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,last_run_time:null,next_run_times:[]},[o,a,i,s])}function pS(t,e,n,s,o){const a=xt(),i=b1(o);return _.useCallback(async(c,d,u,m,f,p,g,h)=>{var y,b;UP(t,"Need server thread ID");const x=await pe.safePost("/conversation/{conversation_id}/agent_automation",{parameters:{path:{conversation_id:t}},requestBody:{jawbone_id:c,title:d,schedule:u,is_enabled:m,prompt:f,default_timezone:p,schedule_components:g,last_run_time:h,email_enabled:(y=i==null?void 0:i.email_enabled)!=null?y:!0,notifications_enabled:(b=i==null?void 0:i.notifications_enabled)!=null?b:!0,message_id:n,user_message:s&&kj(us(f,s))}});return a.invalidateQueries({queryKey:RP()}),e&&qe(e,v=>{ln.updateTree(v,S=>{S.updateNodeMessageMetadata(n,{n7jupd_scheduled_id:x.id})})}),x},[a,n,t,e,i,s])}function cle(){return"/schedules"}const c0="ChatGPT",bqe="Untitled",Sqe=10,dle=50,ule=300,mle=8e3,Cqe=12,wqe=300;function fle(t){return t.resource!==void 0}const ks={Private:"private",Email:"email",User:"user",Group:"group",WorkspaceLink:"workspace_link",Link:"link"};function kqe(t){return t.type===Gn.EMAIL||t.type===Gn.USER||t.type===Gn.GROUP}function $P(t){var e,n,s,o,a,i,l,c,d;return{id:t.gizmo.id,instructions:t.gizmo.instructions,name:t.gizmo.display.name,description:(e=t.gizmo.display.description)!=null?e:"",emoji:(n=t.gizmo.display.emoji)!=null?n:void 0,theme:(s=t.gizmo.display.theme)!=null?s:void 0,profilePictureId:(o=t.gizmo.display.profile_pic_id)!=null?o:void 0,profilePictureUrl:(a=t.gizmo.display.profile_picture_url)!=null?a:void 0,promptStarters:(i=t.gizmo.display.prompt_starters)!=null?i:[],tools:qi(t.tools),files:qi(t.files),sharing:ple(t.gizmo.sharing),trainingDisabled:(l=t.gizmo.training_disabled)!=null?l:!1,memoryScope:(c=t.gizmo.memory_scope)!=null?c:li.UNSET,sharingTargets:t.gizmo.sharing_targets.map(hle),liveVersion:(d=t.gizmo.live_version)!=null?d:0,contextStuffingBudget:t.gizmo.context_stuffing_budget}}function ple(t){return{subjects:t.subjects.map(e=>{var n;switch(e.type){case Gn.EMAIL:return{type:e.type,user_email:e.user_email,capabilities:e.capabilities};case Gn.USER:return{type:e.type,user_id:e.user_id,capabilities:e.capabilities,user_name:e.user_name,user_email:e.user_email,avatar_url:(n=e.avatar_url)!=null?n:null};case Gn.GROUP:return{type:e.type,group_id:e.group_id,group_name:e.group_name,capabilities:e.capabilities};case Gn.WORKSPACE:return{type:e.type,capabilities:e.capabilities};case Gn.ALL:return{type:e.type,capabilities:e.capabilities}}throw new Error("Unknown subject type")}),recipient:gle(t.recipient)}}function gle(t){switch(t){case Tn.Group:return ks.Group;case Tn.Link:return ks.Link;case Tn.Marketplace:throw new Error("Marketplace sharing not supported for projects");case Tn.Private:return ks.Private;case Tn.User:return ks.User;case Tn.Workspace:throw new Error("Workspace sharing not supported for projects (did you mean WorkspaceLink?)");case Tn.WorkspaceLink:return ks.WorkspaceLink}}function hle(t){switch(t.recipient){case Tn.Group:return{recipient:ks.Group,allowed:t.allowed,moderated_fields:t.moderated_fields};case Tn.Link:return{recipient:ks.Link,allowed:t.allowed,moderated_fields:t.moderated_fields};case Tn.Marketplace:throw new Error("Marketplace sharing not supported for projects");case Tn.Private:return{recipient:ks.Private,allowed:t.allowed,moderated_fields:t.moderated_fields};case Tn.User:return{recipient:ks.User,allowed:t.allowed,moderated_fields:t.moderated_fields};case Tn.Workspace:throw new Error("Workspace sharing not supported for projects (did you mean WorkspaceLink?)");case Tn.WorkspaceLink:return{recipient:ks.WorkspaceLink,allowed:t.allowed,moderated_fields:t.moderated_fields}}}const Mk=[Gn.EMAIL,Gn.USER,Gn.GROUP,Gn.WORKSPACE,Gn.ALL];function Mqe(t){return t.length===0?null:t.reduce((e,n)=>Mk.indexOf(n.type)<Mk.indexOf(e.type)?e:n,t[0])}function Tqe(t,e){if(e==null)return t;function n(s){return typeof s=="object"&&s!=null?Array.isArray(s)?s.map(n):Object.fromEntries(Object.entries(s).map(([o,a])=>[o,n(a)])):s===null?void 0:s}return e=n(e),w(w({},t),e)}var _le=(t=>(t[t.Loading=0]="Loading",t[t.UploadingProfilePic=1]="UploadingProfilePic",t[t.GeneratingProfilePic=2]="GeneratingProfilePic",t[t.GizmoNameTooLong=3]="GizmoNameTooLong",t[t.GizmoDescriptionTooLong=4]="GizmoDescriptionTooLong",t[t.GizmoInstructionsTooLong=5]="GizmoInstructionsTooLong",t[t.NameEmpty=6]="NameEmpty",t[t.MissingPublicActionPrivacyPolicyURL=7]="MissingPublicActionPrivacyPolicyURL",t[t.MissingCategory=8]="MissingCategory",t))(_le||{});function Eqe(t){switch(t){case 0:return"Loading";case 1:return"Uploading profile picture";case 2:return"Generating profile picture";case 3:return"GPT name too long";case 4:return"GPT description too long";case 5:return"GPT instructions too long";case 6:return"GPT name cannot be empty";case 7:return"Public actions require valid privacy policy URLs";case 8:return"Public GPTs must have a category"}}function xle(t){return t==="link"||t==="marketplace"}function yle(t){try{return new URL(t),!0}catch(e){return!1}}function Aqe(t,e,n){var l,c,d,u,m,f;const s=t.name.length>dle,o=((c=(l=t.description)==null?void 0:l.length)!=null?c:0)>ule,a=((u=(d=t.instructions)==null?void 0:d.length)!=null?u:0)>mle,i=[];if((t==null?void 0:t.name)===""&&i.push(6),s&&i.push(3),o&&i.push(4),a&&i.push(5),e!=null&&xle(e)){const p=(m=t.tools)==null?void 0:m.filter(g=>g.type===Js.JIT_PLUGIN);for(const g of p){const h=(f=g.metadata)==null?void 0:f.privacy_policy_url;if(h==null||!yle(h)){i.push(7);break}}}return e===Tn.Marketplace&&n==null&&i.push(8),i}const Iqe={id:void 0,instructions:"",name:"",description:"",emoji:void 0,theme:void 0,profilePictureId:void 0,profilePictureUrl:void 0,promptStarters:[],sharing:{recipient:Tn.Private,subjects:[]},tools:[{type:Js.DALLE}],files:[],defaultModel:null,trainingDisabled:!1,liveVersion:0,contextStuffingBudget:null},vle={id:void 0,instructions:"",name:"",description:"",emoji:void 0,theme:void 0,profilePictureId:void 0,profilePictureUrl:void 0,promptStarters:[],sharing:{recipient:ks.Private,subjects:[]},tools:[{type:Js.DALLE}],files:[],defaultModel:null,trainingDisabled:!1,liveVersion:0,contextStuffingBudget:null},jqe=be({instructionsWarning:{id:"gizmo.instructionsWarning",defaultMessage:"Conversations with your GPT can potentially include part or all of the instructions provided."}}),Su=5,xg=new Set;class Bd{static upsert(e){return pe.safePost("/gizmos/snorlax/upsert",{requestBody:e})}static addHealthGoals(e,n){return pe.safePost("/gizmos/snorlax/{gizmo_id}/health-goals",{parameters:{path:{gizmo_id:e}},requestBody:{health_goals:n}})}static getSnorlaxSidebar(e=null){return jc.get("".concat(gr,"/gizmos/snorlax/sidebar"),{params:B(w({},e?{cursor:e}:{}),{conversations_per_gizmo:"0",owned_only:"true",limit:"".concat(om)})})}static async getSnorlaxHistory(e=null){const n=[];let s=e,o=0;for(;o<15;){o++;const a=await jc.get("".concat(gr,"/gizmos/snorlax/sidebar"),{params:w({conversations_per_gizmo:"".concat(Su),owned_only:"true"},s?{cursor:s}:{})});if(n.push(...a.items),s=a.cursor,n.length>om||!s)break;o===5&&Ee.count(Ae.DEFAULT,"projects.history.empty.load_more_5"),o===10&&Ee.count(Ae.DEFAULT,"projects.history.empty.load_more_10")}return s&&n.length===0&&Ee.count(Ae.DEFAULT,"projects.history.empty.load_more_15"),{items:n,cursor:s}}static async fetchSnorlaxHistory(e=null,n){const s=await this.getSnorlaxHistory(e);Oe.addFirstTiming("load.snorlaxHistory");const{items:o}=s;o.forEach(i=>{const l=i.gizmo.gizmo.id;n.setQueryData(zo(n,l).queryKey,c=>{if(!c)return i.gizmo}),n.setQueryData([Ns,{gizmoId:l}],c=>{if(!c)return xg.add(l),{pages:[i.conversations],pageParams:[]}})});const a=o.map(i=>({gizmo:i.gizmo}));return B(w({},s),{items:a})}static delete(e){return pe.safeDelete("/gizmos/{gizmo_id}",{parameters:{path:{gizmo_id:e}}})}static join(e){return pe.safePost("/gizmos/snorlax/join",{parameters:{query:{gizmo_id:e}}})}static leave(e){return pe.safePost("/gizmos/snorlax/leave",{requestBody:e})}}const to="snorlax-history",Vu="NEW_SNORLAX_KEY",ble="snorlax-history",Sle=1,Pqe=In(t=>Em(t,()=>io({queryKey:["snorlax","recent",{limit:om}],queryFn:()=>Bd.getSnorlaxSidebar(),enabled:xe(t,"491279851")})));function HP(t){return{mutationFn:async({update:e,id:n})=>{var k,M,T,E;if(!n)throw new Error("No gizmo ID found for upsert");let s,o;if(n===Vu)s=vle;else{if(o=t.getQueryData(zo(t,n,!1).queryKey),o||(o=await Am.getGizmo(n,!1)),!o)throw new Error("No existing gizmo resource found for upsert");s=$P(o)}const a=typeof e=="function"?e(s):w(w({},s),e);if(Sd(a,s))return{id:n};const{id:i,instructions:l,name:c,description:d,emoji:u,theme:m,profilePictureId:f,profilePictureUrl:p,promptStarters:g,files:h,sharing:x,trainingDisabled:y}=a;if(((M=(k=o==null?void 0:o.gizmo)==null?void 0:k.gizmo_snorlax_type)!=null?M:null)&&x.subjects.length>0)throw new Error(Gt.firstPartyProjectShareForbidden.defaultMessage);if(i!==n&&n!==Vu)throw new Error("Error updating project. ID mismatch");const v=(T=a.memoryScope)!=null?T:li.UNSET,S={gizmo_id:n!==Vu?n:void 0,instructions:l,display:{name:c,description:d,emoji:u,theme:m,profile_pic_id:f,profile_picture_url:p,prompt_starters:g},tools:[],memory_scope:v,files:h.map(A=>B(w({},A),{location:C$.FILE_SERVICE})),training_disabled:y,sharing:[...x.subjects.some(A=>!S$(A))?[]:[{type:Tn.Private,capabilities:b$}],...x.subjects.map(wle)],categories:void 0},C=await Bd.upsert(S);if(C.error)throw new w$;return{id:(E=C.resource)==null?void 0:E.gizmo.id,resource:C.resource}},scope:{id:"snorlax"},onSettled:e=>{e!=null&&e.resource&&(t.setQueryData(zo(t,e.resource.gizmo.id,!1).queryKey,e.resource),t.setQueryData([to],WP({gizmo:e.resource}))),Jm(t)}}}function Nqe(){const t=xt();return Bt(HP(t))}function WP(t){const e={items:[t],cursor:null};return n=>n?B(w({},n),{pages:n.pages.map((s,o)=>o===0?B(w({},s),{items:[t,...s.items.filter(a=>a.gizmo.gizmo.id!==t.gizmo.gizmo.id)]}):B(w({},s),{items:s.items.filter(a=>a.gizmo.gizmo.id!==t.gizmo.gizmo.id)}))}):{pages:[e],pageParams:[]}}const Cle={[Gn.EMAIL]:ks.Email,[Gn.USER]:ks.User,[Gn.GROUP]:ks.Group,[Gn.WORKSPACE]:ks.WorkspaceLink,[Gn.ALL]:ks.Link};function wle(t){const e=Cle[t.type];if(!e)throw new Error("Unknown sharing subject type: "+t.type);return B(w({},t),{type:e})}function gS(t=null){const e=G(),n=wA(e),s=xt(),o=fb(ble,Sle,[to]),{data:a,fetchNextPage:i,hasNextPage:l,isLoading:c,isFetchingNextPage:d,isError:u,refetch:m}=vi({queryKey:[to],queryFn:async({pageParam:p})=>Bd.fetchSnorlaxHistory(p,s),initialPageParam:t,getNextPageParam:p=>{var g;return(g=p.cursor)!=null?g:void 0},enabled:n,placeholderData:o});return{snorlaxes:_.useMemo(()=>{var p;return(p=a==null?void 0:a.pages.flatMap(g=>g.items))!=null?p:[]},[a]),data:a,fetchNextPage:i,hasNextPage:l,refetch:m,isLoading:c,isFetchingNextPage:d,isError:u}}async function Rqe(t){const e=xt();_.useEffect(()=>{xg.has(t)&&(e.invalidateQueries({queryKey:zP(t)}),xg.delete(t))},[t,e])}function zP(t){return[Ns,{gizmoId:t}]}function qP(t){return R6({queryKey:zP(t),queryFn:async({pageParam:e})=>(xg.delete(t),await Am.getProjectConversations(t,e)),enabled:$s(t),initialPageParam:"0",getNextPageParam:e=>{var n;return(n=e.cursor)!=null?n:void 0}})}function kle(t){const{data:e,fetchNextPage:n,hasNextPage:s,isLoading:o,isPending:a,isFetchingNextPage:i,isError:l,isFetching:c,refetch:d}=vi(qP(t));return{items:_.useMemo(()=>{var m;return(m=e==null?void 0:e.pages.flatMap(f=>f.items))!=null?m:[]},[e]),data:e,fetchNextPage:n,hasNextPage:s,refetch:d,isLoading:o,isPending:a,isFetching:c,isFetchingNextPage:i,isError:l}}function Jm(t){t.invalidateQueries({queryKey:[to]})}function YP(t){return e=>{var n;return e&&B(w({},e),{pages:(n=e==null?void 0:e.pages)==null?void 0:n.map(s=>B(w({},s),{items:s.items.filter(o=>o.gizmo.gizmo.id!==t)}))})}}function Lqe(){const t=xt(),e=at();return Bt({mutationFn:async({gizmoId:n})=>(await Bd.join(n),{gizmoId:n}),onError:n=>{const s=kA(n);e(MA(TA.CUSTOM_ERROR,void 0,s))},onSettled:async(n,s,{gizmoId:o})=>{Jm(t),o&&await t.invalidateQueries({queryKey:zo(t,o,!1).queryKey,refetchType:"all"})}})}function Oqe(){const t=xt(),e=Ut();return Bt({mutationFn:async({gizmoId:n})=>(await Bd.delete(n),{gizmoId:n}),onMutate:async({gizmoId:n})=>{await t.cancelQueries({queryKey:zo(t,n,!1).queryKey}),await t.cancelQueries({queryKey:[to]}),await t.cancelQueries({queryKey:[Ns,{gizmoId:n}]});const s=t.getQueryData([to]);return t.setQueryData([to],YP(n)),{prevProjectHistoryData:s}},onError:(n,s,o)=>{o!=null&&o.prevProjectHistoryData&&t.setQueryData([to],o.prevProjectHistoryData),e.danger(Gt.deleteProjectFailedToast,{toastId:"snorlax_deletion_modal_delete_project_failed",hasCloseButton:!0})},onSettled:n=>{const s=n==null?void 0:n.gizmoId;Jm(t),ro(t,s),s&&t.invalidateQueries({queryKey:zo(t,s,!1).queryKey})}})}function Dqe(){const t=xt(),e=Ut();return Bt({mutationFn:async({gizmoId:n,saveCopy:s})=>{const o=await Bd.leave({gizmo_id:n,save_copy:s});return{gizmoId:n,resource:fle(o)?o.resource:void 0}},onMutate:async({gizmoId:n})=>{await t.cancelQueries({queryKey:zo(t,n,!1).queryKey}),await t.cancelQueries({queryKey:[to]}),await t.cancelQueries({queryKey:[Ns,{gizmoId:n}]});const s=t.getQueryData([to]);return t.setQueryData([to],YP(n)),{prevProjectHistoryData:s}},onError:(n,s,o)=>{o!=null&&o.prevProjectHistoryData&&t.setQueryData([to],o.prevProjectHistoryData),e.danger(Gt.leaveProjectFailedToast,{toastId:"snorlax_leave_modal_leave_project_failed",hasCloseButton:!0})},onSettled:n=>{n!=null&&n.resource&&(t.setQueryData(zo(t,n.resource.gizmo.id,!1).queryKey,n.resource),t.setQueryData([to],WP({gizmo:n.resource}))),Jm(t)}})}const Tk=new Map;function Fqe(t){const e=Tk.get(t);if(e)return e;const n=Eb(Mle,2e3,{trailing:!0});return Tk.set(t,n),n}async function Mle({projectId:t,upsertProjectMutation:e,pendingFileUpsertMutationsRef:n}){const s=[],o=i=>{const l=n.current;return l.forEach(({update:c})=>{i=c(i)}),s.push(...l),i};await e.mutateAsync({id:t,update:o}),s.forEach(({onSuccess:i})=>{i==null||i()});const a=s.map(({mutationId:i})=>i);n.current=n.current.filter(({mutationId:i})=>!a.includes(i))}const Xs={gray:{solid:{50:"#f9f9f9",400:"#8f8f8f"}},green:{400:"#04b84c"},purple:{400:"#924ff7"},blue:{400:"#0285ff"},orange:{400:"#fb6a22"},red:{400:"#fa423e"},pink:{400:"#ff66ad"},yellow:{400:"#ffc300"}},tn=new Set;function Bqe(){return Promise.allSettled(Array.from(tn).map(t=>t()))}const ZP=j(()=>I(()=>import("./jy80tlibto3eimlf.js").then(t=>t._),__vite__mapDeps([143,1])));tn.add(ZP.prefetch);const KP=j(()=>I(()=>import("./lqf1d5aq38lhhvj4.js").then(t=>t._),__vite__mapDeps([20,1])));tn.add(KP.prefetch);const QP=j(()=>I(()=>import("./jmnvgtzhse37m0ro.js").then(t=>t._),__vite__mapDeps([144,1])));tn.add(QP.prefetch);const JP=j(()=>I(()=>import("./fomrqem1h10p4nhy.js").then(t=>t._),__vite__mapDeps([19,1])));tn.add(JP.prefetch);const XP=j(()=>I(()=>import("./7drepi7d7klmi8rs.js").then(t=>t._),__vite__mapDeps([145,1])));tn.add(XP.prefetch);const e8=j(()=>I(()=>import("./neqq8ytwrb2pfsnd.js").then(t=>t._),__vite__mapDeps([146,1])));tn.add(e8.prefetch);const t8=j(()=>I(()=>import("./n2ejmom9s19yf10c.js").then(t=>t._),__vite__mapDeps([147,1])));tn.add(t8.prefetch);const n8=j(()=>I(()=>import("./j4okl08ry9q28iod.js").then(t=>t._),__vite__mapDeps([148,1])));tn.add(n8.prefetch);const s8=j(()=>I(()=>import("./n66ksdtiegytmoc2.js").then(t=>t._),__vite__mapDeps([149,1])));tn.add(s8.prefetch);const o8=j(()=>I(()=>import("./jv60r5969xbi17uj.js").then(t=>t._),__vite__mapDeps([150,1])));tn.add(o8.prefetch);const a8=j(()=>I(()=>import("./d3dln9os66orvpws.js").then(t=>t._),__vite__mapDeps([151,1])));tn.add(a8.prefetch);const r8=j(()=>I(()=>import("./b25488i064kv0fy8.js").then(t=>t._),__vite__mapDeps([152,1])));tn.add(r8.prefetch);const i8=j(()=>I(()=>import("./n4tew1fjlr8lryav.js").then(t=>t._),__vite__mapDeps([153,1])));tn.add(i8.prefetch);const l8=j(()=>I(()=>import("./edqpi59mx50h2olv.js").then(t=>t._),__vite__mapDeps([154,1])));tn.add(l8.prefetch);const c8=j(()=>I(()=>import("./ca6k1nnqi7yhzx8h.js").then(t=>t._),__vite__mapDeps([155,1])));tn.add(c8.prefetch);const d8=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0));tn.add(d8.prefetch);const u8=j(()=>I(()=>import("./eahqa2opfkdu04yb.js").then(t=>t._),__vite__mapDeps([16,1])));tn.add(u8.prefetch);const m8=j(()=>I(()=>import("./ervkdkvfcpetg66z.js").then(t=>t._),__vite__mapDeps([156,1])));tn.add(m8.prefetch);const f8=j(()=>I(()=>import("./h5p5j45icn4dtxiq.js").then(t=>t._),__vite__mapDeps([157,1])));tn.add(f8.prefetch);const p8=j(()=>I(()=>import("./l6gjlh1w2nj1iunq.js").then(t=>t._),__vite__mapDeps([158,1])));tn.add(p8.prefetch);const g8=j(()=>I(()=>import("./li7c43yugisf62ut.js").then(t=>t._),__vite__mapDeps([159,1])));tn.add(g8.prefetch);const h8=j(()=>I(()=>import("./emsd9j2cfeekq0nv.js").then(t=>t._),__vite__mapDeps([160,1])));tn.add(h8.prefetch);const _8=j(()=>I(()=>import("./mtv2tygp7qg4w29d.js").then(t=>t._),__vite__mapDeps([161,1])));tn.add(_8.prefetch);const x8=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])));tn.add(x8.prefetch);const y8=j(()=>I(()=>import("./haju4e4zwcujvapb.js").then(t=>t._),__vite__mapDeps([162,1])));tn.add(y8.prefetch);const v8=j(()=>I(()=>import("./gh6n1nw0no6exqi4.js").then(t=>t._),__vite__mapDeps([163,1])));tn.add(v8.prefetch);const b8=j(()=>I(()=>import("./igs51pxvo37j2sw6.js").then(t=>t._),__vite__mapDeps([164,1])));tn.add(b8.prefetch);const S8=j(()=>I(()=>import("./hnj5r83zdnbmj5rs.js").then(t=>t._),__vite__mapDeps([165,1])));tn.add(S8.prefetch);const C8=j(()=>I(()=>import("./geuwu6jacpefv5lc.js").then(t=>t._),__vite__mapDeps([166,1])));tn.add(C8.prefetch);const w8=j(()=>I(()=>import("./ok5p8aikglnqqd82.js").then(t=>t._),__vite__mapDeps([167,1])));tn.add(w8.prefetch);const k8=j(()=>I(()=>import("./m53ly4eu8e9c6q19.js").then(t=>t._),__vite__mapDeps([12,1])));tn.add(k8.prefetch);const M8=j(()=>I(()=>import("./gqfz9aslm9c83gz5.js").then(t=>t._),__vite__mapDeps([168,1])));tn.add(M8.prefetch);const bn={red:Xs.red[400],orange:Xs.orange[400],yellow:Xs.yellow[400],green:Xs.green[400],blue:Xs.blue[400],purple:Xs.purple[400],pink:Xs.pink[400]},Tle=new Map([["pencil","edit"],["code-brackets","function"],["balancing-scale","scale"],["globe-spin","desk-globe"],["lite","lotus"],["pens","customize"]]),Ele=t=>{var n;const e=(n=Tle.get(t))!=null?n:t;return T8[e]},Uqe={[bn.red]:{color:bn.red,label:He({defaultMessage:"Red",id:"project-color-red"})},[bn.orange]:{color:bn.orange,label:He({defaultMessage:"Orange",id:"project-color-orange"})},[bn.yellow]:{color:bn.yellow,label:He({defaultMessage:"Yellow",id:"project-color-yellow"})},[bn.green]:{color:bn.green,label:He({defaultMessage:"Green",id:"project-color-green"})},[bn.blue]:{color:bn.blue,label:He({defaultMessage:"Blue",id:"project-color-blue"})},[bn.purple]:{color:bn.purple,label:He({defaultMessage:"Purple",id:"project-color-purple"})},[bn.pink]:{color:bn.pink,label:He({defaultMessage:"Pink",id:"project-color-pink"})}},T8={folder:{id:"folder",icon:l8,label:He({id:"U1Ed2E",defaultMessage:"Folder"})},"currency-dollar":{id:"currency-dollar",icon:t8,label:He({id:"O1L2ji",defaultMessage:"Currency Dollar"})},book:{id:"book",icon:QP,label:He({id:"Ikd2nV",defaultMessage:"Book"})},"graduation-cap":{id:"graduation-cap",icon:u8,label:He({id:"XyOlu9",defaultMessage:"Graduation Cap"})},edit:{id:"edit",icon:x8,label:He({id:"e+bON4",defaultMessage:"Pencil"})},writing:{id:"writing",icon:M8,label:He({id:"Xsx76J",defaultMessage:"Writing"})},function:{id:"function",icon:XP,label:He({id:"1dLIWL",defaultMessage:"Code Brackets"})},terminal:{id:"terminal",icon:k8,label:He({id:"A7r7WM",defaultMessage:"Terminal"})},music:{id:"music",icon:h8,label:He({id:"vhV09/",defaultMessage:"Music"})},popcorn:{id:"popcorn",icon:b8,label:He({id:"IBA2my",defaultMessage:"Popcorn"})},customize:{id:"customize",icon:n8,label:He({id:"NoBDe3",defaultMessage:"Customize"})},palette:{id:"palette",icon:e8,label:He({id:"1NjHcj",defaultMessage:"Palette"})},stethoscope:{id:"stethoscope",icon:C8,label:He({id:"m/9B0l",defaultMessage:"Stethoscope"})},health:{id:"health",icon:m8,label:He({id:"uyQlnK",defaultMessage:"Health"})},lotus:{id:"lotus",icon:g8,label:He({id:"XVtU4x",defaultMessage:"Lotus"})},suitcase:{id:"suitcase",icon:w8,label:He({id:"Q7L6wE",defaultMessage:"Suitcase"})},"bar-chart":{id:"bar-chart",icon:KP,label:He({id:"clYNPV",defaultMessage:"Bar Chart"})},kettlebell:{id:"kettlebell",icon:p8,label:He({id:"d8EgqT",defaultMessage:"Kettlebell"})},dumbbell:{id:"dumbbell",icon:s8,label:He({id:"4f2kWJ",defaultMessage:"Dumbbell"})},logs:{id:"logs",icon:r8,label:He({id:"Uo10ll",defaultMessage:"Logs"})},scale:{id:"scale",icon:ZP,label:He({id:"Duq21q",defaultMessage:"Balancing Scale"})},"desk-globe":{id:"desk-globe",icon:c8,label:He({id:"2oKfXd",defaultMessage:"Globe Spin"})},plane:{id:"plane",icon:y8,label:He({id:"Mp7VbF",defaultMessage:"Plane"})},globe:{id:"globe",icon:d8,label:He({id:"7Gk2Au",defaultMessage:"Globe"})},wrench:{id:"wrench",icon:S8,label:He({id:"cVZEQn",defaultMessage:"Wrench"})},paw:{id:"paw",icon:_8,label:He({id:"SwLz4n",defaultMessage:"Paw"})},flask:{id:"flask",icon:i8,label:He({id:"YRGg1h",defaultMessage:"Flask"})},brain:{id:"brain",icon:JP,label:He({id:"xDBu5X",defaultMessage:"Brain"})},heart:{id:"heart",icon:f8,label:He({id:"7bZxVY",defaultMessage:"Heart"})},plant:{id:"plant",icon:v8,label:He({id:"h4prM6",defaultMessage:"Plant"})}};function po(t){return t==null?null:Ele(t)}function Ale(){return Ile}const Ile={icon:a8,label:He({id:"i39yRC",defaultMessage:"Emoji"}),id:"default",hoverIcon:o8},jle=[{label:He({id:"cvNQv+",defaultMessage:"Investing"}),icon:po("currency-dollar"),color:bn.green,emoji:"currency-dollar"},{label:He({id:"fxIuzw",defaultMessage:"Homework"}),icon:po("graduation-cap"),color:bn.blue,emoji:"graduation-cap"},{label:He({id:"x1ggA9",defaultMessage:"Writing"}),icon:po("writing"),color:bn.purple,emoji:"writing"},{label:He({id:"FdXDrg",defaultMessage:"Health"}),icon:po("health"),color:bn.red,emoji:"health"},{label:He({id:"ftkSeM",defaultMessage:"Travel"}),icon:po("plane"),color:bn.yellow,emoji:"plane"}],Ple=[{label:He({id:"dNjvRY",defaultMessage:"Research"}),icon:po("desk-globe"),color:bn.blue,emoji:"desk-globe"},{label:He({id:"lPMK20",defaultMessage:"Planning"}),icon:po("book"),color:bn.green,emoji:"book"},{label:He({id:"LM4RDS",defaultMessage:"Code"}),icon:po("function"),color:bn.orange,emoji:"function"},{label:He({id:"umKvY2",defaultMessage:"Meetings"}),icon:po("logs"),color:bn.purple,emoji:"logs"},{label:He({id:"NXAQZ1",defaultMessage:"Onboarding"}),icon:po("suitcase"),color:bn.yellow,emoji:"suitcase"},{label:He({id:"4tnZcg",defaultMessage:"Brainstorms"}),icon:po("brain"),color:bn.pink,emoji:"brain"}];function Vqe(t){return k$(t)?Ple:jle}function Gqe(){return Object.values(T8)}const Nle=j(()=>I(()=>import("./edqpi59mx50h2olv.js").then(t=>t._),__vite__mapDeps([154,1])),{loading:t=>L(t)}),Rle=j(()=>I(()=>import("./muqo0278pvyecf62.js").then(t=>t._),__vite__mapDeps([169,1])),{loading:t=>L(t)});function E8(t){"use forget";const e=H.c(23),{color:n,emoji:s,className:o,isSharedProject:a,size:i,strict:l}=t,c=s===void 0?null:s,d=J();let u;if(e[0]!==o||e[1]!==n||e[2]!==c||e[3]!==d||e[4]!==a||e[5]!==i||e[6]!==l){const m=W("icon",i==="lg"&&"h-8 w-8 max-md:h-6 max-md:w-[28px] max-md:h-[28px]",o);let f,p,g,h,x,y;if(e[8]!==n||e[9]!==c||e[10]!==d||e[11]!==a||e[12]!==l){const b=po(c),v=!!b;g=!v&&!l;const S=Ale();let C;f=null;let k=null;v?(C=b.icon,k=b):g?(C=S.icon,f=S.hoverIcon,k=S):C=a?Rle:Nle;const M=g&&"relative";e[19]!==M?(x=W(M),e[19]=M,e[20]=x):x=e[20];const T=n!=null?n:void 0;e[21]!==T?(y={color:T},e[21]=T,e[22]=y):y=e[22],p=C,h=k?d.formatMessage(k.label):void 0,e[8]=n,e[9]=c,e[10]=d,e[11]=a,e[12]=l,e[13]=f,e[14]=p,e[15]=g,e[16]=h,e[17]=x,e[18]=y}else f=e[13],p=e[14],g=e[15],h=e[16],x=e[17],y=e[18];u=r.jsxs("div",{className:x,style:y,children:[r.jsx(p,{"aria-label":h,className:W(m,g&&"group-hover:invisible group-data-[state=open]:invisible")}),g&&f&&r.jsx(f,{"aria-hidden":!0,inert:!0,className:W(m,"invisible absolute inset-0 place-self-center justify-self-center group-hover:visible group-data-[state=open]:visible")})]}),e[0]=o,e[1]=n,e[2]=c,e[3]=d,e[4]=a,e[5]=i,e[6]=l,e[7]=u}else u=e[7];return u}const $qe=j(()=>I(()=>import("./fiwz0q9upm2smym5.js"),__vite__mapDeps([170,1,29,30,171])).then(t=>t.SnorlaxFolderAnimation),{loading:({color:t,isSharedProject:e,strict:n})=>r.jsx(E8,{color:t,isSharedProject:e,strict:n})}),Lle=j(()=>I(()=>import("./klevl8sdnpainbl3.js").then(t=>t._),__vite__mapDeps([172,1])),{loading:t=>L(t)}),d0=j(()=>I(()=>Promise.resolve().then(()=>cfe),void 0).then(t=>t.CreateOrEditProjectModalAsync));function By(t){"use forget";const e=H.c(47),n=J(),s=xt(),o=G(),a=!t.inSidebarFlyout,{canCreate:i}=M$(),l=at(),[c,d]=_.useState(!1),{snorlaxes:u,hasNextPage:m,fetchNextPage:f,isLoading:p,isFetchingNextPage:g,isError:h}=gS();let x,y,b,v,S;if(e[0]!==a||e[1]!==i||e[2]!==o||e[3]!==m||e[4]!==c||e[5]!==n||e[6]!==h||e[7]!==p||e[8]!==l||e[9]!==f||e[10]!==t||e[11]!==s||e[12]!==u){const M=t.inSidebarFlyout?u.slice(om):u;let T;e[18]!==t.currentGizmoId?(T=D=>{const{gizmo:F}=D;return F.gizmo.id!==t.currentGizmoId},e[18]=t.currentGizmoId,e[19]=T):T=e[19];const E=M.filter(T),A=E.length===0;let N;e[20]!==m||e[21]!==p||e[22]!==f?(N=D=>{if(p||D==null)return;const F=new IntersectionObserver(V=>{V[0].isIntersecting&&m&&f()});return F.observe(D),()=>{F.disconnect()}},e[20]=m,e[21]=p,e[22]=f,e[23]=N):N=e[23];const R=N,O=a&&i;x=A&&!h?R:void 0,e[24]!==A||e[25]!==p?(y=A&&p&&r.jsxs(kd,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),e[24]=A,e[25]=p,e[26]=y):y=e[26],e[27]!==c||e[28]!==n||e[29]!==A||e[30]!==h||e[31]!==s?(b=A&&h&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[n.formatMessage(Gt.unableToLoadHistory),!c&&r.jsx("div",{className:"mt-1",children:r.jsx(he,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{d(!0),Jm(s)},children:n.formatMessage(Gt.retryLoadingHistory)})})]}),e[27]=c,e[28]=n,e[29]=A,e[30]=h,e[31]=s,e[32]=b):b=e[32],e[33]!==o||e[34]!==l||e[35]!==t||e[36]!==O?(v=O&&r.jsx(r.Fragment,{children:r.jsx(K.Item,{icon:Lle,label:r.jsx(P,w({},Gt.newProjectButton)),onSelect:()=>{gt(o,d0,{onClose:()=>Cs(o,d0),onSuccess:async D=>{D&&(await t.onUpdateConversationGizmo(D),l("/g/".concat(D,"/project")),Cs(o,d0))}})}})}),e[33]=o,e[34]=l,e[35]=t,e[36]=O,e[37]=v):v=e[37],S=!p&&!A&&E.map((D,F)=>{const{gizmo:V}=D,z=F===E.length-1?R:void 0;return r.jsxs(r.Fragment,{children:[O&&F===0&&r.jsx(K.Separator,{},"new-project-separator"),r.jsx(K.LinkItem,{to:V!=null?km(o,V):"/",icon:r.jsx(E8,{color:V.gizmo.display.theme,emoji:V.gizmo.display.emoji,strict:!0}),label:V.gizmo.display.name,onClick:()=>{t.inSidebarFlyout||t.onUpdateConversationGizmo(V.gizmo.id)},ref:z},V.gizmo.id)]})}),e[0]=a,e[1]=i,e[2]=o,e[3]=m,e[4]=c,e[5]=n,e[6]=h,e[7]=p,e[8]=l,e[9]=f,e[10]=t,e[11]=s,e[12]=u,e[13]=x,e[14]=y,e[15]=b,e[16]=v,e[17]=S}else x=e[13],y=e[14],b=e[15],v=e[16],S=e[17];let C;e[38]!==g?(C=g&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),e[38]=g,e[39]=C):C=e[39];let k;return e[40]!==x||e[41]!==y||e[42]!==b||e[43]!==v||e[44]!==S||e[45]!==C?(k=r.jsxs("div",{ref:x,children:[y,b,v,S,C]}),e[40]=x,e[41]=y,e[42]=b,e[43]=v,e[44]=S,e[45]=C,e[46]=k):k=e[46],k}const Ole=(t,e)=>{const n=T$(t,()=>qP(e.id)),s=Qe(!1),o=Qe(!1),a=It(()=>n().hasNextPage&&!i()),i=It(()=>!o()&&(n().fetchStatus==="fetching"||s()||n().isFetchingNextPage)),l={awaitingManualRetry$:o,all$:It(()=>{var c,d;return(d=(c=n().data)==null?void 0:c.pages.flatMap(u=>u.items))!=null?d:null}),preload$:()=>{n().refetch()},canFetchMore$:It(()=>a()&&!i()&&!n().isFetchingNextPage&&!s()&&n().fetchStatus==="idle"&&!l.awaitingManualRetry$()),cursor$:It(()=>{var u;const c=n().data;if(!c||!Array.isArray(c.pages)||c.pages.length===0)return null;const d=c.pages[c.pages.length-1];return(u=d==null?void 0:d.cursor)!=null?u:null}),canShowConversations$:It(()=>{const c=l.all$();return!!(c&&c.length>0||i()||o())}),fetchMore$:()=>{s.set(!0),n().fetchNextPage(),setTimeout(()=>s.set(!1),1e3)},failureCount$:It(()=>n().failureCount),error$:It(()=>n().error),isFetchNextPageError$:It(()=>n().isFetchNextPageError),hasNextPage$:a,isLoading$:i};return Mo(()=>({isFetchNextPageError:l.isFetchNextPageError$(),failureCount:l.failureCount$()}),({isFetchNextPageError:c,failureCount:d})=>{c&&d>0&&l.awaitingManualRetry$.set(!0)}),l},Xm=xs(()=>Qe({}));function Dle(t,e){var a;const n=Xm(t),s=S1(n(),"theme",e.gizmo.id);let o;return s===void 0?o=(a=e.gizmo.display.theme)!=null?a:null:o=s,o}function Fle(t,e){var a;const n=Xm(t),s=S1(n(),"emoji",e.gizmo.id);return(a=s!=null?s:e.gizmo.display.emoji)!=null?a:null}function A8(t,e){var a;const n=Xm(t),s=S1(n(),"name",e.gizmo.id);return(a=s!=null?s:e.gizmo.display.name)!=null?a:null}function I8(t,e){const n=Xm(t);return S1(n(),"pendingFiles",e)}const S1=(t,e,n)=>{if(n===Vu||!n)return;const s="".concat(n,"-").concat(e);return t[s]},Cu=(t,e,n,s)=>{if(e===Vu)return;Xm(t).set(a=>{const i="".concat(e,"-").concat(n),l=w({},a);return s===void 0?delete l[i]:l[i]=s,l})},u0=(t,e,n)=>{Cu(t,e,n,void 0)};function Ble({ctx:t,id:e,theme:n,emoji:s,name:o,pendingFiles:a}){if(n!==void 0&&Cu(t,e,"theme",n),s!==void 0&&Cu(t,e,"emoji",s),o!==void 0&&Cu(t,e,"name",o),a!==void 0){let i=I8(t,e);i==null&&(i=new Map),a.value!=null?i.set(a.key,a.value):i.delete(a.key),Cu(t,e,"pendingFiles",i)}}const Ule=t=>{var e;return t.type===Gn.EMAIL?{id:t.user_email,label:t.user_email}:t.type===Gn.GROUP?{id:t.group_id,label:t.group_name}:t.type===Gn.USER?{id:t.user_id,label:(e=t.user_name)!=null?e:"Unknown",sublabel:t.user_email}:null};var LE;const j8=ct.div(LE||(LE=rt(["icon-lg relative flex items-center justify-center rounded-full text-[10px]"]))),Vle=({monograms:t,variant:e="knockout",showTooltip:n=!0})=>{const o=t.slice(0,2),a=t.length-2;return r.jsxs("div",{className:"flex",children:[o.map((i,l)=>r.jsx("div",{className:W("relative rounded-full not-first:ms-[-6px]",e==="knockout"&&"bg-token-bg-primary p-0.5"),style:{zIndex:o.length-l},children:r.jsx(Gle,{monogram:i,showTooltip:n})},i.id)),a>0&&r.jsx("div",{className:W("relative ms-[-6px] rounded-full first:ms-0",e==="knockout"&&"bg-token-bg-primary p-0.5"),style:{zIndex:0},children:r.jsx(j8,{className:"text-token-text-primary bg-token-main-surface-tertiary",children:r.jsx(P,{id:"QY9mVO",values:{remaining:a},defaultMessage:"+{remaining}"})})})]})},Gle=({monogram:t,zIndex:e=0,className:n,showTooltip:s=!0})=>{const o=G(),a=ut(o),i=a==null?void 0:a.isWorkspaceAccount();if(!t)return null;const l=r.jsx(j8,{className:W("text-white group-data-[disabled]/sharing-row:opacity-50",qY(t.id),n),style:{zIndex:e},children:h7(t.label)});return s?r.jsx(kt,{label:t.label,secondaryLabel:!i&&t.sublabel,contentClassName:"touch:hidden",labelClassName:"max-w-[200px] truncate",secondaryLabelClassName:"max-w-[200px] truncate",side:"top",children:l}):l},$le="Loading project",Ud=A$("Project"),Hqe=_.createContext(null),P8=Ud(t=>It(()=>{var e,n;return(n=(e=_h(t.ctx))==null?void 0:e.isWorkspaceAccount())!=null?n:!1})),N8=Ud(t=>It(()=>{var i,l;const e=_h(t.ctx),s=(e==null?void 0:e.getWorkspaceId())!=null?I$(t.ctx).data:void 0;return xe(t.ctx,"2913573978")?(i=s==null?void 0:s.beta_settings)==null?void 0:i.project_sharing:((l=s==null?void 0:s.share_settings)==null?void 0:l.chat_share_setting)!==j$.NO_ONE})),R8=Ud(t=>It(()=>{const e=N8(t)(),n=P8(t)();return xe(t.ctx,"773249106")&&(e!=null?e:!n)})),hS=Ud(t=>It(()=>{var a,i,l,c;const e=t.gizmo$(),n=(l=(i=(a=e==null?void 0:e.gizmo)==null?void 0:a.sharing)==null?void 0:i.subjects)!=null?l:[],s=[],o=(c=e==null?void 0:e.gizmo)==null?void 0:c.author;return o&&o.display_name&&s.push({id:o.user_id,label:o.display_name,sublabel:o.user_email}),n.forEach(d=>{const u=Ule(d);u&&s.push(u)}),s})),Wqe=Ud(t=>It(()=>hS(t)().length>1)),Hle=Ud(t=>It(()=>{var o,a,i;const e=t.gizmo$(),n=(i=(a=(o=e==null?void 0:e.gizmo)==null?void 0:o.sharing)==null?void 0:a.subjects)!=null?i:[],s=hS(t)();return s.length<=1?!1:R8(t)()&&n.length>0&&s.length>1})),Wle=(t,e)=>{const n=Qo(t),s=Em(t,()=>zo(n,e)),o={ctx:t,id:e,serverState$:s,queueUpdate$:async({theme:a,emoji:i,name:l,opts:c,withPostUpdate:d=!0})=>{if(Ble({ctx:t,id:e,theme:a,emoji:i,name:l}),d){const{resource:u}=await o.postUpdate$(c);return{id:o.id,resource:u}}return{id:o.id}},lastScrollPosition$:Qe(null),mobileHeaderState$:Qe(null),postUpdate$:async a=>{var c,d,u,m;const{mutate:i,result$:l}=EA(t,HP(n));return i({update:w({name:(c=o.title$())!=null?c:void 0,theme:(d=o.theme$())!=null?d:void 0,emoji:(u=o.emoji$())!=null?u:void 0},a),id:o.id}),await yh(()=>!l().isPending),u0(t,o.id,"name"),u0(t,o.id,"theme"),u0(t,o.id,"emoji"),{id:o.id,resource:(m=l().data)==null?void 0:m.resource}},conversations$:Qe(()=>Ole(t,o)),isSkeleton$:It(()=>s().data===void 0),gizmo$:It(()=>{var a;return(a=s().data)!=null?a:null}),status$:It(()=>{const a=o.conversations$().all$();return a?a.length>0?"has-conversations":"empty":"loading"}),theme$:It(()=>{const a=s().data;return a?Dle(t,a):null}),isShared$:It(()=>{const a=s().data;return a?vh(a):null}),emoji$:It(()=>{var l;const a=s().data;if(!a)return null;const i=Fle(t,a);return(l=i!=null?i:a.gizmo.display.emoji)!=null?l:null}),title$:It(()=>{var c;const a=s().data;if(o.isSkeleton$())return $le;if(!a)return null;const l=A8(t,a);return(c=l!=null?l:a.gizmo.display.name)!=null?c:null}),filesCount$:It(()=>{var l,c;const a=s().data;if(!a)return null;const i=I8(t,a.gizmo.id);return((l=a.files.length)!=null?l:0)+((c=i==null?void 0:i.size)!=null?c:0)})};return o},_S=E$(Wle),Ek=j(()=>I(()=>import("./nri0hrl47ygf8w0p.js"),__vite__mapDeps([173,1,29,30,174])).then(t=>t.ShareProjectChatModal));function zle(t){"use forget";const e=H.c(19),{clientThreadId:n}=t,s=G();let o;e[0]!==s?(o=ut(s),e[0]=s,e[1]=o):o=e[1];const a=o,i=Xn(n),[l,c,d]=Ue(n,qle),u=a==null?void 0:a.normalizedAccountUserId,{data:m}=Pa(d);let f;e[2]!==m?(f=m?vh(m):!1,e[2]=m,e[3]=f):f=e[3];const p=f;let g;e[4]!==s?(g=xe(s,"773249106"),e[4]=s,e[5]=g):g=e[5];const h=g;let x;e[6]!==s||e[7]!==d?(x=Tl(s,d),e[6]=s,e[7]=d,e[8]=x):x=e[8];const v=(l||u)&&m&&(i||c)&&x&&(p||l&&l!==u)&&h;let S;e[9]!==s||e[10]!==m||e[11]!==(l==null?void 0:l.id)||e[12]!==i||e[13]!==c||e[14]!==u?(S=()=>{var k,M;m&&gt(s,Ek,{gizmo:m,serverThreadId:i!=null?i:c,ownerUserId:(M=(k=l==null?void 0:l.id)!=null?k:u)!=null?M:"",onClose:()=>Cs(s,Ek)})},e[9]=s,e[10]=m,e[11]=l==null?void 0:l.id,e[12]=i,e[13]=c,e[14]=u,e[15]=S):S=e[15];let C;return e[16]!==v||e[17]!==S?(C={shouldShowProjectsChatShareModal:v,openProjectsChatShareModal:S},e[16]=v,e[17]=S,e[18]=C):C=e[18],C}function qle(t){return[t==null?void 0:t.sharedProjectConversationOwner,t==null?void 0:t.continuingFromSharedProjectConversationId,me.getGizmoId(t)]}function Yle(){"use forget";var i;const t=H.c(5),e=_n();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const s=ch(n),o=s.isLoading?null:((i=s.data)==null?void 0:i.allow_third_party_gpts)==="allow_specific";let a;return t[2]!==e||t[3]!==o?(a=(e==null?void 0:e.isOwnerOfAccount())&&o,t[2]=e,t[3]=o,t[4]=a):a=t[4],a}function Zle(){"use forget";var l;const t=H.c(5),e=_n();let n;t[0]!==e?(n=e==null?void 0:e.getWorkspaceId(),t[0]=e,t[1]=n):n=t[1];const{data:s,isLoading:o}=ch(n);let a;t[2]!==o||t[3]!==(s==null?void 0:s.permissions)?(a=o?null:((l=s==null?void 0:s.permissions)==null?void 0:l.includes("chatgpt.workspace.feature.enhanced-citations.access"))===!0,t[2]=o,t[3]=s==null?void 0:s.permissions,t[4]=a):a=t[4];const i=a;return Ab()&&i}const L8=3;function Kle(t){return e=>{if(e){const n=e.filter(s=>s.item.id!==t.item.id);return[t,...n]}return[t]}}function Qle(t){return e=>e&&e.filter(n=>n.item.id!==t)}function Jle(t){var e;return((e=t==null?void 0:t.length)!=null?e:0)<L8}function Ak(){return io({queryKey:[wc],queryFn:async()=>await pe.safeGet("/pins",{parameters:{query:{limit:L8}},authOption:qt.SendIfAvailable})})}function Xle(){const t=xt(),e=Ut();return Bt({mutationFn:async({isStarred:n,conversation:s})=>(await pe.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:s.id}},requestBody:{is_starred:n},intercomEventOnError:"fetch-error:conversation:star"}),{conversation:s,isStarred:n}),onMutate:({isStarred:n,conversation:s})=>{const o=t.getQueryData([wc]),a=t.getQueryData([xo]);if(n&&!Jle(o))return{previousStarredConversationsData:o,previousGeneralConversationsData:a};n?(t.setQueryData([wc],Kle({item_type:"conversation",item:s})),t.setQueryData([xo],bu(s.id))):(t.setQueryData([wc],Qle(s.id)),t.setQueryData([xo],vu(s,{items:[s],total:1,limit:eg,offset:0})));const i=jt(s.id);return i&&qe(i,l=>{l.isStarred=n}),{previousStarredConversationsData:o,previousGeneralConversationsData:a}},onError:(n,s,o)=>{if(o!=null&&o.previousStarredConversationsData&&t.setQueryData([wc],o.previousStarredConversationsData),o!=null&&o.previousGeneralConversationsData&&t.setQueryData([xo],o.previousGeneralConversationsData),s){const i=jt(s.conversation.id);i&&qe(i,l=>{l.isStarred=!s.isStarred})}const a=kA(n);e.warning(a!=null?a:"Error",{duration:2})},onSettled:()=>{ro(t)}})}const ece=_.createContext(()=>Promise.resolve()),C1=_.createContext(null),xS=()=>_.useContext(C1)!=null;_.createContext({onDismount:()=>{}});function yS(t){const e=Ve(t,"3436367576"),n=e.get("enable_local_indexing",!1),s=e.get("enable_ux",!1),o=ut(t),a=!!(o!=null&&o.hasPlusFeatures());return{isFannyPackEnabled:s||a,isFannyPackInitializerEnabled:n||a}}var m0={},Ik;function tce(){return Ik||(Ik=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.Unidentified="Unidentified",e.Alt="Alt",e.AltGraph="AltGraph",e.CapsLock="CapsLock",e.Control="Control",e.Fn="Fn",e.FnLock="FnLock",e.Hyper="Hyper",e.Meta="Meta",e.NumLock="NumLock",e.ScrollLock="ScrollLock",e.Shift="Shift",e.Super="Super",e.Symbol="Symbol",e.SymbolLock="SymbolLock",e.Enter="Enter",e.Tab="Tab",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowUp="ArrowUp",e.End="End",e.Home="Home",e.PageDown="PageDown",e.PageUp="PageUp",e.Backspace="Backspace",e.Clear="Clear",e.Copy="Copy",e.CrSel="CrSel",e.Cut="Cut",e.Delete="Delete",e.EraseEof="EraseEof",e.ExSel="ExSel",e.Insert="Insert",e.Paste="Paste",e.Redo="Redo",e.Undo="Undo",e.Accept="Accept",e.Again="Again",e.Attn="Attn",e.Cancel="Cancel",e.ContextMenu="ContextMenu",e.Escape="Escape",e.Execute="Execute",e.Find="Find",e.Finish="Finish",e.Help="Help",e.Pause="Pause",e.Play="Play",e.Props="Props",e.Select="Select",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.BrightnessDown="BrightnessDown",e.BrightnessUp="BrightnessUp",e.Eject="Eject",e.LogOff="LogOff",e.Power="Power",e.PowerOff="PowerOff",e.PrintScreen="PrintScreen",e.Hibernate="Hibernate",e.Standby="Standby",e.WakeUp="WakeUp",e.AllCandidates="AllCandidates",e.Alphanumeric="Alphanumeric",e.CodeInput="CodeInput",e.Compose="Compose",e.Convert="Convert",e.Dead="Dead",e.FinalMode="FinalMode",e.GroupFirst="GroupFirst",e.GroupLast="GroupLast",e.GroupNext="GroupNext",e.GroupPrevious="GroupPrevious",e.ModeChange="ModeChange",e.NextCandidate="NextCandidate",e.NonConvert="NonConvert",e.PreviousCandidate="PreviousCandidate",e.Process="Process",e.SingleCandidate="SingleCandidate",e.HangulMode="HangulMode",e.HanjaMode="HanjaMode",e.JunjaMode="JunjaMode",e.Eisu="Eisu",e.Hankaku="Hankaku",e.Hiragana="Hiragana",e.HiraganaKatakana="HiraganaKatakana",e.KanaMode="KanaMode",e.KanjiMode="KanjiMode",e.Katakana="Katakana",e.Romaji="Romaji",e.Zenkaku="Zenkaku",e.ZenkakuHanaku="ZenkakuHanaku",e.F1="F1",e.F2="F2",e.F3="F3",e.F4="F4",e.F5="F5",e.F6="F6",e.F7="F7",e.F8="F8",e.F9="F9",e.F10="F10",e.F11="F11",e.F12="F12",e.F13="F13",e.F14="F14",e.F15="F15",e.F16="F16",e.F17="F17",e.F18="F18",e.F19="F19",e.F20="F20",e.Soft1="Soft1",e.Soft2="Soft2",e.Soft3="Soft3",e.Soft4="Soft4",e.AppSwitch="AppSwitch",e.Call="Call",e.Camera="Camera",e.CameraFocus="CameraFocus",e.EndCall="EndCall",e.GoBack="GoBack",e.GoHome="GoHome",e.HeadsetHook="HeadsetHook",e.LastNumberRedial="LastNumberRedial",e.Notification="Notification",e.MannerMode="MannerMode",e.VoiceDial="VoiceDial",e.ChannelDown="ChannelDown",e.ChannelUp="ChannelUp",e.MediaFastForward="MediaFastForward",e.MediaPause="MediaPause",e.MediaPlay="MediaPlay",e.MediaPlayPause="MediaPlayPause",e.MediaRecord="MediaRecord",e.MediaRewind="MediaRewind",e.MediaStop="MediaStop",e.MediaTrackNext="MediaTrackNext",e.MediaTrackPrevious="MediaTrackPrevious",e.AudioBalanceLeft="AudioBalanceLeft",e.AudioBalanceRight="AudioBalanceRight",e.AudioBassDown="AudioBassDown",e.AudioBassBoostDown="AudioBassBoostDown",e.AudioBassBoostToggle="AudioBassBoostToggle",e.AudioBassBoostUp="AudioBassBoostUp",e.AudioBassUp="AudioBassUp",e.AudioFaderFront="AudioFaderFront",e.AudioFaderRear="AudioFaderRear",e.AudioSurroundModeNext="AudioSurroundModeNext",e.AudioTrebleDown="AudioTrebleDown",e.AudioTrebleUp="AudioTrebleUp",e.AudioVolumeDown="AudioVolumeDown",e.AudioVolumeMute="AudioVolumeMute",e.AudioVolumeUp="AudioVolumeUp",e.MicrophoneToggle="MicrophoneToggle",e.MicrophoneVolumeDown="MicrophoneVolumeDown",e.MicrophoneVolumeMute="MicrophoneVolumeMute",e.MicrophoneVolumeUp="MicrophoneVolumeUp",e.TV="TV",e.TV3DMode="TV3DMode",e.TVAntennaCable="TVAntennaCable",e.TVAudioDescription="TVAudioDescription",e.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",e.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",e.TVContentsMenu="TVContentsMenu",e.TVDataService="TVDataService",e.TVInput="TVInput",e.TVInputComponent1="TVInputComponent1",e.TVInputComponent2="TVInputComponent2",e.TVInputComposite1="TVInputComposite1",e.TVInputComposite2="TVInputComposite2",e.TVInputHDMI1="TVInputHDMI1",e.TVInputHDMI2="TVInputHDMI2",e.TVInputHDMI3="TVInputHDMI3",e.TVInputHDMI4="TVInputHDMI4",e.TVInputVGA1="TVInputVGA1",e.TVMediaContext="TVMediaContext",e.TVNetwork="TVNetwork",e.TVNumberEntry="TVNumberEntry",e.TVPower="TVPower",e.TVRadioService="TVRadioService",e.TVSatellite="TVSatellite",e.TVSatelliteBS="TVSatelliteBS",e.TVSatelliteCS="TVSatelliteCS",e.TVSatelliteToggle="TVSatelliteToggle",e.TVTerrestrialAnalog="TVTerrestrialAnalog",e.TVTerrestrialDigital="TVTerrestrialDigital",e.TVTimer="TVTimer",e.AVRInput="AVRInput",e.AVRPower="AVRPower",e.ColorF0Red="ColorF0Red",e.ColorF1Green="ColorF1Green",e.ColorF2Yellow="ColorF2Yellow",e.ColorF3Blue="ColorF3Blue",e.ColorF4Grey="ColorF4Grey",e.ColorF5Brown="ColorF5Brown",e.ClosedCaptionToggle="ClosedCaptionToggle",e.Dimmer="Dimmer",e.DisplaySwap="DisplaySwap",e.DVR="DVR",e.Exit="Exit",e.FavoriteClear0="FavoriteClear0",e.FavoriteClear1="FavoriteClear1",e.FavoriteClear2="FavoriteClear2",e.FavoriteClear3="FavoriteClear3",e.FavoriteRecall0="FavoriteRecall0",e.FavoriteRecall1="FavoriteRecall1",e.FavoriteRecall2="FavoriteRecall2",e.FavoriteRecall3="FavoriteRecall3",e.FavoriteStore0="FavoriteStore0",e.FavoriteStore1="FavoriteStore1",e.FavoriteStore2="FavoriteStore2",e.FavoriteStore3="FavoriteStore3",e.Guide="Guide",e.GuideNextDay="GuideNextDay",e.GuidePreviousDay="GuidePreviousDay",e.Info="Info",e.InstantReplay="InstantReplay",e.Link="Link",e.ListProgram="ListProgram",e.LiveContent="LiveContent",e.Lock="Lock",e.MediaApps="MediaApps",e.MediaAudioTrack="MediaAudioTrack",e.MediaLast="MediaLast",e.MediaSkipBackward="MediaSkipBackward",e.MediaSkipForward="MediaSkipForward",e.MediaStepBackward="MediaStepBackward",e.MediaStepForward="MediaStepForward",e.MediaTopMenu="MediaTopMenu",e.NavigateIn="NavigateIn",e.NavigateNext="NavigateNext",e.NavigateOut="NavigateOut",e.NavigatePrevious="NavigatePrevious",e.NextFavoriteChannel="NextFavoriteChannel",e.NextUserProfile="NextUserProfile",e.OnDemand="OnDemand",e.Pairing="Pairing",e.PinPDown="PinPDown",e.PinPMove="PinPMove",e.PinPToggle="PinPToggle",e.PinPUp="PinPUp",e.PlaySpeedDown="PlaySpeedDown",e.PlaySpeedReset="PlaySpeedReset",e.PlaySpeedUp="PlaySpeedUp",e.RandomToggle="RandomToggle",e.RcLowBattery="RcLowBattery",e.RecordSpeedNext="RecordSpeedNext",e.RfBypass="RfBypass",e.ScanChannelsToggle="ScanChannelsToggle",e.ScreenModeNext="ScreenModeNext",e.Settings="Settings",e.SplitScreenToggle="SplitScreenToggle",e.STBInput="STBInput",e.STBPower="STBPower",e.Subtitle="Subtitle",e.Teletext="Teletext",e.VideoModeNext="VideoModeNext",e.Wink="Wink",e.ZoomToggle="ZoomToggle",e.SpeechCorrectionList="SpeechCorrectionList",e.SpeechInputToggle="SpeechInputToggle",e.Close="Close",e.New="New",e.Open="Open",e.Print="Print",e.Save="Save",e.SpellCheck="SpellCheck",e.MailForward="MailForward",e.MailReply="MailReply",e.MailSend="MailSend",e.LaunchCalculator="LaunchCalculator",e.LaunchCalendar="LaunchCalendar",e.LaunchContacts="LaunchContacts",e.LaunchMail="LaunchMail",e.LaunchMediaPlayer="LaunchMediaPlayer",e.LaunchMusicPlayer="LaunchMusicPlayer",e.LaunchMyComputer="LaunchMyComputer",e.LaunchPhone="LaunchPhone",e.LaunchScreenSaver="LaunchScreenSaver",e.LaunchSpreadsheet="LaunchSpreadsheet",e.LaunchWebBrowser="LaunchWebBrowser",e.LaunchWebCam="LaunchWebCam",e.LaunchWordProcessor="LaunchWordProcessor",e.LaunchApplication1="LaunchApplication1",e.LaunchApplication2="LaunchApplication2",e.LaunchApplication3="LaunchApplication3",e.LaunchApplication4="LaunchApplication4",e.LaunchApplication5="LaunchApplication5",e.LaunchApplication6="LaunchApplication6",e.LaunchApplication7="LaunchApplication7",e.LaunchApplication8="LaunchApplication8",e.LaunchApplication9="LaunchApplication9",e.LaunchApplication10="LaunchApplication10",e.LaunchApplication11="LaunchApplication11",e.LaunchApplication12="LaunchApplication12",e.LaunchApplication13="LaunchApplication13",e.LaunchApplication14="LaunchApplication14",e.LaunchApplication15="LaunchApplication15",e.LaunchApplication16="LaunchApplication16",e.BrowserBack="BrowserBack",e.BrowserFavorites="BrowserFavorites",e.BrowserForward="BrowserForward",e.BrowserHome="BrowserHome",e.BrowserRefresh="BrowserRefresh",e.BrowserSearch="BrowserSearch",e.BrowserStop="BrowserStop",e.Decimal="Decimal",e.Key11="Key11",e.Key12="Key12",e.Multiply="Multiply",e.Add="Add",e.Divide="Divide",e.Subtract="Subtract",e.Separator="Separator"})(t.Key||(t.Key={}))})(m0)),m0}var nce=tce(),On=(t=>(t.Core="Core",t.Chat="Chat",t.Settings="Settings",t.Internal="Internal",t))(On||{});const ze=w({Mod:"mod",Comma:",",Space:"Space"," ":"Space","":"Space"},nce.Key),sce=new RegExp("```.*?\\n([\\s\\S]+?)\\n?```[^`]*$","gms");function jk(){return N$()||R$()}const oce={[ze.Comma]:",",[ze.Enter]:"",[ze.Escape]:"Esc",[ze.ArrowUp]:"",[ze.ArrowDown]:"",[ze.ArrowLeft]:"",[ze.ArrowRight]:"",[ze.Backspace]:"",[ze.Delete]:"",[ze.Tab]:"",[ze.Control]:"Ctrl",[ze.Shift]:"Shift"};function ace(t){switch(t){case ze.Mod:return jk()?"":"Ctrl";case ze.Meta:return jk()?"":"Win";default:return oce[t]}}const zqe=t=>t.map(e=>{var n;return(n=ace(e))!=null?n:e}),aa=be({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},toggleDevMode:{id:"keyboardActions.toggleDevMode",defaultMessage:"Toggle dev mode"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},cycleReasoningLevel:{id:"keyboardActions.cycleReasoningLevel",defaultMessage:"Cycle reasoning level"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),O8=new P$,D8=[ze.Mod,ze.Shift,"o"],rce=[ze.Mod,"k"],ice=j(()=>I(()=>import("./abwq3htfqpekhs38.js"),__vite__mapDeps([175,1,29,30])).then(t=>t.DeleteConversationConfirmationModalContainer)),qqe=t=>{"use forget";const e=H.c(24),{newChatAction:n,clientThreadId:s,focusPromptTextareaAction:o}=t,a=G(),i=Ut();let l;e[0]!==a?(l=yS(a),e[0]=a,e[1]=l):l=e[1];const{isFannyPackEnabled:c}=l;let d;e[2]!==a?(d=()=>wm(a),e[2]=a,e[3]=d):d=e[3];const u=ue(d);let m;e[4]!==a?(m=()=>L$(a),e[4]=a,e[5]=m):m=e[5];const f=ue(m),p=gd();let g;e[6]!==a?(g=()=>O$(a),e[6]=a,e[7]=g):g=e[7];const h=ue(g),x=bi(),y=vn(un),b=at(),v=J();let S,C;e[8]!==f||e[9]!==h||e[10]!==s||e[11]!==a||e[12]!==o||e[13]!==v||e[14]!==y||e[15]!==u||e[16]!==x||e[17]!==c||e[18]!==b||e[19]!==n||e[20]!==i||e[21]!==p?(S=()=>{const k=x?[[ze.Mod,"n"]]:[],M={key:"navigationToggle",action:lce,actionMessageDescriptor:aa.navigationToggle,group:On.Core,keyboardBinding:[ze.Mod,ze.Shift,"s"]},T={key:"toggleDevMode",action:()=>{p.mutate({setting:en.DeveloperMode,value:!u}),i.success(v.formatMessage({id:"ANH+8L",defaultMessage:"Developer mode toggled"}))},actionMessageDescriptor:aa.toggleDevMode,group:On.Settings,keyboardBinding:[ze.Mod,"."]};return bh(a).addAction({key:"newChat",action:n||rs,actionMessageDescriptor:aa.newChat,group:On.Core,keyboardBinding:D8,altKeyboardBindings:c?[...k]:[...k,[ze.Mod,"k"]]},{key:"focusPromptTextarea",action:o!=null?o:$2,actionMessageDescriptor:aa.focusPromptTextarea,group:On.Chat,keyboardBinding:[ze.Shift,ze.Escape]},{key:"copyLastCodeBlock",action:E=>{if(s!=null){const A=me.getConversationTurns(ft(s));for(let N=A.length-1;N>=0;N--){const{messages:R}=A[N],D=[...R.reduce(cce,"").matchAll(sce)],F=D.length?D[D.length-1][1]:null;if(F!=null){Ta(F,i,E).then(()=>{i.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:aa.copyLastCodeBlock,group:On.Chat,keyboardBinding:[ze.Mod,ze.Shift,";"],altKeyboardBindings:[[ze.Mod,ze.Shift,":"]]},{key:"toggleCustomInstructions",action:()=>{b("#settings/".concat(Bn.Personalization))},actionMessageDescriptor:aa.toggleCustomInstructions,group:On.Settings,keyboardBinding:[ze.Mod,ze.Shift,"i"]},...f&&h?[T]:[],...y?[]:[M],{key:"deleteChat",action:()=>{if(s){const E=jt(s);E&&gt(a,ice,{serverThreadId:E,isActiveConversation:!0})}},actionMessageDescriptor:aa.deleteChat,group:On.Chat,keyboardBinding:[ze.Mod,ze.Shift,ze.Backspace],altKeyboardBindings:[[ze.Mod,ze.Shift,ze.Delete]]},{key:"zoomIn",enabled:Ho,action:dce,actionMessageDescriptor:aa.zoomIn,group:On.Chat,keyboardBinding:[ze.Mod,"+"],altKeyboardBindings:[[ze.Mod,"="]]},{key:"zoomOut",enabled:Ho,action:uce,actionMessageDescriptor:aa.zoomOut,group:On.Chat,keyboardBinding:[ze.Mod,"-"]},{key:"resetZoom",enabled:Ho,action:mce,actionMessageDescriptor:aa.resetZoom,group:On.Chat,keyboardBinding:[ze.Mod,"0"]})},C=[a,s,o,y,x,c,n,i,b,u,p,f,h,v],e[8]=f,e[9]=h,e[10]=s,e[11]=a,e[12]=o,e[13]=v,e[14]=y,e[15]=u,e[16]=x,e[17]=c,e[18]=b,e[19]=n,e[20]=i,e[21]=p,e[22]=S,e[23]=C):(S=e[22],C=e[23]),_.useEffect(S,C)},Yqe=t=>{"use forget";const e=H.c(6),{setSelectedVoiceIndex:n,prevVoiceIndex:s,nextVoiceIndex:o}=t,a=G();let i,l;e[0]!==a||e[1]!==o||e[2]!==s||e[3]!==n?(i=()=>bh(a).addAction({key:"selectPrevVoice",action:()=>{n(s)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:On.Core,keyboardBinding:[ze.ArrowLeft]},{key:"selectNextVoice",action:()=>{n(o)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:On.Chat,keyboardBinding:[ze.ArrowRight]}),l=[a,n,s,o],e[0]=a,e[1]=o,e[2]=s,e[3]=n,e[4]=i,e[5]=l):(i=e[4],l=e[5]),_.useEffect(i,l)};function lce(){yn.setSidebarOpen(void 0)}function cce(t,e){var n;return((n=e.clientMetadata)==null?void 0:n.err)==null&&e.author.role===Ze.Assistant&&e.recipient==="all"?t+(t?"\n\n":"")+ko(e):t}function dce(){return D$()}function uce(){return F$()}function mce(){return B$()}const fce=j(()=>I(()=>import("./j4nmkdkymh0gf9lt.js").then(t=>t._),__vite__mapDeps([176,1])),{loading:t=>L(t)});function pce({gizmoResource:t}){const e=G(),n=Ut(),[s,o]=_.useState(!1);return t.gizmo.share_recipient===Tn.Private?null:r.jsx(K.Item,{onClick:async a=>{a.stopPropagation(),a.preventDefault();try{const i=t.gizmo.short_url?U$(t.gizmo.short_url):window.location.origin.concat(km(e,t));await Ta(i,n,a),o(!0),setTimeout(()=>{o(!1)},2e3)}catch(i){Oe.addError(i);return}},icon:fce,children:s?r.jsx(P,w({},Pk.copiedURL)):r.jsx(P,w({},Pk.copyLink))})}const Pk=be({copyLink:{defaultMessage:"Copy link",id:"GizmoInformation.copyLink"},copiedURL:{defaultMessage:"Copied URL",id:"GizmoInformation.copiedURL"}}),gce=j(()=>I(()=>Promise.resolve().then(()=>nC),void 0),{loading:t=>L(t)});function F8({className:t,inputClassName:e,value:n,onChange:s,onKeyDown:o,onFocus:a,onBlur:i,placeholder:l,id:c,autoFocus:d}){return r.jsxs("div",{className:W("relative",t),children:[r.jsx(gce,{className:"icon-sm text-token-text-tertiary absolute start-2 top-1/2 -translate-y-1/2 transform"}),r.jsx("input",{id:c,type:"text",value:n,onKeyDown:o,onChange:s,onFocus:a,onBlur:i,placeholder:l,autoFocus:d,className:W("rounded-lg border border-gray-200 ps-8 placeholder:text-gray-500 dark:border-gray-600 dark:bg-gray-700",e),autoComplete:"off"})]})}function B8({modelSwitcherDeny:t}){const e=G(),n=ut(e),s=n==null?void 0:n.isPro();switch(t.reason){case Oo.UNSUPPORTED_TOOL_USE:case Oo.UNSUPPORTED_AUDIO:case Oo.UNSUPPORTED_IMAGE:case Oo.UNSUPPORTED_GIZMO:case Oo.UNSUPPORTED_ATTACHMENT:case Oo.UNSUPPORTED_CUSTOM_INSTRUCTIONS:case Oo.UNSUPPORTED_CANVAS:case Oo.UNSUPPORTED_TEMPORARY_CHAT:return r.jsx(r.Fragment,{children:t.description});case Im.RATE_LIMIT:{const{resetsAfter:a}=t,i=new Date(a),l=new Date(a).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(s)return r.jsx("div",{children:r.jsx(P,{id:"CwSQn9",defaultMessage:"Temporarily limited. Contact <supportEmail>support@openai.com</supportEmail> for help.",values:{supportEmail:c=>r.jsx(Aa,{to:"mailto:support@openai.com",className:"underline",children:c})}})});if(AA(i))return r.jsx(P,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:l}});if(V$(i))return r.jsx(P,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:l}});{const c=i.toLocaleDateString([],{month:"short",day:"numeric"});return r.jsx(P,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:c}})}}}const o=t.description;if(o)return r.jsx(r.Fragment,{children:o})}function vS({clientThreadId:t}){var p;const e=G(),n=ht(e,t),s=Sh(),[o,a]=Ue(t,g=>{var h,x;return[(x=(h=me.getCurrentNode(g))==null?void 0:h.message.metadata)==null?void 0:x.model_switcher_deny,me.getGizmoId(g)]}),i=a!=null?a:s,{data:l}=Pa(i),c=ue(()=>ea(n)),d=J(),u={},m=xe(e,"891514942"),f=Ch();for(const{resets_after:g,model_slug:h}of f)[bf.CONVERSATION,bf.REGENERATE].forEach(x=>{var S,C;const y=(S=u[h])!=null?S:{},b=(C=y[x])!=null?C:[],v={reason:Im.RATE_LIMIT,resetsAfter:g,isAvailable:!1};b.push(v),y[x]=b,u[h]=y});if(o==null||o.forEach(g=>{var M,T;const{slug:h,context:x,reason:y,description:b,is_available:v}=g,S=m&&v,C=(M=u[h])!=null?M:{},k=(T=C[x])!=null?T:[];k.push({reason:y,description:b,isAvailable:S}),C[x]=k,u[h]=C}),i&&$s(i)){const g=[fs.GIZMO_PROJECT];(p=l==null?void 0:l.files)!=null&&p.length&&g.push(fs.ATTACHMENT),l!=null&&l.gizmo.instructions.length&&g.push(fs.CUSTOM_INSTRUCTIONS),c.categories.forEach(h=>{var S;const{defaultModel:x,supportedFeatures:y}=h,b=y||[],v=[];if(g.includes(fs.GIZMO_PROJECT)&&!b.includes(fs.GIZMO_PROJECT)&&v.push({reason:Oo.UNSUPPORTED_GIZMO,description:d.formatMessage({id:"6w0z4F",defaultMessage:"This model doesn't support projects."}),isAvailable:!1}),g.includes(fs.ATTACHMENT)&&!b.includes(fs.ATTACHMENT)&&v.push({reason:Oo.UNSUPPORTED_ATTACHMENT,description:d.formatMessage({id:"ZKjdak",defaultMessage:"This model doesn't support file attachments."}),isAvailable:!1}),g.includes(fs.CUSTOM_INSTRUCTIONS)&&!b.includes(fs.CUSTOM_INSTRUCTIONS)&&v.push({reason:Oo.UNSUPPORTED_CUSTOM_INSTRUCTIONS,description:d.formatMessage({id:"zaubcf",defaultMessage:"This model doesn't support custom instructions."}),isAvailable:!1}),v.length){const C=(S=u[x])!=null?S:{};[bf.CONVERSATION,bf.REGENERATE].forEach(k=>{var T;const M=(T=C[k])!=null?T:[];M.push(...v),C[k]=M,u[x]=C})}})}return u}function U8({modelSlug:t,modelSwitcherDenialsBySlug:e}){var s;const n=t?(s=e[t])==null?void 0:s.conversation:null;return n?n.every(o=>o.isAvailable===!0):!0}const hce=j(()=>I(()=>import("./n4tew1fjlr8lryav.js").then(t=>t._),__vite__mapDeps([153,1])),{loading:t=>L(t)}),_ce=j(()=>I(()=>import("./m7ju152dn5ab1rui.js").then(t=>t._),__vite__mapDeps([22,1])),{loading:t=>L(t)});function xce(t){"use forget";var N;const e=H.c(41),{conversation:n,currentModel:s,categoryOptions:o,className:a,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:l,onModelItemClick:c,preferredModelId:d}=t,u=l===void 0?!1:l,m=J(),f=(N=s==null?void 0:s.id)!=null?N:null,[p,g]=_.useState("");let h;e:{if(!p){h=o;break e}let R;if(e[0]!==o||e[1]!==p){let O;e[3]!==p?(O=D=>D.name.toLowerCase().includes(p.toLowerCase()),e[3]=p,e[4]=O):O=e[4],R=o.filter(O),e[0]=o,e[1]=p,e[2]=R}else R=e[2];h=R}const x=h;let y;e[5]!==a?(y=W("flex flex-col pt-0",a),e[5]=a,e[6]=y):y=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b={borderRadius:"inherit"},e[7]=b):b=e[7];let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=R=>{g(R.target.value)},e[8]=v):v=e[8];let S;e[9]!==p?(S=r.jsx("div",{className:"p-2",children:r.jsx(F8,{inputClassName:"w-full",value:p,onKeyDown:yce,onChange:v})}),e[9]=p,e[10]=S):S=e[10];let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("hr",{}),e[11]=C):C=e[11];let k;e[12]!==S?(k=r.jsxs("div",{style:b,className:"sticky top-0 z-1 bg-white",children:[S,C]}),e[12]=S,e[13]=k):k=e[13];let M;e[14]!==x.length||e[15]!==m?(M=x.length===0&&r.jsx(K.Item,{children:m.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),e[14]=x.length,e[15]=m,e[16]=M):M=e[16];let T;if(e[17]!==n||e[18]!==s||e[19]!==f||e[20]!==u||e[21]!==x||e[22]!==i||e[23]!==c||e[24]!==d){let R;e[26]!==n||e[27]!==s||e[28]!==f||e[29]!==u||e[30]!==i||e[31]!==c||e[32]!==d?(R=O=>{const{value:D}=O;return"options"in O?r.jsx(hc,{conversation:n,currentModel:s,isSelected:f==null?void 0:f.startsWith(D),option:O,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:u,onModelItemClick:c,preferredModelId:d},D):r.jsx(zr,{conversation:n,currentModelId:f,isSelected:f===D,value:D,modelSwitcherDenialsBySlug:i,displayInFull_INTERNAL_USE_ONLY:u,onClick:c,preferredModelId:d,children:O.name},D)},e[26]=n,e[27]=s,e[28]=f,e[29]=u,e[30]=i,e[31]=c,e[32]=d,e[33]=R):R=e[33],T=x.map(R),e[17]=n,e[18]=s,e[19]=f,e[20]=u,e[21]=x,e[22]=i,e[23]=c,e[24]=d,e[25]=T}else T=e[25];let E;e[34]!==T||e[35]!==M?(E=r.jsxs("div",{className:"scrollbar-gutter-stable w-[min(320px,95vw)] flex-grow overflow-auto",children:[M,T]}),e[34]=T,e[35]=M,e[36]=E):E=e[36];let A;return e[37]!==E||e[38]!==y||e[39]!==k?(A=r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{className:y,children:[k,E]})}),e[37]=E,e[38]=y,e[39]=k,e[40]=A):A=e[40],A}function yce(t){t.stopPropagation()}function hc({conversation:t,currentModel:e,option:n,isSelected:s=!1,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a=!1,onModelItemClick:i,preferredModelId:l}){var g;const{name:c,options:d,categoryId:u}=n,m="".concat(c," Models"),f=()=>r.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(hce,{className:"icon"}),m]})});let p;return a&&s&&(p=(g=n.options.find(h=>h.value===(e==null?void 0:e.id)))==null?void 0:g.name),r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{children:r.jsxs("div",{className:W("flex grow justify-between gap-2 overflow-hidden",a?"items-center break-all":""),children:[u?f():c,s&&r.jsx("div",{className:"text-token-text-tertiary truncate",children:p!=null?p:e==null?void 0:e.title})]})}),r.jsx(xce,{conversation:t,currentModel:e,categoryOptions:d,modelSwitcherDenialsBySlug:o,displayInFull_INTERNAL_USE_ONLY:a,onModelItemClick:i,preferredModelId:l})]})}function zr({value:t,children:e,icon:n,secondary:s,currentModelId:o,isSelected:a,onClick:i,modelSwitcherDenialsBySlug:l,isUpgradeUpsell:c=!1,testId:d,displayInFull_INTERNAL_USE_ONLY:u=!1,deprecated:m,preferredModelId:f,disabledByAdmin:p,conversation:g}){var E,A;const h=G(),x=t?(A=(E=l[t])==null?void 0:E.conversation)==null?void 0:A[0]:null,y=ss(),b=qs(),v=U8({modelSlug:t,modelSwitcherDenialsBySlug:l}),S=p||!v,C=Ve(h,"1846737571"),k=xe(h,"1333611684"),M=()=>{if(y===Ie.Glaux&&b(null,{ifPrevSystemHint:Ie.Glaux}),i)i(t);else if(t){U.logEvent("Model Switcher Model Changed",{from:o,to:t}),We.logEvent("chatgpt_model_switcher_model_changed",t,{from:o!=null?o:"",to:t});const N=t;Ib(h,N)||(k?G$(h).mutate({modelSlug:N}):jb(h,N)),bd(g,N)}},T=r.jsx(K.Item,{onClick:M,disabled:S,className:W(u&&"break-all"),icon:n,secondary:s,trailingColor:"primary",trailing:c?r.jsx(he,{color:"secondary",size:"small",className:C.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:r.jsx(P,{id:"oKo8wt",defaultMessage:"Upgrade"})}):a?r.jsx(_ce,{className:"icon-sm"}):r.jsx("span",{className:"icon"}),"data-testid":d,children:r.jsxs("span",{className:"flex items-center gap-1",children:[e,t&&t===f&&!a&&!c&&!m&&r.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:r.jsx(P,{id:"model-switcher.preferred",defaultMessage:"GPT creator recommended"})})]})},t);return x?r.jsx(kt,{withArrow:!0,side:"right",sideOffset:-10,label:r.jsx(B8,{modelSwitcherDeny:x}),children:T}):T}var wp=(t=>(t.GPT4o="AG8PqS2q",t.AUTO="auto",t))(wp||{});const vce=t=>{const{categoryId:e}=t;return e==="auto"},bce=(t,e,n,s)=>{const o=xe(t,"2861925050"),a=n==null?void 0:n.some(({model_slug:i})=>s==null?void 0:s.models.get(i));return!(!o||!a||!e||!e.isSelfServeBusiness())},V8=()=>{const t=mt.getItem(Le.FinchAdminNotified);return new Date(t!=null?t:0)},Sce=()=>{const t=new Date;t.setDate(t.getDate()+1),mt.setItem(Le.FinchAdminNotified,t.toISOString())},Cce=()=>{const t=V8();return mt.getItem(Le.FinchAdminNotified)!=null&&new Date<=t},wce=()=>{const t=V8();return new Date>t},kce=t=>{switch(t){case"wham":return"wham";case"deep_research":return"deep_research";case"image_gen":return"image_gen";case"gpt-4-5":return"gpt-4-5";default:return null}},Mce=Nt(t=>({hasRequestedCredits:Cce(),setHasRequestedCredits:e=>t(()=>({hasRequestedCredits:e}))})),Tce=j(()=>I(()=>import("./i6ojecmupi4ar5tq.js"),__vite__mapDeps([177,1,29,30])).then(t=>t.CreditPurchaseModal)),Ece=()=>{const t=Ut(),e=J(),{hasRequestedCredits:n,setHasRequestedCredits:s}=Mce(),{mutate:o,isPending:a}=Bt({mutationFn:i=>pe.safePost("/credits/pleas",{requestBody:{product:i}}),onError:i=>{Oe.addError(new Error("Error occurred while submitting credit plea request",{cause:i})),t.danger(Oc.errorRequestCredits,{toastId:"teams_credit_plea_button"})},onSuccess:()=>{s(!0),t.success(e.formatMessage(Oc.successRequestCredits)),Sce(),yn.setThreadModelPickerAlertDot(!1)}});return{submitCreditPleaRequest:o,hasRequestedCredits:n,isPending:a}},G8=n=>{var s=n,{trigger:t}=s,e=Me(s,["trigger"]);const o=G();_.useEffect(()=>{U.logEventWithStatsig("ChatGPT Credits: Add Credits Button Shown","chatgpt_credits_add_credits_button_shown",{trigger:t})},[t]);const a=()=>{U.logEventWithStatsig("ChatGPT Credits: Add Credits Clicked","chatgpt_credits_add_credits_clicked"),gt(o,Tce)};return r.jsx(he,B(w({color:"primary",onClick:a},e),{children:r.jsx(P,w({},Oc.addCredits))}))},$8=s=>{var o=s,{creditConsumingProduct:t,trigger:e}=o,n=Me(o,["creditConsumingProduct","trigger"]);const a=J(),{submitCreditPleaRequest:i,isPending:l,hasRequestedCredits:c}=Ece();_.useEffect(()=>{U.logEventWithStatsig("ChatGPT Credits: Notify Admin Button Shown","chatgpt_credits_notify_admin_button_shown",{trigger:e,creditConsumingProduct:t})},[t,e]);const d=()=>{c||(i(t),U.logEventWithStatsig("ChatGPT Credits: Notify Admin Clicked","chatgpt_credits_notify_admin_clicked"))},u=r.jsx(he,B(w({loading:l,color:c?"secondary":"primary",disabled:c,onClick:d},n),{children:c?a.formatMessage(Oc.requested):a.formatMessage(Oc.notifyAdmin)}));return c?r.jsx(kt,{className:"w-auto whitespace-nowrap",withArrow:!0,labelTextAlign:"left",contentClassName:"w-[180px]",side:"right",label:a.formatMessage(Oc.alreadyRequested),children:u}):u},Oc=be({notifyAdmin:{id:"prompt-textarea.teamsCreditRequestBanner.notifyAdmin",defaultMessage:"Notify admin"},addCredits:{id:"prompt-textarea.teamsCreditRequestBanner.addCredits",defaultMessage:"Add credits"},requested:{id:"prompt-textarea.teamsCreditRequestBanner.requested",defaultMessage:"Requested"},errorRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.error",defaultMessage:"Error occurred while submitting credit request"},successRequestCredits:{id:"prompt-textarea.teamsCreditRequestBanner.success",defaultMessage:"Request sent to your admin"},alreadyRequested:{id:"prompt-textarea.teamsCreditRequestBanner.alreadyRequested",defaultMessage:"Youve already notified your admin"}}),Nk="needsCreditsSection",Ace=()=>{const t=_n(),e=t==null?void 0:t.isOwnerOfAccount();return r.jsxs(K.Item,{className:"pointer-events-none pe-2.5! hover:bg-transparent hover:text-inherit",onSelect:n=>n.preventDefault(),disabled:!0,children:[r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(P,w({},e?Rk.ownerDescription:Rk.description))}),e?r.jsx(G8,{size:"small",trigger:"thread-header-dropdown-credits-section"}):r.jsx($8,{size:"small",creditConsumingProduct:"gpt-4-5",trigger:"thread-header-dropdown-credits-section"})]})},Rk=be({description:{id:"prompt-textarea.teamsCreditRequestBanner.label",defaultMessage:"Limits reached. Send a request to your admin to get access"},ownerDescription:{id:"prompt-textarea.teamsCreditRequestBanner.ownerLabel",defaultMessage:"Limits reached. Add credits to your account"}}),Ice="/assets/no-auth-upsell-m8ypcpwf.webp",jce={src:Ice};function Pce({statsig_login_event:t,statsig_signup_event:e,location:n}){const s=G(),o=Nl(s),a=Nd(Lk.signUpCta),i="no-auth-".concat(n),l=at(),c=h=>{switch(h){case"attach":return Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_ATTACH;case"model-switcher":return Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL_MODEL_SWITCHER;default:return Ct.ACCESS_FLOW_ENTRY_POINT_NO_AUTH_UPSELL}},d=Co(s,"2210309751").get("variant","control"),u=()=>{l({hash:Om,search:window.location.search},{state:{[$h]:"NoAuth Model Picker Upsell"}})},m=()=>{Kt(s,{fallbackScreenHint:"login",callback:h=>{U.logLogInButtonClicked({location:i,provider:h},c(n)),We.logEvent(t)},skipLoginModal:!1})},f=()=>{Kt(s,{fallbackScreenHint:"signup",callback:h=>{U.logSignUpButtonClicked({location:i,provider:h},c(n)),We.logEvent(e)},skipLoginModal:!1})},p=r.jsx(he,{as:"button",size:"medium",color:o?"primary":"secondary",onClick:m,children:r.jsx(P,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})},"login-button"),g=r.jsx(he,{as:"button",size:"medium",color:o?"secondary":"primary",onClick:f,children:r.jsx(P,w({},a))},"signup-button");return r.jsxs("div",{className:"-mt-4 flex max-w-[calc(100vw-2rem)] flex-col",children:[r.jsx("img",{className:"max-xs:hidden h-[132px] object-fill",src:jce.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-4 pt-5 pb-2",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(P,{id:"rwmTbn",defaultMessage:"Try advanced features for free"})}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(P,{id:"unOBJo",defaultMessage:"Get smarter responses, upload files, create images, and more by logging in."})}),r.jsx("div",{className:"mt-5 flex flex-row flex-wrap justify-start gap-2",children:o?[p,g]:[g,p]}),d==="model-picker"&&r.jsx("p",{className:"text-token-text-secondary mt-5 text-xs",children:r.jsx(P,B(w({},Lk.createWorkspaceTeamOrBusiness),{values:{createWorkspaceLink:h=>r.jsx("span",{onClick:u,className:"text-token-text-secondary decoration-token-text-primary cursor-pointer underline",children:h})}}))})]})]})}const Lk=be({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},createWorkspaceTeamOrBusiness:{id:"components.noAuthUpsell.createWorkspaceTeamOrBusiness",defaultMessage:"<createWorkspaceLink>Create a workspace</createWorkspaceLink> for a team or business"}}),Nce=({isUnauthenticated:t,enabled:e=!0})=>io({queryKey:["modelMessageCap",t],queryFn:()=>Pb.safeGet("/conversation_limit",{authOption:qt.SendIfAvailable}),enabled:e});function yg(t){return t.map(e=>typeof e=="string"?e:"").join("")}function Zqe(t){return t.map(e=>e.type==="text"?e.text:"").join("\n")}function H8(t,e){const n=[];let s=0;for(let o=0;o<t.length;o++){const a=t[o];if(typeof a=="string")if(e!=null&&e<s+a.length){n.push({type:"text",text:a.slice(0,e-s)});break}else n.push({type:"text",text:a}),s+=a.length;else if(a.content_type===Sa.ImageAssetPointer){const i=o>0?n[o-1]:null;(i==null?void 0:i.type)==="images"?i.imageAssets.push(a):n.push({type:"images",imageAssets:[a]})}else a.content_type===Sa.AudioTranscription&&n.push({type:"transcription",text:a.text})}return n}function Kqe({isUserTurn:t,parts:e}){if(!t)return H8(e);const n={text:[],images:[]};for(let o=0;o<e.length;o++){const a=e[o];typeof a=="string"?a.trim().length>0&&n.text.push({type:"text",text:a}):a.content_type===Sa.AudioTranscription?n.text.push({type:"transcription",text:a.text}):a.content_type===Sa.ImageAssetPointer&&n.images.push(a)}const s=[];return n.images.length>0&&s.unshift({type:"images",imageAssets:n.images}),s.push(...n.text.map(o=>({type:o.type,text:o.text}))),s}function Rce(t){const e=t&&new Date(t),n=e&&new Date(e);return n?"after ".concat(n.getHours()%12||12,":").concat(n.getMinutes()<10?"0":"").concat(n.getMinutes()," ").concat(n.getHours()>=12?"PM":"AM"):"later"}function Lce(t){if(t<60)return{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")};const e=Math.floor(t/60);if(e<24)return{type:"hour",value:e,text:e<2?"hour":"".concat(e," hours")};const n=Math.floor(e/24);return n<7?{type:"day",value:n,text:n<2?"day":"".concat(n," days")}:{type:"minute",value:t,text:t<2?"minute":"".concat(t," minutes")}}const f0={textarea:"","model-switcher":""};function Oce(){const t=i1(l=>l.isoDate),e=Rce(t),n=J(),s=$o(va.isEnterpriseyPlan),{isUnauthenticated:o,isLoading:a}=Un(),{data:i}=lt(Nce({isUnauthenticated:o,enabled:!a}));return _.useMemo(()=>{var g,h,x;const l=(g=i==null?void 0:i.message_cap)!=null?g:0,c=(h=i==null?void 0:i.message_cap_window)!=null?h:1,{text:d,type:u,value:m}=Lce(c),f=(x=i==null?void 0:i.message_disclaimer)!=null?x:f0;if(!d||s)return{textareaDisclaimer:f.textarea,modelSwitcherDisclaimer:f["model-switcher"],modelSwitcherLimitShort:""};if(!i||!c||!l)return{textareaDisclaimer:f0.textarea,modelSwitcherDisclaimer:f0["model-switcher"],modelSwitcherLimitShort:""};let p=n.formatMessage(p0.shortLimitMinutes,{numerator:l,denominator:m});switch(u){case"hour":p=n.formatMessage(p0.shortLimitHours,{numerator:l,denominator:m});break;case"day":p=n.formatMessage(p0.shortLimitDays,{numerator:l,denominator:m});break}return{textareaDisclaimer:f.textarea.replaceAll("%FORMATTED_TIME%",e).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",d),modelSwitcherDisclaimer:f["model-switcher"].replaceAll("%FORMATTED_TIME%",e).replaceAll("%NUMERATOR%","".concat(l)).replaceAll("%DENOMINATOR%",d),modelSwitcherLimitShort:p}},[i,e,n,s])}const p0=be({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var Wa=(t=>(t.ALPHA="alpha",t.DATA_CAMPAIGNS="data_campaigns",t.EXPERIMENTS="experiments",t.MAINLINE="mainline",t))(Wa||{});const Dce=t=>Md(t,({id:e})=>e.split(":").slice(0,1).join(":"));function bS(){const t=G(),e=Sh(),n=ue(()=>IA(t,{isGizmo:!!e})),s=pee(),{modelSwitcherDisclaimer:o}=Oce();return _.useMemo(()=>{const a=[],{categories:i,groups:l,models:c}=n;for(const d of i){const{defaultModel:u,categoryId:m,label:f}=d,p=c.get(u);if(p){const g=s===u;a.push({categoryId:m,value:u,name:f,description:g?o:p.description,options:[g0(p,{name:"Default"})]})}}for(const d of l){const{group:u,label:m,modelIds:f}=d,p=f[0],g=[];for(const h of f){const x=c.get(h);x&&!x.tags.includes($$.HIDDEN)&&g.push(x)}if(u==="experiments"){const h=Dce(g),x=Object.entries(h).map(([y,b])=>{const v=y.split(":").slice(-1)[0];return{key:y,value:v,name:v,options:b.map(S=>{const{title:C}=S;return g0(B(w({},S),{title:C.replace(v,"")}))})}});a.push({categoryId:u,value:p,name:m,options:x})}else a.push({categoryId:u,value:p,name:m,options:g.map(h=>g0(h))})}return a},[n,s,o])}function g0(t,e={}){return w({value:t.id,name:t.title},e)}const Fce=j(()=>I(()=>import("./l0g4prc0o7s7grky.js").then(t=>t._),__vite__mapDeps([178,1])),{loading:t=>L(t)}),Ok=j(()=>I(()=>import("./nhoyj7vucpkkecfi.js").then(t=>t._),__vite__mapDeps([179,1])),{loading:t=>L(t)}),Dk=j(()=>I(()=>import("./oqpuvdflzxc04e1g.js").then(t=>t._),__vite__mapDeps([180,1])),{loading:t=>L(t)}),Bce=j(()=>I(()=>import("./oypcm2vgt5u5uwnk.js").then(t=>t._),__vite__mapDeps([181,1])),{loading:t=>L(t)}),Uce=j(()=>I(()=>import("./hvpetgiyil1u6k8k.js").then(t=>t._),__vite__mapDeps([182,1])),{loading:t=>L(t)});function um(t,e){let n=t;if(t===Up.AUTO){const a=e.categories.filter(({defaultModel:i})=>i!==Up.AUTO);(a==null?void 0:a.length)===1&&(n=a[0].defaultModel)}const s=e.categories.find(({defaultModel:a,supportedModels:i})=>a===n||n&&(i==null?void 0:i.includes(n)));if(s){const{categoryId:a}=s;return{selectedCategory:a,modelLabel:s.shortLabel,fullModelLabel:s.label}}const o=e.groups.find(({modelIds:a})=>n&&a.includes(n));if(o){const{group:a,shortLabel:i,label:l}=o;return{selectedCategory:a,modelLabel:i,fullModelLabel:l}}return{selectedCategory:null,modelLabel:null,fullModelLabel:null}}function Vce(t,e,n,s){const o=e?t.formatMessage(Uy.beta):n?t.formatMessage(Uy.alpha):s;if(o)return r.jsx(Gp,{children:o})}function Gce({category:t,modelSwitcherDenialsBySlug:e,conversation:n,currentGizmoId:s,currentModelId:o,testId:a,preferredModelId:i,disabledByAdmin:l=!1,disableSelectionHighlight:c=!1}){const d=J(),{defaultModel:u,label:m,description:f,isBeta:p,isAlpha:g,modelBadge:h}=t,x=$s(s!=null?s:""),y=G(),b=Ib(y,u),v=r.jsxs(zr,{value:u,conversation:n,currentModelId:o,modelSwitcherDenialsBySlug:e,secondary:f,deprecated:b,disabledByAdmin:l,isSelected:!c&&(!s||x)&&o===u,testId:a,preferredModelId:i,children:[m,Vce(d,p,g,h)]},u);return l?r.jsx(kt,{label:d.formatMessage(Uy.disabledByAdmin),children:v}):v}function SS({sections:t}){return r.jsx(r.Fragment,{children:t.map((e,n)=>{var s;return r.jsxs(Kn.Fragment,{children:[n!==0&&((s=t[n-1])==null?void 0:s.id)!=="model-picker-title"?r.jsx(K.Separator,{}):null,e.content]},e.id)})})}function CS(t,e,n,s,o){var te,le,re,ve,_e,we,De;const a=J(),i=G(),l=!pt(i),{data:c}=bl(),d=pn(),u=!l&&!!d&&jA(d)&&c&&!oh(c),{session:m}=pd(i),f=m==null?void 0:m.user,p=f&&wb(f),g=ue(()=>wn(t)),h=g.id,x=ue(()=>hh(t)),y=ss(),b=Tm(y),v=b?null:h;let S=ue(()=>ea(t));const C=PA(i),k=Xn(t.id),M=vS({clientThreadId:t.id}),T=S.modelPickerVersion===2,{data:E}=ue(()=>x&&!Tl(i,x)?NA(i):{data:void 0}),A=!k,N=e.find(({categoryId:ge})=>ge===Wa.ALPHA),R=e.find(({categoryId:ge})=>ge===Wa.DATA_CAMPAIGNS),O=e.find(({categoryId:ge})=>ge===Wa.EXPERIMENTS),D=e.find(({categoryId:ge})=>ge===Wa.MAINLINE),[F,V]=_.useState(""),z=ue(()=>!0),$=[N,R,O,D].reduce((ge,Ne)=>Ne?[...ge,...Ne.options.map(je=>B(w({},je),{badge:Ne.categoryId}))]:ge,[]),Y=_.useMemo(()=>F?$.filter(ge=>ge.name.toLowerCase().includes(F.toLowerCase())):$,[$,F]);if(s&&x&&E){const ge=JSON.parse(JSON.stringify(S));ge.categories=ge.categories.filter(({defaultModel:Ne})=>E.editor.models_list_with_custom_actions.includes(Ne)),S=ge}const Z=!!(N!=null&&N.options.length),Q=!!(R!=null&&R.options.length),q=!!(O!=null&&O.options.length),X=!!(D!=null&&D.options.length),oe=at(),se=_.useCallback(ge=>{U.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),gn(oe,"Thread header dropdown",ge)},[oe]),de=()=>{We.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),U.logEvent("Model Switcher Plus Upgrade Button Clicked"),l?Kt(i,{shouldOpenPaymentModalOnAuth:!0,callback:ge=>{U.logSignUpButtonClicked({location:"Model switcher GPT-4 upsell",provider:ge},Ct.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GPT4_UPSELL)},skipLoginModal:!1}):se()},ie=()=>{U.logEventWithStatsig("Model Switcher Go Upgrade Button Clicked","chatgpt_model_switcher_go_upgrade_button_clicked"),l?Kt(i,{shouldOpenPaymentModalOnAuth:!0,callback:ge=>{U.logSignUpButtonClicked({location:"Model switcher Go upsell",provider:ge},Ct.ACCESS_FLOW_ENTRY_POINT_MODEL_SWITCHER_GO_UPSELL)},skipLoginModal:!1}):se()},ae=()=>{U.logEventWithStatsig("Model Switcher Team Upgrade Button Clicked","chatgpt_model_switcher_team_upgrade_button_clicked"),se(Om)},ce=[],ye=xe(i,"3315017149");S.title&&ye&&ce.push({id:"model-picker-title",content:[r.jsx(K.Label,{className:"mb-0",children:S.title},"model-picker-title")]});const fe=r.jsxs(K.Label,{className:"flex items-center",children:[r.jsx(P,{id:"coNCb7",defaultMessage:"Models"}),r.jsx(kt,{side:"right",className:"ms-1.5",delayDuration:120,label:r.jsx(P,{id:"/vFWz/",defaultMessage:"Learn more"}),children:r.jsx("a",{href:"https://help.openai.com/en/articles/7864572-what-is-the-chatgpt-model-selector",target:"_blank",rel:"noreferrer",children:r.jsx(Dk,{className:"h-3.5 w-3.5 shrink-0"})})})]},"models-section-header");if(l){const ge={id:"modelSection",content:[]};ge.content.push(r.jsx(Pce,{location:"model-switcher",statsig_login_event:"chatgpt_modelswitcher_login_button_clicked",statsig_signup_event:"chatgpt_modelswitcher_signup_button_clicked"},"noAuthUpsell")),ce.push(ge)}else if(!C&&!x){const ge={id:"modelSection",content:[]};Xp(i)?ge.content.push(r.jsx(zr,{value:"",conversation:t,currentModelId:h,onClick:ie,modelSwitcherDenialsBySlug:M,isUpgradeUpsell:!0,icon:Bce,secondary:r.jsx(P,{id:"vm2Wqf",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(P,{id:"/d/+gD",defaultMessage:"ChatGPT Go"})},"goUpgrade")):u?ge.content.push(r.jsx(zr,{value:"",conversation:t,currentModelId:h,onClick:ae,modelSwitcherDenialsBySlug:M,isUpgradeUpsell:!0,icon:Uce,secondary:r.jsx(P,{id:"001Ixi",defaultMessage:"Advanced AI for your work"}),isSelected:!1,children:r.jsx(P,{id:"K94mcH",defaultMessage:"ChatGPT Business"})},"teamUpgrade")):ge.content.push(r.jsx(zr,{value:"",conversation:t,currentModelId:h,onClick:de,modelSwitcherDenialsBySlug:M,isUpgradeUpsell:!0,icon:Ok,secondary:r.jsx(P,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(P,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade")),ge.content.push(r.jsx(zr,{value:wp.AUTO,conversation:t,currentModelId:h,modelSwitcherDenialsBySlug:M,icon:Fce,secondary:u?r.jsx(P,{id:"R8fHfF",defaultMessage:"For quick tasks & answers"}):r.jsx(P,{id:"n96qML",defaultMessage:"Great for everyday tasks"}),isSelected:!b&&!x&&v===wp.AUTO,children:r.jsx(P,{id:"U9E7Rx",defaultMessage:"ChatGPT"})},wp.AUTO)),ce.push(ge)}else{const ge={id:"modelSection",content:[]};S.categories.length&&!T&&ge.content.push(fe),(te=ut(i))!=null&&te.isGo()&&ge.content.push(r.jsx(zr,{value:"",conversation:t,currentModelId:h,onClick:de,modelSwitcherDenialsBySlug:M,isUpgradeUpsell:!0,icon:Ok,secondary:r.jsx(P,{id:"bqTHri",defaultMessage:"Our smartest model & more"}),isSelected:!1,children:r.jsx(P,{id:"mzDzkX",defaultMessage:"ChatGPT Plus"})},"plusUpgrade"));const Ne=new Map;S.categories.forEach(Ge=>{var Re;const Se=r.jsx(Gce,{category:Ge,conversation:t,currentGizmoId:x,currentModelId:h,modelSwitcherDenialsBySlug:M,preferredModelId:o,testId:"model-switcher-".concat(Ge.defaultModel),disabledByAdmin:Ge.disabledByAdmin,disableSelectionHighlight:b},Ge.categoryId);Ge.subcategory?(Ne.has(Ge.subcategory)||Ne.set(Ge.subcategory,[]),(Re=Ne.get(Ge.subcategory))==null||Re.push(Se)):ge.content.push(Se)});const je=(le=S.categories.some(Ge=>Ge.defaultModel==="gpt-5"))!=null?le:!1,Te=(re=S.categories.some(Ge=>Ge.defaultModel==="gpt-5-pro"))!=null?re:!1;if(je&&!Te&&!((ve=ut(i))!=null&&ve.isPro())&&xe(i,"3309244414")){const Ge=r.jsx($ce,{}),Se=(_e=S.categories.find(Re=>Re.defaultModel==="gpt-5-thinking"))==null?void 0:_e.subcategory;Se?(we=Ne.get(Se))==null||we.push(Ge):ge.content.push(Ge)}T?Ne.forEach((Ge,Se)=>{var Ke;Se&&ge.content.push(r.jsx(K.Separator,{},"".concat(Se,"-divider")));const Re=S.categories.find(nt=>nt.subcategory===Se&&nt.defaultModel===(g==null?void 0:g.id)),{fullModelLabel:tt}=um((Ke=Re==null?void 0:Re.defaultModel)!=null?Ke:"",S);ge.content.push(r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{"data-testid":Se+"-submenu",trailing:r.jsx("div",{className:"truncate",children:tt}),children:Se}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:Ge})})]},Se))}):Ne.forEach((Ge,Se)=>{const Re=S.categories.find(tt=>tt.subcategory===Se&&tt.defaultModel===(g==null?void 0:g.id));ge.content.push(r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{"data-testid":Se?"".concat(Se,"-submenu"):void 0,trailing:Re&&r.jsx("div",{className:"truncate",children:Re.label}),children:Se}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:Ge})})]},Se))});const Fe=(De=S.categories.some(Ge=>Ge.defaultModel==="gpt-4o"||Ge.defaultModel==="gpt-4.1"))!=null?De:!1;s&&x&&ge.content.push(r.jsx(K.Label,{className:"flex flex-col items-start gap-1",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx(P,{id:"Y96ci5",defaultMessage:"Limited models for Custom Action GPTs"}),r.jsx(kt,{side:"right",className:"ms-1.5 cursor-pointer",delayDuration:0,label:je&&Fe?r.jsx(P,{id:"CicYT3",defaultMessage:"GPTs with custom web actions can currently only use GPT-5, GPT-4o, and GPT-4.1."}):je?r.jsx(P,{id:"VfAyqX",defaultMessage:"GPTs with custom web actions can currently only use GPT-5."}):r.jsx(P,{id:"wDE3HX",defaultMessage:"GPTs with custom web actions can currently only use GPT-4o and GPT-4.1. If your GPT has no custom actions it can use any model."}),children:r.jsx(Dk,{className:"h-4 w-4 shrink-0"})})]})})),ce.push(ge)}const Ce={id:"otherOptionsSection",content:[]},{selectedCategory:ee}=um(v,S);return A&&(Z||Q||q||X?Ce.content.push(r.jsx("div",{className:"px-4 py-2",children:r.jsx(F8,{inputClassName:"w-full",onKeyDown:ge=>{ge.stopPropagation()},onChange:ge=>{V(ge.target.value)},value:F})})):p&&Ce.content.push(r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{size:"long"}),r.jsx(K.Shimmer,{size:"long"}),r.jsx(K.Shimmer,{size:"long"}),r.jsx(K.Shimmer,{size:"long"})]})),F?Ce.content.push(r.jsxs("div",{className:"scrollbar-gutter-stable max-h-64 w-[min(320px,95vw)] overflow-y-scroll",children:[Y.length===0&&r.jsx(K.Item,{className:"w-full",children:a.formatMessage({id:"model-switcher.no-results",defaultMessage:"No results found"})}),Y.map(ge=>{const{value:Ne}=ge;return"options"in ge?r.jsx(hc,{conversation:t,currentModel:g,isSelected:!b&&(h==null?void 0:h.startsWith(Ne)),option:ge,modelSwitcherDenialsBySlug:M,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},Ne):r.jsxs(zr,{conversation:t,currentModelId:h,isSelected:!b&&h===Ne,value:Ne,modelSwitcherDenialsBySlug:M,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o,children:[ge.name,ge.badge&&r.jsx(Gp,{children:ge.badge})]},Ne)})]})):(Z&&Ce.content.push(r.jsx(hc,{isSelected:!b&&ee===Wa.ALPHA,conversation:t,currentModel:g,option:N,modelSwitcherDenialsBySlug:M,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},N.value)),Q&&Ce.content.push(r.jsx(hc,{isSelected:!b&&ee===Wa.DATA_CAMPAIGNS,conversation:t,currentModel:g,option:R,modelSwitcherDenialsBySlug:M,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},R.value)),q&&Ce.content.push(r.jsx(hc,{conversation:t,currentModel:g,isSelected:!b&&ee===Wa.EXPERIMENTS,option:O,modelSwitcherDenialsBySlug:M,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},O.value)),X&&Ce.content.push(r.jsx(hc,{isSelected:!b&&ee===Wa.MAINLINE,conversation:t,currentModel:g,option:D,modelSwitcherDenialsBySlug:M,displayInFull_INTERNAL_USE_ONLY:!0,preferredModelId:o},D.value)))),Ce.content.length&&z&&ce.push(Ce),n&&ce.push({id:Nk,content:[r.jsx(Ace,{},Nk)]}),ce}const $ce=()=>{const t=at(),e=G(),n=xe(e,"3315017149");let s=r.jsx(P,{id:"4myKt+",defaultMessage:"GPT-5 Pro"});return n&&(s=r.jsx(P,{id:"fCVj6z",defaultMessage:"Pro"})),r.jsx(K.Item,{disabled:!0,label:s,secondary:r.jsx(P,{id:"BsApen",defaultMessage:"Research-grade intelligence"}),trailing:r.jsx(he,{color:"secondary",size:"small",onClick:()=>{U.logEventWithStatsig("Model Switcher Pro Upgrade Button Clicked","chatgpt_model_switcher_pro_upgrade_button_clicked"),U.logEvent("Account Pay: Open Payment from Model Picker",{content:"gizmo-button"}),gn(t,"Thread header dropdown")},children:r.jsx(P,{id:"aJndhk",defaultMessage:"Upgrade"})})})},Uy=be({alpha:{id:"o5FsPB",defaultMessage:"Alpha"},beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALLE, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALLE and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALLE, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"},disabledByAdmin:{id:"XoQ6cH",defaultMessage:"Disabled by Admin"}});function Hce(t,e,n){const s=ue(()=>um(wn(t).id,ea(t)).modelLabel),o=bS(),a=CS(t,o,void 0,e,n);return{modelLabel:s,dropdownSections:a}}function Wce({show:t,conversation:e,gizmoHasCustomActions:n,preferredModelId:s}){const{modelLabel:o,dropdownSections:a}=Hce(e,n,s);return t?r.jsxs(K.Sub,{onOpenChange:i=>{i&&U.logEvent("GPTs: Breadcrumb Picker Model Picker Open")},children:[r.jsx(K.SubMenuTrigger,{children:r.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[r.jsx(P,{id:"ilkdMh",defaultMessage:"Model"}),r.jsx("span",{className:"text-token-text-secondary text-xs font-medium",children:o})]})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{onClick:()=>{U.logEvent("GPTs: Breadcrumb Picker Model Picker Select")},children:r.jsx(SS,{sections:a})})})]}):null}j(()=>I(()=>import("./cygq8mxjp86vbmk2.js").then(t=>t._),__vite__mapDeps([183,1])),{loading:t=>L(t)});const zce=j(()=>I(()=>import("./jo4b6i1j3zlywpeh.js").then(t=>t._),__vite__mapDeps([184,1])),{loading:t=>L(t)}),qce=j(()=>I(()=>import("./ceivmd4pm4umbvdn.js").then(t=>t._),__vite__mapDeps([139,1])),{loading:t=>L(t)}),W8=j(()=>I(()=>import("./ef28lc1b3o54kec9.js").then(t=>t._),__vite__mapDeps([185,1])),{loading:t=>L(t)}),Yce=j(()=>I(()=>import("./bci083mws0hai8bl.js").then(t=>t._),__vite__mapDeps([186,1])),{loading:t=>L(t)});j(()=>I(()=>import("./bwwtp434e5t8plq3.js").then(t=>t._),__vite__mapDeps([187,1])),{loading:t=>L(t)});j(()=>I(()=>import("./dkkcsrii3168szu2.js").then(t=>t._),__vite__mapDeps([132,1])),{loading:t=>L(t)});const Zce=j(()=>I(()=>import("./loigwwkjnze49dp5.js").then(t=>t._),__vite__mapDeps([188,1])),{loading:t=>L(t)}),Kce=j(()=>I(()=>import("./dw2sagcmxsd9pyji.js").then(t=>t._),__vite__mapDeps([189,1])),{loading:t=>L(t)}),Qce=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])),{loading:t=>L(t)}),Jce=j(()=>I(()=>import("./ooz2slmm8agf6bjp.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>L(t)}),Xce=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),Fk=j(()=>I(()=>import("./edqpi59mx50h2olv.js").then(t=>t._),__vite__mapDeps([154,1])),{loading:t=>L(t)}),z8=j(()=>I(()=>import("./cr5h05bhk5js9k9c.js").then(t=>t._),__vite__mapDeps([190,1])),{loading:t=>L(t)}),ede=j(()=>I(()=>import("./kaxn2bizrxslkpa3.js").then(t=>t._),__vite__mapDeps([18,1])),{loading:t=>L(t)}),tde=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),nde=j(()=>I(()=>import("./fwyctp3zfyh6emd2.js").then(t=>t._),__vite__mapDeps([191,1])),{loading:t=>L(t)}),sde=j(()=>I(()=>Promise.resolve().then(()=>pf),void 0),{loading:t=>L(t)}),ode=j(()=>I(()=>import("./orvtgt57nxqo5v9x.js").then(t=>t._),__vite__mapDeps([192,1])),{loading:t=>L(t)}),ade=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)}),rde=j(()=>I(()=>import("./mdgmhl7nsma70wnx.js").then(t=>t._),__vite__mapDeps([126,1])),{loading:t=>L(t)}),ide=j(()=>I(()=>import("./dyie70wwv508ud8r.js").then(t=>t._),__vite__mapDeps([193,1])),{loading:t=>L(t)}),lde=j(()=>I(()=>import("./eyatw3wgc1bbpoog.js"),__vite__mapDeps([194,1,29,30]))),cde=j(()=>I(()=>import("./nzmq5nvm0e97q2e1.js"),__vite__mapDeps([195,1,29,30])).then(t=>t.GizmoKeepInSidebarMenuItem)),dde=j(()=>I(()=>import("./abwq3htfqpekhs38.js"),__vite__mapDeps([175,1,29,30])).then(t=>t.DeleteConversationConfirmationModalContainer)),ude=j(()=>I(()=>import("./mnpqan18b42bsh1o.js").then(t=>t.c),__vite__mapDeps([196,1,29,30])).then(t=>t.GizmoDetailsModal)),mde=j(()=>I(()=>import("./hw5dmskx8fqgh0xb.js"),__vite__mapDeps([197,1,29,30])).then(t=>t.default)),fde=j(()=>I(()=>import("./iyq5w8n4elzr597d.js"),__vite__mapDeps([198,1,29,30])).then(t=>t.default)),pde=j(()=>I(()=>Promise.resolve().then(()=>dOe),void 0).then(t=>t.default)),gde=j(()=>I(()=>import("./pcwyhd2ia1xnez4s.js"),__vite__mapDeps([199,1,29,30])).then(t=>t.ThreadReportConversationModal));function hde(t){"use forget";const e=H.c(8),{children:n,conversation:s,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}=t;let l;e[0]!==s||e[1]!==o||e[2]!==i||e[3]!==a?(l=r.jsx(q8,{conversation:s,gizmoResource:o,showReportModal:a,showGizmoModelPicker:i}),e[0]=s,e[1]=o,e[2]=i,e[3]=a,e[4]=l):l=e[4];let c;return e[5]!==n||e[6]!==l?(c=r.jsx(r.Fragment,{children:r.jsx(Si,{size:"small",triggerButton:n,children:l})}),e[5]=n,e[6]=l,e[7]=c):c=e[7],c}function q8({conversation:t,gizmoResource:e,showReportModal:n,showGizmoModelPicker:s}){var M,T;const{canEdit:o}=H$(e),{canCreate:a}=W$(),{canViewConfig:i}=z$(e),l=q$(e.gizmo.id),c=Ia(),d=Y$(e),u=e.gizmo.share_recipient===Tn.Marketplace||e.gizmo.share_recipient===Tn.Link,m=!d&&u,f=G(),g=xe(f,"1825130190")&&!d&&RA(e),h=(c==null?void 0:c.includes(Rs.GizmoSupportEmails))&&!d&&e.gizmo.author.will_receive_support_emails&&g,x=Yle(),y=ue(t.serverId$),v=iS(Rs.WorkspaceShareLinks)&&y&&pt(f),S=at(),C=_n(),k=p1();return r.jsxs(r.Fragment,{children:[r.jsx(Wce,{show:s,conversation:t,gizmoHasCustomActions:bP(e.tools),preferredModelId:(M=e.gizmo.default_model)!=null?M:void 0}),r.jsx(K.LinkItem,{onClick:()=>{U.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:e.gizmo.id})},to:"/g/".concat(e.gizmo.short_url),state:k,icon:sde,children:r.jsx(P,w({},os.newChat))}),r.jsx(K.Item,{onClick:()=>gt(f,ude,{gizmoId:e.gizmo.id,creatorId:e.gizmo.author.user_id}),icon:Xce,children:r.jsx(P,w({},os.about))}),((T=e.tools)==null?void 0:T.find(E=>E.type===Js.JIT_PLUGIN))&&r.jsx(K.Item,{onClick:()=>gt(f,mde,{gizmo:e}),icon:Jce,children:r.jsx(P,w({},os.privacySettings))}),o&&r.jsx(K.Item,{onClick:()=>{S(l)},icon:Yce,children:r.jsx(P,w({},os.customize))}),!o&&i&&r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{onClick:()=>{S("/g/".concat(e.gizmo.id,"/view"))},icon:ede,children:r.jsx(P,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),a&&r.jsx(K.Item,{onClick:async()=>{const E=await Am.copyGizmo({gizmoId:e.gizmo.id});E.gizmo.id&&S("/gpts/editor/".concat(E.gizmo.id))},icon:nde,children:r.jsx(P,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),r.jsx(cde,{gizmoResource:e,location:"conversation_page"}),r.jsx(pce,{gizmoResource:e}),h&&r.jsx(K.Item,{onClick:()=>gt(f,fde,{gizmo:e}),icon:rde,children:r.jsx(P,w({},os.feedbackEmail))}),g&&r.jsx(K.Item,{onClick:()=>gt(f,pde,{gizmo:e}),icon:ode,children:r.jsx(P,w({},os.reviewGPT))}),m&&r.jsx(K.Item,{onClick:n,icon:z8,children:r.jsx(P,w({},os.reportGPT))}),v&&r.jsx(K.Item,{onClick:()=>yn.openSharingModal(y),icon:W8,children:r.jsx(P,w({},os.shareChat))}),x&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),r.jsx(K.Item,{color:"danger",onClick:()=>{gt(f,lde,{gpt:e,account:C,isOpen:!0})},icon:tde,children:r.jsx(P,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),(c==null?void 0:c.includes("debug"))&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),r.jsx(K.Item,{onClick:()=>{S(Z$(e))},children:"(Internal) See share page"})]})]})}const _de=({conversation:t,isActiveConversation:e,inMainScreen:n=!1,inChatWindow:s=!1,inOrla:o=!1})=>{var De,ge,Ne;const a=G(),i=xe(a,"3096078201"),l=null,c=_n(),d=t.id,u=t.gizmo_id,m=ue(()=>u?_S(a,u).gizmo$():null),f=Tl(a,u),p=xe(a,"3376455464"),g=xe(a,"16480203"),h=xe(a,"2486748455"),x=!f||h,y=xe(a,"2560369700"),b=jt(d),v=iS(Rs.WorkspaceShareLinks),{isUnauthenticated:S}=Un(),C=wA(a),k="owner"in t?(De=t.owner)==null?void 0:De.user_id:null,M=k==null||k===(c==null?void 0:c.normalizedAccountUserId),[T,E]=Ue(d,je=>[je==null?void 0:je.isStarred,je==null?void 0:je.continuingFromSharedProjectConversationId]),{shouldShowProjectsChatShareModal:A,openProjectsChatShareModal:N}=zle({clientThreadId:d}),R=v&&(b||E)&&!S&&(!f||g)&&M&&!0,[O,D]=_.useState(!!t.is_do_not_remember),[F,V]=_.useState(!1),z=T!=null?T:!!t.is_starred,$=J(),Y=m&&f?vh(m):!1;let Z=null;const{snorlaxes:Q}=gS();Z=Q;let q=null;f&&Z&&(q=(ge=Z.find(({gizmo:je})=>je.gizmo.id===u))==null?void 0:ge.gizmo);const X=SP(),{mutate:oe}=Xle(),se=xt(),{eligible:de,markAsViewed:ie}=$e(Ye.ArchiveConversationOnboarding),ae=Ut(),ce=at(),ye=vn(Cr),fe=Es(),Ce=$.formatMessage({id:"j9ieJj",defaultMessage:"Unable to create a group chat"});_.useCallback(async()=>{},[fe,l,ce,b,ae,x,Ce,i]);const ee=async()=>{await pe.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:t.id}},requestBody:{is_archived:!0}}),ro(se,t.gizmo_id),We.logEvent("chatgpt_conversation_archived"),U.logEvent("Conversation Archived"),de&&(ae.info($.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),ie()),e&&Ti(ce)},te=()=>{const je=!z;oe({conversation:t,isStarred:je}),U.logEvent(je?"Conversation Pinned":"Conversation Unpinned")},le=xS(),re=[R&&(!s||ye)&&r.jsx(K.Item,{onClick:()=>A?N():yn.openSharingModal(b,"History Item Menu"),icon:W8,"data-testid":"share-chat-menu-item",children:r.jsx(P,w({},os.shareChat))},"share"),!1,!s&&!o&&M&&r.jsx(K.Item,{disabled:!b,onClick:()=>{setTimeout(()=>{b&&O8.publish({kind:n?"editTitleInMainScreen":"editTitle",serverThreadId:b})},100)},icon:Qce,children:r.jsx(P,w({},os.renameChat))},"rename"),C&&!fe&&M&&Z&&(Z==null?void 0:Z.length)>0&&dy(u,z)&&b&&!0&&r.jsxs(Kn.Fragment,{children:[f&&r.jsxs(r.Fragment,{children:[Z.length>1&&r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{icon:Fk,children:r.jsx(P,w({},Gt.moveConversationToProject))}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:r.jsx(By,{inSidebarFlyout:!1,onUpdateConversationGizmo:je=>X({newGizmoId:je,conversation:t,previousGizmoId:u!=null?u:null}),currentGizmoId:u})})})]}),r.jsx(K.Item,{onClick:()=>{X({newGizmoId:null,conversation:t,previousGizmoId:u!=null?u:null})},icon:Zce,children:r.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:r.jsx(P,B(w({},Gt.removeConversationFromProject),{values:{projectName:(Ne=q==null?void 0:q.gizmo.display.name)!=null?Ne:"project"}}))})})]}),!f&&!0&&r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{icon:Fk,children:$.formatMessage(Gt.moveConversationToProject)}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:r.jsx(By,{inSidebarFlyout:!1,onUpdateConversationGizmo:je=>X({newGizmoId:je,conversation:t,previousGizmoId:u!=null?u:null})})})})]})]},"snorlax")].filter(Boolean),{automationId:ve,sourceMessageId:_e}=_.useContext(Qm),we={topItems:re.length>0,odysseyItem:!!ve||!ve&&!!_e,pinItem:!u&&!fe&&y,reportItem:p&&(s||Y),archiveItem:M&&!fe,dnrItem:!1,deleteItem:M};return Object.values(we).some(Boolean)?r.jsxs(r.Fragment,{children:[we.topItems&&r.jsxs(r.Fragment,{children:[re,r.jsx(K.Separator,{className:"first:hidden last:hidden"})]}),we.odysseyItem&&r.jsx(fS,{children:({openScheduleModal:je,isScheduled:Te,isSchedulable:Fe})=>(Fe||Te)&&r.jsx(K.Item,{onClick:je,disabled:!b,icon:ade,children:r.jsx(P,w({},Te?os.editSchedule:os.scheduleTask))})}),we.pinItem&&r.jsx(K.Item,{disabled:!b,onClick:te,icon:z?zce:Kce,iconAriaLabel:$.formatMessage(z?os.unpinChat:os.pinChat),children:r.jsx(P,w({},z?os.unpinChat:os.pinChat))}),we.archiveItem&&r.jsx(K.Item,{disabled:!b,onClick:()=>{b&&ee()},icon:ide,children:r.jsx(P,w({},os.archiveChat))}),!1,we.reportItem&&r.jsx(K.Item,{icon:z8,onClick:()=>gt(a,gde,B(w({clientThreadId:d,isSharedConversation:le},Y&&{projectId:u,conversationOwnerId:k}),{isStaticSharedThread:!1})),children:u?r.jsx(P,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):r.jsx(P,{id:"thread.report",defaultMessage:"Report"})}),we.deleteItem&&r.jsx(K.Item,{color:"danger",disabled:!b,onClick:()=>{b&&gt(a,dde,{conversationTitle:t.title,serverThreadId:b,isActiveConversation:e,gizmoId:u})},icon:qce,"data-testid":"delete-chat-menu-item",children:r.jsx(P,w({},os.deleteChat))})]}):null};function xde({clientThreadId:t,gizmoId:e,conversationTitle:n,conversationAsyncStatus:s,isDoNotRemember:o,isStarred:a,owner:i=null}){return{id:t,title:n!=null?n:"",create_time:null,update_time:null,owner:i,conversation_template_id:null,async_status:s!=null?s:null,gizmo_id:e!=null?e:null,snippet:null,is_do_not_remember:o,is_starred:a}}const yde=c=>{var d=c,{conversation:t,children:e,isActiveConversation:n,onOpenChange:s,inMainScreen:o=!1,inChatWindow:a=!1,inOrla:i=!1}=d,l=Me(d,["conversation","children","isActiveConversation","onOpenChange","inMainScreen","inChatWindow","inOrla"]);const[u,m]=_.useState(!1),f=_de({conversation:t,inMainScreen:o,isActiveConversation:n,inChatWindow:a,inOrla:i});return r.jsx(Si,B(w({},l),{open:u,onOpenChange:p=>{m(p),s==null||s(p)},side:"bottom",contentAlign:a?"end":"start",alignOffset:a?0:-8,sideOffset:a?0:-4,triggerButton:f?e:void 0,size:"auto",children:u&&r.jsx(r.Fragment,{children:f})}))},os=be({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"},pinChat:{defaultMessage:"Pin chat",id:"GizmoInformation.pinChat"},unpinChat:{defaultMessage:"Unpin chat",id:"GizmoInformation.unpinChat"}}),vde=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:yde,GizmoInformationDropdown:hde,GizmoInformationDropdownItems:q8,buildConversationResponse:xde},Symbol.toStringTag,{value:"Module"}));function Y8(t,e,{location:n}){if(U.logNewChatButtonClicked({location:n}),"button"in e&&(e.metaKey||e.ctrlKey)){U.logEventWithStatsig("New Chat Opened In New Tab","chatgpt_new_chat_opened_in_new_tab");return}We.logEvent("chatgpt_web_thread_tap_new_thread"),pt(t)?Iee():mt.getItem(Le.HasSeenNewChatModal)!==!0&&(mt.setItem(Le.HasSeenNewChatModal,!0),yn.openModal(Zc.NoAuthNewChat),e.preventDefault())}const bde=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)});function Z8(t){return r.jsx(g1,B(w({},t),{icon:bde}))}function K8(){const t=G(),{data:e}=bl();return pt(t)&&!!e&&!oh(e)}const nu={enableProfileUpgradePill:!1,enableUpgradeMenuSparkleIcon:!1,enableTinybarUpgradeBtn:!1,enableThreadHeaderUpgradePill:!0};function Sde(){const t=G();if(!K8())return nu;const n=Ve(t,"772164167");return{enableProfileUpgradePill:n.get("enable_profile_upgrade_pill",nu.enableProfileUpgradePill),enableUpgradeMenuSparkleIcon:n.get("enable_upgrade_menu_sparkle_icon",nu.enableUpgradeMenuSparkleIcon),enableTinybarUpgradeBtn:n.get("enable_tinybar_upgrade_btn",nu.enableTinybarUpgradeBtn),enableThreadHeaderUpgradePill:n.get("enable_thread_header_upgrade_pill",nu.enableThreadHeaderUpgradePill)}}const Cde=j(()=>I(()=>import("./nw44vms3p4cc1mrm.js").then(t=>t._),__vite__mapDeps([200,1])),{loading:t=>L(t)});function Qqe(){const t=G(),e=xe(t,"3375735072"),n=at();return e?r.jsx(K.Item,{onSelect:()=>{n("#settings/".concat(Bn.Orders),{replace:!1})},icon:Cde,children:r.jsx(P,{id:"rcTyEn",defaultMessage:"Orders"})}):null}function Bk(t,e){const n=t.indexOf(e);return n===-1?Number.POSITIVE_INFINITY:n}const w1=t=>{"use forget";const e=H.c(14),{binding:n,className:s}=t,o=J();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=K$(),e[0]=a):a=e[0];const i=a;let l,c;if(e[1]!==n||e[2]!==s||e[3]!==o){let u;e[6]===Symbol.for("react.memo_cache_sentinel")?(u=(p,g)=>{const h=i?Ede:Ade,x=Bk(h,p),y=Bk(h,g);return x-y},e[6]=u):u=e[6];const m=[...n].sort(u);e[7]!==s?(l=W("inline-flex whitespace-pre *:inline-flex *:font-sans",!i&&"*:not-last:after:px-0.5 *:not-last:after:content-['+']",s),e[7]=s,e[8]=l):l=e[8];let f;e[9]!==o?(f=p=>{var x,y,b;const g=(y=(x=i?Mde[p]:null)!=null?x:Tde[p])!=null?y:p.toLocaleUpperCase(),h=(b=i?wde[p]:null)!=null?b:kde[p];return r.jsx("kbd",{"aria-label":h&&o.formatMessage(h),children:r.jsx("span",{className:"min-w-[1em]",children:g})},p)},e[9]=o,e[10]=f):f=e[10],c=m.map(f),e[1]=n,e[2]=s,e[3]=o,e[4]=l,e[5]=c}else l=e[4],c=e[5];let d;return e[11]!==l||e[12]!==c?(d=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=d):d=e[13],d},Fo=be({commandKey:{id:"keyboard.key.command",defaultMessage:"Command"},optionKey:{id:"keyboard.key.option",defaultMessage:"Option"},shiftKey:{id:"keyboard.key.shift",defaultMessage:"Shift"},controlKey:{id:"keyboard.key.control",defaultMessage:"Control"},altKey:{id:"keyboard.key.alt",defaultMessage:"Alt"},winKey:{id:"keyboard.key.win",defaultMessage:"Windows"},escapeKey:{id:"keyboard.key.esc",defaultMessage:"Escape"},deleteKey:{id:"keyboard.key.delete",defaultMessage:"Delete"},backspaceKey:{id:"keyboard.key.bksp",defaultMessage:"Backspace"}}),wde={[ze.Mod]:Fo.commandKey,[ze.Meta]:Fo.commandKey,[ze.Alt]:Fo.optionKey,[ze.Backspace]:Fo.deleteKey},kde={[ze.Mod]:Fo.controlKey,[ze.Meta]:Fo.winKey,[ze.Alt]:Fo.altKey,[ze.Shift]:Fo.shiftKey,[ze.Control]:Fo.controlKey,[ze.Escape]:Fo.escapeKey,[ze.Backspace]:Fo.backspaceKey},Mde={[ze.Mod]:"",[ze.Meta]:"",[ze.Alt]:"",[ze.Shift]:"",[ze.Control]:"",[ze.Escape]:""},Tde={[ze.Mod]:"Ctrl",[ze.Meta]:"Win",[ze.Alt]:"Alt",[ze.Shift]:"Shift",[ze.Control]:"Ctrl",[ze.Comma]:",",[ze.Enter]:"",[ze.Escape]:"Esc",[ze.ArrowUp]:"",[ze.ArrowDown]:"",[ze.ArrowLeft]:"",[ze.ArrowRight]:"",[ze.Backspace]:"",[ze.Delete]:"",[ze.Tab]:""},Ede=[ze.Control,ze.Alt,ze.Shift,ze.Meta,ze.Mod],Ade=[ze.Meta,ze.Mod,ze.Control,ze.Alt,ze.Shift],k1=Qe(!1),Jqe=()=>{"use forget";const t=H.c(14),e=G();let n;t[0]!==e?(n=bh(e),t[0]=e,t[1]=n):n=t[1];const{actions$:s,addAction:o}=n,a=ue(k1),i=ue(s);let l;t[2]!==i?(l=jde(i),t[2]=i,t[3]=l):l=t[3];const c=l;let d,u;if(t[4]!==o?(d=()=>o({key:"toggleKeyboardActions",action:Lde,actionMessageDescriptor:He({id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}),group:On.Settings,keyboardBinding:[ze.Mod,"/"]}),u=[o],t[4]=o,t[5]=d,t[6]=u):(d=t[5],u=t[6]),_.useEffect(d,u),c.length===0)return null;let m;t[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(so.Overlay,{}),t[7]=m):m=t[7];let f;t[8]!==c||t[9]!==a?(f=r.jsxs(Cl,{children:[m,r.jsx(dd,{asChild:!0,children:r.jsx(Pde,{groups:c,showAsModal:a,onClose:Dde})})]}),t[8]=c,t[9]=a,t[10]=f):f=t[10];let p;return t[11]!==a||t[12]!==f?(p=r.jsx(Sl,{open:a,onOpenChange:Ode,modal:a,children:f}),t[11]=a,t[12]=f,t[13]=p):p=t[13],p};function Ide(t){return t.toReversed?t.toReversed():t.slice().reverse()}function jde(t){const e=Object.entries(Md(DI(LA(t,n=>n.key),n=>Ide(n.keyboardBinding).join("")),n=>n.group));return e.sort(([n],[s])=>Object.keys(On).indexOf(n)-Object.keys(On).indexOf(s)),e}const Pde=t=>{"use forget";const e=H.c(16),{groups:n,showAsModal:s,onClose:o}=t,a=!s&&"transition-opacity starting:opacity-0";let i;e[0]!==a?(i=W("shadow-long fixed start-3 bottom-3 min-w-(--sidebar-width) px-1.5 text-sm",a),e[0]=a,e[1]=i):i=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("h2",{className:"text-sm",children:r.jsx(P,{id:"hotkeyModal.title",defaultMessage:"Keyboard shortcuts"})}),e[2]=l):l=e[2];let c;e[3]!==o||e[4]!==s?(c=s&&r.jsx(ud,{asChild:!0,children:r.jsx(fn,{onClick:o})}),e[3]=o,e[4]=s,e[5]=c):c=e[5];let d;e[6]!==c?(d=r.jsxs("div",{className:"ms-2.5 mb-3 flex h-9 items-center justify-between font-semibold",children:[l,c]}),e[6]=c,e[7]=d):d=e[7];let u;e[8]!==n?(u=n.map(Bde),e[8]=n,e[9]=u):u=e[9];let m;e[10]!==u?(m=r.jsx("dl",{className:"grid [grid-template-columns:minmax(0,1fr)_max-content] gap-x-6 gap-y-3 px-2.5 pb-2",children:u}),e[10]=u,e[11]=m):m=e[11];let f;return e[12]!==i||e[13]!==d||e[14]!==m?(f=r.jsxs(OA,{className:i,children:[d,m]}),e[12]=i,e[13]=d,e[14]=m,e[15]=f):f=e[15],f};function Nde(t){switch(t){case On.Core:return null;case On.Chat:return r.jsx(P,{id:"keyboardActionGroup.label.Chat",defaultMessage:"Chat"});case On.Settings:return r.jsx(P,{id:"keyboardActionGroup.label.Settings",defaultMessage:"Settings"});case On.Internal:return"Internal"}}function Rde(t){return!t}function Lde(){k1.set(Rde)}function Ode(t){t||k1.set(!1)}function Dde(){return k1.set(!1)}function Fde(t){return r.jsxs(_.Fragment,{children:[r.jsx("dt",{children:typeof t.actionMessageDescriptor=="string"?t.actionMessageDescriptor:r.jsx(P,w({},t.actionMessageDescriptor))}),r.jsx("dd",{className:"text-token-text-secondary justify-self-end",children:r.jsx(w1,{binding:t.keyboardBinding})})]},t.key)}function Bde(t){const[e,n]=t;return r.jsxs(_.Fragment,{children:[r.jsx("dt",{className:"text-token-text-tertiary col-span-2 mt-2 empty:hidden",children:Nde(e)}),n.map(Fde)]},e)}function Xqe(t){var s;const{data:e,isLoading:n}=pZ(t);return{count:(s=e==null?void 0:e.total)!=null?s:0,isLoading:n}}var OE;ct.ol(OE||(OE=rt(["ms-5 list-decimal"])));var DE;const Ude=ct.ul(DE||(DE=rt(["ms-3 list-disc"])));var FE;const Vde=ct.li(FE||(FE=rt(["marker:text-token-text-tertiary text-token-text-primary mb-2"])));var wS="Radio",[Gde,Q8]=wl(wS),[$de,Hde]=Gde(wS),J8=_.forwardRef((t,e)=>{const x=t,{__scopeRadio:n,name:s,checked:o=!1,required:a,disabled:i,value:l="on",onCheck:c,form:d}=x,u=Me(x,["__scopeRadio","name","checked","required","disabled","value","onCheck","form"]),[m,f]=_.useState(null),p=Rn(e,y=>f(y)),g=_.useRef(!1),h=m?d||!!m.closest("form"):!0;return r.jsxs($de,{scope:n,checked:o,disabled:i,children:[r.jsx(cn.button,B(w({type:"button",role:"radio","aria-checked":o,"data-state":tN(o),"data-disabled":i?"":void 0,disabled:i,value:l},u),{ref:p,onClick:Rt(t.onClick,y=>{o||c==null||c(),h&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})})),h&&r.jsx(Wde,{control:m,bubbles:!g.current,name:s,value:l,checked:o,required:a,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});J8.displayName=wS;var X8="RadioIndicator",eN=_.forwardRef((t,e)=>{const i=t,{__scopeRadio:n,forceMount:s}=i,o=Me(i,["__scopeRadio","forceMount"]),a=Hde(X8,n);return r.jsx(ah,{present:s||a.checked,children:r.jsx(cn.span,B(w({"data-state":tN(a.checked),"data-disabled":a.disabled?"":void 0},o),{ref:e}))})});eN.displayName=X8;var Wde=t=>{const c=t,{control:e,checked:n,bubbles:s=!0}=c,o=Me(c,["control","checked","bubbles"]),a=_.useRef(null),i=Nb(n),l=DA(e);return _.useEffect(()=>{const d=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==n&&f){const p=new Event("click",{bubbles:s});f.call(d,n),d.dispatchEvent(p)}},[i,n,s]),r.jsx("input",B(w({type:"radio","aria-hidden":!0,defaultChecked:n},o),{tabIndex:-1,ref:a,style:B(w(w({},t.style),l),{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))};function tN(t){return t?"checked":"unchecked"}var zde=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],kS="RadioGroup",[qde]=wl(kS,[nh,Q8]),nN=nh(),sN=Q8(),[Yde,Zde]=qde(kS),oN=_.forwardRef((t,e)=>{const y=t,{__scopeRadioGroup:n,name:s,defaultValue:o,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m}=y,f=Me(y,["__scopeRadioGroup","name","defaultValue","value","required","disabled","orientation","dir","loop","onValueChange"]),p=nN(n),g=sh(d),[h,x]=ur({prop:a,defaultProp:o,onChange:m});return r.jsx(Yde,{scope:n,name:s,required:i,disabled:l,value:h,onValueChange:x,children:r.jsx(B6,B(w({asChild:!0},p),{orientation:c,dir:g,loop:u,children:r.jsx(cn.div,B(w({role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g},f),{ref:e}))}))})});oN.displayName=kS;var aN="RadioGroupItem",rN=_.forwardRef((t,e)=>{const p=t,{__scopeRadioGroup:n,disabled:s}=p,o=Me(p,["__scopeRadioGroup","disabled"]),a=Zde(aN,n),i=a.disabled||s,l=nN(n),c=sN(n),d=_.useRef(null),u=Rn(e,d),m=a.value===o.value,f=_.useRef(!1);return _.useEffect(()=>{const g=x=>{zde.includes(x.key)&&(f.current=!0)},h=()=>f.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",h)}},[]),r.jsx(F6,B(w({asChild:!0},l),{focusable:!i,active:m,children:r.jsx(J8,B(w(w({disabled:i,required:a.required,checked:m},c),o),{name:a.name,ref:u,onCheck:()=>a.onValueChange(o.value),onKeyDown:Rt(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:Rt(o.onFocus,()=>{var g;f.current&&((g=d.current)==null||g.click())})}))}))});rN.displayName=aN;var Kde="RadioGroupIndicator",iN=_.forwardRef((t,e)=>{const a=t,{__scopeRadioGroup:n}=a,s=Me(a,["__scopeRadioGroup"]),o=sN(n);return r.jsx(eN,B(w(w({},o),s),{ref:e}))});iN.displayName=Kde;var Qde=oN,MS=rN,TS=iN,h0,Uk;function Jde(){if(Uk)return h0;Uk=1;function t(e,n,s){return e===e&&(s!==void 0&&(e=e<=s?e:s),n!==void 0&&(e=e>=n?e:n)),e}return h0=t,h0}var _0,Vk;function Xde(){if(Vk)return _0;Vk=1;var t=Jde(),e=Q$();function n(s,o,a){return a===void 0&&(a=o,o=void 0),a!==void 0&&(a=e(a),a=a===a?a:0),o!==void 0&&(o=e(o),o=o===o?o:0),t(e(s),o,a)}return _0=n,_0}var eue=Xde();const ES=Wn(eue);var vg=(t=>(t.Month="month",t.Year="year",t.Once="once",t))(vg||{}),tue=(t=>(t.Inclusive="inclusive",t.Exclusive="exclusive",t))(tue||{});function eYe(t,e,n,s,o){return{product:t,currency:e,recurringInterval:n,amount:Number(s),amountTaxBehavior:o}}const nue="/checkout_pricing_config/countries",sue="/checkout_pricing_config/configs/{country_code}",oue="go",aue="plus",tYe="pro",Gk="business",lN=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","ID","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE","CH","GB","IN","PK","TH","MY","VN","PH","NG","ZA","KZ","TZ","EG","BR"];function rue(t){return lN.includes(t)}const cN={AT:20,BE:21,BG:20,HR:25,CY:19,CZ:21,DK:25,EE:24,FI:25.5,FR:20,DE:19,GR:24,HU:27,IS:24,ID:11,IE:23,IT:22,LV:21,LI:8.1,LT:21,LU:17,MT:18,NL:21,NO:25,PL:23,PT:23,RO:21,SK:23,SI:22,ES:21,SE:25,CH:8.1,GB:20,IN:18,PK:0,TH:7,MY:8,VN:10,PH:12,NG:8,ZA:15,KZ:12,TZ:18,EG:14,BR:0};function iue({amount:t,roundToPrecision:e=2}){const n=Math.pow(10,e);return Math.round(t*n)/n}function lue({amount:t,taxPercent:e,inclusive:n,roundToPrecision:s=2}){const o=e*t/((n?e:0)+100),a=Math.pow(10,s);return Math.round(o*a)/a}function nYe(t,e){return e==null?(Oe.addError(new Error("nullish_country_for_vat_calculation"),{country:e}),0):rue(e)?lue({amount:t,taxPercent:cN[e],inclusive:!0}):(Oe.addError(new Error("unrecognized_country_for_vat_calculation"),{country:e}),0)}function sYe(t,e){let n=null,s=null;return t===e.countryCode?(n=e.currencyConfig.tax_percent,s=e.currencyConfig.tax_type):lN.includes(t)&&(n=cN[t],s=t===_Z?"gst":"vat"),n==null||s==null?null:{taxCountry:t,taxRatePercent:n,taxName:s,reverseChargeEligible:!0}}const oYe={at_vat:{type:"at_vat",country:"AT",region:"EEA-GB-CH",country_label:"Austria",format:"ATU[0-9]{8}",placeholder:"ATU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},be_vat:{type:"be_vat",country:"BE",region:"EEA-GB-CH",country_label:"Belgium",format:"BE(0|1)[0-9]{9}",placeholder:"BE0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},bg_vat:{type:"bg_vat",country:"BG",region:"EEA-GB-CH",country_label:"Bulgaria",format:"BG[0-9]{9,10}",placeholder:"BG0123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},br_cnpj:{type:"br_cnpj",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})[\\/\\\\]?([0-9]{4})\\-?([0-9]{2})",placeholder:"01.234.456/5432-10",stripe_type:"br_cnpj",verifiable:!1,replacement_string:"\\1.\\2.\\3/\\4-\\5",description:"Brazilian CNPJ number",reverse_charge:!1,supported:!0},br_cpf:{type:"br_cpf",country:"BR",region:"BR",country_label:"Brazil",format:"([0-9]{3})\\.?([0-9]{3})\\.?([0-9]{3})\\-?([0-9]{2})",placeholder:"123.456.789-87",stripe_type:"br_cpf",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Brazilian CPF number",reverse_charge:!1,supported:!0},cy_vat:{type:"cy_vat",country:"CY",region:"EEA-GB-CH",country_label:"Cyprus",format:"CY[0-9]{8}[A-Z]",placeholder:"CY12345678Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},cz_vat:{type:"cz_vat",country:"CZ",region:"EEA-GB-CH",country_label:"Czech Republic",format:"CZ[0-9]{8,10}",placeholder:"CZ1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},de_vat:{type:"de_vat",country:"DE",region:"EEA-GB-CH",country_label:"Germany",format:"DE[0-9]{9}",placeholder:"DE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},dk_vat:{type:"dk_vat",country:"DK",region:"EEA-GB-CH",country_label:"Denmark",format:"DK[0-9]{8}",placeholder:"DK12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ee_vat:{type:"ee_vat",country:"EE",region:"EEA-GB-CH",country_label:"Estonia",format:"EE[0-9]{9}",placeholder:"EE123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},es_vat:{type:"es_vat",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"ES([A-Z][0-9]{8}|[0-9]{8}[A-Z]|[A-Z][0-9]{7}[A-Z])",placeholder:"ESA1234567Z",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fi_vat:{type:"fi_vat",country:"FI",region:"EEA-GB-CH",country_label:"Finland",format:"FI[0-9]{8}",placeholder:"FI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},fr_vat:{type:"fr_vat",country:"FR",region:"EEA-GB-CH",country_label:"France",format:"FR[A-Z0-9]{2}[0-9]{9}",placeholder:"FRAB123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},gr_vat:{type:"gr_vat",country:"GR",region:"EEA-GB-CH",country_label:"Greece",format:"EL[0-9]{9}",placeholder:"EL123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hr_vat:{type:"hr_vat",country:"HR",region:"EEA-GB-CH",country_label:"Croatia",format:"HR[0-9]{11}",placeholder:"HR12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},hu_vat:{type:"hu_vat",country:"HU",region:"EEA-GB-CH",country_label:"Hungary",format:"(HU)?[0-9]{8}((-)?[0-9]{1}(-)?[0-9]{2})?",placeholder:"HU12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ie_vat:{type:"ie_vat",country:"IE",region:"EEA-GB-CH",country_label:"Ireland",format:"IE([0-9]{7}[A-Z]{1,2}|[0-9][A-Z][0-9]{5}[A-Z])",placeholder:"IE1234567AB",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},it_vat:{type:"it_vat",country:"IT",region:"EEA-GB-CH",country_label:"Italy",format:"IT[0-9]{11}",placeholder:"IT12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lt_vat:{type:"lt_vat",country:"LT",region:"EEA-GB-CH",country_label:"Lithuania",format:"LT([0-9]{9}|[0-9]{12})",placeholder:"LT123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lu_vat:{type:"lu_vat",country:"LU",region:"EEA-GB-CH",country_label:"Luxembourg",format:"LU[0-9]{8}",placeholder:"LU12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},lv_vat:{type:"lv_vat",country:"LV",region:"EEA-GB-CH",country_label:"Latvia",format:"LV[0-9]{11}",placeholder:"LV12345678912",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},mt_vat:{type:"mt_vat",country:"MT",region:"EEA-GB-CH",country_label:"Malta",format:"MT[0-9]{8}",placeholder:"MT12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},nl_vat:{type:"nl_vat",country:"NL",region:"EEA-GB-CH",country_label:"Netherlands",format:"NL[0-9]{9}B[0-9]{2}",placeholder:"NL123456789B12",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pl_vat:{type:"pl_vat",country:"PL",region:"EEA-GB-CH",country_label:"Poland",format:"PL[0-9]{10}",placeholder:"PL1234567890",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},pt_vat:{type:"pt_vat",country:"PT",region:"EEA-GB-CH",country_label:"Portugal",format:"PT[0-9]{9}",placeholder:"PT123456789",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},ro_vat:{type:"ro_vat",country:"RO",region:"EEA-GB-CH",country_label:"Romania",format:"RO[0-9]{2,10}",placeholder:"RO1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},se_vat:{type:"se_vat",country:"SE",region:"EEA-GB-CH",country_label:"Sweden",format:"SE[0-9]{12}",placeholder:"SE123456789123",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},si_vat:{type:"si_vat",country:"SI",region:"EEA-GB-CH",country_label:"Slovenia",format:"SI[0-9]{8}",placeholder:"SI12345678",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},sk_vat:{type:"sk_vat",country:"SK",region:"EEA-GB-CH",country_label:"Slovakia",format:"SK[0-9]{10}",placeholder:"SK1234567891",stripe_type:"eu_vat",verifiable:!0,description:"European VAT number",reverse_charge:!0,supported:!0},xi_vat:{type:"xi_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"(XI)([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"XI123456789",stripe_type:"eu_vat",verifiable:!0,description:"Northern Ireland VAT number",reverse_charge:!0,supported:!0},gb_vat:{type:"gb_vat",country:"GB",region:"EEA-GB-CH",country_label:"United Kingdom",format:"GB([0-9]{9}|[0-9]{12}|(HA|GD)[0-9]{3})",placeholder:"GB123456789",stripe_type:"gb_vat",verifiable:!0,description:"United Kingdom VAT number",reverse_charge:!0,supported:!0},nz_gst:{type:"nz_gst",country:"NZ",region:"NZ",country_label:"New Zealand",format:"[0-9]{8,9}",placeholder:"123456789",stripe_type:"nz_gst",description:"New Zealand GST number",reverse_charge:!0,supported:!0,verifiable:!1},au_abn:{type:"au_abn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{11}",placeholder:"12345678912",stripe_type:"au_abn",verifiable:!0,description:"Australian Business Number (AU ABN)",reverse_charge:!0,supported:!0},au_arn:{type:"au_arn",country:"AU",region:"AU",country_label:"Australia",format:"[0-9]{12}",placeholder:"123456789123",stripe_type:"au_arn",verifiable:!1,description:"Australian Taxation Office Reference Number",reverse_charge:!0,supported:!0},in_gst:{type:"in_gst",country:"IN",region:"IN",country_label:"India",format:"[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z][1-9A-Z]Z[0-9A-Z]",placeholder:"12ABCDE3456FGZH",stripe_type:"in_gst",description:"Indian GST number",reverse_charge:!0,supported:!0,verifiable:!1},no_vat:{type:"no_vat",country:"NO",region:"EEA-GB-CH",country_label:"Norway",format:"[0-9]{9}MVA",placeholder:"123456789MVA",stripe_type:"no_vat",verifiable:!1,description:"Norwegian VAT number",reverse_charge:!0,supported:!0},za_vat:{type:"za_vat",country:"ZA",region:"ZA",country_label:"South Africa",format:"4[0-9]{9}",placeholder:"4123456789",stripe_type:"za_vat",verifiable:!1,description:"South African VAT number",reverse_charge:!1,supported:!0},ch_vat:{type:"ch_vat",country:"CH",region:"EEA-GB-CH",country_label:"Switzerland",placeholder:"CHE-123.456.789 MWST",format:"([Cc][Hh][Ee])[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3})[\\. \\-]?(\\d{3}) ?([Mm][Ww][Ss][Tt]|[Tt][Vv][Aa]|[Ii][Vv][Aa])",stripe_type:"ch_vat",verifiable:!1,replacement_string:"\\1-\\2.\\3.\\4 \\5",description:"Switzerland VAT number",reverse_charge:!0,supported:!0},mx_rfc:{type:"mx_rfc",country:"MX",region:"MX",country_label:"Mexico",format:"([A-Za-z&]{3,4})-?([0-9]{2})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])-?([A-Za-z0-9])-?([A-Za-z0-9][0-9A])",placeholder:"ABC010203AB9",stripe_type:"mx_rfc",verifiable:!1,replacement_string:"\\1\\2\\3\\4\\5\\6",description:"Mexican RFC number",reverse_charge:!0,supported:!0},sg_uen:{type:"sg_uen",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z])",placeholder:"123456789F",stripe_type:"sg_uen",verifiable:!1,description:"Singaporean UEN",reverse_charge:!0,supported:!0},ru_inn:{type:"ru_inn",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{10}",placeholder:"1234567891",stripe_type:"ru_inn",verifiable:!1,description:"Russian INN",reverse_charge:!0,supported:!1},ru_kpp:{type:"ru_kpp",country:"RU",region:"RU",country_label:"Russia",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ru_kpp",verifiable:!1,description:"Russian KPP",reverse_charge:!0,supported:!1},ca_bn:{type:"ca_bn",country:"CA",region:"CA",country_label:"Canada",format:"[0-9]{9}",placeholder:"123456789",stripe_type:"ca_bn",verifiable:!1,description:"Canadian BN",reverse_charge:!1,supported:!0},hk_br:{type:"hk_br",country:"HK",region:"HK",country_label:"Hong Kong",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"hk_br",description:"Hong Kong BR number",reverse_charge:!1,supported:!1,verifiable:!1},es_cif:{type:"es_cif",country:"ES",region:"EEA-GB-CH",country_label:"Spain",format:"[0-9A-Z][0-9]{7}[0-9A-Z]",placeholder:"A12345678",stripe_type:"es_cif",description:"Spanish CIF number",reverse_charge:!0,supported:!0,verifiable:!1},tw_vat:{type:"tw_vat",country:"TW",region:"TW",country_label:"Taiwan",format:"[0-9]{8}",placeholder:"12345678",stripe_type:"tw_vat",description:"Taiwanese VAT",reverse_charge:!0,supported:!0,verifiable:!1},th_vat:{type:"th_vat",country:"TH",region:"TH",country_label:"Thailand",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"th_vat",description:"Thai VAT",reverse_charge:!0,supported:!0,verifiable:!1},jp_cn:{type:"jp_cn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{13}",placeholder:"1234567891234",stripe_type:"jp_cn",description:"Japanese Corporate Number",reverse_charge:!0,supported:!0,verifiable:!1},jp_rn:{type:"jp_rn",country:"JP",region:"JP",country_label:"Japan",format:"[0-9]{5}",placeholder:"12345",stripe_type:"jp_rn",description:"Japanese Registered Foreign Businesses Number",reverse_charge:!0,supported:!0,verifiable:!1},li_uid:{type:"li_uid",country:"LI",region:"EEA-GB-CH",country_label:"Liechtenstein",format:"CHE[0-9]{9}",placeholder:"CHE123456789",stripe_type:"li_uid",description:"Liechtensteinian UID number",reverse_charge:!0,supported:!0,verifiable:!1},my_itn:{type:"my_itn",country:"MY",region:"MY",country_label:"Malaysia",format:"([A-Z]{1,2}) ?([0-9]{10})",placeholder:"C 1234567890",stripe_type:"my_itn",description:"Malaysian ITN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1 \\2"},us_ein:{type:"us_ein",country:"US",region:"US",country_label:"United States",format:"([0-9]{2})-?([0-9]{7})",placeholder:"12-3456789",stripe_type:"us_ein",verifiable:!1,replacement_string:"\\1-\\2",description:"United States EIN",reverse_charge:!1,supported:!1},kr_brn:{type:"kr_brn",country:"KR",region:"KR",country_label:"South Korea",format:"([0-9]{3})-?([0-9]{2})-?([0-9]{5})",placeholder:"123-45-67890",stripe_type:"kr_brn",description:"Korean BRN",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\1-\\2-\\3"},ca_qst:{type:"ca_qst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{10}TQ[0-9]{4}|[0-9]{9}[A-Z]{2}[0-9]{4}|[0-9]{9,10}|NR[0-9]{8})",placeholder:"1234567890TQ1234",stripe_type:"ca_qst",verifiable:!1,description:"Canadian QST number (Qubec)",reverse_charge:!1,supported:!0},ca_gst_hst:{type:"ca_gst_hst",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{9}) ?RT ?([0-9]{4})",placeholder:"123456789RT0002",stripe_type:"ca_gst_hst",verifiable:!1,replacement_string:"\\1RT\\2",description:"Canadian GST/HST number",reverse_charge:!1,supported:!0},ca_pst_bc:{type:"ca_pst_bc",country:"CA",region:"CA",country_label:"Canada",format:"PST-?([0-9]{4})-?([0-9]{4})",placeholder:"PST-1234-5678",stripe_type:"ca_pst_bc",verifiable:!1,replacement_string:"PST-\\1-\\2",description:"Canadian PST number (British Columbia)",reverse_charge:!1,supported:!0},ca_pst_mb:{type:"ca_pst_mb",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{6})-?([0-9])",placeholder:"123456-7",stripe_type:"ca_pst_mb",verifiable:!1,replacement_string:"\\1-\\2",description:"Canadian PST number (Manitoba)",reverse_charge:!1,supported:!0},ca_pst_sk:{type:"ca_pst_sk",country:"CA",region:"CA",country_label:"Canada",format:"([0-9]{7})",placeholder:"1234567",stripe_type:"ca_pst_sk",verifiable:!1,description:"Canadian PST number (Saskatchewan)",reverse_charge:!1,supported:!0},my_sst:{type:"my_sst",country:"MY",region:"MY",country_label:"Malaysia",format:"(([A-Z][0-9]{2})-?([0-9]{4})-?([0-9]{8})|[0-9]{8})",placeholder:"A12-3456-78912345",stripe_type:"my_sst",description:"Malaysian SST number",reverse_charge:!0,supported:!0,verifiable:!1,replacement_string:"\\2-\\3-\\4",only_replace_if_group_captured:2},sg_gst:{type:"sg_gst",country:"SG",region:"SG",country_label:"Singapore",format:"([0-9]{8}[A-Z]|[0-9]{4}[0-9]{5}[A-Z]|F(000|   )[0-9]{5}[A-Z]|[ST][0-9]{2}[A-Z]{2}[0-9]{4}[A-Z]|M[0-9A-Z][0-9]{7}[0-9A-Z]|F[0-9]{8}[A-Z])",placeholder:"M12345678X",stripe_type:"sg_gst",description:"Singaporean GST",reverse_charge:!0,supported:!0,verifiable:!1},ae_trn:{type:"ae_trn",country:"AE",region:"AE",country_label:"United Arab Emirates",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"ae_trn",verifiable:!1,description:"United Arab Emirates TRN",reverse_charge:!0,supported:!0},cl_tin:{type:"cl_tin",country:"CL",region:"CL",country_label:"Chile",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})-?([K0-9])",placeholder:"12.345.678-K",stripe_type:"cl_tin",verifiable:!1,replacement_string:"\\1.\\2.\\3-\\4",description:"Chilean TIN",reverse_charge:!0,supported:!1},sa_vat:{type:"sa_vat",country:"SA",region:"SA",country_label:"Saudi Arabia",format:"[0-9]{15}",placeholder:"123456789012345",stripe_type:"sa_vat",description:"Saudi Arabia VAT",reverse_charge:!0,supported:!0,verifiable:!1},id_npwp:{type:"id_npwp",country:"ID",region:"ID",country_label:"Indonesia",format:"([0-9]{2})\\.?([0-9]{3})\\.?([0-9]{3})\\.?([0-9])-?([0-9]{3})\\.?([0-9]{3})",placeholder:"12.345.678.9-012.345",verifiable:!1,stripe_type:"id_npwp",description:"Indonesian NPWP number",reverse_charge:!0,supported:!0,replacement_string:"\\1.\\2.\\3.\\4-\\5.\\6"},my_frp:{type:"my_frp",country:"MY",region:"MY",country_label:"Malaysia",format:"[0-9]{8}",placeholder:"12345678",verifiable:!1,stripe_type:"my_frp",description:"Malaysian FRP number",reverse_charge:!0,supported:!0},il_vat:{type:"il_vat",country:"IL",region:"IL",country_label:"Israel",format:"[0-9]{9}",placeholder:"000012345",verifiable:!1,stripe_type:"il_vat",description:"Israel VAT",reverse_charge:!0,supported:!0},ge_vat:{type:"ge_vat",country:"GE",region:"GE",country_label:"Georgia",format:"([0-9]{9}|[0-9]{11})",placeholder:"123456789",verifiable:!1,stripe_type:"ge_vat",description:"Georgian VAT",reverse_charge:!0,supported:!0},ua_vat:{type:"ua_vat",country:"UA",region:"UA",country_label:"Ukraine",format:"([0-9]{8,10}|[0-9]{12})",placeholder:"123456789",verifiable:!1,stripe_type:"ua_vat",description:"Ukrainian VAT",reverse_charge:!0,supported:!1},is_vat:{type:"is_vat",country:"IS",region:"EEA-GB-CH",country_label:"Iceland",format:"[0-9]{6}",placeholder:"123456",verifiable:!1,stripe_type:"is_vat",description:"Icelandic VAT",reverse_charge:!0,supported:!0},tr_tin:{country:"TR",region:"TR",format:"[0-9]{10,11}",placeholder:"0123456789",verifiable:!1,type:"tr_tin",stripe_type:"tr_tin",description:"Turkish Tax Identification Number",country_label:"Trkiye",reverse_charge:!0,supported:!0}};function Vy(t){return t.trim().toUpperCase()}function cue(t,e){return e||(e=Hn()),Ve(e,"3768341700").get(t,!1)}async function due(){return(await(await pe.safeGet(nue,{skipJsonTransform:!0,authOption:qt.SendIfAvailable})).json()).countries.map(Vy)}async function nc(t){const e=Vy(t);if(!e){const o=new Error("Country code is required to fetch checkout pricing config");throw Oe.addError(o,{countryCode:t}),o}const n=await pe.safeGet(sue,{parameters:{path:{country_code:e}},skipJsonTransform:!0,authOption:qt.SendIfAvailable});if(!n.ok){let o;try{const i=await n.json();typeof(i==null?void 0:i.detail)=="string"&&(o=i.detail)}catch(i){}const a=n.status===404&&o==="Country config not found"?"Checkout pricing config not found for this country":"Failed to fetch checkout pricing config";throw Oe.addError(new Error(a),{countryCode:e,status:n.status,detail:o}),new Error(a)}const s=await n.json();return{countryCode:Vy(s.country_code),currencyConfig:s.currency_config}}async function uue(t,e,n){const s=t!==void 0&&SZ(t)?"EU":vy;let o=null;const a=await due();if(e?(t&&a.includes(t)&&(o=await nc(t),o.currencyConfig.symbol_code!==e&&(o=null)),o||(o=await nc(e))):t&&(a.includes(t)?o=await nc(t):o=await nc(s)),!o)return nc(s);const i=o.currencyConfig.pricing_rollout_gate;return!i||cue(i,n)?o:nc(s)}function Gy(t,e,n){const s=t.currencyConfig[e];if(!s){const a=new Error("Plan is not available for given country's pricing");throw Oe.addError(a,{countryCode:t.countryCode,planType:e,interval:n}),a}const o=s[n];if(!o){const a=new Error("Price for interval is not available for given country's pricing");throw Oe.addError(a,{countryCode:t.countryCode,planType:e,interval:n}),a}return{amount:o.amount,taxBehavior:o.tax}}function dN({countryCode:t,currency:e,ctx:n,enabled:s=!0}){return lt({queryKey:["checkout-pricing-config",t!=null?t:null,e!=null?e:null],queryFn:()=>uue(t,e,n),enabled:s})}function aYe(t){return t===Je.SELF_SERVE_BUSINESS?"business":t}function rYe(t,e,n){return{id:"pricingPlan.".concat(e,".costAmount"),defaultMessage:mue(t),description:"Cost for ".concat(e," plan in ").concat(n)}}function iYe(t,e){var n;return(n=t.currencyConfig.promos)==null?void 0:n[e]}function mue(t){const e=iue({amount:t,roundToPrecision:2});return e%1===0?e.toFixed(0):e.toFixed(2)}const fue=j(()=>I(()=>Promise.resolve().then(()=>cf),void 0),{loading:t=>L(t)}),pue=j(()=>I(()=>import("./fobvway9e4v0s6vc.js").then(t=>t._),__vite__mapDeps([201,1])),{loading:t=>L(t)}),gue=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)});var BE;const hue=ct.div(BE||(BE=rt(["flex flex-col gap-3 text-token-text-secondary text-sm mt-3"])));var UE;const _ue=ct.p(UE||(UE=rt(["text-token-text-primary"])));var VE;const xue=ct(MS)(VE||(VE=rt(["relative flex cursor-pointer flex-col rounded-xl border-token-border-default p-5 text-start align-top transition-[border-color] duration-100 hover:border-token-border-heavy data-[state=unchecked]:m-[1px] data-[state=checked]:border-2 data-[state=unchecked]:border data-[state=checked]:border-black dark:data-[state=checked]:border-white md:min-h-[300px]"])));var GE;const yue=ct(TS)(GE||(GE=rt(["flex h-5 w-5 items-center justify-center rounded-full border-2 border-token-border-heavy bg-token-bg-primary outline-hidden data-[state=checked]:bg-black dark:data-[state=checked]:bg-white"])));var $E;const $k=ct.s($E||($E=rt(["text-token-text-tertiary"]))),x0=999,vue=2,bue=5,lYe="team-pricing-seat-selection",cYe="team-pricing-seat-selection-direct",dYe="numSeats",uYe="selectedPlan",mYe="promo_campaign",Sue=t=>vue,fYe=t=>bue;function pYe({billingType:t,name:e,billingFeatures:n,cost:s,currencySign:o,currencyCode:a,monthlyCost:i,discountedMonthlyCost:l,costStructure:c,selectedValue:d,hideDetails:u=!1,showWelcomeOfferLabel:m=!1,promoDisclaimer:f=null,hideSavingsMessage:p=!1}){const g=J();G();const h=Sue(),x=Math.floor(100-l/i*100);return r.jsxs(xue,{value:t,id:t,className:W(u&&"min-h-0!"),children:[m&&r.jsx("div",{className:"absolute start-3 top-0 -translate-y-1/2 rounded-xl bg-[#10A37F] px-2 py-1 text-xs font-medium text-white",children:r.jsx(P,w({},Xt.welcomeOfferLabel))}),!p&&l<i&&r.jsx("div",{className:W("absolute start-3 top-0 -translate-y-1/2 px-2 py-1 text-xs font-medium",d===t?"bg-token-bg-primary text-[#10A37F]":"rounded-xl bg-[#10A37F] text-white"),children:r.jsx(P,B(w({},d===t?Xt.discountSelectedLabel:Xt.discountUnselectedLabel),{values:{discountedRate:x}}))}),r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsx("div",{className:W(u?"text-base":"text-xl","font-medium"),children:r.jsx(P,w({},e))}),r.jsx(yue,{forceMount:!0,children:r.jsx(gue,{className:W("mt-0.25 h-[14px] w-[14px] stroke-3 text-white dark:text-black",d!==t&&"hidden")})})]}),r.jsxs(hue,{children:[r.jsxs("div",{children:[r.jsx(_ue,{children:r.jsx(P,B(w({},s),{values:{monthlyCost:i,discountedMonthlyCost:l,currencyCode:g.formatMessage(a),currencySign:g.formatMessage(o),s:(...y)=>r.jsx($k,{children:y})}}))}),r.jsx("p",{children:r.jsx(P,w({},c))})]}),!u&&r.jsx(Ude,{children:n.map(y=>r.jsx(Vde,{className:"text-token-text-secondary",children:r.jsx(P,B(w({},y),{values:{minSeats:h,monthlyCost:i,minimumMonthlyCost:l*2,currencyCode:g.formatMessage(a),currencySign:g.formatMessage(o),s:(...b)=>r.jsx($k,{children:b})}}))},y.id))}),f&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:f})]})]})}var HE;const Hk=ct.button(HE||(HE=rt(["h-12 w-12 rounded-lg flex items-center justify-center border border-token-border-default px-1.5 py-1.5 hover:bg-token-main-surface-secondary disabled:pointer-events-none disabled:text-token-text-tertiary"])));function gYe({numSeats:t,minSeats:e,setNumSeats:n,label:s,maxSeats:o,classNames:a}){const i=o!=null?o:x0,[l,c]=_.useState(!1),d=_n(),u=_.useMemo(()=>d==null?void 0:d.subscriptionAnalyticsParams,[d]),m=_.useCallback(v=>{U.logEvent("Account Pay: Team Plan Seat Count Clicked",w(w({},u),v))},[u]),f=_.useRef(null);_.useEffect(()=>{var v;(v=f.current)==null||v.focus()},[f]);const p=_.useRef(null),g=_.useRef(0),h=_.useCallback(v=>{n(S=>{const C=ES(S+v,e,i);return m({prevSeats:S,currentSeats:C}),C})},[i,e,n,m]),x=_.useCallback(v=>{const M=300-v*50;return M>25?M:25},[]),y=_.useCallback(v=>{h(v),g.current=0;const S=()=>{g.current+=1,h(v);const C=x(g.current);p.current=setTimeout(S,C)};p.current=setTimeout(S,x(g.current))},[h,x]),b=_.useCallback(()=>{p.current&&(clearTimeout(p.current),p.current=null)},[]);return _.useEffect(()=>{l||i===x0&&t>i&&c(!0)},[l,i,t]),r.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[r.jsx("label",{className:W(a==null?void 0:a.label,"mb-1 flex text-base font-medium"),htmlFor:"seats",children:s!=null?s:r.jsx(P,w({},Xt.usersTitle))}),r.jsxs("div",{className:"relative flex items-center gap-3",children:[r.jsx("input",{ref:f,type:"number",min:e,max:i,name:"seats",value:t,onChange:v=>{const S=parseInt(v.target.value);n(S),m({prevSeats:t,currentSeats:S})},onBlur:()=>{let v=t;t<e&&(v=e),t>i&&(v=i),t||(v=e),v!==t&&(m({prevSeats:t,currentSeats:v}),n(v))},autoFocus:!0,tabIndex:0,className:W(a==null?void 0:a.input,"bg-token-bg-primary text-token-text-primary relative m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white")}),r.jsxs("div",{className:W(a==null?void 0:a.buttons,"flex gap-1.5"),children:[r.jsx(Hk,{disabled:t<=e,onMouseDown:()=>y(-1),onMouseUp:b,onMouseLeave:b,className:a==null?void 0:a.button,type:"button",children:r.jsx(pue,{className:W("icon-sm",t<=e&&"text-token-text-tertiary")})}),r.jsx(Hk,{type:"button",disabled:t>=i,onMouseDown:()=>y(1),onMouseUp:b,onMouseLeave:b,className:a==null?void 0:a.button,children:r.jsx(fue,{className:"icon-sm"})})]})]}),i===x0&&l&&r.jsx("div",{className:"text-token-text-secondary mt-2 text-xs",children:r.jsx(P,B(w({},Xt.seatSelectorTooltipMaxLimit),{values:{maxSeats:i,link:v=>r.jsx(Aa,{to:CZ,target:"_blank",className:"underline",children:v})}}))})]})}const Xt=be({flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"{currencyCode} {currencySign}{monthlyCost}"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost} <s>{currencySign}{monthlyCost}</s>"},nameWorkspace:{id:"nameWorkspace.title",defaultMessage:"Name your workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Business Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your Business plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},continueToPricePreview:{id:"teamBilling.continueToPricePreview",defaultMessage:"Continue"},changeEffectDate:{id:"teamBilling.changeEffectDate",defaultMessage:"This change will take effect at your next renewal on {date}"},confirmPageChangeEffectDate:{id:"teamBilling.confirmPageChangeEffectDate",defaultMessage:"Your billing schedule will change from {current_plan} to {new_plan} starting at your next renewal on {date}"},confirmChange:{id:"teamBilling.confirmChange",defaultMessage:"Confirm"},teamsCostStructure:{id:"teamBilling.teamsCostStructureNew",defaultMessage:"per user/month"},businessCostStructure:{id:"teamBilling.businessCostStructure",defaultMessage:"seat/mo"},businessAnnualPlanName:{id:"teamBilling.businessAnnualPlanName",defaultMessage:"Annual billing"},businessFlexiblePlanName:{id:"teamBilling.businessFlexiblePlanName",defaultMessage:"Monthly billing"},businessAnnualPlanCost:{id:"teamBilling.businessAnnualPlanCost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost}"},businessAnnualPlanSavingsAmount:{id:"teamBilling.businessAnnualPlanSavingsAmount.v2",defaultMessage:"Youre saving {savingsAmountMonthly}/month by choosing an annual plan. Thats {savingsAmountYearly}/year."},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},usersTitle:{id:"teamBilling.usersTitle",defaultMessage:"Users"},chatGptTeam:{id:"teamBilling.chatGptTeam",defaultMessage:"ChatGPT Business"},annualPlanName:{id:"teamBilling.annualPlan.nameNew",defaultMessage:"Annual"},annualPlanSavingsLabel:{id:"teamBilling.annualPlan.savingsLabel",defaultMessage:"({percent}% off)"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnuallyNew",defaultMessage:"Billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewalNew",defaultMessage:"Add and reassign users as needed"},annualMinBill:{id:"teamBilling.annualPlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},flexiblePlanName:{id:"teamBilling.flexiblePlan.nameNew",defaultMessage:"Monthly"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthlyNew",defaultMessage:"Billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsersNew",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBillNew",defaultMessage:"Minimum {minSeats} {minSeats, plural, one {user} other {users}}"},today:{id:"teamBilling.today",defaultMessage:"Today"},allPlansTotal:{id:"teamBilling.allPlansTotal",defaultMessage:"Plan Total"},allPlansTodayTotal:{id:"teamBilling.allPlansTodayTotal",defaultMessage:"Today's total"},flexiblePlanAmountBreakdown:{id:"teamBilling.flexiblePlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}}"},annualPlanAmountBreakdown:{id:"teamBilling.annualPlanAmountBreakdown",defaultMessage:"{numSeats} {numSeats, plural, one {user} other {users}} x 12 months"},breakdownAmount:{id:"teamBilling.breakdownAmount",defaultMessage:"{currencySign}{amount}/seat"},allPlansPreDiscountTotal:{id:"teamBilling.allPlansPreDiscountTotal",defaultMessage:"{currencySign}{preDiscountTotalAmount}"},planDiscountLabel:{id:"teamBilling.planDiscountLabel",defaultMessage:"Discount"},annualPlanDiscountDescription:{id:"teamBilling.annualPlanDiscountDescription",defaultMessage:"Annual (-{discountPercentage}%)"},annualPlanDiscountAmount:{id:"teamBilling.annualPlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanDiscountAmount:{id:"teamBilling.flexiblePlanDiscountAmount",defaultMessage:"-{currencySign}{discountAmount}"},flexiblePlanBilledMonthly:{id:"teamBilling.flexiblePlanBilledMonthly",defaultMessage:"Billed monthly starting {billDate}"},annualPlanBilledAnnually:{id:"teamBilling.annualPlanBilledAnnually",defaultMessage:"Billed annually starting {billDate}"},allPlansTotalAmount:{id:"teamBilling.allPlansTotalAmount",defaultMessage:"{currencyCode} {currencySign}{totalAmount}"},discountSelectedLabel:{id:"teamBilling.discountSelectedLabel",defaultMessage:"You're saving {discountedRate}%"},discountUnselectedLabel:{id:"teamBilling.discountUnselectedLabel",defaultMessage:"Save {discountedRate}%"},welcomeOfferLabel:{id:"teamBilling.welcomeOfferLabel",defaultMessage:"Welcome Offer"},seatSelectorTooltipMaxLimit:{id:"teamBilling.seatSelectorTooltipMaxLimit",defaultMessage:"For more than {maxSeats} users, upgrade to our <link>Enterprise plan</link>."}});var Cue=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(Cue||{});function hYe(t,e,n){const s=Gy(e,Gk,vg.Month),o=Gy(e,Gk,vg.Year),a=Td(t),i={type:"month",name:n?Xt.businessFlexiblePlanName:Xt.flexiblePlanName,cost:Xt.flexiblePlanCost,monthlyCost:s.amount,discountedMonthlyCost:s.amount,unitCost:s.amount,currencySign:a.sign,currencyCode:a.code,costStructure:n?Xt.businessCostStructure:Xt.teamsCostStructure,billingFeatures:[Xt.flexibleBilledMonthly,Xt.flexibleMinBill,Xt.flexibleAddRemoveUsers]},l={type:"year",name:n?Xt.businessAnnualPlanName:Xt.annualPlanName,cost:n?Xt.businessAnnualPlanCost:Xt.annualPlanCost,monthlyCost:s.amount,discountedMonthlyCost:o.amount,unitCost:o.amount*12,currencySign:a.sign,currencyCode:a.code,costStructure:n?Xt.businessCostStructure:Xt.teamsCostStructure,billingFeatures:[Xt.annualBilledAnnually,Xt.annualMinBill,Xt.annualAddUsersWithRenewal]};return{flexibleBillingPlan:i,annualBillingPlan:l}}const _Ye={month:{name:Xt.chatGptTeam,breakdown:Xt.flexiblePlanAmountBreakdown,discountAmount:Xt.flexiblePlanDiscountAmount,discountDescription:void 0,billed:Xt.flexiblePlanBilledMonthly,total:Xt.allPlansTotalAmount},year:{name:Xt.chatGptTeam,breakdown:Xt.annualPlanAmountBreakdown,discountAmount:Xt.annualPlanDiscountAmount,discountDescription:Xt.annualPlanDiscountDescription,billed:Xt.annualPlanBilledAnnually,total:Xt.allPlansTotalAmount}},xYe=(t,e)=>Math.floor(100-e/t*100),yYe=(t,e)=>Math.floor((1-e/t)*100);function wue(){return{queryKey:["personalityTypeList"],queryFn:()=>pe.safeGet("/personality_types")}}function vYe(){return lt(wue())}const bYe=t=>{"use forget";var M,T;const e=H.c(31),{enabled:n,models:s,onSelect:o,selectedModel:a}=t,[i,l]=_.useState(!1);let c;e[0]!==s?(c=s!=null?s:[],e[0]=s,e[1]=c):c=e[1];const d=c,u=J();let m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=E=>{l(E),E&&U.logEventWithStatsig("User Context: View Personalities","chatgpt_user_context_view_personalities")},e[2]=m):m=e[2];let f;e[3]!==u?(f=u.formatMessage({id:"user-context-modal.personality.select",defaultMessage:"Select personality"}),e[3]=u,e[4]=f):f=e[4];const p=!n;let g;e[5]!==u||e[6]!==d||e[7]!==a?(g=(T=(M=d.find(E=>E.key===a))==null?void 0:M.label)!=null?T:u.formatMessage({id:"user-context-modal.personality.default",defaultMessage:"Default"}),e[5]=u,e[6]=d,e[7]=a,e[8]=g):g=e[8];let h;e[9]!==g?(h=r.jsx("span",{children:g}),e[9]=g,e[10]=h):h=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),e[11]=x):x=e[11];let y;e[12]!==f||e[13]!==p||e[14]!==h?(y=r.jsxs(K.Trigger,{className:"data-[state=open]:bg-token-bg-tertiary flex h-min w-fit items-center justify-between rounded-lg border px-3 py-2 text-start",id:"personality-select-trigger","aria-label":f,disabled:p,children:[h,x]}),e[12]=f,e[13]=p,e[14]=h,e[15]=y):y=e[15];const b=a!=null?a:"default";let v;e[16]!==o?(v=E=>{o(E),l(!1)},e[16]=o,e[17]=v):v=e[17];let S;if(e[18]!==d||e[19]!==a){let E;e[21]!==a?(E=A=>r.jsx(K.RadioItem,{color:a===A.key||!a&&A.key==="default"?"selected":"default",value:A.key,label:A.label,secondary:A.description},A.key),e[21]=a,e[22]=E):E=e[22],S=d.map(E),e[18]=d,e[19]=a,e[20]=S}else S=e[20];let C;e[23]!==v||e[24]!==S||e[25]!==b?(C=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",alignOffset:-7,children:r.jsx(K.RadioGroup,{value:b,onValueChange:v,children:S})})}),e[23]=v,e[24]=S,e[25]=b,e[26]=C):C=e[26];let k;return e[27]!==i||e[28]!==C||e[29]!==y?(k=r.jsxs(K.Root,{open:i,onOpenChange:m,children:[y,C]}),e[27]=i,e[28]=C,e[29]=y,e[30]=k):k=e[30],k};function SYe({label:t,description:e,selector:n}){return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{children:t}),e!=null&&r.jsx(FA,{className:"pe-12!",children:e})]}),n]})}const kue=j(()=>I(()=>Promise.resolve().then(()=>CB),void 0),{loading:t=>L(t)}),Mue=j(()=>I(()=>import("./d5usxzmea5cxgha2.js").then(t=>t._),__vite__mapDeps([202,1])),{loading:t=>L(t)}),Tue=j(()=>I(()=>import("./m8rwdn0e0vratxed.js").then(t=>t._),__vite__mapDeps([203,1])),{loading:t=>L(t)}),Eue=j(()=>I(()=>import("./ma6nalw6t5402ja2.js").then(t=>t._),__vite__mapDeps([204,1])),{loading:t=>L(t)}),uN=j(()=>I(()=>import("./nrby27vmpob112wj.js").then(t=>t._),__vite__mapDeps([38,1])),{loading:t=>L(t)}),Aue=j(()=>I(()=>import("./ex0j05iz0foxj7rk.js").then(t=>t._),__vite__mapDeps([205,1])),{loading:t=>L(t)}),Iue=j(()=>I(()=>import("./gu1hhvf1emaykrbn.js").then(t=>t._),__vite__mapDeps([206,1])),{loading:t=>L(t)}),mN=j(()=>I(()=>import("./mfw23qkpoldespd9.js").then(t=>t._),__vite__mapDeps([207,1])),{loading:t=>L(t)}),jue=j(()=>I(()=>import("./mr0t7vtj2washkif.js").then(t=>t._),__vite__mapDeps([208,1])),{loading:t=>L(t)}),Pue=j(()=>I(()=>import("./h95am3x7frofk8a1.js").then(t=>t._),__vite__mapDeps([209,1])),{loading:t=>L(t)});j(()=>I(()=>import("./o6zuph8g9nfa6t2k.js").then(t=>t._),__vite__mapDeps([210,1])),{loading:t=>L(t)});const fN=j(()=>I(()=>import("./jz1xchahtfv1p8lw.js").then(t=>t._),__vite__mapDeps([211,1])),{loading:t=>L(t)}),pN=j(()=>I(()=>import("./f1yqacxntwh7hwye.js").then(t=>t._),__vite__mapDeps([212,1])),{loading:t=>L(t)});j(()=>I(()=>import("./i1yh71mwqfml3mls.js").then(t=>t._),__vite__mapDeps([213,1])),{loading:t=>L(t)});const gN=j(()=>I(()=>import("./hrwv1vx3vlx2ogy2.js").then(t=>t._),__vite__mapDeps([214,1])),{loading:t=>L(t)}),hN=j(()=>I(()=>import("./svmcys0zax3ucc8o.js").then(t=>t._),__vite__mapDeps([215,1])),{loading:t=>L(t)}),_N=j(()=>I(()=>Promise.resolve().then(()=>$l),void 0),{loading:t=>L(t)}),xN=j(()=>I(()=>import("./hdjlegm8snk3xktc.js").then(t=>t._),__vite__mapDeps([216,1])),{loading:t=>L(t)}),Nue=j(()=>I(()=>import("./munnqoeyncq84hhw.js").then(t=>t._),__vite__mapDeps([217,1])),{loading:t=>L(t)}),Rue=j(()=>I(()=>import("./eu4d2sy2duibeikv.js").then(t=>t._),__vite__mapDeps([218,1])),{loading:t=>L(t)}),Lue=j(()=>I(()=>import("./ciotlj9oq1d7s8l3.js").then(t=>t._),__vite__mapDeps([219,1])),{loading:t=>L(t)}),Oue=j(()=>I(()=>import("./opxpbab5xffcn23x.js").then(t=>t._),__vite__mapDeps([220,1])),{loading:t=>L(t)}),Due=j(()=>I(()=>import("./lw3yydat7krj8i7u.js").then(t=>t._),__vite__mapDeps([221,1])),{loading:t=>L(t)}),Fue=j(()=>I(()=>Promise.resolve().then(()=>pSe),void 0),{loading:t=>L(t)}),Bue=j(()=>I(()=>import("./ijcujlccg0r2esif.js").then(t=>t._),__vite__mapDeps([222,1])),{loading:t=>L(t)}),yN=j(()=>I(()=>import("./mpv78j7w75btco0v.js").then(t=>t._),__vite__mapDeps([46,1])),{loading:t=>L(t)}),Uue=j(()=>I(()=>import("./e7uwndqnn646up0x.js").then(t=>t._),__vite__mapDeps([223,1])),{loading:t=>L(t)}),Vue=j(()=>I(()=>import("./mdgmhl7nsma70wnx.js").then(t=>t._),__vite__mapDeps([126,1])),{loading:t=>L(t)}),Gue=j(()=>I(()=>import("./fomrqem1h10p4nhy.js").then(t=>t._),__vite__mapDeps([19,1])),{loading:t=>L(t)}),$ue=j(()=>I(()=>import("./nfkiizgqej9iev15.js").then(t=>t._),__vite__mapDeps([224,1])),{loading:t=>L(t)}),vN=j(()=>I(()=>import("./fm5f9wgufd7zdlo5.js").then(t=>t._),__vite__mapDeps([225,1])),{loading:t=>L(t)});j(()=>I(()=>import("./f9yi509nsc3hdreq.js").then(t=>t._),__vite__mapDeps([226,1])),{loading:t=>L(t)});j(()=>I(()=>import("./hzpop33aow4rbsuf.js").then(t=>t._),__vite__mapDeps([227,1])),{loading:t=>L(t)});const Hue=j(()=>I(()=>import("./hjlr7f1x1wl0ovkt.js").then(t=>t._),__vite__mapDeps([228,1])),{loading:t=>L(t)}),bN=j(()=>I(()=>import("./c04xnziq7ngh3xcz.js").then(t=>t._),__vite__mapDeps([229,1])),{loading:t=>L(t)}),Wue=j(()=>I(()=>import("./o0dd5f2xwmjkwdno.js").then(t=>t._),__vite__mapDeps([230,1])),{loading:t=>L(t)}),zue=j(()=>I(()=>import("./pcgps09l9meg23og.js").then(t=>t._),__vite__mapDeps([231,1])),{loading:t=>L(t)}),que=20,Yue=be({goName:{id:"pricingPlanConstants.go.name",defaultMessage:"Go"},goCTA:{id:"pricingPlanConstants.go.callToAction",defaultMessage:"Upgrade to Go"},goCTAActive:{id:"pricingPlanConstants.go.callToActionActive",defaultMessage:"Your current plan"},goSummary:{id:"pricingPlanConstants.go.summary",defaultMessage:"Get more access to our most popular features"},goCTAPromo:{id:"pricingPlanConstants.go.callToActionPromo",defaultMessage:"Apply to my subscription"},goAdvertisedEverythingInFree:{id:"pricingPlanConstants.go.everythingInFree",defaultMessage:"Everything in Free"},goAdvertisedGPT5Extended:{id:"pricingPlanConstants.go.gpt5Extended",defaultMessage:"Extended access to our flagship model GPT-5"},goAdvertisedImgGenExtended:{id:"pricingPlanConstants.go.imageGenExtended",defaultMessage:"Extended access to image generation"},goAdvertisedFileUploadsExtended:{id:"pricingPlanConstants.go.fileUploadsExtended",defaultMessage:"Extended access to file uploads"},goAdvertisedADAExtended:{id:"pricingPlanConstants.go.advancedDataAnalysisExtended",defaultMessage:"Extended access to advanced data analysis"},goAdvertisedLongerMemory:{id:"pricingPlanConstants.go.longerMemory",defaultMessage:"Longer memory for more personalized responses"}}),SN=be({freeName:{id:"pricingPlanConstants.free.name",defaultMessage:"Free"},freeCTA_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.free.freeCTA_UnifiedAccountCreation_Experiment",defaultMessage:"Continue with free plan"},freeCTA:{id:"pricingPlanConstants.free.callToAction",defaultMessage:"Your current plan"},freeSummary:{id:"pricingPlanConstants.free.freeSummary",defaultMessage:"Explore how AI can help you with everyday tasks"},freeCost:{id:"pricingPlanConstants.free.cost",defaultMessage:"0"},freeAdvertisedFeatures0:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce0",defaultMessage:"Standard voice mode"},freeAdvertisedFeatures1:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce1",defaultMessage:"Real-time data from the web with search"},freeAdvertisedFeatures3:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce3",defaultMessage:"Limited access to file uploads, advanced data analysis, and image generation"},freeAdvertisedFeatures4:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce4",defaultMessage:"Use custom GPTs"},freeBasicModelAccess:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce0_1",defaultMessage:"Access to GPT-5"},freeAdvertisedFeatures2_1:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce2_1",defaultMessage:"Limited access to GPT-4o and o4-mini"},costRetrievalError:{id:"pricingPlanConstants.costRetrievalError",defaultMessage:"Unable to load plan cost, please refresh the page"}}),Zue=be({plusName:{id:"pricingPlanConstants.plus.name",defaultMessage:"Plus"},plusSummary:{id:"pricingPlanConstants.plus.plusSummary",defaultMessage:"Level up productivity and creativity with expanded access"},plusSummaryWithDiscount:{id:"pricingPlanConstants.plus.plusSummaryWithDiscount",defaultMessage:"More access to advanced intelligence"},plusActive:{id:"pricingPlanConstants.plus.callToAction.active",defaultMessage:"Your current plan"},plusAdvertisedFeaturesNeptune4:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesNeptune4",defaultMessage:"Create and use tasks, shared projects, and custom GPTs"},plusAdvertisedFeatures0:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce0",defaultMessage:"Everything in Free"},plusAdvertisedFeatures1:{id:"pricingPlanConstants.plus.plusAdvertisedFeatures0_2_restricted",defaultMessage:"Extended limits on GPT-5, our flagship model"},plusAdvertisedFeatures2:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce2",defaultMessage:"Standard and advanced voice mode"},plusAdvertisedFeatures3_6:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce3_6",defaultMessage:"Access to deep research, multiple reasoning models (o4-mini, o4-mini-high, and o3), and a research preview of GPT-4.5"},plusAdvertisedFeatures3_7:{id:"pricingPlanConstants.plus.plusAdvertisedFeatures0_6_restricted",defaultMessage:"Access to ChatGPT agent"},plusAdvertisedFeatures3_8:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce3_8",defaultMessage:"Access to a research preview of GPT-4.5, our largest model yet, and GPT-4.1, a model optimized for coding tasks"},plusAdvertisedFeatures4:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce4",defaultMessage:"Opportunities to test new features"},plusAdvertisedFeatures5:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce5",defaultMessage:"Limited access to Sora video generation"},plusAdvertisedFeatures6:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce6",defaultMessage:"Access to a research preview of Codex agent"},plusInactive:{id:"pricingPlanConstants.plus.callToAction.inactivePayment",defaultMessage:"Get Plus"},plusInactiveUnauthenticated:{id:"pricingPlanConstants.plus.callToAction.inactiveUnauthenticated",defaultMessage:"Sign up to get free Plus"},memoryUpsell:{id:"pricingPlanConstants.plus.memoryUpsell",defaultMessage:"More space for memories"},studentAdvertisedFeatures1:{id:"pricingPlanConstants.student.studentAdvertisedFeatures1",defaultMessage:"Generate quick summaries of documents with more file uploads"},studentAdvertisedFeatures2:{id:"pricingPlanConstants.student.studentAdvertisedFeatures2",defaultMessage:"Practice speaking foreign languages with advanced voice"},studentAdvertisedFeatures3:{id:"pricingPlanConstants.student.studentAdvertisedFeatures3",defaultMessage:"Test new features like Projects, which lets you organize chats by topic"},studentAdvertisedFeatures4:{id:"pricingPlanConstants.student.studentAdvertisedFeatures4",defaultMessage:"Get better answers to your biggest questions with our most advanced AI models"},plusRedesignFeatures:{id:"pricingPlanConstants.plus.plusRedesignFeatures",defaultMessage:"Everything in Free"}}),qf=be({featureEverythingInFree:{id:"pricingPlanConstants.go.checkout.featureEverythingInFree",defaultMessage:"Smarter, faster responses with GPT-5"},featureGPT5Extended:{id:"pricingPlanConstants.go.checkout.featureGPT5Extended",defaultMessage:"More messages & uploads"},featureImgGenExtended:{id:"pricingPlanConstants.go.checkout.featureImgGenExtended",defaultMessage:"Faster, higher-quality image creation"},featureFileUploadsExtended:{id:"pricingPlanConstants.go.checkout.featureFileUploadsExtended",defaultMessage:"Extra memory & context"}}),Yf=be({featureSmarterFasterResponses:{id:"pricingPlanConstants.plus.checkout.featureSmarterFasterResponses",defaultMessage:"Smarter, faster responses with GPT-5"},featureMoreMessagesUploads:{id:"pricingPlanConstants.plus.checkout.featureMoreMessagesUploads",defaultMessage:"More messages & uploads"},featureFasterImages:{id:"pricingPlanConstants.plus.checkout.featureFasterImages",defaultMessage:"Faster, higher-quality image creation"},featureExpandedMemory:{id:"pricingPlanConstants.plus.checkout.featureExpandedMemory",defaultMessage:"Extra memory & context"}}),Kue=be({teamPlanName:{id:"pricingPlanConstants.teams.teamPlanName",defaultMessage:"Business"},teamPlanSummary:{id:"pricingPlanConstants.team.teamPlanSummary",defaultMessage:"Supercharge your business with a secure, collaborative workspace"},teamPlanSummary_V2:{id:"pricingPlanConstants.team.teamPlanSummary_V2",defaultMessage:"Secure, collaborative workspace for teams"},teamPlanActive:{id:"pricingPlanConstants.teams.teamPlanActive",defaultMessage:"Your current plan"},teamPlanCreate:{id:"pricingPlanConstants.teams.teamPlanCreate",defaultMessage:"Add Business workspace"},teamPlanCost:{id:"pricingPlanConstants.teams.teamPlanSubTitle",defaultMessage:"25"},teamAdvertisedFeatures0:{id:"pricingPlanConstants.team.teamAdvertisedFeatures0_1",defaultMessage:"Everything in Plus and more: unlimited GPT-5 messages, with generous access to GPT-5 thinking, access to GPT-5 pro, and optional credits that scale with your team."},teamAdvertisedFeatures1:{id:"pricingPlanConstants.team.teamAdvertisedFeatures1",defaultMessage:"Connect your company knowledge: Google Drive, SharePoint, Dropbox, GitHub, Outlook, and custom integrations"},teamAdvertisedFeatures2:{id:"pricingPlanConstants.team.teamAdvertisedFeatures2",defaultMessage:"Business-essential security: SAML SSO, MFA, SOC 2 Type 2, encryption in transit & at rest, data excluded from training"},teamAdvertisedFeatures3:{id:"pricingPlanConstants.team.teamAdvertisedFeatures3",defaultMessage:"Record mode: capture meetings and voice notes on macOS desktop, then search and reference transcripts in any chat"},teamAdvertisedFeatures4:{id:"pricingPlanConstants.team.teamAdvertisedFeatures4",defaultMessage:"Business features like shared projects, tasks, file uploads, and custom workspace GPTs"},teamAdvertisedFeatures5:{id:"pricingPlanConstants.team.teamAdvertisedFeatures5",defaultMessage:"Built-in agents  deep research, ChatGPT agent, and Codex can reason across your documents, tools, and codebases to save you hours"},teamAdvertisedFeatures6:{id:"pricingPlanConstants.team.teamAdvertisedFeatures6",defaultMessage:"Multimodal creation  create videos with Sora, generate images, build canvases, run advanced data analysis, and execute code inline"},teamAdvertisedFeatures0_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures0_ComparisonV2_Experiment",defaultMessage:"Everything in Plus, with even higher limits"},teamAdvertisedFeatures1_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures1_ComparisonV2_Experiment",defaultMessage:"Unlimited access to our best model for work"},teamAdvertisedFeatures2_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures2_ComparisonV2_Experiment",defaultMessage:"Advanced security with SSO, MFA & more"},teamAdvertisedFeatures3_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures3_ComparisonV2_Experiment",defaultMessage:"Privacy built in; data never used for training"},teamAdvertisedFeatures4_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures4_ComparisonV2_Experiment",defaultMessage:"Integration with Sharepoint & other tools"},teamAdvertisedFeatures5_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures5_ComparisonV2_Experiment",defaultMessage:"Tools for teams like shared projects & custom GPTs"},teamAdvertisedFeatures6_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures6_ComparisonV2_Experiment",defaultMessage:"Simplified billing and user management"},teamAdvertisedFeatures7_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures7_ComparisonV2_Experiment",defaultMessage:"Meeting and voice transcription"},teamAdvertisedFeatures8_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures8_ComparisonV2_Experiment",defaultMessage:"Coding and deep research agents"},teamAdvertisedFeatures9_ComparisonV2_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures9_ComparisonV2_Experiment",defaultMessage:"Videos, image gen, data, & code all in chat"},teamPlanSummary_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamPlanSummary_UnifiedAccountCreation_Experiment",defaultMessage:"Secure, collaborative workspace for teams"},teamAdvertisedFeatures_EverythingInFreePlus_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures_EverythingInFreePlus_UnifiedAccountCreation_Experiment",defaultMessage:"Everything in free, plus"},teamAdvertisedFeatures0_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures0_UnifiedAccountCreation_Experiment",defaultMessage:"Unlimited access to our best model for work"},teamAdvertisedFeatures1_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures1_UnifiedAccountCreation_Experiment",defaultMessage:"Privacy built in; data never used for training"},teamAdvertisedFeatures2_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures2_UnifiedAccountCreation_Experiment",defaultMessage:"Tools for teams like shared projects & custom GPTs"},teamAdvertisedFeatures3_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures3_UnifiedAccountCreation_Experiment",defaultMessage:"Integration with Sharepoint & other tools"},teamAdvertisedFeatures4_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures4_UnifiedAccountCreation_Experiment",defaultMessage:"Coding and deep research agents"},teamAdvertisedFeatures5_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures5_UnifiedAccountCreation_Experiment",defaultMessage:"Simplified billing and user management"},teamAdvertisedFeatures6_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamAdvertisedFeatures6_UnifiedAccountCreation_Experiment",defaultMessage:"Advanced security with SSO, MFA & more"},teamPlanInactive_UnifiedAccountCreation_Experiment:{id:"pricingPlanConstants.team.teamPlanInactive_UnifiedAccountCreation_Experiment",defaultMessage:"Start Business trial"},teamPricingDisclaimer:{id:"pricingPlanConstants.teams.teamPricingDisclaimer",defaultMessage:"For {minSeats}+ users, billed annually"},teamPricingDisclaimer2:{id:"pricingPlanConstants.team.teamPricingDisclaimer2",defaultMessage:"Unlimited subject to abuse guardrails. <link>Learn more</link>",link:"https://help.openai.com/en/articles/8792828-what-is-chatgpt-team"},teamPricingDisclaimerRedesign:{id:"pricingPlanConstants.teams.teamPricingDisclaimerRedesign",defaultMessage:"*Billed as $1/seat for 30 days up to 5 seats and $30 seat/mo thereafter"},teamPlanInactive:{id:"pricingPlanConstants.teams.callToAction.inactivePayment",defaultMessage:"Get Business"}}),Zf=be({featureUnlimitedBestModel:{id:"pricingPlanConstants.business.checkout.featureUnlimitedBestModel",defaultMessage:"Unlimited use of our best model for work"},featureAdvancedSecurity:{id:"pricingPlanConstants.business.checkout.featureAdvancedSecurity",defaultMessage:"Advanced security with SSO, MFA, and more"},featureTeamTools:{id:"pricingPlanConstants.business.checkout.featureTeamTools",defaultMessage:"Team tools like projects and custom GPTs"},featureIntegrations:{id:"pricingPlanConstants.business.checkout.featureIntegrations",defaultMessage:"Integration with SharePoint and more"},featureAdminControls:{id:"pricingPlanConstants.business.checkout.featureAdminControls",defaultMessage:"Easy member, role, and billing management"}}),Que=be({proName:{id:"pricingPlanConstants.pro.name",defaultMessage:"Pro"},proActive:{id:"pricingPlanConstants.pro.callToAction.active",defaultMessage:"Your current plan"},proInactive:{id:"pricingPlanConstants.pro.callToAction.inactive",defaultMessage:"Get Pro"},proSummary:{id:"pricingPlanConstants.pro.proPlanSummary",defaultMessage:"Get the best of OpenAI with the highest level of access"},proAdvertisedFeatures0:{id:"pricingPlanConstants.pro.proAdvertisedFeatures0",defaultMessage:"Everything in Plus"},proAdvertisedFeatures1:{id:"pricingPlanConstants.pro.proAdvertisedFeatures0_1_restricted",defaultMessage:"Unlimited access to GPT-5"},proAdvertisedFeatures2:{id:"pricingPlanConstants.pro.proAdvertisedFeatures2",defaultMessage:"Unlimited access to advanced voice"},proAdvertisedFeatures3:{id:"pricingPlanConstants.pro.proAdvertisedFeatures3",defaultMessage:"Access to o1 pro mode, which uses more compute for the best answers to the hardest questions"},proAdvertisedFeatures3_1:{id:"pricingPlanConstants.pro.proAdvertisedFeatures0_2_restricted",defaultMessage:"Access to GPT-5 pro, which uses more compute for the best answers to the hardest questions"},proAdvertisedFeatures3_5:{id:"jg7GoI",defaultMessage:"Extended access to deep research, which conducts multi-step online research for complex tasks"},proAdvertisedFeatures3_6:{id:"pricingPlanConstants.pro.proAdvertisedFeatures3_6",defaultMessage:"Extended access to ChatGPT agent"},proAdvertisedFeatures3_7:{id:"pricingPlanConstants.pro.proAdvertisedFeatures3_7",defaultMessage:"Access to research preview of GPT-4.5"},proAdvertisedFeatures4:{id:"pricingPlanConstants.pro.proAdvertisedFeatures4",defaultMessage:"Extended access to Sora video generation"},proAdvertisedFeaturesGpt4_5:{id:"pricingPlanConstants.pro.proAdvertisedFeaturesGpt4_5",defaultMessage:"Access to research preview of GPT-4.5"},proAdvertisedFeaturesGpt4_5AndOperator:{id:"pricingPlanConstants.pro.proAdvertisedFeaturesGpt4_5AndOperator",defaultMessage:"Access to research previews of GPT-4.5 and Operator"},proPricingDisclaimer:{id:"pricingPlanConstants.pro.proPricingDisclaimer",defaultMessage:"Unlimited subject to abuse guardrails. <link>Learn more</link>",link:"https://help.openai.com/en/articles/9793128-what-is-chatgpt-pro"},proAdvertisedFeatures5:{id:"pricingPlanConstants.pro.proAdvertisedFeatures5",defaultMessage:"Access to a research preview of Codex agent"}}),Kf=be({featureUnlimitedBestModels:{id:"pricingPlanConstants.pro.checkout.featureUnlimitedBestModels",defaultMessage:"Unlimited access to our best models"},featureUnlimitedAdvancedVoice:{id:"pricingPlanConstants.pro.checkout.featureUnlimitedAdvancedVoice",defaultMessage:"Unlimited use of advanced voice features"},featureExpandedAgent:{id:"pricingPlanConstants.pro.checkout.featureExpandedAgent",defaultMessage:"Expanded access to ChatGPT Agent"},featureMostImageVideo:{id:"pricingPlanConstants.pro.checkout.featureMostImageVideo",defaultMessage:"The most image and video generation"},featureLatestFeaturesFirst:{id:"pricingPlanConstants.pro.checkout.featureLatestFeaturesFirst",defaultMessage:"Access the latest new features first"}}),su=be({manageSubscriptionWeb:{id:"pricingPlanConstants.manageSubscriptionWeb.callToAction",defaultMessage:"Manage my subscription"},manageSubscriptionIos:{id:"pricingPlanConstants.manageSubscriptionIos.callToAction",defaultMessage:"Manage my subscription in the ChatGPT iOS app"},manageSubscriptionAndroid:{id:"pricingPlanConstants.manageSubscriptionAndroid.callToAction",defaultMessage:"Manage my subscription in the ChatGPT Android app"},cancelSubscriptionWeb:{id:"pricingPlanConstants.cancelSubscriptionWeb.callToAction",defaultMessage:"Cancel my subscription"},cancelSubscriptionIos:{id:"pricingPlanConstants.cancelSubscriptionIos.callToAction",defaultMessage:"Cancel my subscription in the ChatGPT iOS app"},cancelSubscriptionAndroid:{id:"pricingPlanConstants.cancelSubscriptionAndroid.callToAction",defaultMessage:"Cancel my subscription in the ChatGPT Android app"}}),CYe={manageSubscriptionIos:{callToAction:su.manageSubscriptionIos},manageSubscriptionAndroid:{callToAction:su.manageSubscriptionAndroid},cancelSubscriptionWeb:{callToAction:su.cancelSubscriptionWeb},cancelSubscriptionIos:{callToAction:su.cancelSubscriptionIos},cancelSubscriptionAndroid:{callToAction:su.cancelSubscriptionAndroid}},wu=be({planName:{id:"pricing.freeRedesign.planName",defaultMessage:"Free"},headline:{id:"pricing.freeRedesign.headline_08012025",defaultMessage:"Intelligence for everyday tasks"},cta:{id:"pricing.freeRedesign.cta",defaultMessage:"Start for free"},featureBasicModels:{id:"pricing.freeRedesign.feature.basicModels",defaultMessage:"Basic models"},featureLimitedMessagesUploads:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce0_2_restricted",defaultMessage:"Limited file uploads"},featureLimitedImageGen:{id:"pricing.freeRedesign.feature.limitedImageGen",defaultMessage:"Limited and slower image generation"},featureLimitedDeepResearch:{id:"pricing.freeRedesign.feature.limitedDeepResearch",defaultMessage:"Limited deep research"},featureLimitedMemoryContext:{id:"pricing.freeRedesign.feature.limitedMemoryContext",defaultMessage:"Limited memory and context"}}),Ya=be({planName:{id:"pricing.plusRedesign.planName",defaultMessage:"Plus"},headline:{id:"pricing.plusRedesign.headline",defaultMessage:"More access to advanced intelligence"},cta:{id:"pricing.plusRedesign.cta",defaultMessage:"Get Plus"},featureAdvancedReasoning:{id:"pricingPlanConstants.plus.plusAdvertisedFeatures0_redesign_restricted",defaultMessage:"GPT-5 with advanced reasoning"},featureExpandedMessagesUploads:{id:"pricing.plusRedesign.feature.expandedMessagesUploads",defaultMessage:"Expanded messaging and uploads"},featureExpandedFasterImageCreation:{id:"pricing.plusRedesign.feature.expandedFasterImageCreation",defaultMessage:"Expanded and faster image creation"},featureExpandedDeepResearchAgentMode:{id:"pricing.plusRedesign.feature.expandedDeepResearchAgentMode",defaultMessage:"Expanded deep research and agent mode"},featureExpandedMemoryContext:{id:"pricing.plusRedesign.feature.expandedMemoryContext",defaultMessage:"Expanded memory and context"},featureSoraVideoGeneration:{id:"pricing.plusRedesign.feature.soraVideoGeneration",defaultMessage:"Sora video generation"},featureCodexAgent:{id:"pricing.plusRedesign.feature.codexAgent",defaultMessage:"Codex agent"},footnoteLimitsApply:{id:"pricing.plusRedesign.footnote.limitsApply",defaultMessage:"Limits apply"}}),ra=be({planName:{id:"pricing.proRedesign.planName",defaultMessage:"Pro"},headline:{id:"pricing.proRedesign.headline_08012025",defaultMessage:"Full access to the best of ChatGPT"},cta:{id:"pricing.proRedesign.cta",defaultMessage:"Get Pro"},featureMostPowerfulModels:{id:"pricingPlanConstants.pro.proAdvertisedFeatures0_redesign_restricted",defaultMessage:"GPT-5 with pro reasoning"},featureUnlimitedMessagesUploads:{id:"pricing.proRedesign.feature.unlimitedMessagesUploads",defaultMessage:"Unlimited messages and uploads"},featureUnlimitedFasterImageCreation:{id:"pricing.proRedesign.feature.unlimitedFasterImageCreation",defaultMessage:"Unlimited and faster image creation"},featureMaximumDeepResearchAgentMode:{id:"pricing.proRedesign.feature.maximumDeepResearchAgentMode",defaultMessage:"Maximum deep research and agent mode"},featureMaximumMemoryContext:{id:"pricing.proRedesign.feature.maximumMemoryContext",defaultMessage:"Maximum memory and context"},featureExpandedProjectsTasksCustomGPTs:{id:"pricing.proRedesign.feature.expandedProjectsTasksCustomGPTs",defaultMessage:"Expanded projects, tasks, and custom GPTs"},featureExpandedSoraVideoGeneration:{id:"pricing.proRedesign.feature.expandedSoraVideoGeneration",defaultMessage:"Expanded Sora video generation"},featureExpandedCodexAgent:{id:"pricing.proRedesign.feature.expandedCodexAgent",defaultMessage:"Expanded Codex agent"},featureResearchPreview:{id:"pricing.proRedesign.feature.researchPreview",defaultMessage:"Research preview of new features"},footnoteAbuseGuardrails:{id:"pricing.proRedesign.footnote.abuseGuardrails",defaultMessage:"Unlimited subject to abuse guardrails"}}),Jue=be({planName:{id:"pricing.teamRedesign.planName",defaultMessage:"Business"},headline:{id:"pricing.teamRedesign.headline",defaultMessage:"Supercharge your business with a secure, collaborative workspace"},cta:{id:"pricing.teamRedesign.cta",defaultMessage:"Get Business"},featureEverythingInPlus:{id:"pricing.teamRedesign.feature.everythingInPlus",defaultMessage:"Everything in Plus"},featureUnlimitedGpt4oAnd41Mini:{id:"pricing.teamRedesign.feature.unlimitedGpt4oAnd41Mini",defaultMessage:"Unlimited access to GPT-4o and 4.1mini"},featureConnectorsInternalKnowledge:{id:"pricing.teamRedesign.feature.connectorsInternalKnowledge",defaultMessage:"Connectors to internal knowledge"},featureSecuredWorkspaceAdminBilling:{id:"pricing.teamRedesign.feature.securedWorkspaceAdminBilling",defaultMessage:"Secured workspace with admin tools and billing"},featurePrivacyLawCompliant:{id:"pricing.teamRedesign.feature.privacyLawCompliant",defaultMessage:"Privacy law compliant"},featureBusinessFeaturesDataAnalysisRecordModeCustomGPTs:{id:"pricing.teamRedesign.feature.businessFeaturesDataAnalysisRecordModeCustomGPTs",defaultMessage:"Business features like data analysis, record mode, and custom GPTs"}}),ku=be({planName:{id:"pricing.goRedesign.planName",defaultMessage:"Go"},headline:{id:"pricing.goRedesign.headline",defaultMessage:"More access to popular features"},cta:{id:"pricing.goRedesign.cta",defaultMessage:"Try Go"},featureAccessToGPT5:{id:"pricing.goRedesign.feature.accessToGpt5",defaultMessage:"Expanded Access to GPT-5"},featureExpandedMessagesUploads:{id:"pricing.goRedesign.feature.expandedMessagesUploads",defaultMessage:"Expanded messaging and uploads"},featureExpandedImageCreation:{id:"pricing.goRedesign.feature.expandedImageCreation",defaultMessage:"Expanded image creation"},featureLimitedDeepResearch:{id:"pricing.goRedesign.feature.limitedDeepResearch",defaultMessage:"Limited deep research"},featureLongerMemoryContext:{id:"pricing.goRedesign.feature.longerMemoryContext",defaultMessage:"Longer memory and context"},featureExtendedADA:{id:"pricing.goRedesign.feature.extendedADA",defaultMessage:"Extended advanced data analysis"}}),Xue=()=>[{label:SN.freeBasicModelAccess,icon:mN},{label:wu.featureLimitedMessagesUploads,icon:Vue},{label:wu.featureLimitedImageGen,icon:Rue},{label:wu.featureLimitedMemoryContext,icon:Gue},{label:wu.featureLimitedDeepResearch,icon:uN}],eme=()=>[{label:ku.featureAccessToGPT5,icon:mN},{label:ku.featureExpandedMessagesUploads,icon:yN},{label:Ya.featureExpandedFasterImageCreation,icon:_N},{label:ku.featureLongerMemoryContext,icon:vN},{label:ku.featureLimitedDeepResearch,icon:uN},{label:_t.featureProjectsTasksCustomGPTs,icon:bN}],tme=()=>[{label:Ya.featureAdvancedReasoning,icon:Pue},{label:Ya.featureExpandedMessagesUploads,icon:yN},{label:Ya.featureExpandedFasterImageCreation,icon:_N},{label:Ya.featureExpandedMemoryContext,icon:vN},{label:Ya.featureExpandedDeepResearchAgentMode,icon:Iue},{label:_t.featureProjectsTasksCustomGPTs,icon:bN},{label:Ya.featureSoraVideoGeneration,icon:Tue},{label:Ya.featureCodexAgent,icon:Fue}],nme=()=>[{label:ra.featureMostPowerfulModels,icon:jue},{label:ra.featureUnlimitedMessagesUploads,icon:Uue},{label:ra.featureUnlimitedFasterImageCreation,icon:Nue},{label:ra.featureMaximumMemoryContext,icon:$ue},{label:ra.featureMaximumDeepResearchAgentMode,icon:Aue},{label:ra.featureExpandedProjectsTasksCustomGPTs,icon:Hue},{label:ra.featureExpandedSoraVideoGeneration,icon:Eue},{label:ra.featureExpandedCodexAgent,icon:Bue},{label:ra.featureResearchPreview,icon:Due}],sme=()=>[{label:qf.featureEverythingInFree,icon:hN},{label:qf.featureGPT5Extended,icon:pN},{label:qf.featureImgGenExtended,icon:xN},{label:qf.featureFileUploadsExtended,icon:fN}],ome=()=>[{label:Yf.featureSmarterFasterResponses,icon:hN},{label:Yf.featureMoreMessagesUploads,icon:pN},{label:Yf.featureFasterImages,icon:xN},{label:Yf.featureExpandedMemory,icon:fN}],ame=()=>[{label:Kf.featureUnlimitedBestModels,icon:gN},{label:Kf.featureUnlimitedAdvancedVoice,icon:kue},{label:Kf.featureExpandedAgent,icon:Wue},{label:Kf.featureMostImageVideo,icon:Mue}],rme=()=>[{label:Zf.featureUnlimitedBestModel,icon:gN},{label:Zf.featureAdvancedSecurity,icon:Lue},{label:Zf.featureTeamTools,icon:Oue},{label:Zf.featureIntegrations,icon:zue}],Be={go:Yue,free:SN,plus:Zue,team:Kue,pro:Que,goRedesign:ku,freeRedesign:wu,plusRedesign:Ya,proRedesign:ra,teamRedesign:Jue},y0=j(()=>I(()=>import("./kaiq6xsce2ce9jwc.js").then(t=>t._),__vite__mapDeps([232,1])),{loading:t=>L(t)}),Wk=j(()=>I(()=>import("./ocm696u96obhapt8.js").then(t=>t._),__vite__mapDeps([233,1])),{loading:t=>L(t)}),ime=j(()=>I(()=>import("./f0job1fk4zp8yzbu.js").then(t=>t._),__vite__mapDeps([234,1])),{loading:t=>L(t)}),zk=j(()=>I(()=>import("./o6zuph8g9nfa6t2k.js").then(t=>t._),__vite__mapDeps([210,1])),{loading:t=>L(t)}),qk=j(()=>I(()=>import("./d3vtc5549jidf46x.js").then(t=>t._),__vite__mapDeps([235,1])),{loading:t=>L(t)}),lme=j(()=>I(()=>import("./i1yh71mwqfml3mls.js").then(t=>t._),__vite__mapDeps([213,1])),{loading:t=>L(t)}),v0=j(()=>I(()=>import("./ooz2slmm8agf6bjp.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>L(t)}),Yk=j(()=>I(()=>import("./h3fnimorznpglu1m.js").then(t=>t._),__vite__mapDeps([236,1])),{loading:t=>L(t)}),Zk=j(()=>I(()=>Promise.resolve().then(()=>$l),void 0),{loading:t=>L(t)}),Kk=j(()=>I(()=>import("./edqpi59mx50h2olv.js").then(t=>t._),__vite__mapDeps([154,1])),{loading:t=>L(t)}),cme=j(()=>I(()=>import("./opxpbab5xffcn23x.js").then(t=>t._),__vite__mapDeps([220,1])),{loading:t=>L(t)}),b0=j(()=>I(()=>import("./nd0l334cflqun5zf.js").then(t=>t._),__vite__mapDeps([237,1])),{loading:t=>L(t)}),dme=j(()=>I(()=>import("./d1o0uedh3d9ew7ib.js").then(t=>t._),__vite__mapDeps([238,1])),{loading:t=>L(t)}),ume=j(()=>I(()=>import("./pcgps09l9meg23og.js").then(t=>t._),__vite__mapDeps([231,1])),{loading:t=>L(t)});function wYe(t){let e=[{label:Be.free.freeBasicModelAccess},{label:Be.free.freeAdvertisedFeatures0},{label:Be.free.freeAdvertisedFeatures1},{label:Be.free.freeAdvertisedFeatures3},{label:Be.free.freeAdvertisedFeatures4}];return t!=null&&t.isWebRedesign&&(e=Xue()),{name:Be.free.freeName,callToAction:{active:t!=null&&t.shouldUseOnboardingFeatures?Be.free.freeCTA_UnifiedAccountCreation_Experiment:Be.free.freeCTA,create:t!=null&&t.shouldUseOnboardingFeatures?Be.free.freeCTA_UnifiedAccountCreation_Experiment:Be.free.freeCTA,inactive:t!=null&&t.shouldUseOnboardingFeatures?Be.free.freeCTA_UnifiedAccountCreation_Experiment:Be.free.freeCTA},summary:t!=null&&t.isWebRedesign?Be.freeRedesign.headline:Be.free.freeSummary,cost:{costValue:0,costTitle:Be.free.freeCost},advertisedFeatures:e}}function CN({isWebRedesign:t,isCheckoutRedesign:e}={}){const n=[{label:Be.plus.plusAdvertisedFeatures0},{label:Be.plus.plusAdvertisedFeatures1},{label:Be.plus.plusAdvertisedFeatures2},{label:Be.plus.plusAdvertisedFeatures3_7},{label:Be.plus.plusAdvertisedFeaturesNeptune4},{label:Be.plus.plusAdvertisedFeatures5},{label:Be.plus.plusAdvertisedFeatures4},{label:Be.plus.plusAdvertisedFeatures6}],s=tme(),o=ome();return{name:Be.plus.plusName,callToAction:{active:Be.plus.plusActive,create:Be.plus.plusActive,inactive:Be.plus.plusInactive,inactiveUnauthenticated:Be.plus.plusInactiveUnauthenticated},summary:e||t?Be.plusRedesign.headline:Be.plus.plusSummary,advertisedFeatures:e?o:t?s:n}}function kYe(){return[{label:Be.plus.plusAdvertisedFeatures1},{label:Be.plus.plusAdvertisedFeatures2},{label:Be.plus.plusAdvertisedFeatures3_6},{label:Be.plus.plusAdvertisedFeaturesNeptune4},{label:Be.plus.plusAdvertisedFeatures5},{label:Be.plus.plusAdvertisedFeatures4}]}function MYe(t){const e=t==null?void 0:t.isCheckoutRedesign;let n=e?rme():[{label:Be.team.teamAdvertisedFeatures0,icon:y0},{label:Be.team.teamAdvertisedFeatures1,icon:zk},{label:Be.team.teamAdvertisedFeatures2,icon:v0},{label:Be.team.teamAdvertisedFeatures3,icon:t!=null&&t.isWebRedesign?ime:Wk},{label:Be.team.teamAdvertisedFeatures4,icon:Kk},{label:Be.team.teamAdvertisedFeatures5,icon:t!=null&&t.isWebRedesign?dme:b0},{label:Be.team.teamAdvertisedFeatures6,icon:Zk}];!e&&(t!=null&&t.isBusinessUpgradeV2CopyEnabled)&&(n=[{label:Be.team.teamAdvertisedFeatures0_ComparisonV2_Experiment,icon:y0},{label:Be.team.teamAdvertisedFeatures1_ComparisonV2_Experiment,icon:lme},{label:Be.team.teamAdvertisedFeatures2_ComparisonV2_Experiment,icon:v0},{label:Be.team.teamAdvertisedFeatures3_ComparisonV2_Experiment,icon:qk},{label:Be.team.teamAdvertisedFeatures4_ComparisonV2_Experiment,icon:ume},{label:Be.team.teamAdvertisedFeatures5_ComparisonV2_Experiment,icon:cme},{label:Be.team.teamAdvertisedFeatures6_ComparisonV2_Experiment,icon:Yk},{label:Be.team.teamAdvertisedFeatures7_ComparisonV2_Experiment,icon:Wk},{label:Be.team.teamAdvertisedFeatures8_ComparisonV2_Experiment,icon:b0},{label:Be.team.teamAdvertisedFeatures9_ComparisonV2_Experiment,icon:Zk}]),!e&&(t!=null&&t.shouldUseOnboardingFeatures)&&(n=[{label:Be.team.teamAdvertisedFeatures0_UnifiedAccountCreation_Experiment,icon:y0},{label:Be.team.teamAdvertisedFeatures1_UnifiedAccountCreation_Experiment,icon:qk},{label:Be.team.teamAdvertisedFeatures2_UnifiedAccountCreation_Experiment,icon:Kk},{label:Be.team.teamAdvertisedFeatures3_UnifiedAccountCreation_Experiment,icon:zk},{label:Be.team.teamAdvertisedFeatures4_UnifiedAccountCreation_Experiment,icon:b0},{label:Be.team.teamAdvertisedFeatures5_UnifiedAccountCreation_Experiment,icon:Yk},{label:Be.team.teamAdvertisedFeatures6_UnifiedAccountCreation_Experiment,icon:v0}]);let s=Be.team.teamPlanSummary;return t!=null&&t.isBusinessUpgradeV2CopyEnabled?s=Be.team.teamPlanSummary_V2:t!=null&&t.shouldUseOnboardingFeatures&&(s=Be.team.teamPlanSummary_UnifiedAccountCreation_Experiment),{name:Be.team.teamPlanName,summary:s,disclaimer:Be.team.teamPricingDisclaimer,disclaimer2:Be.team.teamPricingDisclaimer2,advertisedFeatures:n,callToAction:{active:Be.team.teamPlanActive,create:Be.team.teamPlanCreate,inactive:t!=null&&t.shouldUseOnboardingFeatures&&(t!=null&&t.isTrialEnabled)?Be.team.teamPlanInactive_UnifiedAccountCreation_Experiment:Be.team.teamPlanInactive}}}function TYe({isWebRedesign:t,isCheckoutRedesign:e}={}){let n=[{label:Be.pro.proAdvertisedFeatures0},{label:Be.pro.proAdvertisedFeatures1},{label:Be.pro.proAdvertisedFeatures2},{label:Be.pro.proAdvertisedFeatures3_5},{label:Be.pro.proAdvertisedFeatures3_1},{label:Be.pro.proAdvertisedFeatures3_6},{label:Be.pro.proAdvertisedFeatures4}];return e?n=ame():t&&(n=nme()),{name:Be.pro.proName,callToAction:{active:Be.pro.proActive,create:Be.pro.proActive,inactive:Be.pro.proInactive},summary:e||t?Be.proRedesign.headline:Be.pro.proSummary,advertisedFeatures:n,disclaimer:Be.pro.proPricingDisclaimer}}const EYe=()=>{const t=CN();return B(w({},t),{advertisedFeatures:[{label:Be.plus.studentAdvertisedFeatures1},{label:Be.plus.studentAdvertisedFeatures2},{label:Be.plus.studentAdvertisedFeatures3},{label:Be.plus.studentAdvertisedFeatures4}]})};function mme({isWebRedesign:t,isCheckoutRedesign:e}={}){const n=[{label:Be.go.goAdvertisedEverythingInFree},{label:Be.go.goAdvertisedGPT5Extended},{label:Be.go.goAdvertisedImgGenExtended},{label:Be.go.goAdvertisedFileUploadsExtended},{label:Be.go.goAdvertisedADAExtended},{label:Be.go.goAdvertisedLongerMemory}],s=e?sme():t?eme():n;return{name:Be.go.goName,callToAction:{active:Be.go.goCTAActive,create:Be.go.goCTAActive,inactive:Be.go.goCTA,promo:Be.go.goCTAPromo},summary:e||t?Be.goRedesign.headline:Be.go.goSummary,advertisedFeatures:s}}const fme=_.createContext("none"),AS=()=>_.useContext(fme),pme=j(()=>I(()=>import("./cr5h05bhk5js9k9c.js").then(t=>t._),__vite__mapDeps([190,1])),{loading:t=>L(t)}),wN=j(()=>I(()=>import("./d8877bxkmz2am6pw.js"),__vite__mapDeps([239,1,29,30])).then(t=>t.default));function AYe(){"use forget";const t=H.c(8),e=G(),n=Ve(e,"2888142241").get("is_feedback_tool_shown",!1),s=Xo();let o;t[0]!==s?(o=()=>s==null?void 0:s.serverId$(),t[0]=s,t[1]=o):o=t[1];const a=ue(o),i=ut(e);if(!i)return null;const c=i.isEnterprise()||i.isEdu();if(!n||c)return null;let d;t[2]!==a||t[3]!==e?(d=()=>{U.logEventWithStatsig("Feedback: Report Bug Button Clicked","chatgpt_feedback_report_bug_click",{location:"help-menu"}),Ee.count(Ae.DEFAULT,"chatgpt_feedback_report_bug_click",{location:"help-menu"}),requestAnimationFrame(()=>{gt(e,wN,{entryPointElementId:"report-bug-menu-item",conversationId:a})})},t[2]=a,t[3]=e,t[4]=d):d=t[4];let u;t[5]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(P,{id:"feedback.reportBug",defaultMessage:"Report Bug"}),t[5]=u):u=t[5];let m;return t[6]!==d?(m=r.jsx(K.Item,{id:"report-bug-menu-item",icon:pme,onPointerOver:gme,onClick:d,children:u}),t[6]=d,t[7]=m):m=t[7],m}function gme(){return wN.prefetch()}/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hme=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_me=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase()),Qk=t=>{const e=_me(t);return e.charAt(0).toUpperCase()+e.slice(1)},kN=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim(),xme=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yme={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vme=_.forwardRef((d,c)=>{var u=d,{color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:a,iconNode:i}=u,l=Me(u,["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"]);return _.createElement("svg",w(w(B(w({ref:c},yme),{width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:kN("lucide",o)}),!a&&!xme(l)&&{"aria-hidden":"true"}),l),[...i.map(([m,f])=>_.createElement(m,f)),...Array.isArray(a)?a:[a]])});/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=(t,e)=>{const n=_.forwardRef((i,a)=>{var l=i,{className:s}=l,o=Me(l,["className"]);return _.createElement(vme,w({ref:a,iconNode:e,className:kN("lucide-".concat(hme(Qk(t))),"lucide-".concat(t),s)},o))});return n.displayName=Qk(t),n};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bme=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],IYe=Ol("atom",bme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sme=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jYe=Ol("chevron-right",Sme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cme=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],PYe=Ol("code-xml",Cme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wme=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],NYe=Ol("route",wme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kme=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],RYe=Ol("sparkle",kme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mme=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],LYe=Ol("square-pen",Mme);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tme=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],OYe=Ol("x",Tme),Eme="https://help.openai.com/en/collections/3742473-chatgpt",Ame="https://help.openai.com/en/articles/9982051",Ime="https://help.openai.com/en/articles/6825453-chatgpt-release-notes",jme="https://help.openai.com/en/articles/10003026-windows-app-release-notes";function Pme(){return Ho?Ame:Eme}function Nme(){return Ho?jme:Ime}const Rme=j(()=>I(()=>import("./nlapoxbdtdpwvd2h.js").then(t=>t._),__vite__mapDeps([240,1])),{loading:t=>L(t)}),Lme=j(()=>I(()=>import("./d63jm146253lx3xq.js").then(t=>t._),__vite__mapDeps([241,1])),{loading:t=>L(t)}),Ome=j(()=>I(()=>import("./f1ck6gk84p2xkr4m.js").then(t=>t._),__vite__mapDeps([242,1])),{loading:t=>L(t)});function DYe(){return r.jsxs(r.Fragment,{children:[r.jsx(K.LinkItem,{icon:Lme,external:!0,to:Pme(),onClick:()=>{U.logEvent("Click FAQ")},children:r.jsx(P,{id:"thread.helpCenter",defaultMessage:"Help center"})}),r.jsx(K.LinkItem,{icon:Ome,external:!0,to:Nme(),children:r.jsx(P,{id:"thread.releaseNotes",defaultMessage:"Release notes"})}),r.jsx(K.LinkItem,{icon:Rme,external:!0,to:"https://openai.com/policies",children:r.jsx(P,{id:"thread.termsAndPolicies",defaultMessage:"Terms & policies"})})]})}function MN({date:t}){const e=J(),n=t instanceof Date?t:new Date(t*1e3),s=xa(n,new Date);if(s<4&&s>-4){const o=e.formatRelativeTime(s,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return e.formatDate(n,{year:"numeric",month:"long",day:"numeric"})}const Dme="_wrapper_m72g5_1",Fme="_disabled_m72g5_16",Bme="_label_m72g5_22",S0={wrapper:Dme,disabled:Fme,label:Bme};function Ume(d){var u=d,{className:t,icon:e,label:n,onClick:s,style:o,tabIndex:a=0,ref:i,disabled:l}=u,c=Me(u,["className","icon","label","onClick","style","tabIndex","ref","disabled"]);return r.jsx("label",{"aria-label":n,className:W(t,S0.wrapper,l&&S0.disabled),style:o,tabIndex:-1,children:r.jsx("button",B(w({className:W(S0.label,l&&"opacity-50"),onClick:s,tabIndex:a,ref:i,type:"button",disabled:l},c),{children:e}))})}const Vme=j(()=>I(()=>import("./mfw23qkpoldespd9.js").then(t=>t._),__vite__mapDeps([207,1])),{loading:t=>L(t)}),Gme=j(()=>I(()=>import("./bci083mws0hai8bl.js").then(t=>t._),__vite__mapDeps([186,1])),{loading:t=>L(t)}),$me=j(()=>I(()=>import("./fefndn2gt024gfqh.js").then(t=>t._),__vite__mapDeps([243,1])),{loading:t=>L(t)}),Hme=j(()=>I(()=>import("./kqljukn7m8ep0np1.js").then(t=>t._),__vite__mapDeps([244,1])),{loading:t=>L(t)}),ef=Nt(Cn(()=>({feedItems:[],hasUnreadNotifications:!1,isModalOpen:!1}))),Wme=ef.getState,C0=ef.setState,zme={getHasUnreadNotifications:(t=Wme())=>t.hasUnreadNotifications},Dc={setIsModalOpen:t=>{C0({isModalOpen:t})},setHasUnreadNotifications:t=>{C0({hasUnreadNotifications:t})},bulkLoadFeedItems:t=>{C0(e=>{e.feedItems=t})}};function qme(){const t=G(),e=IS(t),n=ef(zme.getHasUnreadNotifications);return e&&n}function Yme(t,e,n,s){const o=G(),a=qme(),i=ue(()=>J$(o).some(c=>{var d;return((d=Mi(c))==null?void 0:d.value)===Yt.UNREAD}));return n&&a||s&&i?t:e}function IS(t){return Ve(t,"3606233934",{disableExposureLog:!0}).get("enable_notifications_feed")}function FYe(){const t=G(),e=IS(t),n=ef(s=>s.isModalOpen);return e&&n}function Zme(){const t=G(),e=IS(t),n=lt({queryKey:["fetch-notifications-feed"],queryFn:async()=>{const s=await pe.safeGet("/notifications/feed");return Dc.bulkLoadFeedItems(s.items),Dc.setHasUnreadNotifications(s.has_unreads),s.items},enabled:e});return{isLoading:n.isLoading,isFetching:n.isFetching}}function BYe(){const t=J(),e=Yme(Hme,$me,!0,!1),n=t.formatMessage({id:"1UHY6w",defaultMessage:"Notifications"});return Zme(),r.jsx(kt,{label:n,className:"group",children:r.jsx(g1,{icon:e,onClick:()=>Dc.setIsModalOpen(!0),"aria-label":n})})}function Kme({conversation:t,item:e,onClose:n}){const o={announcement:Vme}[e.type];let a=null;try{const d=new Date(e.created_at);a=MN({date:d})}catch(d){}const i=Hm(t.id),l=at(),c=d=>{var u,m,f;if(((u=e.action)==null?void 0:u.type)==="show_conversation")n(),l(e.action.conversation_id);else if(((m=e.action)==null?void 0:m.type)==="new_conversation"){const p=e.action;p.prefilled_message&&(i({sourceEvent:d,promptMessage:us(p.prefilled_message),requestedModelId:(f=p.model_slug)!=null?f:void 0}),n())}};return r.jsxs("button",{className:"border-token-border-default flex w-full items-center justify-start gap-3 overflow-hidden border-t py-4 first-of-type:border-none",onClick:c,disabled:!e.action,children:[r.jsx("div",{className:"relative",children:o&&r.jsx(o,{className:"icon"})}),r.jsxs("div",{className:"flex h-5 shrink grow basis-0 items-center justify-between",children:[r.jsx("div",{className:"text-token-text-primary text-sm leading-tight font-normal",children:e.message}),r.jsx("div",{className:"flex items-center justify-start gap-1",children:r.jsx("div",{className:"text-token-text-tertiary text-sm leading-tight font-normal",children:a!=null?a:""})})]})]})}function UYe({conversation:t}){const{feedItems:e,isModalOpen:n}=ef();_.useEffect(()=>{n&&(Dc.setHasUnreadNotifications(!1),pe.safePost("/notifications/feed/read",{authOption:qt.SendIfAvailable}))},[n]);const s=J(),o=at(),a=G(),i=xe(a,"3325813340"),l=new Date,c=Md(e,u=>{const m=new Date(u.created_at);if(AA(m))return"today";const f=xa(l,m);return f<=7?"last_7_days":f<=30?"last_30_days":"more_than_30_days"}),d=u=>{switch(u){case"today":return s.formatMessage({id:"zlkA39",defaultMessage:"Today"});case"last_7_days":return s.formatMessage({id:"FW89A4",defaultMessage:"Last 7 days"});case"last_30_days":return s.formatMessage({id:"2s3h/P",defaultMessage:"Last 30 days"});case"more_than_30_days":return s.formatMessage({id:"yArZiR",defaultMessage:"More than 30 days"})}};return r.jsx(Pt,{testId:"modal-notifications-feed",isOpen:n,onClose:()=>{Dc.setIsModalOpen(!1)},type:"success",size:"custom",className:"max-w-3xl",children:r.jsxs("div",{className:"flex flex-col gap-y-10",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold",children:s.formatMessage({id:"kWt8Cx",defaultMessage:"Notifications"})}),i&&r.jsx(Ume,{icon:r.jsx(Gme,{className:"icon"}),onClick:()=>{o(fd(Bn.Notifications))},label:s.formatMessage({id:"mZVh0S",defaultMessage:"Notifications settings"})})]}),Object.entries(c).map(([u,m])=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold",children:d(u)}),m.map(f=>r.jsx(Kme,{conversation:t,item:f,onClose:()=>Dc.setIsModalOpen(!1)},f.id))]},u))]})})}var bg=(t=>(t.Header="Header",t.HeaderTop="HeaderTop",t.HeaderBottom="HeaderBottom",t))(bg||{}),Jt=(t=>(t.Box="Box",t.PromptTextareaAction="PromptTextareaAction",t.BannerTermsDisclaimer="BannerTermsDisclaimer",t.NewUserBannerTermsDisclaimer="NewUserBannerTermsDisclaimer",t.BannerSignup="BannerSignup",t.BannersRateLimit="BannersRateLimit",t.BannersBeaconUI="BannersBeaconUI",t.BannerSidekickAnnouncement="BannerSidekickAnnouncement",t.BannerMemoryFull="BannerMemoryFull",t.BannerMemoryAlmostFull="BannerMemoryAlmostFull",t.ParagenControls="ParagenControls",t.AdvancedVoiceOnMobileAnnouncement="AdvancedVoiceOnMobileAnnouncement",t.SearchBrowserExtensionAnnouncement="SearchBrowserExtensionAnnouncement",t.SearchBrowserExtensionReactiveAnnouncement="SearchBrowserExtensionReactiveAnnouncement",t.MoonshineAnnouncement="MoonshineAnnouncement",t.CustomizeChatGPTAnnouncement="CustomizeChatGPTAnnouncement",t.ProjectConversationTaskNoFileAccess="ProjectConversationTaskNoFileAccess",t.JawboneAnnouncement="JawboneAnnouncement",t.JawboneMaxActiveAnnouncement="JawboneMaxActiveAnnouncement",t.PromoRedemptionAnnouncement="PromoRedemptionAnnouncement",t.OperatorAnnouncement="OperatorAnnouncement",t.BannerPlusUpsell="BannerPlusUpsell",t.PlusFreeTrialHomepageAnnouncementBanner="PlusFreeTrialHomepageAnnouncementBanner",t.ContextualAnswersAdminUpsell="ContextualAnswersAdminUpsell",t.ContextualAnswersUserUpsell="ContextualAnswersUserUpsell",t.ReferrerRedemptionAvailableAnnouncement="ReferrerRedemptionAvailableAnnouncement",t.RefereeRedemptionAvailableAnnouncement="RefereeRedemptionAvailableAnnouncement",t.ReferralProgramUpsellAnnouncement="ReferralProgramUpsellAnnouncement",t.TatertotIntakeFormAnnouncement="TatertotIntakeFormAnnouncement",t.StudentsUpsellAnnouncement="StudentsUpsellAnnouncement",t.TeamSeatsPromoAnnouncement="TeamSeatsPromoAnnouncement",t.ModelDeprecationBanner="ModelDeprecationBanner",t.TeamsContextualAnswersUpsell="TeamsContextualAnswersUpsell",t.LanguageUpsellBanner="LanguageUpsellBanner",t.AgentModeAnnouncementBanner="AgentModeAnnouncementBanner",t.GoldenHourAnnouncementBanner="GoldenHourAnnouncementBanner",t.BannerNoAuthTrials="BannerNoAuthTrials",t.StarterPrompts="StarterPrompts",t.ImageGenBanner="ImageGenBanner",t.SystemHintSuggestion="SystemHintSuggestion",t))(Jt||{}),TN=(t=>(t.DallePromptControls="DallePromptControls",t))(TN||{});const Jk={contentAreas:{Header:{dimensions:null,contentId:null},HeaderTop:{dimensions:null,contentId:null},HeaderBottom:{dimensions:null,contentId:null}},sharedProps:null};function Qme(){const t=Nt(jm(Cn(()=>Jk)));function e(n,s){t.setState(o=>{o.contentAreas[n].dimensions=s})}return{reset:()=>t.setState(Jk),useContentAreaId(n){return t(s=>s.contentAreas[n].contentId)},useHasAnnouncementInHeader(){const n=t(s=>s.contentAreas.HeaderTop.contentId);return n==="AdvancedVoiceOnMobileAnnouncement"||n==="BannerSidekickAnnouncement"},useContentAreaApi(n){const s=_.useCallback(a=>t.setState(i=>{i.contentAreas[n].contentId=a}),[n]),o=_.useCallback(()=>{t.setState(a=>{a.contentAreas[n].contentId=null})},[n]);return{set:s,remove:o}},useContentAreaDimensions(n,s){return t(o=>s(o.contentAreas[n].dimensions))},useContentAreaResizeObserver(n,s){_.useEffect(()=>{if(s.current){e(n,s.current.getBoundingClientRect());const o=new ResizeObserver(a=>{for(const i of a)e(n,i.contentRect)});return o.observe(s.current),()=>{o.disconnect(),e(n,null)}}},[s,n])},useIsHeaderContentAreaPopulated(){return t(n=>!!n.contentAreas.HeaderTop.contentId||!!n.contentAreas.HeaderBottom.contentId)},useSharedProps(n){return t(s=>n?n(s.sharedProps):s.sharedProps)},getSharedProps(){return t.getState().sharedProps},useSetSharedProps(){return _.useCallback(n=>{t.setState(s=>{s.sharedProps=n})},[])}}}const EN=_.createContext(null);function VYe(t){"use forget";const e=H.c(3),{children:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={store:Qme()},e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(EN.Provider,{value:s,children:n}),e[1]=n,e[2]=o):o=e[2],o}function Ar(t){"use forget";const e=t===void 0?!0:t,n=_.useContext(EN);if(!n&&e)throw new Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return n}var jS="Popover",[AN]=wl(jS,[wh]),tf=wh(),[Jme,Ei]=AN(jS),IN=t=>{const{__scopePopover:e,children:n,open:s,defaultOpen:o,onOpenChange:a,modal:i=!1}=t,l=tf(e),c=_.useRef(null),[d,u]=_.useState(!1),[m=!1,f]=ur({prop:s,defaultProp:o,onChange:a});return r.jsx(BA,B(w({},l),{children:r.jsx(Jme,{scope:e,contentId:kh(),triggerRef:c,open:m,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:d,onCustomAnchorAdd:_.useCallback(()=>u(!0),[]),onCustomAnchorRemove:_.useCallback(()=>u(!1),[]),modal:i,children:n})}))};IN.displayName=jS;var jN="PopoverAnchor",PN=_.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=Me(c,["__scopePopover"]),o=Ei(jN,n),a=tf(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=o;return _.useEffect(()=>(i(),()=>l()),[i,l]),r.jsx(Rb,B(w(w({},a),s),{ref:e}))});PN.displayName=jN;var NN="PopoverTrigger",RN=_.forwardRef((t,e)=>{const c=t,{__scopePopover:n}=c,s=Me(c,["__scopePopover"]),o=Ei(NN,n),a=tf(n),i=Rn(e,o.triggerRef),l=r.jsx(cn.button,B(w({type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":VN(o.open)},s),{ref:i,onClick:Rt(t.onClick,o.onOpenToggle)}));return o.hasCustomAnchor?l:r.jsx(Rb,B(w({asChild:!0},a),{children:l}))});RN.displayName=NN;var PS="PopoverPortal",[Xme,efe]=AN(PS,{forceMount:void 0}),LN=t=>{const{__scopePopover:e,forceMount:n,children:s,container:o}=t,a=Ei(PS,e);return r.jsx(Xme,{scope:e,forceMount:n,children:r.jsx(ah,{present:n||a.open,children:r.jsx(rb,{asChild:!0,container:o,children:s})})})};LN.displayName=PS;var Xc="PopoverContent",ON=_.forwardRef((t,e)=>{const n=efe(Xc,t.__scopePopover),i=t,{forceMount:s=n.forceMount}=i,o=Me(i,["forceMount"]),a=Ei(Xc,t.__scopePopover);return r.jsx(ah,{present:s||a.open,children:a.modal?r.jsx(tfe,B(w({},o),{ref:e})):r.jsx(nfe,B(w({},o),{ref:e}))})});ON.displayName=Xc;var tfe=_.forwardRef((t,e)=>{const n=Ei(Xc,t.__scopePopover),s=_.useRef(null),o=Rn(e,s),a=_.useRef(!1);return _.useEffect(()=>{const i=s.current;if(i)return UA(i)},[]),r.jsx(VA,{as:GA,allowPinchZoom:!0,children:r.jsx(DN,B(w({},t),{ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Rt(t.onCloseAutoFocus,i=>{var l;i.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Rt(t.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Rt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})}))})}),nfe=_.forwardRef((t,e)=>{const n=Ei(Xc,t.__scopePopover),s=_.useRef(!1),o=_.useRef(!1);return r.jsx(DN,B(w({},t),{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,o.current=!1},onInteractOutside:a=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),DN=_.forwardRef((t,e)=>{const g=t,{__scopePopover:n,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u}=g,m=Me(g,["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),f=Ei(Xc,n),p=tf(n);return $A(),r.jsx(HA,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:o,onUnmountAutoFocus:a,children:r.jsx(WA,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(zA,B(w(w({"data-state":VN(f.open),role:"dialog",id:f.contentId},p),m),{ref:e,style:B(w({},m.style),{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))})})}),FN="PopoverClose",BN=_.forwardRef((t,e)=>{const a=t,{__scopePopover:n}=a,s=Me(a,["__scopePopover"]),o=Ei(FN,n);return r.jsx(cn.button,B(w({type:"button"},s),{ref:e,onClick:Rt(t.onClick,()=>o.onOpenChange(!1))}))});BN.displayName=FN;var sfe="PopoverArrow",UN=_.forwardRef((t,e)=>{const a=t,{__scopePopover:n}=a,s=Me(a,["__scopePopover"]),o=tf(n);return r.jsx(qA,B(w(w({},o),s),{ref:e}))});UN.displayName=sfe;function VN(t){return t?"open":"closed"}var Dl=IN,ofe=PN,br=RN,Fl=LN,Bl=ON,afe=BN,rfe=UN;const ife=j(()=>I(()=>Promise.resolve().then(()=>V3),void 0),{loading:t=>L(t)});function Vd(t){var T;const e=G(),[n,s]=_.useState(!1),M=t,{announcementKey:o,onDismiss:a,children:i,childrenWrapperClassName:l}=M,c=Me(M,["announcementKey","onDismiss","children","childrenWrapperClassName"]),{show:d}=c,m=Ve(e,"717266490").get("one_announcement_tooltip_per_session",!1),f=wa(E=>!!E.displayAnnouncementTooltip),p=wa(E=>!m||E.displayAnnouncementTooltip===o),g=J(),h=KZ(),x=QZ();let y=!1;const b=Ar(!1);y=((T=b==null?void 0:b.store.useContentAreaId(bg.HeaderTop))!=null?T:null)!==null;const C=d&&!(h||y||x);if(_.useEffect(()=>{m&&C&&n&&yn.showAnnouncementTooltipExclusively(o)},[n,m,o,C]),_.useEffect(()=>{C&&(!m||p)&&(We.logEvent("announcement_tooltip_shown",null,{announcement_key:o}),U.logEvent("Announcement Tooltip Shown",{announcement_key:o}))},[C,p,o,m]),f&&!p)return i;const k=()=>{(!m||p)&&(a(),We.logEvent("announcement_tooltip_dismissed",null,{announcement_key:o}),U.logEvent("Announcement Tooltip Dismissed",{announcement_key:o}))};return r.jsx(lfe,B(w({},c),{show:C,onDismiss:k,renderAsInvisible:m&&!f,onTooltipChildrenBecomeVisible:()=>{m&&s(!0)},children:r.jsx("div",{"aria-label":g.formatMessage({id:"announcementTooltip.ariaLabel",defaultMessage:"Announcements"}),className:W("w-fit",l),children:i})}))}function lfe({align:t,arrowPadding:e,alignOffset:n,show:s,onDismiss:o,children:a,title:i,side:l,sideOffset:c,theme:d="default",badge:u="new",contentAlign:m="start",description:f,className:p,collisionPadding:g,onTooltipChildrenBecomeVisible:h,renderAsInvisible:x=!1,dismissOnOutsideClick:y=!1,dismissOnTriggerClick:b=!0,contentClassName:v}){var T;const S=_.useRef(null),[C,k]=_.useState(!1);_.useEffect(()=>{if(!s)return;const E=S.current;if(!E)return;const A=new IntersectionObserver(N=>{k(N[N.length-1].intersectionRatio===1)},{threshold:1});return A.observe(E),()=>{A.unobserve(E)}},[s]);const M=E=>{s&&E&&E.getBoundingClientRect().width>0&&E.getBoundingClientRect().height>0&&(h==null||h()),S.current=E};return r.jsxs(Dl,{open:s&&C,onOpenChange:E=>{E||o()},children:[r.jsx(br,{asChild:!0,onPointerDown:()=>{b&&o()},ref:M,children:a}),r.jsx(Fl,{container:(T=S.current)==null?void 0:T.ownerDocument.body,children:r.jsx(YA,{children:r.jsxs(Bl,{arrowPadding:e,alignOffset:n,align:t,collisionPadding:g,side:l,sideOffset:c,onOpenAutoFocus:E=>{E.preventDefault()},onCloseAutoFocus:E=>{E.preventDefault()},onInteractOutside:E=>{var N;E.target instanceof Element&&((N=S.current)==null?void 0:N.contains(E.target))||E.type==="dismissableLayer.focusOutside"?E.preventDefault():y?o():E.preventDefault()},updatePositionStrategy:"always",className:W("animate-slideLeftAndFade relative z-30 rounded-xl p-4 text-sm shadow-sm select-none",d==="default"?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white",x&&"invisible",v),children:[r.jsxs("div",{className:W("flex max-w-xs flex-col gap-1",p),children:[r.jsxs("div",{className:"mb-0.5 flex gap-2",children:[u==="new"?r.jsx("span",{className:W("self-center rounded-sm px-1.5 py-0.5 text-[10px] leading-normal font-semibold uppercase",d==="default"?"bg-token-main-surface-primary text-token-main-surface-primary-inverse":"bg-white text-blue-400"),children:r.jsx(P,w({},Xk.new))}):u==="beta"&&r.jsx("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:r.jsx(P,w({},Xk.beta))}),r.jsx("div",{className:W("grow font-semibold",m&&"text-".concat(m)),children:i}),r.jsx(afe,{className:"-m-1 p-1 leading-[0] opacity-70 transition hover:opacity-100","data-testid":"announcement-tooltip-close-btn",children:r.jsx(ife,{className:"icon-sm"})})]}),f!==void 0&&r.jsx("div",{className:W(m&&"text-".concat(m)),children:f})]}),r.jsx(rfe,{asChild:!0,children:r.jsx("div",{className:W("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-ee-sm",d==="default"?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})})]})}const Xk=be({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}}),e5=j(()=>I(()=>import("./dujttbag0lb0tmgz.js"),__vite__mapDeps([245,1,29,30])).then(t=>t.CustomInstructionsModal)),kp=j(()=>I(()=>import("./oylpo2l5g6gyz7yn.js"),__vite__mapDeps([246,1,29,30,247,33])).then(t=>t.CreateOrEditProjectModal)),cfe=Object.freeze(Object.defineProperty({__proto__:null,CreateOrEditProjectModalAsync:kp},Symbol.toStringTag,{value:"Module"})),t5=j(()=>I(()=>import("./l4pli7qldeykp9cl.js"),__vite__mapDeps([248,1,29,30,249,174,250,251,252,122,253,110,111])).then(t=>t.ShareProjectModal)),dfe=j(()=>I(()=>import("./ceivmd4pm4umbvdn.js").then(t=>t._),__vite__mapDeps([139,1])),{loading:t=>L(t)}),ufe=j(()=>I(()=>import("./ef28lc1b3o54kec9.js").then(t=>t._),__vite__mapDeps([185,1])),{loading:t=>L(t)}),mfe=j(()=>I(()=>import("./dt74bs5wyg16icnh.js").then(t=>t._),__vite__mapDeps([254,1])),{loading:t=>L(t)}),ffe=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])),{loading:t=>L(t)}),pfe=j(()=>I(()=>import("./cr5h05bhk5js9k9c.js").then(t=>t._),__vite__mapDeps([190,1])),{loading:t=>L(t)}),gfe=j(()=>I(()=>import("./jaj7xqi147v16cd7.js").then(t=>t._),__vite__mapDeps([255,1])),{loading:t=>L(t)}),n5=j(()=>I(()=>import("./etwtyusadum8sxs7.js"),__vite__mapDeps([256,1,29,30])).then(t=>t.ProjectReportModal)),s5=j(()=>I(()=>import("./huxxd6cqecfry0y3.js"),__vite__mapDeps([257,1,29,30])).then(t=>t.SnorlaxDeletionModal)),o5=j(()=>I(()=>import("./fmspz7huzt2iefwt.js"),__vite__mapDeps([258,1,29,30])).then(t=>t.SnorlaxLeaveModal));function hfe(t){"use forget";var N;const e=H.c(24);let n,s;e[0]!==t?(N=t,{className:s}=N,n=Me(N,["className"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const o=G(),a=J(),i=ut(o),{eligible:l,markAsViewed:c}=$e(Ye.hasSeenSharedProjectsTooltip),d=Vd,u=Ye,m="bottom",f="end",p="w-full",g=0,h="z-100",x="w-full",y="bright",b=!0,v="new";let S;e[3]!==a?(S=a.formatMessage({id:"YJ1BcI",defaultMessage:"Invite others to projects"}),e[3]=a,e[4]=S):S=e[4];const C=i!=null&&i.isWorkspaceAccount()?a.formatMessage({id:"7i6HBq",defaultMessage:"Build reports, plan client work, or do research  together."}):a.formatMessage({id:"CO0hjY",defaultMessage:"Plan adventures, campaigns, workouts, and more  together."});let k;e[5]!==s?(k=W("mx-2",s),e[5]=s,e[6]=k):k=e[6];let M;e[7]!==a?(M=a.formatMessage(Gt.projectShareButton),e[7]=a,e[8]=M):M=e[8];let T;e[9]!==a?(T=a.formatMessage(Gt.projectShareButton),e[9]=a,e[10]=T):T=e[10];let E;e[11]!==n||e[12]!==k||e[13]!==M||e[14]!==T?(E=r.jsx(he,B(w({className:k,color:"ghost",icon:ufe,label:M},n),{children:T})),e[11]=n,e[12]=k,e[13]=M,e[14]=T,e[15]=E):E=e[15];let A;return e[16]!==d||e[17]!==l||e[18]!==c||e[19]!==u.hasSeenSharedProjectsTooltip||e[20]!==S||e[21]!==C||e[22]!==E?(A=r.jsx(d,{announcementKey:u.hasSeenSharedProjectsTooltip,show:l,side:m,align:f,className:p,sideOffset:g,contentClassName:h,childrenWrapperClassName:x,theme:y,dismissOnOutsideClick:b,badge:v,title:S,description:C,onDismiss:c,children:E}),e[16]=d,e[17]=l,e[18]=c,e[19]=u.hasSeenSharedProjectsTooltip,e[20]=S,e[21]=C,e[22]=E,e[23]=A):A=e[23],A}function GN(t){"use forget";var ge,Ne,je,Te,Fe;const e=H.c(106),{gizmoId:n,serverThreadId:s}=t,o=J(),a=at(),i=G();let l;e[0]!==i||e[1]!==n?(l=_S(i,n),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let d;e[3]!==i?(d=()=>_h(i),e[3]=i,e[4]=d):d=e[4];const u=ue(d);let m;e[5]!==c?(m=()=>c.gizmo$(),e[5]=c,e[6]=m):m=e[6];const f=ue(m);let p;e[7]!==c?(p=()=>P8(c)(),e[7]=c,e[8]=p):p=e[8];const g=ue(p),h=!s;let x;e[9]!==c?(x=()=>N8(c)(),e[9]=c,e[10]=x):x=e[10];const y=ue(x);let b;e[11]!==c?(b=()=>R8(c)(),e[11]=c,e[12]=b):b=e[12];const v=ue(b);let S;e[13]!==c?(S=()=>Hle(c)(),e[13]=c,e[14]=S):S=e[14];const C=ue(S);let k;e[15]!==c?(k=()=>hS(c)(),e[15]=c,e[16]=k):k=e[16];const M=ue(k),{canEdit:T}=Lb(f!=null?f:void 0),{canDelete:E}=X$(f!=null?f:void 0),A=v&&h;let N;e[17]!==f?(N=f?vh(f):!1,e[17]=f,e[18]=N):N=e[18];const R=N;let O;e[19]!==i||e[20]!==f?(O=eH(),e[19]=i,e[20]=f,e[21]=O):O=e[21];const D=O,F=((Ne=(ge=f==null?void 0:f.gizmo)==null?void 0:ge.author)==null?void 0:Ne.user_id)===(u==null?void 0:u.normalizedAccountUserId),V=R&&h;let z;e[22]!==i||e[23]!==f?(z=()=>{f&&gt(i,n5,{projectId:f.gizmo.id,projectName:f.gizmo.display.name,onClose:()=>Cs(i,n5)})},e[22]=i,e[23]=f,e[24]=z):z=e[24];const $=z;let Y;e[25]!==i||e[26]!==f||e[27]!==o?(Y=()=>{f&&gt(i,kp,{submitButtonTitle:o.formatMessage(Gt.projectSettingsSubmitButton),gizmo:f,onClose:()=>Cs(i,kp),onSuccess:()=>{Cs(i,kp)}})},e[25]=i,e[26]=f,e[27]=o,e[28]=Y):Y=e[28];const Z=Y;let Q;e[29]!==i||e[30]!==n||e[31]!==a?(Q=()=>{gt(i,s5,{gizmoId:n,handleDelete:()=>{Cs(i,s5),a("/",{replace:!0})}})},e[29]=i,e[30]=n,e[31]=a,e[32]=Q):Q=e[32];const q=Q;let X;e[33]!==i||e[34]!==f?(X=()=>{f&&gt(i,e5,{gizmo:f,onClose:()=>Cs(i,e5)})},e[33]=i,e[34]=f,e[35]=X):X=e[35];const oe=ya(X);let se;e[36]!==i||e[37]!==f||e[38]!==n||e[39]!==a?(se=()=>{f&&gt(i,o5,{gizmoId:n,projectName:f.gizmo.display.name,handleLeave:()=>{Cs(i,o5),a("/",{replace:!0})}})},e[36]=i,e[37]=f,e[38]=n,e[39]=a,e[40]=se):se=e[40];const de=se;let ie;e[41]!==i?(ie=()=>{},e[41]=i,e[42]=ie):ie=e[42];const ae=ie,ce=((Fe=(Te=(je=f==null?void 0:f.gizmo)==null?void 0:je.instructions)==null?void 0:Te.length)!=null?Fe:0)>0,ye=T?ce?Gt.editInstructionsDropdownLabel:Gt.addInstructionsDropdownLabel:Gt.viewOnlyInstructionsDropdownLabel;let fe;if(e[43]!==E||e[44]!==T||e[45]!==i||e[46]!==ye||e[47]!==f||e[48]!==oe||e[49]!==q||e[50]!==Z||e[51]!==de||e[52]!==$||e[53]!==ae||e[54]!==ce||e[55]!==D||e[56]!==F||e[57]!==V){fe=[];const Ge=xe(i,"1478278884");if(F){let Se;e[62]!==i?(Se=xe(i,"4283270305")?r.jsx(P,{id:"ADb29o",defaultMessage:"Edit project"}):r.jsx(P,w({},Gt.editProjectNameDropdownButton)),e[62]=i,e[63]=Se):Se=e[63];let Re;e[64]!==Z||e[65]!==Se?(Re=r.jsx(K.Item,{onClick:Z,icon:ffe,children:Se}),e[64]=Z,e[65]=Se,e[66]=Re):Re=e[66],fe.push(Re)}if((T||ce)&&Ge){let Se;e[67]!==ye?(Se=r.jsx(P,w({},ye)),e[67]=ye,e[68]=Se):Se=e[68];let Re;e[69]!==oe||e[70]!==Se?(Re=r.jsx(K.Item,{onClick:oe,icon:mfe,children:Se},"instructions"),e[69]=oe,e[70]=Se,e[71]=Re):Re=e[71],fe.push(Re)}if(V){let Se;e[72]===Symbol.for("react.memo_cache_sentinel")?(Se=r.jsx(P,w({},Gt.reportProjectButtonLabel)),e[72]=Se):Se=e[72];let Re;e[73]!==$?(Re=r.jsx(K.Item,{onClick:$,icon:pfe,children:Se},"report"),e[73]=$,e[74]=Re):Re=e[74],fe.push(Re)}if(!F&&!D){let Se;e[75]===Symbol.for("react.memo_cache_sentinel")?(Se=r.jsx(P,w({},Gt.leaveProjectDropdownButton)),e[75]=Se):Se=e[75];let Re;e[76]!==de?(Re=r.jsx(K.Item,{color:"danger",onClick:de,icon:gfe,children:Se},"leave"),e[76]=de,e[77]=Re):Re=e[77],fe.push(Re)}if(E&&!D){let Se;e[78]===Symbol.for("react.memo_cache_sentinel")?(Se=r.jsx(P,w({},Gt.deleteProjectDropdownButton)),e[78]=Se):Se=e[78];let Re;e[79]!==q?(Re=r.jsx(K.Item,{color:"danger",onClick:q,icon:dfe,children:Se},"delete"),e[79]=q,e[80]=Re):Re=e[80],fe.push(Re)}e[43]=E,e[44]=T,e[45]=i,e[46]=ye,e[47]=f,e[48]=oe,e[49]=q,e[50]=Z,e[51]=de,e[52]=$,e[53]=ae,e[54]=ce,e[55]=D,e[56]=F,e[57]=V,e[58]=fe}else fe=e[58];const Ce=fe;let ee;e[81]!==i||e[82]!==f?(ee=()=>{f&&gt(i,t5,{gizmo:$P(f),publishedGizmo:f,onClose:()=>Cs(i,t5)})},e[81]=i,e[82]=f,e[83]=ee):ee=e[83];const te=ee;let le,re;e[84]!==i||e[85]!==g||e[86]!==v||e[87]!==A||e[88]!==y?(le=()=>{g&&(Ee.count(Ae.PROJECTS,"snorlax_header_actions_shown",{in_shared_projects_gate:xe(i,"773249106")?"true":"false",workspace_allows_sharing:y?"true":"false",is_shared_projects_enabled:v?"true":"false"}),A&&Ee.count(Ae.PROJECTS,"snorlax_header_actions_share_button_shown"))},re=[g,A,y,v,i],e[84]=i,e[85]=g,e[86]=v,e[87]=A,e[88]=y,e[89]=le,e[90]=re):(le=e[89],re=e[90]),_.useEffect(le,re);let ve;e[91]!==o?(ve=o.formatMessage(Gt.showProjectDetailsDropdown),e[91]=o,e[92]=ve):ve=e[92];let _e;e[93]!==o?(_e=o.formatMessage(Gt.projectShareButton),e[93]=o,e[94]=_e):_e=e[94];const we=!f;let De;return e[95]!==Ce||e[96]!==te||e[97]!==D||e[98]!==M||e[99]!==h||e[100]!==C||e[101]!==A||e[102]!==ve||e[103]!==_e||e[104]!==we?(De={dropdownAriaLabel:ve,dropdownOptions:Ce,handleClickShare:te,isFirstPartyProjectValue:D,monograms:M,onProjectHomePage:h,projectShareLabel:_e,shareButtonDisabled:we,shouldShowMonograms:C,showShareProjectButton:A},e[95]=Ce,e[96]=te,e[97]=D,e[98]=M,e[99]=h,e[100]=C,e[101]=A,e[102]=ve,e[103]=_e,e[104]=we,e[105]=De):De=e[105],De}function _fe(t){"use forget";const e=H.c(6),{state:n}=t,{handleClickShare:s,monograms:o,projectShareLabel:a,shouldShowMonograms:i}=n;if(!i)return null;let l;e[0]!==o?(l=r.jsx(Vle,{monograms:o}),e[0]=o,e[1]=l):l=e[1];let c;return e[2]!==s||e[3]!==a||e[4]!==l?(c=r.jsx(he,{"aria-label":a,className:"bg-transparent! px-0! hover:opacity-90",color:"ghost",onClick:s,children:l}),e[2]=s,e[3]=a,e[4]=l,e[5]=c):c=e[5],c}function xfe(t){"use forget";const e=H.c(3),{state:n}=t,{handleClickShare:s,isFirstPartyProjectValue:o,shareButtonDisabled:a,showShareProjectButton:i}=n;if(!i||o)return null;let l;return e[0]!==s||e[1]!==a?(l=r.jsx(hfe,{disabled:a,onClick:s}),e[0]=s,e[1]=a,e[2]=l):l=e[2],l}function $N(t){"use forget";const e=H.c(5),{state:n}=t,{dropdownAriaLabel:s,dropdownOptions:o,onProjectHomePage:a}=n;if(!a||o.length===0)return null;let i;e[0]!==s?(i=r.jsx(Z8,{"aria-label":s,className:"shrink-0"}),e[0]=s,e[1]=i):i=e[1];let l;return e[2]!==o||e[3]!==i?(l=r.jsx(Si,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:i,size:"auto",children:o}),e[2]=o,e[3]=i,e[4]=l):l=e[4],l}function GYe(t){"use forget";const e=H.c(2),n=GN(t);let s;return e[0]!==n?(s=r.jsxs(r.Fragment,{children:[r.jsx(_fe,{state:n}),r.jsx(xfe,{state:n}),r.jsx($N,{state:n})]}),e[0]=n,e[1]=s):s=e[1],s}function $Ye(t){"use forget";const e=H.c(2),n=GN(t);let s;return e[0]!==n?(s=r.jsx($N,{state:n}),e[0]=n,e[1]=s):s=e[1],s}const Ea=yb(t=>{const e=Qe(null),n=e.set;return e.set=s=>{const o=hn(e);n(s);const a=hn(e);o&&!Sg(a,o)&&Cfe(t,o),a&&!Sg(a,o)&&Sfe(t,a)},e}),yfe=yb(t=>It(()=>Ea(t)!=null));function NS(t,e){Ea.set(t,e)}function M1(t){Ea.set(t,null)}function HN(t,e,n){const s=hn(()=>Ea(t));s&&Sg(e,s)?Zt(e,"searchSources")&&Zt(s,"searchSources")&&s.scrollToHeader!==e.scrollToHeader?Ea.set(t,B(w({},e),{shouldAnimateScroll:!0})):M1(t):(n==null||n(),NS(t,e))}function Sg(t,e){return t===e?!0:!t||!e?!1:Zt(t,"searchSources")&&Zt(e,"searchSources")?e.messageId===t.messageId:Zt(t,"caterpillar")&&Zt(e,"caterpillar")?e.caterpillarId===t.caterpillarId&&e.initialTab===t.initialTab:Zt(t,"summarizer")&&Zt(e,"summarizer")?e.turnIndex===t.turnIndex:Zt(t,"cot")&&Zt(e,"cot")?e.turnIndex===t.turnIndex&&e.reasoningGroupIndex===t.reasoningGroupIndex:Zt(t,"retrievalResults")&&Zt(e,"retrievalResults")?e.turnIndex===t.turnIndex&&e.messageId===t.messageId:Zt(t,"n7jupdSources")&&Zt(e,"n7jupdSources")||Zt(t,"n7jupdTabs")&&Zt(e,"n7jupdTabs")?e.messageId===t.messageId:Zt(t,"codingCitations")&&Zt(e,"codingCitations")?e.messageId===t.messageId&&e.matchedText===t.matchedText:Zt(t,"product")&&Zt(e,"product")?e.messageId===t.messageId&&e.turnIndex===t.turnIndex&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.productIndex===t.productIndex:Zt(t,"entity")&&Zt(e,"entity")?e.messageId===t.messageId&&e.contentReferenceStartIndex===t.contentReferenceStartIndex&&e.query===t.query&&e.category===t.category:Zt(t,"strix")&&Zt(e,"strix")?e.entityId===t.entityId:!1}function Ir(t){"use forget";const e=H.c(2),s=Xo();let o;return e[0]!==s?(o={openThreadSidebar:a=>{s&&NS(s,a)},closeThreadSidebar:()=>{s&&M1(s)},toggleThreadSidebar:(a,i)=>{s&&HN(s,a,i)}},e[0]=s,e[1]=o):o=e[1],o}function Zt(t,e){return(t==null?void 0:t.type)===e}function vfe(){"use forget";const t=H.c(2),e=Xo();let n;return t[0]!==e?(n=()=>e!=null&&yfe(e),t[0]=e,t[1]=n):n=t[1],ue(n)}function bfe(){"use forget";const t=H.c(2),e=Xo();let n;return t[0]!==e?(n=()=>e!=null?Ea(e):null,t[0]=e,t[1]=n):n=t[1],ue(n)}function a5(t){"use forget";const e=H.c(3),n=Xo();let s;return e[0]!==n||e[1]!==t?(s=()=>{const o=n!=null?Ea(n):null;if(o&&Zt(o,t))return o},e[0]=n,e[1]=t,e[2]=s):s=e[2],ue(s)}const Sfe=(t,e)=>{if(Zt(e,"searchSources")){const{turnIndex:n,messageId:s}=e;U.logEventWithStatsig("Search Links Sidebar Shown","search_links_sidebar_shown",An({turnIndex:n,clientThreadId:t.id,messageId:s}))}else if(Zt(e,"product")){const{turnIndex:n,messageId:s,contentReferenceStartIndex:o,productId:a,productIndex:i,productUrl:l,interactionSource:c}=e;U.logEventWithStatsig("Product Sidebar Shown","product_sidebar_shown",B(w({},An({turnIndex:n,clientThreadId:t.id,messageId:s})),{content_reference_start_index:o,product_index:(i+1).toString(),product_url:l,product_id:a,interaction_source:c}))}else if(Zt(e,"retrievalResults")){const{turnIndex:n}=e;U.logEventWithStatsig("File Sources Sidebar Shown","file_sources_sidebar_shown",w({},An({turnIndex:n,clientThreadId:t.id})))}},Cfe=(t,e)=>{if(Zt(e,"searchSources")){const{messageId:n,turnIndex:s}=e;U.logEventWithStatsig("Search Links Sidebar Closed","search_links_sidebar_closed",An({clientThreadId:t.id,messageId:n,turnIndex:s}))}else if(Zt(e,"product")){const{messageId:n,turnIndex:s,contentReferenceStartIndex:o,productIndex:a,productId:i}=e;U.logEventWithStatsig("Product Sidebar Closed","product_sidebar_closed",B(w({},An({turnIndex:s,clientThreadId:t.id,messageId:n})),{content_reference_start_index:o,product_index:(a+1).toString(),product_id:i}))}else if(Zt(e,"retrievalResults")){const{turnIndex:n}=e;U.logEvent("File Sources Sidebar Closed",An({clientThreadId:t.id,turnIndex:n}))}};class Ds extends El()(()=>({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})){appendOrReplaceActive(e,n=Sg){const{history:s,historyIndex:o,historyScrollTops:a,historyFullWidthImageHeights:i}=this.getState();if(o>=0&&n(s[o],e)){const c=[...s];c[o]=e,this.setState({history:c});return}const l=o>=0?s.slice(0,o+1):[];this.setState({history:[...l,e],historyScrollTops:[...a.slice(0,Math.max(0,o+1)),0],historyFullWidthImageHeights:[...i.slice(0,Math.max(0,o+1)),null],historyIndex:l.length})}setActiveIndex(e){const{history:n}=this.getState();e<0||e>=n.length||this.setState({historyIndex:e})}setScrollTopForActive(e){const{historyIndex:n,historyScrollTops:s}=this.getState();if(n<0)return;const o=[...s];o[n]=e,this.setState({historyScrollTops:o})}setFullWidthImageHeightForIndex(e,n){const{history:s,historyFullWidthImageHeights:o}=this.getState();if(e<0||e>=s.length)return;const a=[...o];a[e]=n,this.setState({historyFullWidthImageHeights:a})}setFullWidthImageHeightForActive(e){const{historyIndex:n}=this.getState();this.setFullWidthImageHeightForIndex(n,e)}reset(){this.setState({history:[],historyIndex:-1,historyScrollTops:[],historyFullWidthImageHeights:[]})}goBack(e){const{historyIndex:n,history:s}=this.getState();n<=0||(this.setActiveIndex(n-1),e(s[n-1]))}goToHistoryIndex(e,n){const{history:s}=this.getState();e<0||e>=s.length||(this.setActiveIndex(e),n(s[e]))}closeThreadSidebar(e){this.reset(),e()}}ne(Ds,"selectCanGoBack",e=>e.historyIndex>0),ne(Ds,"selectBackHistory",e=>e.history.slice(0,Math.max(0,e.historyIndex))),ne(Ds,"selectCurrentHistoryScrollTop",e=>{var n;return e.historyIndex>=0&&(n=e.historyScrollTops[e.historyIndex])!=null?n:0}),ne(Ds,"selectCurrentHistoryFullWidthImageHeight",e=>{var n;return e.historyIndex>=0&&(n=e.historyFullWidthImageHeights[e.historyIndex])!=null?n:null});function wfe(){const{openThreadSidebar:t,closeThreadSidebar:e}=Ir(),n=bfe(),s=Ds.useStore(),o=Ds.useState(Ds.selectCanGoBack),a=Ds.useState(Ds.selectBackHistory),i=Ds.useState(Ds.selectCurrentHistoryScrollTop),l=Ds.useState(Ds.selectCurrentHistoryFullWidthImageHeight),c=Ds.useState(x=>x.historyIndex);_.useEffect(()=>{n&&s.appendOrReplaceActive(n)},[n,s]);const d=_.useCallback(()=>s.goBack(t),[s,t]),u=_.useCallback(x=>s.goToHistoryIndex(x,t),[s,t]),m=_.useCallback(x=>s.setScrollTopForActive(x),[s]),f=_.useCallback(x=>s.setFullWidthImageHeightForActive(x),[s]),p=_.useCallback((x,y)=>s.setFullWidthImageHeightForIndex(x,y),[s]),g=_.useCallback(()=>{s.reset()},[s]),h=_.useCallback(()=>{s.reset(),e()},[s,e]);return{canGoBack:o,backHistory:a,goBack:d,goToHistoryIndex:u,setScrollTopForActive:m,currentHistoryScrollTop:i,setFullWidthImageHeightForActive:f,setFullWidthImageHeightForIndex:p,currentHistoryFullWidthImageHeight:l,activeHistoryIndex:c,resetSidebarHistory:g,closeThreadSidebarAndResetHistory:h}}var w0,r5;function WN(){if(r5)return w0;r5=1;var t=tH(),e=nA();function n(s,o,a){(a!==void 0&&!e(s[o],a)||a===void 0&&!(o in s))&&t(s,o,a)}return w0=n,w0}var k0,i5;function kfe(){if(i5)return k0;i5=1;var t=gb(),e=lb();function n(s){return e(s)&&t(s)}return k0=n,k0}var M0,l5;function Mfe(){if(l5)return M0;l5=1;var t=Y6(),e=nH(),n=lb(),s="[object Object]",o=Function.prototype,a=Object.prototype,i=o.toString,l=a.hasOwnProperty,c=i.call(Object);function d(u){if(!n(u)||t(u)!=s)return!1;var m=e(u);if(m===null)return!0;var f=l.call(m,"constructor")&&m.constructor;return typeof f=="function"&&f instanceof f&&i.call(f)==c}return M0=d,M0}var T0,c5;function zN(){if(c5)return T0;c5=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return T0=t,T0}var E0,d5;function Tfe(){if(d5)return E0;d5=1;var t=sH(),e=ZA();function n(s){return t(s,e(s))}return E0=n,E0}var A0,u5;function Efe(){if(u5)return A0;u5=1;var t=WN(),e=oH(),n=aH(),s=KA(),o=rH(),a=iH(),i=uh(),l=kfe(),c=lH(),d=cH(),u=_b(),m=Mfe(),f=dH(),p=zN(),g=Tfe();function h(x,y,b,v,S,C,k){var M=p(x,b),T=p(y,b),E=k.get(T);if(E){t(x,b,E);return}var A=C?C(M,T,b+"",x,y,k):void 0,N=A===void 0;if(N){var R=i(T),O=!R&&c(T),D=!R&&!O&&f(T);A=T,R||O||D?i(M)?A=M:l(M)?A=s(M):O?(N=!1,A=e(T,!0)):D?(N=!1,A=n(T,!0)):A=[]:m(T)||a(T)?(A=M,a(M)?A=g(M):(!u(M)||d(M))&&(A=o(T))):N=!1}N&&(k.set(T,A),S(A,T,v,C,k),k.delete(T)),t(x,b,A)}return A0=h,A0}var I0,m5;function Afe(){if(m5)return I0;m5=1;var t=uH(),e=WN(),n=mH(),s=Efe(),o=_b(),a=ZA(),i=zN();function l(c,d,u,m,f){c!==d&&n(d,function(p,g){if(f||(f=new t),o(p))s(c,d,g,u,l,m,f);else{var h=m?m(i(c,g),p,g+"",c,d,f):void 0;h===void 0&&(h=p),e(c,g,h)}},a)}return I0=l,I0}var j0,f5;function Ife(){if(f5)return j0;f5=1;var t=OI(),e=a1();function n(s){return t(function(o,a){var i=-1,l=a.length,c=l>1?a[l-1]:void 0,d=l>2?a[2]:void 0;for(c=s.length>3&&typeof c=="function"?(l--,c):void 0,d&&e(a[0],a[1],d)&&(c=l<3?void 0:c,l=1),o=Object(o);++i<l;){var u=a[i];u&&s(o,u,i,c)}return o})}return j0=n,j0}var P0,p5;function jfe(){if(p5)return P0;p5=1;var t=Afe(),e=Ife(),n=e(function(s,o,a){t(s,o,a)});return P0=n,P0}var Pfe=jfe();const Gd=Wn(Pfe);function T1(t,{type:e="copy",source:n,messageId:s,serverThreadId:o,selectedText:a,location:i,contentType:l,productLogOnly:c=!1}){if(pt(t)&&(U.logEvent("Content Exported",{type:e,source:n,length:a.length,location:i,contentType:l}),!(c||e==="download")))return pe.safePost("/conversation/implicit_message_feedback",{requestBody:{message_id:s,conversation_id:o,source:n,feedback:{feedback_type:e,selected_text:a},location:i}})}function Nfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t}function $y(t,e){return Array(e+1).join(t)}function Rfe(t){return t.replace(/^\n*/,"")}function Lfe(t){for(var e=t.length;e>0&&t[e-1]==="\n";)e--;return t.substring(0,e)}var Ofe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function RS(t){return LS(t,Ofe)}var qN=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function YN(t){return LS(t,qN)}function Dfe(t){return KN(t,qN)}var ZN=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function Ffe(t){return LS(t,ZN)}function Bfe(t){return KN(t,ZN)}function LS(t,e){return e.indexOf(t.nodeName)>=0}function KN(t,e){return t.getElementsByTagName&&e.some(function(n){return t.getElementsByTagName(n).length})}var Is={};Is.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}};Is.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}};Is.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var s=Number(e.nodeName.charAt(1));if(n.headingStyle==="setext"&&s<3){var o=$y(s===1?"=":"-",t.length);return"\n\n"+t+"\n"+o+"\n\n"}else return"\n\n"+$y("#",s)+" "+t+"\n\n"}};Is.blockquote={filter:"blockquote",replacement:function(t){return t=t.replace(/^\n+|\n+$/g,""),t=t.replace(/^/gm,"> "),"\n\n"+t+"\n\n"}};Is.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return n.nodeName==="LI"&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}};Is.listItem={filter:"li",replacement:function(t,e,n){t=t.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var s=n.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var a=o.getAttribute("start"),i=Array.prototype.indexOf.call(o.children,e);s=(a?Number(a)+i:i+1)+".  "}return s+t+(e.nextSibling&&!/\n$/.test(t)?"\n":"")}};Is.indentedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="indented"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}};Is.fencedCodeBlock={filter:function(t,e){return e.codeBlockStyle==="fenced"&&t.nodeName==="PRE"&&t.firstChild&&t.firstChild.nodeName==="CODE"},replacement:function(t,e,n){for(var s=e.firstChild.getAttribute("class")||"",o=(s.match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,i=n.fence.charAt(0),l=3,c=new RegExp("^"+i+"{3,}","gm"),d;d=c.exec(a);)d[0].length>=l&&(l=d[0].length+1);var u=$y(i,l);return"\n\n"+u+o+"\n"+a.replace(/\n$/,"")+"\n"+u+"\n\n"}};Is.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}};Is.inlineLink={filter:function(t,e){return e.linkStyle==="inlined"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href"),s=Cg(e.getAttribute("title"));return s&&(s=' "'+s+'"'),"["+t+"]("+n+s+")"}};Is.referenceLink={filter:function(t,e){return e.linkStyle==="referenced"&&t.nodeName==="A"&&t.getAttribute("href")},replacement:function(t,e,n){var s=e.getAttribute("href"),o=Cg(e.getAttribute("title"));o&&(o=' "'+o+'"');var a,i;switch(n.linkReferenceStyle){case"collapsed":a="["+t+"][]",i="["+t+"]: "+s+o;break;case"shortcut":a="["+t+"]",i="["+t+"]: "+s+o;break;default:var l=this.references.length+1;a="["+t+"]["+l+"]",i="["+l+"]: "+s+o}return this.references.push(i),a},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}};Is.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}};Is.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}};Is.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n=t.parentNode.nodeName==="PRE"&&!e;return t.nodeName==="CODE"&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",s=t.match(/`+/gm)||[];s.indexOf(n)!==-1;)n=n+"`";return n+e+t+e+n}};Is.image={filter:"img",replacement:function(t,e){var n=Cg(e.getAttribute("alt")),s=e.getAttribute("src")||"",o=Cg(e.getAttribute("title")),a=o?' "'+o+'"':"";return s?"!["+n+"]("+s+a+")":""}};function Cg(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function QN(t){this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[];for(var e in t.rules)this.array.push(t.rules[e])}QN.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){if(t.isBlank)return this.blankRule;var e;return(e=N0(this.array,t,this.options))||(e=N0(this._keep,t,this.options))||(e=N0(this._remove,t,this.options))?e:this.defaultRule},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};function N0(t,e,n){for(var s=0;s<t.length;s++){var o=t[s];if(Ufe(o,e,n))return o}}function Ufe(t,e,n){var s=t.filter;if(typeof s=="string"){if(s===e.nodeName.toLowerCase())return!0}else if(Array.isArray(s)){if(s.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof s=="function"){if(s.call(t,e,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Vfe(t){var e=t.element,n=t.isBlock,s=t.isVoid,o=t.isPre||function(m){return m.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var a=null,i=!1,l=null,c=g5(l,e,o);c!==e;){if(c.nodeType===3||c.nodeType===4){var d=c.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!i&&d[0]===" "&&(d=d.substr(1)),!d){c=R0(c);continue}c.data=d,a=c}else if(c.nodeType===1)n(c)||c.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,i=!1):s(c)||o(c)?(a=null,i=!0):a&&(i=!1);else{c=R0(c);continue}var u=g5(l,c,o);l=c,c=u}a&&(a.data=a.data.replace(/ $/,""),a.data||R0(a))}}function R0(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function g5(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var JN=typeof window<"u"?window:{};function Gfe(){var t=JN.DOMParser,e=!1;try{new t().parseFromString("","text/html")&&(e=!0)}catch(n){}return e}function $fe(){var t=function(){};return Hfe()?t.prototype.parseFromString=function(e){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(e),n.close(),n}:t.prototype.parseFromString=function(e){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(e),n.close(),n},t}function Hfe(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){window.ActiveXObject&&(t=!0)}return t}var Wfe=Gfe()?JN.DOMParser:$fe();function zfe(t,e){var n;if(typeof t=="string"){var s=qfe().parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html");n=s.getElementById("turndown-root")}else n=t.cloneNode(!0);return Vfe({element:n,isBlock:RS,isVoid:YN,isPre:e.preformattedCode?Yfe:null}),n}var L0;function qfe(){return L0=L0||new Wfe,L0}function Yfe(t){return t.nodeName==="PRE"||t.nodeName==="CODE"}function Zfe(t,e){return t.isBlock=RS(t),t.isCode=t.nodeName==="CODE"||t.parentNode.isCode,t.isBlank=Kfe(t),t.flankingWhitespace=Qfe(t,e),t}function Kfe(t){return!YN(t)&&!Ffe(t)&&/^\s*$/i.test(t.textContent)&&!Dfe(t)&&!Bfe(t)}function Qfe(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n=Jfe(t.textContent);return n.leadingAscii&&h5("left",t,e)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&h5("right",t,e)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function Jfe(t){var e=t.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function h5(t,e,n){var s,o,a;return t==="left"?(s=e.previousSibling,o=/ $/):(s=e.nextSibling,o=/^ /),s&&(s.nodeType===3?a=o.test(s.nodeValue):n.preformattedCode&&s.nodeName==="CODE"?a=!1:s.nodeType===1&&!RS(s)&&(a=o.test(s.textContent))),a}var Xfe=Array.prototype.reduce,epe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function wg(t){if(!(this instanceof wg))return new wg(t);var e={rules:Is,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,s){return s.isBlock?"\n\n":""},keepReplacement:function(n,s){return s.isBlock?"\n\n"+s.outerHTML+"\n\n":s.outerHTML},defaultReplacement:function(n,s){return s.isBlock?"\n\n"+n+"\n\n":n}};this.options=Nfe({},e,t),this.rules=new QN(this.options)}wg.prototype={turndown:function(t){if(!spe(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(t==="")return"";var e=XN.call(this,new zfe(t,this.options));return tpe.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else if(typeof t=="function")t(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return epe.reduce(function(e,n){return e.replace(n[0],n[1])},t)}};function XN(t){var e=this;return Xfe.call(t.childNodes,function(n,s){s=new Zfe(s,e.options);var o="";return s.nodeType===3?o=s.isCode?s.nodeValue:e.escape(s.nodeValue):s.nodeType===1&&(o=npe.call(e,s)),eR(n,o)},"")}function tpe(t){var e=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(t=eR(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function npe(t){var e=this.rules.forNode(t),n=XN.call(this,t),s=t.flankingWhitespace;return(s.leading||s.trailing)&&(n=n.trim()),s.leading+e.replacement(n,t,this.options)+s.trailing}function eR(t,e){var n=Lfe(t),s=Rfe(e),o=Math.max(t.length-n.length,e.length-s.length),a="\n\n".substring(0,o);return n+a+s}function spe(t){return t!=null&&(typeof t=="string"||t.nodeType&&(t.nodeType===1||t.nodeType===9||t.nodeType===11))}var _5=/highlight-(?:text|source)-([a-z0-9]+)/;function ope(t){t.addRule("highlightedCodeBlock",{filter:function(e){var n=e.firstChild;return e.nodeName==="DIV"&&_5.test(e.className)&&n&&n.nodeName==="PRE"},replacement:function(e,n,s){var o=n.className||"",a=(o.match(_5)||[null,""])[1];return"\n\n"+s.fence+a+"\n"+n.firstChild.textContent+"\n"+s.fence+"\n\n"}})}function ape(t){t.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(e){return"~"+e+"~"}})}var rpe=Array.prototype.indexOf,ipe=Array.prototype.every,ed={};ed.tableCell={filter:["th","td"],replacement:function(t,e){return tR(t,e)}};ed.tableRow={filter:"tr",replacement:function(t,e){var n="",s={left:":--",right:"--:",center:":-:"};if(OS(e))for(var o=0;o<e.childNodes.length;o++){var a="---",i=(e.childNodes[o].getAttribute("align")||"").toLowerCase();i&&(a=s[i]||a),n+=tR(a,e.childNodes[o])}return"\n"+t+(n?"\n"+n:"")}};ed.table={filter:function(t){return t.nodeName==="TABLE"&&OS(t.rows[0])},replacement:function(t){return t=t.replace("\n\n","\n"),"\n\n"+t+"\n\n"}};ed.tableSection={filter:["thead","tbody","tfoot"],replacement:function(t){return t}};function OS(t){var e=t.parentNode;return e.nodeName==="THEAD"||e.firstChild===t&&(e.nodeName==="TABLE"||lpe(e))&&ipe.call(t.childNodes,function(n){return n.nodeName==="TH"})}function lpe(t){var e=t.previousSibling;return t.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function tR(t,e){var n=rpe.call(e.parentNode.childNodes,e),s=" ";return n===0&&(s="| "),s+t+" |"}function cpe(t){t.keep(function(n){return n.nodeName==="TABLE"&&!OS(n.rows[0])});for(var e in ed)t.addRule(e,ed[e])}function dpe(t){t.addRule("taskListItems",{filter:function(e){return e.type==="checkbox"&&e.parentNode.nodeName==="LI"},replacement:function(e,n){return(n.checked?"[x]":"[ ]")+" "}})}function upe(t){t.use([ope,ape,cpe,dpe])}function x5(t){const e=w({},t);for(const n of Object.keys(e))e[n]=Math.round(e[n]);return e}function Mc(t,e){for(;t;){if(t instanceof HTMLElement&&t.dataset[e]!=null)return{node:t,dataValue:t.dataset[e]};t=t.parentNode}return{node:void 0,dataValue:void 0}}const O0={clientRect:void 0,isCollapsed:void 0,textContent:void 0,documentFragment:void 0,selection:void 0},nR=new wg;nR.use(upe);function mpe(t){const n=t.getRangeAt(0).cloneContents(),s=document.createElement("div");return s.appendChild(n),nR.turndown(s.innerHTML)}function fpe(t){const e=G(),[{clientRect:n,isCollapsed:s,textContent:o,documentFragment:a,selection:i},l]=_.useState(O0);En(()=>{const d=()=>{setTimeout(()=>{let u;const m=window.getSelection(),f={};if(m==null||!m.rangeCount){l(O0);return}const p=m.getRangeAt(0);if(p==null){l(O0);return}const g=p.cloneContents();f.documentFragment=g,f.textContent=mpe(m);const h=p.getClientRects();if(h.length===0&&p.commonAncestorContainer!=null&&p.commonAncestorContainer instanceof HTMLElement){const x=p.commonAncestorContainer;u=x5(x.getBoundingClientRect().toJSON())}else{if(h.length<1)return;u=x5(h[0].toJSON())}f.clientRect=u,f.isCollapsed=p.collapsed,f.selection=m,l(f)},0)};return window.addEventListener("mouseup",d),()=>{window.removeEventListener("mouseup",d)}},[]);const c=Es();return _.useEffect(()=>{if(c)return;const d=u=>{const m=window.getSelection(),f=m==null?void 0:m.toString(),p=jt(t),{dataValue:g}=Mc(m==null?void 0:m.anchorNode,"messageAuthorRole"),{dataValue:h}=Mc(m==null?void 0:m.anchorNode,"messageId");!f||!h||!p||!g||g!=="assistant"||T1(e,{source:"keyboard",type:"copy",messageId:h,serverThreadId:p,selectedText:f,location:"selection",contentType:"text"})};return document.addEventListener("copy",d),()=>{document.removeEventListener("copy",d)}},[e,t,c]),{clientRect:n,isCollapsed:s,textContent:o,documentFragment:a,selection:i}}const ppe=j(()=>I(()=>import("./bixu5vz33dd1zzrz.js").then(t=>t._),__vite__mapDeps([259,1])),{loading:t=>L(t)}),sR="agent-turn",HYe=[Tt.PrimaryAssistant,Tt.GizmoInteraction],D0=8,gpe=44,hpe=12;function _pe({clientRect:t,containerSize:e}){const n=t.top,s=n+t.height,o=t.left+t.width/2;let a=n-gpe,i=o-e.width/2;const l=D0;(a<l||n<l)&&(a=s+hpe);const c=window.innerWidth-e.width-D0;return i=Math.max(D0,Math.min(i,c)),{top:a,left:i}}function xpe(t){var e;return fi.createPortal(t.children,(e=t.mount)!=null?e:document.body)}function ype({onClick:t}){return r.jsx(he,{size:"medium",color:"secondary",className:"shadow-long flex rounded-xl border-none active:opacity-1",onClick:t,children:r.jsxs("span",{className:"flex items-center gap-1.5 select-none",children:[r.jsx(ppe,{className:"icon"}),r.jsx("span",{className:"whitespace-nowrap! select-none max-md:sr-only",children:r.jsx(P,{defaultMessage:"Ask ChatGPT",id:"TargetedReplyPopover.askChatGPT"})})]})})}function vpe({anchorNode:t,clientRect:e,buttons:n}){var d;const s=_.useRef(null),[o,a]=_.useState({width:0,height:0});if(En(()=>{const u=s.current;if(!u)return;const m=()=>{s.current&&a({width:s.current.offsetWidth,height:s.current.offsetHeight})};m();const f=new ResizeObserver(m);return f.observe(u),()=>f.disconnect()},[n.length]),!t||!t.closest(".".concat(sR))||(n==null?void 0:n.length)===0)return null;const{top:i,left:l}=_pe({clientRect:e,containerSize:o}),c=(d=t.ownerDocument)==null?void 0:d.body;return c?r.jsx(xpe,{mount:c,children:r.jsx("div",{className:"aria-live=polite fixed select-none",style:{top:i,left:l},children:r.jsx("div",{ref:s,className:"shadow-long flex overflow-hidden rounded-xl",children:n})})}):null}const bpe=3;function WYe({conversation:t,onTargetedReply:e,conversation_context:n}){var S;const{clientRect:s,isCollapsed:o,textContent:a,selection:i}=fpe(t.id),{resetSidebarHistory:l}=wfe();G();const c=!1,{dataValue:d}=Mc(i==null?void 0:i.anchorNode,"messageAuthorRole"),{node:u,dataValue:m}=Mc(i==null?void 0:i.anchorNode,"messageId"),{dataValue:f}=Mc(i==null?void 0:i.focusNode,"messageId"),p=!f||m===f,g=a==null?void 0:a.trim(),h=(S=g==null?void 0:g.length)!=null?S:0,{dataValue:x}=Mc(i==null?void 0:i.focusNode,"writingBlock");_.useCallback(C=>{},[t,c,g,l,n]);const y=_.useCallback(C=>{g!==void 0&&e&&e({targetedReply:{type:"text",label:g,createNewCompletionParams:k=>{const M=Mh(g);return B(w({},k),{promptMessage:Gd(k.promptMessage,{metadata:{targeted_reply:g}}),appendMessages:k.appendMessages==null?[M]:[...k.appendMessages,M]})},onCreateCompletion:({serverThreadId:k,currentLeafId:M})=>{U.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversationId:k,currentLeafId:M})},onCleared:({serverThreadId:k,currentLeafId:M})=>{U.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversationId:k,currentLeafId:M})}},messageId:C})},[g,e]);if(s==null||o||x||!p||d!=="assistant")return null;const b=m!=null?m:"",v=[];return h>=bpe&&v.push(r.jsx(ype,{onClick:()=>y(b)})),r.jsx(vpe,{anchorNode:u,clientRect:s,buttons:v})}function zYe({isUserTurn:t}){return W("relative flex w-full min-w-0 flex-col",!t&&sR)}function qYe({text:t,customSymbolOffsets:e}){return r.jsx(Cb,{name:"formatted_text_error",fallback:()=>r.jsx(r.Fragment,{children:t}),children:r.jsx(Spe,{text:t,customSymbolOffsets:e})})}const Spe=({text:t,customSymbolOffsets:e=[]})=>{const n=/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g;let s=0;const o=t.split(n).flatMap((a,i)=>{const l=s;if(s+=a.length,a.startsWith("```")&&a.endsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3,-3).trim()})},i);if(a.startsWith("```"))return r.jsx("pre",{className:"overflow-x-auto",children:r.jsx("code",{children:a.slice(3).trim()})},i);if(a.startsWith("`")&&a.endsWith("`"))return r.jsx("code",{children:a.slice(1,-1)},i);if(a.startsWith("`"))return r.jsx("code",{children:a.slice(1)},i);{const c=e.map(d=>RC(d)).filter(d=>l<=d.startIndex&&d.endIndex<=s);if(c.length){const d=c.map(f=>RC(f)).sort((f,p)=>f.startIndex-p.startIndex),u=[];let m=0;for(let f=0;f<d.length;f++){const p=d[f],g=p.startIndex-l,h=p.endIndex-l;g>m&&u.push(a.slice(m,g)),u.push(Cpe(p.symbol,a.slice(g,h),"".concat(i,"-multi-").concat(f))),m=h}return m<a.length&&u.push(a.slice(m)),u.filter(f=>!!f)}return a}});return r.jsx("div",{className:"whitespace-pre-wrap",children:o})};function Cpe(t,e,n=void 0){return t===LC.SystemHint?r.jsx("span",{className:"hint-pill",children:e},n):t===LC.EcosystemMention?r.jsx("span",{className:"ecosystem-mention",children:e},n):null}function wpe({scriptSrc:t}){const e=G();return r.jsx("script",{nonce:Nn(e).cspScriptNonce,suppressHydrationWarning:!0,children:t})}let y5=!1;function YYe(t,e,n){_.useEffect(()=>{var s;!t||e||y5||n&&((s=Ed())==null||s.receivedFirstToken(),y5=!0)},[t,e,n])}function ZYe({role:t,children:e}){const n=vn(un);if(!n)return e;const s=t===Ze.User&&n?"py-4":void 0;return r.jsx("div",{className:W(s),children:e})}const kpe=fH("(width <= 500px)",()=>!1);function Mpe(){return ue(kpe)}function oR(){const t=vn(un);return Mpe()&&t}const Hy=j(()=>I(()=>import("./cli58vk9v08cn6jk.js"),__vite__mapDeps([260,1,261,29,30,262,105,106,263,264,265,252,122,253,266,99,267,112,114,115,268,123,124,269,270])).then(t=>t.CanvasMessageAttachment)),Tpe=j(()=>I(()=>import("./cli58vk9v08cn6jk.js"),__vite__mapDeps([260,1,261,29,30,262,105,106,263,264,265,252,122,253,266,99,267,112,114,115,268,123,124,269,270])).then(t=>t.CanvasMessageAttachmentWrapper));var mo=(t=>(t.INFERRING="inferring",t.PENDING="pending",t.SENT="sent",t))(mo||{}),mm=(t=>(t.MODEL="model",t.SYSTEM_HINT_CANVAS="system_hint_canvas",t.SYSTEM_HINT_CANVAS_APPS="system_hint_canvas_apps",t.USER_CREATED_COMPOSER="user_created_composer",t.MESSAGE_CODE_SNIPPET="message_code_snippet",t.MESSAGE_WRITING_BLOCK="message_writing_block",t.MESSAGE="message",t.TASK_RESULT="task_result",t.REMIX_OF_SHARED_CANVAS="remix_of_shared_canvas",t.HIVE="hive",t))(mm||{});const tr=-1;var Us=(t=>(t.CREATING="creating",t.REWRITING="rewriting",t.COMMENTING="commenting",t.UPDATING="updating",t.COMPLETE="complete",t.ATTACHED_PENDING="attached_pending",t.ATTACHED_SENT="attached_sent",t))(Us||{});const KYe=t=>(t==null?void 0:t.status)!=="complete"&&(t==null?void 0:t.status)!=="attached_pending"&&(t==null?void 0:t.status)!=="attached_sent",QYe=t=>(t==null?void 0:t.status)==="rewriting",JYe=t=>(t==null?void 0:t.status)==="creating",XYe=t=>(t==null?void 0:t.status)==="attached_pending"||(t==null?void 0:t.status)==="attached_sent",eZe=t=>(t==null?void 0:t.status)==="attached_pending";var lr=(t=>(t.DOCUMENT="document",t.CODE_BASH="code/bash",t.CODE_ZSH="code/zsh",t.CODE_JAVASCRIPT="code/javascript",t.CODE_TYPESCRIPT="code/typescript",t.CODE_HTML="code/html",t.CODE_CSS="code/css",t.CODE_PYTHON="code/python",t.CODE_JSON="code/json",t.CODE_SQL="code/sql",t.CODE_GO="code/go",t.CODE_YAML="code/yaml",t.CODE_JAVA="code/java",t.CODE_RUST="code/rust",t.CODE_CPP="code/cpp",t.CODE_SWIFT="code/swift",t.CODE_PHP="code/php",t.CODE_XML="code/xml",t.CODE_RUBY="code/ruby",t.CODE_HASKELL="code/haskell",t.CODE_KOTLIN="code/kotlin",t.CODE_CSHARP="code/csharp",t.CODE_C="code/c",t.CODE_OBJECTIVEC="code/objectivec",t.CODE_R="code/r",t.CODE_LUA="code/lua",t.CODE_DART="code/dart",t.CODE_SCALA="code/scala",t.CODE_PERL="code/perl",t.CODE_COMMONLISP="code/commonlisp",t.CODE_CLOJURE="code/clojure",t.CODE_OCAML="code/ocaml",t.CODE_POWERSHELL="code/powershell",t.CODE_VERILOG="code/verilog",t.CODE_DOCKERFILE="code/dockerfile",t.CODE_VUE="code/vue",t.CODE_REACT="code/react",t.CODE_OTHER="code/other",t.LOADING="loading",t))(lr||{});function kg(t){return t.startsWith("code/")}function xl(t){const e=Hp(t,Object.values(lr),null);if(e)return e;if(t==="webview")return"code/html";if(t.startsWith("code"))switch(t){case"code/js":case"code/jsx":return"code/javascript";case"code/ts":case"code/tsx":return"code/typescript";default:return"code/other"}return"document"}var Fn=(t=>(t.CREATE="create",t.REWRITE="rewrite",t.EDIT="edit",t.ADD_COMMENT="add_comment",t.REMOVE_COMMENT="remove_comment",t))(Fn||{}),aR=(t=>(t.ACCEPT="accept",t.DISMISS="dismiss",t))(aR||{}),Wy=(t=>(t.ACCEPT_INITIATED="accept_initiated",t.DISMISSED="dismissed",t.PENDING="pending",t))(Wy||{}),Epe=(t=>(t.ADDED="added",t.REMOVED="removed",t))(Epe||{}),Ape=(t=>(t.ACCEPT_COMMENT="accept_comment",t.ASK_CHATGPT="ask_chatgpt",t.ACCELERATOR="accelerator",t.CONSOLE="console",t.FULL_SCREEN_SUBMIT="full_screen_submit",t.HIVE_SPEAKER_EDIT="hive_speaker_edit",t))(Ape||{}),rR=(t=>(t.PUBLIC="public",t.PRIVATE="private",t.WORKSPACE="workspace",t))(rR||{});const Ipe=t=>Hp(t,Object.values(rR),void 0),jpe=j(()=>I(()=>import("./cun3s29ggxbwe4ui.js"),__vite__mapDeps([271,1])),{loading:t=>L(t)}),Ppe=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)});function Tc(t,e){return t===lr.DOCUMENT?r.jsx(Ppe,{className:W("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):t&&kg(t)?r.jsx(jpe,{className:W("icon",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):null}const Npe=({textdocId:t,clientThreadId:e})=>{const n=Ao(m=>{var f;return(f=m==null?void 0:m.resolveTempTextdocId[t])!=null?f:t}),s=f1(n),o=rS(n),a=Wm(),i=Ao(m=>{const f=m==null?void 0:m.lastCanvasAssistantMessageById;return f==null||n==null?!0:f[n]==null});if(!s)return null;const l=()=>{xi(n)},c=()=>{dl({type:cl.Textdoc,textdocId:n,shouldRunCodeOnOpen:!0})},{title:d,type:u}=s;return r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(Hy,{textdocId:n,clientThreadId:e,name:d,tag:u,icon:Tc(u,!1),iconSelected:Tc(u,!0),isCanvasOpen:a,isInlinePreview:i,isFocused:o,isUserMessage:!0,onClick:l,onPreview:c})})},tZe=({messages:t,clientThreadId:e})=>{var o,a;const[n]=t,s=(o=n==null?void 0:n.metadata)==null?void 0:o.canvas;return!s||s.user_message_type!=null?null:r.jsx(r.Fragment,{children:(a=s.user_created_textdocs)==null?void 0:a.map(({user_created_temp_textdoc_id:i})=>r.jsx(Npe,{textdocId:i,clientThreadId:e},i))})};function nZe(t){const e=Xn(t);return ta(n=>hl.getTaskIdsByConversationId(e,n).map(a=>hl.getTask(a,n)).filter(a=>a!==void 0).some(a=>a.status===Ms.RUNNING||a.status===Ms.CREATED))}function sZe(t){var e,n;return t&&(n=(e=t.metadata)==null?void 0:e.b1de6e2_rm)!=null?n:!1}function Rpe(t,e){return me.findNode(t,({message:n})=>{var s,o;return((s=n.metadata)==null?void 0:s.b1de6e2_rm)===!0&&((o=n.metadata)==null?void 0:o.async_task_id)===e})!=null}function Lpe(t,e){var s;let n=me.getCurrentNode(t);return n.message.author.role==="developer"&&(n=me.getNode(t,n.parentId)),e!=null&&(n.message.id===e||((s=n.message.metadata)==null?void 0:s.parent_id)===e)}function Ope(t,e){const n=me.getCurrentNode(t);return e!=null&&n.message.id===e}const Dpe=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),Fpe=j(()=>I(()=>import("./mqkppnsks40c5l5b.js").then(t=>t._),__vite__mapDeps([272,1])),{loading:t=>L(t)}),Bpe=j(()=>I(()=>import("./lbr5dcyofn0xux3u.js").then(t=>t._),__vite__mapDeps([273,1])),{loading:t=>L(t)}),Upe=j(()=>I(()=>import("./jqab1cg1m48dccx8.js").then(t=>t._),__vite__mapDeps([23,1])),{loading:t=>L(t)}),Vpe=j(()=>I(()=>import("./egemo5clxk1flxmw.js").then(t=>t._),__vite__mapDeps([274,1])),{loading:t=>L(t)}),Gpe=j(()=>I(()=>import("./htbwawyw7ysxilu7.js").then(t=>t._),__vite__mapDeps([275,1])),{loading:t=>L(t)}),$pe=j(()=>I(()=>import("./nvaqdt3y30npjcvs.js").then(t=>t._),__vite__mapDeps([276,1])),{loading:t=>L(t)}),Hpe=j(()=>I(()=>import("./fdkwc23ton7ihjd6.js").then(t=>t._),__vite__mapDeps([277,1])),{loading:t=>L(t)}),Wpe=j(()=>I(()=>import("./igq4g5h0kvd74hab.js").then(t=>t._),__vite__mapDeps([24,1])),{loading:t=>L(t)}),zpe=j(()=>I(()=>import("./jwwofwbvdtftvupg.js").then(t=>t._),__vite__mapDeps([278,1])),{loading:t=>L(t)}),qpe=j(()=>I(()=>import("./gmvm3a44s5px1mmy.js").then(t=>t._),__vite__mapDeps([279,1])),{loading:t=>L(t)}),Ype=j(()=>I(()=>import("./nybp4ord8gyv67lt.js").then(t=>t._),__vite__mapDeps([280,1])),{loading:t=>L(t)}),Zpe=j(()=>I(()=>import("./kpucc6kjx38gmgn0.js").then(t=>t._),__vite__mapDeps([281,1])),{loading:t=>L(t)}),Kpe=j(()=>I(()=>import("./ca33yvtckkoksjrq.js").then(t=>t._),__vite__mapDeps([282,1])),{loading:t=>L(t)}),Qpe=j(()=>I(()=>import("./hszplc0bkj6ysztt.js").then(t=>t._),__vite__mapDeps([283,1])),{loading:t=>L(t)}),Jpe=j(()=>I(()=>import("./jj35k2l0yxs98vlp.js").then(t=>t._),__vite__mapDeps([284,1])),{loading:t=>L(t)}),Xpe=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),ege=j(()=>I(()=>import("./g7blak97rvihtacv.js").then(t=>t._),__vite__mapDeps([285,1])),{loading:t=>L(t)}),tge=j(()=>I(()=>import("./kt3nk4bhi2101czn.js").then(t=>t._),__vite__mapDeps([26,1])),{loading:t=>L(t)}),nge=j(()=>I(()=>import("./d3y46a2mpr2sbz7s.js").then(t=>t._),__vite__mapDeps([27,1])),{loading:t=>L(t)}),sge=j(()=>I(()=>import("./eksnz7unqn6y0zbq.js").then(t=>t._),__vite__mapDeps([286,1])),{loading:t=>L(t)}),oge=j(()=>I(()=>import("./oz2w8uv2a0ics46w.js").then(t=>t._),__vite__mapDeps([287,1])),{loading:t=>L(t)}),age=j(()=>I(()=>import("./du2nevxu1vmhk9y6.js").then(t=>t._),__vite__mapDeps([288,1])),{loading:t=>L(t)}),rge=j(()=>I(()=>import("./jl3h9zo6ij9nwubd.js").then(t=>t._),__vite__mapDeps([289,1])),{loading:t=>L(t)}),ige=j(()=>I(()=>import("./d9j8u3rncvh4iedh.js").then(t=>t._),__vite__mapDeps([290,1])),{loading:t=>L(t)}),lge=j(()=>I(()=>import("./ivu8omwsepspweze.js").then(t=>t._),__vite__mapDeps([291,1])),{loading:t=>L(t)}),cge=j(()=>I(()=>import("./eyp3kz606u6ff1xy.js").then(t=>t._),__vite__mapDeps([292,1])),{loading:t=>L(t)}),dge=j(()=>I(()=>import("./myvdm65kegx88luy.js").then(t=>t._),__vite__mapDeps([293,1])),{loading:t=>L(t)}),uge=j(()=>I(()=>import("./pdnyr73t8ws12mes.js").then(t=>t._),__vite__mapDeps([294,1])),{loading:t=>L(t)}),v5={[window.location.origin+"/c/"]:"Canvas","https://chatgpt-staging.com/c/":"Canvas","https://docs.google.com/document":"Google Docs","https://docs.google.com/presentation":"Google Slides","https://docs.google.com/spreadsheets":"Google Sheets","https://drive.google.com/":"Google Drive","https://mail.google.com/mail/":"Gmail","https://calendar.google.com/":"Google Calendar","https://www.google.com/calendar":"Google Calendar","https://github.com/":"GitHub","https://linear.app/":"Linear","https://app.intercom.com/":"Intercom","https://www.notion.so/":"Notion","https://notion.so/":"Notion","https://canva.com/":"Canva","https://www.canva.com/":"Canva","https://dropbox.com/":"Dropbox","https://www.dropbox.com/":"Dropbox","https://box.com/":"Box","https://app.box.com/":"Box","https://outlook.office.com/":"Outlook","https://outlook.live.com/":"Outlook","https://outlook.office365.com/":"Outlook","https://teams.microsoft.com/":"Teams","mailto:":"Google Contacts","https://app.hubspot.com/":"Hubspot","https://gitlab.com/":"GitLab","https://desk.zoho.":"Zoho Desk"},b5={".aha.io/":"Aha!",".asana.com/":"Asana","dev.azure.com/":"Azure DevOps",".clickup.com/":"ClickUp","gitlab.com/":"GitLab",".helpscout.net/":"Help Scout",".teamwork.com/":"Teamwork",".zendesk.com/":"Zendesk"},mge=/^(https:\/\/)([a-zA-Z0-9-]+\.)+slack\.com(\/.*)?$/,fge=/^https:\/\/outlook\.(office|live)\.com/,pge=/^https:\/\/[^\s]+?\.sharepoint\.com\/[^\s]*/;function DS(t){if(t){if(mge.test(t))return"Slack";if(fge.test(t))return"Outlook";if(pge.test(t))return"SharePoint";{const e=Object.keys(v5).find(s=>t.startsWith(s));if(e)return v5[e];const n=Object.keys(b5).find(s=>t.includes(s));return n?b5[n]:void 0}}}function FS(t){switch(t){case"Google Contacts":return ege;case"Google Docs":return Upe;case"Google Slides":return Fpe;case"Google Sheets":return Bpe;case"Google Drive":return Xpe;case"Gmail":return nge;case"Google Calendar":return tge;case"GitHub":return oge;case"Slack":return Hpe;case"Canvas":return Dpe;case"SharePoint":return Wpe;case"Linear":return Zpe;case"Dropbox":return age;case"Box":return lge;case"Intercom":return Kpe;case"Notion":return qpe;case"Canva":return ige;case"Outlook":return zpe;case"Teams":return Ype;case"Hubspot":return Qpe;case"Aha!":return uge;case"Asana":return dge;case"Azure DevOps":return cge;case"ClickUp":return rge;case"GitLab":return sge;case"Help Scout":return Jpe;case"Teamwork":return $pe;case"Zendesk":return Gpe;case"Zoho Desk":return Vpe;default:return null}}function Ai(t){const e=DS(t);if(!e)return null;const n=FS(e);return n?{type:e,Icon:n}:null}function oZe(t){var e;{const n=(e=t.extra)==null?void 0:e.cloud_doc_url;if(!n)return;const s=DS(n);if(!s)return;const o=t.name;return{url:n,type:s,title:hge(s)?_ge(o):o}}}const gge=["Google Docs","Google Slides","Google Sheets"];function hge(t){return gge.includes(t)}function _ge(t){const e=t.lastIndexOf(".");return e!==-1?t.slice(0,e):t}function aZe({citationMetadata:t,compact:e}){if(!t)return null;const n=FS(t.type);return n?e?r.jsx("a",{href:h_(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-clip rounded-lg border border-gray-200 px-[16px] py-2",children:[r.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title?t.title:h_(t.url)})]})}):r.jsx("a",{href:h_(t.url),target:"_blank",rel:"noreferrer",children:r.jsxs("div",{className:"flex flex-col gap-[2px] overflow-clip rounded-lg border border-gray-200 px-[16px] py-[12px]",children:[r.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[r.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:t.type}),r.jsx("p",{className:"text-token-text-secondary text-xs leading-normal",children:t.type})]}),r.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:t.title})]})}):null}const xge=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)});function rZe({hint:t}){var n;if(!t)return null;const e=Ai((n=t.url)!=null?n:"");return r.jsxs("div",{className:"text-token-text-tertiary mb-2 flex flex-row items-center justify-end",children:[r.jsx(xge,{className:"icon me-1.5"}),r.jsx("span",{className:"shrink-0",children:r.jsx(P,{id:"Y+ZBkg",defaultMessage:"Referring to {fileName}",values:{fileName:r.jsxs(rh,{className:"text-token-text-secondary font-semibold hover:underline",href:t.url,underline:!1,openNewTab:!0,children:[e&&r.jsx(e.Icon,{className:"icon me-1.5 inline"}),t.name]})}})})]})}const yge=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)}),iZe=t=>{"use forget";const e=H.c(22),{children:n,collapsedHeight:s}=t,[o,a]=_.useState(!1),[i,l]=_.useState(null),c=_.useRef(null);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{c.current&&l(c.current.scrollHeight)},e[0]=d):d=e[0];let u;e[1]!==n||e[2]!==o?(u=[n,o],e[1]=n,e[2]=o,e[3]=u):u=e[3],_.useEffect(d,u);const m=o&&i?i:"".concat(s,"rem");let f;e[4]!==m?(f={maxHeight:m},e[4]=m,e[5]=f):f=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("hr",{className:W("absolute start-0 end-0 bottom-0","hires:[border-inline-width:0.5px] [border-inline-width:1px] border-[var(--theme-user-msg-text)] opacity-20")}),e[6]=p):p=e[6];let g;e[7]!==n||e[8]!==f?(g=r.jsxs("div",{id:"expandable-content",ref:c,className:"relative overflow-hidden pb-3",style:f,children:[n,p]}),e[7]=n,e[8]=f,e[9]=g):g=e[9];let h;e[10]===Symbol.for("react.memo_cache_sentinel")?(h=()=>a(vge),e[10]=h):h=e[10];const x=o?S5.showLess.defaultMessage:S5.showMore.defaultMessage,y=o&&"rotate-180";let b;e[11]!==y?(b=W("self-center text-[var(--theme-user-msg-text)] group-hover:scale-110",y),e[11]=y,e[12]=b):b=e[12];let v;e[13]!==b?(v=r.jsx(yge,{className:b}),e[13]=b,e[14]=v):v=e[14];let S;e[15]!==o||e[16]!==v||e[17]!==x?(S=r.jsx("button",{onClick:h,className:"group -mb-3 flex w-full cursor-pointer flex-col items-stretch pt-2 pb-2.5 select-none","aria-expanded":o,"aria-controls":"expandable-content","aria-label":x,children:v}),e[15]=o,e[16]=v,e[17]=x,e[18]=S):S=e[18];let C;return e[19]!==S||e[20]!==g?(C=r.jsxs("div",{className:"relative",children:[g,S]}),e[19]=S,e[20]=g,e[21]=C):C=e[21],C},S5=be({showLess:{id:"showLess",defaultMessage:"Show Less"},showMore:{id:"showMore",defaultMessage:"Show More"}});function vge(t){return!t}const bge={highlightedAttributions:new Set},C5=8,zy=Nt(()=>bge),w5={debugMode:!1,viewModelPredictedFallback:!1,disableSegmentReplacement:!1,useSigmoid:!0,influenceTemperature:.2,probThreshold:.45,probBaseline:.02},BS=Nt()(sA(()=>w({},w5),{name:"search.attributions-settings",version:C5,migrate:(t,e)=>e!==C5?w5:t}));function iR(t,e){return"".concat(t,"-").concat(e)}const k5={setHighlight:(t,e)=>{if(t==null)return;if(e==null||e.length===0)return k5.clearHighlights();Array.isArray(e)||(e=[e]);const n=new Set;for(const s of e)n.add(iR(t,s));return zy.setState(()=>({highlightedAttributions:n}))},setHighlightBySource:(t,e)=>{var s;let n;"attribution_segments"in e&&(n=(s=e.attribution_segments)!=null?s:void 0),k5.setHighlight(t,n)},clearHighlights:()=>zy.setState({highlightedAttributions:new Set})},lZe=()=>BS(t=>t.viewModelPredictedFallback),cZe=()=>BS(t=>t.debugMode),dZe=(t,e)=>zy(n=>t==null?!1:n.highlightedAttributions.has(iR(t,e))),uZe=()=>BS(t=>t.disableSegmentReplacement),mZe=_.createContext(void 0);function fZe(){return!1}const pZe=t=>Ve(t,"453021389").get("enable-block-animations",!1),di="canmore";var qn=(t=>(t.CreateTextdoc="".concat(di,".create_textdoc"),t.UpdateTextdoc="".concat(di,".update_textdoc"),t.CommentTextdoc="".concat(di,".comment_textdoc"),t))(qn||{});function lR(t){return t===qn.CreateTextdoc||t===qn.UpdateTextdoc||t===qn.CommentTextdoc}var St=(t=>(t[t.STREAMING=0]="STREAMING",t[t.WAITING=1]="WAITING",t[t.COMPLETE=2]="COMPLETE",t[t.FAILED=3]="FAILED",t[t.CANCELED=4]="CANCELED",t[t.REDACTED=5]="REDACTED",t))(St||{});function cR(t){var e;return t.author.role===Ze.Assistant&&((e=t.recipient)==null?void 0:e.startsWith(oo.CANMORE))===!0}function dR(t){var e;return t.author.role===Ze.Tool&&((e=t.author.name)==null?void 0:e.startsWith(di))===!0}function uR(t,e){const n=[];let s=0,o=0;for(const a of e)n[o]=s,s+=a.length,o+=1;return n[o]=s,t.map(a=>{const{start:i,end:l}=a;return{start:n[i],end:n[l]}})}function Sge(t,e){const n=[];let s=0,o=0;for(const a of e)n[s]=o,a.length===2?(n[s+1]=o,s+=2):s+=1,o+=1;return n[s]=o,t.map(a=>{const{start:i,end:l}=a;return{start:n[i],end:n[l]}})}function qy(t,e){const n=t.map(({content:a,id:i,start:l,end:c})=>({id:i,at:{start:l,end:c},content:a})),s=n.map(a=>a.at),o=uR(s,e);return n.map((a,i)=>B(w({},a),{at:o[i]}))}function gZe(t,e){const n=t.map(a=>a.at),s=Sge(n,e);return t.map((a,i)=>B(w({},a),{at:s[i]})).map(({content:a,id:i,at:l})=>({id:i,start:l.start,end:l.end,content:a}))}const Cge=(t,e)=>{const n=uR(e,t),s=[];for(let a=0;a<n.length;a++){const{start:i}=n[a];let l=0;const c=n.slice(0,a).entries();for(const[d,u]of c)if(i>u.start||i>u.end){const m=u.end-u.start,f=e[d].content.length;l+=f-m}s.push(l)}const o=[];for(let a=0;a<n.length;a++){const{content:i}=e[a],l=n[a],{start:c}=l,d=s[a],u={start:c+d,end:c+d+i.length};o.push({id:"edit-".concat(a),content:i,positionBefore:l,positionAfter:u})}return o},wge=(t,e)=>pe.safeGet("/textdoc/{textdoc_id}/diff/{version}",{parameters:{path:{textdoc_id:t,version:e}}});function kge(t,e){const n=t.filter(s=>s.op_type==="edit");return Cge(e,n)}const Mge=async(t,e)=>{if(e===1)return null;const{content_before:n,content_after:s,comments_before:o,comments_after:a,operations:i}=await wge(t,e!=null?e:-1);return{edits:kge(i,n),contentBefore:n,contentAfter:s,commentsBefore:qy(o,n),commentsAfter:qy(a,s)}},mR=(t,e)=>io({queryKey:[t,e,"edit"],enabled:e!=null,gcTime:1e3*60*5,queryFn:()=>Mge(t,e)}),US=()=>({lastFlushedAt:null,lastTriggeredAt:null}),VS=Nt(Cn(()=>({userEdits:{},timestamps:{}}))),{setState:E1}=VS,hZe=t=>VS(({timestamps:e})=>{var n,s,o,a;return((s=(n=e[t])==null?void 0:n.lastTriggeredAt)!=null?s:0)>((a=(o=e[t])==null?void 0:o.lastFlushedAt)!=null?a:0)}),_Ze=t=>{E1(e=>{var n,s;(s=(n=e.timestamps)[t])!=null||(n[t]=US()),e.timestamps[t].lastTriggeredAt=Date.now()})},xZe=({textdocId:t,basedOnVersionInt:e,content:n,comments:s})=>{E1(o=>{var a,i,l,c;(i=(a=o.timestamps)[t])!=null||(a[t]=US()),o.timestamps[t].lastFlushedAt=Date.now(),(c=(l=o.userEdits)[t])!=null||(l[t]=[]),o.userEdits[t].push({content:n,basedOnVersionInt:e,nextVersionInt:null,isPending:!0,comments:s})})},yZe=({textdocId:t,basedOnVersionInt:e,newVersion:n})=>{E1(s=>{var o,a;(a=(o=s.userEdits)[t])!=null||(o[t]=[]);for(const i of s.userEdits[t])if(i.basedOnVersionInt===e){i.isPending=!1,i.nextVersionInt=n;break}})},Tge=t=>{E1(e=>{for(const{textdocId:n,versionInt:s}of t){const o=e.userEdits[n];o&&(e.userEdits[n]=o.filter(a=>a.basedOnVersionInt>(s!=null?s:tr)),o.length===0&&(e.timestamps[n]=US()))}})},Ege=Rl(({userEdits:t})=>t),Age=Rl(t=>{const e=new Map;for(const[n,s]of Object.entries(t)){const o=Wo(s);if(!o)continue;const{content:a,comments:i,nextVersionInt:l,basedOnVersionInt:c}=o;e.set(n,{textdocId:n,comments:i,content:a,versionInt:l!=null?l:c})}return e}),Ige=()=>VS(t=>Age(Ege(t))),fR=Nt(()=>({optimisticRestore:null})),{setState:Mp,getState:jge}=fR;function Pge(t){Mp(e=>{var n;if(e.optimisticRestore){for(const{textdocId:s,versionInt:o}of t)if(e.optimisticRestore.textdocId===s&&e.optimisticRestore.versionInt!==-1&&((n=e.optimisticRestore.versionInt)!=null?n:tr)<=(o!=null?o:tr))return{optimisticRestore:null}}return e})}function pR(){return fR(t=>t.optimisticRestore)}function vZe(t,e,n){const s=xt(),{mutateAsync:o}=Bt({mutationKey:["canvas","textdoc","persist"],mutationFn:Nge,onSuccess:()=>{t&&s.invalidateQueries({queryKey:[t,"textdocs"]})}}),a=pR(),i=_.useCallback(async()=>{if(!e||!n||e.versionInt==null||n.versionInt==null||jge().optimisticRestore!=null)return;const{textdocId:l,versionInt:c}=e,d=n.versionInt,u=B(w({},n),{versionInt:-1});Mp(()=>({optimisticRestore:u})),lP(l);try{const m=await o({textdocId:l,versionInt:c,restoreFromVersionInt:d});Mp(f=>({optimisticRestore:f.optimisticRestore&&B(w({},f.optimisticRestore),{versionInt:m})}))}catch(m){Mp(()=>({optimisticRestore:null})),Mae(l,{version:d})}},[e,n,o]);return{optimisticRestoredTextdocVersion:a,restoreHistoricalTextdocVersion:i}}async function Nge({textdocId:t,versionInt:e,restoreFromVersionInt:n}){return(await pe.safePost("/textdoc/{textdoc_id}/restore",{parameters:{path:{textdoc_id:t}},requestBody:{version:e,restore_from_version:n}})).version}const Rge=async({lastVersion:t,textdocId:e,commentId:n,reason:s})=>(await pe.safeDelete("/textdoc/{textdoc_id}/{version}/comment/{comment_id}",{parameters:{query:{reason:s},path:{textdoc_id:e,version:String(t),comment_id:n}}})).version,Yy=Nt(()=>({persistingOp:null,ops:[]})),{setState:Tp,getState:Lge}=Yy,Oge=()=>{const t=Yy(({ops:n})=>n),e=Yy(({persistingOp:n})=>n);return _.useMemo(()=>[...t,e].filter(Ob),[t,e])},Dge=t=>{Tp(e=>{let n=e.ops;for(const{textdocId:s,versionInt:o}of t)n=n.filter(a=>{var i;return a.textdocId!==s||((i=a.versionInt)!=null?i:tr)>(o!=null?o:tr)});return{ops:n}})},bZe=t=>_.useCallback(async(e,n)=>{const s=!!Lge().persistingOp,o=t==null?void 0:t.versionInt,a=t==null?void 0:t.textdocId;if(s||o==null||a==null)return!1;const i={kind:Fn.REMOVE_COMMENT,textdocId:a,author:{role:Ze.User},versionInt:o,createdAt:Date.now()/1e3,commentId:e,reason:n};Tp(({ops:l})=>({ops:l,isPersisting:!0,persistingOp:i}));try{const l=await Rge({lastVersion:o,textdocId:a,commentId:e,reason:n});return Tp(({ops:c})=>({ops:[...c,B(w({},i),{versionInt:l})],isPersisting:!1,persistingOp:null})),l}catch(l){return Tp(({ops:c})=>({ops:c,isPersisting:!1,persistingOp:null})),!1}},[t]),GS=t=>xe(t,"2928249761");function Fge(t){var n,s;const e=(s=(n=t.metadata)==null?void 0:n.open_in_canvas_view)==null?void 0:s.id;return e!=null?e:null}const Bge=async t=>await pe.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:t}}}).catch(e=>(Ll.logError("Failed to fetch persisted textdocs",e,{clientThreadId:t}),[])),Uge=async t=>{const e=await Bge(t),n=new Map(e.map(a=>[a.id,a])),s=[];for(const{id:a,content:i,version:l,textdoc_type:c,title:d,comments:u,metadata:m}of e)s.push({textdocId:a,messageId:null,type:xl(c),comments:qy(u,i),status:Us.COMPLETE,title:d,content:i,versionInt:l,createdAt:0,metadata:{content_references:m==null?void 0:m.content_references,hive_id:m==null?void 0:m.hive_id}});return{persistedTextdocVersionById:new Map(s.map(a=>[a.textdocId,a])),persistedTextdocVersions:s,persistedTextdocById:n}};function Vge(t){const e=G(),n=GS(e),s=xe(e,"3959994305")||n,o=Xn(t),[a,i]=Ue(t,g=>[me.isMessageTurnEnded(g),me.lastUserMessage(g)]),l=i&&!!Fge(i),c=!!o&&pt(e)&&(!s||a||!!l),{data:d,error:u,isLoading:m,isFetching:f,refetch:p}=lt({queryKey:[o,"textdocs"],enabled:c,queryFn:o?()=>Uge(o):Jv});return _.useEffect(()=>{if(!d)return;const{persistedTextdocVersions:g}=d;Dge(g),Tge(g),Pge(g)},[d]),[B(w({},d),{error:u,isEnabled:c,isLoading:m,isFetching:f}),p]}var Mg=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.READY=1]="READY",t[t.REFETCHING=2]="REFETCHING",t))(Mg||{});function gR(t){"use forget";const e=H.c(14),[n,s]=Vge(t),{error:o,persistedTextdocVersionById:a,isEnabled:i,isLoading:l,isFetching:c}=n,d=a===void 0?null:a,u=xt();let m;e[0]!==t||e[1]!==u||e[2]!==s?(m=()=>{var b,v,S,C,k;const g=me.getConversationLastTurn(ft(t)),h=(b=g==null?void 0:g.messages)!=null?b:[],x=Ml(h,$ge),y=h.some(Gge);if(x){const M=(S=(v=x.metadata)==null?void 0:v.canvas)==null?void 0:S.textdoc_id,T=(k=(C=x.metadata)==null?void 0:C.canvas)==null?void 0:k.version;M!=null&&T!=null&&u.prefetchQuery(mR(M,T))}(x||y)&&s()},e[0]=t,e[1]=u,e[2]=s,e[3]=m):m=e[3],II(m);let f;e[4]!==i||e[5]!==c||e[6]!==l||e[7]!==d?(f=0,d&&c?f=2:(!i||d&&!c&&!l)&&(f=1),e[4]=i,e[5]=c,e[6]=l,e[7]=d,e[8]=f):f=e[8];let p;return e[9]!==o||e[10]!==d||e[11]!==s||e[12]!==f?(p={status:f,fetchError:o,textdocVersionById:d,refetch:s},e[9]=o,e[10]=d,e[11]=s,e[12]=f,e[13]=p):p=e[13],p}function Gge(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.canvas)==null?void 0:n.user_created_temp_textdoc_id)!=null}function $ge(t){return dR(t)}const Hge=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),Wge=j(()=>I(()=>import("./n1njhaxkf65rrafr.js").then(t=>t._),__vite__mapDeps([296,1])),{loading:t=>L(t)}),M5=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)});function SZe({messages:t,clientThreadId:e}){var a,i,l,c;const n=t.find(d=>{var u;return((u=d.metadata)==null?void 0:u.open_in_canvas_view)!=null}),{textdocVersionById:s}=gR(e);if(n==null)return null;const o=(i=(a=n.metadata)==null?void 0:a.open_in_canvas_view)!=null&&i.id?s==null?void 0:s.get((c=(l=n.metadata)==null?void 0:l.open_in_canvas_view)==null?void 0:c.id):void 0;return o!=null?r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(M5,{className:"icon"}),o.type.startsWith("code/")?r.jsx(Wge,{className:"ms-2 inline-block"}):r.jsx(Hge,{className:"ms-2 inline-block"}),o.title]}):r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(M5,{className:"icon"}),r.jsx(P,{id:"NHZXLr",defaultMessage:"Canvas document"})]})}const CZe="n7jupd_crefs",qr="agentCitation";function zge(t){return t.type!=="invalid"&&t.cite_key!=null}function wZe(t,e){return e.forEach((n,s)=>{n.start_idx!=null&&n.end_idx!=null?(t=t.replace(Jge(n),(o,a)=>" :".concat(qr,"{").concat(sc(s,a),"}\n")),t=t.replace(Kge(n),(o,a)=>" :".concat(qr,"{").concat(sc(s,a),"}")),t=t.replace(Yge(n)," :".concat(qr,"{").concat(sc(s),"}"))):zge(n)&&(t=t.replace(Qge(n),(o,a)=>" :".concat(qr,"{").concat(sc(s,a),"}\n")),t=t.replace(Zge(n),(o,a)=>" :".concat(qr,"{").concat(sc(s,a),"}")),t=t.replace(qge(n)," :".concat(qr,"{").concat(sc(s),"}")))}),t}function kZe(){return t=>{sS(t,e=>{var n;!cae(e)||e.name!==qr||(e.data=(n=e.data)!=null?n:{},e.data.hName=qr,e.data.hProperties=B(w({},e.attributes),{nodeType:e.type}))})}}function qge(t){return new RegExp("{{".concat(t.type,":").concat(t.cite_key,"}}\\.?"))}function Yge(t){return new RegExp("".concat(t.matched_text,"\\.?"))}function Zge(t){return new RegExp("\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function Kge(t){return new RegExp("\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function Qge(t){return new RegExp("\\!\\[([^\\]]+)\\]\\(\\{\\{"+t.type+":"+t.cite_key+"\\}\\}\\)\\.?","g")}function Jge(t){return new RegExp("\\!\\[([^\\]]+)\\]\\("+t.matched_text+"\\)\\.?","g")}function sc(t,e){const n={citationIndex:t.toString()};return e&&(n.label=e),Object.entries(n).map(([s,o])=>"".concat(s,"='").concat(o,"'")).join(" ")}function Xge(t,e=[]){var s;if(e.length===0)return t;const n=e.filter(o=>{var a;return o.end_ix<=t.length&&o.citation_format_type==="tether_markdown"&&((a=o.metadata)==null?void 0:a.type)==="webpage"});for(let o=n.length-1;o>=0;o--){const a=n[o];if(((s=a.metadata)==null?void 0:s.type)!=="webpage")continue;const{start_ix:i,end_ix:l,metadata:c}=a,u=t.substring(i,l).replace(/\[(.*?)\]\((\d+)\)/g,"[$1](".concat(c==null?void 0:c.url,")"));t=t.substring(0,i)+u+t.substring(l)}return t}function ehe(t,e=[]){var a,i;if(e.length===0)return[];const n=[],s=e.filter(l=>l.end_ix<=t.length&&l.citation_format_type!=="tether_markdown"),o=pH(t);for(let l=s.length-1;l>=0;l--){const c=s[l];let d;const{start_ix:u,end_ix:m,metadata:f,invalid_reason:p}=c;if(!(f!=null&&f.type))continue;const g=o.slice(u,m).join("");switch(f.type){case"webpage":d=B(w({},f),{type:"webpage",title:(a=f.title)!=null?a:"",snippet:(i=f.text)!=null?i:null,pub_date:the(f.pub_date),matched_text:g,start_idx:u,end_idx:m,alt:null,prompt_text:null,safe_urls:[],attributions:null,refs:[]});break;case"file":d=B(w({},f),{matched_text:g,start_idx:u,end_idx:m,alt:null,prompt_text:null,safe_urls:[],refs:[]});break}p&&(d={type:"invalid",alt:p,prompt_text:null,start_idx:u,end_idx:m,matched_text:g,invalid:!0,safe_urls:[],refs:[]});let h=!1;if(n.length>0){const x=n[n.length-1];T5(x)===T5(d)&&o.slice(x.end_idx,c.start_ix).join("").trim().length===0&&(n[n.length-1].end_idx=c.end_ix,h=!0)}!h&&d&&n.push(d)}return n}function MZe(t,e=[],n=[]){const s=Xge(t,e),a=[...n.length>0?[]:ehe(s,e),...n],i=Th(a);return{text:s,contentReferences:i}}function T5(t){switch(t.type){case"file":return t.id;case"webpage":return t.url;case"invalid":return t.alt}}function the(t){return t==null?null:new Date(t).getTime()/1e3}function TZe(t){return t.startsWith("file_")||t.startsWith("file-")}class nhe{constructor(){ne(this,"loggedEvents",new Set)}logEvent(e,n,s){if(!this.loggedEvents.has(e)){const o=s!=null?s:window.performance.now();U.logEvent(e,w({timeMs:o},n)),this.loggedEvents.add(e)}}}const she=new nhe,ohe=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)});function EZe({messages:t,clientThreadId:e}){var l,c,d;const[n,s]=_.useState(),o=J(),a=Xn(e);let i=null;for(const u of t)if(((d=(c=(l=u.metadata)==null?void 0:l.dalle)==null?void 0:c.from_client)==null?void 0:d.operation)!=null){i=u.metadata.dalle.from_client.operation;break}return _.useEffect(()=>{if(i==null)return;const u=i.original_file_id;async function m(f){try{const p=await Eh(f,void 0,void 0,a,!1);p.status===Ah.Success?s(p.download_url):Oe.addError("Error fetching URL for file ".concat(f,": ").concat(p.status))}catch(p){}}m(u)},[a,i]),i==null?null:r.jsxs("div",{className:"text-token-text-tertiary me-5 mt-2 mb-2 flex items-center justify-end gap-1",children:[r.jsx(ohe,{className:"icon"}),n==null?r.jsx("div",{className:"h-7"}):r.jsxs(r.Fragment,{children:[r.jsx("img",{src:n,alt:o.formatMessage({id:"textMessage.editedImageAltText",defaultMessage:"Edited image"}),className:"h-7 w-auto rounded-sm opacity-50"}),i.type==="inpainting"&&r.jsx("span",{className:"ms-1 text-sm font-semibold",children:r.jsx(P,{id:"textMessage.inpaintedImage",defaultMessage:"Selection"})})]})]})}const ahe=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),rhe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)});function $S({type:t="info",children:e,isDismissible:n=!1,onDismiss:s,className:o,isElevated:a=!1,primaryAction:i,customIcon:l,iconCentered:c=!1}){const[d,u]=_.useState(!1);if(d)return null;let m;return t!=="none"&&(m=l||ahe),r.jsxs(ihe,{$type:t,className:W("flex w-full items-center gap-6 rounded-2xl border text-sm",n?"py-2.5 ps-3 pe-2 md:py-3 md:ps-4 md:pe-3":"px-3 py-2.5 md:p-4",a&&"shadow-xxs",o),children:[r.jsxs("div",{className:W("flex min-w-0 grow gap-3",c?"items-center":"items-start"),children:[m&&r.jsx(m,{className:W("icon-lg shrink-0",n&&"mt-[2px] md:mt-px",(t==="info"||t==="none")&&"text-token-text-secondary")}),r.jsx("div",{className:W("min-w-0 grow",n?"pt-[4px] md:pt-[3px]":"pt-[2px]",!m&&"ps-1"),children:e})]}),i,n&&r.jsx("button",{onClick:()=>{u(!0),s==null||s()},className:W("text-token-text-primary flex h-7 w-7 shrink-0 items-center justify-center self-start rounded-full bg-transparent",(t==="info"||t==="none")&&"hover:bg-token-main-surface-secondary",t==="danger"&&"hover:bg-token-surface-error/10",t==="warning"&&"hover:bg-orange-400/10"),children:r.jsx(rhe,{className:"icon"})})]})}var WE;const ihe=ct.div(WE||(WE=rt(["\n",""])),({$type:t})=>{switch(t){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error/5";case"warning":return"text-orange-600 bg-orange-400/5 border-orange-400/15";case"success":return"text-green-500 border-green-500 bg-green-500/10";default:return"text-token-text-primary border-token-border-default bg-token-main-surface-primary/10"}}),lhe=({disclaimerContent:t})=>{let e;switch(t){case"us_elections_policy":e=r.jsx(P,{id:"D1Mw8a",defaultMessage:"Always verify information about voting with your state or local election authority. For more information, visit <usElectionLink></usElectionLink>.",values:{usElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://canivote.org",rel:"noreferrer",className:"underline hover:no-underline",children:"canivote.org"})}});break;case"eu_elections_policy":e=r.jsx(P,{id:"Disclaimer.EUElections",defaultMessage:"Always verify information about voting with your local election authority. For more information about the EU elections, visit <euElectionLink></euElectionLink>.",values:{euElectionLink:()=>r.jsx("a",{target:"_blank",href:"https://elections.europa.eu",rel:"noreferrer",className:"underline hover:no-underline",children:"elections.europa.eu"})}});break;case"generic_elections_policy":e=r.jsx(P,{id:"Disclaimer.GenericElections",defaultMessage:"Always verify information about voting with your local election authority."});break;default:e=r.jsx(Hs,{className:"text-sm",componentOverrides:{a:n=>{const i=n,{node:s,children:o}=i,a=Me(i,["node","children"]);return r.jsx("a",B(w({},a),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:o}))}},children:t})}return r.jsx($S,{className:"w-fit self-start",children:e})};function che({message:t}){var e,n;return(n=(e=t==null?void 0:t.clientMetadata)==null?void 0:e.disclaimers)!=null&&n.length?r.jsx("div",{className:"flex flex-col gap-2",children:t.clientMetadata.disclaimers.map(s=>r.jsx(lhe,{disclaimerContent:s},s))}):null}const dhe=t=>{var e;return{type:"table",file_id:(e=t.id)!=null?e:"",title:gH(t),file_name:t.name,context_connector_info:t.context_connector_info}};function uhe(){return hH(Rs.DataAnalysisV2)}function td({percentage:t,thickness:e=1/12,className:n,sizeOverride:s,backgroundStrokeClassName:o="stroke-gray-400",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){const c=s!=null?s:120,d=c*e,u=(c-d)/2,m=2*Math.PI*u,f=m-t/100*m;return r.jsxs("svg",{width:c,height:c,viewBox:"0 0 ".concat(c," ").concat(c),className:n,children:[r.jsx("circle",{className:W("origin-[50%_50%] -rotate-90",o),strokeWidth:d,fill:"transparent",r:u,cx:c/2,cy:c/2}),r.jsx("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:d,strokeDashoffset:f,strokeDasharray:"".concat(m," ").concat(m),fill:"transparent",r:u,cx:c/2,cy:c/2,style:{strokeLinecap:"round",transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}const mhe=({size:t=40,className:e="text-blue-400"})=>r.jsx("div",{className:W("relative",e),style:{width:t,height:t},children:r.jsxs("svg",{className:"absolute h-full w-full animate-spin",viewBox:"0 0 50 50",children:[r.jsx("defs",{children:r.jsxs("linearGradient",{id:"spinner-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[r.jsx("stop",{offset:"0%",style:{stopColor:"currentColor",stopOpacity:1}}),r.jsx("stop",{offset:"100%",style:{stopColor:"currentColor",stopOpacity:0}})]})}),r.jsx("circle",{cx:"25",cy:"25",r:"20",stroke:"url(#spinner-gradient)",strokeWidth:"8",strokeLinecap:"round",fill:"none",strokeDasharray:"75,150",strokeDashoffset:"0"})]})}),fhe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),phe=j(()=>I(()=>import("./k8bvofl8txmce9x3.js").then(t=>t._),__vite__mapDeps([297,1])),{loading:t=>L(t)});function hR(n){var s=n,{contextConnectorSourceUrl:t}=s,e=Me(s,["contextConnectorSourceUrl"]);const o=J(),[a,i]=_.useState({width:0,height:0}),l=a.width/a.height,c=a.width>0&&a.height>0,d=_.useMemo(()=>{if(t!==void 0){let u=new URL(t);return u.protocol!=="https:"&&(u=void 0),u==null?void 0:u.toString()}},[t]);return _.useEffect(()=>{if(!e.src)throw new Error("ExpandableImage requires a src");const u=new Image;u.onload=()=>{i({width:u.naturalWidth,height:u.naturalHeight})},u.onerror=()=>{},u.src=e.src},[e.src]),r.jsxs(Sl,{children:[r.jsx(nb,{className:e.className,disabled:!c,children:e.children}),r.jsx(Cl,{children:r.jsxs(xm,{className:"radix-state-open:animate-show fixed inset-0 z-[100] flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(ud,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(fhe,{className:"h-5 w-5 text-gray-100"})})}),r.jsxs(dd,{onEscapeKeyDown:u=>u.stopPropagation(),className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:[r.jsx("div",{className:W("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:l},children:r.jsx("img",{src:e.src,alt:e.alt,className:"h-full w-full object-contain"})}),d&&r.jsx("div",{className:"absolute end-14 top-4",children:r.jsx(kt,{label:o.formatMessage(ghe.openOriginal),children:r.jsx("a",{href:d,target:"_blank",rel:"noreferrer",children:r.jsx(phe,{className:"icon rotate-180 text-gray-100"})})})})]})]})})]})}const ghe=be({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}}),hhe=j(()=>I(()=>import("./jn7f46w9midpij9z.js"),__vite__mapDeps([298,1])),{loading:t=>L(t)}),_he=j(()=>I(()=>import("./mo3vn6pamotgno2w.js"),__vite__mapDeps([299,1])),{loading:t=>L(t)}),xhe=j(()=>I(()=>import("./eu4d2sy2duibeikv.js").then(t=>t._),__vite__mapDeps([218,1])),{loading:t=>L(t)}),yhe=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),E5=j(()=>I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1])),{loading:t=>L(t)});function _R({fileName:t,icon:e,loadingPercentage:n,contextConnectorInfo:s,customFileDescription:o,fileNameClass:a}){var f,p;const i=J(),l=n!==void 0&&n<100,c=Ju(t),d=(f=s==null?void 0:s.syntheticExtension)!=null?f:null;function u(g){if(Al(g))return i.formatMessage(oc.fileDescImage);switch(c){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return i.formatMessage(oc.fileDescDocument);case"zip":return i.formatMessage(oc.fileDescZip);case"xls":case"xlsx":case"csv":return i.formatMessage(oc.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return i.formatMessage(oc.fileDescPresentation);default:return i.formatMessage(oc.fileDescFile)}}const m=o!=null?o:s!=null&&s.contextConnector?r.jsx(_H,{contextConnector:s.contextConnector,extension:(p=d!=null?d:c)!=null?p:null}):u(t);return r.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e!=null&&e!==!1?r.jsxs("div",{className:"border-token-border-heavy relative h-10 w-10 shrink-0 overflow-hidden rounded-lg border",children:[e,l&&r.jsx(A5,{percentage:n,blurBackground:!0})]}):r.jsx("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-lg",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:W("inset-0",xR),style:{backgroundColor:yR(t,s==null?void 0:s.contextConnector)}}),r.jsx(A5,{percentage:s?null:n})]}):r.jsx(HS,{filename:t,contextConnectorInfo:s})}),r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("div",{className:W("truncate",a!=null?a:"font-semibold"),children:xH(t,d)}),r.jsx("div",{className:"text-token-text-secondary truncate",children:m})]})]})}function A5({percentage:t,blurBackground:e=!1}){return r.jsx("div",{className:W("absolute inset-0 flex items-center justify-center text-white",e&&"bg-black/5 backdrop-blur-xs"),children:t?r.jsx(td,{percentage:t,className:"h-6 w-6"}):r.jsx(Ws,{className:"text-token-text-secondary h-6 w-6"})})}const xR="h-10 w-10 shrink-0";function HS({filename:t,contextConnectorInfo:e,className:n=xR,glyphClassName:s="h-5 w-5"}){var l,c,d;if(e)return r.jsx("div",{className:W("flex items-center justify-center rounded-lg",n),style:{backgroundColor:yR(t,e.contextConnector)},children:r.jsx(yH,{contextConnector:e.contextConnector,extension:(c=(l=e.syntheticExtension)!=null?l:Ju(t))!=null?c:null,className:W(s,"text-white")})});const o=(d=Ju(t))!=null?d:null,{BgColor:a,Icon:i}=vR(o);return r.jsx("div",{className:W("flex items-center justify-center rounded-lg",n),style:{backgroundColor:a},children:r.jsx(i,{className:W(s,"text-white")})})}function yR(t,e){var s;if(e)return Xs.gray.solid[50];const n=(s=Ju(t))!=null?s:null;return vR(n).BgColor}function vR(t){const e={purple:Xs.purple[400],blue:Xs.blue[400],green:Xs.green[400],red:Xs.red[400],gray:Xs.gray.solid[400]},n=(t!=null?t:"").toLowerCase();return n==="zip"?{BgColor:e.purple,Icon:hhe}:n==="pdf"?{BgColor:e.red,Icon:E5}:n==="xls"||n==="xlsx"||n==="csv"?{BgColor:e.green,Icon:_he}:n==="doc"||n==="docx"||n==="txt"||n==="md"||n==="markdown"?{BgColor:e.blue,Icon:yhe}:n==="png"||n==="jpg"||n==="jpeg"||n==="gif"||n==="webp"?{BgColor:e.gray,Icon:xhe}:{BgColor:e.gray,Icon:E5}}const oc=be({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}}),vhe=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])),{loading:t=>L(t)}),bhe=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),She=j(()=>I(()=>import("./eu4d2sy2duibeikv.js").then(t=>t._),__vite__mapDeps([218,1])),{loading:t=>L(t)}),Che=j(()=>I(()=>import("./edqpi59mx50h2olv.js").then(t=>t._),__vite__mapDeps([154,1])),{loading:t=>L(t)}),whe=j(()=>I(()=>import("./mbhfxri3syrb9rbq.js").then(t=>t._),__vite__mapDeps([301,1])),{loading:t=>L(t)}),khe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),Mhe=j(()=>I(()=>Promise.resolve().then(()=>V3),void 0),{loading:t=>L(t)}),The=j(()=>I(()=>import("./fg7gn2618r3hvum8.js"),__vite__mapDeps([302,1,29,30])).then(t=>t.FilePreviewModal));function ui(t){return typeof window>"u"?!1:typeof t!="string"}function Ehe({downloadLink:t}){const e=_.useCallback(()=>{var s;const n=document.createElement("a");n.href=t,n.setAttribute("download",(s=t.split("/").pop())!=null?s:"downloaded_file"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},[t]);return r.jsx("button",{onClick:e,children:r.jsx(whe,{className:"icon-sm m-1.5"})})}function I5({onClick:t,ariaLabel:e,large:n=!1,children:s}){return r.jsx("button",{onClick:t,"aria-label":e,className:W("transition-colors","flex h-4 w-4 items-center justify-center rounded-full","border-[rgba(0,0,0,0.1)] bg-black text-white","dark:border-[rgba(255,255,255,0.1)] dark:bg-white dark:text-black",n&&"h-6 w-6"),children:s})}function bR({onRemoveFileClick:t,onImageEditClick:e,useLargeImageThumbnailStyle:n,file:s,fileId:o,gizmoId:a,loadingPercentage:i,contextConnectorInfo:l,width:c="normal",alwaysShowData:d=!1,showDownloadButton:u=!1,downloadLink:m="",borderRadius:f="xl",className:p,isUserTurn:g=!1,clientThreadId:h}){const x=G(),y=J(),b=i!==void 0&&i<100,v=ui(s)?s.name:s,S=ui(s)&&(s==null?void 0:s.type.startsWith("image/"))||Al(v)&&o!=null,C=S&&r.jsx(Ihe,{file:s,fileId:o,gizmoId:a,contextConnectorInfo:l}),k=_.useContext(C1),M=(k==null?void 0:k.serverSharedThreadId)&&g,T=vH(),E=S||l==null?void 0:l.sourceUrl,A=!(l!=null&&l.sourceUrl)&&!C?v:void 0,R=ui(s)&&(s==null?void 0:s.type)==="text/plain"&&!d&&!l&&QA(x),O=_.useCallback(async()=>{if(o)if(Ju(v)==="pdf")gt(x,The,{gizmoId:a,fileId:o,fileName:v});else{const z=await Eh(o,void 0,!1,h!=null?jt(h):void 0,!1);z.status===Ah.Success?window.open(z.download_url,"_blank"):Oe.addError("Failed to get download link for file: ".concat(v))}},[v,x,o,h,a]),D=jhe({file:s,isExpandableTextFile:R}),F=!t;if(M){if(!S||T()){const z=S?r.jsx(She,{className:"icon-sm"}):r.jsx(Che,{className:"icon-sm"}),$=S?y.formatMessage(Mu.uploadedImage):y.formatMessage(Mu.uploadedFile);return r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-2",children:[z,r.jsx("span",{children:$})]})}if(S)return null}const V=r.jsxs("div",{className:W("p-2",c==="wide"?"w-80":"w-60"),children:[r.jsx(_R,{fileName:v,icon:C,loadingPercentage:i,contextConnectorInfo:l}),u&&m!==""&&r.jsx("div",{className:"absolute end-1 top-1",children:r.jsx(Ehe,{downloadLink:m})})]});return r.jsxs("div",{className:"group text-token-text-primary relative inline-block text-sm",children:[r.jsx(Rhe,{showTooltip:F,sourceUrl:E,className:W("border-token-border-default bg-primary relative overflow-hidden border",f==="xl"&&"rounded-xl",f==="2xl"&&"rounded-2xl",p),tooltipContent:A,onClick:O,children:S&&!d?r.jsxs("div",{className:W("h-14.5 w-14.5",n&&"h-36 w-36"),children:[C,b&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:r.jsx(td,{percentage:i,className:"h-6 w-6"})})]}):R&&(D!=null&&D.length)?r.jsx(Phe,{trigger:V,content:D}):V}),r.jsxs("div",{className:"absolute end-1.5 top-1.5 inline-flex gap-1",children:[n&&e&&r.jsx(I5,{onClick:z=>{z.stopPropagation(),z.preventDefault(),e()},ariaLabel:y.formatMessage(Mu.editImage),large:n,children:r.jsx(vhe,{"aria-label":"",className:"icon-sm"})}),t!=null&&r.jsx(I5,{onClick:t,ariaLabel:y.formatMessage(Mu.removeFile),large:n,children:r.jsx(Mhe,{"aria-label":"",className:"icon-sm"})})]})]})}var zE;const SR=ct.span(zE||(zE=rt(["flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white"])));function Ahe(){return r.jsx(SR,{})}function Ihe({file:t,fileId:e,gizmoId:n,contextConnectorInfo:s}){const o=J(),a=ui(t)?t.name:t,i=CR(ui(t)?t:null,a,e,n,s);return i==null?r.jsx(Ahe,{}):r.jsx(hR,{src:i,alt:o.formatMessage(Mu.userUploadedImage),contextConnectorSourceUrl:s==null?void 0:s.sourceUrl,className:"h-full w-full",children:r.jsx(SR,{style:{backgroundImage:"url(".concat(i,")")}})})}function jhe({file:t,isExpandableTextFile:e}){const[n,s]=_.useState(void 0);return _.useEffect(()=>{if(e&&ui(t)){const o=new FileReader;o.addEventListener("load",()=>{const a=o.result;s(typeof a=="string"?a:void 0)}),o.readAsText(t)}},[e,t]),n}function Phe({trigger:t,content:e}){return r.jsxs(Sl,{children:[r.jsx(nb,{className:"h-full w-full text-start",children:t}),r.jsx(Cl,{children:r.jsxs(xm,{className:"radix-state-open:animate-show fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 dark:bg-black/80",children:[r.jsx(ud,{asChild:!0,children:r.jsx("button",{className:"absolute end-4 top-4",children:r.jsx(khe,{className:"h-5 w-5 text-gray-100"})})}),r.jsx(dd,{className:"radix-state-open:animate-contentShow shadow-xl focus:outline-hidden",children:r.jsx("div",{className:W("relative max-h-[85vh] max-w-[90vw] overflow-scroll bg-white p-10 dark:bg-gray-800"),children:r.jsx(Hs,{children:e})})})]})})]})}const Qf=new Map,Nhe=100;function CR(t,e,n,s,o,a=!1){const[i,l]=_.useState(void 0),c=G(),d=Nn(c).flags,u=d==null?void 0:d.includes(Wp.NoAuthEnableFileUploads);return _.useEffect(()=>{if(!a&&o&&n!=null)j5({fileId:n,gizmoId:s,setUri:l});else if(!o&&(t!=null&&t.type.startsWith("image/")))if(u){const m=URL.createObjectURL(t);return l(m),()=>{URL.revokeObjectURL(m)}}else{const m=new FileReader;m.addEventListener("load",()=>{const f=m.result;l(typeof f=="string"?f:void 0)}),m.readAsDataURL(t)}else!a&&e&&Al(e)&&n!=null?j5({fileId:n,gizmoId:s,setUri:l}):l(void 0)},[t,e,n,s,o,a,u]),i}async function j5({fileId:t,gizmoId:e,setUri:n}){try{const s=Qf.get(t);if(s){n(s);return}const o=await Eh(t,e);o.status===Ah.Success?(Qf.size>Nhe&&Qf.clear(),Qf.set(t,o.download_url),n(o.download_url)):Oe.addError("Error fetching URL for file ".concat(t,": ").concat(o.status))}catch(s){Oe.addError(new Error("Error fetching URL for file ".concat(t,")"),{cause:s}))}}const Mu=be({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},editImage:{id:"FileTile.editImage",defaultMessage:"Edit image"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"},uploadedImage:{id:"FileTile.uploadedImage",defaultMessage:"Uploaded an image"},uploadedFile:{id:"FileTile.uploadedFile",defaultMessage:"Uploaded a file"}});function Rhe({showTooltip:t,sourceUrl:e,children:n,className:s,onClick:o,tooltipContent:a}){var d;const i=ue(Ih);if(!e&&!a)return r.jsx("div",{className:s,children:n});const l=r.jsx("a",{href:e,target:"_blank",rel:"noreferrer",onClick:o,className:"cursor-pointer",children:r.jsx("div",{className:s,children:n})});if(!t||!i)return l;const c=(d=a!=null?a:e)!=null?d:"";return r.jsx(kt,{wide:!0,interactive:!0,label:r.jsxs("a",{href:e,target:"_blank",className:"flex w-full items-center gap-2",rel:"noreferrer",children:[r.jsx("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:Lhe(c)}),e&&r.jsx(bhe,{className:"icon-sm"})]}),side:"top",children:l})}function Lhe(t){return t.split("").join("")}const Ohe=_.createContext({isEmbeddedInFocusedView:!1});function A1(){return _.useContext(Ohe).isEmbeddedInFocusedView}const Dhe="GPT-4o with scheduled tasks";function wR({featureType:t,isUserTurn:e=!1,clientThreadId:n}){const s=G(),o=ht(s,n),a=xe(s,"3612584454"),i=Fhe(),l=xe(s,"891514942"),c=ue(()=>wn(o).id),d=!Bhe({featureType:t,currentModelId:c,conversation:o});if(!(a&&i||l&&d))return null;const f=Uhe({featureType:t,unsupportedMessageReason:i?"rateLimit":"modelPicker",currentModelId:c});return r.jsx("div",{className:"flex ".concat(e?"justify-end":"justify-start"),children:f})}function Fhe(){var a;const t=G(),e=ut(t),n=(a=e==null?void 0:e.isFree())!=null?a:!1,o=Ch().some(i=>i.model_slug==="gpt-4o");return n&&o}function Bhe({featureType:t,currentModelId:e,conversation:n}){const s=ue(()=>ea(n)),o=G(),a=ut(o);if(a==null?void 0:a.isFree())return!0;{const l=s==null?void 0:s.categories.find(d=>d.defaultModel===e);return l?!!(l==null?void 0:l.supportedFeatures.includes(t)):!0}}function Uhe({featureType:t,unsupportedMessageReason:e,currentModelId:n=""}){const s=n===bH?Dhe:n,o=J();let a=null;switch(e){case"rateLimit":switch(t){case fs.ATTACHMENT:a=o.formatMessage(F0.file);break;case fs.IMAGE:a=o.formatMessage(F0.image);break;case fs.CANVAS_SUPPORTED:a=o.formatMessage(F0.canvas);break;default:return null}break;case"modelPicker":switch(t){case fs.ATTACHMENT:a=o.formatMessage(B0.file,{modelDisplayName:s});break;case fs.IMAGE:a=o.formatMessage(B0.image,{modelDisplayName:s});break;case fs.CANVAS_SUPPORTED:a=o.formatMessage(B0.canvas,{modelDisplayName:s});break;default:return null}break}return r.jsx("span",{className:"text-opacity-80 text-xs text-yellow-500",children:a})}const F0=be({canvas:{id:"featureUnsupportedWarning.canvas",defaultMessage:"Document editing temporarily unavailable"},file:{id:"featureUnsupportedWarning.file",defaultMessage:"File analysis temporarily unavailable"},image:{id:"featureUnsupportedWarning.image",defaultMessage:"Image analysis temporarily unavailable"}}),B0=be({canvas:{id:"modelPickerUnsupportedWarning.canvas",defaultMessage:"{modelDisplayName} cannot edit documents"},file:{id:"modelPickerUnsupportedWarning.file",defaultMessage:"{modelDisplayName} cannot analyze files"},image:{id:"modelPickerUnsupportedWarning.image",defaultMessage:"{modelDisplayName} cannot analyze images"}}),Vhe=j(()=>I(()=>import("./n8qbc0log2m0cne7.js").then(t=>t.A),__vite__mapDeps([303,1,29,30,117,118,304,253,37,305,306])).then(t=>t.default));var qE;const Ghe=ct.div(qE||(qE=rt(["flex gap-2 flex-wrap mt-1 max-w-[80%] justify-end"])));var YE;const $he=ct.div(YE||(YE=rt(["flex flex-col gap-2"]))),AZe=({parts:t,attachments:e,isUserTurn:n,conversation:s})=>{const o=Io(),a=uhe(),i=pr.getImageAssetPointersFromParts(t),l=new Set(i.map(p=>To(p.asset_pointer))),d=A1()||o,u=(e!=null?e:[]).filter(p=>SH(p.name)),m=(e!=null?e:[]).filter(p=>p.id==null||l.has(p.id)?!1:a?!u.includes(p):!0);return(a?(m.length>0||u.length>0)&&n:m.length>0&&n)?r.jsxs(r.Fragment,{children:[r.jsx(Ghe,{children:m.map(p=>r.jsx(bR,{file:p.name,fileId:p.id,contextConnectorInfo:CH(p.context_connector_info),width:o?"normal":"wide",alwaysShowData:!0,isUserTurn:n,clientThreadId:s.id},p.id))}),r.jsx(wR,{featureType:fs.ATTACHMENT,isUserTurn:n,clientThreadId:s.id}),a&&r.jsx($he,{className:W(!d&&!0&&"w-[80%]"),children:u.map(p=>r.jsx(Vhe,{clientThreadId:s.id,visualization:dhe(p)},p.id))})]}):null},Hhe=720*60*60*1e3;class nf extends El()(()=>{var n,s;const e=mt.getItem(Le.MessageFollowupsStoreState);return e?{disabledGlobally:(n=e.disabledGlobally)!=null?n:!1,disabledConversations:new Map((s=e.disabledConversations)!=null?s:[])}:{disabledGlobally:!1,disabledConversations:new Map}}){persistState(){const e=this.getState(),n=Date.now(),s=new Map(Array.from(e.disabledConversations.entries()).filter(([,a])=>a.disabledAt===null||n-a.disabledAt<Hhe)),o={disabledGlobally:e.disabledGlobally,disabledConversations:Array.from(s.entries())};mt.setItem(Le.MessageFollowupsStoreState,o)}setDisabledGlobally(e){this.setState({disabledGlobally:e}),this.persistState()}setDisabledConversation(e,n){this.setState(s=>{var o;return{disabledConversations:(o=s.disabledConversations)==null?void 0:o.set(e,{disabled:n,disabledAt:n?Date.now():null})}}),this.persistState()}static useDisabledGlobally(){return this.useState(e=>e.disabledGlobally)}static useIsDisabledConversation(e){return this.useState(n=>{var s,o,a;return(a=(o=(s=n.disabledConversations)==null?void 0:s.get(e))==null?void 0:o.disabled)!=null?a:!1})}static useIsEnabled(e){return this.useState(n=>{var o,a;const s=(o=n.disabledConversations)==null?void 0:o.get(e);return!((a=s==null?void 0:s.disabled)!=null?a:n.disabledGlobally)})}}function kR({systemHint:t,modelConfig:e,conversationMode:n,isTemporaryChat:s,isDeveloperMode:o,isWorkspaceTenant:a,startedWithByoMcp:i}){return Whe(t,s)&&zhe(t,e)&&qhe(t,e)&&Yhe(t,n)&&Zhe(t,o)&&Khe(t,a,i)}function Whe(t,e){return!e||t.allowInTemporaryChat===!0}function zhe(t,e){const n=e==null?void 0:e.enabledTools;return n===void 0?!0:t.requiredFeatures.every(s=>n.includes(s))}function qhe(t,e){if(t.systemHint===Ie.Think){const n=e==null?void 0:e.reasoningType;return n==null||n===OC.OFF||n===OC.AUTO}return t.requiredModels.length===0||t.requiredModels.some(n=>n===(e==null?void 0:e.id))}function Yhe(t,e){return t.requiredConversationModes.length===0||t.requiredConversationModes.some(n=>n===(e==null?void 0:e.kind))}function Zhe(t,e){return e?!0:!t.isDangerous}function Khe(t,e,n){return e?!0:!(t.category==="tool"&&(t.isDangerous&&n===!1||!t.isDangerous&&n===!0))}function I1(t,e={}){var n;return{systemHints:t.filter(s=>s!==Ie.Search),extraStreamParams:B(w({},e),{forceUseSearch:(n=e.forceUseSearch)!=null?n:t.includes(Ie.Search)?!0:void 0})}}function MR(t){"use forget";const e=H.c(14),{clientThreadId:n,conversationMode:s}=t,o=G(),a=Es(),i=_.useContext(ece),l=xt(),c=nf.useIsEnabled(n!=null?n:"");let d;e[0]!==o?(d=()=>wm(o),e[0]=o,e[1]=d):d=e[1];const u=ue(d);let m;e[2]!==o?(m=ut(o),e[2]=o,e[3]=m):m=e[3];const f=m;let p;return e[4]!==f||e[5]!==n||e[6]!==s||e[7]!==o||e[8]!==i||e[9]!==u||e[10]!==c||e[11]!==a||e[12]!==l?(p=g=>{var $,Y,Z;let{nodeId:h,sourceEvent:x,requestedModelId:y,appendMessages:b,extraStreamParams:v,isReasoningSkipped:S}=g;if(!n)throw new Error("Regeneration must have clientThreadId");const C=ft(n),k=me.getVariantIds(C,h),M=me.getParentPromptNode(C,h);if(!M)throw new Error("Regeneration must have parent prompt");const T=($=l.getQueryData(wH().queryKey))!=null?$:[],E=(k==null?void 0:k.length)===1&&(v==null?void 0:v.forceUseSearch)===void 0&&(v==null?void 0:v.forceDisableFeatures)===void 0,A=ea(ht(o,n)),N=JA(A,y),R=kH(C,h),O=(Y=M.message.metadata)==null?void 0:Y.system_hints,D=y&&O?O.filter(Q=>{var X;const q=T.find(oe=>oe.systemHint===Q);return q&&kR({systemHint:q,modelConfig:N,isTemporaryChat:a,conversationMode:s,isDeveloperMode:u,isWorkspaceTenant:(X=f==null?void 0:f.isWorkspaceAccount())!=null?X:!1,startedWithByoMcp:C==null?void 0:C.startedWithByoMcp})}):O!=null?O:[];c&&(v=B(w({},v!=null?v:{}),{enableMessageFollowups:!0}));const{systemHints:F,extraStreamParams:V}=I1(D,v);let z=F;(v==null?void 0:v.forceUseReason)!==void 0&&(v.forceUseReason?z.push(Ie.Think):z=z.filter(Qhe)),i({completionType:Xa.Variant,requestedModelId:y,sourceEvent:x,completionMetadata:{variantPurpose:E?"comparison_implicit":"none",conversationMode:s!=null?s:(Z=ft(n))==null?void 0:Z.mode,systemHints:z,searchSource:(v==null?void 0:v.forceUseSearch)===!0?Xu.CONVERSATION_REGENERATE_WITH_SEARCH:(v==null?void 0:v.forceUseSearch)===!1?Xu.CONVERSATION_REGENERATE_WITHOUT_SEARCH:void 0},parentMessageId:M.id,appendMessages:b,extraStreamParams:V,isReasoningSkipped:S,thinkingEffort:R}),S&&qe(n,Q=>{let q=h,X=Q.tree.getNodeByIdOrMessageId(q);for(;X.message.author.role!==Ze.User;)Q.tree.deleteNode(q),q=X.parentId,X=Q.tree.getNodeByIdOrMessageId(q)})},e[4]=f,e[5]=n,e[6]=s,e[7]=o,e[8]=i,e[9]=u,e[10]=c,e[11]=a,e[12]=l,e[13]=p):p=e[13],p}function Qhe(t){return t!==Ie.Think}const TR=-1,j1=0,Tg=1,Eg=2,WS=3,zS=4,qS=5,YS=6,ER=7,AR=8,P5=typeof self=="object"?self:globalThis,Jhe=(t,e)=>{const n=(o,a)=>(t.set(a,o),o),s=o=>{if(t.has(o))return t.get(o);const[a,i]=e[o];switch(a){case j1:case TR:return n(i,o);case Tg:{const l=n([],o);for(const c of i)l.push(s(c));return l}case Eg:{const l=n({},o);for(const[c,d]of i)l[s(c)]=s(d);return l}case WS:return n(new Date(i),o);case zS:{const{source:l,flags:c}=i;return n(new RegExp(l,c),o)}case qS:{const l=n(new Map,o);for(const[c,d]of i)l.set(s(c),s(d));return l}case YS:{const l=n(new Set,o);for(const c of i)l.add(s(c));return l}case ER:{const{name:l,message:c}=i;return n(new P5[l](c),o)}case AR:return n(BigInt(i),o);case"BigInt":return n(Object(BigInt(i)),o)}return n(new P5[a](i),o)};return s},N5=t=>Jhe(new Map,t)(0),ac="",{toString:Xhe}={},{keys:e1e}=Object,ou=t=>{const e=typeof t;if(e!=="object"||!t)return[j1,e];const n=Xhe.call(t).slice(8,-1);switch(n){case"Array":return[Tg,ac];case"Object":return[Eg,ac];case"Date":return[WS,ac];case"RegExp":return[zS,ac];case"Map":return[qS,ac];case"Set":return[YS,ac]}return n.includes("Array")?[Tg,n]:n.includes("Error")?[ER,n]:[Eg,n]},Jf=([t,e])=>t===j1&&(e==="function"||e==="symbol"),t1e=(t,e,n,s)=>{const o=(i,l)=>{const c=s.push(i)-1;return n.set(l,c),c},a=i=>{if(n.has(i))return n.get(i);let[l,c]=ou(i);switch(l){case j1:{let u=i;switch(c){case"bigint":l=AR,u=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);u=null;break;case"undefined":return o([TR],i)}return o([l,u],i)}case Tg:{if(c)return o([c,[...i]],i);const u=[],m=o([l,u],i);for(const f of i)u.push(a(f));return m}case Eg:{if(c)switch(c){case"BigInt":return o([c,i.toString()],i);case"Boolean":case"Number":case"String":return o([c,i.valueOf()],i)}if(e&&"toJSON"in i)return a(i.toJSON());const u=[],m=o([l,u],i);for(const f of e1e(i))(t||!Jf(ou(i[f])))&&u.push([a(f),a(i[f])]);return m}case WS:return o([l,i.toISOString()],i);case zS:{const{source:u,flags:m}=i;return o([l,{source:u,flags:m}],i)}case qS:{const u=[],m=o([l,u],i);for(const[f,p]of i)(t||!(Jf(ou(f))||Jf(ou(p))))&&u.push([a(f),a(p)]);return m}case YS:{const u=[],m=o([l,u],i);for(const f of i)(t||!Jf(ou(f)))&&u.push(a(f));return m}}const{message:d}=i;return o([l,{name:c,message:d}],i)};return a},R5=(t,{json:e,lossy:n}={})=>{const s=[];return t1e(!(e||n),!!e,new Map,s)(t),s},U0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?N5(R5(t,e)):structuredClone(t):(t,e)=>N5(R5(t,e)),IR=(function(t){if(t==null)return o1e;if(typeof t=="string")return s1e(t);if(typeof t=="object")return n1e(t);if(typeof t=="function")return ZS(t);throw new Error("Expected function, string, or array as `test`")});function n1e(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=IR(t[n]);return ZS(s);function s(...o){let a=-1;for(;++a<e.length;)if(e[a].apply(this,o))return!0;return!1}}function s1e(t){return ZS(e);function e(n){return n.tagName===t}}function ZS(t){return e;function e(n,s,o){return!!(a1e(n)&&t.call(this,n,typeof s=="number"?s:void 0,o||void 0))}}function o1e(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="element"&&"tagName"in t&&typeof t.tagName=="string")}function a1e(t){return t!==null&&typeof t=="object"&&"type"in t&&"tagName"in t}const r1e=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i1e=/^[a-zA-Z]:\\/;function l1e(t){if(typeof t!="string")throw new TypeError("Expected a `string`, got `".concat(typeof t,"`"));return i1e.test(t)?!1:r1e.test(t)}function c1e(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function IZe(t){return t.join(" ").trim()}const d1e=["http","https"],u1e=["nofollow"],m1e={};function jZe(t){const e=t||m1e,n=e.protocols||d1e,s=IR(e.test);return function(o){sS(o,"element",function(a,i,l){if(a.tagName==="a"&&typeof a.properties.href=="string"&&s(a,i,l)){const c=a.properties.href;if(l1e(c)?n.includes(c.slice(0,c.indexOf(":"))):c.startsWith("//")){const d=au(e.content,a),u=d&&!Array.isArray(d)?[d]:d,m=au(e.rel,a)||u1e,f=typeof m=="string"?c1e(m):m,p=au(e.target,a),g=au(e.properties,a);if(g&&Object.assign(a.properties,U0(g)),f.length>0&&(a.properties.rel=[...f]),p&&(a.properties.target=p),u){const h=au(e.contentProperties,a)||{};a.children.push({type:"element",tagName:"span",properties:U0(h),children:U0(u)})}}}})}}function au(t,e){return typeof t=="function"?t(e):t}const f1e=t=>{"use forget";var x;const e=H.c(19);let n,s,o,a,i;e[0]!==t?(x=t,{label:s,icon:n,as:a,isUserTurn:i}=x,o=Me(x,["label","icon","as","isUserTurn"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5]);const l=a===void 0?"div":a,c=i===void 0?!0:i,d=l,u=l==="button"&&"hover:text-token-text-primary",m=c?"mt-1 justify-end":"mt-2";let f;e[6]!==u||e[7]!==m?(f=W("text-token-text-tertiary mx-2 mb-1 flex items-start gap-1.5 text-sm font-normal focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-current",u,m),e[6]=u,e[7]=m,e[8]=f):f=e[8];let p;e[9]!==n?(p=r.jsx("span",{"aria-hidden":"true",className:"pointer-events-none",children:n}),e[9]=n,e[10]=p):p=e[10];let g;e[11]!==s?(g=r.jsx("p",{className:"line-clamp-3",children:s}),e[11]=s,e[12]=g):g=e[12];let h;return e[13]!==d||e[14]!==o||e[15]!==f||e[16]!==p||e[17]!==g?(h=r.jsxs(d,B(w({className:f},o),{children:[p,g]})),e[13]=d,e[14]=o,e[15]=f,e[16]=p,e[17]=g,e[18]=h):h=e[18],h},p1e=XA(()=>({images:new Set})),g1e=t=>Db(p1e,t);function h1e(){return g1e(t=>t.images)}function PZe({messages:t}){const e=Qse(t),n=h1e();return e.length===0?null:r.jsx("div",{className:W({"mb-2":!0,"grid grid-flow-col gap-3":e.length>1,"w-1/3":e.length===1}),children:e.filter(({contentUrl:s})=>n.has(s)).map((s,o)=>r.jsx("a",{href:s.hostPageUrl,target:"_blank",rel:"noreferrer",children:r.jsx("img",{src:s.contentUrl,alt:s.name,className:"aspect-square rounded-xl object-cover"})},o))})}const _1e="_slideUp_1kuxv_21",NZe={slideUp:_1e};function Ul({axis:t,debounce:e,initialSize:n=!0,onChange:s,target:o}){if(!o)return;let a=new AbortController,i=null,l=null,c=n;const d=new ResizeObserver(m=>{m.forEach(f=>{const{width:p,height:g}=x1e(f);let h=!1;if(t==="width"){const x=(c||i!=null)&&i!==p;i=p,x&&(h=!0)}else if(t==="height"){const x=(c||l!=null)&&l!==g;l=g,x&&(h=!0)}else if(t==="both"){const x=(c||i!=null)&&i!==p,y=(c||l!=null)&&l!==g;i=p,l=g,(x||y)&&(h=!0)}if(c=!1,h)if(!e)s({width:p,height:g,previousWidth:i,previousHeight:l},f);else{a.abort(),a=new AbortController;const x=a.signal;requestAnimationFrame(()=>{x.aborted||s({width:p,height:g,previousWidth:i,previousHeight:l},f)})}})});function u(){try{d.disconnect()}catch(m){}}return d.observe(o),u}function x1e(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function RZe(t){return e=>Ul(B(w({},t),{target:e}))}function LZe({containsImagesOrAttachments:t,isMaxWidthMessage:e=!1,children:n}){const s=_.useRef(!1);return r.jsx("div",{className:W("user-message-bubble-color relative rounded-[18px] px-4 py-1.5 data-[multiline]:py-3",t&&"rounded-se-lg",e?"w-full":"max-w-[var(--user-chat-width,70%)]"),ref:o=>Ul({axis:"height",target:o,onChange:({height:a})=>{if(o){const i=parseFloat(getComputedStyle(document.documentElement).fontSize),l=2*(s.current?12:6);s.current=a>1.5*i+l,sr(o,"data-multiline",s.current)}}}),children:n})}function y1e(){return r.jsx(Xe.div,{className:"absolute flex h-8 w-3 origin-center items-center justify-center",initial:{scale:1,opacity:1},animate:{scale:0,opacity:0},transition:{ease:"easeInOut",duration:.2},children:r.jsx("div",{className:"bg-token-text-primary h-3 w-3 rounded-full"})})}function v1e(t){return lt(b1e(t))}function b1e(t){return io({enabled:t!=null,queryKey:["imageData",t],queryFn:()=>new Promise((e,n)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=n,s.src=t})})}function Ts(t){"use forget";const e=H.c(14),{url:n,size:s,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,applySizeToImg:d,onLoad:u,onError:m}=t,f=s===void 0?16:s,p=d===void 0?!0:d;let g;e[0]!==f||e[1]!==n?(g=E1e(n,f),e[0]=f,e[1]=n,e[2]=g):g=e[2];const h=g;if(h==null)return a!=null?a:null;let x;return e[3]!==p||e[4]!==i||e[5]!==l||e[6]!==a||e[7]!==h||e[8]!==o||e[9]!==m||e[10]!==u||e[11]!==c||e[12]!==f?(x=o!=null?r.jsx(S1e,{faviconUrl:h,size:f,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:u,onError:m}):r.jsx(jR,{faviconUrl:h,size:p?f:void 0,className:i,onLoad:u,onError:m}),e[3]=p,e[4]=i,e[5]=l,e[6]=a,e[7]=h,e[8]=o,e[9]=m,e[10]=u,e[11]=c,e[12]=f,e[13]=x):x=e[13],x}function S1e(t){"use forget";const e=H.c(13),{faviconUrl:n,size:s,minSize:o,fallback:a,className:i,containerClassName:l,showLoadingAnimation:c,onLoad:d,onError:u}=t,{data:m,isLoading:f}=v1e(n),p=m&&Math.min(m.width,m.height);if(!f&&(p==null||p<o))return a!=null?a:null;let g;e[0]!==l?(g=W("relative inline-block shrink-0",l),e[0]=l,e[1]=g):g=e[1];let h;e[2]!==i||e[3]!==n||e[4]!==f||e[5]!==u||e[6]!==d||e[7]!==c||e[8]!==s?(h=f?c?r.jsx(C1e,{className:W(i,"duration-200 motion-safe:transition-opacity",!f&&"pointer-events-none opacity-0")}):r.jsx("div",{className:i}):r.jsx(jR,{faviconUrl:n,size:s,className:W(i,"duration-200 motion-safe:transition-opacity",f?"pointer-events-none opacity-0":"opacity-100"),onLoad:d,onError:u}),e[2]=i,e[3]=n,e[4]=f,e[5]=u,e[6]=d,e[7]=c,e[8]=s,e[9]=h):h=e[9];let x;return e[10]!==g||e[11]!==h?(x=r.jsx("div",{className:g,children:h}),e[10]=g,e[11]=h,e[12]=x):x=e[12],x}function jR(t){"use forget";const e=H.c(7),{faviconUrl:n,size:s,className:o,onLoad:a,onError:i}=t,l=s!=null?s:"auto",c=s!=null?s:"auto";let d;return e[0]!==o||e[1]!==n||e[2]!==i||e[3]!==a||e[4]!==l||e[5]!==c?(d=r.jsx("img",{src:n,alt:"",width:l,height:c,className:o,onLoad:a,onError:i}),e[0]=o,e[1]=n,e[2]=i,e[3]=a,e[4]=l,e[5]=c,e[6]=d):d=e[6],d}function C1e({className:t,children:e}){return r.jsx("div",{"aria-busy":!0,className:W("bg-token-bg-tertiary flex animate-pulse items-center justify-center rounded-full",t),children:e})}const w1e="http://files.openai.com",k1e="https://openai.com",M1e="https://images.openai.com";function T1e(t){const e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")return w1e;const n=e.origin;return n===M1e?k1e:n}function E1e(t,e){if(!t)return null;try{const n=T1e(t);return"https://www.google.com/s2/favicons?domain=".concat(n,"&sz=").concat(e)}catch(n){return Oe.addAction("Invalid favicon url",{error:n,url:t}),null}}const Zy={favicons:[]};function A1e(t,e){const n=new Set,s=[];for(const o of[...t,...e])n.has(o.url)||(s.push(o),n.add(o.url));return s}const I1e=t=>({entries:{},updateFromEvent:(e,n)=>t(s=>{var i,l;const o=(i=s.entries[e])!=null?i:Zy,a=B(w({},o),{favicons:A1e(o.favicons,(l=n.data.favicons)!=null?l:[])});return{entries:B(w({},s.entries),{[e]:a})}})}),L5=vb()(I1e,Cm);function j1e(t){const e=L5(s=>{var o,a;return t==null?Zy.favicons:(a=(o=s.entries[t])==null?void 0:o.favicons)!=null?a:Zy.favicons}),n=_.useCallback(({ctx:s,profiler:o})=>{if(!t||t.trim().length===0||!qo(s).checkGate("948657827",{disableExposureLog:!0}))return;(async()=>{var u,m,f;o==null||o.logTimingOnce("fetch_favicons_stream_called");const l=rg("".concat(gr,"/favicons"),{ctx:s,method:"POST",headers:w({},d1()),body:{query:t}});let c=!1,d=!1;try{for(var p=jo(l),g,h,x;g=!(h=await p.next()).done;g=!1){const y=h.value;d||(d=!0,o==null||o.logTimingOnce("fetch_favicons_stream_first_event"));const b=y;b.event==="favicons"&&(L5.getState().updateFromEvent(t,{event:"favicons",data:{favicons:(u=b.data.favicons)!=null?u:[]}}),!c&&((f=(m=b.data.favicons)==null?void 0:m.length)!=null?f:0)>0&&(c=!0,o==null||o.logTimingOnce("fetch_favicons_first_link_fetched_client")))}}catch(h){x=[h]}finally{try{g&&(h=p.return)&&await h.call(p)}finally{if(x)throw x[0]}}})().catch(()=>{})},[t]);return{favicons:e,load:n}}const P1e=_.createContext(!1);var PR=(t=>(t.Sources="sources",t.Images="images",t))(PR||{}),KS=(t=>(t.Links="links",t.Citations="citations",t.SearchResults="search_results",t))(KS||{}),V0,O5;function NR(){if(O5)return V0;O5=1;function t(e,n,s){var o=-1,a=e.length;n<0&&(n=-n>a?0:a+n),s=s>a?a:s,s<0&&(s+=a),a=n>s?0:s-n>>>0,n>>>=0;for(var i=Array(a);++o<a;)i[o]=e[o+n];return i}return V0=t,V0}var G0,D5;function N1e(){if(D5)return G0;D5=1;var t=NR(),e=a1(),n=e9(),s=Math.ceil,o=Math.max;function a(i,l,c){(c?e(i,l,c):l===void 0)?l=1:l=o(n(l),0);var d=i==null?0:i.length;if(!d||l<1)return[];for(var u=0,m=0,f=Array(s(d/l));u<d;)f[m++]=t(i,u,u+=l);return f}return G0=a,G0}var R1e=N1e();const L1e=Wn(R1e),O1e=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),D1e=j(()=>I(()=>import("./f87olchknhsp1yyk.js").then(t=>t._),__vite__mapDeps([135,1])),{loading:t=>L(t)}),F5=3;function F1e({navigation:t,trackContentReferenceEvent:e}){const[n,s]=_.useState(!1),[o,a]=_.useState(0),i=t.domains.filter(f=>f.url);_.useEffect(()=>{e("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:i.map(f=>f.url).join(",")})},[i]);const l=kl(),c=U1e(i.length,!l),d=n?L1e(i,c):[i.slice(0,F5)];function u(){return i.length<=F5?null:o===0&&!n?r.jsx($0,{onClick:()=>s(!0),className:"shrink-0 text-sm whitespace-nowrap",children:r.jsx(P,{id:"B5xwY8",defaultMessage:"More links"})}):r.jsx($0,{onClick:()=>a(o-1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o===0,children:r.jsx(P,{id:"Q0o6pZ",defaultMessage:"{icon} Previous",values:{icon:r.jsx(D1e,{className:"icon-sm -ms-1 -me-1"})}})})}function m(){return n?r.jsx($0,{onClick:()=>a(o+1),className:"shrink-0 text-sm whitespace-nowrap",disabled:o>=d.length-1,children:r.jsx(P,{id:"N4c5Xd",defaultMessage:"Next {icon}",values:{icon:r.jsx(O1e,{className:"icon-sm -ms-1 -me-1"})}})}):null}return r.jsxs("div",{className:"not-prose mb-3",children:[r.jsx(Xe.div,{initial:!1,animate:{maxHeight:n?1e3:250,opacity:1},transition:{duration:.2,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"flex transition-transform",style:{transform:"translateX(-".concat(o*100,"%)")},children:d.map((f,p)=>r.jsx("div",{className:"flex flex-[0_0_100%] shrink-0 flex-col gap-6",children:f.map((g,h)=>r.jsx(B1e,{navigationDomain:g,trackContentReferenceEvent:e,analyticsMetadata:{section_index:h}},g.url))},p))})}),r.jsx("div",{className:"mt-6 flex flex-col gap-6",children:r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-3",children:[u(),r.jsx("div",{className:"bg-token-bg-tertiary h-[1px] w-full flex-1"}),m()]})})]})}function B1e({navigationDomain:t,trackContentReferenceEvent:e,analyticsMetadata:n}){var s;return _.useEffect(()=>{e("link_action",null,"navigation",{url:t.url,title:t.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:n.section_index})},[]),r.jsxs(ao,{className:"flex flex-col hover:underline",href:t.url,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ts,{url:t.url,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"text-token-text-secondary text-xs",children:(s=t.attribution)!=null?s:t.subtitle})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-token-text-primary text-sm",children:t.title}),t.snippet&&r.jsx("div",{className:"text-token-text-secondary line-clamp-1 w-full text-sm",children:t.snippet})]})]})}function U1e(t,e){const n=e?[5,6]:[6,7,8];let s=n[0],o=-1;for(let a=0;a<n.length;a++){const i=n[a],l=t%i;if(l===0)return i;l>o&&(o=l,s=i)}return s}var ZE;const $0=ct.button(ZE||(ZE=rt(["\n    shrink-0\n    text-sm\n    whitespace-nowrap\n    flex\n    items-center\n    gap-1\n    text-token-text-secondary\n    hover:text-token-text-primary\n    disabled:opacity-50\n    disabled:hover:text-token-text-secondary\n  "]))),V1e=_.createContext(null),H0=3,G1e=3;function $1e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=G(),o=xe(s,"4111922784"),a=_.useContext(V1e)==="user-query-with-navlink",i=_.useContext(P1e);return r.jsx("div",{className:W({hidden:i&&a}),children:o?r.jsx(F1e,{navigation:t,trackContentReferenceEvent:n}):r.jsx(H1e,{navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n})})}function H1e({navigation:t,onShowSearchResults:e,trackContentReferenceEvent:n}){const s=t.domains.filter(i=>i.url);_.useEffect(()=>{n("Search Content Reference Shown","search_content_reference_shown",t.type,{urls:s.map(i=>i.url).join(",")})},[s]);const o=s.slice(0,H0),a=s.slice(H0,H0+G1e);return r.jsxs("div",{className:"not-prose mb-3 flex gap-2",children:[o.map((i,l)=>r.jsx(z1e,{isPrimaryDomain:l===0,isFistLineDomain:!0,navigationDomain:i,trackContentReferenceEvent:n,analyticsMetadata:{section_index:l}},i.url)),a.length>0&&r.jsx(W1e,{onShowSearchResults:e,trackContentReferenceEvent:n,moreDomains:a})]})}const W1e=({onShowSearchResults:t,trackContentReferenceEvent:e,moreDomains:n})=>r.jsx(RR,{component:"div",className:"group flex w-28 cursor-pointer",onClick:()=>{e("Search Content Reference Clicked","search_content_reference_clicked","navigation",{sidebar:"sidebar"}),t(PR.Sources,KS.Links)},children:r.jsxs("div",{className:"flex min-w-0 flex-col",children:[r.jsx("div",{className:"flex items-center",children:n.map((s,o)=>r.jsx("div",{style:{zIndex:n.length-o},className:"ms-[-6px] first:ms-0",children:r.jsx("div",{className:W("flex h-4 w-4 items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary group-hover:border-token-bg-tertiary border-2"),children:r.jsx(Ts,{url:s.url,size:32,minSize:20,className:"icon-xs rounded-full",showLoadingAnimation:!0})},s.url)},s.url))}),r.jsx("div",{className:"text-token-text-primary flex text-sm font-semibold",children:r.jsx("span",{className:"truncate",children:r.jsx(P,{id:"B5xwY8",defaultMessage:"More links"})})})]})}),z1e=({isPrimaryDomain:t,isFistLineDomain:e,navigationDomain:n,trackContentReferenceEvent:s,analyticsMetadata:o})=>{var a;return _.useEffect(()=>{s("link_action",null,"navigation",{url:n.url,title:n.title,link_type:"card",action:"show",section:"fast_nav",section_location:"response",section_index:o.section_index})},[]),r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx(q1e,{isFistLineDomain:e,isPrimaryDomain:t,title:n.title,subtitle:(a=n.subtitle)!=null?a:void 0,url:n.url,domain:n.domain,subDomains:n.sub_domains,trackContentReferenceEvent:s,analyticsMetadata:o})})},q1e=({isFistLineDomain:t,title:e,subtitle:n,url:s,trackContentReferenceEvent:o,analyticsMetadata:a})=>{const i={url:s,title:e,link_type:"card",section:"fast_nav",section_location:"response",section_index:a.section_index},l=Sn()?"_self":"_blank";return r.jsxs(RR,{component:ao,href:s,target:l,onClick:()=>o("link_action",null,"navigation",B(w({},i),{action:"click"})),onMouseEnter:()=>{o("link_action",null,"navigation",B(w({},i),{action:"hover"}))},className:"flex flex-col gap-[2px]",children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center gap-[6px] text-xs",children:[r.jsx(Ts,{url:s,size:32,applySizeToImg:!0,className:"icon-xs rounded-full",showLoadingAnimation:!0}),r.jsx("div",{className:"truncate",children:n})]}),r.jsx("div",{className:W("text-token-text-primary flex items-center font-medium",t?"text-sm":"text-xs"),children:r.jsx("span",{className:"truncate",children:e})})]})},RR=o=>{var a=o,{component:t,children:e,className:n}=a,s=Me(a,["component","children","className"]);return r.jsx(t,B(w({},s),{className:W("hover:bg-token-bg-tertiary border-token-border-light rounded-2xl border px-4 py-3",n),children:e}))},Y1e=(t,e)=>t==="Search Content Reference Shown"||t==="Contextual Answers Content Reference Shown"||t==="Search Content Reference Failed"||t==="link_action"&&(e==null?void 0:e.action)==="show"||t==="product_offer"&&(e==null?void 0:e.action)==="shown",Z1e=(t,e,n)=>w(B(w({},An(e)),{type:t}),n?Q1e(n):{}),K1e=["section_index","product_index","offer_index"],Q1e=t=>Object.fromEntries(Object.entries(t!=null?t:{}).map(([e,n])=>[e,K1e.includes(e)&&n!==void 0?(Number(n)+1).toString():String(n)]));function OZe(t){var s;const e=(s=_.useContext(C1))==null?void 0:s.serverSharedThreadId;return _.useMemo(()=>{const[o,a]=t.split("?"),i=new URLSearchParams(a!=null?a:"");return e&&i.set("shared_conversation_id",e),i.size?o+"?"+i.toString():o},[t,e])}function J1e(t){const e=_.useRef(new Set);return _.useCallback((n,s,o,a,i)=>{if(t&&t.messageId&&X1e(t.messageId)){const l=Z1e(o,t,a),c="".concat(n,"-").concat(JSON.stringify(l));(!e.current.has(c)||!Y1e(n,a))&&(e.current.add(c),s?U.logEventWithStatsig(n,s,l):U.logEvent(n,l),i==null||i(t))}},[t])}const X1e=t=>!t.startsWith(MH)&&!t.startsWith(xb),LR=j(()=>I(()=>import("./hr4c3yfmv4kj7cs0.js"),__vite__mapDeps([307,1])).then(t=>t.QRCodeSVG)),mn=({onDismiss:t,title:e,content:n,customCtas:s,onPrimaryCtaClick:o,primaryCtaText:a,primaryCtaColor:i,primaryCtaClassName:l,secondaryCtaColor:c,primaryCtaQrLink:d,onPrimaryCtaQrClick:u,onSecondaryCtaClick:m,onDangerCtaClick:f,secondaryCtaText:p,dangerCtaText:g,icon:h,isElevated:x=!0,isPrimaryCtaDisabled:y=!1,isSecondaryCtaDisabled:b=!1,isDangerCtaDisabled:v=!1,type:S="normal",className:C,contentClassName:k,verticalCta:M=!0})=>{const T=A1(),E=W("m-w-fit flex shrink-0 gap-2 pb-1 md:pb-0",M&&"flex-col"),A=s?r.jsx("div",{className:E,children:s}):(a||p||g)&&r.jsxs("div",{className:E,children:[a&&r.jsx(he,{onClick:o,color:i!=null?i:"primary",className:W("shrink-0",l),disabled:y,children:a}),p&&r.jsx(he,{onClick:m,color:c!=null?c:"secondary",className:"shrink-0",disabled:b,children:p}),g&&r.jsx(he,{onClick:f,color:"danger-outline",className:"shrink-0",disabled:v,children:g})]});return r.jsxs("aside",{className:W("flex w-full items-start gap-4 rounded-3xl border py-4 ps-5 pe-3 text-sm [text-wrap:pretty] lg:mx-auto dark:border-transparent",x&&"shadow-xxs",T?"flex-col":"md:items-center",S==="error"?"border-token-surface-error/15 text-token-text-error dark:bg-token-surface-error/5 bg-red-50":S==="info"?"border-token-border-light bg-token-main-surface-secondary text-token-text-primary dark:bg-token-main-surface-tertiary":"border-token-border-default bg-token-main-surface-primary text-token-text-primary dark:bg-token-main-surface-secondary",C),children:[r.jsxs("div",{className:W("flex h-full w-full gap-3",!T&&"md:items-center"),children:[h&&r.jsx("div",{className:"flex items-start pt-0.5",children:h}),r.jsxs("div",{className:W("flex grow flex-col md:flex-row md:items-center md:justify-between md:gap-8",k),children:[r.jsxs("div",{className:"flex flex-col",children:[e&&r.jsx("h3",{className:W("text-sm font-bold",S==="error"?"text-token-text-error":"text-token-text-primary"),children:e}),r.jsx("div",{className:W(e?S==="error"?"text-token-text-error":"text-token-text-secondary":""),children:n})]}),r.jsxs("div",{className:"mt-2 flex min-w-fit flex-col gap-2 md:mt-0 md:items-center md:gap-4",children:[d&&r.jsx(LR,{className:"min-h-[62px] min-w-[62px] cursor-pointer",onClick:u,size:62,value:d}),!T&&A]})]}),r.jsx("div",{className:"flex shrink-0 items-start gap-2 sm:items-center",children:!!t&&r.jsx(fn,{onClick:t})})]}),T&&A]})},OR=({onDismiss:t,title:e,content:n,onPrimaryCtaClick:s,primaryCtaText:o,onSecondaryCtaClick:a,secondaryCtaText:i})=>r.jsxs("div",{className:W("border-main-surface-secondary bg-token-main-surface-primary text-token-text-primary flex h-16 items-center border-b px-2 text-sm"),children:[r.jsxs("div",{className:"flex items-center justify-center",children:[!!t&&r.jsx(fn,{onClick:t,className:"text-token-text-tertiary -me-2"}),r.jsx(q6,{className:"h-16 w-16 rounded-xs pt-1 shadow-none"}),r.jsxs("div",{className:"-ms-1 flex flex-col",children:[e&&r.jsx("div",{className:"text-token-text-primary font-bold",children:e}),r.jsx("div",{className:W(e?"text-token-text-secondary -mt-0.5":""),children:n})]})]}),r.jsxs("div",{className:"ms-auto flex justify-end",children:[o&&r.jsx(he,{onClick:s,color:"primary",className:"shrink-0",children:o}),i&&r.jsx(he,{onClick:a,color:"secondary",className:"me-2 shrink-0",children:i})]})]}),DR=Ye.DesktopBrowserExtensionAnnouncement,FR=Ye.DesktopBrowserExtensionReactiveAnnouncement,e_e=5,t_e="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function n_e({announcementKey:t=DR,onClose:e}){_.useEffect(()=>{U.logEventWithStatsig("ChatGPT Browser Extension: Announcement Shown","chatgpt_browser_extension_announcement_shown")},[]);const{markAsViewed:n}=$e(t),s=_.useCallback(()=>{n(),U.logEventWithStatsig("ChatGPT Browser Extension: Announcement Closed","chatgpt_browser_extension_announcement_closed"),e&&e()},[n,e]),o=_.useCallback(()=>{U.logEventWithStatsig("ChatGPT Browser Extension: CTA Clicked","chatgpt_browser_extension_announcement_cta_clicked"),n(),e&&e()},[n,e]);return r.jsx(s_e,{downloadUrl:t_e,announcementKey:t,handleCTAClicked:o,handleClose:s})}function DZe({onClose:t}){return n_e({announcementKey:FR,onClose:t})}function s_e({downloadUrl:t,announcementKey:e,handleCTAClicked:n,handleClose:s}){const o=()=>{n(),window.open(t)},a=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(P,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(P,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return r.jsx(mn,{onPrimaryCtaClick:o,primaryCtaText:r.jsx(P,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:()=>s(e),content:a})}function BR(t){var c;const e=G(),n=t9(()=>document.documentElement.dataset.searchExtension==="1"),o=(c=ue(()=>wn(ht(e,t.clientThreadId))).enabledTools)==null?void 0:c.includes(sl.Search),a=Ia(),i=!(a!=null&&a.includes(Rs.SearchToolHoldout)),l=Sn();return TH()&&!l&&!n&&o&&i}function o_e(t){return BR(t),i_e(),$e(DR),!1}function a_e(t){var i;const e=BR(t),n=Ue(t.clientThreadId,l=>Ml(me.getConversationTurns(l),c=>c.role===Ze.User));let s=!1;const o=n==null?void 0:n.messages[0];if((o==null?void 0:o.content.content_type)===dt.Text){const l=(i=o==null?void 0:o.content.parts[0])==null?void 0:i.toLowerCase();l&&(s=l.includes("chrome extension")||l.includes("default search"))}const a=$e(FR);return a.eligible&&!a.isLoading&&e&&s}function r_e(t){var n;const e=(n=mt.getItem(Le.SearchSettings))!=null?n:{};e.hasSearchedMinTimes||(e.searchMessageIds||(e.searchMessageIds=[]),e.searchMessageIds.includes(t)||(e.searchMessageIds.push(t),e.searchMessageIds.length>=e_e&&(e.hasSearchedMinTimes=!0,delete e.searchMessageIds),mt.setItem(Le.SearchSettings,e)))}function i_e(){var e;return((e=mt.getItem(Le.SearchSettings))!=null?e:{}).hasSearchedMinTimes===!0}var sf=(t=>(t.SonicBusinessesMap="sonic.web.businessesMap",t.CompletionRequest="chatgpt.web.completionRequest",t.GetDiffedDoc="chatgpt.web.canvas.getDiffedDoc",t.ProductsCompletionRequest="chatgpt.web.products.completionRequest",t.ProductSidebar="chatgpt.web.products.sidebar",t.SuperWidget="chatgpt.web.super_widget",t.SearchingState="chatgpt.web.searchingState",t))(sf||{});class l_e{constructor(e,n){ne(this,"namespace");ne(this,"expectedTimingLogs");ne(this,"expectedTimingLogTimeouts",{});ne(this,"startMs",-1);ne(this,"lastLogMs",-1);ne(this,"loggedTimings",new Set);ne(this,"timingBlocks",{});ne(this,"_debug",!1);ne(this,"context");var s,o,a;this.namespace=e,this.expectedTimingLogs=(s=n==null?void 0:n.expectedTimingLogs)!=null?s:[],this._debug=(o=n==null?void 0:n.debug)!=null?o:!1,this.context=(a=n==null?void 0:n.context)!=null?a:{},this.reset()}reset(e){this.startMs=this.lastLogMs=e!=null?e:performance.now(),this.timingBlocks={},this.loggedTimings=new Set;for(const n of Object.values(this.expectedTimingLogTimeouts))clearTimeout(n);this.expectedTimingLogTimeouts={};for(const n of this.expectedTimingLogs){const s=setTimeout(()=>{var o;Oe.addAction("".concat(this.namespace,".").concat(n.name,".timed_out"),(o=n.initializationInfo)!=null?o:{})},n.expectedInMs);this.expectedTimingLogTimeouts[n.name]=s,this.isDebug()&&console.debug("[DatadogProfiler] Expecting ".concat(this.namespace,".").concat(n.name," to be logged within ").concat(n.expectedInMs,"ms"))}}isDebug(){var e;return(e=window.__DATADOG_PROFILER_DEBUG__)!=null?e:this._debug}getStartTime(){return this.startMs}logTimingOnce(e,n={fromLastLog:!1}){var a;if(this.loggedTimings.has(e)){this.isDebug()&&console.warn("[DatadogProfiler] Timing ".concat(this.namespace,".").concat(e," already logged"));return}const s=performance.now(),o=(a=n.overrideDurationMs)!=null?a:s-(n.fromLastLog?this.lastLogMs:this.startMs);return Oe.addAction("".concat(this.namespace,".").concat(e),B(w(w({},this.context),n.context),{durationMs:o})),this.lastLogMs=s,this.loggedTimings.add(e),e in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[e]),delete this.expectedTimingLogTimeouts[e]),this.isDebug()&&console.debug("[DatadogProfiler] ".concat(this.namespace,".").concat(e,": ").concat(o,"ms")),o}startBlock(e){this.timingBlocks[e]=performance.now()}endBlock(e,n={throwError:!0}){const s=this.timingBlocks[e];if(s===void 0&&n.throwError)throw new Error('Block "'.concat(e,'" not started'));const o=performance.now()-s;Oe.addAction("".concat(this.namespace,".").concat(e),B(w(w({},this.context),n.context),{durationMs:o})),delete this.timingBlocks[e]}}const Ag={};function c_e({namespace:t,opts:e}){return Ag[t]!==void 0&&Oe.addError("Profiler already exists for namespace ".concat(t)),Ag[t]=new l_e(t,e)}function QS({namespace:t,opts:e}){let n=Ag[t];return n===void 0&&(n=Ag[t]=c_e({namespace:t,opts:e})),n}function UR(t){"use forget";const e=H.c(11),{namespace:n,clientThreadId:s}=t,[o,a]=_.useState(!1);let i;e[0]!==n?(i=()=>QS({namespace:n,opts:{debug:!1}}),e[0]=n,e[1]=i):i=e[1];const[l]=_.useState(i),c=Ue(s,d_e),d=Jo(c);let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=new Set,e[2]=u):u=e[2];const m=_.useRef(u),f=G();let p,g;e[3]!==f||e[4]!==l||e[5]!==c?(p=()=>{if(c&&!m.current.has(c)){m.current.add(c);const y=EH(f,c);y&&(l.reset(y.turnTracker.promptSentTimestamp),a(!0))}},g=[c,l,f],e[3]=f,e[4]=l,e[5]=c,e[6]=p,e[7]=g):(p=e[6],g=e[7]),_.useEffect(p,g);const h=o?l:null;let x;return e[8]!==d||e[9]!==h?(x={profiler:h,isRequestActive:d},e[8]=d,e[9]=h,e[10]=x):x=e[10],x}function d_e(t){return me.getRequestId(t)}const Ky=XA(()=>({delayedRenderingMessageIds:new Set})),u_e=t=>Db(Ky,t);function m_e(t){return u_e(e=>t?t(e.delayedRenderingMessageIds):e.delayedRenderingMessageIds)}const B5={addDelayedRenderingMessage(t){Ky.setState(e=>{if(e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.add(t),{delayedRenderingMessageIds:n}})},removeDelayedRenderingMessage(t){Ky.setState(e=>{if(!e.delayedRenderingMessageIds.has(t))return e;const n=new Set(e.delayedRenderingMessageIds);return n.delete(t),{delayedRenderingMessageIds:n}})}},f_e="5.7.5",p_e=100,g_e=0,h_e=350,__e=24,x_e=24,y_e="Comp 1",v_e=0,b_e=[],S_e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],C_e=[],w_e={v:f_e,fr:p_e,ip:g_e,op:h_e,w:__e,h:x_e,nm:y_e,ddd:v_e,assets:b_e,layers:S_e,markers:C_e},k_e="5.7.5",M_e=100,T_e=0,E_e=400,A_e=24,I_e=24,j_e="Comp 1",P_e=0,N_e=[],R_e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.944433333333334],[-1.166666666666667,0]],o:[[-1.166666666666666,1.944433333333333],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.003000259399414062,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.3626899123191833],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.003000259399414062,2.333300590515137],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.120759010314941]],o:[[1.720494627952576,0],[.6510882377624512,-1.120759010314941]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.166999816894531,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],L_e=[],O_e={v:k_e,fr:M_e,ip:T_e,op:E_e,w:A_e,h:I_e,nm:j_e,ddd:P_e,assets:N_e,layers:R_e,markers:L_e},D_e="5.7.5",F_e=100,B_e=0,U_e=400,V_e=24,G_e=24,$_e="Comp 1",H_e=0,W_e=[],z_e=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.9444333333333343],[-1.166666666666667,0]],o:[[-1.166666666666666,1.9444333333333326],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.0030002593994140625,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.36268991231918335],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.0030002593994140625,2.3333005905151367],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.1207590103149414]],o:[[1.7204946279525757,0],[.6510882377624512,-1.1207590103149414]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.1669998168945312,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],q_e=[],Y_e={v:D_e,fr:F_e,ip:B_e,op:U_e,w:V_e,h:G_e,nm:$_e,ddd:H_e,assets:W_e,layers:z_e,markers:q_e},Z_e="5.7.5",K_e=100,Q_e=0,J_e=350,X_e=24,e0e=24,t0e="Comp 1",n0e=0,s0e=[],o0e=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],a0e=[],r0e={v:Z_e,fr:K_e,ip:Q_e,op:J_e,w:X_e,h:e0e,nm:t0e,ddd:n0e,assets:s0e,layers:o0e,markers:a0e},i0e=j(()=>I(()=>import("./lclapmfd9avap15p.js"),__vite__mapDeps([171,1])));function VR({animationData:t,animationSegmentToPlay:e,animationLoopCounter:n}){const s=_.useRef(null);return _.useEffect(()=>{var o;(o=s.current)==null||o.playSegments(e,!0)},[n]),r.jsx(i0e,{animationData:t,lottieRef:s,loop:!1,autoplay:!1})}function l0e(t){return r.jsx(As,B(w({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.66607 0.376042C8.01072 0.605806 8.10385 1.07146 7.87408 1.4161L3.54075 7.9161C3.40573 8.11863 3.18083 8.24304 2.93752 8.24979C2.69421 8.25654 2.46275 8.1448 2.31671 7.95008L0.150044 5.06119C-0.098484 4.72982 -0.0313267 4.25972 0.300044 4.01119C0.631415 3.76266 1.10152 3.82982 1.35004 4.16119L2.88068 6.20204L6.62601 0.584055C6.85577 0.239408 7.32142 0.146278 7.66607 0.376042Z",fill:"currentColor"})}))}function c0e(t){return r.jsxs(As,B(w({width:"4",height:"12",viewBox:"0 0 4 12",fill:"none"},t),{children:[r.jsx("mask",{id:"path-1-inside-1_1975_4008",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z",fill:"currentColor"}),r.jsx("path",{d:"M1 6.5H-0.25H1ZM1 1.5L-0.25 1.5L-0.25 1.5L1 1.5ZM2 6.25C2.13807 6.25 2.25 6.36193 2.25 6.5H-0.25C-0.25 7.74264 0.757359 8.75 2 8.75V6.25ZM1.75 6.5C1.75 6.36193 1.86193 6.25 2 6.25V8.75C3.24264 8.75 4.25 7.74264 4.25 6.5H1.75ZM1.75 1.5V6.5H4.25V1.5H1.75ZM2 1.75C1.86193 1.75 1.75 1.63807 1.75 1.5H4.25C4.25 0.257359 3.24264 -0.75 2 -0.75V1.75ZM2.25 1.5C2.25 1.63807 2.13807 1.75 2 1.75V-0.75C0.757359 -0.75 -0.25 0.257359 -0.25 1.5L2.25 1.5ZM2.25 6.5L2.25 1.5L-0.25 1.5L-0.25 6.5L2.25 6.5ZM2 10.25H-0.5C-0.5 11.6307 0.619288 12.75 2 12.75V10.25ZM2 10.25V12.75C3.38071 12.75 4.5 11.6307 4.5 10.25H2ZM2 10.25H2H4.5C4.5 8.86929 3.38071 7.75 2 7.75V10.25ZM2 10.25H2V7.75C0.619288 7.75 -0.5 8.86929 -0.5 10.25H2Z",fill:"currentColor",mask:"url(#path-1-inside-1_1975_4008)"})]}))}function d0e(t){return r.jsx(As,B(w({width:"8",height:"9",viewBox:"0 0 8 9",fill:"none"},t),{children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.32256 1.48447C7.59011 1.16827 7.55068 0.695034 7.23447 0.427476C6.91827 0.159918 6.44503 0.199354 6.17748 0.515559L4.00002 3.08892L1.82256 0.515559C1.555 0.199354 1.08176 0.159918 0.765559 0.427476C0.449355 0.695034 0.409918 1.16827 0.677476 1.48447L3.01755 4.25002L0.677476 7.01556C0.409918 7.33176 0.449354 7.805 0.765559 8.07256C1.08176 8.34011 1.555 8.30068 1.82256 7.98447L4.00002 5.41111L6.17748 7.98447C6.44503 8.30068 6.91827 8.34011 7.23447 8.07256C7.55068 7.805 7.59011 7.33176 7.32256 7.01556L4.98248 4.25002L7.32256 1.48447Z",fill:"currentColor"})}))}function FZe({animationLoopCounter:t}){const e=Zo();return r.jsx(VR,{animationData:e?w_e:r0e,animationSegmentToPlay:[0,300],animationLoopCounter:t})}function BZe({animationLoopCounter:t}){const e=Zo();return r.jsx(VR,{animationData:e?O_e:Y_e,animationSegmentToPlay:[0,400],animationLoopCounter:t})}const u0e=2e3,GR=.4,m0e=.45,f0e=.2,p0e=.1,g0e=.25;var eo=(t=>(t[t.Running=0]="Running",t[t.Finished=1]="Finished",t[t.Error=2]="Error",t[t.Stopped=3]="Stopped",t[t.Paused=4]="Paused",t))(eo||{});function UZe({conversationMessages:t,icon:e,status:n,text:s,estimatedToolDurationMs:o,animationLoopDurationMs:a=u0e,shouldPersistAfterFinished:i=!1}){const[l,c]=_.useState(n===0?0:n===1&&!i?7:1),[d,u]=_.useState(0);_.useEffect(()=>{n===2?c(8):n===3?c(9):n===4?c(10):n===1?c(l===2?3:7):n===0&&l===10&&(c(2),u(f=>f+1))},[n]);const m=x0e(l);return _.useEffect(()=>{const f=t[0].id;if(m)return B5.addDelayedRenderingMessage(f),()=>{B5.removeDelayedRenderingMessage(f)}},[m]),Fb(()=>{Fc(l)&&u(f=>f+1)},a),l===7&&!i?null:r.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[r.jsx(h0e,{icon:e,status:n,uiState:l,estimatedToolDurationMs:o,animationLoopCounter:d,shouldPersistAfterFinished:i,onFillProgressBarAnimationComplete:()=>c(4),onFinishAnimationComplete:()=>{c(5),setTimeout(()=>{c(i?7:6)},p0e*1e3)},onHideAnimationComplete:()=>c(7)}),r.jsx(_0e,{text:s,uiState:l,animationLoopCounter:d,onEnterAnimationComplete:()=>c(2)})]})}const U5=50;function h0e({icon:t,status:e,uiState:n,estimatedToolDurationMs:s,animationLoopCounter:o,shouldPersistAfterFinished:a,onFillProgressBarAnimationComplete:i,onFinishAnimationComplete:l,onHideAnimationComplete:c}){const[d,u]=_.useState(0);Fb(()=>{Fc(n)?u(b=>b+U5):n===10&&u(0)},U5);let m,f,p;Fc(n)||n===10?(m="running",f=r.jsx(t,{animationLoopCounter:o}),p="bg-transparent"):n===4||n===5||n===7&&a?(m="finished",f=r.jsx(l0e,{}),p="bg-brand-purple"):e===2?(m="error",f=r.jsx(c0e,{}),p="bg-orange-500"):e===3&&(m="stopped",f=r.jsx(d0e,{}),p="bg-gray-300");let g={opacity:0,scale:0,rotate:-180,x:0},h={type:"spring",bounce:.3,duration:m0e},x={opacity:0,scale:.6,rotate:0,x:0};n===0?(g={opacity:0,scale:.5,rotate:-180,x:-8},h={type:"spring",bounce:.3,duration:GR}):n===1?g=!1:n===5&&(x={opacity:0,scale:0,rotate:0,x:0},h={type:"spring",bounce:.3,duration:g0e});const y=Zse(d,s);return r.jsx("div",{className:"relative h-5 w-5 shrink-0",children:r.jsx(dn,{onExitComplete:()=>{n===6&&c()},children:m!=null&&r.jsxs(Xe.div,{className:W("absolute start-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",p),initial:g,animate:{opacity:1,scale:1,rotate:0,x:0},exit:x,transition:h,onAnimationComplete:()=>{n===4&&l()},children:[f,(Fc(n)||n===10)&&r.jsx(td,{percentage:n===3?100:y,thickness:1.5/23,className:"text-brand-purple absolute start-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:n===3?"".concat((100-y)/100*f0e,"s"):void 0,transitionTimingFunction:n===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{n===3&&i()}})]},m)})})}function _0e({text:t,uiState:e,animationLoopCounter:n,onEnterAnimationComplete:s}){const[o,a]=_.useState(t);_.useEffect(()=>{e===2&&a(t)},[n]),_.useEffect(()=>{Fc(e)||a(t)},[e,t]);let i={opacity:0,x:0,y:15},l={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};e===0?(i={opacity:0,x:-8,y:0},l={type:"spring",bounce:.3,duration:GR,delay:.15}):e===1&&(i=!1);const c=o!=null?o:void 0;return r.jsx("div",{className:W("relative h-5 w-full leading-5",e===8||e===9?"text-token-text-tertiary":"text-token-text-secondary"),children:r.jsx(dn,{children:c!=null&&r.jsx(Xe.div,{className:"absolute start-0 top-0 line-clamp-1 overflow-visible",initial:i,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:l,onAnimationComplete:()=>{e===0&&s()},children:c},c.toString())})})}function Fc(t){return t===0||t===2||t===3}function x0e(t){return Fc(t)||t===4||t===5||t===6||t===10}const y0e=j(()=>I(()=>import("./bqk4d9uy5l3d6vsz.js").then(t=>t._),__vite__mapDeps([308,1])),{loading:t=>L(t)}),v0e=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)});var KE;const V5=ct.div(KE||(KE=rt(["group start-0 top-0 me-1.5 overflow-hidden mt-1 text-start"]))),b0e=(p,f)=>{var g=p,{highlightedCommand:t,status:e,children:n,showWorkUserSetting:s=!1,hideOnlyIfNotInteractedWith:o=!1,defaultExpanded:a=!1,forceExpanded:i=!1,labelPrefix:l,onOpenAnalytics:c,onClick:d,accessory:u}=g,m=Me(g,["highlightedCommand","status","children","showWorkUserSetting","hideOnlyIfNotInteractedWith","defaultExpanded","forceExpanded","labelPrefix","onOpenAnalytics","onClick","accessory"]);const h=n!=null||d!=null,[x]=_.useState(s),[y,b]=_.useState(s||a),[v,S]=_.useState(!1),C=e===eo.Finished||e===eo.Error,k=o?x?!1:!v:!1,M=e===eo.Running?"loading-shimmer":"inline-block";return C&&k?null:h?r.jsxs(r.Fragment,{children:[r.jsx(G5,B(w({ref:f,$canShowWork:!0},m),{children:r.jsx(dn,{children:r.jsx(V5,{children:r.jsx(Xe.button,{onClick:T=>{y||c==null||c(),b(E=>!E),S(!0),d==null||d(T)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:W(M),children:r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[l,r.jsx("span",{className:"text-start",children:t}),!d&&!i&&(y?r.jsx(y0e,{className:"icon-sm"}):r.jsx(v0e,{className:"icon-sm"})),u]})},t==null?void 0:t.toString())})})})),r.jsx(dn,{children:(y||i)&&n&&r.jsx(Xe.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:n})})]}):r.jsx(G5,B(w({ref:f,$canShowWork:!1},m),{children:r.jsx(V5,{className:W(M),children:r.jsxs("div",{className:"flex items-center justify-start gap-1",children:[l,r.jsx("span",{className:"text-start",children:t}),u]})})}))};var QE;const G5=ct.span(QE||(QE=rt(["block first:mt-0 relative\n",""])),({$canShowWork:t})=>t?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"),Qy=_.forwardRef(b0e),$5=3,S0e=.1,H5=[0,.26,.4],C0e=800,w0e=1200;function VZe({nextMessage:t,isLastMessage:e,isRequestActive:n,isLastTurnInConversation:s,clientThreadId:o,turnIndex:a,searchResultGroups:i=[],query:l=null,searchModelQueries:c=[],showFastNav:d=!0,isForcedMessage:u=!1,shouldShowAnimatedBlackDot:m=!0}){var F;const f=M0e({isLastMessage:e,nextMessage:t}),p=_.useRef(!1),g=xt(),h=Ue(o,me.getGizmoId);_.useEffect(()=>{t&&Bb(t)&&!p.current&&(p.current=!0,ro(g,h))},[t,g,h]);const x=jh(t);t!=null&&t.id&&r_e(t==null?void 0:t.id);const{profiler:y}=UR({namespace:sf.SearchingState,clientThreadId:o}),b=G(),v=cs(b),S=qo(b).checkGate("1640462792"),{favicons:C,load:k}=j1e(l!=null?l:null);_.useEffect(()=>{l&&l.trim().length>0&&!u&&!S&&k({ctx:b,profiler:y})},[l,u,S]);const M=_.useMemo(()=>{const V=C.slice(0,$5).map(z=>z.url);return V.length>0?V:Th(i.slice(0,$5).map(z=>z.entries[0].url))},[C,i]),T=_.useRef(!1),E=_.useRef(!1);_.useEffect(()=>{f&&!T.current&&y&&n&&(T.current=!0,y.logTimingOnce("searching_the_web_shown"))},[f,y,n]),_.useEffect(()=>{!E.current&&f&&M.length>0&&y&&n&&(E.current=!0,y.logTimingOnce("favicons_shown"))},[M.length,f,y,n]);const[A,N]=_.useState(0),[R,O]=_.useState(!0);_.useEffect(()=>{if(n&&f&&c.length>0&&R){let V=null;const z=setTimeout(()=>{O(!1),V=setInterval(()=>{N($=>$+1>=c.length?c.length-1:$+1)},w0e)},C0e);return()=>{clearTimeout(z),V!=null&&clearInterval(V)}}(!n||!f||c.length===0)&&!R&&O(!0)},[n,f,c.length,R]);const D=[];if(((F=x==null?void 0:x[0])==null?void 0:F.type)==="navigation"&&t&&d&&D.push(r.jsx(k0e,{clientThreadId:o,turnIndex:a,nextMessage:t,isRequestActive:n,isLastTurnInConversation:s,navigationCitation:x[0]},"fast-nav")),f){if(S){const V=!n,z=V?r.jsx(P,{id:"sjbaxy",defaultMessage:"Stopped searching"}):R?r.jsx(P,{id:"jjx8Qg",defaultMessage:"Searching the web"}):r.jsx(P,{id:"FauKHv",defaultMessage:"Searching for {query}",values:{query:c[A]}});V?D.push(r.jsx(Qy,{highlightedCommand:z,status:eo.Error},"search-gpt-query")):(R&&m&&D.push(r.jsx(y1e,{})),D.push(r.jsx("span",{className:W("loading-shimmer text-token-text-secondary pt-[3px] font-medium select-none",!v&&"truncate"),children:z})))}else if(f){const V=n?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(P,{id:"jjx8Qg",defaultMessage:"Searching the web"}),M.map((z,$)=>r.jsx(Xe.div,{className:W("-ms-1.5 first:ms-0 last:me-1.5","relative"),initial:{width:$===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:S0e,delay:H5[Math.min($,H5.length-1)]},children:r.jsx("div",{className:W("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-token-bg-primary bg-token-bg-primary border-2"),children:r.jsx(Ts,{url:z,size:32,minSize:16,className:"icon rounded-full"})})},z))]}):r.jsx(P,{id:"sjbaxy",defaultMessage:"Stopped searching"});D.push(r.jsx(Qy,{highlightedCommand:V,status:n?eo.Running:eo.Error},"search-gpt-query"))}}return D.length?r.jsx("div",{children:D}):null}const k0e=({clientThreadId:t,turnIndex:e,nextMessage:n,isRequestActive:s,isLastTurnInConversation:o,navigationCitation:a})=>{var u;const{scrollToHeader:i}=(u=a5("searchSources"))!=null?u:{},l=vfe(),c=a5("searchSources"),{openThreadSidebar:d}=Ir();return _.useEffect(()=>{Oe.addFirstTiming("render.fastNavigation")},[]),_.useEffect(()=>{var m;l&&c&&d({type:"searchSources",scrollToHeader:i,turnIndex:e,messageId:(m=n==null?void 0:n.id)!=null?m:""})},[]),_.useEffect(()=>{var g;const m=n,f=(g=m.metadata)==null?void 0:g.search_source,p=a.domains.map(h=>h.url);qj.logEvent("Search Tool Request Time To Fast Nav",t,m.id,{search_source:f,urls:p},()=>{f===AH.InstantQuery&&she.logEvent("Search Tool Page Load Time To Fast Nav",{message_id:m.id,urls:p,search_source:f})})},[t,n,a]),s&&o?r.jsx(Xe.div,{initial:{opacity:s?0:1,height:s?0:"auto"},animate:{opacity:1,height:"auto"},children:r.jsx(W5,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:a})}):r.jsx(W5,{clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:a})},W5=({clientThreadId:t,turnIndex:e,nextMessage:n,navigationCitation:s})=>{const{toggleThreadSidebar:o}=Ir(),a=_.useMemo(()=>({clientThreadId:t,turnIndex:e,messageId:n==null?void 0:n.id}),[t,e,n==null?void 0:n.id]),i=_.useCallback((c,d)=>{var u;o({type:"searchSources",scrollToHeader:d,turnIndex:e,messageId:(u=n==null?void 0:n.id)!=null?u:""})},[o,e,n==null?void 0:n.id]),l=J1e(a);return r.jsx($1e,{navigation:s,onShowSearchResults:i,trackContentReferenceEvent:l})};function M0e({isLastMessage:t,nextMessage:e}){return t||!e||e&&!Bb(e)}function T0e({fullHeight:t,children:e,verticalPadding:n,horizontalPadding:s,overflowY:o,verticalMargin:a="auto",horizontalMargin:i="auto",ref:l}){const[c,d]=vn(m=>[Cr(m),un(m)]),u=!d&&!c;return r.jsx("div",{className:W("text-base",o==="auto"&&"overflow-y-auto",a==="auto"&&"my-auto",i==="auto"&&"mx-auto",u&&n==="first"&&"pt-3",u&&n==="last"&&"pb-10",u&&n==="last-standard"&&"pb-3",u&&n==="large"&&"pt-12",u&&n==="small"&&"py-1",c&&n==="first"&&"pt-4.5",c&&n==="large"&&"pt-4.5",c&&n==="last"&&"pb-8",HR,s!=="none"&&"px-(--thread-content-margin)",t&&"h-full"),ref:l,children:e})}function jr(s){var o=s,{children:t,className:e}=o,n=Me(o,["children","className"]);const[a,i]=vn(u=>[Cr(u),un(u)]),c=i?"[--thread-content-max-width:100%]":$R(a?"bento":"default"),d=i?"mx-auto flex-1 w-full max-w-full":"mx-auto max-w-(--thread-content-max-width) flex-1";return r.jsx("div",B(w({className:W(c,d,e)},n),{children:t}))}function $R(t){return t==="bento"?"[--thread-content-max-width:100%] thread-sm:[--thread-content-max-width:44rem] thread-md:[--thread-content-max-width:48rem] thread-lg:[--thread-content-max-width:50rem] thread-xxl:[--thread-content-max-width:54rem]":"[--thread-content-max-width:40rem] thread-lg:[--thread-content-max-width:48rem]"}const HR="[--thread-content-margin:--spacing(4)] thread-sm:[--thread-content-margin:--spacing(6)] thread-lg:[--thread-content-margin:--spacing(16)]";function GZe(t){return Ve(t,"1803944755").get("enable_combined_login_or_signup_button",!1)}const WR=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M11.7304 7.35195C11.9273 7.04193 12.3384 6.95002 12.6484 7.14687C12.9582 7.34374 13.0502 7.75487 12.8535 8.06484L9.67868 13.0648C9.56765 13.2397 9.38114 13.3525 9.17477 13.3705C8.96844 13.3885 8.76558 13.3096 8.62595 13.1566L6.80075 11.1566L6.7197 11.0482C6.56149 10.7827 6.60647 10.4337 6.84372 10.2172C7.08112 10.0007 7.43256 9.98823 7.68259 10.1703L7.78317 10.2601L9.02145 11.6166L11.7304 7.35195Z","data-rtl-flip":""}),_.createElement("path",{d:"M4.52148 15.1664C4.61337 14.8108 4.39951 14.4478 4.04395 14.3559C3.73281 14.2756 3.41605 14.4295 3.28027 14.7074L3.2334 14.8334C3.13026 15.2324 3.0046 15.6297 2.86133 16.0287L2.71289 16.4281C2.63179 16.6393 2.66312 16.8775 2.79688 17.06C2.93067 17.2424 3.14825 17.3443 3.37402 17.3305L3.7793 17.3002C4.62726 17.2265 5.44049 17.0856 6.23438 16.8764C6.84665 17.1788 7.50422 17.4101 8.19434 17.558C8.55329 17.6347 8.9064 17.4062 8.9834 17.0473C9.06036 16.6881 8.83177 16.3342 8.47266 16.2572C7.81451 16.1162 7.19288 15.8862 6.62305 15.5814C6.50913 15.5205 6.38084 15.4946 6.25391 15.5053L6.12793 15.5277C5.53715 15.6955 4.93256 15.819 4.30566 15.9027C4.33677 15.8052 4.36932 15.7081 4.39844 15.6098L4.52148 15.1664Z"}),_.createElement("path",{d:"M15.7998 14.5365C15.5786 14.3039 15.2291 14.2666 14.9668 14.4301L14.8604 14.5131C13.9651 15.3633 12.8166 15.9809 11.5273 16.2572C11.1682 16.3342 10.9396 16.6881 11.0166 17.0473C11.0936 17.4062 11.4467 17.6347 11.8057 17.558C13.2388 17.2509 14.5314 16.5858 15.5713 15.6644L15.7754 15.4769C16.0417 15.224 16.0527 14.8028 15.7998 14.5365Z"}),_.createElement("path",{d:"M2.23828 7.58925C1.97668 8.34846 1.83496 9.15956 1.83496 10.0004C1.835 10.7359 1.94324 11.4483 2.14551 12.1234L2.23828 12.4105C2.35793 12.7576 2.73588 12.9421 3.08301 12.8226C3.3867 12.718 3.56625 12.4153 3.52637 12.1088L3.49512 11.9769C3.2808 11.3548 3.16508 10.6908 3.16504 10.0004C3.16504 9.30975 3.28072 8.64512 3.49512 8.02284C3.61476 7.67561 3.43024 7.29679 3.08301 7.17714C2.73596 7.05777 2.35799 7.2423 2.23828 7.58925Z"}),_.createElement("path",{d:"M16.917 12.8226C17.2641 12.9421 17.6421 12.7576 17.7617 12.4105C18.0233 11.6515 18.165 10.8411 18.165 10.0004C18.165 9.15956 18.0233 8.34846 17.7617 7.58925C17.642 7.2423 17.264 7.05777 16.917 7.17714C16.5698 7.29679 16.3852 7.67561 16.5049 8.02284C16.7193 8.64512 16.835 9.30975 16.835 10.0004C16.8349 10.6908 16.7192 11.3548 16.5049 11.9769C16.3852 12.3242 16.5698 12.703 16.917 12.8226Z"}),_.createElement("path",{d:"M8.9834 2.95253C8.90632 2.59372 8.55322 2.36509 8.19434 2.44179C6.76126 2.74891 5.46855 3.41404 4.42871 4.33534L4.22461 4.52284C3.95829 4.77575 3.94729 5.19696 4.2002 5.46327C4.42146 5.69603 4.77088 5.73326 5.0332 5.56972L5.13965 5.48769C6.03496 4.63746 7.18337 4.01888 8.47266 3.74257C8.83177 3.66561 9.06036 3.31165 8.9834 2.95253Z"}),_.createElement("path",{d:"M15.5713 4.33534C14.5314 3.41404 13.2387 2.74891 11.8057 2.44179C11.4468 2.36509 11.0937 2.59372 11.0166 2.95253C10.9396 3.31165 11.1682 3.66561 11.5273 3.74257C12.7361 4.00161 13.8209 4.56094 14.6895 5.33046L14.8604 5.48769L14.9668 5.56972C15.2291 5.73326 15.5785 5.69603 15.7998 5.46327C16.0211 5.23025 16.0403 4.87902 15.8633 4.62538L15.7754 4.52284L15.5713 4.33534Z"})),$Ze=Object.freeze(Object.defineProperty({__proto__:null,default:WR},Symbol.toStringTag,{value:"Module"})),zR=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M4.52148 15.1664C4.61337 14.8108 4.39951 14.4478 4.04395 14.3559C3.73281 14.2756 3.41605 14.4295 3.28027 14.7074L3.2334 14.8334C3.13026 15.2324 3.0046 15.6297 2.86133 16.0287L2.71289 16.4281C2.63179 16.6393 2.66312 16.8775 2.79688 17.06C2.93067 17.2424 3.14825 17.3443 3.37402 17.3305L3.7793 17.3002C4.62726 17.2265 5.44049 17.0856 6.23438 16.8764C6.84665 17.1788 7.50422 17.4101 8.19434 17.558C8.55329 17.6348 8.9064 17.4062 8.9834 17.0473C9.06036 16.6882 8.83177 16.3342 8.47266 16.2572C7.81451 16.1162 7.19288 15.8862 6.62305 15.5815C6.50913 15.5206 6.38084 15.4946 6.25391 15.5053L6.12793 15.5277C5.53715 15.6955 4.93256 15.819 4.30566 15.9027C4.33677 15.8053 4.36932 15.7081 4.39844 15.6098L4.52148 15.1664Z"}),_.createElement("path",{d:"M15.7998 14.5365C15.5786 14.3039 15.2291 14.2666 14.9668 14.4301L14.8604 14.5131C13.9651 15.3633 12.8166 15.9809 11.5273 16.2572C11.1682 16.3342 10.9396 16.6882 11.0166 17.0473C11.0936 17.4062 11.4467 17.6348 11.8057 17.558C13.2388 17.2509 14.5314 16.5858 15.5713 15.6645L15.7754 15.477C16.0417 15.2241 16.0527 14.8028 15.7998 14.5365Z"}),_.createElement("path",{d:"M2.23828 7.58927C1.97668 8.34847 1.83496 9.15958 1.83496 10.0004C1.835 10.736 1.94324 11.4483 2.14551 12.1234L2.23828 12.4106C2.35793 12.7576 2.73588 12.9421 3.08301 12.8227C3.3867 12.718 3.56625 12.4154 3.52637 12.1088L3.49512 11.977C3.2808 11.3549 3.16508 10.6908 3.16504 10.0004C3.16504 9.30977 3.28072 8.64514 3.49512 8.02286C3.61476 7.67563 3.43024 7.2968 3.08301 7.17716C2.73596 7.05778 2.35799 7.24232 2.23828 7.58927Z"}),_.createElement("path",{d:"M16.917 12.8227C17.2641 12.9421 17.6421 12.7576 17.7617 12.4106C18.0233 11.6515 18.165 10.8411 18.165 10.0004C18.165 9.15958 18.0233 8.34847 17.7617 7.58927C17.642 7.24231 17.264 7.05778 16.917 7.17716C16.5698 7.2968 16.3852 7.67563 16.5049 8.02286C16.7193 8.64514 16.835 9.30977 16.835 10.0004C16.8349 10.6908 16.7192 11.3549 16.5049 11.977C16.3852 12.3242 16.5698 12.703 16.917 12.8227Z"}),_.createElement("path",{d:"M8.9834 2.95255C8.90632 2.59374 8.55322 2.3651 8.19434 2.44181C6.76126 2.74892 5.46855 3.41405 4.42871 4.33536L4.22461 4.52286C3.95829 4.77577 3.94729 5.19697 4.2002 5.46329C4.42146 5.69604 4.77088 5.73328 5.0332 5.56973L5.13965 5.4877C6.03496 4.63748 7.18337 4.0189 8.47266 3.74259C8.83177 3.66563 9.06036 3.31166 8.9834 2.95255Z"}),_.createElement("path",{d:"M15.5713 4.33536C14.5314 3.41405 13.2387 2.74892 11.8057 2.44181C11.4468 2.3651 11.0937 2.59374 11.0166 2.95255C10.9396 3.31166 11.1682 3.66563 11.5273 3.74259C12.7361 4.00163 13.8209 4.56095 14.6895 5.33048L14.8604 5.4877L14.9668 5.56973C15.2291 5.73327 15.5785 5.69604 15.7998 5.46329C16.0211 5.23026 16.0403 4.87903 15.8633 4.6254L15.7754 4.52286L15.5713 4.33536Z"})),JS=Object.freeze(Object.defineProperty({__proto__:null,default:zR},Symbol.toStringTag,{value:"Module"}));function HZe({clientThreadId:t,variant:e="default"}){const n=G(),s=Ue(t,me.getIsNewConversation),o=ue(()=>gh(n)),a=at(),[,i]=zs(),l=()=>{U.logEvent("Temporary Chat Move: Temporary Chat Button Clicked"),s?i(m=>(m.has(Sf)?m.delete(Sf):m.set(Sf,"true"),m),{replace:!0}):Ti(a,{params:o?void 0:new URLSearchParams({[Sf]:"true"})})},c=J(),d=o?c.formatMessage({id:"0emak7",defaultMessage:"Turn off temporary chat"}):c.formatMessage({id:"x2lslS",defaultMessage:"Turn on temporary chat"}),u=o?WR:zR;return r.jsx(kt,{label:d,children:e==="default"?r.jsx(g1,{className:"rounded-full!","aria-label":d,onClick:l,icon:u}):r.jsx(he,{className:"text-token-text-secondary rounded-lg",color:"ghost",icon:u,onClick:l,label:d})})}const E0e={type:"spring",bounce:.1,duration:.3},WZe={type:"spring",bounce:.1,duration:.24},qR={duration:1e-14};function Ig(t,[e,n]){return Math.min(n,Math.max(e,t))}var A0e=[" ","Enter","ArrowUp","ArrowDown"],I0e=[" ","Enter"],of="Select",[P1,N1,j0e]=ob(of),[$d]=wl(of,[j0e,wh]),R1=wh(),[P0e,Ii]=$d(of),[N0e,R0e]=$d(of),YR=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:o,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:m,disabled:f,required:p,form:g}=t,h=R1(e),[x,y]=_.useState(null),[b,v]=_.useState(null),[S,C]=_.useState(!1),k=sh(d),[M=!1,T]=ur({prop:s,defaultProp:o,onChange:a}),[E,A]=ur({prop:i,defaultProp:l,onChange:c}),N=_.useRef(null),R=x?g||!!x.closest("form"):!0,[O,D]=_.useState(new Set),F=Array.from(O).map(V=>V.props.value).join(";");return r.jsx(BA,B(w({},h),{children:r.jsxs(P0e,{required:p,scope:e,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:v,valueNodeHasChildren:S,onValueNodeHasChildrenChange:C,contentId:kh(),value:E,onValueChange:A,open:M,onOpenChange:T,dir:k,triggerPointerDownPosRef:N,disabled:f,children:[r.jsx(P1.Provider,{scope:e,children:r.jsx(N0e,{scope:t.__scopeSelect,onNativeOptionAdd:_.useCallback(V=>{D(z=>new Set(z).add(V))},[]),onNativeOptionRemove:_.useCallback(V=>{D(z=>{const $=new Set(z);return $.delete(V),$})},[]),children:n})}),R?r.jsxs(xL,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:m,value:E,onChange:V=>A(V.target.value),disabled:f,form:g,children:[E===void 0?r.jsx("option",{value:""}):null,Array.from(O)]},F):null]})}))};YR.displayName=of;var ZR="SelectTrigger",KR=_.forwardRef((t,e)=>{const h=t,{__scopeSelect:n,disabled:s=!1}=h,o=Me(h,["__scopeSelect","disabled"]),a=R1(n),i=Ii(ZR,n),l=i.disabled||s,c=Rn(e,i.onTriggerChange),d=N1(n),u=_.useRef("touch"),[m,f,p]=yL(x=>{const y=d().filter(S=>!S.disabled),b=y.find(S=>S.value===i.value),v=vL(y,x,b);v!==void 0&&i.onValueChange(v.value)}),g=x=>{l||(i.onOpenChange(!0),p()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return r.jsx(Rb,B(w({asChild:!0},a),{children:r.jsx(cn.button,B(w({type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":_L(i.value)?"":void 0},o),{ref:c,onClick:Rt(o.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:Rt(o.onPointerDown,x=>{u.current=x.pointerType;const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:Rt(o.onKeyDown,x=>{const y=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&f(x.key),!(y&&x.key===" ")&&A0e.includes(x.key)&&(g(),x.preventDefault())})}))}))});KR.displayName=ZR;var QR="SelectValue",JR=_.forwardRef((t,e)=>{const f=t,{__scopeSelect:n,className:s,style:o,children:a,placeholder:i=""}=f,l=Me(f,["__scopeSelect","className","style","children","placeholder"]),c=Ii(QR,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,m=Rn(e,c.onValueNodeChange);return mr(()=>{d(u)},[d,u]),r.jsx(cn.span,B(w({},l),{ref:m,style:{pointerEvents:"none"},children:_L(c.value)?r.jsx(r.Fragment,{children:i}):a}))});JR.displayName=QR;var L0e="SelectIcon",XR=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n,children:s}=a,o=Me(a,["__scopeSelect","children"]);return r.jsx(cn.span,B(w({"aria-hidden":!0},o),{ref:e,children:s||""}))});XR.displayName=L0e;var O0e="SelectPortal",eL=t=>r.jsx(rb,w({asChild:!0},t));eL.displayName=O0e;var yl="SelectContent",tL=_.forwardRef((t,e)=>{const n=Ii(yl,t.__scopeSelect),[s,o]=_.useState();if(mr(()=>{o(new DocumentFragment)},[]),!n.open){const a=s;return a?fi.createPortal(r.jsx(nL,{scope:t.__scopeSelect,children:r.jsx(P1.Slot,{scope:t.__scopeSelect,children:r.jsx("div",{children:t.children})})}),a):null}return r.jsx(sL,B(w({},t),{ref:e}))});tL.displayName=yl;var Lo=10,[nL,ji]=$d(yl),D0e="SelectContentImpl",sL=_.forwardRef((t,e)=>{const ie=t,{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:x}=ie,y=Me(ie,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),b=Ii(yl,n),[v,S]=_.useState(null),[C,k]=_.useState(null),M=Rn(e,ae=>S(ae)),[T,E]=_.useState(null),[A,N]=_.useState(null),R=N1(n),[O,D]=_.useState(!1),F=_.useRef(!1);_.useEffect(()=>{if(v)return UA(v)},[v]),$A();const V=_.useCallback(ae=>{const[ce,...ye]=R().map(ee=>ee.ref.current),[fe]=ye.slice(-1),Ce=document.activeElement;for(const ee of ae)if(ee===Ce||(ee==null||ee.scrollIntoView({block:"nearest"}),ee===ce&&C&&(C.scrollTop=0),ee===fe&&C&&(C.scrollTop=C.scrollHeight),ee==null||ee.focus(),document.activeElement!==Ce))return},[R,C]),z=_.useCallback(()=>V([T,v]),[V,T,v]);_.useEffect(()=>{O&&z()},[O,z]);const{onOpenChange:$,triggerPointerDownPosRef:Y}=b;_.useEffect(()=>{if(v){let ae={x:0,y:0};const ce=fe=>{var Ce,ee,te,le;ae={x:Math.abs(Math.round(fe.pageX)-((ee=(Ce=Y.current)==null?void 0:Ce.x)!=null?ee:0)),y:Math.abs(Math.round(fe.pageY)-((le=(te=Y.current)==null?void 0:te.y)!=null?le:0))}},ye=fe=>{ae.x<=10&&ae.y<=10?fe.preventDefault():v.contains(fe.target)||$(!1),document.removeEventListener("pointermove",ce),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",ye,{capture:!0})}}},[v,$,Y]),_.useEffect(()=>{const ae=()=>$(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[$]);const[Z,Q]=yL(ae=>{const ce=R().filter(Ce=>!Ce.disabled),ye=ce.find(Ce=>Ce.ref.current===document.activeElement),fe=vL(ce,ae,ye);fe&&setTimeout(()=>fe.ref.current.focus())}),q=_.useCallback((ae,ce,ye)=>{const fe=!F.current&&!ye;(b.value!==void 0&&b.value===ce||fe)&&(E(ae),fe&&(F.current=!0))},[b.value]),X=_.useCallback(()=>v==null?void 0:v.focus(),[v]),oe=_.useCallback((ae,ce,ye)=>{const fe=!F.current&&!ye;(b.value!==void 0&&b.value===ce||fe)&&N(ae)},[b.value]),se=s==="popper"?Jy:oL,de=se===Jy?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:x}:{};return r.jsx(nL,{scope:n,content:v,viewport:C,onViewportChange:k,itemRefCallback:q,selectedItem:T,onItemLeave:X,itemTextRefCallback:oe,focusSelectedItem:z,selectedItemText:A,position:s,isPositioned:O,searchRef:Z,children:r.jsx(VA,{as:GA,allowPinchZoom:!0,children:r.jsx(HA,{asChild:!0,trapped:b.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:Rt(o,ae=>{var ce;(ce=b.trigger)==null||ce.focus({preventScroll:!0}),ae.preventDefault()}),children:r.jsx(WA,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:r.jsx(se,B(w(w({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:ae=>ae.preventDefault()},y),de),{onPlaced:()=>D(!0),ref:M,style:w({display:"flex",flexDirection:"column",outline:"none"},y.style),onKeyDown:Rt(y.onKeyDown,ae=>{const ce=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!ce&&ae.key.length===1&&Q(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let fe=R().filter(Ce=>!Ce.disabled).map(Ce=>Ce.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const Ce=ae.target,ee=fe.indexOf(Ce);fe=fe.slice(ee+1)}setTimeout(()=>V(fe)),ae.preventDefault()}})}))})})})})});sL.displayName=D0e;var F0e="SelectItemAlignedPosition",oL=_.forwardRef((t,e)=>{const M=t,{__scopeSelect:n,onPlaced:s}=M,o=Me(M,["__scopeSelect","onPlaced"]),a=Ii(yl,n),i=ji(yl,n),[l,c]=_.useState(null),[d,u]=_.useState(null),m=Rn(e,T=>u(T)),f=N1(n),p=_.useRef(!1),g=_.useRef(!0),{viewport:h,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=i,v=_.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&h&&x&&y){const T=a.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),N=y.getBoundingClientRect();if(a.dir!=="rtl"){const Ce=N.left-E.left,ee=A.left-Ce,te=T.left-ee,le=T.width+te,re=Math.max(le,E.width),ve=window.innerWidth-Lo,_e=Ig(ee,[Lo,Math.max(Lo,ve-re)]);l.style.minWidth=le+"px",l.style.left=_e+"px"}else{const Ce=E.right-N.right,ee=window.innerWidth-A.right-Ce,te=window.innerWidth-T.right-ee,le=T.width+te,re=Math.max(le,E.width),ve=window.innerWidth-Lo,_e=Ig(ee,[Lo,Math.max(Lo,ve-re)]);l.style.minWidth=le+"px",l.style.right=_e+"px"}const R=f(),O=window.innerHeight-Lo*2,D=h.scrollHeight,F=window.getComputedStyle(d),V=parseInt(F.borderTopWidth,10),z=parseInt(F.paddingTop,10),$=parseInt(F.borderBottomWidth,10),Y=parseInt(F.paddingBottom,10),Z=V+z+D+Y+$,Q=Math.min(x.offsetHeight*5,Z),q=window.getComputedStyle(h),X=parseInt(q.paddingTop,10),oe=parseInt(q.paddingBottom,10),se=T.top+T.height/2-Lo,de=O-se,ie=x.offsetHeight/2,ae=x.offsetTop+ie,ce=V+z+ae,ye=Z-ce;if(ce<=se){const Ce=R.length>0&&x===R[R.length-1].ref.current;l.style.bottom="0px";const ee=d.clientHeight-h.offsetTop-h.offsetHeight,te=Math.max(de,ie+(Ce?oe:0)+ee+$),le=ce+te;l.style.height=le+"px"}else{const Ce=R.length>0&&x===R[0].ref.current;l.style.top="0px";const te=Math.max(se,V+h.offsetTop+(Ce?X:0)+ie)+ye;l.style.height=te+"px",h.scrollTop=ce-se+h.offsetTop}l.style.margin="".concat(Lo,"px 0"),l.style.minHeight=Q+"px",l.style.maxHeight=O+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[f,a.trigger,a.valueNode,l,d,h,x,y,a.dir,s]);mr(()=>v(),[v]);const[S,C]=_.useState();mr(()=>{d&&C(window.getComputedStyle(d).zIndex)},[d]);const k=_.useCallback(T=>{T&&g.current===!0&&(v(),b==null||b(),g.current=!1)},[v,b]);return r.jsx(U0e,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:k,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:r.jsx(cn.div,B(w({},o),{ref:m,style:w({boxSizing:"border-box",maxHeight:"100%"},o.style)}))})})});oL.displayName=F0e;var B0e="SelectPopperPosition",Jy=_.forwardRef((t,e)=>{const l=t,{__scopeSelect:n,align:s="start",collisionPadding:o=Lo}=l,a=Me(l,["__scopeSelect","align","collisionPadding"]),i=R1(n);return r.jsx(zA,B(w(w({},i),a),{ref:e,align:s,collisionPadding:o,style:B(w({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Jy.displayName=B0e;var[U0e,XS]=$d(yl,{}),Xy="SelectViewport",aL=_.forwardRef((t,e)=>{const d=t,{__scopeSelect:n,nonce:s}=d,o=Me(d,["__scopeSelect","nonce"]),a=ji(Xy,n),i=XS(Xy,n),l=Rn(e,a.onViewportChange),c=_.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(P1.Slot,{scope:n,children:r.jsx(cn.div,B(w({"data-radix-select-viewport":"",role:"presentation"},o),{ref:l,style:w({position:"relative",flex:1,overflow:"hidden auto"},o.style),onScroll:Rt(o.onScroll,u=>{const m=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&f){const g=Math.abs(c.current-m.scrollTop);if(g>0){const h=window.innerHeight-Lo*2,x=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),b=Math.max(x,y);if(b<h){const v=b+g,S=Math.min(h,v),C=v-S;f.style.height=S+"px",f.style.bottom==="0px"&&(m.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=m.scrollTop})}))})]})});aL.displayName=Xy;var rL="SelectGroup",[V0e,G0e]=$d(rL),iL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=Me(a,["__scopeSelect"]),o=kh();return r.jsx(V0e,{scope:n,id:o,children:r.jsx(cn.div,B(w({role:"group","aria-labelledby":o},s),{ref:e}))})});iL.displayName=rL;var lL="SelectLabel",cL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=Me(a,["__scopeSelect"]),o=G0e(lL,n);return r.jsx(cn.div,B(w({id:o.id},s),{ref:e}))});cL.displayName=lL;var jg="SelectItem",[$0e,dL]=$d(jg),uL=_.forwardRef((t,e)=>{const b=t,{__scopeSelect:n,value:s,disabled:o=!1,textValue:a}=b,i=Me(b,["__scopeSelect","value","disabled","textValue"]),l=Ii(jg,n),c=ji(jg,n),d=l.value===s,[u,m]=_.useState(a!=null?a:""),[f,p]=_.useState(!1),g=Rn(e,v=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,v,s,o)}),h=kh(),x=_.useRef("touch"),y=()=>{o||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx($0e,{scope:n,value:s,disabled:o,textId:h,isSelected:d,onItemTextChange:_.useCallback(v=>{m(S=>{var C;return S||((C=v==null?void 0:v.textContent)!=null?C:"").trim()})},[]),children:r.jsx(P1.ItemSlot,{scope:n,value:s,disabled:o,textValue:u,children:r.jsx(cn.div,B(w({role:"option","aria-labelledby":h,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1},i),{ref:g,onFocus:Rt(i.onFocus,()=>p(!0)),onBlur:Rt(i.onBlur,()=>p(!1)),onClick:Rt(i.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Rt(i.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Rt(i.onPointerDown,v=>{x.current=v.pointerType}),onPointerMove:Rt(i.onPointerMove,v=>{var S;x.current=v.pointerType,o?(S=c.onItemLeave)==null||S.call(c):x.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Rt(i.onPointerLeave,v=>{var S;v.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:Rt(i.onKeyDown,v=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&v.key===" "||(I0e.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})}))})})});uL.displayName=jg;var Tu="SelectItemText",mL=_.forwardRef((t,e)=>{const y=t,{__scopeSelect:n,className:s,style:o}=y,a=Me(y,["__scopeSelect","className","style"]),i=Ii(Tu,n),l=ji(Tu,n),c=dL(Tu,n),d=R0e(Tu,n),[u,m]=_.useState(null),f=Rn(e,b=>m(b),c.onItemTextChange,b=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=_.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:x}=d;return mr(()=>(h(g),()=>x(g)),[h,x,g]),r.jsxs(r.Fragment,{children:[r.jsx(cn.span,B(w({id:c.textId},a),{ref:f})),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?fi.createPortal(a.children,i.valueNode):null]})});mL.displayName=Tu;var fL="SelectItemIndicator",pL=_.forwardRef((t,e)=>{const a=t,{__scopeSelect:n}=a,s=Me(a,["__scopeSelect"]);return dL(fL,n).isSelected?r.jsx(cn.span,B(w({"aria-hidden":!0},s),{ref:e})):null});pL.displayName=fL;var ev="SelectScrollUpButton",H0e=_.forwardRef((t,e)=>{const n=ji(ev,t.__scopeSelect),s=XS(ev,t.__scopeSelect),[o,a]=_.useState(!1),i=Rn(e,s.onScrollButtonChange);return mr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(gL,B(w({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null});H0e.displayName=ev;var tv="SelectScrollDownButton",W0e=_.forwardRef((t,e)=>{const n=ji(tv,t.__scopeSelect),s=XS(tv,t.__scopeSelect),[o,a]=_.useState(!1),i=Rn(e,s.onScrollButtonChange);return mr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),o?r.jsx(gL,B(w({},t),{ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null});W0e.displayName=tv;var gL=_.forwardRef((t,e)=>{const d=t,{__scopeSelect:n,onAutoScroll:s}=d,o=Me(d,["__scopeSelect","onAutoScroll"]),a=ji("SelectScrollButton",n),i=_.useRef(null),l=N1(n),c=_.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return _.useEffect(()=>()=>c(),[c]),mr(()=>{var m;const u=l().find(f=>f.ref.current===document.activeElement);(m=u==null?void 0:u.ref.current)==null||m.scrollIntoView({block:"nearest"})},[l]),r.jsx(cn.div,B(w({"aria-hidden":!0},o),{ref:e,style:w({flexShrink:0},o.style),onPointerDown:Rt(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(s,50))}),onPointerMove:Rt(o.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(s,50))}),onPointerLeave:Rt(o.onPointerLeave,()=>{c()})}))}),z0e="SelectSeparator",hL=_.forwardRef((t,e)=>{const o=t,{__scopeSelect:n}=o,s=Me(o,["__scopeSelect"]);return r.jsx(cn.div,B(w({"aria-hidden":!0},s),{ref:e}))});hL.displayName=z0e;var nv="SelectArrow",q0e=_.forwardRef((t,e)=>{const l=t,{__scopeSelect:n}=l,s=Me(l,["__scopeSelect"]),o=R1(n),a=Ii(nv,n),i=ji(nv,n);return a.open&&i.position==="popper"?r.jsx(qA,B(w(w({},o),s),{ref:e})):null});q0e.displayName=nv;function _L(t){return t===""||t===void 0}var xL=_.forwardRef((t,e)=>{const l=t,{value:n}=l,s=Me(l,["value"]),o=_.useRef(null),a=Rn(e,o),i=Nb(n);return _.useEffect(()=>{const c=o.current,d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(i!==n&&m){const f=new Event("change",{bubbles:!0});m.call(c,n),c.dispatchEvent(f)}},[i,n]),r.jsx(ab,{asChild:!0,children:r.jsx("select",B(w({},s),{ref:a,defaultValue:n}))})});xL.displayName="BubbleSelect";function yL(t){const e=qu(t),n=_.useRef(""),s=_.useRef(0),o=_.useCallback(i=>{const l=n.current+i;e(l),(function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),a=_.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return _.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,o,a]}function vL(t,e,n){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let i=Y0e(t,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function Y0e(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var Z0e=YR,K0e=KR,Q0e=JR,J0e=XR,X0e=eL,exe=tL,bL=aL,txe=iL,nxe=cL,sxe=uL,oxe=mL,axe=pL,rxe=hL;const ixe=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)}),lxe=j(()=>I(()=>import("./m7ju152dn5ab1rui.js").then(t=>t._),__vite__mapDeps([22,1])),{loading:t=>L(t)});function cxe(a,o){var i=a,{children:t,iconClassName:e,className:n}=i,s=Me(i,["children","iconClassName","className"]);return r.jsxs(sxe,B(w({ref:o,className:W("__menu-item flex justify-between",n)},s),{children:[r.jsx(oxe,{children:t}),r.jsx(axe,{className:"trailing",children:r.jsx(lxe,{className:e!=null?e:"icon-sm"})})]}))}function dxe(t){return r.jsx(IH,w({$as:K0e},t))}function uxe(s){var o=s,{children:t,className:e}=o,n=Me(o,["children","className"]);return r.jsx(OA,B(w({$as:exe,side:"bottom",sideOffset:4,alignOffset:-4,position:"popper",className:W("max-h-[60vh] min-w-[220px] overflow-auto",e)},n),{children:r.jsx(bL,{children:t})}))}function mxe(){return r.jsx(J0e,{children:r.jsx(ixe,{className:"icon-sm"})})}function fxe({className:t}){return r.jsx(rxe,{className:W("bg-token-border-default mx-5 my-2 h-px",t)})}function pxe({children:t,className:e}){return r.jsx(nxe,{className:W("text-token-text-secondary mx-2 my-1 px-3 text-xs font-semibold",e),children:t})}function zZe({options:t,value:e,onValueChange:n,disabled:s,defaultValue:o,placeholder:a,triggerClassName:i,contentClassName:l,triggerId:c}){return r.jsxs(Dn.Root,{value:e,onValueChange:n,disabled:s,defaultValue:o,children:[r.jsxs(Dn.Trigger,{className:i,id:c,children:[r.jsx(Dn.Value,{placeholder:a}),r.jsx(Dn.Icon,{})]}),r.jsx(Dn.Portal,{children:r.jsx(Dn.Content,{className:l,children:t.map(d=>r.jsx(Dn.Item,{value:d.value,children:d.label},d.value))})})]})}const Dn={Root:Z0e,Trigger:dxe,Value:Q0e,Icon:mxe,Portal:X0e,Content:uxe,Item:Kn.forwardRef(cxe),Separator:fxe,Label:pxe,Group:txe,Viewport:bL};function gxe(t,e){const[n,s]=_.useState(t),o=_.useRef(yr(a=>s(a),e));return _.useEffect(()=>(o.current=yr(a=>{s(a)},e),()=>{var a;(a=o.current)==null||a.cancel()}),[e]),_.useEffect(()=>{var a;(a=o.current)==null||a.call(o,t)},[t]),n}const e3=(...t)=>e=>{t.forEach(n=>{if(typeof n=="function")n(e);else if(n){const s=n;s.current=e}})},hxe=(...t)=>{"use no forget";return _.useMemo(()=>e3(...t),[...t])};var W0,z5;function _xe(){if(z5)return W0;z5=1;var t=xd();function e(n){return typeof n=="function"?n:t}return W0=e,W0}var z0,q5;function xxe(){if(q5)return z0;q5=1;var t=jH(),e=_xe(),n=e9(),s=9007199254740991,o=4294967295,a=Math.min;function i(l,c){if(l=n(l),l<1||l>s)return[];var d=o,u=a(l,o);c=e(c),l-=o;for(var m=t(u,c);++d<l;)c(d);return m}return z0=i,z0}var yxe=xxe();const SL=Wn(yxe),vxe=new RegExp("((?:\\n|\\r)+)((?:\\s{2,}|\\t)+)?|(```)|([#*_-]+)|([(){}[\\]]+)|([\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E]+)|(\\b(?:await|break|case|catch|class|continue|default|define|except|extends|export|finally|implements|import|include|print|private|protected|public|return|span|switch|system|template|throw|type|using|while)\\b)|(\\b(?:async|breakpoint|cin|cmd|console|const|constexpr|cout|def|defn|div|env|fn|func|function|href|html|img|interface|lambda|namespace|println|src|stdout|struct|var|workdir|yield)\\b)","gi"),bxe=[80.33911781017851,19.194942847935266,-78.96158351597562,31.404985863148777,48.13976028814005,82.48501866379408,15.781632991361631,67.81666324403915],Sxe=-9.860574779222393;function CL(t){return Cxe(wxe(t),bxe,Sxe)>0}function Cxe(t,e,n){let s=n;for(let o=0;o<t.length;o++)s+=t[o]*e[o];return s}function wxe(t){const e=[0,0,0,0,0,0,0,0];if(!t)return e;let n;for(;(n=vxe.exec(t))!=null;)for(let s=0;s<e.length;s++)n[s+1]&&(e[s]+=n[s+1].length);for(let s=0;s<e.length;s++)e[s]/=t.length;return e}function kxe(t){var e,n;return{sharedTextdocId:t.shared_textdoc_id,versionInt:(e=t.version)!=null?e:void 0,title:t.name,type:xl(t.textdoc_type),content:t.content,access:Ipe(t.access),isModerationBlocked:t.is_moderation_blocked,isAnonifyApiKeyDetected:(n=t.is_anonify_api_key_detected)!=null?n:!1}}const Mxe=4e4,Txe={[Je.FREE]:8e3,[Je.GO]:8e3,[Je.PLUS]:32e3,[Je.PRO]:128e3,[Je.SELF_SERVE_BUSINESS]:32e3,[Je.ENTERPRISE_CBP]:128e3,[Je.EDUCATION_CBP]:32e3,[Je.K12]:32e3,[Je.QUORUM]:128e3,[Je.DEPRECATED_ENTERPRISE]:128e3,[Je.DEPRECATED_EDU]:32e3};function qZe(t){return Math.round(Txe[t]/3*4)}const Exe="max-length-toast",wL=yr((t,e,n,s=1.5)=>t.warning(e,{description:n,duration:s,id:Exe}),500,{leading:!0,trailing:!1});function YZe(t,e,n){wL(t,e.formatMessage(Pg.exceededMaxLengthTitle),e.formatMessage(Pg.exceededMaxLengthDescription),n)}function Axe(t,e,n){wL(t,e.formatMessage(Pg.exceededMaxLengthTitle),e.formatMessage(Pg.exceededMaxLengthForTruncatedMessageDescription),n)}const Pg=be({exceededMaxLengthDescription:{id:"YhSTHh",defaultMessage:"The document might be longer than a canvas can currently handle. To edit, please reduce the length."},exceededMaxLengthForTruncatedMessageDescription:{id:"r87COE",defaultMessage:"The document was truncated because it was too long."},exceededMaxLengthTitle:{id:"v9nHC8",defaultMessage:"Document may exceed maximum length"}}),L1="temp";function kL(t,e){return"".concat(L1,"-tdc-").concat(e,"-").concat(t)}function t3(t){return"".concat(L1,"-td-").concat(t)}function Ixe(){return"".concat(L1,"-td-user:").concat(Date.now())}function jxe(t){return"".concat(L1,"-td-remix:").concat(t)}const Hd=Nt(Cn(()=>({attachedTempTextdocs:{}}))),{setState:Va,getState:Pxe}=Hd,Nxe=7e3,ML={createTempTextdoc:(t,e,n,s)=>{const o=Ixe(),a=s?xl("code/"+s):CL(t)?lr.CODE_OTHER:lr.DOCUMENT;Va(d=>{d.attachedTempTextdocs[o]={tempTextdocId:o,createdAt:Date.now(),status:mo.INFERRING,type:a,title:e,content:t,create_source:n,hasUserEdits:!1}});let i=!1;const l=new Promise(d=>setTimeout(d,Nxe)).then(()=>{i=!0}),c=pe.safePost("/conversation/textdocs/infer_metadata",{requestBody:{content:t.slice(0,Mxe)}}).then(({name:d,type:u})=>{i||Va(m=>{m.attachedTempTextdocs[o]&&(m.attachedTempTextdocs[o].title=d,m.attachedTempTextdocs[o].type=xl(u))})});return Promise.race([l,c]).finally(()=>{Va(d=>{d.attachedTempTextdocs[o]&&(d.attachedTempTextdocs[o].status=mo.PENDING)})}),o},createRemixTempTextdoc:(t,e)=>{const n=jxe(t);if(!Pxe().attachedTempTextdocs[n])return Va(s=>{s.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:mo.PENDING,type:lr.LOADING,title:"",content:"",create_source:mm.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:t}}),pe.safeGet("/textdoc/shared/{shared_textdoc_id}",{parameters:{path:{shared_textdoc_id:t}}}).then(({shared_textdoc:s})=>{const o=kxe(s);Va(a=>{a.attachedTempTextdocs[n]={tempTextdocId:n,createdAt:Date.now(),status:mo.PENDING,type:o.type,title:e.formatMessage({id:"cuH4su",defaultMessage:"Copy of {title}"},{title:o.title}),content:o.content,create_source:mm.REMIX_OF_SHARED_CANVAS,hasUserEdits:!1,remixSharedTextdocId:o.sharedTextdocId}})}).catch(()=>{ML.removeTempTextdoc(n),window.location.href=MA(TA.CANVAS_NOT_FOUND)}),n},replaceTempTextdocContent:(t,e)=>{Va(n=>{n.attachedTempTextdocs[t].content=e,n.attachedTempTextdocs[t].hasUserEdits=!0})},markAsSent:t=>{Va(e=>{e.attachedTempTextdocs[t].status===mo.PENDING?e.attachedTempTextdocs[t].status=mo.SENT:delete e.attachedTempTextdocs[t]})},markAllAsSent:()=>{Va(t=>{for(const e of Object.keys(t.attachedTempTextdocs))t.attachedTempTextdocs[e].status===mo.PENDING?t.attachedTempTextdocs[e].status=mo.SENT:delete t.attachedTempTextdocs[e]})},removeTempTextdoc:t=>{Va(e=>{delete e.attachedTempTextdocs[t]})}},af=Rl(({attachedTempTextdocs:t})=>t),Rxe=Rl(t=>Object.values(t)),n3=Rl(t=>Object.values(t).filter(e=>e.status!==mo.SENT)),Lxe=()=>n3(af(Hd.getState())),Oxe=()=>Hd(t=>Rxe(af(t))),Dxe=()=>Hd(t=>n3(af(t))),ZZe=t=>Hd(e=>{if(t)return af(e)[t]}),KZe=()=>Hd(t=>n3(af(t)).length>0),Fxe=t=>{const[e,n]=_.useState(null),s=_.useCallback(a=>{n(i=>{if(!i)return[a];const l=[...i];for(let c=0;c<i.length;c++)l[c].id===a.id?l[c]=a:c===l.length-1&&l.push(a);return l})},[]),o=_.useCallback(()=>n(null),[]);return hk(gg.TurnComplete,async()=>{await t(),o()}),hk(gg.CanvasMessage,async({message:a})=>{var d;const{message:i}=a,{recipient:l,author:c}=i;(l!=null&&l.startsWith(di)||(d=c.name)!=null&&d.startsWith(di))&&s(i)}),e};function Bxe(t,e){return t.replace(new RegExp("\\\\(\\d+)|\\\\g<(?:(\\d+)|(\\D[^>]*))>|((?<!\\\\)\\\\(?:g(?:<[^>]*)?)?$)","gi"),(n,s,o,a,i)=>{var c,d,u;if(s==="0")return"\\0";const l=s!=null?s:o;if(l)return(c=e[n9(l)])!=null?c:"";if(a)return(u=(d=e.groups)==null?void 0:d[a])!=null?u:"";if(i)return"";throw new Error("Unreachable")})}function Uxe(t,e){var x;let n="",s=0,o=0,a=0,i=0,l=!1;const c=y=>{s+=y},d=y=>{s>o&&(n+=t.slice(o,s)),s=o=s+y},u=y=>{d(0),n+=y},m=()=>{u("\\"),c(1)},f=y=>{if(s+y<t.length)return t[s+y]},p=(y,b=0)=>s+b<t.length&&y===t[s+b],g=y=>{const b=t.indexOf(y,s);if(b===-1)d(t.length-s);else return b-s},h=y=>{let b=1;if(f(y)==="\\"){const S=f(y+1);b=S==="U"?10:S==="u"?6:S==="x"?4:2}const v=s+y+b>t.length;return v&&d(t.length-s),v};for(;s<t.length;){if(p("\\")){if(h(0))continue;const v=(x=f(1))!=null?x:"";if(v==="a")d(2),u("\\x07");else if(v==="A")d(2),u("^");else if(v==="z")d(2),u("$");else if(v==="Z")d(2),u("(?=\\n?$)");else if(v==="U"){const S=t.slice(s+2,s+10);d(10),u("\\u{".concat(parseInt(S,16).toString(16),"}"))}else if(v==="u")c(6);else if(v==="x")c(4);else{let S;l?S=/[0bdDsSwWfnrtv()[\]{}|/\\^-]/.test(v):/[1-9]/.test(v)?S=parseInt(v,10)<=i:S=/[0bBdDsSwWfnrtv()[\]{}|/\\^$.?*+]/.test(v),S?c(2):d(1)}continue}if(p("]")){l?(l=!1,c(1)):m();continue}else if(l){if(p("-")&&h(1))continue;/[()[\]{}|/\\]/.test(t[s])?m():c(1);continue}else if(p("[")){l=!0,c(1),p("]")&&m();continue}if(p("|")&&h(1))continue;if(p("{")){const v=/^\{(?:\d+(?:,\d*)?(\}|$)|$)/.exec(t.slice(s));s>0&&(v==null?void 0:v[1])==="}"?c(v[0].length):s>0&&v&&e?d(v[0].length):m();continue}else if(p("}")){m();continue}if(p("+")){const v=f(-1);v&&/[*+?}]/.test(v)&&f(-2)!=="\\"?d(1):c(1);continue}if(p(")")){a>0?(a--,c(1)):m();continue}if(!p("(")){c(1);continue}if(h(1))continue;if(f(1)!=="?"){a++,i++,c(1);continue}if(h(2))continue;const y=f(2);if(!y){d(2);continue}if(y==="#"){const v=g(")");v&&d(1+v);continue}if(y==="P"){if(f(3)==="="){const v=g(")");if(v){const S=t.slice(s+4,s+v);d(1+v),u("\\k<".concat(S,">"))}}else{const v=g(">");if(v){const S=t.slice(s+4,s+v);if(d(1+v),h(0))continue;u("(?<".concat(S,">")),a++}}continue}if(/[-a-z]/.test(y)){const v=t.indexOf(":",s)>=0,S=g(v?":":")");if(S&&d(1+S),v){if(h(0))continue;u("(?:"),a++}continue}if(y===">"){if(d(3),h(0))continue;u("(?:"),a++;continue}const b=y==="<"?4:3;h(b)||(c(b),a++)}for(n+=t.slice(o,t.length),l&&(n+="]");a-- >0;)n+=")";return n.length>0?n:"(?!)"}function Y5(t){const e=[/^`{1,3}\s*$/,/^```[^\n]*\n?/],n=[/\n?`{1,3}\s*$/];for(const s of e)if(s.test(t)){t=t.replace(s,"");break}for(const s of n)if(s.test(t)){t=t.replace(s,"");break}return t}function TL(t){let e=t;return e=e.replace(/\.[^/.]+$/,""),e=e.replace(/_/g," "),e=e.replace(/([a-z])([A-Z])/g,"$1 $2"),e.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" ")}function Ng(t,e){return e!=null||t!=null?{modelSelectionPositionRange:e,modelCursorPosition:t}:void 0}function Vxe(t,e,n){const s=[],o=e.start-e.end+n;for(const a of t){const i=Gxe(a.at,e,o);i&&s.push(i===a.at?a:B(w({},a),{at:i}))}return s}function Gxe(t,e,n){return e.start>=t.end?t:e.start<=t.start&&e.end>=t.end?null:e.end<=t.start?n===0?t:{start:t.start+n,end:t.end+n}:e.start<=t.start?{start:e.end+n,end:t.end+n}:e.end>=t.end?{start:t.start,end:e.start}:{start:t.start,end:t.end+n}}const $xe=/[*_-\s\d.\\`]+$/;function sv(t,e){return e?t.replace($xe,""):t}function EL(t,e){return ti(t,n=>{for(const s of e){if(s.kind===Fn.CREATE){const o=Wxe(s);Uu(n,o)}else{const o=n.textdocById[s.textdocId];if(!o){Oe.addError("Attempted to apply canmore operation to an unknown target id",{textdocOp:s});continue}const a=o.versions[o.versions.length-1],i=AL(a,s);Uu(n,i,Hxe(a,s))}s.textdocId&&(n.latestTextdocId=s.textdocId)}})}function Hxe(t,e){if(e.author.role===Ze.User)return t.messageId?!0:e.createdAt-t.createdAt>3600;switch(e.kind){case Fn.REWRITE:return!0;case Fn.EDIT:return e.messageId!==t.messageId;case Fn.ADD_COMMENT:return!1;case Fn.REMOVE_COMMENT:return!1}}function Wxe(t){var s,o;const e=!!t.isPartial,n=sv(t.content,e);return{textdocId:t.textdocId,versionInt:(s=t.versionInt)!=null?s:null,messageId:(o=t.messageId)!=null?o:null,title:t.title,type:t.type,content:n,createdAt:t.createdAt,status:e?Us.CREATING:Us.COMPLETE,comments:[],modelCursor:Ng(t.author.role===Ze.Assistant&&t.isPartial?n.length:void 0)}}function zxe(t,e){if(!t.isPartial)return;if(t.isPartialRange)return Ng(void 0,t.at);const n=t.at.start+e.length;return Ng(n)}function AL(t,e){var n,s,o,a,i,l,c,d,u,m;switch(e.kind){case Fn.REMOVE_COMMENT:return B(w({},t),{versionInt:(n=e.versionInt)!=null?n:t.versionInt,comments:t.comments.map(f=>f.id===e.commentId?B(w({},f),{status:e.reason===aR.ACCEPT?Wy.ACCEPT_INITIATED:Wy.DISMISSED}):f)});case Fn.REWRITE:{const f=t.status!==Us.COMPLETE||e.isPartial===!0,p=sv(e.content,f),g=e.author.role===Ze.Assistant&&e.isPartial?p.length:void 0;return B(w({},t),{versionInt:(s=e.versionInt)!=null?s:t.versionInt,messageId:(o=e.messageId)!=null?o:null,content:p,createdAt:e.createdAt,comments:(a=e.comments)!=null?a:t.comments,status:e.isPartial?Us.REWRITING:Us.COMPLETE,modelCursor:Ng(g)})}case Fn.EDIT:{const f=e.isPartial&&e.isPartialRange?t.content.slice(e.at.start,e.at.end):sv(e.content,e.isPartial===!0),p=t.content.slice(0,e.at.start)+f+t.content.slice(e.at.end);return B(w({},t),{versionInt:(i=e.versionInt)!=null?i:t.versionInt,messageId:(l=e.messageId)!=null?l:null,content:p,createdAt:e.createdAt,status:e.isPartial?Us.UPDATING:Us.COMPLETE,comments:Vxe(t.comments,e.at,f.length),modelCursor:zxe(e,f)})}case Fn.ADD_COMMENT:{const f={id:(c=e.id)!=null?c:e.tempId,tempId:e.tempId,at:e.at,content:(d=e.content)!=null?d:""},p=t.comments.concat(f);return B(w({},t),{versionInt:(u=e.versionInt)!=null?u:t.versionInt,messageId:(m=e.messageId)!=null?m:null,createdAt:e.createdAt,status:e.isPartial?Us.COMMENTING:Us.COMPLETE,comments:p})}}}function qxe(t){let e="";const n=t.length;let s=0,o=0;for(;s<n;){let a=t.charCodeAt(s);if(a!==92){s++;continue}if(o<s&&(e+=t.slice(o,s)),s++,s>=n){e+="\\";break}switch(a=t.charCodeAt(s),a){case 110:e+="\n",s++;break;case 116:e+="	",s++;break;case 114:e+="\r",s++;break;case 98:e+="\b",s++;break;case 102:e+="\f",s++;break;case 118:e+="\v",s++;break;case 48:e+="\0",s++;break;case 39:e+="'",s++;break;case 34:e+='"',s++;break;case 92:e+="\\",s++;break;case 120:if(s+2<n){const i=parseInt(t.slice(s+1,s+3),16);if(!isNaN(i)){e+=String.fromCharCode(i),s+=3;break}}e+="\\x",s++;break;case 117:if(s+1<n)if(t.charAt(s+1)==="{"){const i=t.indexOf("}",s+2);if(i!==-1){const l=parseInt(t.slice(s+2,i),16);if(!isNaN(l)&&l<=1114111){e+=String.fromCodePoint(l),s=i+1;break}}}else{const i=parseInt(t.slice(s+1,s+5),16);if(!isNaN(i)){e+=String.fromCharCode(i),s+=5;break}}e+="\\u",s++;break;default:e+="\\"+t.charAt(s),s++;break}o=s}return o<n&&(e+=t.slice(o)),e}const Z5=t=>t===" "||t==="\n"||t==="\r"||t==="	";function Yxe(t,e=!1){let n=0,s=null;const o=[];if(!t)return[void 0,o];if(e)return[l(),o];try{return[JSON.parse(t),null]}catch(g){return s=g,[l(),o]}function a(){for(;n<t.length&&Z5(t[n]);)n++;return n<t.length}function i(g){return a()&&t[n]===g?(n++,!0):!1}function l(){if(a())switch(t[n]){case"{":return m();case"[":return f();case'"':{const[g]=d();return g}case"f":return p("false",!1);case"t":return p("true",!0);case"n":return p("null",null);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return u()}throw s}function c(g,h=!1){return h?qxe(g):g}function d(g=!1){const h=n+1;let x=!1;for(n++;n<t.length;){const y=t[n++];if(y==="\\"){if(x=!0,n===t.length||t[n]==="u"&&n+4>=t.length){const b=n-1;return n=t.length,[c(t.slice(h,b),x),!1]}n++;continue}if(y==='"'){let b=n;for(;b<t.length&&Z5(t[b]);)b++;if(t[b]==null||t[b]===","||t[b]==="]"||t[b]==="}"||g&&t[b]===":")return[c(t.slice(h,n-1),x),!0]}}return[c(t.slice(h,n),x),!1]}function u(){const g=n;for(;n<t.length&&/[0-9.eE+-]/.test(t[n]);)n++;const h=Number(t.slice(g,n));if(isNaN(h)){if(a())throw s;return 0}return h}function m(){n++;const g={};if(i("}"))return g;for(;a();){const[h,x]=d(!0);if(!x||(o.push(h),!a()))break;if(!i(":"))throw s;if(!a()||(g[h]=l(),!a()))break;if(i("}")){o.pop();break}if(!i(","))throw s;o.pop()}return g}function f(){n++;const g=[];if(i("]"))return g;for(o.push(0);a()&&(g.push(l()),!!a());){if(i("]")){o.pop();break}if(!i(","))throw s;o[o.length-1]=g.length}return g}function p(g,h){const x=n+g.length;if(x<=t.length?t.slice(n,x)===g:g.startsWith(t.slice(n)))return n=x,h;throw s}}function Gu(t,e,n=!1){try{const[s,o]=Yxe(t);return[e(s),o]}catch(s){return n&&Ll.logError("JSON parsing",s),[void 0,[]]}}function ru(t,e){return t!=null&&e.every((n,s)=>t[s]===n)}const Zxe=Go({type:ci(hs),name:ci(hs),content:ci(hs)}),Kxe=Go({updates:s9(Go({pattern:ci(hs),multiple:ci(Lu),replacement:ci(hs)}))}),Qxe=Go({comments:s9(Go({pattern:ci(hs),comment:ci(hs)}))});function IL(t){var s;const e=t.author.name;if(!lR(e))return null;const n=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return{function:e,status:Xxe(t),textdocId:n==null?void 0:n.textdoc_id,type:(n==null?void 0:n.textdoc_type)&&xl(n.textdoc_type),versionInt:eye(n),commentIds:n==null?void 0:n.comment_ids}}function jL(t,e,n){var d,u,m,f,p;const{id:s,author:o,recipient:a,create_time:i}=e;if(!i)throw new Error("Expected a create_time");const l=ko(e),c=n&&IL(n);if((d=e==null?void 0:e.metadata)!=null&&d.is_redacted||(c==null?void 0:c.status)===St.REDACTED||l==="The output of this plugin was redacted.")return{function:a,status:St.REDACTED,messageId:s,author:o,createdAt:i};switch(a){case qn.CreateTextdoc:{const[g,h]=Gu(l,Zxe),x=(u=c==null?void 0:c.type)!=null?u:!(g!=null&&g.type)||ru(h,["type"])?void 0:xl(g.type);return{function:qn.CreateTextdoc,status:(m=c==null?void 0:c.status)!=null?m:q0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,title:g==null?void 0:g.name,type:x,content:g==null?void 0:g.content}}case qn.UpdateTextdoc:{const[g,h]=Gu(l,Kxe,!t),x=g==null?void 0:g.updates.map((y,b)=>B(w({},y),{isPartialPattern:ru(h,["updates",b,"pattern"]),isPartial:ru(h,["updates",b])}));return{function:qn.UpdateTextdoc,status:(f=c==null?void 0:c.status)!=null?f:q0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,updates:x}}case qn.CommentTextdoc:{const[g,h]=Gu(l,Qxe,!t),x=c==null?void 0:c.commentIds,y=g==null?void 0:g.comments.map((b,v)=>B(w({},b),{id:x==null?void 0:x[v],isPartialPattern:ru(h,["comments",v,"pattern"]),isPartial:ru(h,["comments",v])}));return{function:qn.CommentTextdoc,status:(p=c==null?void 0:c.status)!=null?p:q0(t,e,h!=null),messageId:s,author:o,createdAt:i,textdocId:c==null?void 0:c.textdocId,versionInt:c==null?void 0:c.versionInt,comments:y}}}}function ov(t){return lR(t==null?void 0:t.recipient)}function Jxe(t,e=0){for(let n=e;n<t.length;n++)if(ov(t[n]))return!0;return!1}function q0(t,e,n){var o,a;return((a=(o=e==null?void 0:e.metadata)==null?void 0:o.finish_details)==null?void 0:a.type)==="interrupted"?St.CANCELED:t?n?St.STREAMING:St.WAITING:St.FAILED}function Xxe(t){var n,s;if((n=t==null?void 0:t.metadata)!=null&&n.is_redacted)return St.REDACTED;if((t==null?void 0:t.content.content_type)===dt.SystemError)return St.FAILED;const e=(s=t==null?void 0:t.metadata)==null?void 0:s.canvas;return e!=null&&e.is_failure!==!0?St.COMPLETE:St.FAILED}function eye(t){var e;return(e=t==null?void 0:t.version)!=null?e:t==null?void 0:t.version_int}const tye=5;function s3(t){var n;let e=null;for(let s=0;s<t.length;s++){const o=t[s];if(ov(o)){let a=null;for(let i=s+1;i<t.length;i++){const l=t[i];if(ov(l))break;if(((n=l.author)==null?void 0:n.name)===o.recipient){a=l;break}}e?e.push([o,a]):e=[[o,a]]}}return e}function nye(t,e,n){let s=null;const o=s3(n);if(!o)return s;for(const[a,i]of o){const l=jL(t,a,i),c=sye(e,l);c&&(e&&(e=EL(e,c)),s?s=s.concat(c):s=c)}return s}const Y0=Rl((t,e,n)=>{Oe.addError(e,n)},([t],[e])=>t===e);function sye(t,e){var a,i,l,c,d,u,m;if(e.status===St.FAILED||e.status===St.CANCELED)return null;if(e.function===qn.CreateTextdoc){if(!e.type)return null;const f=t3(e.messageId),p=e.content&&kg(e.type)?Y5(e.content):e.content;return[{kind:Fn.CREATE,textdocId:(a=e.textdocId)!=null?a:f,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,tempTextdocId:f,title:TL((i=e.title)!=null?i:""),type:e.type,content:p!=null?p:"",isPartial:e.status===St.STREAMING}]}const n=t==null?void 0:t.latestTextdocId,s=(l=e==null?void 0:e.textdocId)!=null?l:n;if(e.status===St.COMPLETE&&(n?e!=null&&e.textdocId&&e.textdocId!==n&&Y0(e.messageId,"Attempted to parse canmore operation with incorrect client latest target id",{latestTextdocId:n,toolCall:e}):Y0(e.messageId,"Attempted to parse canmore operation but latestTextdocId is unset",{toolCall:e})),!s)return null;const o=Wo((c=aS(t,s))==null?void 0:c.versions);if(!o)return e.status===St.COMPLETE&&Y0(e.messageId,"Attempted to parse canmore operation against unknown target id",{textdocId:s}),null;switch(e.function){case qn.UpdateTextdoc:{const f=[],p=(d=e.updates)!=null?d:[];for(let g=0;g<p.length;g++){const h=p[g];if(h.isPartialPattern&&h.pattern&&h.pattern.length<tye)continue;if(h.pattern===".*"){const b=h.replacement?kg(o.type)?Y5(h.replacement):h.replacement:"";return[{kind:Fn.REWRITE,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,createdAt:e.createdAt,author:e.author,content:b,isPartial:e.status===St.STREAMING&&h.isPartial,comments:[]}]}const x=Q5(h.pattern,h.isPartialPattern,h.multiple);if(!x)continue;let y=!1;for(const b of K5(o.content,x,h.multiple)){y=!0;const v=J5(b),S=h.replacement&&Bxe(h.replacement,b);for(const C of f)if(C.at.end<=v.start){if(!C.isPartialRange){const k=C.at.start-C.at.end+C.content.length;v.start+=k,v.end+=k}}else C.at.start<v.end;f.push({kind:Fn.EDIT,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,at:v,content:S!=null?S:"",isPartialRange:e.status===St.STREAMING&&h.isPartialPattern,isPartial:e.status===St.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!y)return null}return f.length>0?f:null}case qn.CommentTextdoc:{const f=[],p=(u=e.comments)!=null?u:[];for(let g=0;g<p.length;g++){const h=p[g],x=Q5(h.pattern,h.isPartialPattern);if(!x)continue;let y=!1;for(const b of K5(o.content,x)){y=!0;const v=J5(b);v.end>v.start&&f.push({kind:Fn.ADD_COMMENT,textdocId:s,versionInt:e.versionInt,messageId:e.messageId,author:e.author,createdAt:e.createdAt,id:h.id,tempId:kL(e.messageId,g),at:v,content:(m=h.comment)!=null?m:"",isPartialRange:e.status===St.STREAMING&&h.isPartialPattern,isPartial:e.status===St.STREAMING&&h.isPartial})}if(!h.isPartialPattern&&!y)return null}return f.length>0?f:null}}}function*K5(t,e,n=!1){if(n)yield*m_(t.matchAll(e));else{const s=t.match(e);s&&(yield s)}}function Q5(t,e,n=!1){if(t)try{const s=Uxe(t,e);return new RegExp(s,n?"gsv":"sv")}catch(s){console.warn("Assistant returned invalid Regexp, dropping",{pattern:t,error:s})}}function J5(t){return{start:t.index,end:t.index+t[0].length}}const X5=(t,e)=>{var o,a,i;for(const l of e){const c=(o=l.metadata)==null?void 0:o.canvas;if(c!=null&&c.user_created_temp_textdoc_id&&(c!=null&&c.textdoc_id)){const{user_created_temp_textdoc_id:d,textdoc_id:u}=c;t=ti(t,m=>{m.latestTextdocId=u,m.resolveTempTextdocId[d]=u})}}const n=Ml(e,l=>cR(l));for(let l=e.length-1;l>=0;l--){const{metadata:c}=e[l],d=c==null?void 0:c.canvas,u=(i=(a=c==null?void 0:c.open_in_canvas_view)==null?void 0:a.id)!=null?i:d==null?void 0:d.textdoc_id;if(u){t=ti(t,m=>{m.latestTextdocId=u!=null?u:null,n&&(m.lastCanvasAssistantMessageById[u]=n.id)});break}}const s=s3(e);if(!s)return t;for(const[l,c]of s){const d=c&&IL(c);d&&(t=ti(t,u=>{if(d.function===qn.CreateTextdoc){const{textdocId:m}=d;m&&(u.resolveTempTextdocId[t3(l.id)]=m)}else if(d.function===qn.CommentTextdoc){const{commentIds:m=[]}=d;for(let f=0;f<m.length;f++){const p=m[f],g=kL(l.id,f);u.resolveTempCommentId[p]=g}}}))}return t},oye=(t,e,n)=>{const s=ft(t),o=me.getTree(s),a=me.getVariantIds(s,n.messages[0].id);if(a.length<2)return X5(e,n.messages);for(const i of a){const l=o.getLeafFromNode(i).id,c=me.getConversationLastTurn(s,l);c&&(e=X5(e,c.messages))}return e};function aye(){return new WeakMap}function PL(t,e,n,s){const o=n[s];let a=e.get(o);if(!a){const i=s===0?uP():PL(t,e,n,s-1);a=oye(t,i,o),e.set(o,a)}return a}function rye(t,e,n){return n.length===0?null:PL(t,e,n,n.length-1)}function iye(t,e){const[n]=_.useState(aye);return _.useMemo(()=>rye(t,n,e),[n,t,e])}const eM=t=>{if(!t)return;const{messages:e}=t,n=hA(e!=null?e:[],o=>o.author.role===Ze.System||o.author.role===Ze.Developer),s=n===-1?e:e==null?void 0:e.slice(n+1);if(s&&Jxe(s))return s},lye=({lastTurn:t,clientThreadId:e,isRequestActive:n,persistedTextdocStoreStatus:s})=>{const[o,a]=_.useState(!0),i=n||!o||s!==Mg.READY,l=_.useMemo(()=>{if(!t)return null;const d=ft(e),u=me.getTree(d),m=me.getVariantIds(d,t.messages[0].id);return m.length<2?null:m.map(f=>{const p=u.getLeafFromNode(f).id;return me.getConversationLastTurn(d,p)})},[e,t]);return[_.useMemo(()=>{var d,u;return!i||!t?null:l?(u=l.flatMap(eM).filter(Ob))!=null?u:null:(d=eM(t))!=null?d:null},[i,t,l]),a]};class NL{constructor(e,n,s,o){ne(this,"sentLength",null);ne(this,"sentIsComplete",null);ne(this,"bufferedLength");ne(this,"requestUpdateRaf",null);ne(this,"prevBuffer");ne(this,"nextBuffer");this.targetLength=e,this.isActivelyStreaming=n,this.onUpdate=o,this.bufferedLength=s?0:this.targetLength,s&&!s.isComplete()?(s.nextBuffer=this,this.prevBuffer=s):s!=null&&s.isComplete()&&(this.bufferedLength=this.targetLength)}setTargetLength(e,n){e<this.bufferedLength&&(this.bufferedLength=e),this.targetLength=e,this.isActivelyStreaming=n,this.shouldUpdate()&&this.updateBufferedState()}shouldUpdate(){return!this.prevBuffer&&(this.isBuffering()||this.sentIsComplete!==this.isComplete())}isBuffering(){return this.bufferedLength<this.targetLength}isComplete(){return!this.prevBuffer&&!this.isActivelyStreaming&&!this.isBuffering()}getTotalRemainingLength(){let e=this.targetLength,n=this.nextBuffer;for(;n;)e+=n.targetLength,n=n.nextBuffer;return e-this.bufferedLength}requestUpdate(){this.requestUpdateRaf||this.sentLength===this.bufferedLength&&this.sentIsComplete===this.isComplete()||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this.requestUpdateRaf=null;const e=this.isComplete();this.sentLength=this.bufferedLength,this.sentIsComplete=e,this.onUpdate(this.bufferedLength,e),e&&this.resolveDependency()}))}resolveDependency(){if(this.nextBuffer){const e=this.nextBuffer;this.nextBuffer=e.prevBuffer=void 0,e.shouldUpdate()&&e.updateBufferedState()}}destroy(){this.resolveDependency(),this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}const zi=class zi extends NL{constructor(){super(...arguments);ne(this,"frameRequestId");ne(this,"prevAddFrameTime")}updateBufferedState(){if(!this.frameRequestId){const n=this.getTotalRemainingLength(),s=Math.max(zi.MIN_BUFFERING_CHAR_PER_MS,n/zi.MAX_BUFFERING_LAG_MS);this.frameRequestId=window.requestAnimationFrame(o=>{this.frameRequestId=void 0;const a=this.prevAddFrameTime===void 0?2/zi.MIN_BUFFERING_CHAR_PER_MS:o-this.prevAddFrameTime,i=Math.floor(s*a);i>0&&(this.prevAddFrameTime=o,this.bufferedLength=Math.min(this.bufferedLength+i,this.targetLength)),this.requestUpdate(),this.shouldUpdate()&&this.updateBufferedState()})}}destroy(){super.destroy(),this.frameRequestId&&window.cancelAnimationFrame(this.frameRequestId)}};ne(zi,"MAX_BUFFERING_LAG_MS",500),ne(zi,"MIN_BUFFERING_CHAR_PER_MS",1/30);let av=zi;class o3 extends NL{constructor(e,n,s,o){super(yg(e).length,s,o,(a,i)=>n(H8(this.textMessageParts,a),i)),this.textMessageParts=e}onMessagePartsUpdated(e,n){this.textMessageParts=e,this.setTargetLength(yg(e).length,n)}removeDelayedRender(){return!this.isBuffering()}}class QZe extends o3{constructor(n,s,o,a){super(n,s,o,a);ne(this,"ALPHA",.1);ne(this,"DIV",1.2);ne(this,"MUL",1.5);ne(this,"minRate",1);ne(this,"expectedDisplayInterval",.05);ne(this,"displayNextChunkTimeout");ne(this,"_rate",this.minRate);ne(this,"_lastArrival",null);ne(this,"_lastDrain",0);ne(this,"_drainCarry",0);ne(this,"_lastTargetLength",0);this.updateReactComponentDisplay=s}removeDelayedRender(){return this.bufferedLength>1}calculateBufferLength(){if(!this.isActivelyStreaming){this.bufferedLength<this.targetLength&&(this.bufferedLength=this.targetLength,this.requestUpdate());return}const n=performance.now()/1e3,s=this.targetLength-this._lastTargetLength;if(this._lastTargetLength=this.targetLength,s>0){if(this._lastArrival!=null){const c=Math.max(n-this._lastArrival,10),d=s/c;this._rate=Math.max(this.minRate,this.ALPHA*d+(1-this.ALPHA)*this._rate)}else this._rate=s;this._lastArrival=n}const o=n-this._lastDrain;this._lastDrain=n;const a=this.targetLength-this.bufferedLength;for(let c=0;c<(o+this._drainCarry)/this.expectedDisplayInterval;c++)a&&a<this._rate*this.MUL&&(this._rate=(a+this._rate*this.MUL)/2),a>this._rate/this.DIV&&(this._rate=(a+this._rate/this.DIV)/2);this._rate=Math.max(this.minRate,this._rate);const i=o*this._rate+this._drainCarry,l=Math.floor(i);this._drainCarry=i-l,l>=1&&(this.bufferedLength=Math.min(this.bufferedLength+l,this.targetLength)),this.requestUpdate()}updateBufferedState(){this.calculateBufferLength(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},50))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}}const Qa=class Qa extends o3{constructor(n,s,o,a){super(n,s,o,a);ne(this,"displayNextChunkTimeout");this.updateReactComponentDisplay=s}updateBufferedState(){const n=this.getTotalRemainingLength(),s=n<Qa.MIN_CHARS_BEHIND_TO_CATCHUP?this.targetLength-this.bufferedLength:Math.ceil(n*Qa.UPDATE_FREQUENCY_MS/Qa.CATCHUP_TIME_MS);this.bufferedLength=Math.min(this.bufferedLength+s,this.targetLength),this.requestUpdate(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},Qa.UPDATE_FREQUENCY_MS))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}};ne(Qa,"MIN_CHARS_BEHIND_TO_CATCHUP",5),ne(Qa,"CATCHUP_TIME_MS",300),ne(Qa,"UPDATE_FREQUENCY_MS",30);let Rg=Qa;const Xf=15,Z0=8;class JZe extends o3{constructor(n,s,o,a,i){var l;super(n,s,o,a);ne(this,"LAG_FACTORS",w({".":Xf,"!":Xf,"?":Xf,"\n":Xf,",":Z0,":":Z0,";":Z0,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08},typeof window<"u"&&window.__PUNCTUATION_BUFFER_LAG_FACTORS));ne(this,"concatenatedText");ne(this,"displayNextCharTimeout");ne(this,"debug");ne(this,"streamStartMs");ne(this,"averageMsPerChar");ne(this,"_throttledDebugLog",Eb(n=>{console.debug(n)},500,{leading:!0,trailing:!0}));this.updateReactComponentDisplay=s,this.concatenatedText=yg(this.textMessageParts),this.debug=(l=i==null?void 0:i.debug)!=null?l:!1,this.streamStartMs=0,this.averageMsPerChar=.25,this.debug&&console.debug(["PunctuationBuffer:","[lagFactors: ".concat(JSON.stringify(this.LAG_FACTORS,null,2),"]")].join("\n"))}displayNextChar(){this.displayNextCharTimeout=void 0,this.shouldUpdate()&&(this.bufferedLength++,this.requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}updateBufferedState(){this.concatenatedText=yg(this.textMessageParts),this.streamStartMs===0?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.targetLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){var l;const n=this.concatenatedText[this.bufferedLength-1],s=this.getTotalRemainingLength(),o=1/Math.max(s*this.LAG_FACTORS.BUFFER_FACTOR,1),a=((l=this.LAG_FACTORS[n])!=null?l:this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*o,i=this.averageMsPerChar*a;return this.debug&&this._throttledDebugLog(["PunctuationBuffer:","[lagMs: ".concat(i,"]"),'[lastChar: "'.concat(n,'"]'),"[averageMsPerChar: ".concat(this.averageMsPerChar,"]"),"[lagFactor: ".concat(a,"]"),"[bufferLagFactor: ".concat(o,"]"),"[remainingLength: ".concat(s,"]"),"==="].join("\n")),i}}function cye(t){return t.type==="text"}class tM{constructor(e,n,s="",o,a){ne(this,"buffer");ne(this,"text");this.buffer=new e([s],(i,l)=>{const c=i.filter(cye).map(d=>d.text).join("");n(c,l)},o,a),this.text=s}setText(e,n=!0){this.text=e,this.buffer.onMessagePartsUpdated([this.text],n)}isBuffering(){return this.buffer.isBuffering()}isComplete(){return this.buffer.isComplete()}destroy(){return this.buffer.destroy()}}function dye(t,e,n){var c;const[s,o]=_.useState(null),a=(c=e==null?void 0:e.length)!=null?c:0,i=a>0,l=_.useRef(new Map);return _.useEffect(()=>{if(e)for(const d of e){const{messageId:u}=d;if(u==null||l.current.has(u))continue;const m=new uye((f,p)=>{if(o(g=>B(w({},g),{[u]:f})),!!p){for(const[g,h]of l.current.entries())if(g!==u&&!h.isComplete())return;n(!0)}});l.current.set(u,m)}},[a]),_.useEffect(()=>{const d=l.current;return()=>{for(const u of d.values())u.destroy()}},[i]),_.useEffect(()=>{if(!i)return o(null);const d=Md(e,"messageId");for(const[u,m]of Object.entries(d)){const f=l.current.get(u);f&&f.setTextdocOps(m,!t)}},[i,t,e]),_.useMemo(()=>!i||!s?null:Object.values(s).flatMap(d=>d!=null?d:[]),[i,s])}class uye{constructor(e){ne(this,"bufferedOps",[]);ne(this,"isFinishedStreaming",!1);ne(this,"rangeBuffers",[]);ne(this,"textBuffers",[]);ne(this,"completeCounters",[]);ne(this,"lastBuffer");this.onUpdate=e}destroy(){for(const e of this.rangeBuffers)e==null||e.destroy();for(const e of this.textBuffers)e==null||e.destroy();this.isFinishedStreaming=!0,this.rangeBuffers=[],this.textBuffers=[],this.completeCounters=[],this.lastBuffer=void 0}isBuffering(){var e,n,s,o;return!(((n=(e=this.lastBuffer)==null?void 0:e.isComplete())==null||n)&&((o=(s=Wo(this.completeCounters))==null?void 0:s.isComplete())==null||o))}getNonEmptyBufferedOpsOrNull(){return this.bufferedOps&&this.bufferedOps.length>0?this.bufferedOps:null}isComplete(){return this.isFinishedStreaming&&!this.isBuffering()}setTextdocOps(e,n){if(this.isFinishedStreaming=n,e)for(let s=0;s<e.length;s++){const o=e[s];if(o.author.role===Ze.Assistant)switch(o.kind){case Fn.CREATE:case Fn.REWRITE:this.setAllContentOpAtIndex(o,s);break;case Fn.EDIT:case Fn.ADD_COMMENT:this.setRangeAndContentOpAtIndex(o,s);break;default:this.setUnbufferedOpAtIndex(o,s)}else this.setUnbufferedOpAtIndex(o,s)}n&&(e?this.isBuffering()||this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),!0):(this.destroy(),this.update(()=>null)))}update(e){const n=this.bufferedOps;this.bufferedOps=dh(n,e),this.bufferedOps!==n&&this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),this.isComplete())}getBufferedAllContentOp(e,n,s){let o=e[s];return o||(o=B(w({},n),{content:""}),e[s]=o),o}setAllContentOpAtIndex(e,n){const{content:s,isPartial:o=!1}=e;let a=this.textBuffers[n];a?(a.setText(s,o),e.kind===Fn.CREATE&&this.update(i=>{const l=this.getBufferedAllContentOp(i,e,n);l.textdocId=e.textdocId})):(a=new tM(Rg,(i,l)=>{this.update(c=>{const d=this.getBufferedAllContentOp(c,e,n);d.content=i,d.isPartial=!l})},s,o,this.lastBuffer),this.textBuffers[n]=a,this.lastBuffer=a.buffer)}getBufferedRangeAndContentOp(e,n,s){let o=e[s];return o||(o=B(w({},n),{at:{start:n.at.start,end:n.at.start},content:"",isPartial:!0,isPartialRange:!0}),e[s]=o),o}setRangeAndContentOpAtIndex(e,n){const{at:s,content:o,isPartialRange:a=!1,isPartial:i=!1}=e;let l=this.completeCounters[n];l||(l=new mye(()=>{this.update(u=>{const m=this.getBufferedRangeAndContentOp(u,e,n);m.isPartial=!1})}),l.update("original",!1),this.completeCounters[n]=l);let c=this.rangeBuffers[n];c?(this.update(u=>{const m=this.getBufferedRangeAndContentOp(u,e,n);if(m.at.start!==s.start){const f=m.at.end-m.at.start;m.at={start:s.start,end:s.start+f}}}),c.setTargetLength(s.end-s.start,a)):(c=new av(0,a,this.lastBuffer,(u,m)=>{this.update(f=>{const p=this.getBufferedRangeAndContentOp(f,e,n);p.at.end=p.at.start+u,p.isPartialRange=!m}),l.update("range",m)}),this.rangeBuffers[n]=c,this.lastBuffer=c,l.update("range",!1));let d=this.textBuffers[n];d?d.setText(o!=null?o:"",i):(d=new tM(Rg,(u,m)=>{this.update(f=>{const p=this.getBufferedRangeAndContentOp(f,e,n);p.content=u}),l.update("content",m)},o,i,this.lastBuffer),this.textBuffers[n]=d,this.lastBuffer=d.buffer,l.update("content",!1)),l.update("original",!i)}setUnbufferedOpAtIndex(e,n){this.update(s=>{s[n]=e})}}class mye{constructor(e){ne(this,"keyStates",new Set);ne(this,"onComplete");this.onComplete=e}isComplete(){return this.onComplete==null}update(e,n){if(!n)this.keyStates.add(e);else if(this.keyStates.delete(e),this.keyStates.size===0&&this.onComplete){const s=this.onComplete;this.onComplete=null,s()}}}function fye(t){const e=J(),n=Ut();II(()=>{var a,i;const s=me.getConversationLastTurn(ft(t)),o=Ml(s==null?void 0:s.messages,l=>cR(l));((i=(a=o==null?void 0:o.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="max_tokens"&&Axe(n,e,4)})}function pye(t){var e;return t?!!((e=t.metadata)!=null&&e.async_completion_id&&t.status==="in_progress"):!1}function gye(t){var C,k;const[e,n]=Ue(t,M=>[me.getRequestId(M),me.getConversationTurns(M)],{disablePerfDetector:!0}),s=Jo(e)||pye((k=(C=Wo(n))==null?void 0:C.messages)==null?void 0:k[0]),o=gR(t),a=Ige(),i=Fxe(()=>Promise.allSettled([o.refetch(),ka(t)])),[l,c]=lye({isRequestActive:s,lastTurn:Wo(n),clientThreadId:t,persistedTextdocStoreStatus:o.status}),d=i!=null?i:l,u=!!i||s,m=d?i?Fy.NATIVE:Fy.LAST_TURN:null,f=iye(t,n),p=pR(),g=Oge(),h=Oxe(),x=_.useMemo(()=>{let M=uP(f);const{textdocVersionById:T,fetchError:E,status:A}=o;return M=ti(M,N=>{var R,O,D,F;N.fetchError=E,N.isFetchingFromPersistence=A===Mg.REFETCHING||A===Mg.INITIALIZING;for(const{tempTextdocId:V,status:z,createdAt:$,type:Y,title:Z,content:Q}of h){const q=(R=N.resolveTempTextdocId[V])!=null?R:V;Uu(N,{textdocId:q,title:Z,type:Y,content:Q,createdAt:$,versionInt:0,comments:[],messageId:null,status:z===mo.SENT?Us.ATTACHED_SENT:Us.ATTACHED_PENDING})}if(T)for(const[V,z]of T.entries()){N.allTextdocIdSet[V]=V;const $=a.get(V);let Y=$&&((O=$.versionInt)!=null?O:tr)>((D=z.versionInt)!=null?D:tr)?w(w({},z),$):z;const Z=g.filter(q=>q.textdocId===V&&q.kind===Fn.REMOVE_COMMENT);let Q=Y.versionInt;for(const q of Z)Y=AL(Y,q),Q=Math.max(Q!=null?Q:tr,(F=q.versionInt)!=null?F:tr);Y=B(w({},Y),{versionInt:Q}),N.textdocById[V]=void 0,Uu(N,Y)}}),p?ti(M,N=>{Uu(N,p,!1)}):M},[h,f,o,a,p,g]),y=_.useMemo(()=>d!=null&&d.length?nye(u,x,d):null,[d,u,x]),b=_.useMemo(()=>ti(x,M=>{for(const T of y!=null?y:[])if(T.messageId&&(M.lastCanvasAssistantMessageById[T.textdocId]=T.messageId),T.kind===Fn.CREATE){const{tempTextdocId:E,textdocId:A}=T;E&&A&&(M.resolveTempTextdocId[E]=A)}}),[y,x]),v=dye(u,y,c);return _.useMemo(()=>v?ti(EL(b,v),M=>{M.streamingSource=m}):b,[b,m,v])}function XZe({clientThreadId:t,children:e}){const n=gye(t);return fye(t),r.jsx(dP.Provider,{value:n,children:e})}const eKe=[ze.Mod,"k"],tKe="writingBlockSkipSerialize",hye=/((`{3,})|(~{3,}))\s*/,RL=/^(?:\s*)((`{3,})|(~{3,}))\s*\{/m;var JE;const _ye=new RegExp(String.raw(JE||(JE=rt(["^s*:::","{[^}]*}[sS]*?:::"],["^\\s*:::","\\{[^}]*\\}[\\s\\S]*?:::"])),Ph),"m");var XE;const xye=new RegExp(String.raw(XE||(XE=rt(["^s*:::",""],["^\\s*:::",""])),Ph),"m");var e6;const yye=new RegExp(String.raw(e6||(e6=rt(["^s*:::","(?:s|{|$)"],["^\\s*:::","(?:\\s|\\{|$)"])),Ph)),vye=/^\s*:::\s*$/;var t6;const bye=new RegExp(String.raw(t6||(t6=rt([":::",""])),Ph));function nKe(t,e,n){U.logEventWithStatsig(t,e,n),Ee.count(Ae.WRITING_BLOCKS,e)}function Sye(t){const e=LL(t);return _ye.test(e)?!0:RL.test(e)}function sKe(t){const e=LL(t);return xye.test(e)?!0:RL.test(e)}function oKe(t){var i,l,c;const e=t.split("\n"),n=[],s=[];let o=null,a=null;for(const d of e){if(a){if(vye.test(d)){n.push(...a),a=null;continue}a.push(d);continue}if(o){const p=(i=o.nested[o.nested.length-1])!=null?i:null;if((p==null?void 0:p.kind)==="code"){n.push(d);const h=Eu(d);h&&h.info.trim().length===0&&h.marker===p.marker&&h.fence.length===p.length&&o.nested.pop();continue}const g=Eu(d);if(g){const h=g.info.trimStart();if((p==null?void 0:p.kind)==="writing"&&g.info.trim().length===0&&g.marker===p.marker&&g.fence.length===p.length){o.nested.pop();continue}if(o.nested.length===0&&g.info.trim().length===0&&g.marker===o.marker&&g.fence.length===o.length){o=null;continue}const y=h.startsWith("{")?"writing":"code";o.nested.push({kind:y,marker:g.marker,length:g.fence.length}),y==="code"&&n.push(d);continue}n.push(d);continue}if(s.length>0){n.push(d);const p=Eu(d);p&&p.info.trim().length===0&&p.marker===((l=s[s.length-1])==null?void 0:l.marker)&&p.fence.length===((c=s[s.length-1])==null?void 0:c.length)&&s.pop();continue}const u=d.match(bye);if((u==null?void 0:u.index)!=null){const p=d.slice(0,u.index).trimEnd();p.length>0&&n.push(p),a=[];continue}if(yye.test(d)){a=[];continue}const m=Eu(d);if(!m){n.push(d);continue}if(m.info.trimStart().startsWith("{")){o={marker:m.marker,length:m.fence.length,nested:[]};continue}s.push({marker:m.marker,length:m.fence.length}),n.push(d)}return a&&n.push(...a),n.join("\n")}function LL(t){const e=t.split("\n"),n=[];let s=null,o=[];for(const a of e){const i=Eu(a);if(i){const l=i.info.trimStart();if(!s){l.startsWith("{")?(n.push(a),s={marker:i.marker,length:i.fence.length,kind:"writing"},o=[]):(s={marker:i.marker,length:i.fence.length,kind:"code"},o=[a]);continue}s.kind==="code"?o.push(a):n.push(a),i.info.trim().length===0&&i.marker===s.marker&&i.fence.length===s.length&&(s.kind==="code"&&(o=[]),s=null);continue}if(!s){n.push(a);continue}if(s.kind==="writing"){n.push(a);continue}o.push(a)}return(s==null?void 0:s.kind)==="code"&&n.push(...o),n.join("\n")}function Eu(t){const e=t.match(/^\s*/),n=e?e[0]:"",s=t.slice(n.length),o=s.match(hye);if(!o)return null;const a=o[0].trim(),i=a[0],l=s.slice(a.length).trimStart();return{leadingWhitespace:n,fence:a,marker:i,info:l}}function aKe(t){const e=t.trim();if(!e.startsWith("{"))return null;try{const n=JSON.parse(e);return!n||Array.isArray(n)||typeof n!="object"?null:Cye(n)}catch(n){return null}}function Cye(t){const e={};for(const[n,s]of Object.entries(t))(typeof s=="string"||typeof s=="number"||typeof s=="boolean")&&(e[n]=String(s));return e.type&&!e.variant&&(e.variant=e.type),e}function nM(t,e){const n=[];let s=e;for(;s&&s!==t;){const o=s.parentNode;if(!o)throw new Error("Unable to resolve selection for magic edit.");const a=Array.prototype.indexOf.call(o.childNodes,s);n.unshift(a),s=o}if(s!==t)throw new Error("Unable to resolve selection for magic edit.");return n}function rKe(t,e){return{startPath:nM(t,e.startContainer),startOffset:e.startOffset,endPath:nM(t,e.endContainer),endOffset:e.endOffset}}function iKe(t,e,n,s=120){const o=Math.max(0,e-s),a=Math.min(t.length,n+s);return{leading:t.slice(o,e),selection:t.slice(e,n),trailing:t.slice(n,a)}}async function lKe(t){const e=new TextEncoder,n=await crypto.subtle.digest("SHA-256",e.encode(t));return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}const cKe=t=>xe(t,"3700195277")||!1,dKe=()=>{const t=Ia();return!!(t!=null&&t.includes(Rs.CanvasCodeExecution))||void 0},uKe=()=>{const t=Ia();return!!(t!=null&&t.includes(Rs.CanvasCodeNetworkAccess))||void 0},mKe=t=>xe(t,"2311599525"),fKe=t=>xe(t,"3468624635")||!1,wye=()=>{const t=G(),e=xe(t,"3286474446"),n=Io();return pt(t)&&e&&!n},pKe=(t,e)=>{var p,g;const n=G(),s=pt(n),a=!!((p=ue(()=>wn(ht(n,t))).enabledTools)!=null&&p.includes(sl.Canvas)),i=Io(),l=bi(),c=(g=e==null?void 0:e.metadata)==null?void 0:g.b1de6e2_s,d=Es(),u=!!e&&fh(e)===ph.PIMBlock,m=xe(n,"4223274760"),f=((e==null?void 0:e.content.content_type)===dt.Text||(e==null?void 0:e.content.content_type)===dt.MultimodalText)&&Sye(e==null?void 0:e.content.parts.join("\n"));return s&&m&&!f&&(!i||l)&&a&&!c&&!d&&!u};function OL(){const t=_.useRef(!1);return _.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),_.useCallback(()=>t.current,[])}const kye=j(()=>I(()=>import("./fwyctp3zfyh6emd2.js").then(t=>t._),__vite__mapDeps([191,1])),{loading:t=>L(t)}),Mye=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)}),sM=be({copy:{id:"CopyButton.copy",defaultMessage:"Copy"},copied:{id:"CopyButton.copied",defaultMessage:"Copied"}});function Tye({buttonText:t,shouldChangeText:e=!0,iconClassName:n="icon-sm",onCopy:s,className:o,iconOnly:a=!1,textPosition:i="right"}){const l=J(),[c,d]=_.useState(!1),u=OL(),m=_.useCallback(p=>{p.stopPropagation(),s(p),d(!0),setTimeout(()=>{u()&&d(!1)},2e3)},[u,s]);let f=t;return e&&c?f=r.jsx(P,w({},sM.copied)):t===!0&&(f=r.jsx(P,w({},sM.copy))),r.jsxs(r.Fragment,{children:[!c&&r.jsx(kt,{triggerAs:null,label:r.jsx(P,{id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),disabled:!a,children:r.jsxs(oM,{onClick:m,className:o,"aria-label":l.formatMessage({id:"ywKsIl",defaultMessage:"Copy"}),children:[i==="left"&&!a&&f,r.jsx(kye,{className:n}),i==="right"&&!a&&f]})}),c&&r.jsxs(oM,{className:o,"aria-label":l.formatMessage({id:"I3L53c",defaultMessage:"Copied"}),children:[i==="left"&&!a&&f,r.jsx(Mye,{className:n}),i==="right"&&!a&&f]})]})}var n6;const oM=ct.button(n6||(n6=rt(["flex gap-1 items-center select-none"])));class Eye{constructor({capacity:e,dispose:n}){ne(this,"capacity");ne(this,"cache");ne(this,"dispose");this.capacity=e,this.cache=new Map,this.dispose=n}get(e){if(!this.cache.has(e))return null;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e)){this.cache.delete(e),this.cache.set(e,n);return}if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;s!=null&&this.delete(s)}this.cache.set(e,n)}delete(e){const n=this.cache.get(e);this.cache.delete(e),this.dispose&&this.dispose(n)}}function gKe({children:t,messages:e,clientThreadId:n}){var f,p;const s=e.find(g=>{var h;return(h=g.metadata)==null?void 0:h.is_async_task_result_message}),o=(f=s==null?void 0:s.metadata)==null?void 0:f.async_task_id,a=ta(g=>o?g.tasks[o]:null),[i,l]=_.useState((p=a==null?void 0:a.collapsed)!=null?p:!1),[c,d]=_.useState(!1),u=Ue(n,g=>{var h,x;return s&&((h=s.metadata)==null?void 0:h.async_task_id)&&me.hasContinuedFromAsyncTask(g,s==null?void 0:s.id,(x=s==null?void 0:s.metadata)==null?void 0:x.async_task_id)}),m=J();return s?u?r.jsx("div",{className:"py-2",children:r.jsxs(Xe.div,{className:"bg-token-bg-primary dark:bg-token-bg-elevated-secondary border-token-border-default dark:border-token-border-light relative overflow-hidden rounded-3xl border shadow-md",initial:!1,animate:{height:i?300:"auto"},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>d(!1),children:[i&&r.jsx("button",{type:"button",className:"absolute inset-0 z-10","aria-label":m.formatMessage({id:"iB4l+i",defaultMessage:"Expand full response"}),"aria-expanded":!i,onClick:()=>{l(!1),d(!0)}}),r.jsx("div",{className:"p-7",children:t}),(i||c)&&r.jsx("span",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-b from-transparent to-[var(--bg-primary)] dark:to-[var(--bg-elevated-secondary)]"})]})}):r.jsx(r.Fragment,{children:t}):null}const aM=be({manage:{id:"manage",defaultMessage:"Manage"},continue:{id:"continue",defaultMessage:"Continue"}});function hKe({title:t,description:e,settingsTab:n="general",clientThreadId:s,parentMessageId:o}){const a=G(),i=ht(a,s),l=J(),[c,d]=_.useState(!1),{openSettings:u}=Fm(),m=()=>{var x;if(c)return;d(!0);const p=ft(s),g=p?me.getCurrentNode(p):null;(g?(x=g.message.id)!=null?x:g.id:void 0)===o&&Er({conversation:i,promptMessage:us("Yes, please proceed"),eventSource:"mouse",parentMessageId:o})},f=_.useCallback(()=>{const p=Ed();Sn()&&p?p.openSettings(n):u()},[u,n]);return r.jsxs("div",{className:"max-w-md rounded-lg border p-4 shadow-sm",children:[r.jsx("h2",{className:"mb-1 font-bold",children:r.jsx(Hs,{className:"text-base",children:t})}),r.jsx("p",{className:"mb-3 text-sm",children:r.jsx(Hs,{className:"text-base",children:e})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{className:"text-base",color:"secondary",onClick:f,children:l.formatMessage(aM.manage)}),r.jsx(he,{className:"text-base",color:"primary",onClick:m,children:l.formatMessage(aM.continue)})]})]})}function Aye({className:t}){return r.jsxs(r.Fragment,{children:[r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:W(t,"dark:hidden"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"black",fillOpacity:"0.04"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"black",strokeOpacity:"0.16",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8988 4.47241C11.297 4.30205 11.6994 4.7051 11.5287 5.10327L9.85392 9.01147C9.69208 9.3891 9.39072 9.69046 9.0131 9.85229L5.1049 11.5271C4.70673 11.6977 4.30368 11.2954 4.47404 10.8972L6.14982 6.98804C6.31165 6.61062 6.61225 6.31002 6.98966 6.14819L10.8988 4.47241ZM8.00138 7.19995C7.5597 7.20005 7.20167 7.55807 7.20158 7.99976C7.20158 8.44152 7.55964 8.79946 8.00138 8.79956C8.44321 8.79956 8.80119 8.44158 8.80119 7.99976C8.80109 7.55801 8.44315 7.19995 8.00138 7.19995Z",fill:"black",fillOpacity:"0.16"})]}),r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,focusable:"false",className:W(t,"hidden dark:block"),children:[r.jsx("circle",{cx:"8",cy:"8",r:"8",fill:"white",fillOpacity:"0.2"}),r.jsx("circle",{cx:"8",cy:"8",r:"7.7",stroke:"white",strokeOpacity:"0.65",strokeWidth:"0.6"}),r.jsx("path",{d:"M10.8989 4.47248C11.2971 4.30212 11.6994 4.70517 11.5288 5.10334L9.85399 9.01154C9.69215 9.38917 9.39079 9.69052 9.01317 9.85236L5.10496 11.5272C4.7068 11.6978 4.30375 11.2955 4.47411 10.8973L6.14989 6.98811C6.31171 6.61069 6.61232 6.31009 6.98973 6.14826L10.8989 4.47248ZM8.00145 7.20002C7.55976 7.20012 7.20174 7.55814 7.20164 7.99982C7.20164 8.44159 7.5597 8.79953 8.00145 8.79963C8.44328 8.79963 8.80125 8.44165 8.80125 7.99982C8.80116 7.55808 8.44322 7.20002 8.00145 7.20002Z",fill:"white",fillOpacity:"0.65"})]})]})}function Lg({base64:t,title:e,alt:n,className:s}){var o;return t?r.jsx("img",{src:"data:image/png;base64,".concat(t),alt:(o=n!=null?n:e)!=null?o:"",className:s}):r.jsx(Aye,{className:s})}function _Ke(t){"use forget";const e=H.c(19),{browserContextMetadata:n,className:s}=t,o=n.sources[0];if(!o)return null;const{url:a,title:i,base64favicon:l}=o;if(!a)return null;let c;e[0]!==i?(c=i==null?void 0:i.trim(),e[0]=i,e[1]=c):c=e[1];const d=c;let u;if(e[2]!==a){let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,e[4]=b):b=e[4],u=a.replace(b,""),e[2]=a,e[3]=u}else u=e[3];const m=u,f=d&&d.length>0?d:m||a;let p;e[5]!==s?(p=W("no-underline",s),e[5]=s,e[6]=p):p=e[6];let g;e[7]!==l||e[8]!==f?(g=r.jsx(Lg,{base64:l,title:f,alt:"",className:"h-4 w-4 flex-shrink-0"}),e[7]=l,e[8]=f,e[9]=g):g=e[9];let h;e[10]!==f?(h=r.jsx("span",{className:"truncate select-none",children:f}),e[10]=f,e[11]=h):h=e[11];let x;e[12]!==g||e[13]!==h?(x=r.jsx("div",{className:"user-message-bubble-color relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-3.5 py-1.5",children:r.jsxs("div",{className:"flex min-w-0 cursor-pointer items-center gap-2",children:[g,h]})}),e[12]=g,e[13]=h,e[14]=x):x=e[14];let y;return e[15]!==p||e[16]!==x||e[17]!==a?(y=r.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:p,children:x}),e[15]=p,e[16]=x,e[17]=a,e[18]=y):y=e[18],y}const Iye=t=>Ue(t,e=>{var n,s;return(s=(n=e==null?void 0:e.disabledToolIds)==null?void 0:n.includes(oo.CANMORE))!=null?s:!1}),jye=j(()=>I(()=>import("./jyroje0qaxw6h3z1.js").then(t=>t._),__vite__mapDeps([309,1])),{loading:t=>L(t)}),Pye=(t,e)=>{var u;const n=Ue(t,m=>me.getLastMessageSystemHints(m).includes(Js.CANVAS)),s=MR({clientThreadId:t}),o=Iye(t),a=G(),i=GS(a),l=(u=Wo(e))==null?void 0:u.id,c=e.some(m=>{var f,p;return(p=(f=m.metadata)==null?void 0:f.canvas)==null?void 0:p.canvas_opt_in});return{isVisible:!n&&!o&&!i&&!c&&!!l,onClick:async m=>{var x;if(!l)return;m.stopPropagation(),oS();const f=[oo.CANMORE];s({sourceEvent:m,nodeId:l,appendMessages:[Ub("The user has requested the canvas tool be disabled for this conversation. You should not call the tool again.",{disable_tool_ids:f,exclude_after_next_user_message:!0})]});const p=ft(t),g=me.getConversationTurns(p,l).length,h=(x=me.getParentPromptNode(p,l))==null?void 0:x.message.id;Ll.logEventWithStatsig("Canvas Opt Out Clicked","chatgpt_canvas_opt_out_clicked",{num_turns:String(g),conversation_id:jt(t),message_id:h}),qe(t,y=>{y.disabledToolIds=f})}}},Nye=({clientThreadId:t,allTurnMessages:e})=>{const{isVisible:n,onClick:s}=Pye(t,e);return n?r.jsx("button",{onClick:s,className:"text-token-text-secondary hover:text-token-text-primary mb-2 w-full",children:r.jsxs("div",{className:"flex items-center rounded-xl",children:[r.jsx(P,{id:"aa5Dyk",defaultMessage:"Answer in chat instead"}),r.jsx(jye,{className:"icon text-token-text-secondary"})]})}):null},rf=t=>{const{closeThreadSidebar:e}=Ir();return()=>{t!=="canvas"&&oS(),t!=="caterpillar"&&t!=="summarizer"&&t!=="searchSources"&&t!=="entity"&&e()}};function Rye(t){const e=_.useRef(!1);return()=>{e.current||(t(),e.current=!0)}}const Lye=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),Oye=(t,e)=>t!=null&&t.textdocId?t.textdocId:(t==null?void 0:t.function)===qn.CreateTextdoc?t3(t.messageId):e!=null?e:void 0,Dye=({toolCall:t,clientThreadId:e,isRequestActive:n})=>{const s=G(),o=J(),a=$ae(),i=Oye(t,a),l=f1(i),c=Wm(),d=rS(i),u=Hae(),m=GS(s),f=xt(),p=Gae(),g=Wae({textdocId:i,assistantMessageId:t==null?void 0:t.messageId}),h=Rye(()=>{const E=wn(ht(s,e)).id;Ll.logError("Textdoc missing from conversation",null,{clientThreadId:e,modelId:E,textdocId:i,latestTextdocId:a,toolCallTextdocId:t==null?void 0:t.textdocId,toolCallStatus:t==null?void 0:t.status,toolCallFunction:t==null?void 0:t.function})});_.useEffect(()=>{!n&&(t==null?void 0:t.status)===St.COMPLETE&&!p&&!l&&h()},[t,l,n,p,h]);const x=rf("canvas");if(!t)return null;const y=t.status===St.REDACTED||!p&&!l&&t.status!==St.STREAMING&&t.status!==St.WAITING;let b,v,S;if(t.status!==St.REDACTED&&t.status!==St.FAILED&&!y&&i){const E=!g&&t.status===St.COMPLETE;b=()=>{x(),E&&t.versionInt?dl({type:cl.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):xi(i)},v=()=>{x(),E&&t.versionInt?dl({type:cl.Textdoc,textdocId:i,history:{version:t.versionInt},shouldRunCodeOnOpen:!0}):dl({type:cl.Textdoc,textdocId:i,shouldRunCodeOnOpen:!0})},S=()=>{E&&t.versionInt&&f.prefetchQuery(mR(i,t.versionInt))}}const C=Fye(t,l);if(t.function===qn.CreateTextdoc&&!(m&&(!g||c))){if(t.status===St.STREAMING||t.status===St.WAITING||t.status===St.COMPLETE){const A=p===!0&&(t.status===St.STREAMING||t.status===St.WAITING);return r.jsx(Hy,{textdocId:i,name:C,clientThreadId:e,tag:t.type,icon:Tc(t.type,!1),iconSelected:Tc(t.type,!0),isCanvasOpen:c,isInlinePreview:g,isFetching:A,isFocused:d,isStreaming:t.status===St.STREAMING,onClick:b,onPreview:v})}let E;switch(t.status){case St.FAILED:E=o.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case St.CANCELED:E=o.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case St.REDACTED:E=r.jsx(kt,{align:"start",label:o.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:o.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return r.jsx(rM,{children:E})}const k=y||t.status===St.REDACTED,M=m?k?null:C:u&&!k?C:null,T=r.jsxs(rM,{onClick:b,onMouseOver:S,isStreaming:t.status===St.STREAMING,children:[m&&r.jsx(Lye,{}),t.function===qn.CommentTextdoc?Uye(o,t,M):t.function===qn.CreateTextdoc?M!=null?M:o.formatMessage({id:"/402F4",defaultMessage:"New document"}):Bye(o,t,M)]});return g&&!c&&!y&&i?r.jsx(Hy,{textdocId:i,clientThreadId:e,name:C,tag:l==null?void 0:l.type,icon:Tc(l==null?void 0:l.type,!1),iconSelected:Tc(l==null?void 0:l.type,!0),isCanvasOpen:c,isFetching:!1,isFocused:d,isInlinePreview:!0,isStreaming:t.status===St.STREAMING,onPreview:v,onClick:i!=null?()=>{x(),xi(i)}:void 0}):T};function Fye(t,e){return e!=null&&e.title?e.title:t.function===qn.CreateTextdoc&&t.title?TL(t.title):null}const rM=({isStreaming:t=!1,onClick:e,onMouseOver:n,children:s})=>r.jsx("button",{disabled:!e,className:W(t&&"loading-shimmer","text-token-text-secondary flex min-h-5 w-fit flex-row items-center gap-1.5 pt-[3px] text-start select-none",e&&"hover:text-token-text-primary"),onClick:e,onMouseOver:n,children:s}),DL=9;function Bye(t,e,n){var o;if(e.status===St.STREAMING)return n?t.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(e.status===St.FAILED)return n?t.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(e.status===St.CANCELED)return n?t.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const s=(o=e.updates)==null?void 0:o.length;return e.status===St.REDACTED||!s||s>DL?n?t.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):n?t.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:s,documentTitle:n}):t.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:s})}function Uye(t,e,n){var o;if(e.status===St.STREAMING)return n?t.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(e.status===St.FAILED)return n?t.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(e.status===St.CANCELED)return n?t.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const s=(o=e.comments)==null?void 0:o.length;return e.status===St.REDACTED||!s||s>DL?n?t.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:n}):t.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):n?t.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:s,documentTitle:n}):t.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:s})}const xKe=({messages:t,isRequestActive:e,isFinalTurn:n,allTurnMessages:s,clientThreadId:o,isUserTurn:a=!1})=>{const i=_.useMemo(()=>{const c=s3(s);if(!c)return null;const d=new Set(t.map(u=>u.id));return c.filter(([u])=>d.has(u.id))},[s,t]),l=_.useMemo(()=>i?i.map(([c,d])=>jL(e,c,d)).filter(Boolean):[],[i,e]);return l.length===0?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col gap-2 [&:not(:first-child)]:mt-2",children:l.map(c=>r.jsx(Dye,{toolCall:c,clientThreadId:o,isRequestActive:e},c.messageId))}),r.jsx(wR,{featureType:fs.CANVAS_SUPPORTED,isUserTurn:a,clientThreadId:o}),n&&r.jsx(Nye,{clientThreadId:o,allTurnMessages:s})]})};function Vye(t,e,n){const s=ta(l=>!!(t&&l.tasks[t])),o=rf("caterpillar"),a=Ue(n,l=>me.findNode(l,c=>{var d,u,m;return((d=c.message.metadata)==null?void 0:d.async_task_id)===t&&(((u=c.message.metadata)==null?void 0:u.b1de6e2_rm)===!0||((m=c.message.metadata)==null?void 0:m.is_async_task_result_message)===!0)})!=null),{clearSystemHintModeTrigger:i}=na();_.useEffect(()=>{var f;if(s||!t||!e)return;const{async_task_created_at:l,async_task_prompt:c,async_task_title:d}=(f=e.metadata)!=null?f:{};if(!d)return;const u=jt(n),m={originalConversationId:u!=null?u:n,taskId:t,title:d,prompt:c!=null?c:"",createdAt:l!=null?l:"",updatedAt:l!=null?l:"",status:Ms.UNDETERMINED};Zn.setTask(t,m),i(Ie.Research)},[s,t,e,n,o,i,a])}j(()=>I(()=>import("./mxwy4kmdaryrewzb.js").then(t=>t._),__vite__mapDeps([43,1])),{loading:t=>L(t)});const Gye=j(()=>I(()=>Promise.resolve().then(()=>CB),void 0),{loading:t=>L(t)}),$ye=j(()=>I(()=>import("./mkw62yhdl76wvm98.js").then(t=>t._),__vite__mapDeps([310,1])),{loading:t=>L(t)}),Hye=j(()=>I(()=>import("./llet3iu13s5doohp.js").then(t=>t._),__vite__mapDeps([311,1])),{loading:t=>L(t)}),Wye=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),FL=j(()=>I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1])),{loading:t=>L(t)}),zye=j(()=>I(()=>import("./k7gle8iztcijpdqk.js").then(t=>t._),__vite__mapDeps([312,1])),{loading:t=>L(t)}),qye=j(()=>I(()=>import("./kl3c7pa639r7ky2c.js").then(t=>t._),__vite__mapDeps([313,1])),{loading:t=>L(t)}),Yye=j(()=>I(()=>import("./mhp2kzvwnqoxwf6q.js").then(t=>t._),__vite__mapDeps([314,1])),{loading:t=>L(t)}),Zye=j(()=>I(()=>import("./d7u80wg0bm7kxo6u.js").then(t=>t._),__vite__mapDeps([315,1])),{loading:t=>L(t)}),Kye=j(()=>I(()=>import("./pe47guieqa4pccw0.js").then(t=>t._),__vite__mapDeps([316,1])),{loading:t=>L(t)}),Qye=j(()=>I(()=>import("./mqkppnsks40c5l5b.js").then(t=>t._),__vite__mapDeps([272,1])),{loading:t=>L(t)}),iM=j(()=>I(()=>import("./lbr5dcyofn0xux3u.js").then(t=>t._),__vite__mapDeps([273,1])),{loading:t=>L(t)}),Jye={pdf:zye,sheet:iM,excel:Kye,doc:Wye,audio:Gye,video:Hye,image:$ye,csv:iM,word:qye,forms:Zye,slides:Qye,powerpoint:Yye,other:FL};function a3(t){var e;return(e=Jye[t])!=null?e:FL}const Xye=({children:t,iconType:e})=>{const n=a3(e);return r.jsxs("div",{className:"flex items-start gap-2 text-start text-wrap",children:[r.jsx("div",{className:"mt-[1px] inline-flex h-5 w-5 shrink-0 items-center justify-end gap-2.5 pt-[3px]",children:r.jsx(n,{className:"text-token-text-primary relative h-5 w-5"})}),t]})},yKe=({row:t})=>r.jsx(Xye,{iconType:t.iconType,children:r.jsx("div",{className:"text-token-text-primary flex-1 truncate text-base",children:t.rowText})});function eve(){const t=G();return lt({queryKey:["clientStrings"],queryFn:()=>pe.safeGet("/client/strings"),staleTime:1/0,enabled:pt(t)})}const BL=j(()=>I(()=>Promise.resolve().then(()=>hf),void 0),{loading:t=>L(t)}),UL={medium:"icon",small:"icon-sm",xsmall:"icon-xs",large:"icon-lg",xxlarge:"icon-xl"},lM={xsmall:"h-4.5 w-4.5 text-base",small:"h-6 w-6 text-xs",medium:"h-8 w-8 text-sm",large:"h-10 w-10 text-base",xxlarge:"h-20 w-20 text-base"},Og=t=>{"use forget";var y,b,v;const e=H.c(25),{connector:n,className:s,size:o}=t,a=Zo(),i=(y=n.logo_url)!=null?y:null,l=(b=n.logo_url_dark)!=null?b:null;let c;e[0]!==i||e[1]!==l?(c={lightLogoUrl:i,darkLogoUrl:l},e[0]=i,e[1]=l,e[2]=c):c=e[2];const d=Jh(c);if(!((v=d.data)!=null&&v.url)){const S=lM[o],C=o==="large"||o==="xxlarge"?"rounded-xl":"rounded-md",k=a?"bg-token-bg-tertiary":"bg-token-bg-secondary";let M;e[3]!==S||e[4]!==C||e[5]!==k?(M=W("text-token-text-secondary flex items-center justify-center font-semibold",S,C,k),e[3]=S,e[4]=C,e[5]=k,e[6]=M):M=e[6];const T=UL[o];let E;e[7]!==T?(E=r.jsx(BL,{className:T}),e[7]=T,e[8]=E):E=e[8];let A;e[9]!==M||e[10]!==E?(A=r.jsx("span",{className:M,children:E}),e[9]=M,e[10]=E,e[11]=A):A=e[11];let N;return e[12]!==s||e[13]!==A?(N=r.jsx("div",{className:s,children:A}),e[12]=s,e[13]=A,e[14]=N):N=e[14],N}const u=d.data.url,m=n.name,f=lM[o],p=o==="large"?"rounded-xl":"rounded-md";let g;e[15]!==f||e[16]!==p?(g=W(f,"object-contain",p),e[15]=f,e[16]=p,e[17]=g):g=e[17];let h;e[18]!==n.name||e[19]!==d.data.url||e[20]!==g?(h=r.jsx("img",{src:u,alt:m,className:g}),e[18]=n.name,e[19]=d.data.url,e[20]=g,e[21]=h):h=e[21];let x;return e[22]!==s||e[23]!==h?(x=r.jsx("div",{className:s,children:h}),e[22]=s,e[23]=h,e[24]=x):x=e[24],x},vKe=t=>{"use forget";var d,u,m;const e=H.c(11),{connector:n}=t,s=Zo(),o=(d=n.logo_url)!=null?d:null,a=(u=n.logo_url_dark)!=null?u:null;let i;e[0]!==o||e[1]!==a?(i={lightLogoUrl:o,darkLogoUrl:a},e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=Jh(i);if(!((m=l.data)!=null&&m.url)){const f=s?"bg-token-bg-tertiary":"bg-token-bg-secondary";let p;e[3]!==f?(p=W("text-token-text-secondary m-0.5 flex h-6 w-6 items-center justify-center rounded-md text-xs font-semibold",f),e[3]=f,e[4]=p):p=e[4];let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(BL,{className:UL.small}),e[5]=g):g=e[5];let h;return e[6]!==p?(h=r.jsx("span",{className:p,children:g}),e[6]=p,e[7]=h):h=e[7],h}let c;return e[8]!==n.name||e[9]!==l.data.url?(c=r.jsx("span",{className:"m-0.5 rounded-md",children:r.jsx("img",{src:l.data.url,alt:n.name,className:"h-6 w-6 rounded-md object-contain"})}),e[8]=n.name,e[9]=l.data.url,e[10]=c):c=e[10],c};function VL(t,e,n,s){"use forget";const o=H.c(7),a=e===void 0?"small":e,{platformConnectors:i}=Cd(!1,o9.DEEP_RESEARCH);let l;e:try{let u;if(s&&(u=PH[s.toLowerCase()]),!u){l=null;break e}const m=fr[u];if(!m){l=null;break e}let f;o[0]!==m||o[1]!==i?(f=i.get(m),o[0]=m,o[1]=i,o[2]=f):f=o[2];const p=f;if(!p){l=null;break e}l=p}catch(u){l=null}const c=l;let d;return o[3]!==n||o[4]!==c||o[5]!==a?(d=c?r.jsx(Og,{connector:c,size:a,className:n}):null,o[3]=n,o[4]=c,o[5]=a,o[6]=d):d=o[6],d}function tve({url:t,size:e="small",className:n,fallback:s,connectorSource:o}){const a=VL(t,e,n,o);return a!=null?a:s}const nve=j(()=>I(()=>import("./fg1cwp14kl8llosr.js"),__vite__mapDeps([317,1])),{loading:t=>L(t)});function bKe(t,e=0){if(!t)return!1;const n=t.getBoundingClientRect();return n.top+e>=0&&n.left+e>=0&&n.bottom-e<=(window.innerHeight||document.documentElement.clientHeight)&&n.right-e<=(window.innerWidth||document.documentElement.clientWidth)}function GL(){var o,a,i,l,c,d,u;const t=J(),{data:e}=eve(),n=e==null?void 0:e.caterpillar_status_message_texts,s={cancelledMessage:t.formatMessage({id:"ZVkPyf",defaultMessage:"Task cancelled"}),failureMessage:t.formatMessage({id:"3BZzpX",defaultMessage:"Something went wrong"}),completedMessage:t.formatMessage({id:"nZ8w6W",defaultMessage:"Completed in"}),failureBannerContentMessage:t.formatMessage({id:"9peWdy",defaultMessage:"There was an error"}),waitingInQueueMessage:t.formatMessage({id:"k4vqxH",defaultMessage:"Your request is queued up. It will be completed shortly."}),startingMessage:t.formatMessage({id:"+jIjI+",defaultMessage:"Starting Task"}),caterpillarNoneSelectedMessage:t.formatMessage({id:"cLZOtM",defaultMessage:"Choose at least one"})};return n?{cancelledMessage:(o=n.cancelled_message)!=null?o:s.cancelledMessage,failureMessage:(a=n.failure_message)!=null?a:s.failureMessage,completedMessage:(i=n.completed_message)!=null?i:s.completedMessage,failureBannerContentMessage:(l=n.failure_banner_content_message)!=null?l:s.failureBannerContentMessage,waitingInQueueMessage:(c=n.waiting_in_queue_message)!=null?c:s.waitingInQueueMessage,startingMessage:(d=n.starting_message)!=null?d:s.startingMessage,caterpillarNoneSelectedMessage:(u=n.none_selected_dr_message)!=null?u:s.caterpillarNoneSelectedMessage}:s}function $L(t){const e=new Map;return Th(t).forEach(s=>{if(s.type==="website")try{const o=r.jsx(tve,{url:s.url,size:"xsmall",className:"icon-sm",fallback:r.jsx(Ts,{url:s.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(nve,{className:"icon-sm text-token-text-quaternary"})})}),a=new URL(s.url).hostname;if(e.has(a)){const i=e.get(a);i&&(i.count+=1)}else e.set(a,{url:s.url,count:1,icon:o})}catch(o){}else if(!e.has(s.name)){const o=a3(s.fileType);e.set(s.name,{url:s.name,count:1,icon:r.jsx(o,{className:"text-token-text-primary relative h-4 w-4"})})}}),Array.from(e.values())}function sve(t){const e=t.map(n=>n.type==="websiteOpen"?{url:n.url,type:"website"}:n.type==="fileOpen"&&n.fileName?{name:n.fileName,type:"file",fileType:n.iconType}:null);return $L(e)}function ove(t){return t.reduce((e,n)=>{var s,o;if(n.type==="search"){const a=(o=(s=n.urls)==null?void 0:s.length)!=null?o:0;return e+a}return e},0)}function ave(t){var s;const e=(s=t.metadata)==null?void 0:s.content_references;if(!e)return[];const n=e.map(o=>o.type==="webpage_extended"?o.icon_type?{name:o.title,type:"file",fileType:o.icon_type}:{url:o.url,type:"website"}:null);return $L(n)}function SKe(t){var e;return{type:a9,groups:(e=t==null?void 0:t.filter(n=>n.type==="summary").map(n=>{var s;return{type:n.message?(s=NH(n.message))!=null?s:or.Text:or.Text,messages:n.message?[n.message]:[]}}))!=null?e:[]}}const HL=j(()=>I(()=>import("./jn7f46w9midpij9z.js"),__vite__mapDeps([298,1])),{loading:t=>L(t)}),WL=j(()=>I(()=>import("./hnl1ywqdt0z6ew0k.js"),__vite__mapDeps([318,1])),{loading:t=>L(t)}),zL=j(()=>I(()=>import("./c7eenf6ati4uj8ol.js"),__vite__mapDeps([319,1])),{loading:t=>L(t)}),qL=j(()=>I(()=>import("./cikz7bq6q4slq8dq.js"),__vite__mapDeps([320,1])),{loading:t=>L(t)}),YL=j(()=>I(()=>import("./nm6d95nu0wxxwv4z.js"),__vite__mapDeps([321,1])),{loading:t=>L(t)}),ZL=j(()=>I(()=>import("./jqogk2ff4pp5or3y.js"),__vite__mapDeps([322,1])),{loading:t=>L(t)}),KL=j(()=>I(()=>import("./l4cbw33k2a0g7zpo.js"),__vite__mapDeps([323,1])),{loading:t=>L(t)}),QL=j(()=>I(()=>import("./eby1bla1a7jk4r4q.js"),__vite__mapDeps([324,1])),{loading:t=>L(t)}),JL=j(()=>I(()=>import("./jopff0alscxytldr.js"),__vite__mapDeps([325,1])),{loading:t=>L(t)}),XL=j(()=>I(()=>import("./iqtx95r64vhr7h1k.js"),__vite__mapDeps([326,1])),{loading:t=>L(t)}),eO=j(()=>I(()=>import("./i7yquu4hfwxnlo7t.js"),__vite__mapDeps([327,1])),{loading:t=>L(t)}),tO=j(()=>I(()=>import("./nxae90yqtxhnic4y.js"),__vite__mapDeps([328,1])),{loading:t=>L(t)}),nO=j(()=>I(()=>import("./ech7w6ifmhmaazwo.js"),__vite__mapDeps([329,1])),{loading:t=>L(t)}),sO=j(()=>I(()=>import("./h8noe1whamzp5j6y.js"),__vite__mapDeps([330,1])),{loading:t=>L(t)});function rve({url:t,className:e}){switch(new URL(t).pathname.split(".").pop()){case"pdf":return r.jsx(ZL,{className:e});case"gif":return r.jsx(nO,{className:e});case"jpg":case"jpeg":return r.jsx(tO,{className:e});case"png":return r.jsx(YL,{className:e});case"webp":return r.jsx(WL,{className:e});case"mp3":return r.jsx(JL,{className:e});case"m4a":return r.jsx(eO,{className:e});case"ogg":return r.jsx(KL,{className:e});case"wav":return r.jsx(zL,{className:e});case"mp4":return r.jsx(QL,{className:e});case"mov":return r.jsx(XL,{className:e});case"zip":return r.jsx(HL,{className:e});case"rar":return r.jsx(qL,{className:e});case"css":return r.jsx(sO,{className:e});default:return null}}function ive({searchResult:t,className:e}){switch(t.content_type){case"application/pdf":return r.jsx(ZL,{className:e});case"image/gif":return r.jsx(nO,{className:e});case"image/jpeg":return r.jsx(tO,{className:e});case"image/png":return r.jsx(YL,{className:e});case"image/webp":return r.jsx(WL,{className:e});case"audio/mpeg":return r.jsx(JL,{className:e});case"audio/m4a":return r.jsx(eO,{className:e});case"audio/ogg":return r.jsx(KL,{className:e});case"audio/wav":return r.jsx(zL,{className:e});case"video/mp4":return r.jsx(QL,{className:e});case"video/quicktime":return r.jsx(XL,{className:e});case"application/zip":return r.jsx(HL,{className:e});case"application/x-rar-compressed":return r.jsx(qL,{className:e});case"text/css":return r.jsx(sO,{className:e})}return r.jsx(rve,{url:t.url,className:e})}function r3(t,e="short"){try{const n=new URL(t).hostname.replace("www.","");return e==="hostname"?n:n.replace(/\.[^.]*$/,"")}catch(n){return t}}const lve=j(()=>I(()=>import("./fg1cwp14kl8llosr.js"),__vite__mapDeps([317,1])),{loading:t=>L(t)});function cve(t){var e;if(t.startsWith("file://"))return a3((e=t.split(".").pop())!=null?e:"other")}const oO=({item:t})=>{const e=t.attribution,n=VL(t.url,"small","relative",e!=null?e:void 0);if(n)return n;const s=cve(t.url);return s?r.jsx(s,{className:"text-token-text-primary relative h-4 w-4"}):r.jsx(Ts,{url:t.url,className:"icon-sm bg-token-main-surface-primary rounded-full object-cover",size:32,minSize:20,fallback:r.jsx(lve,{className:"icon-sm text-token-text-quaternary"})})};function dve({item:t}){var o;const e=t.attribution,n=e!=null?e:r3(t.url,"short"),s=a=>"ref_id"in a&&"content_type"in a;return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(oO,{item:t}),n,s(t)&&r.jsx(ive,{searchResult:t,className:"text-token-text-tertiary inline h-4 w-4"})]}),r.jsx("div",{className:"line-clamp-2 text-sm font-semibold break-words",children:t.title}),((o=t.pub_date)!=null?o:t.snippet)&&r.jsxs("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:[t.pub_date&&r.jsx(MN,{date:t.pub_date}),t.pub_date&&t.snippet&&"  ",t.snippet]})]})}function uve(t,e=20){if(t.length<=e)return{attribution:t,wasTruncated:!1};const n="...",s=e-n.length,o=Math.floor(s/2),a=s-o;return{attribution:t.substring(0,o)+n+t.substring(t.length-a),wasTruncated:!0}}function mve({citation:t,showCounts:e}){const n=r3(t.url,"short"),{attribution:s,wasTruncated:o}=uve(n);return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"group hover:bg-token-main-surface-secondary flex items-center gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",title:o?n:void 0,children:[t.icon,s]}),e&&t.count>1&&r.jsx("div",{className:"flex h-4 items-center justify-end ps-1",children:r.jsx("div",{className:"bg-token-main-surface-tertiary group-hover:bg-token-main-surface-primary flex h-4 min-w-4 items-center justify-center rounded-full text-[8px]",children:t.count})})]})}function fve({item:t}){const e=t.url.split("#:~:text=")[0];return r.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"hover:bg-token-main-surface-secondary flex flex-col gap-0.5 rounded-xl px-3 py-2.5",children:[r.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[r.jsx(oO,{item:t}),r.jsx("p",{className:"text-normal truncate text-base font-semibold",children:t.title})]}),r.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm leading-snug font-normal",children:e})]})}function pve({taskIsPending:t,finalMessage:e,sources:n,caterpillarHeaderRef:s,showCounts:o=!0,citationView:a="normal"}){var l,c;const i=LA((c=(l=e==null?void 0:e.metadata)==null?void 0:l.content_references)==null?void 0:c.filter(d=>d.type==="webpage_extended"),"matched_text");return r.jsxs("div",{children:[r.jsx("div",{ref:s},"task-header"),r.jsxs("div",{className:"flex flex-col gap-4",children:[i.length>0&&r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-base font-medium",children:r.jsx(P,{id:"cc9nL7",defaultMessage:"Citations"})}),r.jsx("div",{className:"ms-[-12px] flex flex-col gap-1",children:i==null?void 0:i.map((d,u)=>a==="condensed"?r.jsx(fve,{item:d},"citation-".concat(u,"-").concat(d.matched_text)):r.jsx(dve,{item:d},"citation-".concat(u,"-").concat(d.matched_text)))})]}),r.jsxs("div",{className:"flex flex-col gap-2.5",children:[r.jsx("div",{className:"text-base font-medium",children:t?r.jsx("div",{className:"loading-shimmer-pure-text flex h-8 gap-1 overflow-hidden",children:r.jsx(P,{id:"Wo2ed3",defaultMessage:"Compiling sources"})}):r.jsx(P,{id:"h6ereF",defaultMessage:"All Sources"})}),r.jsx("div",{className:"ms-[-12px] flex flex-wrap",children:n==null?void 0:n.map((d,u)=>r.jsx(mve,{citation:d,showCounts:o},"source-".concat(u,"-").concat(d.url)))})]})]})]})}const gve=(t,e)=>e?!1:xe(t,"3576660381"),hve=(t,e)=>{if(!t)return[];const n=me.getConversationTurns(t);return e<0||e>=n.length?[]:me.getConversationTurnAtIndex(t,e).messages.filter(o=>{var a;return((a=o.metadata)==null?void 0:a.b47u8ra0)===!0})},_ve=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),xve=j(()=>I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1])),{loading:t=>L(t)}),yve=5;function vve(t){const e=Ai(t);if(e)return e.type;try{return new URL(t).hostname.replace(/^www\./,"")}catch(n){return t}}function bve(t){const e=new Map;return t.forEach(n=>e.set(vve(n),n)),Array.from(e.values())}function aO(t){"use forget";const e=H.c(14),{urls:n,max:s,itemClass:o,iconClass:a,faviconClass:i}=t;let l,c;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==s||e[4]!==n){const u=bve(n);l="flex flex-row-reverse";let m;e[7]!==i||e[8]!==a||e[9]!==o?(m=(f,p)=>{var x;const g=Ai(f),h=(x=g==null?void 0:g.Icon)!=null?x:null;return r.jsx("div",{className:W(o),children:h?r.jsx(h,{className:W("icon-sm",a),alt:g==null?void 0:g.type}):r.jsx(Ts,{url:f,size:32,minSize:16,className:W("icon-sm",i),"aria-label":"",showLoadingAnimation:!0,fallback:r.jsx(xve,{className:"icon-sm"})})},p)},e[7]=i,e[8]=a,e[9]=o,e[10]=m):m=e[10],c=u.slice(0,s).reverse().map(m),e[0]=i,e[1]=a,e[2]=o,e[3]=s,e[4]=n,e[5]=l,e[6]=c}else l=e[5],c=e[6];let d;return e[11]!==l||e[12]!==c?(d=r.jsx("div",{className:l,children:c}),e[11]=l,e[12]=c,e[13]=d):d=e[13],d}function rO({sourcesUrls:t,onClick:e,className:n}){return r.jsxs("button",{className:W("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex h-[38px] w-fit items-center gap-1.5 rounded-3xl border py-2","ps-3 pe-3",n),onClick:e,children:[t.length>0&&r.jsx(aO,{urls:t,max:yve,itemClass:W("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden rounded-full","-ms-1 first:me-0","border-2","group-hover/footnote:border-token-main-surface-secondary","relative")}),r.jsx("div",{className:"text-token-text-secondary flex items-center text-xs font-semibold",children:r.jsx(P,{id:"/48IOP",defaultMessage:"Sources"})})]})}function Sve(t,e,n){const s=G(),o=Ue(t,u=>{const m=hve(u,e);return[n,...m]}),a=_.useMemo(()=>o.flatMap(u=>jh(u)),[o]),i=a.find(u=>u.type==="sources_footnote"),l=ue(()=>wn(ht(s,t))),c=mh(l,s),d=i!=null&&i.sources?i==null?void 0:i.sources.map(({url:u})=>u).filter(u=>!!u):c?a.map(u=>{var m;return(m=u.safe_urls)!=null?m:[]}).flat().filter(u=>!!u):[];return{hasSources:(!!i||c)&&d.length>0,sourcesUrls:d}}function CKe({clientThreadId:t,message:e,turnIndex:n,isAgentTurn:s}){const o=e==null?void 0:e.id,{toggleThreadSidebar:a}=Ir(),i=G(),l=gve(i,s),[c,d]=Ue(t,x=>{var b;if(!((b=e==null?void 0:e.metadata)!=null&&b.async_task_id))return[-1,-1];const y=me.getConversationTurns(x);for(let v=0;v<y.length;v++){const S=y[v];for(let C=0;C<S.messageGroups.length;C++){const k=S.messageGroups[C];if(k.type===or.a8km123&&k.messages.some(M=>{var T,E;return((T=M==null?void 0:M.metadata)==null?void 0:T.async_task_id)===((E=e==null?void 0:e.metadata)==null?void 0:E.async_task_id)}))return[v,C]}}return[-1,-1]}),u=Ue(t,x=>{var y;return n>=0?(y=me.getConversationTurnAtIndex(x,n))==null?void 0:y.messageGroups.findIndex(b=>b.type===a9||b.type===or.a8km123):-1}),m=c>=0?c:n,f=d>=0?d:u,p=_.useCallback(()=>{o&&(l&&f>=0?a({type:"cot",turnIndex:m,reasoningGroupIndex:f,scrollTo:"sources"}):a({type:"searchSources",scrollToHeader:KS.Citations,turnIndex:n,messageId:o}))},[o,a,n,l,f,m]),{hasSources:g,sourcesUrls:h}=Sve(t,n,e);return g?r.jsx(wve,{sourcesUrls:h,onClick:p,className:"hover:bg-token-bg-tertiary rounded-3xl"}):null}const Cve=3;function wve({sourcesUrls:t,onClick:e,className:n}){const o=J().formatMessage({id:"/48IOP",defaultMessage:"Sources"});return r.jsxs("button",{className:W("group/footnote bg-token-bg-primary flex w-fit items-center gap-1.5 px-3 py-1.5",n),onClick:e,"aria-label":o,children:[t.length>0?r.jsx(aO,{urls:t,max:Cve,itemClass:W("border-token-bg-primary bg-token-bg-primary flex items-center overflow-clip rounded-full","-ms-1.5 first:me-0","border-2","group-hover/footnote:border-token-bg-tertiary","relative"),iconClass:"rounded-full shadow-[inset_0_0_0_1px_rgba(0,0,0,0.05)]",faviconClass:"rounded-full border border-token-border-light border-[0.5px]"}):r.jsx(_ve,{className:"icon-sm text-token-text-secondary"}),r.jsx("div",{className:"text-token-text-secondary mt-[-1px] text-[13px] font-medium",children:o})]})}const kve=j(()=>I(()=>import("./nrby27vmpob112wj.js").then(t=>t._),__vite__mapDeps([38,1])),{loading:t=>L(t)}),Mve=j(()=>I(()=>import("./ef28lc1b3o54kec9.js").then(t=>t._),__vite__mapDeps([185,1])),{loading:t=>L(t)}),Tve=({title:t})=>r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-2",children:[r.jsx(kve,{className:"h-4 w-4"}),r.jsx("p",{children:t})]});function wKe({messages:t,children:e,clientThreadId:n,renderingView:s}){var T,E,A,N;const o=t.find(R=>{var O;return(O=R.metadata)==null?void 0:O.b1de6e2_rm}),a=(T=o==null?void 0:o.metadata)==null?void 0:T.async_task_id,i=ta(R=>a?R.tasks[a]:null),[l,c]=_.useState((E=i==null?void 0:i.collapsed)!=null?E:!1),{toggleThreadSidebar:d}=Ir(),u=rf("caterpillar"),m=_.useRef(null),f=Ab(),p=Od(),g=Ue(n,R=>{var F,V;if(!l||!i)return!1;const O=me.getCurrentNode(R);let D=me.getNode(R,O.parentId);return D.message.author.role==="developer"&&(D=me.getNode(R,D.parentId)),!(((F=D.message.metadata)==null?void 0:F.async_task_id)===a&&((V=D.message.metadata)!=null&&V.async_task_created_at))});_.useEffect(()=>{!g&&l&&c(g)},[g,l]);const h=_.useCallback(R=>{a&&d({type:"caterpillar",caterpillarId:a,initialTab:R},u)},[d,a,u]),{uniqueSources:x}=_.useMemo(()=>o?{uniqueSources:ave(o)}:{uniqueSources:[],totalSources:0},[o]),y=Pm(),[b,v]=_.useState(!1),S=G(),C=cs(S),k=J();if(!o)return null;const M=({taskId:R})=>f?null:r.jsx("div",{className:"hover:bg-token-main-surface-secondary cursor-pointer rounded-md p-2",children:r.jsx(Mve,{className:"icon text-token-text-tertiary",onClick:()=>{Zn.setResearchShareIntent({messages:t.map(O=>O),threadId:n,taskId:R})}})});return s==="chat"?r.jsxs(Xe.div,{className:W("border-token-border-sharp dark:border-token-main-surface-secondary @container relative mb-4","flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border shadow-md contain-inline-size",!C&&"mx-[-16px] sm:mx-[-32px] sm:rounded-[28px]"),initial:!1,animate:{height:l?300:"auto"},transition:{duration:.5,ease:"easeInOut"},onAnimationComplete:()=>v(!1),children:[l&&r.jsx("button",{type:"button",className:"absolute inset-0 z-10","aria-label":k.formatMessage({id:"pkZBJ+",defaultMessage:"Expand full response"}),"aria-expanded":!l,onClick:()=>{c(!1),v(!0)}}),r.jsxs("div",{className:W("p-4",!C&&"sm:p-8"),children:[r.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[!p&&((A=o.metadata)==null?void 0:A.async_task_title)&&r.jsx(Tve,{title:(N=o.metadata)==null?void 0:N.async_task_title}),a&&r.jsx(M,{taskId:a})]}),e,r.jsxs("div",{className:"flex items-center gap-2 py-2",children:[r.jsx(rO,{sourcesUrls:x.map(R=>R.url),onClick:()=>{y&&h("sources")},className:W("mt-0! mb-0!",y&&"cursor-default")}),a&&r.jsx(M,{taskId:a})]})]}),(l||b)&&r.jsx("span",{className:"pointer-events-none absolute inset-x-0 bottom-0 h-12 bg-gradient-to-b from-transparent to-[var(--bg-primary)] dark:to-[var(--bg-elevated-secondary)]"})]}):r.jsxs("div",{className:"flex flex-col gap-4",children:[e,r.jsx("div",{className:"border-token-border-sharp flex flex-col gap-2 border-b"}),r.jsx(pve,{caterpillarHeaderRef:m,taskIsPending:!1,finalMessage:o,showCounts:!1,sources:x,citationView:"condensed"})]})}function kKe({className:t}){return r.jsx(iO,{className:W("w-full",t)})}function iO({className:t}){return r.jsx("div",{className:W("loading-results-shimmer rounded-md",t),children:""})}function cM(t,e){const o=300/t,a=35/o;let i;if(e<=a)i=o*e;else{const l=t-a,d=-4*((e-a)/l);i=35+(99.9-35)*(1-Math.exp(d))}return Math.min(i,99.9)}const rv=(t,e)=>{const n=+new Date-t,[s,o]=_.useState(cM(e,n));return _.useEffect(()=>{const a=setInterval(()=>{const i=+new Date-t,l=cM(e,i);if(o(l),l>=100||i>=e)return clearInterval(a),o(100),100},100);return()=>{clearInterval(a)}},[t,e]),s};function Eve({percentage:t,height:e=10,className:n,backgroundClassName:s="bg-gray-400",barClassName:o="bg-current",transitionDuration:a,transitionTimingFunction:i,onTransitionEnd:l}){return r.jsxs("div",{className:W("relative w-full",n),style:{height:e},children:[r.jsx("div",{className:W("absolute start-0 top-0 h-full w-full",s)}),r.jsx("div",{className:W("absolute start-0 top-0 h-full transition-[width]",o),style:{width:"".concat(Math.max(Math.min(t,100),1),"%"),transitionDuration:a,transitionTimingFunction:i},onTransitionEnd:l})]})}function Ave({taskId:t,intl:e,toaster:n}){return Bt({mutationFn:async()=>{if(t)return await A2.cancelTask({taskId:t})},onSuccess:()=>{t&&(Zn.setTaskStatus(t,Ms.CANCELLED),Zn.abortTaskStream(t))},onError:()=>{n.danger(e.formatMessage({id:"4Hl5/B",defaultMessage:"An error occurred while cancelling the task."}),{loggingTitle:"An error occurred while cancelling the task.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task cancellation throws an error"})}})}function MKe({taskId:t,intl:e,toaster:n}){return Bt({mutationFn:async()=>{if(t)return await A2.answerNowTask({taskId:t})},onSuccess:()=>{t&&Zn.setTaskStatus(t,Ms.CANCELLED)},onError:()=>{n.danger(e.formatMessage({id:"c0xDWm",defaultMessage:"An error occurred while skipping thinking."}),{loggingTitle:"An error occurred while skipping thinking.",toastId:"caterpillar_mutations",loggingDescription:"Error message when task answer now throws an error"})}})}const Ive=({taskId:t,clientThreadId:e,onClose:n})=>{const s=J(),o=Ut(),a=r9(c=>c.bySystemHint(Ie.Research)),i=Ave({taskId:t,intl:s,toaster:o}),l=_.useCallback(()=>{i.mutate(),Ps(e,null),U.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:jt(e),currentLeafId:me.getCurrentNode(ft(e)).message.id,eventSource:"mouse"}),n()},[i,e,n]);return r.jsx(Sl,{open:!0,onOpenChange:c=>{c||n()},children:r.jsxs(Cl,{children:[r.jsx(xm,{className:"border-token-border-medium radix-state-open:animate-show fixed inset-0 bg-black/25"}),r.jsxs(dd,{className:"bg-token-main-surface-primary radix-state-open:animate-alertShow fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl shadow-2xl focus:outline-hidden",children:[r.jsx(eb,{className:"p-4 pb-2 text-lg font-semibold md:p-6 md:pb-2",children:r.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskTitle",defaultMessage:"Are you sure you want to stop researching?"})}),r.jsxs("div",{className:"flex flex-col gap-4 p-4 pt-0 md:p-6 md:pt-0",children:[r.jsx(tb,{className:"text-base",children:r.jsx("span",{className:"mb-2",children:a?r.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskDescription",defaultMessage:"Stopping now will still count as one deep research request. You have {remaining} more available until {resetDate}.",values:{remaining:a.remaining,resetDate:new Date(a.reset_after).toLocaleDateString(s.locale,{month:"long",day:"numeric"})}}):r.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskDescriptionNoRateLimit",defaultMessage:"Stopping now will still count as one deep research request."})})}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(he,{color:"secondary",onClick:n,children:r.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskCancelButton",defaultMessage:"Don't stop"})}),r.jsx(he,{color:"danger",className:"w-20",onClick:l,children:i.isPending?r.jsx(Ws,{}):r.jsx(P,{id:"caterpillar.message.modal.confirmCancelTaskButton",defaultMessage:"Stop"})})]})]})]})]})})},jve=j(()=>I(()=>import("./o84nb2862ibyoi1c.js").then(t=>t._),__vite__mapDeps([331,1])),{loading:t=>L(t)}),K0={div:t=>{const o=t,{node:e,children:n}=o,s=Me(o,["node","children"]);return r.jsx("div",B(w({},s),{className:"text-red-500",children:n}))},p:t=>{const o=t,{node:e,children:n}=o,s=Me(o,["node","children"]);return r.jsx("p",B(w({},s),{className:"text-token-text-primary text-start leading-6",children:n}))},a:t=>{const o=t,{node:e,children:n}=o,s=Me(o,["node","children"]);return r.jsx("a",B(w({},s),{className:"font-sm text-token-text-primary! leading-6",children:n}))}},Pve=1e3*60*2,Nve=30;function lO({taskId:t,clientThreadId:e,onClick:n,statusMessage:s,showSources:o,includeMargin:a,sources:i,progressBar:l}){const c=Pm(),[d,u]=_.useState(!1);return r.jsxs(r.Fragment,{children:[t&&d&&r.jsx(Ive,{taskId:t,clientThreadId:e,onClose:()=>u(!1)}),r.jsxs("div",{className:"relative flex w-4/5 max-w-[416px]",children:[t&&r.jsx("button",{onClick:()=>u(!0),disabled:!t,className:"hover:bg-token-bg-elevated-secondary bg-token-bg-elevated-primary absolute end-4 bottom-4 flex items-center justify-center rounded-full border border-black/10 p-0.5 dark:border-white/10",children:r.jsx(jve,{className:"icon-lg"})}),r.jsx("button",{onClick:()=>c&&n(),className:W("bg-token-main-surface-primary mt-4 flex w-full items-start justify-start gap-[18px] rounded-2xl border border-black/10 px-5 py-4 shadow-sm dark:border-white/10",c?"hover:bg-token-main-surface-secondary cursor-pointer":"cursor-auto"),children:r.jsxs("div",{className:"flex w-full flex-col gap-3",children:[r.jsxs("div",{className:W("flex flex-col items-start justify-start self-stretch md:h-7 md:flex-row md:items-center md:justify-between",o?"h-12":"h-6"),children:[r.jsx("div",{className:W("font-sm text-token-text-primary w-full flex-1 truncate text-start leading-7 md:w-0",a&&"me-[30px]"),children:s}),o&&i]}),r.jsx("div",{className:W("flex w-full items-center justify-start gap-4 self-stretch pb-2",t&&"pe-10"),children:l})]})})]})]})}function i3({taskId:t,clientThreadId:e,toggleSidebar:n,openSidebar:s,startTime:o,progressBar:a}){const i=J(),[l,c]=_.useState(!1),d=GL();_.useEffect(()=>{if(!o)return;const p=Date.now()-o,g=Pve-p;if(g>0){const h=setTimeout(()=>{c(!0),s()},g);return()=>clearTimeout(h)}else c(!0),s()},[o,s]);const u=Od(),m=ta(p=>t?p.tasks[t]:null),f=u&&m&&ZX(m);return _.useEffect(()=>{f&&s()},[f,s]),a||(a=r.jsx(iO,{className:"h-2 w-full"})),r.jsx(lO,{taskId:t,clientThreadId:e,onClick:n,statusMessage:l?i.formatMessage({id:"T2SbxC",defaultMessage:"Waiting"}):r.jsx("div",{className:"text-token-text-primary text-sm font-medium text-pretty",children:d.startingMessage}),progressBar:a,showSources:!1})}function Rve(t,e,n){var a;const s=t.formatMessage({id:"Bs+OcV",defaultMessage:"Thinking"});if(e.length<2)return(a=n==null?void 0:n.initial)!=null?a:s;const o=e[e.length-2];return o.type==="summary"?o.title:o.type==="search"?o.query:(o==null?void 0:o.type)==="websiteOpen"?r.jsx(Hs,{componentOverrides:K0,children:o.activeRowText}):o.type==="fileOpen"?r.jsx(Hs,{componentOverrides:K0,children:o.activeRowText}):o.type==="pythonAnalysis"?r.jsx(Hs,{componentOverrides:K0,children:o.analysisSummary}):s}function Lve({task:t,clientThreadId:e,caterpillarRows:n,messageWithTaskMetadata:s,totalSources:o,handleToggleCaterpillarSidebar:a}){var k,M;const i=J(),l=Pm(),c=Rve(i,n,(k=s.metadata)==null?void 0:k.async_task_status_messages),d=((M=t==null?void 0:t.expectedDurationMinutes)!=null?M:Nve)*60*1e3,u=G(),m=Od(),f=xe(u,"3550239432"),p=t.createdAt?+new Date(t.createdAt):Date.now(),g=rv(p,d),h=s!=null&&s.create_time?s.create_time*1e3:0,x=Math.min(rv(h||Date.now(),d),4),y=f?Math.max(g,x):g;let b;const v=r.jsx("div",{className:"bg-token-main-surface-tertiary flex h-2 shrink grow basis-0 items-start justify-start gap-2.5 overflow-hidden rounded-[10px]",children:r.jsx(Eve,{percentage:y,barClassName:"bg-token-text-primary",backgroundClassName:"bg-token-main-surface-tertiary"})});f&&(b=v),_.useEffect(()=>{m||Ps(e,{source:ns.CLIENT,value:Yt.STREAMING})},[e,m]);const{openThreadSidebar:S}=Ir();_.useEffect(()=>{n.length===2&&l&&S({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[n.length,S,t.taskId,e,l]);const C=_.useCallback(()=>{S({type:"caterpillar",caterpillarId:t.taskId,initialTab:"activity"})},[S,t.taskId]);return n.length<=1?r.jsx(i3,{taskId:t.taskId,clientThreadId:e,toggleSidebar:()=>a("activity"),openSidebar:C,startTime:new Date(t.createdAt).getTime(),progressBar:b}):r.jsx(lO,{taskId:t.taskId,clientThreadId:e,onClick:()=>a("activity"),statusMessage:c,showSources:!0,includeMargin:o>0,sources:o===0?r.jsx("div",{className:"text-token-text-tertiary text-sm text-pretty",children:r.jsx(P,{id:"zfwUjs",defaultMessage:"Looking for sources"})}):r.jsxs("button",{onClick:T=>{T.stopPropagation(),a("sources")},className:W("flex shrink-0 gap-1 text-[13px] leading-[18px] text-[#0285ff]",l?"cursor-pointer hover:text-[#0285ff]/80":"cursor-auto"),children:[r.jsx("div",{className:"relative",children:r.jsx(dn,{initial:!1,children:r.jsx(Xe.span,{initial:{opacity:0,rotateX:-90,translateY:20},animate:{opacity:1,rotateX:0,translateY:0},exit:{opacity:0,rotateX:90,translateY:-20},transition:{duration:.35},className:"absolute start-0 md:end-0",children:o},o)})}),r.jsx("div",{className:W("md:pe-0",o>0&&"ps-2",o>9&&"ps-[14px]",o>99&&"ps-[22px]"),children:o>1?r.jsx(P,{id:"zN+MuO",defaultMessage:" sources"}):r.jsx(P,{id:"dMowmJ",defaultMessage:" source"})})]}),progressBar:v})}function iv({message:t,handleToggleCaterpillarSidebar:e}){const n=Pm();return r.jsx("div",{className:"flex w-full flex-col gap-6 pt-3 pb-6",children:r.jsx("button",{onClick:()=>n&&e(),className:W("text-token-text-tertiary flex w-full text-start",n?"hover:text-token-text-secondary cursor-pointer":"cursor-auto"),children:t})})}function dM({task:t,clientThreadId:e,messageWithTaskMetadata:n,totalSources:s,totalSearches:o,handleToggleCaterpillarSidebar:a}){var p,g,h,x,y,b;const i=t==null?void 0:t.originalConversationId,l=xP(i),c=G(),d=Od(),u=!1,m=Ue(e,v=>Rpe(v,t==null?void 0:t.taskId)),{clearSystemHintModeTrigger:f}=na();return _.useEffect(()=>{(t==null?void 0:t.status)===Ms.COMPLETED&&!m&&!u&&(d&&$p(c)?qe(i,v=>{ln.setShouldRefetchConvoOnFinalize(v,!0)}):l(),f(Ie.Research))},[t==null?void 0:t.status,u,m,l,f,d,c,i]),r.jsx(iv,{message:r.jsxs(r.Fragment,{children:[(b=(y=(g=(p=n.metadata)==null?void 0:p.async_task_status_messages)==null?void 0:g.completed_with_time)!=null?y:(x=(h=n.metadata)==null?void 0:h.async_task_status_messages)==null?void 0:x.completed_no_time)!=null?b:r.jsx(P,{id:"4d0xZc",defaultMessage:"Completed"}),s===0?r.jsx(P,{id:"VggF2B",defaultMessage:"  0 sources"}):s===1?r.jsx(P,{id:"zkkdKV",defaultMessage:"  1 source"}):r.jsx(P,{id:"qcKt3q",defaultMessage:"  {sourcesCount} sources",values:{sourcesCount:s}}),o>0&&r.jsx(P,{id:"ti+7CY",defaultMessage:"  {searchesCount, plural, one {# search} other {# searches}}",values:{searchesCount:o}})]}),handleToggleCaterpillarSidebar:()=>a("activity")})}function cO({clientThreadId:t}){const e=G(),n=ht(e,t),s=ue(()=>{var i;return((i=Mi(n))==null?void 0:i.value)===Yt.STREAMING}),[o]=Ue(t,i=>[me.getRequestId(i)]);return Jo(o)||s}function TKe({messages:t,clientThreadId:e}){var m;const n=t.find(f=>{var p,g;return((p=f.metadata)==null?void 0:p.b1de6e2_s)&&((g=f.metadata)==null?void 0:g.async_task_id)}),s=(m=n==null?void 0:n.metadata)==null?void 0:m.async_task_id,o=t.find(f=>f.recipient===oo.START_RESEARCH_TASK),a=Od(),i=Ue(e,f=>a?Lpe(f,o==null?void 0:o.id):Ope(f,o==null?void 0:o.id)),l=cO({clientThreadId:e}),[c,d]=_.useState(l),{clearSystemHintModeTrigger:u}=na();return _.useEffect(()=>{const f=setTimeout(()=>{d(i&&(l||a))},3e3);return()=>clearTimeout(f)},[l,i,a]),_.useEffect(()=>{c&&u(Ie.Research)},[c,u]),!n||!s?c?r.jsx(i3,{taskId:s,clientThreadId:e,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):null:r.jsx(Ove,{clientThreadId:e,payloadTaskId:s,messageWithTaskMetadata:n})}function Ove({payloadTaskId:t,messageWithTaskMetadata:e,clientThreadId:n}){var f,p,g,h,x,y,b,v;Vye(t,e,n);const s=ta(S=>t?S.tasks[t]:null),o=J(),a=s==null?void 0:s.status,i=_.useMemo(()=>s!=null&&s.rows?s.rows:[],[s==null?void 0:s.rows]),{toggleThreadSidebar:l}=Ir(),{totalSources:c,totalSearches:d}=_.useMemo(()=>{if(!i)return{uniqueSources:[],totalSources:0,totalSearches:0};const S=sve(i),C=S.reduce((M,T)=>M+T.count,0),k=ove(i);return{uniqueSources:S,totalSources:C,totalSearches:k}},[i]),u=rf("caterpillar"),m=_.useCallback(S=>{t&&l({type:"caterpillar",caterpillarId:t,initialTab:S},u)},[l,t,u]);return oee(t),(p=(f=e.metadata)==null?void 0:f.async_task_status_messages)!=null&&p.completed_with_time?r.jsx(dM,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:d,handleToggleCaterpillarSidebar:m}):!s||!a||a===Ms.UNDETERMINED?r.jsx(i3,{taskId:t,clientThreadId:n,toggleSidebar:()=>{},openSidebar:()=>{},startTime:new Date().getTime()}):s.status===Ms.COMPLETED?r.jsx(dM,{task:s,clientThreadId:n,messageWithTaskMetadata:e,totalSources:c,totalSearches:d,handleToggleCaterpillarSidebar:m}):s.status===Ms.FAILED?r.jsx(iv,{message:(x=(h=(g=e.metadata)==null?void 0:g.async_task_status_messages)==null?void 0:h.error)!=null?x:o.formatMessage({id:"at6zk8",defaultMessage:"Failed to think"}),handleToggleCaterpillarSidebar:()=>m("activity")}):s.status===Ms.CANCELLED?r.jsx(iv,{message:(v=(b=(y=e.metadata)==null?void 0:y.async_task_status_messages)==null?void 0:b.cancelled)!=null?v:o.formatMessage({id:"u1rIr5",defaultMessage:"Task Cancelled"}),handleToggleCaterpillarSidebar:()=>m("activity")}):r.jsx(Lve,{task:s,clientThreadId:n,caterpillarRows:i,messageWithTaskMetadata:e,totalSources:c,handleToggleCaterpillarSidebar:m})}var Q0,uM;function Dve(){if(uM)return Q0;uM=1;function t(e){return e==null}return Q0=t,Q0}var Fve=Dve();const Bve=Wn(Fve),Uve=j(()=>I(()=>import("./dzlsnt42nnmwuxsc.js").then(t=>t._),__vite__mapDeps([136,1])),{loading:t=>L(t)}),Vve=j(()=>I(()=>import("./rsi9kppw43ykrsgk.js").then(t=>t._),__vite__mapDeps([332,1])),{loading:t=>L(t)});function Gve({formData:t,readOnly:e,schema:n,uiSchema:s,onChange:o}){const a=_.useCallback((c,d)=>{o==null||o(B(w({},t),{[c]:d}))},[t,o]);_.useEffect(()=>{const c={};Object.entries(n.properties).forEach(([d,u])=>{c[d]===void 0&&u.default!==void 0&&("enum"in u?c[d]=[u.default]:c[d]=u.default)}),o(c)},[]);const i=_.useMemo(()=>{const c=Object.fromEntries(s.elements.map(d=>{const u=Wo(d.scope.split("/"));return u?[u,d]:[]}).filter(d=>d.length>0));return Object.entries(n.properties).map(([d,u])=>{const m=c[d];return m?{dataRow:u,uiRow:m,rowKey:d}:null}).filter(d=>!!d).sort((d,u)=>{const m="enum"in d.dataRow,f="enum"in u.dataRow;return m===f?0:m?-1:1})},[n,s]),l=i.filter(c=>"enum"in c.dataRow).length;return r.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:i.map((c,d)=>r.jsx($ve,{updateFormDataForRow:u=>a(c.rowKey,u),clearAll:()=>a(c.rowKey,void 0),renderRow:c,value:t==null?void 0:t[c.rowKey],readOnly:e,forceFullWidth:l%2===1&&d===l-1},c.rowKey))})}function $ve({updateFormDataForRow:t,clearAll:e,renderRow:n,readOnly:s,value:o,forceFullWidth:a=!1}){const{dataRow:i,uiRow:l,rowKey:c}=n,d=J(),u=_.useCallback(k=>{o===void 0?t([k]):o.includes(k)?t(o.filter(M=>M!==k)):t([...o,k])},[o,t]),[m,f]=_.useState(!1),[p,g]=_.useState(""),[h,x]=_.useState(!1),[y,b]=_.useState(void 0);_.useEffect(()=>{f(!1),g("")},[h]);const v=_.useCallback(()=>{u(p),f(!1),g(""),y&&b([...y,p])},[p,u,f,g,y]);_.useEffect(()=>{"enum"in i&&i.enum&&b(i.enum)},[i]);const S=_.useMemo(()=>{const k=i.type,M=Bve(o)||o===""||Array.isArray(o)&&o.length===0;if(y){const T=M?d.formatMessage({id:"Dzsmf1",defaultMessage:"Any"}):o.length===1?o[0]:o[0]+" + ".concat(o.length-1);return r.jsxs(K.Root,{open:h,onOpenChange:x,children:[r.jsxs(K.Trigger,{className:"border-token-main-surface-quaternary bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-full justify-between rounded-md border text-start",children:[r.jsx("span",{className:"text-token-text-primary truncate",children:T}),r.jsx(Uve,{className:"icon-sm text-token-text-tertiary"})]}),r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"medium",children:[r.jsx(K.MultiSelectCheckboxItem,{checked:(o==null?void 0:o.length)===0||o===void 0,onCheckedChange:e,children:r.jsx(P,{id:"Dzsmf1",defaultMessage:"Any"})},"any"),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),y.map(E=>r.jsx(K.MultiSelectCheckboxItem,{checked:o==null?void 0:o.includes(E),onCheckedChange:()=>u(E),children:r.jsx("span",{className:"pe-2",children:E})},E)),r.jsx("hr",{className:"border-token-main-surface-quaternary mx-2 my-2"}),m?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between pe-5",children:[r.jsx(sm,{autoFocus:!0,name:"new-option",className:"bg-token-main-surface-primary text-token-text-secondary hover:bg-token-main-surface-primary! dark:bg-token-main-surface-secondary w-0 flex-1 grow rounded-md border-none text-start focus-within:ring-0!",value:p,placeholder:d.formatMessage({id:"LhAlwa",defaultMessage:"Add option..."}),ariaLabel:d.formatMessage({id:"XElhCL",defaultMessage:"New option"}),onChange:E=>g(E.target.value),onKeyDown:E=>E.stopPropagation(),onPressEnter:v}),r.jsx("button",{className:"shrink-0 cursor-pointer",onClick:v,children:r.jsx(Vve,{className:"icon-sm text-token-text-primary"})})]}):r.jsx("div",{className:"flex px-2",children:r.jsx("button",{className:"bg-token-main-surface-primary hover:bg-token-main-surface-secondary w-full rounded-md border-none p-2 text-start text-sm",onClick:()=>f(!0),children:r.jsx(P,{id:"lMgmto",defaultMessage:"Add Option..."})})})]})})]})}else return k==="string"||k==="integer"?r.jsx(sm,{ariaLabel:d.formatMessage({id:"M18pon",defaultMessage:"Form row"}),name:c,color:"quaternary",placeholder:l.placeholder,value:o!=null?o:"",type:"text",className:W("border-token-main-surface-quaternary text-token-text-primary",M&&"text-token-text-quaternary"),onChange:T=>t(T.target.value),disabled:s}):null},[i,o,l.placeholder,u,d,c,s,t,e,m,p,h,y,v]);if(!S)return null;const C=a||!y;return r.jsx(Hve,{label:l.label,className:W("col-span-1 flex flex-col justify-between",C&&"sm:col-span-2"),children:S})}function Hve({children:t,label:e,className:n}){return r.jsxs("div",{className:n,children:[r.jsx("p",{className:"mb-1 font-[550]",children:e}),r.jsx("div",{children:t})]})}function Wve(t,e,n){const s=e.elements.length;if(s===0)return;const o=Object.entries(t).reduce((a,[i,l])=>Array.isArray(l)?l.length>0?a+1:a:l!==""?a+1:a,0);U.logEventWithStatsig("dynamic-form-submission","chatgpt_dyanmic_form_submission",B(w({},An({clientThreadId:n})),{totalItems:s.toString(),completedItems:o.toString(),ratio:(o/s).toString()}))}function zve(t,e){let n="";return e.elements.forEach(s=>{var c;const o=s.scope.split("/").pop(),a=o&&t[o],i=a?Array.isArray(a)?a.join(", "):a:"Any",l=(c=s.label)!=null?c:o;n+="".concat(l,": ").concat(i,"\n")}),n}function EKe({messages:t,clientThreadId:e,isLastMessage:n}){var S;const s=t.find(C=>C.author.role===Ze.Assistant),o=t.find(C=>{var k;return(k=C.metadata)==null?void 0:k.json_form}),a=(S=o==null?void 0:o.metadata)==null?void 0:S.json_form,[i,l]=_.useState({}),[c,d]=_.useState(),[u,m]=_.useState(),f=_r.useStore(),p=Hm(e);_.useEffect(()=>{a&&(d(a.json_form_ui),m(a.json_form_data))},[a]);const g=_.useCallback(()=>{if(l({}),c){const C=B(w({},c),{elements:c.elements.filter(k=>k.scope!=="#/properties/AdditionalInfo")});d(C)}u&&(delete u.properties.AdditionalInfo,m(u))},[l,d,m,c,u]),h=_.useCallback(()=>{if(c){const C=B(w({},c),{elements:[...c.elements,{type:"Control",scope:"#/properties/AdditionalInfo",label:"Additional Info",placeholder:"Any other details..."}]});d(C)}if(u){const C=B(w({},u.properties),{AdditionalInfo:{type:"string"}});m(B(w({},u),{properties:C}))}},[d,m,c,u]),x=c==null?void 0:c.elements.some(C=>C.scope.endsWith("#/properties/AdditionalInfo")),y=Ue(e,me.getCurrentLeafId),b=(o==null?void 0:o.id)!==y;if(!o||!u||!c)return(s==null?void 0:s.status)==="in_progress"&&n?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(er,{className:"h-[26px] w-full"}),r.jsx(er,{className:"h-[26px] w-3/4"}),r.jsx(uZ,{})]}):null;if(b)return null;const v=async C=>{const k=f.getActiveSystemHintType(),M=zve(i,c);Wve(i,c,e),p({sourceEvent:C,promptMessage:us(M),completionMetadata:{systemHints:k?[k]:[],conversationMode:{kind:Tt.PrimaryAssistant}}})};return r.jsxs(T7,{children:[r.jsx(qve,{formData:i,dataSchema:u,uiSchema:c,setData:l,readOnly:b}),r.jsxs("div",{className:"flex w-full justify-between",children:[x?r.jsx("div",{}):r.jsx(he,{disabled:b,onClick:h,color:"secondary",className:"text-token-text-secondary",children:r.jsx(P,{id:"Sen69P",defaultMessage:"Add a detail"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(he,{disabled:b,onClick:g,color:"secondary",className:"text-token-text-secondary",children:r.jsx(P,{id:"Uqo7UD",defaultMessage:"Reset"})}),r.jsx(he,{disabled:b,onClick:v,children:r.jsx(P,{id:"FVou++",defaultMessage:"Start"})})]})]})]})}function qve({dataSchema:t,uiSchema:e,setData:n,readOnly:s,formData:o}){return r.jsx("div",{children:r.jsx(Gve,{formData:o,readOnly:s,schema:t,uiSchema:e,onChange:a=>n(a)})})}const dO=0,l3=700,Yve=t=>{var e;return Array.from((e=t.match(/\s*\S+(?:\s+|$)/g))!=null?e:[])},Zve=/^\s*$/,Kve=()=>{const{locale:t}=J(),e=_.useMemo(()=>{try{return new Intl.Segmenter(t,{granularity:"word"})}catch(s){return null}},[t]);return _.useCallback(s=>{var a;if(e==null)return Yve(s);const o=[];for(const{segment:i,isWordLike:l}of e.segment(s))if(Zve.test(i)||!l){const c=Math.max(o.length-1,0);(a=o[c])!=null||(o[c]=""),o[c]+=i}else o.push(i);return o},[e])},Qve=_.createContext({isDisabled:!0,segmentText:()=>[],enqueueElement:()=>{},dequeueElement:()=>{},updateElementBounds:()=>{},reportReady:()=>{},reportProgress:()=>{},reportComplete:()=>{},lastPositionCompletedAnimating:null,activeStartPos:null,animationTiming:{durationMs:l3,delayMs:dO}}),iu=(t,e)=>"".concat(t,"-").concat(e),Jve=t=>{const[e,n]=t.split("-");return{tag:e,startPos:parseInt(n)}},AKe=({isDisabled:t,onComplete:e,children:n,defaultDelayPerSegmentMs:s=dO,defaultAnimationDurationPerSegmentMs:o=l3})=>{const a=_.useRef(new Set),[i,l]=_.useState(null),[c,d]=_.useState(null),u=_.useRef(new Map),m=_.useRef(null),f=_.useCallback((S,C,k,M)=>{var T;m.current=Math.max((T=m.current)!=null?T:0,k),u.current.set(iu(S,C),{start:C,end:k,numChildren:M})},[]),p=_.useCallback((S,C)=>{c!=null&&C<=c||(a.current.add(iu(S,C)),a.current.size===1&&d(C))},[c]),g=_.useCallback((S,C)=>{const k=iu(S,C);a.current.delete(k),u.current.delete(k)},[]),[h]=_.useState(()=>({delayMs:s,durationMs:o})),x=_.useCallback((S,C,k)=>{var A;if(C!==c)return;const M=iu(S,C),T=(A=u.current.get(M))==null?void 0:A.end,E=m.current;T==null||E==null},[c]),y=_.useCallback((S,C)=>{const k=iu(S,C);if(!a.current.has(k))return;a.current.delete(k);let M=null;for(const T of a.current){const{startPos:E}=Jve(T);(M==null||E<M)&&(M=E)}M!=null&&d(M)},[]),b=_.useCallback(S=>{(a.current.size===0||a.current.size===1&&S===m.current)&&(e==null||e()),l(C=>Math.max(C!=null?C:0,S))},[e]),v=Kve();return r.jsx(Qve.Provider,{value:{lastPositionCompletedAnimating:i,isDisabled:t,activeStartPos:c,animationTiming:h,segmentText:v,enqueueElement:p,dequeueElement:g,updateElementBounds:f,reportProgress:x,reportReady:y,reportComplete:b},children:n})},Xve="_root_m1hgl_7",ebe="_fadeIn_m1hgl_8",IKe={root:Xve,fadeIn:ebe,"fade-in":"_fade-in_m1hgl_1"},jKe=()=>{const t=Ve(G(),"3991624489"),e=uy(({wordFadeType:o})=>o),n=uy(({tokenBufferType:o})=>o),s=t.get("animation_duration",l3);return{wordFadeType:Hp(e!=null?e:t.get("word_fade_type"),LH),bufferType:Hp(n!=null?n:t.get("token_buffer_type"),RH),animationDurationMs:s}};function uO(t){return xe(t,"2304807207")}const PKe=t=>{var e,n,s;return((s=(n=(e=t.metadata)==null?void 0:e.suggested_connector_ids)==null?void 0:n.length)!=null?s:0)>0},tbe=t=>{var e;t=Array.isArray(t)?t:[t];for(let n=t.length-1;n>=0;n--){const{metadata:s}=t[n];if((e=s==null?void 0:s.suggested_connector_ids)!=null&&e.length)return s.suggested_connector_ids}return[]},mO=({intl:t,conversation:e,systemHint:n})=>{var d,u,m,f;const s=n.systemHint,o=ft(e.id),a=me.getParentPromptNode(o);if(!a)return;const i=(d=n==null?void 0:n.actionLabel)!=null?d:n==null?void 0:n.name;Ee.count(Ae.ECOSYSTEM,"suggestion_hint_followup_turn_triggered"),U.logEventWithStatsig("Ecosystem app: Suggestion hint followup turn triggered","chatgpt_web_ecosystem_suggestion_hint_followup_turn_triggered",w({system_hint:s},i?{system_hint_label:i}:{}));const l=[...(m=(u=a.message.metadata)==null?void 0:u.system_hints)!=null?m:[],s],c=us(a.message.content,B(w({},a.message.metadata),{system_hints:l,is_visually_hidden_from_conversation:!0,triggered_by_system_hint_suggestion:!0,targeted_reply_label:i?t.formatMessage(mM.usedSystemHint,{systemHint:i}):t.formatMessage(mM.usedSystemHintGeneric)}));a&&Er({promptMessage:c,completionMetadata:{systemHints:l,conversationMode:(f=o==null?void 0:o.mode)!=null?f:{kind:Tt.PrimaryAssistant}},eventSource:"mouse",conversation:e}),s&&em(s,tm.SuggestionAccept,An({clientThreadId:e.id}))},mM=be({usedSystemHint:{id:"pwHqiX",defaultMessage:"Used {systemHint}"},usedSystemHintGeneric:{id:"wbs4BT",defaultMessage:"Used tool"}}),nbe=t=>{"use forget";const e=H.c(3),n=_.useRef(void 0);let s,o;return e[0]!==t?(s=()=>{n.current=t},o=[t],e[0]=t,e[1]=s,e[2]=o):(s=e[1],o=e[2]),_.useEffect(s,o),n},sbe=t=>{"use forget";const e=H.c(61),{conversation:n,connectorId:s,connector:o,hasLink:a,showConnectBeforeTurn:i,callToAction:l,imageUrl:c}=t,d=J(),u=i9();let m;e[0]!==o.name||e[1]!==s||e[2]!==n||e[3]!==d?(m=()=>{M.current||(M.current=!0,mO({intl:d,conversation:n,systemHint:{name:o.name,systemHint:DC(s)}}))},e[0]=o.name,e[1]=s,e[2]=n,e[3]=d,e[4]=m):m=e[4];const f=ya(m),[p,g]=zs();let h;e[5]!==p?(h=p.get(OH),e[5]=p,e[6]=h):h=e[6];const x=h==="true";let y;e[7]!==p?(y=p.get("oauth_success"),e[7]=p,e[8]=y):y=e[8];const b=y;let v;e[9]!==p?(v=p.get("connector_id"),e[9]=p,e[10]=v):v=e[10];const S=v,C=nbe(DH()).current,k=_r.useStore(),M=_.useRef(!1);let T,E;e[11]!==s||e[12]!==S||e[13]!==f||e[14]!==b||e[15]!==g?(T=()=>{!b||S!==s||(g(abe),f())},E=[b,g,f,s,S],e[11]=s,e[12]=S,e[13]=f,e[14]=b,e[15]=g,e[16]=T,e[17]=E):(T=e[16],E=e[17]),_.useEffect(T,E);let A,N;e[18]!==s||e[19]!==f||e[20]!==x||e[21]!==C?(A=()=>{!s||!x||C!==s||f()},N=[x,s,C,f],e[18]=s,e[19]=f,e[20]=x,e[21]=C,e[22]=A,e[23]=N):(A=e[22],N=e[23]),_.useEffect(A,N);const{logo_url:R,logo_url_dark:O}=o;let D;e[24]!==R||e[25]!==O?(D={lightLogoUrl:R,darkLogoUrl:O},e[24]=R,e[25]=O,e[26]=D):D=e[26];const{data:F}=Jh(D),V=c||(F==null?void 0:F.url);let z,$,Y;e[27]===Symbol.for("react.memo_cache_sentinel")?(z={opacity:0},$={opacity:1},Y={delay:.1,duration:.5,type:"spring"},e[27]=z,e[28]=$,e[29]=Y):(z=e[27],$=e[28],Y=e[29]);let Z;e[30]!==o.name||e[31]!==o.supported_auth||e[32]!==s||e[33]!==n||e[34]!==f||e[35]!==a||e[36]!==u||e[37]!==k||e[38]!==i?(Z=()=>{if(Ee.count(Ae.ECOSYSTEM,"inline_message_suggestion_clicked"),U.logEventWithStatsig("Ecosystem app: Inline message suggestion clicked","chatgpt_web_ecosystem_inline_message_suggestion_clicked"),Ee.count(Ae.ECOSYSTEM,"suggestion_hint_clicked"),U.logEventWithStatsig("Ecosystem app: Suggestion hint clicked","chatgpt_web_ecosystem_suggestion_hint_clicked",w({system_hint:DC(s)},o.name?{system_hint_label:o.name}:{})),a||!i)f();else{Ee.count(Ae.ECOSYSTEM,"inline_message_suggestion_connect_modal_opened"),U.logEventWithStatsig("Ecosystem app: Inline message suggestion connect modal opened","chatgpt_web_ecosystem_inline_message_suggestion_connect_modal_opened");const ae=n.serverId$(),ce=ae?new URL(pa(ae),window.location.origin):new URL(window.location.href);ce.searchParams.set("connector_id",s),ce.searchParams.set("oauth_success","true");const ye=k.getActiveSystemHintType();ye&&ce.searchParams.set("system_hint",ye);const fe=o.supported_auth.length===1&&o.supported_auth[0].type==="OAUTH"?"OAUTH":void 0;u({connectorId:s,authTypeOverride:fe,redirectAfter:ce.toString(),referrer:zc.MessageSuggestion,showSettingsBehindConnectorLink:!1})}},e[30]=o.name,e[31]=o.supported_auth,e[32]=s,e[33]=n,e[34]=f,e[35]=a,e[36]=u,e[37]=k,e[38]=i,e[39]=Z):Z=e[39];let Q;e[40]!==c||e[41]!==V?(Q=V&&r.jsx("div",{className:W("flex items-center justify-center overflow-hidden",c?"bg-token-bg-tertiary h-14 w-14 rounded-lg":W("bg-token-bg-primary h-12 w-12 rounded-xl","shadow-[0_0_0_0.5px_rgba(0,0,0,0.05),0_0.5px_1px_0_rgba(0,0,0,0.09),0_5px_8px_-3px_rgba(0,0,0,0.05)]","dark:shadow-[0_0_0_0.5px_rgba(255,255,255,0.05),0_0.5px_1px_0_rgba(255,255,255,0.09),0_5px_8px_-3px_rgba(255,255,255,0.05)]")),children:r.jsx("img",{className:W("object-contain",c?"h-full w-full":"h-8 w-8 overflow-hidden rounded-lg"),src:V,"aria-hidden":"true"})}),e[40]=c,e[41]=V,e[42]=Q):Q=e[42];let q;e[43]!==l?(q=r.jsx("span",{className:"text-token-text-primary truncate text-base",children:l}),e[43]=l,e[44]=q):q=e[44];let X;e[45]!==o.name||e[46]!==F||e[47]!==c?(X=c&&r.jsx("span",{className:"h-4.5 w-4.5 shrink-0 overflow-hidden rounded-md",children:(F==null?void 0:F.url)&&r.jsx("img",{src:F.url,className:"h-full w-full",alt:o.name})}),e[45]=o.name,e[46]=F,e[47]=c,e[48]=X):X=e[48];let oe;e[49]!==o.name?(oe=r.jsx("span",{className:"text-token-text-tertiary group-hover:text-token-text-secondary truncate text-sm",children:r.jsx(P,{id:"zGMvWb",defaultMessage:"Connect {connectorName}",values:{connectorName:o.name}})}),e[49]=o.name,e[50]=oe):oe=e[50];let se;e[51]!==X||e[52]!==oe?(se=r.jsxs("div",{className:"flex flex-1 items-start gap-2",children:[X,oe]}),e[51]=X,e[52]=oe,e[53]=se):se=e[53];let de;e[54]!==q||e[55]!==se?(de=r.jsxs("div",{className:"flex flex-col items-start gap-1 pe-2",children:[q,se]}),e[54]=q,e[55]=se,e[56]=de):de=e[56];let ie;return e[57]!==Z||e[58]!==Q||e[59]!==de?(ie=r.jsxs(Xe.button,{initial:z,animate:$,transition:Y,type:"button",className:"group after:bg-token-bg-secondary relative z-10 flex items-center gap-4 after:absolute after:-inset-2 after:z-[-1] after:hidden after:rounded-xl after:opacity-50 after:content-[''] hover:after:block",onClick:Z,children:[Q,de]}),e[57]=Z,e[58]=Q,e[59]=de,e[60]=ie):ie=e[60],ie},obe=t=>{"use forget";const e=H.c(8),{conversation:n,messages:s}=t,o=G(),a=Ve(o,"3329416233"),i=tbe(s),{platformConnectors:l}=Cd(),{connectorLinks:c}=wd(),d=a.get("is_enabled",!1),u=a.get("show_connect_before_turn",!1);if(!d)return null;const m=i.length>1,f="border-token-border-light my-2 flex gap-10 border-t pt-4";let p;e[0]!==c||e[1]!==n||e[2]!==m||e[3]!==l||e[4]!==u?(p=x=>{var v;const y=l.get(x);if(!y||!x)return null;const b=y.suggestion_config;return b!=null&&b.call_to_action?r.jsx(sbe,{conversation:n,connectorId:x,connector:y,hasLink:c.has(x),showConnectBeforeTurn:u,callToAction:b.call_to_action,imageUrl:m?null:(v=b.image_url)!=null?v:null},x):null},e[0]=c,e[1]=n,e[2]=m,e[3]=l,e[4]=u,e[5]=p):p=e[5];const g=i.map(p);let h;return e[6]!==g?(h=r.jsx("div",{className:f,children:g}),e[6]=g,e[7]=h):h=e[7],h},NKe=t=>{"use forget";const e=H.c(6),{isCompletionRequestInProgress:n,conversation:s,messages:o}=t;let a;e[0]!==s||e[1]!==n||e[2]!==o?(a=!n&&r.jsx(obe,{conversation:s,messages:o},"message-suggestion"),e[0]=s,e[1]=n,e[2]=o,e[3]=a):a=e[3];let i;return e[4]!==a?(i=r.jsx(Cb,{name:"EcosystemMessageSuggestion",children:r.jsx(dn,{children:a})}),e[4]=a,e[5]=i):i=e[5],i};function abe(t){return t.delete("oauth_success"),t.delete("system_hint"),t.delete("connector_id"),t}function RKe({text:t}){return t&&t.length>0?r.jsx("span",{className:"result-streaming streaming-dot loading-shimmer relative pt-1",children:r.jsx(Hs,{children:t})}):r.jsx("span",{className:"result-streaming streaming-dot relative pt-1",children:""})}function LKe(t,e,n,s){var o;return(o=rbe(t))!=null?o:cbe(t,e,n,s)}function rbe(t){var d,u,m;const{errType:e,errCode:n,err:s,disclaimers:o}=(d=t.clientMetadata)!=null?d:{},a=lbe(t),i=n!==Hr.ModelIncompatibility&&n!==Hr.ContentPolicy&&((m=(u=t.clientMetadata)==null?void 0:u.canRetry)!=null?m:!0);if(a&&ibe(t))return{flagSeverity:"warning",shouldHideContent:!0,errCode:Hr.ContentRegurgitation,errMessage:s,canRetry:i};if(!(o&&o.length>0)&&a)return{flagSeverity:"warning",shouldHideContent:!0,errCode:Hr.ContentOrTos,errMessage:s,canRetry:i};if(e)return{flagSeverity:e,shouldHideContent:e==="danger"&&(n===Hr.ContentPolicy||n===Hr.ModelIncompatibility),disclaimers:o,errCode:n,errMessage:s,canRetry:i}}function ibe(t){var e;return((e=t.metadata)==null?void 0:e.safety_plugin_status_code)===123}function lbe(t){var e,n;return((n=(e=t.metadata)==null?void 0:e.finish_details)==null?void 0:n.type)==="content_filter"}function cbe(t,e,n,s){var a,i,l,c;if(!n&&e&&(t==null?void 0:t.author.role)===Ze.User&&t.status!==void 0&&!s)return{flagSeverity:"info",shouldHideContent:!1,errCode:Ru.MissingLastCompletion,canRetry:!0};if(((i=(a=t.metadata)==null?void 0:a.finish_details)==null?void 0:i.type)==="interrupted"&&((c=(l=t.metadata)==null?void 0:l.finish_details)==null?void 0:c.reason)==="server_error")return{flagSeverity:"danger",shouldHideContent:!1,errCode:Ru.InterruptionServerError,canRetry:!0}}var Yn=(t=>(t[t.Thought=0]="Thought",t[t.Recap=1]="Recap",t[t.Search=2]="Search",t[t.CodeAnalysis=3]="CodeAnalysis",t[t.ImageAnalysis=4]="ImageAnalysis",t[t.ComputerOutput=5]="ComputerOutput",t[t.N7jupdLoading=6]="N7jupdLoading",t[t.Browsing=7]="Browsing",t[t.N7jupdAPI=8]="N7jupdAPI",t[t.e1ld0dvz=9]="e1ld0dvz",t[t.Glaux=10]="Glaux",t[t.Strix=11]="Strix",t))(Yn||{});const dbe=_.createContext(null);let Ep=null;const fO=()=>{var t;return(t=Ep==null?void 0:Ep.platformConnectors)!=null?t:null};function OKe({value:t,children:e}){"use no forget";return Ep=t,r.jsx(dbe.Provider,{value:t,children:e})}const ube=_.createContext({postId:""});function pO(){const{postId:t}=_.useContext(ube),{postWithProfile:e}=_.useContext(FH);return(e==null?void 0:e.post.id)||t}class mbe{async fetch(e,n){const a=this.makeQueryOptions(n,e),{enabled:s}=a,o=Me(a,["enabled"]);return await e.fetchQuery(o)}makeQueryOptions(e,n){var i;const s=To(e.asset.asset_pointer),o=B(w({},e),{id:s}),a=["getFileDownloadLink",s,e.gizmoId,e.conversationId,e.sharedThreadId,e.postId];return e.force&&(n==null||n.invalidateQueries({queryKey:a})),{queryKey:a,queryFn:async()=>s.startsWith(gr)?B(w({},e.asset),{url:s}):await fbe(o),staleTime:BH,enabled:(i=e.getServerUrl)!=null?i:!0}}}const Wd=new mbe;async function fbe(t){const{asset:e,gizmoId:n,id:s,isUnauthenticated:o,conversationId:a,postId:i}=t,l=await Eh(s,n,o,a,!1,i).catch(c=>{throw c instanceof Vn||Oe.addError(new Error("Could not fetch file with ID ".concat(s," from file service"),{cause:c})),c});if(l.status!==Ah.Success)throw Oe.addError("Could not fetch file with ID ".concat(s," from file service"),l),new Error("Could not fetch file with ID ".concat(s," from file service"));return B(w({},e),{url:l.download_url})}function DKe(o){var a=o,{className:t,onLoad:e,fadeIn:n=!0}=a,s=Me(a,["className","onLoad","fadeIn"]);const[i,l]=_.useState(!1);function c(d){l(!0),e==null||e(d)}return r.jsx("img",B(w({},s),{alt:s.alt,onLoad:d=>c(d),className:W(t,"w-fit",n&&"transition-opacity duration-300",i?"opacity-100":"opacity-0")}))}function pbe(t,e,n){const{isUnauthenticated:s}=Un(),o=_.useContext(C1),a=o==null?void 0:o.serverSharedThreadId,i=pO();return ZV({queries:t.map(l=>Wd.makeQueryOptions({asset:l,sharedThreadId:a,gizmoId:e,isUnauthenticated:s,postId:i,conversationId:n}))})}function FKe(t){"use forget";const e=H.c(8),{asset:n,gizmoId:s,conversationId:o,getServerUrl:a,sharedThreadId:i}=t,{isUnauthenticated:l}=Un(),c=pO();let d;return e[0]!==n||e[1]!==o||e[2]!==a||e[3]!==s||e[4]!==l||e[5]!==c||e[6]!==i?(d=Wd.makeQueryOptions({asset:n,gizmoId:s,isUnauthenticated:l,conversationId:o,getServerUrl:a,sharedThreadId:i,postId:c}),e[0]=n,e[1]=o,e[2]=a,e[3]=s,e[4]=l,e[5]=c,e[6]=i,e[7]=d):d=e[7],lt(d)}const gbe=t=>{const[e,n]=_.useState(null);return Ue(t,o=>{var i,l,c;if(e)return e;const a=me.findNode(o,d=>{var u;return((u=d.message.metadata)==null?void 0:u.visited_risky_domain)!==void 0});return(i=a==null?void 0:a.message.metadata)!=null&&i.visited_risky_domain?(n((l=a==null?void 0:a.message.metadata)==null?void 0:l.visited_risky_domain),(c=a.message.metadata)==null?void 0:c.visited_risky_domain):null})},hbe=(t,e)=>{var i,l;const n=Xo(),s=ue(()=>e!=null?e:n==null?void 0:n.serverId$()),o=_.useMemo(()=>t?[t]:[],[t]);return(l=(i=pbe(o,void 0,s)[0])==null?void 0:i.data)==null?void 0:l.url},BKe=t=>{const[e,n]=_.useState(t);return _.useEffect(()=>{if(!t||t===e)return;const s=new Image;return s.src=t,s.onload=()=>n(t),s.onerror=()=>console.warn("failed to load",t),()=>{s.src="",s.onload=null,s.onerror=null}},[t,e]),e},_be=t=>t.replace(/^wwws?\./,""),xbe=["localhost","127.0.0.1","newtab"];function ybe(t){try{return new URL(t)}catch(e){return Oe.addError(e),null}}function fM(t){var a;const e=(a=t==null?void 0:t.vmMetadata)==null?void 0:a.url;if(!e)return{domain:null,origin:null};if(e.startsWith("data:"))return{domain:null,origin:null};const n=ybe(e);if(!n)return{domain:null,origin:null};if(xbe.includes(n.hostname))return{domain:null,origin:null};const s=n.origin;return{domain:_be(n.hostname),origin:s}}const vbe=(t,e)=>{var u,m,f,p,g;const n=[],s=[],o=[],a=[];if(t.every(h=>h.author.name===oo.n7jupd_m)){if(!e)return;const h=Wo(t),x=typeof((u=h==null?void 0:h.metadata)==null?void 0:u.agent_custom_loading_headline)=="string"?h.metadata.agent_custom_loading_headline:void 0;return[{type:Yn.N7jupdLoading,needs_startup:(f=(m=h==null?void 0:h.metadata)==null?void 0:m.needs_startup)!=null?f:!1,custom_headline:x}]}for(const h of t){if(h.content.content_type===dt.ComputerOutput){const x=B(w({},h.content.screenshot),{vmMetadata:(p=h.metadata)==null?void 0:p.n7jupd_v,messageId:h.id});n.push(x)}if(h.content.content_type===dt.Text&&((g=h.recipient)!=null&&g.includes("computer"))&&s.push({type:h.recipient,parts:h.content.parts.join("")}),h.content.content_type===dt.StructuredThoughts)for(const x of h.content.thoughts)x.summary&&(o.push(x.summary),a.push(x.content))}const l=!1,c=[],d=Math.min(n.length,a.length);for(let h=0;h<d;h++){const x=n[h],{domain:y}=fM(x),b={type:Yn.ComputerOutput,screenshots:[x],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:s,isBlank:!y};c.push(b)}if(n.length>d){const h=n.slice(d);if(c.length===0)c.push({type:Yn.ComputerOutput,screenshots:h,text:"",messages:t,thoughts:[],fullThoughts:[],actions:s,isBlank:l});else{const x=c[c.length-1];x.screenshots.push(...h),x.isBlank&&(x.isBlank=h.every(y=>!fM(y).domain)&&x.isBlank)}}if(a.length>d)for(let h=d;h<a.length;h++)c.push({type:Yn.ComputerOutput,screenshots:[],text:"",messages:t,thoughts:[o[h]],fullThoughts:[a[h]],actions:s,isBlank:!0});return!c.length&&(n.length||a.length)?[{type:Yn.ComputerOutput,screenshots:n,text:"",messages:t,thoughts:o,fullThoughts:a,actions:s,isBlank:l}]:c},UKe=t=>{var s,o,a,i;const e=t.messages[0];let n;switch(e.author.name){case"browser.search":{const l=(o=(s=e.metadata)==null?void 0:s.n7jupd_title)!=null?o:"Searched",c=(i=(a=e.metadata)==null?void 0:a.n7jupd_urls)!=null?i:[];n={type:Yn.Search,queries:[{type:"search",q:l}],sources:c.map(d=>({type:"search_result_group",domain:d,entries:[{type:"search_result",url:d,title:"",snippet:"",ref_id:null,content_type:null,pub_date:null}]}))};break}}if(!(!n||!n.sources.length))return[n]},lv=/connector_[0-9a-f]{32}/i,VKe=t=>{var l,c,d,u,m,f,p,g,h,x,y,b,v,S,C,k;const e=fO();if(!e)return;const n=t.messages[0];if(!n)return;const s=(l=n.metadata)==null?void 0:l.n7jupd_subtool;if((c=s==null?void 0:s.subtool)!=null&&c.includes("search"))return[{type:Yn.N7jupdAPI,action:"n7jupd_as"}];if((d=s==null?void 0:s.subtool)!=null&&d.includes("api_doc"))return[{type:Yn.N7jupdAPI,action:"n7jupd_ag"}];const o=(m=(u=n.metadata)==null?void 0:u.n7jupd_subtool)==null?void 0:m.generic_api_func;let a=(p=(f=o==null?void 0:o.match(lv))==null?void 0:f[0])!=null?p:void 0;a||(a=(y=(x=(h=(g=n.metadata)==null?void 0:g.n7jupd_url)==null?void 0:h.match(lv))==null?void 0:x[0])!=null?y:void 0);const i=e==null?void 0:e.get(a!=null?a:"");if(!a||!i)return[{type:Yn.N7jupdAPI,action:"n7jupd_cf"}];if(t.messages.length>1&&((b=t.messages[1].metadata)!=null&&b.connector_source)&&t.messages[1].content.content_type===dt.TetherBrowsingDisplay){if((v=t.messages[1].metadata)!=null&&v.display_url&&((S=t.messages[1].metadata)!=null&&S.display_title))return[{type:Yn.N7jupdAPI,action:"n7jupd_cf",source:i,fetchResult:{url:(C=t.messages[1].metadata)==null?void 0:C.display_url,title:(k=t.messages[1].metadata)==null?void 0:k.display_title}}];const M=gO(t.messages[1].content.result);if(M.length)return[{type:Yn.N7jupdAPI,action:"n7jupd_cs",source:i,searchResults:M.map(([T,E])=>({url:T,title:E}))}]}return[{type:Yn.N7jupdAPI,action:"n7jupd_cf",source:i}]},GKe=t=>{var i,l,c,d,u,m,f,p,g,h,x,y,b;const e=fO();if(!e)return;const n=t.messages[0];if(!n)return;if((i=n.recipient)!=null&&i.includes("list_resources")||(l=n.recipient)!=null&&l.includes("search_tools"))return[{type:Yn.N7jupdAPI,action:"n7jupd_as"}];if((c=n.recipient)!=null&&c.includes("read_resources")||(d=n.recipient)!=null&&d.includes("get_resource"))return[{type:Yn.N7jupdAPI,action:"n7jupd_ag"}];if(t.messages.length==1)return[];const s=t.messages[1];if(s.content.content_type!==dt.CitableCodeOutput)return[{type:Yn.N7jupdAPI,action:"n7jupd_cf"}];let o=(m=(u=s.content.metadata)==null?void 0:u.connector_id)!=null?m:void 0;o||(o=(p=(f=s.content.output_str.match(lv))==null?void 0:f[0])!=null?p:void 0);const a=e==null?void 0:e.get(o!=null?o:"");if(t.messages.length>1&&t.messages[1].content.content_type===dt.CitableCodeOutput&&((g=t.messages[1].content.metadata)!=null&&g.connector_source)){if((h=t.messages[1].metadata)!=null&&h.display_url&&((x=t.messages[1].metadata)!=null&&x.display_title))return[{type:Yn.N7jupdAPI,action:"n7jupd_cf",source:a,fetchResult:{url:(y=t.messages[1].metadata)==null?void 0:y.display_url,title:(b=t.messages[1].metadata)==null?void 0:b.display_title}}];const v=gO(t.messages[1].content.output_str);if(v.length)return[{type:Yn.N7jupdAPI,action:"n7jupd_cs",source:a,searchResults:v.map(([S,C])=>({url:S,title:C}))}]}return[{type:Yn.N7jupdAPI,action:"n7jupd_cf",source:a}]};function gO(t){const e=t.replace(/^\s*L\d+:\s*/gm,""),n=[],s=[];for(let m=0;m<e.length;m++){const f=e[m];if(f==="{")s.push(m);else if(f==="}"){if(s.length===0)continue;const p=s.pop();n.push({start:p,end:m})}}const o=["display_url","web_link","url","web_url"],a=["display_title","title","name","path","subject","summary"],i=m=>m.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),l=(m,f)=>{const p=[];for(const g of m){const h=new RegExp('"'.concat(i(g),'"\\s*:\\s*"([^"]+)"'),"g");for(const x of f.matchAll(h))p.push(x[1].replace(/\n/g,""))}return p},c=[];for(const{start:m,end:f}of n){const p=e.slice(m,f+1),g=l(o,p),h=l(a,p),x=Math.min(g.length,h.length);for(let y=0;y<x;y++)c.push([g[y],h[y]])}const d=new Map;for(const[m,f]of c)d.set("".concat(m,"|||").concat(f),[m,f]);return Array.from(d.values())}const pM=Nt(()=>({rect:null})),bbe=t=>{if(!t)return pM.setState({rect:null});const{height:e,left:n,top:s,width:o}=t.getBoundingClientRect(),{borderRadius:a}=getComputedStyle(t);pM.setState({rect:{height:e,left:n,top:s,width:o,borderRadius:a}})};function hO(t){const e=J(),n=Xn(t),s=xt();return async({title:a,textdocType:i,content:l,createSource:c})=>{if(!n)return;if(i==="loading"){Oe.addError("Tried to add a textdoc with type 'loading'");return}const d=e.formatMessage({id:"6dkdc5",defaultMessage:"New document"});a||(a=d);const{textdoc_id:u}=await pe.safePost("/textdoc/add",{requestBody:{conversation_id:n,textdoc_title:a,textdoc_type:i,content:l,create_source:c}});return s.setQueryData([n,"textdocs"],m=>{if(!m)return m;const f={textdocId:u,messageId:null,type:i,comments:[],status:Us.COMPLETE,title:a,content:l,versionInt:1,createdAt:Date.now()},p=new Map(m.persistedTextdocVersionById);p.set(u,f);const g=[...m.persistedTextdocVersions,f],h=new Map(m.persistedTextdocById);return h.set(u,{id:u,version:1,title:a,textdoc_type:i,content:l,comments:[],metadata:null,updated_at:new Date().toISOString()}),B(w({},m),{persistedTextdocVersionById:p,persistedTextdocVersions:g,persistedTextdocById:h})}),await s.invalidateQueries({queryKey:[n,"textdocs"]}),requestAnimationFrame(()=>{xi(u),setTimeout(()=>{xi(u)},250)}),u}}const Sbe=j(()=>I(()=>import("./pdp94tw1ktf1pj0a.js").then(t=>t._),__vite__mapDeps([40,1])),{loading:t=>L(t)}),Cbe=({content:t,codeLanguage:e,codeSnippetRef:n,clientThreadId:s})=>{var d;const o=G(),a=J(),i=ue(()=>wn(ht(o,s))),l=hO(s);if(!((d=i.enabledTools)!=null&&d.includes(sl.Canvas)))return null;function c(){Ll.logButtonClick(h1.EDIT_IN_CANVAS_CODE_SNIPPET),n!=null&&n.current&&bbe(n.current);const u=e?xl("code/"+e):CL(t)?lr.CODE_OTHER:lr.DOCUMENT;l({title:a.formatMessage({id:"ay0U57",defaultMessage:"New {codeLanguage} document"},{codeLanguage:e||"text"}),textdocType:u,content:t,createSource:mm.MESSAGE})}return r.jsx(kt,{label:r.jsx(P,{id:"EditInCanvasButton.editTooltip",defaultMessage:"Edit in canvas"}),children:r.jsxs("button",{className:"flex items-center gap-1 py-1 select-none",onClick:c,children:[r.jsx(Sbe,{className:"icon-xs"}),a.formatMessage({id:"5k0sSJ",defaultMessage:"Edit"})]})})},wbe=_.createContext({isWithinDataAnalysisToolMessage:!1}),kbe=Rl(()=>I(()=>import("./fie3xvluxpg2pnx2.js"),__vite__mapDeps([333,1,334]))),Mbe=Kn.memo(function({htmlSegment:e}){return r.jsx("span",{dangerouslySetInnerHTML:{__html:e}})}),Tbe=t=>{var e,n;if(t instanceof Element)return(n=(e=t.closest("[data-message-id]"))==null?void 0:e.getAttribute("data-message-id"))!=null?n:void 0};function Ebe({wrapperClassName:t,codeClassName:e,language:n,content:s,shouldWrapCode:o,removeTopBorderRadius:a,showActionBar:i=!0,showStickyRightContent:l=!0,codeContainerClassName:c,title:d}){var A;const u=G(),m=Xo(),f=_.useRef(null),p=Ut(),g=Es(),h=wye(),x=vn(un),y=_.useCallback(N=>{var O;N.preventDefault(),N.stopPropagation();const R=(O=window.getSelection())==null?void 0:O.toString();R&&Ta(R,void 0,N)},[]),b=_.useCallback(N=>{const R=(D,F,V)=>{if(g||(m==null?void 0:m.id)==null||F===void 0)return;const z=jt(m.id);z!=null&&T1(u,{source:D,type:"copy",messageId:F,serverThreadId:z,selectedText:V,location:"code-snippet",contentType:"code"})},O=Tbe(N.target);Ta(s,p,N),R("mouse",O,s)},[u,s,p,g,m]),v=J(),{isWithinDataAnalysisToolMessage:S}=_.useContext(wbe),[C,k]=_.useState(null);_.useEffect(()=>{kbe().then(N=>{if(N!=null)try{k(N.highlightCode(s,n))}catch(R){if(!(R instanceof Error&&/Unknown language/i.test(R.message)))throw R}})},[s,n]);const M=n==="svg"||(n==="xml"||n==="html")&&Lbe(s),T=_.useMemo(()=>C==null?void 0:C.html.split(/(<span[^>]*>.*?<\/span>)/g).filter(Boolean),[C==null?void 0:C.html]),E=M?r.jsx(UH,{svgString:s,className:"max-h-96 w-full"}):T&&T.length>0?r.jsx("span",{children:T.map((N,R)=>r.jsx(Mbe,{htmlSegment:N},R))}):C!=null&&C.html?r.jsx("span",{dangerouslySetInnerHTML:{__html:C.html}}):r.jsx("span",{children:s});return r.jsx(Ibe,{ref:f,title:(A=d!=null?d:C==null?void 0:C.language)!=null?A:n,shouldWrapCode:o,stickyTitleRightContent:l&&r.jsxs("div",{className:"bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs",children:[S&&r.jsx(Abe,{}),r.jsx(Tye,{buttonText:h?v.formatMessage({id:"6NJu7m",defaultMessage:"Copy"}):v.formatMessage({id:"zIa6ZQ",defaultMessage:"Copy code"}),onCopy:b,className:"py-1",iconClassName:h?"icon-xs":"icon-sm"}),(m==null?void 0:m.id)&&h&&r.jsx(Cbe,{content:s,codeLanguage:n!=null?n:"",codeSnippetRef:f,clientThreadId:m==null?void 0:m.id})]}),codeClassName:e,codeContainerClassName:c,onCopy:y,className:W(t,x&&"border-token-border-medium bg-token-bg-primary dark:bg-token-sidebar-surface-primary border"),removeTopBorderRadius:a,showActionBar:i,isAuraSidebar:x,children:E})}function Abe(){const e=gd(!0),{data:n=!1}=wo(en.ShowExpandedCodeView),s=J();return r.jsxs("div",{className:"border-token-border-medium me-2 flex items-center gap-2 border-e pe-2",children:[r.jsx("label",{htmlFor:"ada-always-show",children:r.jsx(P,{defaultMessage:"Always show details",id:"message.tools.codeInterpreter.alwaysShowAnalysis"})}),r.jsx(VH,{id:"ada-always-show",size:"small",onCheckedChange:o=>{e.mutate({setting:en.ShowExpandedCodeView,value:o})},checked:n,"aria-label":n?s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis on",id:"message.tools.codeInterpreter.alwaysShowAnalysis.enabled"}):s.formatMessage({defaultMessage:"Toggle to always expand detail view for code analysis off",id:"message.tools.codeInterpreter.alwaysShowAnalysis.disabled"})})]})}function Ibe({children:t,title:e,stickyTitleRightContent:n,shouldWrapCode:s=!1,className:o,codeContainerClassName:a,codeClassName:i,ref:l,onCopy:c,removeTopBorderRadius:d,showActionBar:u=!0,isAuraSidebar:m=!1}){return r.jsxs(jbe,{className:o,children:[u&&r.jsxs(r.Fragment,{children:[r.jsx(Pbe,{$removeTopBorderRadius:d,className:W(m&&"bg-token-bg-primary dark:bg-token-sidebar-surface-primary"),children:e}),r.jsx("div",{className:"sticky top-9",children:r.jsx("div",{className:"absolute end-0 bottom-0 flex h-9 items-center pe-2",children:n})})]}),r.jsx(Nbe,{ref:l,className:a,children:r.jsx(Rbe,{$shouldWrap:s,className:i,onCopy:c,children:t})})]})}var s6;const jbe=ct.div(s6||(s6=rt(["contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"])));var o6;const Pbe=ct.div(o6||(o6=rt(["flex items-center text-token-text-secondary px-4 py-2 text-xs font-sans justify-between h-9 bg-token-sidebar-surface-primary select-none ",""])),t=>t.$removeTopBorderRadius?"":"rounded-t-2xl"),Nbe=function({children:e,className:n,ref:s}){return r.jsx("div",{ref:s,className:W("overflow-y-auto p-4",n),dir:"ltr",children:e})};var a6;const Rbe=ct.code(a6||(a6=rt(["",""])),t=>t.$shouldWrap?"whitespace-pre-wrap!":"whitespace-pre!");function Lbe(t){return t.trim().startsWith("<svg")}function Obe(t){return"children"in t?_O(t):"value"in t?t.value:""}function Dbe(t){return t.type==="text"?t.value:"children"in t?_O(t):""}function _O(t){let e=-1;const n=[];for(;++e<t.children.length;)n[e]=Dbe(t.children[e]);return n.join("")}function Fbe(d){var u=d,{node:t,className:e,wrapperClassName:n,children:s,inline:o,removeTopBorderRadius:a,showActionBar:i=!0,codeContainerClassName:l}=u,c=Me(u,["node","className","wrapperClassName","children","inline","removeTopBorderRadius","showActionBar","codeContainerClassName"]);var m;if(o)return r.jsx("code",B(w({className:e},c),{children:s}));{const f=(m=e==null?void 0:e.split(" ").find(g=>g.startsWith("language-")))==null?void 0:m.split("-")[1],p=t?Obe(t):"";return r.jsx(Ebe,{language:f,wrapperClassName:n,codeContainerClassName:l,codeClassName:e,content:p,removeTopBorderRadius:a,showActionBar:i})}}function xO(t){return t.type==="element"}function Bbe(t){return xO(t)?t.tagName==="code":!1}function $Ke(){return function(t){sS(t,"element",function(e,n,s){Bbe(e)&&(s&&xO(s)&&s.tagName==="pre"?e.properties.inline=!1:e.properties.inline=!0)})}}const Ube="_markdown_1frq2_10",Vbe={markdown:Ube},gM=({content:t})=>r.jsx(Hs,{className:W(Vbe.markdown,"text-token-text-secondary text-[14px] leading-5"),componentOverrides:{code:e=>r.jsx(Fbe,B(w({},e),{wrapperClassName:"",showActionBar:!1}))},children:t});function Gbe(t){let e;try{e=JSON.parse(t)}catch(o){return Oe.addError(o),null}const n=o=>typeof o=="object"&&o!=null&&typeof o.x=="number"&&typeof o.y=="number"&&typeof o.button=="number"&&typeof o.action=="string",s=o=>typeof o=="object"&&o!=null&&Array.isArray(o.actions);if(typeof e=="object"&&e!=null&&s(e)){const o=Ml(e.actions,a=>a&&a.action==="click");if(n(o))return o}else if(n(e))return e;return null}const $be=({chunk:t,isKAUR1BR5:e})=>{var p,g,h,x,y;const n=_.useRef(null),s=t.screenshots.at(-1),o=(p=t.fullThoughts)==null?void 0:p.at(-1),a=(g=t.thoughts)==null?void 0:g.at(-1),i=o!=null?o:a,l=(h=t.actions)==null?void 0:h.at(-1),c=hbe(s,void 0),[d,u]=_.useState(null),[m,f]=_.useState(!1);return _.useEffect(()=>{if(!c)return;let b=!1;const v=new Image;return f(!1),v.src=c,v.onload=()=>{!b&&u(c)},v.onerror=()=>{!b&&u(null),!b&&f(!0),!b&&Oe.addError(new Error("Failed to load image"))},()=>{b=!0}},[c]),(l==null?void 0:l.type)==="computer.click"&&Gbe(l.parts),e?((x=t.fullThoughts)==null?void 0:x.length)===0?r.jsx(gM,{content:"Used the browser"},"used-the-browser"):r.jsx(r.Fragment,{children:(y=t.fullThoughts)==null?void 0:y.map(b=>r.jsx(gM,{content:b},b))}):r.jsxs("div",{className:"flex w-full flex-row items-start justify-center gap-4",children:[i&&r.jsx("div",{className:"text-token-text-secondary flex-1 text-sm",children:i}),s&&r.jsx("div",{ref:n,className:"border-token-border-heavy mt-1 flex h-30 w-40 items-center justify-center overflow-hidden rounded-lg border",children:d&&r.jsx(hR,{src:d,alt:"screenshot",className:"flex aspect-[1024/764] w-40 items-center justify-center overflow-hidden",children:r.jsx("img",{src:d,alt:"screenshot",loading:"lazy",className:"h-full w-full object-cover object-bottom"},d)})})]})},Hbe=({clientThreadId:t,messageId:e,renderClosestScreenshot:n})=>{const s=Ue(t,i=>{const c=me.getConversationTurns(i).find(m=>m.messages.some(f=>f.id===e));if(!c)return null;const d=vbe([...c.messages],!1);return d==null?void 0:d.find(m=>m.type===Yn.ComputerOutput)}),o=_.useMemo(()=>{if(!s)return null;if(n){const d=s.screenshots.findIndex(u=>u.messageId===e);return d===-1?null:d}const i={};s.screenshots.forEach((d,u)=>{i[d.messageId]=u});const l=s.messages.findIndex(d=>d.id===e),c=s.messages.slice(l).find(d=>i[d.id]);return c?i[c.id]:null},[s,e,n]),a=s==null?void 0:s.messages.some(i=>{var l;return(l=i.metadata)==null?void 0:l.kaur1br5_mode});return n&&o===null||!s||!s.screenshots.length?null:r.jsx("div",{children:r.jsx("div",{className:"relative flex flex-1 cursor-default flex-col gap-2",children:r.jsx($be,{chunk:s,isKAUR1BR5:a})})})},Wbe=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)});function zbe(t,e,n){const s=J(),{selectedSources:o}=Ra(t),a=Hm(t);return _.useCallback(async()=>await a({promptMessage:us(s.formatMessage({id:"3qSZZF",defaultMessage:"I understand the risks. Please continue"}),w({user_acknowledges_pim:!0,system_hints:e},o&&{selected_sources:hi(o)})),completionMetadata:{systemHints:e,conversationMode:n},eventSource:"mouse"}),[a,n,e,s,o])}const qbe=({onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s})=>{const[o,a]=_.useState(!1),i=J(),l=_.useCallback(()=>a(!1),[]);return r.jsxs(r.Fragment,{children:[r.jsx(Pt,{testId:"modal-confirm-close-editor",isOpen:o,size:"custom",className:"max-w-xl",onClose:l,type:"warning",hideSeparator:!1,title:r.jsx("span",{className:"text-xl",children:r.jsx(P,{id:"lzy3Zg",defaultMessage:"Potentially Malicious Content Detected"})}),primaryButton:r.jsx(so.Button,{title:i.formatMessage({id:"E82qxN",defaultMessage:"Mark safe and continue"}),color:"danger",onClick:t}),secondaryButton:r.jsx(so.Button,{title:i.formatMessage({id:"byfawg",defaultMessage:"Don't mark safe"}),color:"secondary",onClick:l}),showCloseButton:!0,closeButton:r.jsx(fn,{onClick:l}),children:r.jsxs("div",{children:[r.jsx("div",{className:"text-md text-token-text-secondary pb-2",children:e?r.jsx(Hs,{children:e}):r.jsx(P,{id:"OkPb2T",defaultMessage:"This webpage contained hidden instructions that may be attempting to extract sensitive information. You should only continue if you're sure this content is safe."})}),!!s&&r.jsx(Hbe,{clientThreadId:n,messageId:s,renderClosestScreenshot:!0})]})}),r.jsx(he,{color:"danger",onClick:()=>a(!0),children:r.jsx(P,{id:"5L93Tx",defaultMessage:"Continue"})})]})};function HKe({children:t,isFinalTurn:e,hasActiveRequest:n,conversationMode:s,clientThreadId:o,justification:a,flaggedMessageId:i}){const l=Ue(o,u=>{var m;return(m=me.findNode(u,f=>f.message.author.role===Ze.User))==null?void 0:m.message}),c=_.useMemo(()=>{var u;return(u=l==null?void 0:l.metadata)==null?void 0:u.system_hints},[l]),d=zbe(o,c,s);return r.jsxs("div",{children:[r.jsxs("div",{className:"bg-token-main-surface-secondary mt-1 flex gap-2 rounded-2xl px-3 py-2",children:[r.jsx(Wbe,{className:"icon-xl mt-2"}),r.jsx("div",{children:t})]}),e&&!n&&r.jsx("div",{className:"mt-2",children:r.jsx(Ybe,{onMarkSafe:d,justification:a,flaggedMessageId:i,clientThreadId:o})})]})}function Ybe({onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s}){return r.jsx("div",{children:r.jsx(qbe,{onMarkSafe:t,justification:e,clientThreadId:n,flaggedMessageId:s})})}function Zbe(t,e,n){var a,i,l,c;if(!t)return n.current=null,null;if(!e)return(i=(a=n.current)==null?void 0:a.message)!=null?i:null;const s=n.current;if(s&&s.threadId===t)return s.message;const o=(c=(l=me.findFirstFromLeaf(e,d=>d.message.author.role===Ze.Tool&&d.message.author.name==="n7jupd.metadata"))==null?void 0:l.message)!=null?c:null;return o&&(n.current={threadId:t,message:o}),o}function yO(t){const e=_.useRef(null);return Ue(t,n=>Zbe(t,n,e),{disablePerfDetector:!0})}function Kbe(t){var n;const e=yO(t);return((n=e==null?void 0:e.metadata)==null?void 0:n.n7jupd_local_safe_mode)===!0}const vO=118;function WKe(t){var l,c,d,u,m,f;const e=ft(t),n=(l=me.getCurrentNode(e))==null?void 0:l.message;if(!n||!bO(n)||(c=n.clientMetadata)!=null&&c.autoProceedCancelled||(d=n.metadata)!=null&&d.auto_proceed_cancelled)return!1;const s=Date.now(),o=((u=n.create_time)!=null?u:Date.now()/1e3)*1e3,a=(f=(m=n.metadata)==null?void 0:m.auto_proceed_timeout_seconds)!=null?f:vO;return Math.max(0,Math.ceil(a-(s-o)/1e3))>0}function bO(t){var e;return!!((e=t.metadata)!=null&&e.n7jupd_message&&t.channel==="commentary"&&t.end_turn===!0)}async function zKe(t){const e=jt(t);if(e)return qe(t,n=>{ln.updateTree(n,(s,o)=>{s.updateNodeMetadata(o,{autoProceedCancelled:!0})})}),await pe.safePost("/conversation/{conversation_id}/agent/cancel_auto_proceed",{parameters:{path:{conversation_id:e}}})}function Qbe(t,e,n){const[s,o]=_.useState(()=>Date.now());_.useEffect(()=>{if(!n)return;const d=setInterval(()=>o(Date.now()),250);return()=>clearInterval(d)},[n]);const a=e-(s-t)/1e3,i=Math.max(0,a),l=Math.ceil(i),c=e===0?1:Math.min(1,Math.max(0,1-i/e));return{secondsDisplay:l,progress:c}}const Jbe=({lastMessage:t,clientThreadId:e})=>{var p,g,h;const n=G(),s=ht(n,e),o=_.useRef(((p=t.create_time)!=null?p:Date.now()/1e3)*1e3),a=(h=(g=t.metadata)==null?void 0:g.auto_proceed_timeout_seconds)!=null?h:vO,{initialTimeLeft:i}=_.useMemo(()=>{const x=Date.now(),y=o.current,b=Math.ceil(a-(x-y)/1e3),v=(a-b)/a;return{initialTimeLeft:b,initialProgress:v}},[a]),[l,c]=_.useState(!1),{selectedSources:d}=Ra(s.id),{secondsDisplay:u,progress:m}=Qbe(o.current,a,l||i>0);_.useEffect(()=>{if(i<=0){c(!0);return}const x=setTimeout(()=>c(!0),i*1e3);return()=>clearTimeout(x)},[i]);const f=async()=>{c(!0),await Er({conversation:s,eventSource:"mouse",promptMessage:us("Continue",w({system_hints:[is]},d&&{selected_sources:hi(d)})),parentMessageId:t.id,completionMetadata:{systemHints:[is],conversationMode:{kind:Tt.PrimaryAssistant}}})};return i<-30?null:r.jsx("div",{className:"my-2 flex",children:r.jsxs(he,{onClick:f,disabled:l,className:"relative min-w-32 overflow-hidden px-2 transition-all",contentWrapperClassName:"gap-2",children:[r.jsx("span",{className:"flex items-center gap-1",children:l?r.jsx(P,{id:"clarification.loading",defaultMessage:"Proceeding..."}):r.jsx(P,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})}),!l&&r.jsx(Xbe,{secondsDisplay:u,progress:m})]})})};function Xbe({secondsDisplay:t,progress:e,size:n=22,strokeWidth:s=2}){const o=(n-s)/2,a=2*Math.PI*o,i=a*(1-e),l=J();return r.jsxs("div",{"aria-label":l.formatMessage({id:"clarification.secondsRemaining",defaultMessage:"{seconds} seconds remaining"},{seconds:t.toString()}),className:"relative inline-flex items-center justify-center",style:{width:n,height:n},children:[r.jsxs("svg",{width:n,height:n,className:"block",children:[r.jsx("circle",{cx:n/2,cy:n/2,r:o,stroke:"currentColor",strokeOpacity:.3,strokeWidth:s,fill:"none"}),r.jsx("circle",{cx:n/2,cy:n/2,r:o,stroke:"currentColor",strokeWidth:s,fill:"none",strokeDasharray:a,strokeDashoffset:i,style:{transition:"stroke-dashoffset 100ms linear"},transform:"rotate(-90 ".concat(n/2," ").concat(n/2,")")})]}),r.jsx("span",{className:"absolute text-[9px] leading-none font-medium",style:{fontVariantNumeric:"tabular-nums"},children:t})]})}const e2e=j(()=>I(()=>import("./is1k3hg6hctfw3sz.js").then(t=>t._),__vite__mapDeps([335,1])),{loading:t=>L(t)}),SO=j(()=>I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1])),{loading:t=>L(t)}),cv=be({heading:{id:"odyssey.openTabs.heading",defaultMessage:"Relevant tabs"},safeModeTooltip:{id:"odyssey.openTabs.safeModeTooltip",defaultMessage:"This tab is in logged out mode"}});function hM(t){"use forget";const e=H.c(19),{tabs:n,clientThreadId:s,className:o,onTabClick:a,detailed:i,isSafeMode:l}=t,c=l===void 0?!1:l,d=J();let u;e[0]!==d||e[1]!==c?(u=c?d.formatMessage(cv.safeModeTooltip):void 0,e[0]=d,e[1]=c,e[2]=u):u=e[2];const m=u;if(!n||n.length===0)return null;let f;e[3]!==o?(f=W("flex flex-col",o),e[3]=o,e[4]=f):f=e[4];let p;if(e[5]!==s||e[6]!==i||e[7]!==a||e[8]!==m||e[9]!==n){let h;e[11]!==s||e[12]!==i||e[13]!==a||e[14]!==m?(h=(x,y)=>{var b;return r.jsx("div",{className:W(y>0&&"border-token-border-subtle border-t"),children:r.jsx("button",{type:"button",onClick:()=>{a?a(x):s2e(x,s)},className:"hover:bg-token-bg-secondary focus-visible:ring-token-text-tertiary w-full cursor-pointer p-3 text-start transition-colors focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:outline-hidden",children:i?r.jsx(n2e,{tab:x,safeModeLabel:m}):r.jsx(t2e,{tab:x,safeModeLabel:m})})},(b=x.id)!=null?b:"".concat(x.url,"-").concat(y))},e[11]=s,e[12]=i,e[13]=a,e[14]=m,e[15]=h):h=e[15],p=n.map(h),e[5]=s,e[6]=i,e[7]=a,e[8]=m,e[9]=n,e[10]=p}else p=e[10];let g;return e[16]!==f||e[17]!==p?(g=r.jsx("div",{className:f,children:p}),e[16]=f,e[17]=p,e[18]=g):g=e[18],g}const t2e=t=>{"use forget";var y,b,v;const e=H.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=Ai(n.url),e[0]=n.url,e[1]=o):o=e[1];const a=o,i=(y=a==null?void 0:a.Icon)!=null?y:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((b=n.title)==null?void 0:b.trim())||Dg(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let d;e[5]!==(a==null?void 0:a.type)||e[6]!==n.url?(d=(v=a==null?void 0:a.type)!=null?v:Dg(n.url),e[5]=a==null?void 0:a.type,e[6]=n.url,e[7]=d):d=e[7];const u=d;let m;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==n.url?(m=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(Ts,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(SO,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=n.url,e[11]=m):m=e[11];let f;e[12]!==c?(f=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=f):f=e[13];let p;e[14]!==u?(p=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:u}),e[14]=u,e[15]=p):p=e[15];let g;e[16]!==f||e[17]!==p?(g=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[f,p]}),e[16]=f,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==s?(h=s?r.jsx(CO,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let x;return e[21]!==m||e[22]!==g||e[23]!==h?(x=r.jsxs("div",{className:"flex items-center gap-3",children:[m,g,h]}),e[21]=m,e[22]=g,e[23]=h,e[24]=x):x=e[24],x},n2e=t=>{"use forget";var y,b,v;const e=H.c(25),{tab:n,safeModeLabel:s}=t;let o;e[0]!==n.url?(o=Ai(n.url),e[0]=n.url,e[1]=o):o=e[1];const a=o,i=(y=a==null?void 0:a.Icon)!=null?y:null;let l;e[2]!==n.title||e[3]!==n.url?(l=((b=n.title)==null?void 0:b.trim())||Dg(n.url),e[2]=n.title,e[3]=n.url,e[4]=l):l=e[4];const c=l;let d;e[5]!==(a==null?void 0:a.type)||e[6]!==n.url?(d=(v=a==null?void 0:a.type)!=null?v:Dg(n.url),e[5]=a==null?void 0:a.type,e[6]=n.url,e[7]=d):d=e[7];const u=d;let m;e[8]!==i||e[9]!==(a==null?void 0:a.type)||e[10]!==n.url?(m=i?r.jsx(i,{className:"icon-md",alt:a==null?void 0:a.type}):r.jsx(Ts,{url:n.url,size:32,minSize:16,className:"size-5 rounded-md",showLoadingAnimation:!0,applySizeToImg:!1,fallback:r.jsx(SO,{className:"size-5"})}),e[8]=i,e[9]=a==null?void 0:a.type,e[10]=n.url,e[11]=m):m=e[11];let f;e[12]!==c?(f=r.jsx("span",{className:"text-token-text-primary line-clamp-1 text-sm font-medium",children:c}),e[12]=c,e[13]=f):f=e[13];let p;e[14]!==u?(p=r.jsx("span",{className:"text-token-text-secondary line-clamp-1 text-xs",children:u}),e[14]=u,e[15]=p):p=e[15];let g;e[16]!==f||e[17]!==p?(g=r.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[f,p]}),e[16]=f,e[17]=p,e[18]=g):g=e[18];let h;e[19]!==s?(h=s?r.jsx(CO,{label:s}):null,e[19]=s,e[20]=h):h=e[20];let x;return e[21]!==m||e[22]!==g||e[23]!==h?(x=r.jsxs("div",{className:"flex items-center gap-3 px-3",children:[m,g,h]}),e[21]=m,e[22]=g,e[23]=h,e[24]=x):x=e[24],x},CO=t=>{"use forget";const e=H.c(6),{label:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(e2e,{className:"icon-sm","aria-hidden":"true"}),e[0]=s):s=e[0];let o;e[1]!==n?(o=r.jsx("span",{className:"text-token-text-tertiary inline-flex items-center justify-center",role:"img","aria-label":n,children:s}),e[1]=n,e[2]=o):o=e[2];let a;return e[3]!==n||e[4]!==o?(a=r.jsx(kt,{label:n,side:"top",className:"ms-auto inline-flex items-center justify-center",children:o}),e[3]=n,e[4]=o,e[5]=a):a=e[5],a};function s2e(t,e){if(t!=null&&t.url){try{const n=jt(e);if(n){const s=Ed();s==null||s.openAgentTabs(n,[t.url]);return}}catch(n){Gs.error("openTabs via host failed",{error:n})}try{const n=window.open(t.url,"_blank","noopener,noreferrer");n==null||n.focus()}catch(n){Gs.error("openTabs fallback failed",{error:n})}}}function Dg(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch(e){return t}}const o2e=j(()=>I(()=>import("./gri0killvjo5c85i.js"),__vite__mapDeps([336,1,29,30])).then(t=>t.OdysseyTakeoverNuxModal)),a2e=()=>{"use no forget";const t=G(),e=$e(Ye.hasSeenOdysseyTakeoverModal),{clientThreadId:n}=$n(),s=Ue(n!=null?n:void 0,l=>me.findNode(l,c=>c.message.author.name==="n7jupd.metadata"));if(!n)return()=>{Gs.info("VNC modal opened without a client thread id")};const o=async l=>{const c=jt(l);if(c)return await pe.safePost("/conversation/{conversation_id}/agent/resume",{parameters:{path:{conversation_id:c}}})},a=()=>{var c,d;if(!Sn()||!((c=s==null?void 0:s.message.metadata)!=null&&c.kaur1br5_mode))return Promise.resolve(!1);const l=jt(n);if(!l)return Gs.info("Agent viewer opened without a server thread id"),Promise.resolve(!1);try{const u=Ed(),m=(d=u==null?void 0:u.tryOpenAgentViewer(l))!=null?d:!1;return Promise.resolve(m)}catch(u){return Gs.error("Failed to open local agent viewer - error thrown"),Promise.resolve(!1)}},i=async()=>{var c;if(await a()){Gs.info("Opened VNC modal with local agent viewer");return}$n.setState({isResuming:!0}),$n.setState({isOpen:!0}),yn.setSidebarOpen(!1);let l;Oe.addAction("agent.conversation.resume_rpc_attempted",{client_thread_id:n});try{l=await o(n),l?Oe.addAction("agent.conversation.resume_rpc_succeeded",{client_thread_id:n,vm_id:(c=l.vm_id)!=null?c:""}):Oe.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:n,reason:"no_response"})}catch(d){Oe.addAction("agent.conversation.resume_rpc_failed",{client_thread_id:n,reason:"exception",error:d})}$n.setState({isResuming:!1,vmId:l==null?void 0:l.vm_id}),wO({})};return async()=>{if(e.eligible){gt(t,o2e,{onConfirm:async()=>{e.markAsViewed(),await i()}});return}await i()}},r2e=async(t,e,{startNewTurn:n})=>{$n.setState({isOpen:!1}),await kO(t,e,{startNewTurn:n})},wO=async({showPlaceholderMessage:t=!1})=>{var s;$n.setState({isTakeoverInProgress:!0});const{clientThreadId:e}=$n.getState();if(!e){Gs.info("VNC takeover started without a client thread id");return}t&&roe(e);const n=await i2e();$n.setState({parentMessageId:(s=n==null?void 0:n.last_message_id)!=null?s:null})},kO=async(t,e,{startNewTurn:n,skipTakeoverAfterAbort:s=void 0},o)=>{$n.setState({isTakeoverInProgress:!1});const{clientThreadId:a}=$n.getState();if(!a){Gs.info("VNC modal closed without a client thread id");return}if(!n)return;const i=l2e(),{abortPromise:l}=$n.getState();l&&s&&(await l,await s())||(Kj(a),await Er({conversation:ht(t,a),eventSource:"mouse",promptMessage:J2(e,o),parentMessageIdPromise:i,completionMetadata:{systemHints:[is],conversationMode:{kind:Tt.PrimaryAssistant}}}))},i2e=()=>{const{clientThreadId:t}=$n.getState();if(!t)return Gs.info("stopAgent called without a client thread id"),Promise.resolve(void 0);const e=e1(t,void 0,{clientInitiated:!0,reason:"takeover",isLastTurnAgent:!0}).then(n=>n).finally(()=>{$n.setState({abortPromise:null})});return $n.setState({abortPromise:e}),e},l2e=(t=5e3)=>new Promise(e=>{const{parentMessageId:n}=$n.getState();if(n)return e(n);const s=setTimeout(()=>{o(),e(void 0)},t),o=$n.subscribe(a=>{a.parentMessageId&&(e(a.parentMessageId),clearTimeout(s),o())})}),c2e=()=>{"use forget";const t=H.c(5),e=a2e();let n;t[0]!==e?(n=l=>({token:l.token,clientThreadId:l.clientThreadId,isOpen:l.isOpen,isTakeoverInProgress:l.isTakeoverInProgress,isResuming:l.isResuming,vmId:l.vmId,open:e,close:r2e}),t[0]=e,t[1]=n):n=t[1];const s=$n(n),a=!xS();let i;return t[2]!==a||t[3]!==s?(i=B(w({},s),{isVNCEnabled:a}),t[2]=a,t[3]=s,t[4]=i):i=t[4],i},d2e=j(()=>I(()=>import("./e3jwynezq3sbw7bs.js").then(t=>t._),__vite__mapDeps([337,1])),{loading:t=>L(t)}),qKe=t=>{"use forget";var C,k,M,T;const e=H.c(33),{currentGroupedMessage:n,isLastMessage:s,isLastTurnInConversation:o,conversation:a,turnIndex:i,lastAgentMetadataNode:l}=t,c=!!((C=l==null?void 0:l.metadata)!=null&&C.kaur1br5_mode);let d,u;e[0]!==(n==null?void 0:n.messages)||e[1]!==o?(d=Wo(n==null?void 0:n.messages),u=o&&d&&bO(d)&&!((k=d.metadata)!=null&&k.auto_proceed_cancelled)&&!((M=d.clientMetadata)!=null&&M.autoProceedCancelled),e[0]=n==null?void 0:n.messages,e[1]=o,e[2]=d,e[3]=u):(d=e[2],u=e[3]);const m=u;let f;e:{if(!((T=d==null?void 0:d.metadata)!=null&&T.open_tabs)){let A;e[4]===Symbol.for("react.memo_cache_sentinel")?(A=[],e[4]=A):A=e[4],f=A;break e}let E;e[5]!==d.metadata.open_tabs?(E=d.metadata.open_tabs.filter(p2e),e[5]=d.metadata.open_tabs,e[6]=E):E=e[6],f=E}let p;e[7]!==f?(p=f.filter(g2e),e[7]=f,e[8]=p):p=e[8];const g=p,h=g.length>0&&c;let x;e[9]!==a||e[10]!==d||e[11]!==g||e[12]!==h?(x=h&&(d==null?void 0:d.id)&&r.jsx(u2e,{openTabList:g,clientThreadId:a.id,messageId:d.id}),e[9]=a,e[10]=d,e[11]=g,e[12]=h,e[13]=x):x=e[13];let y;e[14]!==a||e[15]!==d||e[16]!==m||e[17]!==i?(y=m&&r.jsx(Jbe,{clientThreadId:a.id,lastMessage:d,turnIndex:i}),e[14]=a,e[15]=d,e[16]=m,e[17]=i,e[18]=y):y=e[18];let b;e[19]!==s||e[20]!==o?(b=o&&s&&r.jsx(fS,{children:h2e}),e[19]=s,e[20]=o,e[21]=b):b=e[21];let v;e[22]!==a||e[23]!==n||e[24]!==c||e[25]!==s||e[26]!==o?(v=r.jsx(m2e,{conversation:a,currentGroupedMessage:n,isLastMessage:s,isLastTurnInConversation:o,isKAUR1BR5:c}),e[22]=a,e[23]=n,e[24]=c,e[25]=s,e[26]=o,e[27]=v):v=e[27];let S;return e[28]!==x||e[29]!==y||e[30]!==b||e[31]!==v?(S=r.jsxs("div",{className:"my-2 flex flex-col",children:[x,y,b,v]}),e[28]=x,e[29]=y,e[30]=b,e[31]=v,e[32]=S):S=e[32],S};function u2e(t){"use forget";const e=H.c(30),{openTabList:n,clientThreadId:s,messageId:o}=t,[a,i]=_.useState(!1),{openThreadSidebar:l}=Ir(),c=vn(un),d=Kbe(s);let u;e[0]!==n?(u=n.slice(0,3),e[0]=n,e[1]=u):u=e[1];const m=u,f=n.length>1&&n.length!==m.length;let p;e[2]!==c||e[3]!==o||e[4]!==n||e[5]!==l?(p=()=>{if(c){i(!0);return}l({type:"n7jupdTabs",messageId:o,tabs:n})},e[2]=c,e[3]=o,e[4]=n,e[5]=l,e[6]=p):p=e[6];const g=p;let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"flex items-center py-0.5",children:r.jsx(P,w({},cv.heading))}),e[7]=h):h=e[7];let x;e[8]!==g||e[9]!==n.length||e[10]!==f?(x=f&&r.jsxs(he,{onClick:g,color:"ghost",className:"text-token-text-secondary rounded-lg font-normal",contentWrapperClassName:"gap-1",children:[r.jsx(P,{id:"BrbWdy",defaultMessage:"View {count} tabs",values:{count:n.length}}),r.jsx(d2e,{className:"icon-sm"})]}),e[8]=g,e[9]=n.length,e[10]=f,e[11]=x):x=e[11];let y;e[12]!==x?(y=r.jsxs("div",{className:"text-token-text-primary flex items-center justify-between px-3 py-2 text-sm font-medium",children:[h,x]}),e[12]=x,e[13]=y):y=e[13];let b;e[14]!==s||e[15]!==d||e[16]!==m?(b=r.jsx(hM,{tabs:m,clientThreadId:s,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:d}),e[14]=s,e[15]=d,e[16]=m,e[17]=b):b=e[17];let v;e[18]!==y||e[19]!==b?(v=r.jsxs("div",{className:"border-token-border-subtle bg-token-bg-secondary/30 text-token-text-primary w-full max-w-[360px] overflow-hidden rounded-2xl border",children:[y,b]}),e[18]=y,e[19]=b,e[20]=v):v=e[20];let S;e[21]!==s||e[22]!==c||e[23]!==a||e[24]!==d||e[25]!==n?(S=c&&r.jsx(Pt,{headerClassName:"ps-6! pe-5!",isOpen:a,showCloseButton:!0,onClose:()=>i(!1),testId:"modal-odyssey-open-tabs",title:r.jsx("div",{className:"flex w-full items-center text-[15px] font-medium",children:r.jsx(P,w({},cv.heading))}),noPadding:!0,children:r.jsx(hM,{tabs:n,clientThreadId:s,className:"border-token-border-subtle flex flex-col border-t",isSafeMode:d,detailed:!0})}),e[21]=s,e[22]=c,e[23]=a,e[24]=d,e[25]=n,e[26]=S):S=e[26];let C;return e[27]!==v||e[28]!==S?(C=r.jsxs(r.Fragment,{children:[v,S]}),e[27]=v,e[28]=S,e[29]=C):C=e[29],C}const m2e=t=>{"use forget";var T;const e=H.c(16),{conversation:n,currentGroupedMessage:s,isLastMessage:o,isLastTurnInConversation:a,isKAUR1BR5:i}=t,{formatMessage:l}=J(),{open:c,isVNCEnabled:d}=c2e(),{selectedSources:u}=Ra(n.id),m=G(),f=xe(m,"733205176");let p;e:{if(!d){p=null;break e}if(!f){p=null;break e}if(!o||!a){p=null;break e}if(s.type!==or.Text){p=null;break e}p=s.messages[0]}const g=p;if(!g)return null;const h=(T=g.metadata)==null?void 0:T.n7jupd_button_type;if(!h||h==="confirmation"||(h==="takeover"||h==="login")&&i)return null;let x;e[0]!==n||e[1]!==g.id||e[2]!==u?(x=async()=>{await Er({conversation:n,eventSource:"mouse",promptMessage:us("Yes, please proceed",w({system_hints:[is]},u&&{selected_sources:hi(u)})),parentMessageId:g.id,completionMetadata:{systemHints:[is],conversationMode:{kind:Tt.PrimaryAssistant}}})},e[0]=n,e[1]=g.id,e[2]=u,e[3]=x):x=e[3];const y=x;let b;e[4]!==c||e[5]!==y?(b=E=>{switch(E){case"takeover":return c();case"login":return c();case"confirmation":return y()}},e[4]=c,e[5]=y,e[6]=b):b=e[6];const v=b;let S;e[7]!==v||e[8]!==h?(S=()=>v(h),e[7]=v,e[8]=h,e[9]=S):S=e[9];const C=f2e[h];let k;e[10]!==l||e[11]!==C?(k=l(C),e[10]=l,e[11]=C,e[12]=k):k=e[12];let M;return e[13]!==S||e[14]!==k?(M=r.jsx("div",{className:"my-2 flex",children:r.jsx(he,{onClick:S,children:k})}),e[13]=S,e[14]=k,e[15]=M):M=e[15],M},f2e=be({takeover:{id:"odyssey-message-indicator.takeover",defaultMessage:"Take over"},login:{id:"odyssey-message-indicator.login",defaultMessage:"Log in"},confirmation:{id:"odyssey-message-indicator.confirm",defaultMessage:"Confirm"}});function p2e(t){return t.url==="about:blank"?!1:!(t.url==="https://openai.com/"&&!t.selected)}function g2e(t){var n;const e=(n=t.url)==null?void 0:n.trim().toLowerCase();return e&&e!=="about:blank"&&e!==""}function h2e(t){const{isScheduled:e,isScheduledRun:n}=t;return e&&!n&&r.jsx(ole,{})}function _2e(s){var o=s,{onChange:t,target:e}=o,n=Me(o,["onChange","target"]);if(!e)return;const a=w({childList:!0,subtree:!0},n),i=new MutationObserver(c=>{t(c)});function l(){try{i.disconnect()}catch(c){}}return i.observe(e,a),l}const x2e=()=>{};function y2e(t){return _.useCallback(e=>t?e(console.log.bind(console)):x2e,[t])}const v2e=".markdown:is(.streaming-animation,.result-streaming)",YKe=_.memo(function(e){const{debug:n,isStreaming:s}=e,o=_.useRef(-1),a=y2e(n),i=_.useRef(null),[l,c]=_.useState([]),d=_.useCallback(f=>{const p=f.dataset.start,g=f.tagName.toLowerCase(),h="--streaming-".concat(g,"-").concat(p),y={height:0,ready:!1,selector:"".concat(g,'[data-start="').concat(p,'"]'),target:f,variableName:h},b=Ul({axis:"height",target:f,onChange({height:v}){var T;const S=f.dataset.end,C=f.dataset.isLastNode==="",k=["table","pre"].includes(g)&&C;if(a(E=>E("".concat(g,"-").concat(p),{observedElement:y,height:v,canLookAhead:k,isLastNode:C})),!y.ready){const E=k&&b2e(p,S,15),A=v>0;(E||A)&&(y.ready=!0,o.current=w2e(S))}const M=typeof y.height=="number"&&v<y.height;y.ready&&!M&&(y.height=v,(T=i.current)==null||T.style.setProperty(h,"".concat(v,"px")))}});y.unsubscribe=b,c(v=>[...v,y])},[a]),u=_.useCallback(f=>_2e({onChange(p){const{added:g}=C2e(p);for(const h of g)d(h)},target:f,subtree:!0,childList:!0}),[d]);_.useEffect(()=>{if(!s)return;let f;function p(h){i.current=h,f=u(h)}function g(h){const x=document.querySelector(v2e);x?h(x):requestAnimationFrame(()=>{g(h)})}return g(p),()=>{window.setTimeout(()=>{if(n){a(h=>h("Animations complete, preserving state in debug mode."));return}f==null||f(),c([]),o.current=-1},500)}},[s,n,u,a]);const m=l.map(({selector:f,variableName:p})=>"".concat(f," { --streaming-reveal-amount: var(").concat(p,", 0) }")).join("\n");return r.jsx("style",{children:m})});function b2e(t,e,n){if(t===void 0||e===void 0)return!0;const s=parseInt(t,10),o=parseInt(e,10);return isNaN(s)||isNaN(o)?!0:o-s>=n}function S2e(t){return t instanceof HTMLElement?["PRE","TABLE"].includes(t.tagName):!1}function C2e(t){return{added:t.flatMap(n=>Array.from(n.addedNodes)).filter(S2e)}}function w2e(t){return t?parseInt(t,10):-1}function k2e(t){const e=Math.floor(t/60),n=Math.floor(e/60),s=String(Math.floor(t)%60).padStart(2,"0"),o=String(e%60).padStart(2,"0");return n===0?"".concat(o,":").concat(s):"".concat(n,":").concat(o,":").concat(s)}const M2e=j(()=>I(()=>import("./d5usxzmea5cxgha2.js").then(t=>t._),__vite__mapDeps([202,1])),{loading:t=>L(t)}),T2e=j(()=>I(()=>Promise.resolve().then(()=>L9e),void 0),{loading:t=>L(t)});function E2e(t){var n;const e=(n=t==null?void 0:t.audio_asset_pointer)==null?void 0:n.metadata;if((e==null?void 0:e.start)!==void 0&&(e==null?void 0:e.end)!==void 0)return e.end-e.start}const ZKe=_.memo(function(e){const n=J(),{content:s,metadata:o}=e.message;if(!(s.content_type==="multimodal_text"&&e.isUserTurn))return;const i=s.parts.filter(pr.isPartRealTimeUserAudioVideoAssetPointer).find(c=>c.audio_asset_pointer),l=E2e(i);return r.jsxs("div",{className:"text-token-text-secondary my-2 me-4 flex flex-row justify-end gap-1 text-xs",children:[(o==null?void 0:o.real_time_audio_has_video)&&r.jsx(M2e,{"aria-label":n.formatMessage({id:"/nS9Zn",defaultMessage:"Recorded with video or screenshare"}),className:"icon-sm"}),i&&r.jsx(T2e,{"aria-label":n.formatMessage({id:"eP1JEa",defaultMessage:"Recorded with voice"}),className:"icon-sm"}),l!==void 0&&r.jsx("span",{className:"font-semibold",children:k2e(l)})]})}),KKe=()=>r.jsxs("div",{className:"text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&]:mt-5",children:[r.jsx("div",{className:"text-token-text-tertiary px-5 text-sm",children:r.jsx(P,{id:"clarification.autoResponse",defaultMessage:"Auto response"})}),r.jsx("div",{className:"bg-token-message-surface relative max-w-[var(--user-chat-width,70%)] rounded-3xl px-5 py-2.5",children:r.jsx(P,{id:"clarification.modelContinueMessage",defaultMessage:"Continue"})})]}),A2e=j(()=>I(()=>import("./fsmgof058qqyu9y1.js").then(t=>t._),__vite__mapDeps([338,1])),{loading:t=>L(t)}),QKe=()=>r.jsx("div",{className:"flex w-full justify-end px-5 py-4",children:r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-1",children:[r.jsx(A2e,{className:"size-5"}),r.jsx(P,{id:"operator.takeover.indicator",defaultMessage:"You took control"})]})});function I2e(t){return pr.isMultimodalTextMessage(t)?t.content.parts.flatMap(e=>typeof e!="string"&&e.content_type===Sa.VideoAssetPointer?e:null).filter(e=>!!e):[]}const j2e=(t,e)=>{var a;const n={"video/mp4":"mp4","video/quicktime":"mov"},s={mp4:"mp4",mov:"mov"},o=(a=e.split(".").pop())==null?void 0:a.toLowerCase();return n[t]||s[o!=null?o:""]||void 0};function P2e(t){"use forget";const e=H.c(7),[n,s]=_.useState(null),o=xt();let a,i;e[0]!==t.assetPointer||e[1]!==t.serverThreadId||e[2]!==o?(a=()=>{t.assetPointer&&Wd.fetch(o,{asset:t.assetPointer,conversationId:t.serverThreadId}).then(c=>{s(c.url)})},i=[o,t.assetPointer,t.serverThreadId],e[0]=t.assetPointer,e[1]=t.serverThreadId,e[2]=o,e[3]=a,e[4]=i):(a=e[3],i=e[4]),_.useEffect(a,i);let l;return e[5]!==n?(l=n?r.jsx("video",{controls:!0,src:n,className:"w-full"}):null,e[5]=n,e[6]=l):l=e[6],l}function JKe(t){"use forget";var m,f;const e=H.c(5),{message:n,isUserTurn:s,clientThreadId:o}=t,a=I2e(n),i=Xn(o);if(a.length===0||!s)return null;const l=(f=(m=a[0].metadata)==null?void 0:m.transcription)==null?void 0:f.text,c=W("mt-2 text-sm italic",{"opacity-65":l,"opacity-30":!l});let d;e[0]!==l?(d=l!=null?l:r.jsx(P,w({},N2e.transcriptUnavailable)),e[0]=l,e[1]=d):d=e[1];let u;return e[2]!==c||e[3]!==d?(u=r.jsx("div",{className:c,children:d}),e[2]=c,e[3]=d,e[4]=u):u=e[4],r.jsxs("div",{className:"flex max-w-[400px] flex-col justify-end self-end",children:[r.jsx(P2e,{assetPointer:a[0],serverThreadId:i}),u]})}const N2e=be({transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}});function O1(){var n;const{data:t}=th(s=>{var o,a,i,l,c;return{voiceName:(o=s==null?void 0:s.settings)==null?void 0:o[en.VoiceName],voiceMainLanguage:(a=s==null?void 0:s.settings)==null?void 0:a[en.VoiceMainLanguage],trainingAllowed:(i=s==null?void 0:s.settings)==null?void 0:i[en.TrainingAllowed],voiceTrainingAllowed:(l=s==null?void 0:s.settings)==null?void 0:l[en.VoiceTrainingAllowed],videoTrainingAllowed:(c=s==null?void 0:s.settings)==null?void 0:c[en.VideoTrainingAllowed]}}),e=MO();return{voiceName:EO(t==null?void 0:t.voiceName,e),voiceMainLanguage:(n=t==null?void 0:t.voiceMainLanguage)!=null?n:_u.Auto,voiceTrainingAllowed:!!(t!=null&&t.trainingAllowed&&(t!=null&&t.voiceTrainingAllowed)),videoTrainingAllowed:!!(t!=null&&t.trainingAllowed&&(t!=null&&t.videoTrainingAllowed))}}function MO(){const t=TO(),e=Vb().locale;return _.useCallback(()=>{if(t.length===0)return"juniper";let n=t[0].voice;return e.startsWith("zh")&&(n="cove"),n},[t,e])}function TO(){var n;const t=(n=wo(en.VoiceMainLanguage))==null?void 0:n.data,{data:e}=lt({queryKey:["getUserSettingVoices",t],queryFn:()=>pe.safeGet("/settings/voices",{authOption:qt.SendIfAvailable})});return e?e.voices:[]}function EO(t,e){return t==="sky"?"juniper":t!=null?t:e()}function c3(){if("MediaSource"in window){const t=e=>GH(e)&&MediaSource.isTypeSupported(e);if(t("audio/aac"))return"aac";if(t("audio/mpeg"))return"mp3";if(t("audio/ogg"))return"opus"}}function Fg(t){if(t.buffer instanceof ArrayBuffer)return t;const e=new Uint8Array(t.byteLength);return e.set(t),e}function R2e({conversationId:t,messageId:e}){const{voiceName:n}=O1(),s=()=>pe.safeGet("/synthesize",{parameters:{query:{message_id:e,conversation_id:t,voice:n,format:c3()}},skipJsonTransform:!0}),o="".concat(t,".").concat(e,".").concat(n);return L2e(s,o)}function L2e(t,e){var p;const[n,s]=_.useState(!1),o=_.useRef({isMediaSourceAvailable:d3(),mediaSourceFormat:(p=c3())!=null?p:"n/a",playPromise:null,shouldAbortQueuedPlayback:!1}).current,a=J(),i=Ut(),l=Gb(),c=$b(g=>{var h;return g.isPlaying&&g.sourceUrl===((h=fo.get(e))==null?void 0:h.src)}),d=_.useCallback(async()=>{if(!l||!t)return;s(!0);const g={isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat};try{const h=await O2e({key:e,onStreamingError:x=>{$t.readAloud.error(x,g),s(!1),i.danger(a.formatMessage(ep.playbackError,{error:x.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:ep.playbackError.defaultMessage,loggingDescription:x.message})},onStreamingStart:()=>{s(!1)},fetchAudioDataResponse:t});if(o.shouldAbortQueuedPlayback){o.shouldAbortQueuedPlayback=!1;return}l.changeSource(h),o.playPromise=l.play()}catch(h){$t.readAloud.error(h,g),s(!1),i.danger(a.formatMessage(ep.playbackError,{error:h.message}),{toastId:"useVoiceReadAloudAudio_onStreamingError",loggingTitle:ep.playbackError.defaultMessage,loggingDescription:h.message})}},[l,o,e,i,a,t]),u=_.useCallback(()=>{const g=my();g&&(o.playPromise?o.playPromise.then(()=>{g.stop(),o.playPromise=null}):g.stop())},[o]),m=_.useCallback(()=>{var h;const g=my();g&&(g.state.isPlaying&&g.state.sourceUrl===((h=fo.get(e))==null?void 0:h.src)?u():($t.readAloud.click({isMediaSourceAvailable:o.isMediaSourceAvailable,format:o.mediaSourceFormat}),d()))},[e,o,d,u]);_.useEffect(()=>{n&&c&&s(!1)},[n,c]);const f=_.useRef(e);return _.useEffect(()=>{f.current=e}),_.useEffect(()=>(o.shouldAbortQueuedPlayback=!1,()=>{var x;const g=l9();g.isPlaying&&g.sourceUrl===((x=fo.get(f.current))==null?void 0:x.src)?u():o.shouldAbortQueuedPlayback=!0}),[o,u]),{togglePlayback:m,isPlaying:c,isLoading:n}}async function AO(t){var s;const e=await t(),n=(s=e.headers.get("content-type"))!=null?s:"audio/aac";return{response:e,format:n}}async function O2e(t){return d3()?F2e(t):D2e(t)}async function D2e({key:t,fetchAudioDataResponse:e}){const n=fo.get(t);if(n!=null&&n.blob)return n.src;const{response:s,format:o}=await AO(e),a=await s.arrayBuffer(),i=new Blob([a],{type:o}),l=IO({key:t,src:URL.createObjectURL(i),format:o,blob:i});return fo.set(t,l),l.src}async function F2e({key:t,onStreamingError:e,onStreamingStart:n,fetchAudioDataResponse:s}){let o=fo.get(t);o!=null&&o.streaming&&(fo.delete(t),o=null);let a,i;const l=U2e(),c=new l;if(o)a=o,a.src=URL.createObjectURL(c);else{const{format:m,response:f}=await AO(s);i=f,a=IO({key:t,src:URL.createObjectURL(c),format:m})}const d=B2e(a.id),u={sourceopen:async()=>{var p,g;d("sourceopen");const m=c.addSourceBuffer(a.format),f=async()=>{m.updating&&await new Promise(h=>m.addEventListener("updateend",h,{once:!0}))};if(a.segments.length&&!a.streaming){d("streaming from cache"),a.streaming=!0,n();for(const h of a.segments)m.appendBuffer(Fg(h)),await f();c.readyState==="open"&&c.endOfStream(),a.streaming=!1,d("done streaming from cache");return}if(i){d("fetching audio");try{const h=(p=i.body)==null?void 0:p.getReader();if(!h)return;for(;((g=fo.get(t))==null?void 0:g.id)===a.id;){const{done:x,value:y}=await h.read();if(x){d("done streaming"),a.streaming=!1,c.readyState==="open"&&c.endOfStream();break}if(!y)continue;if(!Array.from(c.sourceBuffers).includes(m)){d("stop streaming, source buffer removed"),a.streaming=!1;break}a.streaming||(d("start streaming"),a.streaming=!0,n());const b=Fg(y);m.appendBuffer(b),a.segments.push(b),await f()}}catch(h){if(d("error while streaming",h),a.streaming=!1,c.readyState==="open")try{c.endOfStream("network")}catch(x){$t.readAloud.error(x)}fo.delete(t),e(h)}}},sourceclose:()=>{var m;d("sourceclose"),a.streaming&&(a.streaming=!1,((m=fo.get(t))==null?void 0:m.id)===a.id&&(d("sourceclosed while streaming, cleaning up cache"),fo.delete(t)))},sourceended:rs};for(const[m,f]of Object.entries(u))c.addEventListener(m,()=>{try{return f()}catch(p){$t.readAloud.error(p)}});return fo.set(t,a),a.src}const ep=be({playbackError:{id:"useVoiceReadAloudAudio.playbackError",defaultMessage:"Failed to play message"}}),B2e=t=>rs;function U2e(){return d3()?window.MediaSource:null}function d3(){return!!c3()}const IO=t=>w({id:_s(),segments:[],streaming:!1},t),fo=new Eye({capacity:50,dispose:t=>{URL.revokeObjectURL(t.src)}});async function u3(t){const e=await I(()=>import("./g8i6bixylsxyemsr.js").then(n=>n.i),__vite__mapDeps([339,1]));if(gr!=null&&(t!=null&&t.startsWith(gr)))return!0;try{return e.get(new URL(t!=null?t:"").hostname)==="openai.com"}catch(n){return!1}}function m3(t,e,n){return pe.safeGet("/conversation/{conversation_id}/url_safe",{parameters:{path:{conversation_id:t},query:{url:e,history_and_training_disabled:n}}})}function V2e(t,e){const n=G(),s=ue(()=>vd(n)),o=!pt(n);return lt({queryKey:["safe-url",{serverThreadId:t,url:e,isHistoryAndTrainingDisabled:s}],queryFn:async()=>{if(t==null||e==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await u3(e)||me.isThreadUrlSafe(ft(t),e)?{safe:!0}:o?{safe:!1}:m3(t,e,s)},enabled:t!=null&&e!=null})}function G2e(t,e,n=!0){const s=Ue(t,a=>e!=null&&me.isThreadUrlSafe(a,e)),{data:{safe:o}={}}=V2e(t,s?void 0:e);return s||o||!n?e:void 0}function XKe(t,e,n=!0){const s=$2e(e,500);return G2e(t,s,n)}function $2e(t,e){const[n,s]=_.useState(void 0),[o]=_.useState(()=>yr(a=>{s(a)},e));return _.useEffect(()=>{o(t)},[o,t]),n===t?t:void 0}function eQe(t,e){const n=G(),s=ue(()=>vd(n)),o=Ue(t,i=>{var l;return(l=i==null?void 0:i.safeUrls)!=null?l:[]}),{data:a=[]}=lt({queryKey:["safe-urls",t,e,s,o],queryFn:async()=>{const i=o.filter(u=>e.includes(u)),l=e.filter(u=>!i.includes(u)),d=(await Promise.allSettled(l.map(async u=>{if(await u3(u))return u;if(t==null)return null;try{return(await m3(t,u,s)).safe?u:null}catch(f){return null}}))).map(u=>u.status==="fulfilled"?u.value:null).filter(u=>u!=null);return i.concat(d)},enabled:t!=null&&e.length>0});return a}async function H2e(t,e){const{isKnownSafeUrl:n,isUrlMarkedSafeInThread:s,serverCheck:o,isHistoryAndTrainingDisabled:a}=e,i=t.filter(m=>!s(m));if(i.length===0)return[];const l=await Promise.all(i.map(m=>n(m))),c=i.filter((m,f)=>!l[f]);if(c.length===0)return[];if(!o)return c;const d=await Promise.allSettled(c.map(async m=>{try{return await o(m,a)?null:m}catch(f){return m}})),u=[];return d.forEach((m,f)=>{const p=c[f];m.status==="fulfilled"?typeof m.value=="string"&&u.push(m.value):u.push(p)}),u}function W2e(t,e,n){const s=ft(e),o=jt(e);return H2e(n,{isKnownSafeUrl:u3,isUrlMarkedSafeInThread:a=>me.isThreadUrlSafe(s,a),serverCheck:o!=null?async(a,i)=>(await m3(o,a,i)).safe:void 0,isHistoryAndTrainingDisabled:hn(()=>vd(t))})}j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)});j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)});const lf=Nt(t=>({targetedContent:void 0,setTargetedContent:e=>{t({targetedContent:e})}}));function _M(){return" "}const xM=t=>["conversation","init",t],z2e=({clientThreadId:t,conversationMode:e,clientModelId:n,enabled:s},o,a,i)=>{var m;const l=pre(e),d=(m=new URLSearchParams(i).get(c9))!=null?m:void 0,u=Na(t)?null:t;return{gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:"always",queryKey:xM(t),queryFn:()=>{let f=pe.safePost("/conversation/init",{requestBody:{gizmo_id:l,requested_default_model:n,conversation_id:u,timezone_offset_min:new Date().getTimezoneOffset(),conversation_owner_id:d},authOption:qt.SendIfAvailable});return f=f.then(p=>(o.getQueryData(xM(t))&&lA(p)&&o.invalidateQueries({queryKey:cA()}),p)),f},enabled:s&&!VI(t)}},q2e=t=>{const e=xt(),n=Ut(),{search:s}=ls();return lt(z2e(t,e,n,s))},Y2e=t=>{"use forget";var x;const e=H.c(23),n=at(),{pathname:s,search:o}=ls(),a=Es(),i=Ut(),l=vn(un),c=bi();let d,u,m;if(e[0]!==t||e[1]!==l||e[2]!==c||e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==i){const y=c||VI(t);d=c;const b=new URLSearchParams(o),v=$H(s),S=(x=b.get(c9))!=null?x:void 0;m=lt;let C;e[10]!==t||e[11]!==l||e[12]!==n||e[13]!==s||e[14]!==i?(C=k=>{if(l)it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0);else{const M=HH(s),T=M!=null?d9(M):"/";n(T)}i.danger("Unable to load conversation ".concat(t),{testId:"conversation-fetch-error-toaster",toastId:"use_fetch_conversation_failed_to_load_conversation"})},e[10]=t,e[11]=l,e[12]=n,e[13]=s,e[14]=i,e[15]=C):C=e[15],u=l1({clientThreadId:t,alwaysForceUpdate:y,projectId:v,ownerUserId:S,onError:C}),e[0]=t,e[1]=l,e[2]=c,e[3]=n,e[4]=s,e[5]=o,e[6]=i,e[7]=d,e[8]=u,e[9]=m}else d=e[7],u=e[8],m=e[9];let f;e[16]!==t||e[17]!==a?(f=!Na(t)&&!a,e[16]=t,e[17]=a,e[18]=f):f=e[18];const p=d?"always":!1;let g;e[19]!==u||e[20]!==f||e[21]!==p?(g=B(w({},u),{enabled:f,refetchOnMount:!0,refetchOnWindowFocus:p}),e[19]=u,e[20]=f,e[21]=p,e[22]=g):g=e[22];const{data:h}=m(g);return h},Z2e=(t,e,n)=>{const s=G(),o=vn(un),a=e.kind===Tt.GizmoInteraction?e.gizmo_id:null,{data:i}=Pa(a!=null?a:void 0),c=a&&$s(a)&&!i;Y2e(t);const{session:d}=pd(s),u=xe(s,"544083113");_.useEffect(()=>{var p,g;hr.initThread({clientThreadId:t,conversationMode:e,userId:(p=d==null?void 0:d.user)==null?void 0:p.id,accountId:(g=d==null?void 0:d.account)==null?void 0:g.id,skipFollowupMcpCheck:u}),Ku.reset(),Qc.dismiss()},[t]),_.useEffect(()=>{n!=null&&n.shouldScrollToBottom&&qe(t,p=>{p.scrollToMessageId="finalAgentTurn"})},[t,n==null?void 0:n.shouldScrollToBottom]),_.useEffect(()=>{n!=null&&n.disableConversationNavigation&&qe(t,p=>{p.disableConversationNavigation=n.disableConversationNavigation})},[t,n==null?void 0:n.disableConversationNavigation]);const{isLoading:m,data:f}=q2e({clientThreadId:t,clientModelId:null,conversationMode:e,enabled:!c});_.useEffect(()=>{if(m||!f||o)return;const{default_model_slug:p}=f,g=p;Ku.updateDetails(f),g&&qe(t,h=>{h.defaultModelId=g})},[m,f,o])};function tQe(){const t=Nn(Hn());t.redirect!=null&&(window.location.href=t.redirect.destination)}const J0=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),X0=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)}),jO="https://openai.com/policies/cookie-policy/",Oi=be({essentialCookies:{id:"settingsModal.privacy.cookieConsent.essentialCookiesLabel",defaultMessage:"Strictly Necessary Cookies (always active)"},marketingCookies:{id:"settingsModal.privacy.cookieConsent.marketingCookiesLabel",defaultMessage:"Marketing Performance Cookies"},analyticsCookies:{id:"settingsModal.privacy.cookieConsent.analyticsCookiesLabel",defaultMessage:"Analytics Cookies"},cookieConsent:{id:"settingsModal.privacy.cookieConsent.header",defaultMessage:"Cookie Preference Center"}});function f3(t,e){const{isUserInPioneerHR:n,userCountry:s}=Nn(t);return(!(e!=null&&e.structure)||e.structure!==WH.WORKSPACE)&&$6(s)&&(n!=null?n:!1)}const Xg=class Xg extends El()(()=>({isOpen:!1})){constructor(){super(...arguments);ne(this,"openModal",()=>this.setState(n=>B(w({},n),{isOpen:!0})));ne(this,"closeModal",()=>this.setState(n=>B(w({},n),{isOpen:!1})))}};ne(Xg,"useIsOpen",()=>Xg.useState(n=>n.isOpen));let Sr=Xg;function nQe(){const t=J(),e=xt(),n=G(),s=ut(n),{data:o,isLoading:a}=lt(pl),i=Sr.useStore(),l=Sr.useIsOpen(),c=Yo(),[d,u]=_.useState(!1),[m,f]=_.useState(!1),[p,g]=_.useState(!1),{mutate:h}=u9({onMutate:y=>{e.setQueryData(pl.queryKey,b=>b?B(w({},b),{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing}):{consent_analytics:y.consent_analytics,consent_marketing:y.consent_marketing,is_consent_required:!0})},onSuccess:(y,b)=>{Oe.addAction("cookie-consent.consent-modal.updated-cookie-consent-backend",{consent_analytics:b.consent_analytics,consent_marketing:b.consent_marketing}),U.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend",{consent_analytics:b.consent_analytics,consent_marketing:b.consent_marketing})},onError:(y,b)=>{U.logEventWithStatsig("Cookie Preferences Modal Updated Cookie Consent Backend Error","chatgpt_cookie_prefs_modal_updated_cookie_consent_backend_error",{error:y.message,consent_analytics:b.consent_analytics,consent_marketing:b.consent_marketing})}}),x=f3(n,s)&&l;return _.useEffect(()=>{x&&U.logEventWithStatsig("Cookie Preferences Modal Shown","chatgpt_cookie_prefs_modal_shown")},[x]),r.jsx(Pt,{isOpen:x,testId:"modal-cookie-preferences",onClose:()=>{i.closeModal(),U.logEventWithStatsig("Cookie Preferences Modal Closed","chatgpt_cookie_prefs_modal_closed")},size:"custom",className:"h-[100%] md:max-h-[600px] md:min-h-[600px] md:max-w-[680px]",type:"success",showCloseButton:!0,title:t.formatMessage(Oi.cookieConsent),children:r.jsxs("div",{className:"flex max-h-[calc(100vh-150px)] w-full flex-col gap-3 overflow-y-auto md:min-h-[380px]",children:[r.jsx("p",{className:"text-token-text-secondary text-sm",children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.description.v2",defaultMessage:"Using websites and apps involves storing and retrieving information from your device, including cookies and other identifiers, which can be shared with third parties, for various activities. We provide a simple tool below allowing you to tailor your choices as you deem fit. You can change your consent at any time. <learnMore>Learn more.</learnMore>",values:{learnMore:y=>r.jsx("a",{href:jO,target:"_blank",rel:"noreferrer",className:"underline",children:y})}})}),r.jsxs("div",{className:"mt-2 flex flex-col gap-3",children:[r.jsx(Yi,{children:c?r.jsx(_p,{label:t.formatMessage(Oi.essentialCookies),disabled:!0,enabled:!0,onChange:()=>{},description:r.jsx("p",{children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yp,{id:"essential-cb",checked:!0,disabled:!0}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage(Oi.essentialCookies)}),r.jsx("button",{onClick:()=>u(!d),children:d?r.jsx(J0,{className:"icon-sm"}):r.jsx(X0,{className:"icon-sm"})})]}),d&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.essentialCookiesDescription",defaultMessage:"These cookies are essential for the site to function and cannot be toggled off. They assist with security, user authentication, customer support, etc."})})]})]})}),r.jsx(Yi,{children:c?r.jsx(_p,{label:t.formatMessage(Oi.analyticsCookies),enabled:!!(o!=null&&o.consent_analytics),disabled:a,onChange:y=>{var b;U.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:y}),h({consent_analytics:y,consent_marketing:(b=o==null?void 0:o.consent_marketing)!=null?b:!1})},description:r.jsx("p",{children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yp,{id:"analytics-cb",checked:!!(o!=null&&o.consent_analytics),disabled:a,onChange:y=>{var v;const b=y.target.checked;U.logEventWithStatsig("Cookie Preferences Modal Analytics Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_analytics_cookies_toggle_clicked",{enabled:b}),h({consent_analytics:b,consent_marketing:(v=o==null?void 0:o.consent_marketing)!=null?v:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage(Oi.analyticsCookies)}),r.jsx("button",{onClick:()=>f(!m),children:m?r.jsx(J0,{className:"icon-sm"}):r.jsx(X0,{className:"icon-sm"})})]}),m&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.analyticsCookiesDescription",defaultMessage:"These cookies help us understand how visitors interact with our site. They allow us to measure traffic and improve site performance."})})]})]})}),r.jsx(Yi,{children:c?r.jsx(_p,{label:t.formatMessage(Oi.marketingCookies),enabled:!!(o!=null&&o.consent_marketing),disabled:a,onChange:y=>{var b;U.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:y}),h({consent_marketing:y,consent_analytics:(b=o==null?void 0:o.consent_analytics)!=null?b:!1})},description:r.jsx("p",{children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(yp,{id:"marketing-cb",checked:!!(o!=null&&o.consent_marketing),disabled:a,onChange:y=>{var v;const b=y.target.checked;U.logEventWithStatsig("Cookie Preferences Modal Marketing Cookies Toggle Clicked","chatgpt_cookie_prefs_modal_marketing_cookies_toggle_clicked",{enabled:b}),h({consent_marketing:b,consent_analytics:(v=o==null?void 0:o.consent_analytics)!=null?v:!1})}}),r.jsxs("div",{className:"flex w-full flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:t.formatMessage(Oi.marketingCookies)}),r.jsx("button",{onClick:()=>g(!p),children:p?r.jsx(J0,{className:"icon-sm"}):r.jsx(X0,{className:"icon-sm"})})]}),p&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(P,{id:"settingsModal.privacy.cookieConsent.marketingCookiesDescription",defaultMessage:"These cookies help us measure the effectiveness of our marketing campaigns."})})]})]})})]})]})})}function Bc(t){"use forget";const e=H.c(7),{onClick:n,children:s}=t,o=G(),a=Ve(o,"2118136551"),i=Io(),l=a.get("show_cookie_banner_improvements",!1),c=l?"secondary":void 0,d=l?"text-sm":"bg-gray-950/5 text-sm text-black hover:bg-gray-800/10 dark:bg-gray-50/5 hover:dark:bg-gray-100/10",u=i?"medium":void 0,m=i?"secondary":c,f=i?"mb-2 sm:mb-3":d;let p;return e[0]!==s||e[1]!==i||e[2]!==n||e[3]!==u||e[4]!==m||e[5]!==f?(p=r.jsx(he,{as:"button",size:u,color:m,fullWidth:i,className:f,onClick:n,children:s}),e[0]=s,e[1]=i,e[2]=n,e[3]=u,e[4]=m,e[5]=f,e[6]=p):p=e[6],p}function sQe(t){"use forget";const e=H.c(7),{useManuallyControlledVisibility:n,fixed:s}=t,o=n===void 0?!1:n,a=s===void 0?!1:s,{shouldShowCookieBanner:i,closeCookieConsentBanner:l,ignoreCookieConsentBanner:c}=zH(),{mutate:d}=u9(),u=FC.useOnCloseSideEffect(),m=FC.useManuallySetVisibility(),f=o?m:i;let p;return e[0]!==l||e[1]!==a||e[2]!==c||e[3]!==u||e[4]!==f||e[5]!==d?(p=f&&r.jsx(K2e,{fixed:a,onAccept:()=>{d({consent_analytics:!0,consent_marketing:!0}),l(),u(),U.logEventWithStatsig("Cookie Consent Banner Accepted","chatgpt_cookie_consent_banner_accepted")},onReject:()=>{d({consent_analytics:!1,consent_marketing:!1}),l(),u(),U.logEventWithStatsig("Cookie Consent Banner Rejected","chatgpt_cookie_consent_banner_rejected")},onIgnore:()=>{c(),u(),U.logEventWithStatsig("Cookie Consent Banner Ignored","chatgpt_cookie_consent_banner_ignored")}}),e[0]=l,e[1]=a,e[2]=c,e[3]=u,e[4]=f,e[5]=d,e[6]=p):p=e[6],p}function K2e(t){"use forget";const e=H.c(4),n=Io();let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],e[0]=s):s=e[0],_.useEffect(Q2e,s);let o;return e[1]!==n||e[2]!==t?(o=n?r.jsx(eSe,w({},t)):r.jsx(X2e,w({},t)),e[1]=n,e[2]=t,e[3]=o):o=e[3],o}function Q2e(){U.logEventWithStatsig("Cookie Consent Banner Shown","chatgpt_cookie_consent_banner_shown")}function PO(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(P,{id:"cookie-consent-banner.title",defaultMessage:"We use cookies"}),t[0]=e):e=t[0],e}function dv(){"use forget";const t=H.c(2),e=Sr.useStore();let n;return t[0]!==e?(n=r.jsx(P,{id:"cookie-consent-banner.description.v2",defaultMessage:"Some cookies are essential for this site to function and cannot be turned off. We also use cookies and collect and share device identifiers to help us understand how our service performs and is used, and to support our marketing efforts. Learn more in our <cookiePolicyLink>Cookie Policy</cookiePolicyLink>. You can update your preferences at any time by clicking <manageCookiesLink>Manage Cookies</manageCookiesLink>.",values:{cookiePolicyLink:J2e,manageCookiesLink:s=>r.jsx("a",{onClick:o=>{o.preventDefault(),e.openModal()},className:"cursor-pointer underline underline-offset-2",children:s},1)}}),t[0]=e,t[1]=n):n=t[1],n}function J2e(t){return r.jsx("a",{className:"underline underline-offset-2",href:jO,target:"_blank",rel:"noreferrer",children:t},0)}function NO(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(P,{id:"cookie-consent-banner.reject",defaultMessage:"Reject non-essential"}),t[0]=e):e=t[0],e}function RO(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(P,{id:"cookie-consent-banner.accept",defaultMessage:"Accept all"}),t[0]=e):e=t[0],e}function LO(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(P,{id:"cookie-consent-banner.manage-cookies",defaultMessage:"Manage Cookies"}),t[0]=e):e=t[0],e}function X2e(t){"use forget";const e=H.c(26),n=G(),s=Ve(n,"2118136551"),o=Sr.useStore(),a=s.get("show_cookie_banner_improvements",!1),i=t.fixed&&"fixed inset-x-0 bottom-0";let l;e[0]!==i?(l=W("z-10 w-[100vw] max-w-[100vw] overflow-hidden",i),e[0]=i,e[1]=l):l=e[1];let c;e[2]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx("h1",{className:"text-base",children:r.jsx(PO,{})}),e[2]=c):c=e[2];let d;e[3]!==a?(d=r.jsxs("div",{className:"flex max-w-5xl flex-col gap-2 sm:flex-1",children:[c,r.jsx("p",{className:"text-sm",children:a?r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(dv,{})}):r.jsx("span",{className:"text-gray-600",children:r.jsx(dv,{})})})]}),e[3]=a,e[4]=d):d=e[4];let u;e[5]!==o?(u=()=>o.openModal(),e[5]=o,e[6]=u):u=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(LO,{}),e[7]=m):m=e[7];let f;e[8]!==u?(f=r.jsx(Bc,{onClick:u,children:m}),e[8]=u,e[9]=f):f=e[9];let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(NO,{}),e[10]=p):p=e[10];let g;e[11]!==t.onReject?(g=r.jsx(Bc,{onClick:t.onReject,children:p}),e[11]=t.onReject,e[12]=g):g=e[12];let h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(RO,{}),e[13]=h):h=e[13];let x;e[14]!==t.onAccept?(x=r.jsx(Bc,{onClick:t.onAccept,children:h}),e[14]=t.onAccept,e[15]=x):x=e[15];let y;e[16]!==x||e[17]!==f||e[18]!==g?(y=r.jsxs("div",{className:"flex w-full flex-row justify-end gap-3 sm:w-auto sm:min-w-[300px]",children:[f,g,x]}),e[16]=x,e[17]=f,e[18]=g,e[19]=y):y=e[19];let b;e[20]!==y||e[21]!==d?(b=r.jsxs("div",{className:"bg-token-main-surface-tertiary flex w-full flex-col items-center justify-between gap-5 p-5 shadow-sm sm:flex-row sm:gap-0",children:[d,y]}),e[20]=y,e[21]=d,e[22]=b):b=e[22];let v;return e[23]!==l||e[24]!==b?(v=r.jsx("div",{className:l,children:b}),e[23]=l,e[24]=b,e[25]=v):v=e[25],v}function eSe(t){"use forget";var C;const e=H.c(24),n=G(),s=Ve(n,"2118136551"),o=Sr.useStore(),a=s.get("show_cookie_banner_improvements",!1),i=tSe,l=a&&(C=t.onIgnore)!=null?C:i,c=!a;let d;e[0]!==t?(d=r.jsx("div",{className:"flex w-full justify-end",children:r.jsx(fn,{onClick:()=>{var k;return(k=t.onIgnore)==null?void 0:k.call(t)}})}),e[0]=t,e[1]=d):d=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("p",{className:"mb-2 text-center text-xl font-semibold",children:r.jsx(PO,{})}),e[2]=u):u=e[2];let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx("p",{className:"text-token-text-secondary mb-6 text-center text-sm",children:r.jsx(dv,{})}),e[3]=m):m=e[3];let f;e[4]!==o?(f=()=>o.openModal(),e[4]=o,e[5]=f):f=e[5];let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(LO,{}),e[6]=p):p=e[6];let g;e[7]!==f?(g=r.jsx(Bc,{onClick:f,children:p}),e[7]=f,e[8]=g):g=e[8];let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(RO,{}),e[9]=h):h=e[9];let x;e[10]!==t.onAccept?(x=r.jsx(Bc,{onClick:t.onAccept,children:h}),e[10]=t.onAccept,e[11]=x):x=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx(NO,{}),e[12]=y):y=e[12];let b;e[13]!==t.onReject?(b=r.jsx(Bc,{onClick:t.onReject,children:y}),e[13]=t.onReject,e[14]=b):b=e[14];let v;e[15]!==d||e[16]!==b||e[17]!==g||e[18]!==x?(v=r.jsxs("div",{className:"flex flex-col items-center justify-center px-5 pt-4 pb-8 sm:p-10",children:[d,u,m,g,x,b]}),e[15]=d,e[16]=b,e[17]=g,e[18]=x,e[19]=v):v=e[19];let S;return e[20]!==l||e[21]!==c||e[22]!==v?(S=r.jsx(Pt,{testId:"modal-cookie-consent-banner-mobile",isOpen:!0,onClose:l,noPadding:!0,type:"success",size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:"bottom",shouldIgnoreClickOutside:c,children:v}),e[20]=l,e[21]=c,e[22]=v,e[23]=S):S=e[23],S}function tSe(){}const nSe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M6.83496 3.99992C6.38353 4.00411 6.01421 4.0122 5.69824 4.03801C5.31232 4.06954 5.03904 4.12266 4.82227 4.20012L4.62207 4.28606C4.18264 4.50996 3.81498 4.85035 3.55859 5.26848L3.45605 5.45207C3.33013 5.69922 3.25006 6.01354 3.20801 6.52824C3.16533 7.05065 3.16504 7.71885 3.16504 8.66301V11.3271C3.16504 12.2712 3.16533 12.9394 3.20801 13.4618C3.25006 13.9766 3.33013 14.2909 3.45605 14.538L3.55859 14.7216C3.81498 15.1397 4.18266 15.4801 4.62207 15.704L4.82227 15.79C5.03904 15.8674 5.31234 15.9205 5.69824 15.9521C6.01398 15.9779 6.383 15.986 6.83398 15.9902L6.83496 3.99992ZM18.165 11.3271C18.165 12.2493 18.1653 12.9811 18.1172 13.5702C18.0745 14.0924 17.9916 14.5472 17.8125 14.9648L17.7295 15.1415C17.394 15.8 16.8834 16.3511 16.2568 16.7353L15.9814 16.8896C15.5157 17.1268 15.0069 17.2285 14.4102 17.2773C13.821 17.3254 13.0893 17.3251 12.167 17.3251H7.83301C6.91071 17.3251 6.17898 17.3254 5.58984 17.2773C5.06757 17.2346 4.61294 17.1508 4.19531 16.9716L4.01855 16.8896C3.36014 16.5541 2.80898 16.0434 2.4248 15.4169L2.27051 15.1415C2.03328 14.6758 1.93158 14.167 1.88281 13.5702C1.83468 12.9811 1.83496 12.2493 1.83496 11.3271V8.66301C1.83496 7.74072 1.83468 7.00898 1.88281 6.41985C1.93157 5.82309 2.03329 5.31432 2.27051 4.84856L2.4248 4.57317C2.80898 3.94666 3.36012 3.436 4.01855 3.10051L4.19531 3.0175C4.61285 2.83843 5.06771 2.75548 5.58984 2.71281C6.17898 2.66468 6.91071 2.66496 7.83301 2.66496H12.167C13.0893 2.66496 13.821 2.66468 14.4102 2.71281C15.0069 2.76157 15.5157 2.86329 15.9814 3.10051L16.2568 3.25481C16.8833 3.63898 17.394 4.19012 17.7295 4.84856L17.8125 5.02531C17.9916 5.44285 18.0745 5.89771 18.1172 6.41985C18.1653 7.00898 18.165 7.74072 18.165 8.66301V11.3271ZM8.16406 15.995H12.167C13.1112 15.995 13.7794 15.9947 14.3018 15.9521C14.8164 15.91 15.1308 15.8299 15.3779 15.704L15.5615 15.6015C15.9797 15.3451 16.32 14.9774 16.5439 14.538L16.6299 14.3378C16.7074 14.121 16.7605 13.8478 16.792 13.4618C16.8347 12.9394 16.835 12.2712 16.835 11.3271V8.66301C16.835 7.71885 16.8347 7.05065 16.792 6.52824C16.7605 6.14232 16.7073 5.86904 16.6299 5.65227L16.5439 5.45207C16.32 5.01264 15.9796 4.64498 15.5615 4.3886L15.3779 4.28606C15.1308 4.16013 14.8165 4.08006 14.3018 4.03801C13.7794 3.99533 13.1112 3.99504 12.167 3.99504H8.16406C8.16407 3.99667 8.16504 3.99829 8.16504 3.99992L8.16406 15.995Z"})),oQe=Object.freeze(Object.defineProperty({__proto__:null,default:nSe},Symbol.toStringTag,{value:"Module"})),sSe=a=>{var i=a,{label:t,first:e,children:n,className:s}=i,o=Me(i,["label","first","children","className"]);const l=_.useId();return r.jsxs("aside",B(w({className:W(e?"pt-(--sidebar-section-first-margin-top)":"pt-(--sidebar-section-margin-top)","last:mb-5",s),"aria-labelledby":t?l:void 0},o),{children:[t&&r.jsx(OO,{id:l,children:t}),n]}))},OO=t=>r.jsx(YH,w({as:"h2"},t)),La=t=>r.jsx(qH,B(w({fillContainer:!0},t),{onClick:FO(t)})),DO=t=>r.jsx(Hb,B(w({as:"div",fillContainer:!0},t),{onClick:FO(t)}));function FO(t){return e=>{var n;(n=t.onClick)==null||n.call(t,e),!e.defaultPrevented&&e.currentTarget.contains(e.target)&&yn.setPopoverSidebarOpen(!1)}}const oSe=j(()=>I(()=>import("./ogo8hvquv5crkyqt.js").then(t=>t._),__vite__mapDeps([340,1])),{loading:t=>L(t)});function aQe(t){"use forget";const e=H.c(8),{as:n,inExpandoSidebarSection:s}=t,o=n===void 0?La:n,a=s===void 0?!1:s,i=J(),l=ls();let c;e[0]!==a||e[1]!==i?(c=a?i.formatMessage({id:"gizmo.exploreStoreEnabled.short.expando",defaultMessage:"Explore"}):i.formatMessage({id:"gizmo.exploreStoreEnabled.short",defaultMessage:"GPTs"}),e[0]=a,e[1]=i,e[2]=c):c=e[2];const d=c;let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=ZH(),e[3]=u):u=e[3];const m=l.pathname==="/gpts";let f;return e[4]!==o||e[5]!==d||e[6]!==m?(f=r.jsx(o,{icon:oSe,"data-testid":"explore-gpts-button",to:u,active:m,onClick:aSe,label:d}),e[4]=o,e[5]=d,e[6]=m,e[7]=f):f=e[7],f}function aSe(){z7()&&yn.setPopoverSidebarOpen(!1),U.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_explore_gpts",{gizmo_id:"explore_gpts"})}function BO(t){return xe(t,"2459568560")}function rSe(t){return xe(t,"699610503")}function iSe(){const t=G();return!!BO(t)}function rQe(){const t=G(),e=BO(t),n=rSe(t);return e&&n}const lSe=j(()=>I(()=>import("./cwvii49m4h3oz7sn.js"),__vite__mapDeps([341,1])),{loading:t=>L(t)}),cSe=({as:t=La})=>{const e=J();return iSe()?r.jsx(t,{to:"/aardvark",icon:lSe,external:!hd(),label:e.formatMessage({id:"AardvarkSidebarListItem.aardvark",defaultMessage:"Aardvark"})}):null},UO=t=>_.createElement("svg",w({width:25,height:25,viewBox:"0 0 25 25",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("g",{clipPath:"url(#clip0_151_34)"},_.createElement("path",{d:"M11.1543 2.27734L11.1544 1.52734H11.1543V2.27734ZM14.8301 3.7998L14.2999 4.33025L14.6059 4.63612L15.0238 4.52434L14.8301 3.7998ZM16.1768 3.62305L16.1768 2.87305L16.1767 2.87305L16.1768 3.62305ZM21.377 8.82324L22.127 8.82324L22.127 8.82322L21.377 8.82324ZM21.1992 10.168L20.4746 9.97447L20.363 10.3925L20.669 10.6984L21.1992 10.168ZM22.7227 13.8457L23.4727 13.8457L23.4727 13.8457L22.7227 13.8457ZM18.8682 18.8682L18.6746 18.1436L18.2555 18.2555L18.1436 18.6746L18.8682 18.8682ZM13.8457 22.7227L13.8457 23.4727H13.8457V22.7227ZM10.1689 21.2002L10.6993 20.6698L10.3933 20.3639L9.97526 20.4756L10.1689 21.2002ZM8.82324 21.377L8.82324 22.127L8.8233 22.127L8.82324 21.377ZM3.62305 16.1768L2.87305 16.1767V16.1768H3.62305ZM3.7998 14.8301L4.52433 15.0239L4.63614 14.6059L4.33028 14.2999L3.7998 14.8301ZM2.27734 11.1543L1.52734 11.1543V11.1543H2.27734ZM6.12988 6.13086L6.32372 6.85538L6.74246 6.74335L6.85443 6.3246L6.12988 6.13086ZM11.1543 2.27734L11.1542 3.02734C12.3827 3.02745 13.4939 3.5246 14.2999 4.33025L14.8301 3.7998L15.3603 3.26936C14.2846 2.19417 12.7966 1.52749 11.1544 1.52734L11.1543 2.27734ZM14.8301 3.7998L15.0238 4.52434C15.3914 4.42604 15.7777 4.37306 16.1768 4.37305L16.1768 3.62305L16.1767 2.87305C15.6443 2.87306 15.1278 2.94383 14.6363 3.07527L14.8301 3.7998ZM16.1768 3.62305V4.37305C18.6343 4.37305 20.6269 6.3657 20.627 8.82327L21.377 8.82324L22.127 8.82322C22.1269 5.53731 19.4628 2.87305 16.1768 2.87305V3.62305ZM21.377 8.82324H20.627C20.627 9.22016 20.5731 9.60568 20.4746 9.97447L21.1992 10.168L21.9238 10.3615C22.0545 9.87218 22.127 9.35663 22.127 8.82324H21.377ZM21.1992 10.168L20.669 10.6984C21.4753 11.5043 21.9726 12.6163 21.9727 13.8458L22.7227 13.8457L23.4727 13.8457C23.4725 12.2027 22.806 10.7136 21.7294 9.63751L21.1992 10.168ZM22.7227 13.8457H21.9727C21.9727 15.9036 20.5745 17.636 18.6746 18.1436L18.8682 18.8682L19.0618 19.5927C21.6008 18.9144 23.4727 16.6006 23.4727 13.8457H22.7227ZM18.8682 18.8682L18.1436 18.6746C17.636 20.5746 15.9037 21.9727 13.8457 21.9727V22.7227V23.4727C16.6006 23.4727 18.9144 21.6008 19.5928 19.0617L18.8682 18.8682ZM13.8457 22.7227L13.8457 21.9727C12.6167 21.9726 11.5052 21.4757 10.6993 20.6698L10.1689 21.2002L9.63863 21.7305C10.7146 22.8064 12.2032 23.4726 13.8457 23.4727L13.8457 22.7227ZM10.1689 21.2002L9.97526 20.4756C9.6077 20.5739 9.22182 20.6269 8.82318 20.627L8.82324 21.377L8.8233 22.127C9.3556 22.1269 9.8716 22.056 10.3626 21.9248L10.1689 21.2002ZM8.82324 21.377V20.627C6.36565 20.627 4.37305 18.6344 4.37305 16.1768H3.62305H2.87305C2.87305 19.4628 5.53722 22.127 8.82324 22.127V21.377ZM3.62305 16.1768L4.37305 16.1768C4.37308 15.7776 4.42601 15.3914 4.52433 15.0239L3.7998 14.8301L3.07528 14.6363C2.94376 15.1279 2.87309 15.6443 2.87305 16.1767L3.62305 16.1768ZM3.7998 14.8301L4.33028 14.2999C3.52457 13.4937 3.02734 12.3827 3.02734 11.1543H2.27734H1.52734C1.52734 12.7967 2.19424 14.2846 3.26933 15.3603L3.7998 14.8301ZM2.27734 11.1543L3.02734 11.1543C3.02745 9.09668 4.42492 7.36339 6.32372 6.85538L6.12988 6.13086L5.93604 5.40634C3.39777 6.08544 1.52748 8.40053 1.52734 11.1543L2.27734 11.1543ZM6.12988 6.13086L6.85443 6.3246C7.36225 4.42545 9.0963 3.02734 11.1543 3.02734V2.27734V1.52734C8.40018 1.52734 6.0842 3.39833 5.40534 5.93712L6.12988 6.13086Z",fill:"currentColor"}),_.createElement("g",{filter:"url(#filter0_d_151_34)"},_.createElement("path",{d:"M14.731 9.34888C14.8822 9.29395 15.053 9.28872 15.2163 9.34595C15.5959 9.47908 15.7888 9.91135 15.6509 10.2893L13.3882 16.4856C13.252 16.8585 12.8421 17.0637 12.4673 16.9329C12.2323 16.8507 12.068 16.6595 12.0083 16.4368L11.3862 14.1204C11.3199 13.8719 11.1257 13.6783 10.8774 13.6116L8.56201 12.9846C8.33954 12.9244 8.14944 12.7587 8.06787 12.5237C7.93794 12.1487 8.14308 11.7392 8.51611 11.6038L14.731 9.34888Z",fill:"currentColor"}),_.createElement("path",{d:"M14.731 9.34888C14.8822 9.29395 15.053 9.28872 15.2163 9.34595C15.5959 9.47908 15.7888 9.91135 15.6509 10.2893L13.3882 16.4856C13.252 16.8585 12.8421 17.0637 12.4673 16.9329C12.2323 16.8507 12.068 16.6595 12.0083 16.4368L11.3862 14.1204C11.3199 13.8719 11.1257 13.6783 10.8774 13.6116L8.56201 12.9846C8.33954 12.9244 8.14944 12.7587 8.06787 12.5237C7.93794 12.1487 8.14308 11.7392 8.51611 11.6038L14.731 9.34888Z",fill:"currentColor"}))),_.createElement("defs",null,_.createElement("filter",{id:"filter0_d_151_34",x:-12.693,y:-7.27227,width:49.1101,height:49.1109,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},_.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),_.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),_.createElement("feOffset",{dy:4.14436}),_.createElement("feGaussianBlur",{stdDeviation:10.3609}),_.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),_.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),_.createElement("feBlend",{mode:"overlay",in2:"BackgroundImageFix",result:"effect1_dropShadow_151_34"}),_.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_151_34",result:"shape"})),_.createElement("clipPath",{id:"clip0_151_34"},_.createElement("rect",{width:25,height:25,fill:"white"})))),iQe=Object.freeze(Object.defineProperty({__proto__:null,default:UO},Symbol.toStringTag,{value:"Module"})),dSe=({as:t=La})=>r.jsx(t,{to:"/atlas",external:!0,onClick:()=>{U.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"atlas"}),U.logEventWithStatsig("Sidebar Click Atlas","chatgpt_sidebar_click_atlas",{gizmo_id:"atlas"})},icon:UO,label:r.jsx(P,{id:"n0YPrC",defaultMessage:"Atlas"})}),uSe=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)});function mSe(){"use forget";const t=H.c(1),e=G(),n=xe(e,"733205176"),s=xe(e,"1767304360");if(!(n&&s))return null;let a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(fSe,{}),t[0]=a):a=t[0],a}function fSe(){const{scheduledAutomations:t}=Lie({enabled:!0,staleTimeMs:1/0}),e=J(),n=ls(),s=KH();return t.length>0?r.jsx(La,{icon:uSe,"data-testid":"schedule-sidebar-button",to:s,active:n.pathname===s,label:e.formatMessage({id:"sidebar.schedulesItem",defaultMessage:"Schedules"})}):null}const VO=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.585 10C16.585 6.3632 13.6368 3.41504 10 3.41504C6.3632 3.41504 3.41504 6.3632 3.41504 10C3.41504 13.6368 6.3632 16.585 10 16.585C13.6368 16.585 16.585 13.6368 16.585 10ZM13.333 11.418L13.4678 11.4316C13.7705 11.4938 13.9979 11.7619 13.998 12.083C13.998 12.4042 13.7706 12.6722 13.4678 12.7344L13.333 12.748H10.833C10.4659 12.7479 10.168 12.4502 10.168 12.083C10.1681 11.716 10.466 11.4181 10.833 11.418H13.333ZM7.65332 12.4258C7.46427 12.7404 7.05603 12.8422 6.74121 12.6533C6.42642 12.4644 6.32391 12.0561 6.5127 11.7412L7.65332 12.4258ZM8.90332 9.6582C9.02956 9.86872 9.02956 10.1313 8.90332 10.3418L7.65332 12.4258L7.08301 12.083L6.5127 11.7412L7.55664 10L6.5127 8.25879L7.08301 7.91699L7.65332 7.57422L8.90332 9.6582ZM6.74121 7.34668C7.05603 7.15779 7.46427 7.25955 7.65332 7.57422L6.5127 8.25879C6.32391 7.94392 6.42642 7.53563 6.74121 7.34668ZM17.915 10C17.915 14.3713 14.3713 17.915 10 17.915C5.62867 17.915 2.08496 14.3713 2.08496 10C2.08496 5.62867 5.62867 2.08496 10 2.08496C14.3713 2.08496 17.915 5.62867 17.915 10Z"})),pSe=Object.freeze(Object.defineProperty({__proto__:null,default:VO},Symbol.toStringTag,{value:"Module"})),gSe=({as:t=La})=>{const e=G(),n=QH(e),s=Poe();return!n||s==="DISABLED"?null:r.jsx(hSe,{children:r.jsx(t,{to:"/codex",external:!0,onClick:()=>{U.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:"codex"}),U.logEventWithStatsig("Sidebar Click Gizmo","chatgpt_sidebar_click_codex",{gizmo_id:"codex"})},icon:VO,label:r.jsx(P,{id:"EFFUeE",defaultMessage:"Codex"})})})};function hSe({children:t}){const e=J(),n=iY();return n&&!n.isLoading&&n.eligible?r.jsx(Vd,{show:!0,side:"right",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",childrenWrapperClassName:"!w-full",announcementKey:s7,title:e.formatMessage({id:"wham.sidebarListItem.nuxTooltip.title",defaultMessage:"Software engineering agent"}),description:e.formatMessage({id:"wham.whamSidebarListItem.writeInCodebase",defaultMessage:"Answers questions, runs code, and drafts PRs."}),onDismiss:n.markAsViewed,children:t}):t}const lQe=t=>{"use forget";const e=H.c(20),{as:n}=t,s=G();let o,a;e[0]!==s?(o=ut(s),a=o==null?void 0:o.hasPaidSubscription(),e[0]=s,e[1]=o,e[2]=a):(o=e[1],a=e[2]);const i=a;let l;e[3]!==s?(l=!Sn()&&JH(s),e[3]=s,e[4]=l):l=e[4];const c=l;if(!o)return null;let d;e[5]!==n||e[6]!==i?(d=i&&r.jsx(gSe,{as:n}),e[5]=n,e[6]=i,e[7]=d):d=e[7];let u;e[8]!==n||e[9]!==c?(u=c&&r.jsx(dSe,{as:n}),e[8]=n,e[9]=c,e[10]=u):u=e[10];let m,f;e[11]!==n?(m=r.jsx(cSe,{as:n}),f=!1,e[11]=n,e[12]=m,e[13]=f):(m=e[12],f=e[13]);let p;e[14]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(mSe,{}),e[14]=p):p=e[14];let g;return e[15]!==d||e[16]!==u||e[17]!==m||e[18]!==f?(g=r.jsxs(r.Fragment,{children:[d,u,m,f,p]}),e[15]=d,e[16]=u,e[17]=m,e[18]=f,e[19]=g):g=e[19],g},_Se="3578245547",xSe="2904126195",ySe="persist-files-to-library",vSe="show-recent-files-dropdown",bSe="double-write-files-to-library";function GO(t,e=!1){Ve(t,xSe,{disableExposureLog:e});const n=Co(t,_Se,{disableExposureLog:e});return{persistFilesToLibrary:n.get(ySe,!1),showRecentFilesDropdown:n.get(vSe,!1),doubleWriteFilesToLibrary:n.get(bSe,!1)}}var tp={},yM;function SSe(){return yM||(yM=1,tp.__esModule=!0,tp.default=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var s=t.name||"",o=(t.type||"").toLowerCase(),a=o.replace(/\/.*$/,"");return n.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?s.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):o===l})}return!0}),tp}var CSe=SSe();const ex=Wn(CSe);function vM(t){return MSe(t)||kSe(t)||HO(t)||wSe()}function wSe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MSe(t){if(Array.isArray(t))return uv(t)}function bM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,s)}return n}function SM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bM(Object(n),!0).forEach(function(s){$O(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function $O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fm(t,e){return ASe(t)||ESe(t,e)||HO(t,e)||TSe()}function TSe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function HO(t,e){if(t){if(typeof t=="string")return uv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uv(t,e)}}function uv(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function ESe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s=[],o=!0,a=!1,i,l;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!(e&&s.length===e));o=!0);}catch(c){a=!0,l=c}finally{try{!o&&n.return!=null&&n.return()}finally{if(a)throw l}}return s}}function ASe(t){if(Array.isArray(t))return t}var ISe=typeof ex=="function"?ex:ex.default,jSe="file-invalid-type",WO="file-too-large",PSe="file-too-small",zO="too-many-files",cQe={FileTooLarge:WO,TooManyFiles:zO},NSe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),s=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:jSe,message:"File type must be ".concat(s)}},CM=function(e){return{code:WO,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},wM=function(e){return{code:PSe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},dQe={code:zO,message:"Too many files"};function RSe(t,e){var n=t.type==="application/x-moz-file"||ISe(t,e);return[n,n?null:NSe(e)]}function LSe(t,e,n){if(Wi(t.size))if(Wi(e)&&Wi(n)){if(t.size>n)return[!1,CM(n)];if(t.size<e)return[!1,wM(e)]}else{if(Wi(e)&&t.size<e)return[!1,wM(e)];if(Wi(n)&&t.size>n)return[!1,CM(n)]}return[!0,null]}function Wi(t){return t!=null}function uQe(t){var e=t.files,n=t.accept,s=t.minSize,o=t.maxSize,a=t.multiple,i=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&i>=1&&e.length>i?!1:e.every(function(c){var d=RSe(c,n),u=fm(d,1),m=u[0],f=LSe(c,s,o),p=fm(f,1),g=p[0],h=l?l(c):null;return m&&g&&!h})}function kM(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function mQe(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function fQe(t){t.preventDefault()}function OSe(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function DSe(t){return t.indexOf("Edge/")!==-1}function pQe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return OSe(t)||DSe(t)}function gQe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(s){for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];return e.some(function(l){return!kM(s)&&l&&l.apply(void 0,[s].concat(a)),kM(s)})}}function hQe(){return"showOpenFilePicker"in window}function _Qe(t){if(Wi(t)){var e=Object.entries(t).filter(function(n){var s=fm(n,2),o=s[0],a=s[1],i=!0;return qO(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(a)||!a.every(YO))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,s){var o=fm(s,2),a=o[0],i=o[1];return SM(SM({},n),{},$O({},a,i))},{});return[{description:"Files",accept:e}]}return t}function xQe(t){if(Wi(t))return Object.entries(t).reduce(function(e,n){var s=fm(n,2),o=s[0],a=s[1];return[].concat(vM(e),[o],vM(a))},[]).filter(function(e){return qO(e)||YO(e)}).join(",")}function yQe(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function vQe(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function qO(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function YO(t){return/^.*\.[\w]+$/.test(t)}const bQe=({className:t})=>r.jsxs(As,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:t,children:[r.jsx("g",{clipPath:"url(#clip0_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),r.jsx("g",{clipPath:"url(#clip1_3605_64419)",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),r.jsxs("defs",{children:[r.jsx("clipPath",{id:"clip0_3605_64419",children:r.jsx("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),r.jsx("clipPath",{id:"clip1_3605_64419",children:r.jsx("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]}),SQe=({className:t})=>r.jsxs(As,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),r.jsx("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),CQe=({className:t})=>r.jsxs(As,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),r.jsx("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),wQe=({className:t})=>r.jsxs(As,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#0088FF"}),r.jsx("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),kQe=({className:t})=>r.jsxs(As,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:t,children:[r.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),r.jsx("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),FSe="webp",BSe=222,USe=160,VSe="srgb",GSe=3,$Se="uchar",HSe=72,WSe=!1,zSe=8,qSe=!1,YSe=!1,ZSe="/assets/example_bg_1-grdr084h.webp",KSe={format:FSe,width:BSe,height:USe,space:VSe,channels:GSe,depth:$Se,density:HSe,isProgressive:WSe,paletteBitDepth:zSe,hasProfile:qSe,hasAlpha:YSe,src:ZSe},QSe="webp",JSe=222,XSe=160,e3e="srgb",t3e=3,n3e="uchar",s3e=72,o3e=!1,a3e=8,r3e=!1,i3e=!1,l3e="/assets/example_bg_2-bh3fby76.webp",c3e={format:QSe,width:JSe,height:XSe,space:e3e,channels:t3e,depth:n3e,density:s3e,isProgressive:o3e,paletteBitDepth:a3e,hasProfile:r3e,hasAlpha:i3e,src:l3e},d3e="webp",u3e=222,m3e=160,f3e="srgb",p3e=3,g3e="uchar",h3e=72,_3e=!1,x3e=8,y3e=!1,v3e=!1,b3e="/assets/example_bg_3-ogafarpd.webp",S3e={format:d3e,width:u3e,height:m3e,space:f3e,channels:p3e,depth:g3e,density:h3e,isProgressive:_3e,paletteBitDepth:x3e,hasProfile:y3e,hasAlpha:v3e,src:b3e},C3e=j(()=>I(()=>import("./itwig1mb68mn0y5d.js"),__vite__mapDeps([342,1])),{loading:t=>L(t)}),w3e=j(()=>I(()=>import("./mxwy4kmdaryrewzb.js").then(t=>t._),__vite__mapDeps([43,1])),{loading:t=>L(t)}),k3e=j(()=>I(()=>import("./zzvv5yubwwtkudan.js").then(t=>t._),__vite__mapDeps([343,1])),{loading:t=>L(t)}),M3e=j(()=>I(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([41,1])),{loading:t=>L(t)}),T3e=j(()=>I(()=>Promise.resolve().then(()=>H1),void 0),{loading:t=>L(t)});function E3e({usage:t}){const e={work:{icon:C3e,color:"#35AE47"},school:{icon:T3e,color:"#E937D1"},personalTasks:{icon:w3e,color:"#EA8444"},funAndEntertainment:{icon:k3e,color:"#6C71FF"},justCurious:{icon:M3e,color:"#FFCC00"}},n=e[t].icon,s=e[t].color;return r.jsx(n,{className:"icon",style:{color:s}})}function MQe({clientThreadId:t}){const e=J(),n=X2({clientThreadId:t});return _.useEffect(()=>{We.logEvent("chatgpt_convo_onboarding_usage_chips_shown")},[]),r.jsx(dn,{mode:"wait",children:r.jsx(Xe.div,{className:"-mx-6 mt-2 flex flex-wrap gap-2 px-6",initial:{opacity:0},animate:{opacity:1,transition:{delay:.2,ease:"easeInOut"}},exit:{opacity:0,transition:{ease:"easeInOut"}},children:["school","work","personalTasks","funAndEntertainment","justCurious"].map(s=>r.jsxs("button",{className:"border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary inline-flex h-[42px] items-center justify-start gap-2 rounded-[25px] border px-4 py-3",onClick:o=>{n({sourceEvent:o,stepPrompt:e.formatMessage(Jc["".concat(s,"Prompt")]),messageMetadata:{onboarding:{main_usages:[{usage:s}]},is_starter_prompt:!0,suggestion_type:ke.Starter}}),We.logEvent("chatgpt_convo_onboarding_usage_chip_clicked",null,{usage:s})},children:[r.jsx("div",{"data-svg-wrapper":!0,className:"relative",children:r.jsx(E3e,{usage:s})}),r.jsx("div",{className:"font-['SF Pro'] text-token-text-primary text-[13px] leading-[18px] font-normal opacity-90",children:e.formatMessage(Jc[s])})]},s))})})}function TQe({clientThreadId:t,examples:e}){const n=X2({clientThreadId:t}),s=[KSe,c3e,S3e],o=J();return _.useEffect(()=>{We.logEvent("chatgpt_convo_onboarding_examples_shown")},[]),r.jsx(dn,{mode:"wait",children:r.jsxs("div",{children:[r.jsx(Xe.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeInOut"},className:"text-token-text-primary text-base",children:o.formatMessage(Jc.tryAnExample)}),r.jsx("ul",{className:"-mx-6 flex list-none flex-nowrap gap-6 overflow-auto px-6 py-4",children:e.map((a,i)=>r.jsx(Xe.li,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:(i+1)*.2,duration:.3},children:r.jsxs("button",{className:"bg-token-main-surface-primary outline-token-border-xlight hover:shadow-token-border-default inline-flex h-60 w-[222px] flex-col items-center justify-start overflow-hidden rounded-2xl outline transition-all duration-300 hover:shadow-lg",onClick:l=>{n({sourceEvent:l,stepPrompt:a.example,messageMetadata:{onboarding:{triggered_tools:[a.feature]},is_starter_prompt:!0,suggestion_type:ke.Starter}}),We.logEvent("chatgpt_convo_onboarding_example_clicked",null,{tool:a.feature})},children:[r.jsx("img",{src:s[i%s.length].src,className:"h-[160px] w-full object-cover",alt:o.formatMessage({id:"chatgpt.new-onboarding.example-prompt",defaultMessage:"Example prompt"})}),r.jsx("div",{className:"inline-flex h-20 w-full gap-1 p-4",children:r.jsx("div",{className:"text-token-text-primary line-clamp-2 shrink grow basis-0 text-start text-base leading-normal",title:a.title,children:a.title})})]})},a.feature))})]})})}function A3e({clientThreadId:t,children:e}){const{isEligible:n,markAsViewed:s}=Xj(t),o=J();return _.useEffect(()=>{n&&yn.showAnnouncementTooltipExclusively(Ye.hasSeenFilePickerNuxTooltip,!0)},[n]),n?r.jsx(Vd,{announcementKey:Ye.hasSeenFilePickerNuxTooltip,show:!0,side:"top",align:"start",theme:"bright",dismissOnOutsideClick:!0,badge:"none",title:o.formatMessage(Jc.tryUploadingAFile),description:o.formatMessage(Jc.uploadFileExample),onDismiss:s,sideOffset:0,children:e}):e}var mi=(t=>(t.ModelNotSupported="modelNotSupported",t.HasReachedMaxFiles="hasReachedMaxFiles",t.RateLimitReached="rateLimitReached",t))(mi||{}),p3=(t=>(t.General="general",t.ModelNotSupported="modelNotSupported",t.GizmoNotSupported="gizmoNotSupported",t.HasAttachedFiles="hasAttachedFiles",t))(p3||{});function _o(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function ZO(t,e=[]){let n=[];function s(a,i){const l=_.createContext(i),c=n.length;n=[...n,i];const d=m=>{var b;const y=m,{scope:f,children:p}=y,g=Me(y,["scope","children"]),h=((b=f==null?void 0:f[t])==null?void 0:b[c])||l,x=_.useMemo(()=>g,Object.values(g));return r.jsx(h.Provider,{value:x,children:p})};d.displayName=a+"Provider";function u(m,f){var h;const p=((h=f==null?void 0:f[t])==null?void 0:h[c])||l,g=_.useContext(p);if(g)return g;if(i!==void 0)return i;throw new Error("`".concat(m,"` must be used within `").concat(a,"`"))}return[d,u]}const o=()=>{const a=n.map(i=>_.createContext(i));return function(l){const c=(l==null?void 0:l[t])||a;return _.useMemo(()=>({["__scope".concat(t)]:B(w({},l),{[t]:c})}),[l,c])}};return o.scopeName=t,[s,I3e(o,...e)]}function I3e(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const i=s.reduce((l,{useScope:c,scopeName:d})=>{const m=c(a)["__scope".concat(d)];return w(w({},l),m)},{});return _.useMemo(()=>({["__scope".concat(e.scopeName)]:i}),[i])}};return n.scopeName=e.scopeName,n}var vl=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},j3e=KV[" useInsertionEffect ".trim().toString()]||vl;function P3e({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[o,a,i]=N3e({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:o;{const u=_.useRef(t!==void 0);_.useEffect(()=>{const m=u.current;if(m!==l){const f=m?"controlled":"uncontrolled",p=l?"controlled":"uncontrolled";console.warn("".concat(s," is changing from ").concat(f," to ").concat(p,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}u.current=l},[l,s])}const d=_.useCallback(u=>{var m;if(l){const f=R3e(u)?u(t):u;f!==t&&((m=i.current)==null||m.call(i,f))}else a(u)},[l,t,a,i]);return[c,d]}function N3e({defaultProp:t,onChange:e}){const[n,s]=_.useState(t),o=_.useRef(n),a=_.useRef(e);return j3e(()=>{a.current=e},[e]),_.useEffect(()=>{var i;o.current!==n&&((i=a.current)==null||i.call(a,n),o.current=n)},[n,o]),[n,s,a]}function R3e(t){return typeof t=="function"}var L3e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vl=L3e.reduce((t,e)=>{const n=XH("Primitive.".concat(e)),s=_.forwardRef((o,a)=>{const d=o,{asChild:i}=d,l=Me(d,["asChild"]),c=i?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,B(w({},l),{ref:a}))});return s.displayName="Primitive.".concat(e),B(w({},t),{[e]:s})},{});function O3e(t,e){t&&fi.flushSync(()=>t.dispatchEvent(e))}var D3e="Arrow",KO=_.forwardRef((t,e)=>{const i=t,{children:n,width:s=10,height:o=5}=i,a=Me(i,["children","width","height"]);return r.jsx(Vl.svg,B(w({},a),{ref:e,width:s,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})}))});KO.displayName=D3e;var F3e=KO;function D1(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function B3e(t){const[e,n]=_.useState(void 0);return vl(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=t.offsetWidth,l=t.offsetHeight;n({width:i,height:l})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}var g3="Popper",[QO,JO]=ZO(g3),[U3e,XO]=QO(g3),eD=t=>{const{__scopePopper:e,children:n}=t,[s,o]=_.useState(null);return r.jsx(U3e,{scope:e,anchor:s,onAnchorChange:o,children:n})};eD.displayName=g3;var tD="PopperAnchor",nD=_.forwardRef((t,e)=>{const c=t,{__scopePopper:n,virtualRef:s}=c,o=Me(c,["__scopePopper","virtualRef"]),a=XO(tD,n),i=_.useRef(null),l=Ad(e,i);return _.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||i.current)}),s?null:r.jsx(Vl.div,B(w({},o),{ref:l}))});nD.displayName=tD;var h3="PopperContent",[V3e,G3e]=QO(h3),sD=_.forwardRef((t,e)=>{var ae,ce,ye,fe,Ce,ee,te,le;const ie=t,{__scopePopper:n,side:s="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g}=ie,h=Me(ie,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),x=XO(h3,n),[y,b]=_.useState(null),v=Ad(e,re=>b(re)),[S,C]=_.useState(null),k=B3e(S),M=(ae=k==null?void 0:k.width)!=null?ae:0,T=(ce=k==null?void 0:k.height)!=null?ce:0,E=s+(a!=="center"?"-"+a:""),A=typeof u=="number"?u:w({top:0,right:0,bottom:0,left:0},u),N=Array.isArray(d)?d:[d],R=N.length>0,O={padding:A,boundary:N.filter(H3e),altBoundary:R},{refs:D,floatingStyles:F,placement:V,isPositioned:z,middlewareData:$}=eW({strategy:"fixed",placement:E,whileElementsMounted:(...re)=>lW(...re,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[tW({mainAxis:o+T,alignmentAxis:i}),c&&nW(w({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?iW():void 0},O)),c&&sW(w({},O)),oW(B(w({},O),{apply:({elements:re,rects:ve,availableWidth:_e,availableHeight:we})=>{const{width:De,height:ge}=ve.reference,Ne=re.floating.style;Ne.setProperty("--radix-popper-available-width","".concat(_e,"px")),Ne.setProperty("--radix-popper-available-height","".concat(we,"px")),Ne.setProperty("--radix-popper-anchor-width","".concat(De,"px")),Ne.setProperty("--radix-popper-anchor-height","".concat(ge,"px"))}})),S&&aW({element:S,padding:l}),W3e({arrowWidth:M,arrowHeight:T}),f&&rW(w({strategy:"referenceHidden"},O))]}),[Y,Z]=rD(V),Q=D1(g);vl(()=>{z&&(Q==null||Q())},[z,Q]);const q=(ye=$.arrow)==null?void 0:ye.x,X=(fe=$.arrow)==null?void 0:fe.y,oe=((Ce=$.arrow)==null?void 0:Ce.centerOffset)!==0,[se,de]=_.useState();return vl(()=>{y&&de(window.getComputedStyle(y).zIndex)},[y]),r.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:w(B(w({},F),{transform:z?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(ee=$.transformOrigin)==null?void 0:ee.x,(te=$.transformOrigin)==null?void 0:te.y].join(" ")}),((le=$.hide)==null?void 0:le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:t.dir,children:r.jsx(V3e,{scope:n,placedSide:Y,onArrowChange:C,arrowX:q,arrowY:X,shouldHideArrow:oe,children:r.jsx(Vl.div,B(w({"data-side":Y,"data-align":Z},h),{ref:v,style:B(w({},h.style),{animation:z?void 0:"none"})}))})})});sD.displayName=h3;var oD="PopperArrow",$3e={top:"bottom",right:"left",bottom:"top",left:"right"},aD=_.forwardRef(function(e,n){const l=e,{__scopePopper:s}=l,o=Me(l,["__scopePopper"]),a=G3e(oD,s),i=$3e[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(F3e,B(w({},o),{ref:n,style:B(w({},o.style),{display:"block"})}))})});aD.displayName=oD;function H3e(t){return t!==null}var W3e=t=>({name:"transformOrigin",options:t,fn(e){var x,y,b,v,S;const{placement:n,rects:s,middlewareData:o}=e,i=((x=o.arrow)==null?void 0:x.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[d,u]=rD(n),m={start:"0%",center:"50%",end:"100%"}[u],f=((b=(y=o.arrow)==null?void 0:y.x)!=null?b:0)+l/2,p=((S=(v=o.arrow)==null?void 0:v.y)!=null?S:0)+c/2;let g="",h="";return d==="bottom"?(g=i?m:"".concat(f,"px"),h="".concat(-c,"px")):d==="top"?(g=i?m:"".concat(f,"px"),h="".concat(s.floating.height+c,"px")):d==="right"?(g="".concat(-c,"px"),h=i?m:"".concat(p,"px")):d==="left"&&(g="".concat(s.floating.width+c,"px"),h=i?m:"".concat(p,"px")),{data:{x:g,y:h}}}});function rD(t){const[e,n="center"]=t.split("-");return[e,n]}var z3e=eD,q3e=nD,Y3e=sD,Z3e=aD,K3e="Portal",iD=_.forwardRef((t,e)=>{var c;const l=t,{container:n}=l,s=Me(l,["container"]),[o,a]=_.useState(!1);vl(()=>a(!0),[]);const i=n||o&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?L6.createPortal(r.jsx(Vl.div,B(w({},s),{ref:e})),i):null});iD.displayName=K3e;function Q3e(t,e){return _.useReducer((n,s)=>{const o=e[n][s];return o!=null?o:n},t)}var _3=t=>{const{present:e,children:n}=t,s=J3e(e),o=typeof n=="function"?n({present:s.isPresent}):_.Children.only(n),a=Ad(s.ref,X3e(o));return typeof n=="function"||s.isPresent?_.cloneElement(o,{ref:a}):null};_3.displayName="Presence";function J3e(t){const[e,n]=_.useState(),s=_.useRef(null),o=_.useRef(t),a=_.useRef("none"),i=t?"mounted":"unmounted",[l,c]=Q3e(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const d=np(s.current);a.current=l==="mounted"?d:"none"},[l]),vl(()=>{const d=s.current,u=o.current;if(u!==t){const f=a.current,p=np(d);t?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,c]),vl(()=>{var d;if(e){let u;const m=(d=e.ownerDocument.defaultView)!=null?d:window,f=g=>{const x=np(s.current).includes(g.animationName);if(g.target===e&&x&&(c("ANIMATION_END"),!o.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},p=g=>{g.target===e&&(a.current=np(s.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{m.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:_.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function np(t){return(t==null?void 0:t.animationName)||"none"}function X3e(t){var s,o;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function eCe(t,e=globalThis==null?void 0:globalThis.document){const n=D1(t);_.useEffect(()=>{const s=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var tCe="DismissableLayer",mv="dismissableLayer.update",nCe="dismissableLayer.pointerDownOutside",sCe="dismissableLayer.focusOutside",MM,lD=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cD=_.forwardRef((t,e)=>{var T;const M=t,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i,onDismiss:l}=M,c=Me(M,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),d=_.useContext(lD),[u,m]=_.useState(null),f=(T=u==null?void 0:u.ownerDocument)!=null?T:globalThis==null?void 0:globalThis.document,[,p]=_.useState({}),g=Ad(e,E=>m(E)),h=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=h.indexOf(x),b=u?h.indexOf(u):-1,v=d.layersWithOutsidePointerEventsDisabled.size>0,S=b>=y,C=rCe(E=>{const A=E.target,N=[...d.branches].some(R=>R.contains(A));!S||N||(o==null||o(E),i==null||i(E),E.defaultPrevented||l==null||l())},f),k=iCe(E=>{const A=E.target;[...d.branches].some(R=>R.contains(A))||(a==null||a(E),i==null||i(E),E.defaultPrevented||l==null||l())},f);return eCe(E=>{b===d.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},f),_.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(MM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),TM(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=MM)}},[u,f,n,d]),_.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),TM())},[u,d]),_.useEffect(()=>{const E=()=>p({});return document.addEventListener(mv,E),()=>document.removeEventListener(mv,E)},[]),r.jsx(Vl.div,B(w({},c),{ref:g,style:w({pointerEvents:v?S?"auto":"none":void 0},t.style),onFocusCapture:_o(t.onFocusCapture,k.onFocusCapture),onBlurCapture:_o(t.onBlurCapture,k.onBlurCapture),onPointerDownCapture:_o(t.onPointerDownCapture,C.onPointerDownCapture)}))});cD.displayName=tCe;var oCe="DismissableLayerBranch",aCe=_.forwardRef((t,e)=>{const n=_.useContext(lD),s=_.useRef(null),o=Ad(e,s);return _.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(Vl.div,B(w({},t),{ref:o}))});aCe.displayName=oCe;function rCe(t,e=globalThis==null?void 0:globalThis.document){const n=D1(t),s=_.useRef(!1),o=_.useRef(()=>{});return _.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){dD(nCe,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=c,e.addEventListener("click",o.current,{once:!0})):c()}else e.removeEventListener("click",o.current);s.current=!1},i=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function iCe(t,e=globalThis==null?void 0:globalThis.document){const n=D1(t),s=_.useRef(!1);return _.useEffect(()=>{const o=a=>{a.target&&!s.current&&dD(sCe,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function TM(){const t=new CustomEvent(mv);document.dispatchEvent(t)}function dD(t,e,n,{discrete:s}){const o=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),s?O3e(o,a):o.dispatchEvent(a)}var tx,F1="HoverCard",[uD]=ZO(F1,[JO]),B1=JO(),[lCe,U1]=uD(F1),mD=t=>{const{__scopeHoverCard:e,children:n,open:s,defaultOpen:o,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=t,c=B1(e),d=_.useRef(0),u=_.useRef(0),m=_.useRef(!1),f=_.useRef(!1),[p,g]=P3e({prop:s,defaultProp:o!=null?o:!1,onChange:a,caller:F1}),h=_.useCallback(()=>{clearTimeout(u.current),d.current=window.setTimeout(()=>g(!0),i)},[i,g]),x=_.useCallback(()=>{clearTimeout(d.current),!m.current&&!f.current&&(u.current=window.setTimeout(()=>g(!1),l))},[l,g]),y=_.useCallback(()=>g(!1),[g]);return _.useEffect(()=>()=>{clearTimeout(d.current),clearTimeout(u.current)},[]),r.jsx(lCe,{scope:e,open:p,onOpenChange:g,onOpen:h,onClose:x,onDismiss:y,hasSelectionRef:m,isPointerDownOnContentRef:f,children:r.jsx(z3e,B(w({},c),{children:n}))})};mD.displayName=F1;var fD="HoverCardTrigger",pD=_.forwardRef((t,e)=>{const i=t,{__scopeHoverCard:n}=i,s=Me(i,["__scopeHoverCard"]),o=U1(fD,n),a=B1(n);return r.jsx(q3e,B(w({asChild:!0},a),{children:r.jsx(Vl.a,B(w({"data-state":o.open?"open":"closed"},s),{ref:e,onPointerEnter:_o(t.onPointerEnter,Ug(o.onOpen)),onPointerLeave:_o(t.onPointerLeave,Ug(o.onClose)),onFocus:_o(t.onFocus,o.onOpen),onBlur:_o(t.onBlur,o.onClose),onTouchStart:_o(t.onTouchStart,l=>l.preventDefault())}))}))});pD.displayName=fD;var x3="HoverCardPortal",[cCe,dCe]=uD(x3,{forceMount:void 0}),gD=t=>{const{__scopeHoverCard:e,forceMount:n,children:s,container:o}=t,a=U1(x3,e);return r.jsx(cCe,{scope:e,forceMount:n,children:r.jsx(_3,{present:n||a.open,children:r.jsx(iD,{asChild:!0,container:o,children:s})})})};gD.displayName=x3;var Bg="HoverCardContent",hD=_.forwardRef((t,e)=>{const n=dCe(Bg,t.__scopeHoverCard),i=t,{forceMount:s=n.forceMount}=i,o=Me(i,["forceMount"]),a=U1(Bg,t.__scopeHoverCard);return r.jsx(_3,{present:s||a.open,children:r.jsx(uCe,B(w({"data-state":a.open?"open":"closed"},o),{onPointerEnter:_o(t.onPointerEnter,Ug(a.onOpen)),onPointerLeave:_o(t.onPointerLeave,Ug(a.onClose)),ref:e}))})});hD.displayName=Bg;var uCe=_.forwardRef((t,e)=>{const g=t,{__scopeHoverCard:n,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:a,onInteractOutside:i}=g,l=Me(g,["__scopeHoverCard","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"]),c=U1(Bg,n),d=B1(n),u=_.useRef(null),m=Ad(e,u),[f,p]=_.useState(!1);return _.useEffect(()=>{if(f){const h=document.body;return tx=h.style.userSelect||h.style.webkitUserSelect,h.style.userSelect="none",h.style.webkitUserSelect="none",()=>{h.style.userSelect=tx,h.style.webkitUserSelect=tx}}},[f]),_.useEffect(()=>{if(u.current){const h=()=>{p(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var y;((y=document.getSelection())==null?void 0:y.toString())!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",h),()=>{document.removeEventListener("pointerup",h),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),_.useEffect(()=>{u.current&&pCe(u.current).forEach(x=>x.setAttribute("tabindex","-1"))}),r.jsx(cD,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:_o(a,h=>{h.preventDefault()}),onDismiss:c.onDismiss,children:r.jsx(Y3e,B(w(w({},d),l),{onPointerDown:_o(l.onPointerDown,h=>{h.currentTarget.contains(h.target)&&p(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:m,style:B(w({},l.style),{userSelect:f?"text":void 0,WebkitUserSelect:f?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"})}))})}),mCe="HoverCardArrow",fCe=_.forwardRef((t,e)=>{const a=t,{__scopeHoverCard:n}=a,s=Me(a,["__scopeHoverCard"]),o=B1(n);return r.jsx(Z3e,B(w(w({},o),s),{ref:e}))});fCe.displayName=mCe;function Ug(t){return e=>e.pointerType==="touch"?void 0:t()}function pCe(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)e.push(n.currentNode);return e}var gCe=mD,hCe=pD,_Ce=gD,EM=hD;const _D=({clientThreadId:t,rateLimitPopup:e,children:n,disabled:s,highlightTooltip:o=!1,disabledReason:a,currentModelName:i,label:l,secondaryLabel:c})=>{const d=J(),u=Ue(t,me.getIsNewConversation),m=G(),f=ut(m),p=b=>{var v;e!=null&&b&&U.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:(v=f==null?void 0:f.planType)!=null?v:"unknown"})},g=Nd(_t.signUpButtonText),{isEligible:h}=Xj(t),x=!!e,y=!s&&h;return x?r.jsxs(gCe,{openDelay:0,onOpenChange:p,children:[r.jsx(hCe,{asChild:!0,children:n}),r.jsx(_Ce,{children:r.jsx(YA,{children:r.jsx(EM,{role:"dialog","aria-labelledby":"rate-limit-popover-title",children:r.jsx(Nh,{$as:EM,side:"bottom",sideOffset:6,align:"start",alignOffset:-6,className:"max-w-[300px]",children:r.jsx(xCe,{isNewConversation:u,rateLimitPopup:e,signUpButtonText:g})})})})})]}):y?r.jsx(A3e,{clientThreadId:t,children:n}):r.jsx(kt,{label:!s&&l?l:V1(m,d,s,a,i),secondaryLabel:c,labelOrientation:"horizontal",className:"flex",contentClassName:o?void 0:"touch:hidden",open:o?!0:void 0,side:"bottom",children:n})};function V1(t,e,n,s,o){const a=ut(t),i=a!=null,l=Xp(t);return n?s===mi.ModelNotSupported&&o!=null?e.formatMessage({id:"xPEzDr",defaultMessage:"Add files disabled for {modelName}"},{modelName:o}):s===mi.HasReachedMaxFiles?i?e.formatMessage({id:"TEBczg",defaultMessage:"Cannot add more files"}):e.formatMessage({id:"Y6o+nN",defaultMessage:"Cannot add more photos"}):s===mi.RateLimitReached?i?a.hasPaidSubscription()?e.formatMessage({id:"W/ug8Z",defaultMessage:"Upload limit reached"}):l?e.formatMessage({id:"j6nN5P",defaultMessage:"Upgrade to Go for more uploads"}):e.formatMessage({id:"GXsPqr",defaultMessage:"Get Plus for more uploads"}):e.formatMessage({id:"RHdQBI",defaultMessage:"Log in to add more photos"}):i?e.formatMessage({id:"MeW0HZ",defaultMessage:"Add files is unavailable"}):e.formatMessage({id:"bvbDsP",defaultMessage:"Add photos is unavailable"}):i?e.formatMessage({id:"composer.add.label",defaultMessage:"Add photos & files"}):e.formatMessage({id:"wNvwwm",defaultMessage:"Add photos"})}const xCe=t=>{"use forget";var D,F,V,z;const e=H.c(43),{isNewConversation:n,rateLimitPopup:s,signUpButtonText:o}=t,a=n===void 0?!1:n,i=G();let l;e[0]!==i?(l=Nl(i),e[0]=i,e[1]=l):l=e[1];const c=l,d=Yo();if(s==null)return null;const{call_to_action:u,description:m}=s;let f;e[2]!==u?(f=(D=u==null?void 0:u.includes(Wt.UPGRADE_TO_GO))!=null?D:!1,e[2]=u,e[3]=f):f=e[3];const p=f;let g;e[4]!==u?(g=(F=u==null?void 0:u.includes(Wt.GET_GO_TRIAL))!=null?F:!1,e[4]=u,e[5]=g):g=e[5];const h=g;let x;e[6]!==u?(x=(V=u==null?void 0:u.includes(Wt.GET_PLUS))!=null?V:!1,e[6]=u,e[7]=x):x=e[7];const y=x;let b;e[8]!==u?(b=(z=u==null?void 0:u.includes(Wt.AUTHENTICATE))!=null?z:!1,e[8]=u,e[9]=b):b=e[9];const v=b;let S;e[10]!==m||e[11]!==h||e[12]!==p?(S=m!=null?m:r.jsx(P,B(w({},yCe.defaultDescription),{values:{upgradePlanType:p||h?"Go":"Plus"}})),e[10]=m,e[11]=h,e[12]=p,e[13]=S):S=e[13];const C=S,k=v&&d;let M;e[14]!==C?(M=r.jsx("div",{className:"mb-3",id:"rate-limit-popover-title",children:C}),e[14]=C,e[15]=M):M=e[15];let T;e[16]!==a||e[17]!==h?(T=h?r.jsx(nx,{isNewConversation:a,message:_t.tryGoTrial,upgradePlanType:Je.GO}):null,e[16]=a,e[17]=h,e[18]=T):T=e[18];let E;e[19]!==a||e[20]!==p?(E=p?r.jsx(nx,{isNewConversation:a,message:_t.upgradeToGo,upgradePlanType:Je.GO}):null,e[19]=a,e[20]=p,e[21]=E):E=e[21];let A;e[22]!==i||e[23]!==a||e[24]!==y?(A=y?r.jsx(nx,{isNewConversation:a,message:Dm(i),upgradePlanType:Je.PLUS}):null,e[22]=i,e[23]=a,e[24]=y,e[25]=A):A=e[25];let N;e[26]!==i||e[27]!==c||e[28]!==v||e[29]!==o?(N=v?r.jsx(he,{color:"primary",onClick:()=>{Kt(i,{fallbackScreenHint:c?"login":"signup",callback:$=>{c?U.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:$},Ct.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):U.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:$},Ct.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(P,w({},_t.logInButtonText)):r.jsx(P,w({},o))}):null,e[26]=i,e[27]=c,e[28]=v,e[29]=o,e[30]=N):N=e[30];let R;e[31]!==i||e[32]!==c||e[33]!==k||e[34]!==o?(R=k?r.jsx(he,{color:"secondary",className:"ms-2",onClick:()=>{Kt(i,{fallbackScreenHint:c?"signup":"login",callback:$=>{c?U.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:$},Ct.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP):U.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:$},Ct.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},children:c?r.jsx(P,w({},o)):r.jsx(P,w({},_t.logInButtonText))}):null,e[31]=i,e[32]=c,e[33]=k,e[34]=o,e[35]=R):R=e[35];let O;return e[36]!==E||e[37]!==A||e[38]!==N||e[39]!==R||e[40]!==M||e[41]!==T?(O=r.jsxs("div",{className:"text-token-text-primary p-2 text-sm",children:[M,T,E,A,N,R]}),e[36]=E,e[37]=A,e[38]=N,e[39]=R,e[40]=M,e[41]=T,e[42]=O):O=e[42],O},nx=t=>{"use forget";const e=H.c(12),{isNewConversation:n,message:s,upgradePlanType:o}=t,a=G();let i;e[0]!==a?(i=ut(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=at();let d;e[2]!==(l==null?void 0:l.planType)||e[3]!==n||e[4]!==c||e[5]!==o?(d=()=>{var f,p;gn(c,"Rate limited file upload popover"),U.logRateLimitUpgradePlanButtonClicked({hard_block_reason:"",is_hard_block:!1,is_new_conversation:n,location:"popover",plan_type:(f=l==null?void 0:l.planType)!=null?f:"unknown",type:"file_upload",upgrade_plan_tye:o}),U.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"popover",plan_type:(p=l==null?void 0:l.planType)!=null?p:"unknown",is_hard_block:!1,is_new_conversation:n,hard_block_reason:""})},e[2]=l==null?void 0:l.planType,e[3]=n,e[4]=c,e[5]=o,e[6]=d):d=e[6];let u;e[7]!==s?(u=r.jsx(P,w({},s)),e[7]=s,e[8]=u):u=e[8];let m;return e[9]!==d||e[10]!==u?(m=r.jsx(he,{size:"small",color:"secondary",onClick:d,children:u}),e[9]=d,e[10]=u,e[11]=m):m=e[11],m},yCe=be({defaultDescription:{id:"mMIVYZ",defaultMessage:"You've reached your daily upload limit. Get ChatGPT {upgradePlanType} to unlock more."}}),xD=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.33496 16.5V10.665H3.5C3.13273 10.665 2.83496 10.3673 2.83496 10C2.83496 9.63273 3.13273 9.33496 3.5 9.33496H9.33496V3.5C9.33496 3.13273 9.63273 2.83496 10 2.83496C10.3673 2.83496 10.665 3.13273 10.665 3.5V9.33496H16.5L16.6338 9.34863C16.9369 9.41057 17.165 9.67857 17.165 10C17.165 10.3214 16.9369 10.5894 16.6338 10.6514L16.5 10.665H10.665V16.5C10.665 16.8673 10.3673 17.165 10 17.165C9.63273 17.165 9.33496 16.8673 9.33496 16.5Z"})),cf=Object.freeze(Object.defineProperty({__proto__:null,default:xD},Symbol.toStringTag,{value:"Module"}));var sx,AM;function vCe(){if(AM)return sx;AM=1;var t=Math.floor,e=Math.random;function n(s,o){return s+t(e()*(o-s+1))}return sx=n,sx}var ox,IM;function yD(){if(IM)return ox;IM=1;var t=vCe();function e(n,s){var o=-1,a=n.length,i=a-1;for(s=s===void 0?a:s;++o<s;){var l=t(o,i),c=n[l];n[l]=n[o],n[o]=c}return n.length=s,n}return ox=e,ox}var ax,jM;function bCe(){if(jM)return ax;jM=1;var t=KA(),e=yD();function n(s){return e(t(s))}return ax=n,ax}var rx,PM;function SCe(){if(PM)return rx;PM=1;var t=tA();function e(n,s){return t(s,function(o){return n[o]})}return rx=e,rx}var ix,NM;function CCe(){if(NM)return ix;NM=1;var t=SCe(),e=cW();function n(s){return s==null?[]:t(s,e(s))}return ix=n,ix}var lx,RM;function wCe(){if(RM)return lx;RM=1;var t=yD(),e=CCe();function n(s){return t(e(s))}return lx=n,lx}var cx,LM;function kCe(){if(LM)return cx;LM=1;var t=bCe(),e=wCe(),n=uh();function s(o){var a=n(o)?t:e;return a(o)}return cx=s,cx}var MCe=kCe();const TCe=Wn(MCe),ECe=j(()=>I(()=>import("./jl0gmzdyiwz0e04r.js").then(t=>t._),__vite__mapDeps([344,1])),{loading:t=>L(t)}),ACe=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)}),ICe=j(()=>I(()=>import("./j4okl08ry9q28iod.js").then(t=>t._),__vite__mapDeps([148,1])),{loading:t=>L(t)}),jCe=j(()=>I(()=>Promise.resolve().then(()=>tB),void 0),{loading:t=>L(t)}),df=xs(t=>{const e=Qe(!1),n=Qe(!1),s=m9(t),o=It(()=>n()&&s.anySheetOpen$()),a=Sm(Le.ComposerMenuSheetBounced,()=>!1),i=It(()=>e()||o());return{hasBounced$:a,isSheetVisible$:i,isSheetOpen$:e,keepSheetOpen$:n}}),PCe=t=>{"use forget";const e=H.c(27),{onCloseAutoFocus:n,children:s,items:o,fileUploadRateLimited:a,mode:i}=t,l=i===void 0?"dropdown":i,c=G(),d=ue(Ih);let u;e[0]!==c?(u=df(c),e[0]=c,e[1]=u):u=e[1];const m=u,{isSheetOpen$:f,keepSheetOpen$:p}=m,g=ue(f);let h;e[2]!==c?(h=Ve(c,"3081064739").get("detent-size","370px"),e[2]=c,e[3]=h):h=e[3];const x=h;let y;e[4]!==l?(y=l==="sheet"?{behavior:"history",sheetName:"composer-plus-menu"}:{},e[4]=l,e[5]=y):y=e[5];const b=y,v=!d;let S;e[6]!==x?(S=x===""?void 0:[x],e[6]=x,e[7]=S):S=e[7];let C;e[8]!==c||e[9]!==a||e[10]!==p||e[11]!==l||e[12]!==m.isSheetOpen$?(C=T=>{ba(()=>{m.isSheetOpen$.set(T),T&&p.set(!1)}),T?(GO(c,!1),Ve(c,"1092897457").get("is_tatertot_enabled",!0),U.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",a?{file_upload_disabled_reason:"rate_limit",mode:l}:{mode:l})):l==="sheet"&&U.logEventWithStatsig("Composer: Close Plus Menu","chatgpt_web_composer_plus_menu_close",{mode:l})},e[8]=c,e[9]=a,e[10]=p,e[11]=l,e[12]=m.isSheetOpen$,e[13]=C):C=e[13];let k;e[14]!==o||e[15]!==n?(k=r.jsx(K.Portal,{children:r.jsx(NCe,{onCloseAutoFocus:n,children:o})}),e[14]=o,e[15]=n,e[16]=k):k=e[16];let M;return e[17]!==s||e[18]!==b||e[19]!==l||e[20]!==g||e[21]!==m||e[22]!==v||e[23]!==S||e[24]!==C||e[25]!==k?(M=r.jsxs(K.Root,B(w({mode:l,open:g,store:m},b),{modal:v,detents:S,onActiveDetentChange:UCe,onOpenChange:C,children:[s,k]})),e[17]=s,e[18]=b,e[19]=l,e[20]=g,e[21]=m,e[22]=v,e[23]=S,e[24]=C,e[25]=k,e[26]=M):M=e[26],M},NCe=t=>{"use forget";const e=H.c(20),{onCloseAutoFocus:n,children:s}=t,o=G(),{fullyExpanded$:a,mode:i}=_.use(dW),l=ue(a);let c;e[0]!==o?(c=()=>Id(o),e[0]=o,e[1]=c):c=e[1];const{isCombinedList:d,showModelsInPlusMenu:u}=ue(c);let m;e[2]!==o?(m=df(o),e[2]=o,e[3]=m):m=e[3];const{hasBounced$:f}=m;let p;e[4]!==o?(p=Ve(o,"3081064739").get("can-bounce",!0),e[4]=o,e[5]=p):p=e[5];const g=p,h=l&&"content-sheet-section:scrollable-content-section";let x;e[6]!==o||e[7]!==d||e[8]!==i||e[9]!==u?(x=i!=="sheet"&&pt(o)&&d&&(u?"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+7*var(--menu-item-height))]!":"max-h-[min(var(--radix-dropdown-menu-content-available-height,50svh),--spacing(1.5)+5.8*var(--menu-item-height))]!"),e[6]=o,e[7]=d,e[8]=i,e[9]=u,e[10]=x):x=e[10];let y;e[11]!==h||e[12]!==x?(y=W("content-sheet-section:flex content-sheet-section:flex-col content-sheet-section:gap-3",h,x),e[11]=h,e[12]=x,e[13]=y):y=e[13];let b;return e[14]!==g||e[15]!==s||e[16]!==f||e[17]!==n||e[18]!==y?(b=r.jsx(K.Content,{showHeader:!0,className:y,canBounce:g,hasBounced$:f,size:"auto",alignOffset:-7,loop:!0,onCloseAutoFocus:n,children:s}),e[14]=g,e[15]=s,e[16]=f,e[17]=n,e[18]=y,e[19]=b):b=e[19],b},RCe=t=>{"use forget";const e=H.c(2);let n;return e[0]!==t?(n=r.jsx(K.BasicTrigger,{asChild:!0,children:r.jsx(LCe,w({},t))}),e[0]=t,e[1]=n):n=e[1],n},LCe=t=>{"use forget";var x;const e=H.c(19);let n,s;e[0]!==t?(x=t,{className:n}=x,s=Me(x,["className"]),e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]);const o=G();let a;e[3]!==o?(a=()=>Id(o),e[3]=o,e[4]=a):a=e[4];const{plusButtonLabel:i}=ue(a),l=vn(un),c=J(),d=l&&"composer-btn--desktopSidebar",u=i&&"border-token-border-medium me-1 gap-1.5 border-1 ps-2 pe-3.5";let m;e[5]!==n||e[6]!==d||e[7]!==u?(m=W("composer-btn",n,d,u),e[5]=n,e[6]=d,e[7]=u,e[8]=m):m=e[8];let f;e[9]!==c?(f=c.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}),e[9]=c,e[10]=f):f=e[10];let p;e[11]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(xD,{className:"icon"}),e[11]=p):p=e[11];let g;e[12]!==i?(g=i&&r.jsx("span",{inert:!0,children:r.jsx(P,{id:"uHQYgJ",defaultMessage:"Add"})}),e[12]=i,e[13]=g):g=e[13];let h;return e[14]!==s||e[15]!==m||e[16]!==f||e[17]!==g?(h=r.jsxs("button",B(w({type:"button",className:m,"data-testid":"composer-plus-btn","aria-label":f},s),{id:"composer-plus-btn",children:[p,g]})),e[14]=s,e[15]=m,e[16]=f,e[17]=g,e[18]=h):h=e[18],h},OCe=t=>{"use forget";const e=H.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(K.SubMenuTrigger,{icon:ACe,label:r.jsx(P,{id:"iORE28",defaultMessage:"More"})}),e[0]=o):o=e[0];const a=n==="bottom"?"end":"start";let i;return e[1]!==s||e[2]!==a?(i=r.jsxs(K.Sub,{children:[o,r.jsx(K.Portal,{children:r.jsx(K.SubContent,{align:a,children:s})})]},"more-tools-menu"),e[1]=s,e[2]=a,e[3]=i):i=e[3],i},DCe=t=>{"use forget";const e=H.c(4),{layoutMode:n,children:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(K.SubMenuTrigger,{icon:ICe,label:r.jsx(P,{id:"gVFn9L",defaultMessage:"Tools"})}),e[0]=o):o=e[0];const a=n==="bottom"?"end":"start";let i;return e[1]!==s||e[2]!==a?(i=r.jsxs(K.Sub,{children:[o,r.jsx(K.Portal,{children:r.jsx(K.SubContent,{align:a,children:s})})]},"collapsed-tool-menu"),e[1]=s,e[2]=a,e[3]=i):i=e[3],i},FCe=()=>TCe([{key:Ie.PictureV2,label:r.jsx(P,{id:"8CBFak",defaultMessage:"Create image"}),icon:vp(Ie.PictureV2)},{key:Ie.Research,label:r.jsx(P,{id:"EGM5w4",defaultMessage:"Deep research"}),icon:vp(Ie.Research)},{key:Ie.Think,label:r.jsx(P,{id:"V/wEA3",defaultMessage:"Think longer"}),icon:vp(Ie.Think)},{key:"gpt-5",label:"GPT-5",icon:jCe},{key:"add-flies",label:r.jsx(P,{id:"dUwCPF",defaultMessage:"Add files"}),icon:ECe}]).slice(0,3),BCe=()=>{"use forget";const t=H.c(5),e=G();let n;if(t[0]!==e){const s=FCe(),o=VCe,a=c=>{Kt(e,{fallbackScreenHint:"login_or_signup",callback:d=>{U.logLoginOrSignUpButtonClicked({location:"Plus Menu ".concat(c),provider:d},o(c))},skipLoginModal:!1})};let i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(K.Label,{children:r.jsx(P,{id:"2SJWKf",defaultMessage:"Log in to use..."})}),t[2]=i):i=t[2];let l;t[3]!==a?(l=c=>r.jsx(K.Item,{label:c.label,icon:c.icon,"data-disabled":!0,onSelect:()=>{a(c.key)},highlightTrailing:r.jsx(uW,{to:"#",onClick:d=>{d.preventDefault(),a(c.key)},children:r.jsx(P,w({},_t.logInButtonText))})},c.key),t[3]=a,t[4]=l):l=t[4],n=r.jsxs(K.Group,{children:[i,s.map(l)]}),t[0]=e,t[1]=n}else n=t[1];return n};function UCe(t){U.logEventWithStatsig("Composer: Plus Menu Detent Change","chatgpt_web_composer_plus_menu_detent_change",{detent:t})}function VCe(t){switch(t.trim().toLowerCase()){case"add_files":return Ct.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_ADD_FILES;case"picture_v2":return Ct.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_PICTURE_V2;case"gpt_5":return Ct.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_GPT_5;case"research":return Ct.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_RESEARCH;case"reason":return Ct.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION_REASON;default:return Ct.ACCESS_FLOW_ENTRY_POINT_PLUS_MENU_OPTION}}const GCe=j(()=>I(()=>Promise.resolve().then(()=>$l),void 0),{loading:t=>L(t)}),$Ce=j(()=>I(()=>import("./eu4d2sy2duibeikv.js").then(t=>t._),__vite__mapDeps([218,1])),{loading:t=>L(t)}),HCe=j(()=>I(()=>import("./nyiv7m02dbt9yeja.js").then(t=>t._),__vite__mapDeps([345,1])),{loading:t=>L(t)});function EQe(t){"use forget";const e=H.c(28),{uploadType:n,modelSupportedImageMimeTypes:s,gizmo:o,attachmentsProductFeature:a,contextScopes:i}=t,l=J(),c=Ci(),d=Ut();let u;e[0]!==a||e[1]!==i||e[2]!==c||e[3]!==(o==null?void 0:o.gizmo)||e[4]!==l||e[5]!==s||e[6]!==d||e[7]!==n?(u=(C,k)=>{C&&(Array.from(C).forEach(M=>{ar.uploadFile(c,ol(M),M,n!=null?n:vo.Retrieval,s,l,d,w({gizmoId:o==null?void 0:o.gizmo.id},i&&i.length>0?{contextScopes:i}:{}),a)}),U.logEventWithStatsig("Upload File",k==="photos"?"chatgpt_web_photos_file_uploaded":"chatgpt_web_camera_file_uploaded",{intent:k,source:n,location:n===vo.Retrieval?"retrieval":"context-connector-picker"}))},e[0]=a,e[1]=i,e[2]=c,e[3]=o==null?void 0:o.gizmo,e[4]=l,e[5]=s,e[6]=d,e[7]=n,e[8]=u):u=e[8];const m=u;let f;e[9]!==n?(f=C=>{U.logEvent("Open File Viewer",{intent:C,source:n}),We.logEvent("chatgpt_web_".concat(C,"_file_viewer_opened"),null,{location:n===vo.Retrieval?"retrieval":"context-connector-picker"})},e[9]=n,e[10]=f):f=e[10];const p=f;let g;e[11]!==p?(g=()=>p("photos"),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==m?(h=C=>{m(C.currentTarget.files,"photos")},e[13]=m,e[14]=h):h=e[14];let x;e[15]!==g||e[16]!==h?(x=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-photos",onClick:g,onChange:h,accept:"image/*",multiple:!0}),e[15]=g,e[16]=h,e[17]=x):x=e[17];let y;e[18]!==p?(y=()=>p("camera"),e[18]=p,e[19]=y):y=e[19];let b;e[20]!==m?(b=C=>{m(C.currentTarget.files,"camera")},e[20]=m,e[21]=b):b=e[21];let v;e[22]!==y||e[23]!==b?(v=r.jsx("input",{className:"sr-only",type:"file",tabIndex:-1,"aria-hidden":!0,id:"upload-camera",onClick:y,onChange:b,accept:"image/*",capture:"environment",multiple:!0}),e[22]=y,e[23]=b,e[24]=v):v=e[24];let S;return e[25]!==x||e[26]!==v?(S=r.jsxs(r.Fragment,{children:[x,v]}),e[25]=x,e[26]=v,e[27]=S):S=e[27],S}const OM=t=>{"use forget";const e=H.c(10),{forMobileSheet:n}=t,s=G(),o=n?K.HeaderItemAs:K.ItemAs;let a;e[0]!==s||e[1]!==n?(a=d=>{n?df(s).keepSheetOpen$.set(!0):vD(d)},e[0]=s,e[1]=n,e[2]=a):a=e[2];const i=n?"large":void 0;let l;e[3]!==n?(l=n?r.jsx(P,{id:"wWojoI",defaultMessage:"Camera"}):r.jsx(P,{id:"AjuCMV",defaultMessage:"Take photo"}),e[3]=n,e[4]=l):l=e[4];let c;return e[5]!==o||e[6]!==a||e[7]!==i||e[8]!==l?(c=r.jsx(o,{as:"label",htmlFor:"upload-camera",onPointerUp:a,icon:HCe,size:i,label:l}),e[5]=o,e[6]=a,e[7]=i,e[8]=l,e[9]=c):c=e[9],c},DM=t=>{"use forget";const e=H.c(7),{forMobileSheet:n}=t,s=n?K.HeaderItemAs:K.ItemAs,o=n?"large":void 0,a=n?GCe:$Ce;let i;e[0]!==n?(i=n?r.jsx(P,{id:"h453TK",defaultMessage:"Photos"}):r.jsx(P,{id:"kBmJ2X",defaultMessage:"Add photos"}),e[0]=n,e[1]=i):i=e[1];let l;return e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==i?(l=r.jsx(s,{as:"label",htmlFor:"upload-photos",onPointerUp:vD,size:o,icon:a,label:i}),e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l):l=e[6],l};function vD(t){t.currentTarget.click()}const WCe=j(()=>I(()=>Promise.resolve().then(()=>vC),void 0),{loading:t=>L(t)}),y3=j(()=>I(()=>Promise.resolve().then(()=>TEe),void 0),{loading:t=>L(t)}),zCe=j(()=>I(()=>import("./cfouv5uwei17418c.js").then(t=>t._),__vite__mapDeps([346,1])),{loading:t=>L(t)}),qCe=j(()=>I(()=>Promise.resolve().then(()=>$l),void 0),{loading:t=>L(t)}),YCe=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),ZCe=j(()=>I(()=>import("./bh6hb7ypq0ifozyx.js").then(t=>t._),__vite__mapDeps([347,1])),{loading:t=>L(t)}),KCe=[ze.Mod,"u"];function v3(t,e="en"){if(!t)return"";const n=new Date(t);if(isNaN(n.getTime()))return"";const s=new Date,o=Math.max(0,n.getTime()-s.getTime()),a=Math.floor(o/(1e3*60)),i=Math.floor(o/(1e3*60*60)),l=Math.floor(o/(1e3*60*60*24));let c,d;return l>0?(c=l,d="day"):i>0?(c=i,d="hour"):(c=a,d="minute"),new Intl.RelativeTimeFormat(e,{numeric:"always"}).format(c,d).replace(/^in\s+/i,"").replace(/\s+ago$/i,"")}function bD({openFileDialog:t,showMenuForNoAuth:e,mode:n,modelSupportsImages:s,isDisabled:o,disabledReason:a,rateLimitInfo:i,currentModelName:l,clientThreadId:c}){const d=G(),u=ut(d),{attachfileRateLimitMessageVariant:m,attachfileRateLimitMessageShowIcon:f}=ue(()=>Id(d)),p=s&&!o&&hd(),g=s&&!o&&pt(d)&&f9(),h=o&&a===mi.RateLimitReached,x=Ue(c,me.getIsNewConversation),y=_.useRef(!1);_.useEffect(()=>{var v;h&&!y.current&&(U.logEventWithStatsig("Rate Limit: Show Info","chatgpt_rate_limit_tooltip_shown",{location:"file_upload",type:"rate_limit",plan_type:(v=u==null?void 0:u.planType)!=null?v:"unknown",is_new_conversation:x}),y.current=!0)},[h,x,u==null?void 0:u.planType]);let b;if(o&&a===mi.RateLimitReached)if(u!=null&&u.hasPaidSubscription())b=r.jsx(FM,{account:u,forSheet:n==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});else switch(n==="sheet"?"title_and_description":m){case"linked_text":b=r.jsx(JCe,{account:u,rateLimitInfo:i!=null?i:null,showIcon:f});break;case"title_and_description":b=r.jsx(FM,{account:u,forSheet:n==="sheet",rateLimitInfo:i!=null?i:null,currentModelName:l});break;case"upgrade_button":b=r.jsx(XCe,{account:u,rateLimitInfo:i!=null?i:null});break}else b=r.jsx(QCe,{mode:n,rateLimitInfo:i!=null?i:null,hasAddPhotosItem:g,currentModelName:l,openFileDialog:t,disabled:o,disabledReason:a});return e?r.jsx(ewe,{onClickUploadImages:t,redirectToAuth:()=>Kt(d,{fallbackScreenHint:"login",skipLoginModal:!1})}):n==="sheet"?r.jsxs(r.Fragment,{children:[p&&r.jsx(OM,{forMobileSheet:!0}),g&&r.jsx(DM,{forMobileSheet:!0}),b]}):r.jsxs(r.Fragment,{children:[g&&r.jsx(DM,{}),p&&r.jsx(OM,{}),b]})}function QCe(t){"use forget";const e=H.c(27),{hasAddPhotosItem:n,currentModelName:s,mode:o,openFileDialog:a,disabled:i,disabledReason:l}=t,c=J(),d=G(),u=ue(Wb),m=Il(),f=n?"android":o==="sheet"&&pt(d)?"ios":"default";let p;e:{if(m){let C;e[0]!==c?(C=c.formatMessage({id:"LocalFileDropdownItem.uploadImagesOnly",defaultMessage:"Add photos"}),e[0]=c,e[1]=C):C=e[1],p=C;break e}switch(f){case"android":{let C;e[2]!==c?(C=c.formatMessage({id:"LocalFileDropdownItem.uploadFilesOnly",defaultMessage:"Add files"}),e[2]=c,e[3]=C):C=e[3],p=C;break e}case"ios":{let C;e[4]!==c?(C=c.formatMessage({id:"LocalFileDropdownItem.uploadPhotosAndFiles",defaultMessage:"Photos & files"}),e[4]=c,e[5]=C):C=e[5],p=C;break e}case"default":{let C;e[6]!==d||e[7]!==s||e[8]!==i||e[9]!==l||e[10]!==c?(C=V1(d,c,i,l,s),e[6]=d,e[7]=s,e[8]=i,e[9]=l,e[10]=c,e[11]=C):C=e[11],p=C;break e}}p=void 0}const g=p,h=o==="sheet"?K.HeaderItem:K.Item,x=o==="sheet"?"large":void 0;let y;e[12]!==d||e[13]!==o||e[14]!==a?(y=()=>{o==="sheet"?(df(d).keepSheetOpen$.set(!0),Promise.resolve().then(()=>{a()})):a()},e[12]=d,e[13]=o,e[14]=a,e[15]=y):y=e[15];let b;e[16]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(y3,{className:"icon"}),e[16]=b):b=e[16];let v;e[17]!==o?(v=o!=="sheet"&&r.jsx(w1,{binding:KCe,className:"touch:hidden"}),e[17]=o,e[18]=v):v=e[18];let S;return e[19]!==h||e[20]!==i||e[21]!==u||e[22]!==g||e[23]!==x||e[24]!==y||e[25]!==v?(S=r.jsx(h,{size:x,onClick:y,icon:b,label:g,disabled:i,highlightTrailing:v,showHighlightTrailing:u},"upload"),e[19]=h,e[20]=i,e[21]=u,e[22]=g,e[23]=x,e[24]=y,e[25]=v,e[26]=S):S=e[26],S}function FM({account:t,forSheet:e,rateLimitInfo:n,currentModelName:s}){const o=J(),a=G(),i=at(),l=v3(n==null?void 0:n.resets_after);let c=r.jsx(y3,{className:"icon"}),d;t!=null&&t.hasPaidSubscription()?d=o.formatMessage({id:"ZBhfvX",defaultMessage:"Wait {time} to upload again"},{time:l}):(c=r.jsx(zCe,{className:"icon"}),d=o.formatMessage({id:"ba5pHI",defaultMessage:"Or wait {time} to upload again"},{time:l}));const u=e?K.HeaderItemRow:K.Item;return r.jsx(u,{onClick:()=>{t?Vg(i,t):Kt(a,{fallbackScreenHint:"login_or_signup",callback:m=>{U.logLogInButtonClicked({provider:m,location:"File picker rate limit tooltip"},Ct.ACCESS_FLOW_ENTRY_POINT_FILE_PICKER_RATE_LIMIT_TOOLTIP)},skipLoginModal:!1})},icon:!e&&c,disabled:(t==null?void 0:t.hasPaidSubscription())&&!e,label:V1(a,o,!0,mi.RateLimitReached,s),trailing:e&&!(t!=null&&t.hasPaidSubscription())&&r.jsx(he,{className:W(e&&"min-h-9"),onClick:()=>{Vg(i,t)},children:r.jsx(P,w({},_t.upgrade))}),secondary:d},"upload")}function JCe({account:t,rateLimitInfo:e,showIcon:n}){const s=J(),o=at(),a=v3(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"group flex min-w-0 items-center py-2 ".concat(n?"px-2.5":"px-5"),children:[n&&r.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center",children:r.jsx(y3,{className:"text-token-text-tertiary"})}),r.jsx("div",{className:"text-token-text-tertiary line-clamp-2 block max-w-[212px] min-w-0 flex-1 text-start text-sm font-light",children:s.formatMessage({id:"egGG9V",defaultMessage:"<link>Upgrade to Plus</link> to attach more files or try again in {time}"},{time:a,link:i=>r.jsx("button",{type:"button",className:"text-token-text-secondary underline",onClick:()=>{Vg(o,t)},children:i})})})]},"upload")}function XCe({account:t,rateLimitInfo:e}){const n=J(),s=at(),o=v3(e==null?void 0:e.resets_after);return r.jsxs("div",{className:"flex flex-col gap-2 px-5 py-2",children:[r.jsx("div",{className:"text-token-text-tertiary max-w-[212px] text-start text-sm font-light",children:n.formatMessage({id:"/zL/ev",defaultMessage:"Upgrade to Plus to attach more files or try again in {time}"},{time:o})}),r.jsxs("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded-full bg-[#F1F1FB] px-4 py-2 text-sm font-medium text-[#AF52DE] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClick:()=>{Vg(s,t)},children:[r.jsx(WCe,{className:"icon-sm text-[#5D5BD0] dark:text-[#DCDBF6]"}),r.jsx(P,w({},_t.upgrade))]})]},"upload")}function Vg(t,e){var n;gn(t,"Rate limited file upload inline-text"),U.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"inline-text",plan_type:(n=e==null?void 0:e.planType)!=null?n:"unknown",is_hard_block:!1,hard_block_reason:""})}function ewe({onClickUploadImages:t,redirectToAuth:e}){return r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:ZCe,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(P,w({},lu.connectApps)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(P,w({},lu.loginRequired))})]})},"connect-apps-no-auth"),r.jsx(K.Item,{icon:YCe,onClick:e,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx(P,w({},lu.uploadDocuments)),r.jsx("span",{className:"text-token-text-secondary text-[13px]",children:r.jsx(P,w({},lu.loginRequired))})]})},"upload-documents-no-auth"),r.jsx(K.Item,{icon:qCe,onClick:t,children:r.jsx(P,w({},lu.uploadImages))},"upload-images-no-auth")]})}const lu=be({connectApps:{id:"Rna6u2",defaultMessage:"Connect apps"},uploadDocuments:{id:"0BxpM7",defaultMessage:"Documents"},uploadImages:{id:"rdMuNJ",defaultMessage:"Images"},loginRequired:{id:"/1XNys",defaultMessage:"Login required"}});var r6;const AQe=ct.button(r6||(r6=rt(["flex items-center justify-center "," rounded-full "," "," "," "," ",""])),({$isSmall:t})=>t?"h-[34px] focus-visible:-outline-offset-1":"h-9",({$hideBorder:t,$visualTreatment:e})=>e!=="composer-btn"&&!t&&"border border-token-border-default",({$visualTreatment:t})=>t!=="composer-btn"&&"text-token-text-secondary",({$showLabel:t,$isSmall:e})=>t?"min-w-8 w-auto p-2 text-[13px] font-semibold radix-state-open:bg-black/10 hover:bg-token-main-surface-secondary":e?"w-7":"w-9",({disabled:t})=>t?"opacity-50":"hover:bg-token-main-surface-secondary",({$open:t})=>t&&"bg-black/10");function twe(){const t=J();return r.jsx("span",{className:"ps-1 pe-1 whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"PromptFilePicker.attachFilesLabel",defaultMessage:"Attach"})})}const nwe=j(()=>I(()=>import("./md1kcnxjf4p73avd.js").then(t=>t._),__vite__mapDeps([348,1])),{loading:t=>L(t)}),swe={[pc.RESEARCH]:30,[pc.PRO_MODE]:15,[pc.THINKING]:2,[pc.IMAGE_GEN]:2,[pc.UNKNOWN]:15};function owe({task:t}){var o,a;const e=((a=(o=t.expectedDurationMinutes)!=null?o:swe[KX(t)])!=null?a:15)*60*1e3,n=t.createdAt?+new Date(t.createdAt):Date.now(),s=rv(n,e);return t.status===Ms.UNDETERMINED?r.jsx(td,{percentage:0,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"0.2s",transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}):YX(t)?r.jsx(nwe,{className:"text-token-text-secondary"}):r.jsx(td,{percentage:s,thickness:1/10,className:"h-4 w-4 text-blue-400",backgroundStrokeClassName:"stroke-black/10 dark:stroke-white/10",transitionDuration:"".concat((100-s)/100*.2,"s"),transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"})}const awe=10,rwe=15,BM=20,UM=5,iwe=10;let dx=null;const cr=t=>{var e,n,s,o,a,i,l;if(dx==null){const c=ds(t,"3317473948").value,d={convoPollingFreshnessMaxMins:((e=c.default_max_polling_duration)!=null?e:awe*60)/60,imageGenPollingFreshnessMaxMins:((n=c.model_slug_max_polling_durations.image_gen)!=null?n:rwe*60)/60,o1ProConvoPollingFreshnessMaxMins:((s=c.model_slug_max_polling_durations.o1_pro)!=null?s:BM*60)/60,o3ProConvoPollingFreshnessMaxMins:((o=c.model_slug_max_polling_durations.o3_pro)!=null?o:BM*60)/60,gpt4oConvoPollingIntervalMs:((a=c.model_slug_intervals.gpt_4o)!=null?a:UM)*1e3,defaultConvoPollingIntervalMs:((i=c.default_interval)!=null?i:UM)*1e3,imageGenPollingIntervalMs:((l=c.model_slug_intervals.image_gen)!=null?l:iwe)*1e3,errorCountThreshold:30};return dx=d,d}return dx};var SD=(t=>(t[t.Standard=0]="Standard",t[t.ImageGen=1]="ImageGen",t))(SD||{});function el(t){var e;return(e=t==null?void 0:t.metadata)!=null&&e.image_gen_async?1:0}function lwe(t){var n,s;const e=(s=(n=t==null?void 0:t.metadata)==null?void 0:n.poll_on_websocket_inactivity_ms)!=null?s:0;return e>0?e:0}function fv(t,e){var o,a,i;const n=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_interval_ms)!=null?a:0;return n>0?n:el(t)===1?cr(e).imageGenPollingIntervalMs:cwe((i=t==null?void 0:t.metadata)==null?void 0:i.model_slug)?cr(e).gpt4oConvoPollingIntervalMs:cr(e).defaultConvoPollingIntervalMs}function b3(t,e){var o,a,i;const n=(a=(o=t==null?void 0:t.metadata)==null?void 0:o.poll_freshness_max_mins)!=null?a:0;if(n>0)return n;const s=(i=t==null?void 0:t.metadata)==null?void 0:i.model_slug;return wD(s)?cr(e).o1ProConvoPollingFreshnessMaxMins:kD(s)?cr(e).o3ProConvoPollingFreshnessMaxMins:el(t)===1?cr(e).imageGenPollingFreshnessMaxMins:CD(el(t),e)}function CD(t,e){switch(t){case 1:return cr(e).imageGenPollingFreshnessMaxMins;case 0:return cr(e).convoPollingFreshnessMaxMins}}function wD(t){return t?xr(3010482349,"".concat(t,"-AAAA")):!1}function kD(t){return t?xr(3240390095,"".concat(t,"-AAAA")):!1}function cwe(t){return t?t==="gpt-4o":!1}function VM(t,e){qe(t,n=>{ln.updateTree(n,(s,o)=>{var i,l,c;if(!(((c=(l=(i=s.getNodeIfExists(o))==null?void 0:i.message)==null?void 0:l.content)==null?void 0:c.content_type)===dt.Text)){const d=cy("");return d.clientMetadata=w(w({},d.clientMetadata),e),s.addMessageNode(o,d)}s.updateNodeMetadata(o,e)})})}function MD({threadId:t}){const e=G(),n=xt(),s=_.useRef(!1),o=_.useRef(null),a=_.useRef(0),i=_.useRef(null);return _.useEffect(()=>{let l=!1;function c(){var m;return(m=me.getCurrentNode(ft(t)))==null?void 0:m.message}let d=0;async function u(){var g,h,x;i.current==null&&(i.current=Date.now()),s.current=!0;let m=null;try{const y=c();if(el(y)!==1&&!wD((g=y==null?void 0:y.metadata)==null?void 0:g.model_slug)&&!kD((h=y==null?void 0:y.metadata)==null?void 0:h.model_slug))try{const b=Date.now()/1e3,{status:v}=await pe.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}});v!=="COMPLETE"&&(d++,U.logEvent("ChatGPT Convo Stream: Polling Attempted",{conversationId:t,retryCount:d}),m={async_status:Yt.STREAMING,update_time:b})}catch(b){}m==null&&(d++,U.logEventWithStatsig("ChatGPT Convo Stream: Polling Attempted","chatgpt_convo_stream_polling_attempted",{conversationId:t,retryCount:d}),m=await ka(t,{skipIfExisting:!1})),a.current=0}catch(y){a.current+=1;const b=c();if(a.current>=cr(e).errorCountThreshold){U.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:el(b)}),U.logNetworkError({source:"pending_thread_poller",type:"error"});const v="A network error occurred. Please check your connection and try again. ".concat(rA);VM(t,{err:v,errType:"danger"})}else l||(o.current=window.setTimeout(u,fv(b,e)));return}if(m.async_status===Yt.UNREAD){const y=c(),b=i.current?Date.now()-i.current:0;U.logEventWithStatsig("chatgpt_web_network_error_poller_success","chatgpt_web_network_error_poller_success",{duration_ms:b,poll_type:el(y)}),Ps(t,{source:ns.SERVER,value:Yt.UNREAD}),ro(n,m.gizmo_id),hr.updateThreadFromServer(t,m);return}if(m.async_status!==Yt.STREAMING)return;const f=(x=m.update_time)!=null?x:0,p=zb(new Date,new Date(f*1e3));if(!l){const y=c();if(p<b3(y,e))o.current=window.setTimeout(u,fv(y,e));else{const b=c();U.logEventWithStatsig("chatgpt_web_network_error_poller_failure","chatgpt_web_network_error_poller_failure",{poll_type:el(b)}),VM(t,{err:pi,errType:"danger",canRetry:!0}),pe.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:t}},requestBody:{status:null}})}}U.logEventWithStatsig("ChatGPT Convo Stream: Polling Complete","chatgpt_convo_stream_polling_complete",{conversationId:t,retryCount:d})}return s.current||(U.logEvent("Conversation Polling Started"),u()),()=>{l=!0,o.current&&window.clearTimeout(o.current),s.current=!1}},[n,t,e]),null}function TD(t){const e=G(),n=Xh(t),{value:s=null,source:o=null}=n!=null?n:{};return Ue(t,a=>{var f,p,g;const i=(f=me.getCurrentNode(a))==null?void 0:f.message,l=b3(i,e),c=me.getUpdateTime(a),d=Math.max(c!=null?c:0,(p=i==null?void 0:i.create_time)!=null?p:0,(g=i==null?void 0:i.update_time)!=null?g:0),u=zb(new Date,new Date(d*1e3))<l;return xe(e,"3922476776")&&u&&s===Yt.STREAMING&&o===ns.SERVER})}const nd=Nt(Cn(()=>({dragData:null,conversationDropTargetCount:0}))),dwe=()=>{"use forget";return nd(pwe)},uwe=t=>{nd.setState({dragData:t})},mwe=()=>{nd.setState(t=>{t.dragData=null})},IQe=()=>(nd.setState(t=>{t.conversationDropTargetCount+=1}),()=>{nd.setState(t=>{t.conversationDropTargetCount=Math.max(0,t.conversationDropTargetCount-1)})}),fwe=()=>{"use forget";return nd(gwe)};function pwe(t){return t.dragData}function gwe(t){return t.conversationDropTargetCount>0}function hwe({text:t}){const e=OL(),[n,s]=_.useState({finalText:t,pos:0,isTyping:!!t});_.useEffect(()=>{s(t?{finalText:t,pos:0,isTyping:!0}:{finalText:"",pos:0,isTyping:!1})},[t]);const o=_.useMemo(()=>Array.from(n.finalText),[n.finalText]),a=_.useMemo(()=>n.finalText?new _we().humanTypingDelaysQuertyDistance(o):[],[o,n.finalText]);return _.useEffect(()=>{if(!n.isTyping)return;const i=a.map((l,c)=>setTimeout(()=>{e()&&s(d=>B(w({},d),{pos:c+1,isTyping:c+1<o.length}))},l));return()=>i.forEach(clearTimeout)},[n.isTyping,a,o,e]),r.jsx(r.Fragment,{children:n.finalText.slice(0,n.pos)})}class _we{qwertyDistance(e,n){var c,d;const s={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[o,a]=(c=s[e.toLowerCase()])!=null?c:[0,0],[i,l]=(d=s[n.toLowerCase()])!=null?d:[0,0];return Math.abs(o-i)+Math.abs(a-l)}humanTypingDelaysQuertyDistance(e,n=10,s=100){let o=0;const a=[];for(let i=0;i<e.length;++i){let l;if(i>0){const c=this.qwertyDistance(e[i-1],e[i]);c===0?l=this.getRandomInt(n,Math.floor(s/2)):c===1?l=this.getRandomInt(n,Math.floor(s*2/3)):l=this.getRandomInt(n,s)}else l=this.getRandomInt(n,s);a.push(l+o),o+=l}return a}getRandomInt(e,n){return Math.floor(Math.random()*(n-e+1))+e}}function xwe(t){const e=G(),[n,s]=_.useState(()=>hn(()=>n1(e)().some(a=>a.conversationId===t)));return _.useEffect(()=>{var a;let o=(a=ft(t))==null?void 0:a.title;return mb.subscribe(i=>{const l=ft(t,i),c=l==null?void 0:l.title;c!==o&&((l==null?void 0:l.titleSource)===bm.Generated&&sb()?s(!0):s(!1),o=c)})},[t]),n}function ywe(t){"use forget";const e=H.c(9),{clientThreadId:n,historyConversationResponse:s,shouldShowLoadingShimmer$:o}=t,a=ue(o);let i;e[0]!==s.is_do_not_remember||e[1]!==a?(i=W({"loading-shimmer":a,"opacity-60":s.is_do_not_remember}),e[0]=s.is_do_not_remember,e[1]=a,e[2]=i):i=e[2];let l;e[3]!==n||e[4]!==s?(l=r.jsx(vwe,{clientThreadId:n,historyConversationResponse:s}),e[3]=n,e[4]=s,e[5]=l):l=e[5];let c;return e[6]!==i||e[7]!==l?(c=r.jsx("span",{className:i,dir:"auto",children:l}),e[6]=i,e[7]=l,e[8]=c):c=e[8],c}function vwe(t){"use forget";const e=H.c(2),{clientThreadId:n,historyConversationResponse:s}=t,o=Ue(n,bwe),a=xwe(n),i=o!=null?o:s.title;if(a){const l=i!=null?i:"";let c;return e[0]!==l?(c=r.jsx(hwe,{text:l}),e[0]=l,e[1]=c):c=e[1],c}return i}function bwe(t){return t==null?void 0:t.title}function Swe(t){"use forget";const e=H.c(19),{conversationId:n,historyConversationResponse:s,onClose:o}=t;let a;e[0]!==n||e[1]!==s?(a=()=>{var h,x,y;return(y=(x=(h=ft(n))==null?void 0:h.title)!=null?x:s.title)!=null?y:""},e[0]=n,e[1]=s,e[2]=a):a=e[2];const[i]=_.useState(a),l=_.useRef(null),c=G(),d=xt();let u;e[3]!==n||e[4]!==c||e[5]!==s||e[6]!==i||e[7]!==d?(u=function(){var y,b;const x=(b=(y=l.current)==null?void 0:y.value)!=null?b:"";x!==i&&(s1(c,n,x,bm.User),U.logEvent("Rename Thread",{threadId:n,content:x}),pe.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{title:x},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{ro(d,s.gizmo_id)}))},e[3]=n,e[4]=c,e[5]=s,e[6]=i,e[7]=d,e[8]=u):u=e[8];const m=u;let f;e[9]!==o||e[10]!==m?(f=h=>{if(!h.nativeEvent.isComposing){h.key===" "&&h.stopPropagation();e:switch(h.key){case"Escape":{o();break e}case"Enter":m(),o()}}},e[9]=o,e[10]=m,e[11]=f):f=e[11];let p;e[12]!==o||e[13]!==m?(p=()=>{m(),o()},e[12]=o,e[13]=m,e[14]=p):p=e[14];let g;return e[15]!==i||e[16]!==f||e[17]!==p?(g=r.jsx("input",{type:"text",defaultValue:i,ref:l,onClick:wwe,onKeyDown:f,onFocus:Cwe,onBlur:p,autoFocus:!0,className:"w-full border-none bg-transparent p-0 text-sm focus:ring-0"}),e[15]=i,e[16]=f,e[17]=p,e[18]=g):g=e[18],g}function Cwe(t){var e;(e=t.currentTarget)==null||e.select()}function wwe(t){t.preventDefault()}const GM=j(()=>I(()=>import("./gkltu4ukkxzucs68.js").then(t=>t._),__vite__mapDeps([349,1])),{loading:t=>L(t)}),ED=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)}),AD=j(()=>I(()=>Promise.resolve().then(()=>vde),void 0).then(t=>t.GizmoConversationOptionsDropdown)),kwe=new Date(2024,9,11,0);function Mwe(t){U.logEvent("Load Thread",{threadId:t})}function jQe(t){"use forget";const e=H.c(11),{conversation:n,onOpenChange:s,testId:o,inMainScreen:a,isActiveConversation:i}=t,l=a===void 0?!1:a,c=J(),d=G();if(!pt(d))return null;let m;e[0]!==c?(m=c.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),e[0]=c,e[1]=m):m=e[1];let f;e[2]!==m||e[3]!==o?(f=r.jsx(Rh,{"data-testid":o,className:"m-0","data-prevent-default":!0,"aria-label":m,icon:ED}),e[2]=m,e[3]=o,e[4]=f):f=e[4];let p;return e[5]!==n||e[6]!==l||e[7]!==i||e[8]!==s||e[9]!==f?(p=r.jsx(AD,{conversation:n,onOpenChange:s,inMainScreen:l,isActiveConversation:i,children:f}),e[5]=n,e[6]=l,e[7]=i,e[8]=s,e[9]=f,e[10]=p):p=e[10],p}const G1=_.memo(Twe);function Twe(t){"use forget";var an,jn,Pn,es;const e=H.c(117),{conversation:n,className:s,hideOverflowMenu:o,isActive:a,elementRef:i,testId:l,onSelect:c,icon:d,isStarred:u}=t,m=o===void 0?!1:o,f=J(),p=G(),[g,h]=_.useState(!1),x=_n(),y="owner"in n?(an=n.owner)==null?void 0:an.user_id:null,b=y==null||y===(x==null?void 0:x.normalizedAccountUserId);let v;e[0]!==p?(v=xe(p,"232791851"),e[0]=p,e[1]=v):v=e[1];const S=v;let C,k;e[2]!==n.async_status||e[3]!==n.id||e[4]!==p?(C=()=>{if(n.id!=null&&n.async_status!=null){const Ot=ht(p,n.id);b2(Ot,{source:ns.SERVER,value:n.async_status})}},k=[p,n.id,n.async_status],e[2]=n.async_status,e[3]=n.id,e[4]=p,e[5]=C,e[6]=k):(C=e[5],k=e[6]),_.useEffect(C,k);let M;e[7]!==n.id||e[8]!==p?(M=()=>{if(n.id===void 0)return null;const Ot=ht(p,n.id);return Mi(Ot)},e[7]=n.id,e[8]=p,e[9]=M):M=e[9];const T=M;let E;e[10]!==T?(E=()=>{var Ot,At;return(At=(Ot=T())==null?void 0:Ot.value)!=null?At:null},e[10]=T,e[11]=E):E=e[11];const A=E;let N;e[12]!==T?(N=()=>{var Ot,At;return(At=(Ot=T())==null?void 0:Ot.source)!=null?At:null},e[12]=T,e[13]=N):N=e[13];const R=N,O=Ue(n.id,me.getRequestId);let D;e[14]!==p||e[15]!==O?(D=()=>pW(p,O),e[14]=p,e[15]=O,e[16]=D):D=e[16];const F=D;let V;e[17]!==n.update_time?(V=zb(new Date,new Date((jn=n.update_time)!=null?jn:0)),e[17]=n.update_time,e[18]=V):V=e[18];const z=V<CD(SD.Standard,p);let $;e[19]!==n.update_time?($=n.update_time&&mW(new Date(n.update_time),kwe),e[19]=n.update_time,e[20]=$):$=e[20];const Y=$;let Z;e[21]!==A||e[22]!==z?(Z=()=>(A()===Yt.STREAMING||A()===Yt.REALTIME)&&z,e[21]=A,e[22]=z,e[23]=Z):Z=e[23];const Q=Z;let q;e[24]!==A||e[25]!==Y||e[26]!==p||e[27]!==a||e[28]!==F||e[29]!==S?(q=()=>!!(S&&!a&&!F()&&Y&&A()===Yt.UNREAD&&!un(p)),e[24]=A,e[25]=Y,e[26]=p,e[27]=a,e[28]=F,e[29]=S,e[30]=q):q=e[30];const X=q;let oe;e[31]!==Q||e[32]!==a||e[33]!==F||e[34]!==S?(oe=()=>S&&!a&&(F()||Q()),e[31]=Q,e[32]=a,e[33]=F,e[34]=S,e[35]=oe):oe=e[35];const se=oe,de=S;let ie;e[36]!==Q||e[37]!==a||e[38]!==F||e[39]!==se||e[40]!==S?(ie=()=>!se()&&S&&!a&&(F()||Q()),e[36]=Q,e[37]=a,e[38]=F,e[39]=se,e[40]=S,e[41]=ie):ie=e[41];const ae=ie,ce=TD(n.id)&&!a,ye=_.useRef(!1);let fe,Ce;e[42]!==R||e[43]!==A||e[44]!==n.id||e[45]!==p||e[46]!==a||e[47]!==F?(fe=()=>{if(!ye.current&&xe(p,"3922476776"))return a?Mo(()=>(F(),A()===Yt.UNREAD),async Ot=>{Ot&&(R()===ns.SERVER&&(ye.current=!0,await pe.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:null}})),Ps(n.id,null),ye.current=!1)},{fireImmediately:!0}):Mo(()=>(F(),R()===ns.CLIENT&&A()===Yt.UNREAD),async Ot=>{Ot&&(ye.current=!0,await pe.safePost("/conversation/{conversation_id}/async-status",{parameters:{path:{conversation_id:n.id}},requestBody:{status:A()}}),Ps(n.id,{value:Yt.UNREAD,source:ns.SERVER}),ye.current=!1)})},Ce=[p,a,n.id,A,R,F],e[42]=R,e[43]=A,e[44]=n.id,e[45]=p,e[46]=a,e[47]=F,e[48]=fe,e[49]=Ce):(fe=e[48],Ce=e[49]),_.useEffect(fe,Ce);let ee,te;e[50]!==n.id||e[51]!==a||e[52]!==b?(ee=()=>p9(O8,{editTitle:Ot=>{const{serverThreadId:At}=Ot;b&&(At?At===n.id:a)&&h(!0)}}),te=[n.id,a,b],e[50]=n.id,e[51]=a,e[52]=b,e[53]=ee,e[54]=te):(ee=e[53],te=e[54]),_.useEffect(ee,te);let le;e[55]!==n.conversation_template_id||e[56]!==p?(le=()=>{var Ot,At;if(n.conversation_template_id!=null)return(At=(Ot=gW(p).data)==null?void 0:Ot.gizmos.find(Ls=>Ls.resource.gizmo.id===n.conversation_template_id))==null?void 0:At.resource},e[55]=n.conversation_template_id,e[56]=p,e[57]=le):le=e[57];const re=ue(le),ve=_.useRef(null);let _e;e[58]!==re||e[59]!==n.gizmo_id?(_e=fW(n.gizmo_id)&&re?re.gizmo:void 0,e[58]=re,e[59]=n.gizmo_id,e[60]=_e):_e=e[60];const we=_e,De=n.gizmo_id&&$s(n.gizmo_id)&&"owner"in n?{id:n.gizmo_id}:void 0,ge="owner"in n?(Pn=n.owner)==null?void 0:Pn.user_id:void 0,Ne=(es=ut(p))==null?void 0:es.normalizedAccountUserId,je=fwe(),Te=_.useRef(null),Fe=La;let Ge;e[61]!==n.gizmo_id||e[62]!==je||e[63]!==g||e[64]!==u?(Ge=!g&&je&&dy(n.gizmo_id,u),e[61]=n.gizmo_id,e[62]=je,e[63]=g,e[64]=u,e[65]=Ge):Ge=e[65];let Se;e[66]!==n||e[67]!==u?(Se=Ot=>{var Da;if(!dy(n.gizmo_id,u))return;const At=Ot.currentTarget,Ls=ve.current;Ls&&(Ls.style.display="none"),At.style.opacity="0.99",Ls&&requestAnimationFrame(()=>{Ls.style.display="",At.style.opacity="0"}),Ot.dataTransfer.effectAllowed="move",uwe({kind:"conversation",conversation:n,gizmoId:(Da=n.gizmo_id)!=null?Da:null})},e[66]=n,e[67]=u,e[68]=Se):Se=e[68];const Re=Ewe;let tt;e[69]!==i?(tt=e3(i,Te),e[69]=i,e[70]=tt):tt=e[70];const Ke=pa(n.id,{gizmo:we?{gizmo:we}:void 0,project:De||void 0,ownerUserId:ge,accountUserId:Ne});let nt;e[71]!==n.id||e[72]!==a||e[73]!==c?(nt=Ot=>{Ot.metaKey||Ot.ctrlKey||!a&&!Ot.defaultPrevented&&(Mwe(n.id),c==null||c())},e[71]=n.id,e[72]=a,e[73]=c,e[74]=nt):nt=e[74];let ot;e[75]===Symbol.for("react.memo_cache_sentinel")?(ot=()=>{h(!0)},e[75]=ot):ot=e[75];const Lt=!!u;let vt;e[76]!==de||e[77]!==n.id||e[78]!==a||e[79]!==g||e[80]!==se||e[81]!==X||e[82]!==Lt?(vt=r.jsx(Awe,{conversationId:n.id,isActive:a,isEditingTitle:g,isStarred:Lt,canShowAsyncTaskProgressCircle:de,shouldShowUnreadNotification$:X,shouldShowLoadingSpinner$:se}),e[76]=de,e[77]=n.id,e[78]=a,e[79]=g,e[80]=se,e[81]=X,e[82]=Lt,e[83]=vt):vt=e[83];let Ht;e[84]!==n||e[85]!==m||e[86]!==f||e[87]!==a||e[88]!==g||e[89]!==l?(Ht=!m&&!g&&r.jsx(AD,{conversation:n,isActiveConversation:a,onOpenChange:Ot=>{Ot&&U.logEvent("Conversation History Item Open Menu",{conversationId:n.id})},children:r.jsx(Rh,{ref:ve,"data-testid":"".concat(l,"-options"),"aria-label":f.formatMessage({id:"idEcXk",defaultMessage:"Open conversation options"}),icon:ED})}),e[84]=n,e[85]=m,e[86]=f,e[87]=a,e[88]=g,e[89]=l,e[90]=Ht):Ht=e[90];let nn;e[91]!==n||e[92]!==g||e[93]!==ae?(nn=!g&&r.jsx(ywe,{clientThreadId:n.id,historyConversationResponse:n,shouldShowLoadingShimmer$:ae}),e[91]=n,e[92]=g,e[93]=ae,e[94]=nn):nn=e[94];let sn;e[95]!==n.id||e[96]!==ce?(sn=ce&&r.jsx(MD,{threadId:n.id}),e[95]=n.id,e[96]=ce,e[97]=sn):sn=e[97];let on;e[98]!==n||e[99]!==g?(on=g?r.jsx(Swe,{conversationId:n.id,historyConversationResponse:n,onClose:()=>{h(!1)}}):null,e[98]=n,e[99]=g,e[100]=on):on=e[100];let kn;return e[101]!==Fe||e[102]!==s||e[103]!==d||e[104]!==a||e[105]!==Ge||e[106]!==Se||e[107]!==Re||e[108]!==tt||e[109]!==Ke||e[110]!==nt||e[111]!==vt||e[112]!==Ht||e[113]!==nn||e[114]!==sn||e[115]!==on?(kn=r.jsxs(Fe,{icon:d,draggable:Ge,onDragStart:Se,onDragEnd:Re,ref:tt,active:a,className:s,to:Ke,onClick:nt,onDoubleClick:ot,trailing:vt,highlightTrailing:Ht,label:nn,children:[sn,on]}),e[101]=Fe,e[102]=s,e[103]=d,e[104]=a,e[105]=Ge,e[106]=Se,e[107]=Re,e[108]=tt,e[109]=Ke,e[110]=nt,e[111]=vt,e[112]=Ht,e[113]=nn,e[114]=sn,e[115]=on,e[116]=kn):kn=e[116],kn}function Ewe(t){t.currentTarget.style.opacity="",mwe()}function Awe(t){"use forget";const e=H.c(8),{conversationId:n,isActive:s,isEditingTitle:o,isStarred:a,shouldShowUnreadNotification$:i,canShowAsyncTaskProgressCircle:l,shouldShowLoadingSpinner$:c}=t,d=aee(n),u=ue(i),m=ue(c);let f;return e[0]!==l||e[1]!==d||e[2]!==s||e[3]!==o||e[4]!==a||e[5]!==m||e[6]!==u?(f=!o&&((!s&&u?a?r.jsx(GM,{className:"icon-xs text-blue-500"}):r.jsx(rP,{color:"blue"}):l&&d.length>0?r.jsx(owe,{task:d[0]}):!s&&m?r.jsx(mhe,{size:16,className:"text-token-text-primary"}):null)||(a?r.jsx(GM,{className:"icon-xs text-token-icon-tertiary opacity-50"}):null)),e[0]=l,e[1]=d,e[2]=s,e[3]=o,e[4]=a,e[5]=m,e[6]=u,e[7]=f):f=e[7],f}function Iwe({systemHints:t,isN7jupdActive:e}){const n=it.agentSessionMode$();if(!e)return;const s=t.includes(Ie.Agent);if(!(n!=="incognito"||!s))return{n7jupd_local_safe_mode:!0}}let pv=null;function PQe(t){pv=t}function jwe(t){return pv?pv(t):t}function ID(t){switch(t.content.content_type){case dt.Text:return t.content.parts.join("");case dt.Code:return t.content.text;default:return""}}const $M=new WeakMap,Gg=new WeakMap,Pwe=t=>{const e=$M.get(t);if(e)return e;try{const n=t!=null&&t.widget_state?JSON.parse(t.widget_state):void 0;return $M.set(t,n),n}catch(n){return null}},Nwe=t=>{var n;const e=Gg.get(t);if(e)return e;try{const s=ID(t),o=s&&(n=JSON.parse(s))!=null?n:void 0;return Gg.set(t,o),o}catch(s){return null}},Rwe=t=>{const e=Gg.get(t);if(e)return e;try{const n=ID(t),[s]=Gu(n,Go({path:hs,args:o=>{const[a]=Gu(hs(o),pA);return a!=null?a:{}}}));return s?(Gg.set(t,s),s):null}catch(n){return null}},$1=t=>{var e;return(e=t.resource_name)!=null?e:""},Lwe=t=>{var e;return(e=t.resolved_pineapple_uri)!=null?e:""},HM="api_tool.",jD=t=>t.filter(e=>{var n,s;return e.author.role===Ze.Assistant&&!!((n=e.recipient)!=null&&n.startsWith(HM))||e.author.role===Ze.Tool&&!!((s=e.author.name)!=null&&s.startsWith(HM))}),ux=t=>{var e;if(t){if("metadata"in t)return(e=t.metadata)==null?void 0:e.chatgpt_sdk;if("chatgpt_sdk"in t)return t.chatgpt_sdk}else return},Owe=hW(Dwe);function Dwe(t){var f,p,g,h,x,y,b,v,S,C,k,M;const e=jD(t),n=e.find(T=>T.author.role===Ze.Assistant),s=e.findLast(T=>T.author.role===Ze.Tool&&!!ux(T)),o=ux(n),a=ux(s);let i=o;a&&(i=w(w({},i),a)),i=gi(i);const l=$1(i),c=Lwe(i),d=n?Rwe(n):null,u=s?Nwe(s):null,m=(f=i.tool_response_metadata)!=null?f:null;return{isComplete:!!s&&!!n,invocationUuid:(p=i.invocation_uuid)!=null?p:null,turnUuid:(g=i.turn_uuid)!=null?g:null,path:(h=d==null?void 0:d.path)!=null?h:null,distributionChannel:(x=i.distribution_channel)!=null?x:_W.EXTERNAL,sessionId:(y=i.session_id)!=null?y:null,connectorId:(b=i.attribution_id)!=null?b:"",isError:(v=i.is_error)!=null?v:!1,messages:t,widgetId:(C=(S=s==null?void 0:s.id)!=null?S:n==null?void 0:n.id)!=null?C:"",toolMessageId:(k=s==null?void 0:s.id)!=null?k:null,metadata:i,widgetType:l,widgetParent:c,toolInput:(M=d==null?void 0:d.args)!=null?M:null,toolOutput:u,toolResponseMetadata:m}}const Fwe=t=>{var e,n;return t?{isTrusted:!0,connectDomains:(e=t.connect_domains)!=null?e:[],resourceDomains:(n=t.resource_domains)!=null?n:[]}:null},gv=t=>{if(!t)return null;try{return new URL(t).hostname.replaceAll(".","-")}catch(e){return t.startsWith("http")?null:gv("https://".concat(t))}},Ap=(t,e)=>{var o,a,i,l,c,d,u,m,f,p,g;const n=(a=(o=e==null?void 0:e.domain)!=null?o:t.metadata.widget_domain)!=null?a:null,s=(l=gv(n))!=null?l:gv((i=t.metadata.resolved_pineapple_uri)!=null?i:null);return{domain:n,subdomain:s,name:(c=e==null?void 0:e.name)!=null?c:null,html:(d=e==null?void 0:e.html)!=null?d:null,logoUrl:(u=e==null?void 0:e.logo_url)!=null?u:null,csp:e!=null&&e.csp?Fwe(e.csp):null,prefersBorder:(f=(m=e==null?void 0:e.prefers_border)!=null?m:t.metadata.prefers_border)!=null?f:!1,hideWidgetFeedback:(g=(p=e==null?void 0:e.hide_widget_feedback)!=null?p:t.metadata.hide_widget_feedback)!=null?g:!1}},Bwe="oai-ecosys-db",Gr="resolved-widget-cache",Uwe=10;class Vwe{constructor(e){ne(this,"db");ne(this,"openDB",cu({name:"open_db"},()=>new Promise((e,n)=>{const s=indexedDB.open(Bwe,1);s.onupgradeneeded=()=>{const o=s.result;o.objectStoreNames.contains(Gr)||o.createObjectStore(Gr,{keyPath:"key"}).createIndex("lastAccess","lastAccess")},s.onsuccess=()=>e(s.result),s.onerror=()=>n(s.error)})));ne(this,"getDB",cu({name:"get_db"},async()=>{const e=await this.db;return!e||e.close===void 0||e.version===0?(this.db=this.openDB(),this.db):e}));ne(this,"get",cu({name:"get"},async e=>{const n=await this.getDB();return n?new Promise((s,o)=>{const i=n.transaction(Gr,"readwrite").objectStore(Gr),l=i.get(e);l.onsuccess=()=>{if(l.result==null)return s(null);const c=gA(l.result,{key:()=>e,domain:Kl(hs),subdomain:Kl(hs),name:Kl(hs),html:Kl(hs),logoUrl:Kl(hs),csp:Kl(Go({isTrusted:Lu,connectDomains:BC,resourceDomains:BC})),prefersBorder:Lu,hideWidgetFeedback:Lu,lastAccess:n9});c.lastAccess=Date.now(),i.put(c),s(c)},l.onerror=()=>o(l.error)}):null}));ne(this,"set",cu({name:"set"},async(e,n)=>{const s=await this.getDB();if(!s)return;const a=s.transaction(Gr,"readwrite").objectStore(Gr);a.put(B(w({},n),{key:e,lastAccess:Date.now()})),await new Promise((i,l)=>{const c=a.count();c.onsuccess=()=>{if(c.result>Uwe){const m=a.index("lastAccess").openCursor();m.onsuccess=()=>{const f=m.result;f&&a.delete(f.primaryKey),i()},m.onerror=()=>l(m.error);return}i()},c.onerror=()=>l(c.error)})}));ne(this,"delete",cu({name:"delete"},async e=>{const n=await this.getDB();if(!n)return;const o=n.transaction(Gr,"readwrite").objectStore(Gr);await new Promise((a,i)=>{const l=o.delete(e);l.onsuccess=()=>a(),l.onerror=()=>i(l.error)})}));this.ctx=e,this.db=this.openDB()}}const cu=({name:t},e)=>async(...n)=>{try{return await e(...n)}catch(s){return I(async()=>{const{DatadogLogger:o}=await import("./ghewn7l2ynbm32fm.js").then(a=>a.wa);return{DatadogLogger:o}},__vite__mapDeps([29,1,30])).then(({DatadogLogger:o})=>{o.addError(s)}),I(async()=>{const{statsc:o,Namespace:a}=await import("./ghewn7l2ynbm32fm.js").then(i=>i.wb);return{statsc:o,Namespace:a}},__vite__mapDeps([29,1,30])).then(({statsc:o,Namespace:a})=>{o.count(a.ECOSYSTEM,"resolved_widget_cache.".concat(t,".error"))}),null}},Gwe=xs(t=>new Vwe(t)),$we=({metadata:t})=>t.html_asset_pointer,PD=({metadata:t,path:e})=>["htmlAsset",t.resolved_pineapple_uri,t.html_asset_pointer,e],Hwe=(t,e)=>{var n;return Ap(e,(n=t.getQueryData(PD(e)))!=null?n:null)},NQe=t=>{"use no forget";const e=G(),n=Gwe(e),s=$we(t),{path:o}=t,{html_asset_pointer:a,resolved_pineapple_uri:i}=t.metadata,l=PD(t),{data:c,isLoading:d}=lt({queryKey:["resolvedWidgetCache",s],queryFn:()=>s?n.get(s):Promise.resolve(null),enabled:!!s,staleTime:1/0,gcTime:1/0}),{data:u,isLoading:m,isError:f,refetch:p}=lt({queryKey:l,queryFn:async()=>{try{const h=await pe.safeGet("/ecosystem/widget",{parameters:{query:{uri:i!=null?i:"",template_pointer:a!=null?a:"",resource_path:o!=null?o:""}}});if(s){const x=Ap(t,h);n.set(s,x)}return h}catch(h){throw s&&h instanceof Vn&&h.status===404&&n.delete(s),h}},gcTime:0,enabled:l.every(Boolean)}),g=w(w(w({},Ap(t,null)),c!=null?c:void 0),u?Ap(t,u):{});return B(w({},g),{refetch:p,isLoading:m&&(!c||d),isError:f})};var hm,$c,Hc,eh;class Wwe{constructor(e){ne(this,"requestBlockingPromiseListener",null);ne(this,"subscriptionEffect",null);ne(this,"showLoadingBar$",Qe(!1));ne(this,"transitioningId$",Qe(null));ne(this,"pinnedChatSDK$",Qe(null));ne(this,"pinnedChatSDKId$",It(()=>{var e,n;return(n=(e=this.pinnedChatSDK$())==null?void 0:e.widgetId)!=null?n:null}));ne(this,"pinnedWidgetType$",It(()=>{var n;const e=(n=this.pinnedChatSDK$())==null?void 0:n.metadata;return e?$1(e):null}));ne(this,"conversationTurnSnapshot$",It(()=>this.hasPinnedWidget$()?hn(()=>Pc(this.conversation)):[]));ne(this,"hasPinnedWidget$",It(()=>this.pinnedWidgetType$()!=null));ne(this,"displayMode$",Qe("inline"));ne(this,"title$",Qe(null));co(this,hm,Qe(null));ne(this,"maxWidgetHeight$",It(()=>{const{height:e}=eP(this.conversation.ctx);if(this.displayMode$()!=="inline")return this.displayMode$()==="pip"?e/2-38:void 0}));co(this,$c,new Set);co(this,Hc,new Map);ne(this,"widgetStateCache",new Map);ne(this,"pinnedWidgetHeight$",It(()=>{const e=this.maxWidgetHeight$(),n=this.pinnedWidgetType$(),s=Mn(this,hm).call(this);return n?Math.min(e!=null?e:0,s!=null?s:0):null}));co(this,eh,e=>yr(async n=>{const s=this.conversation.serverId$();if(s)try{await pe.safePost("/ecosystem/widget_state",{requestBody:{conversation_id:s,message_id:e,state:JSON.stringify(n)}})}catch(o){}finally{Mn(this,$c).delete(e)}},2e3));ne(this,"getLatestChatSDK$",e=>{const n=this.pinnedWidgetType$();if(!n||n!==e.widgetType)return e;const s=Pc(this.conversation);return WM(e,s,n)});this.conversation=e,this.requestBlockingPromiseListener=MJ(async()=>{await Promise.all(Mn(this,Hc).values().map(n=>n.flush()))},()=>Mn(this,$c).size>0)}subscribeToNewMessages$(e,n){this.subscriptionEffect&&this.subscriptionEffect(),this.subscriptionEffect=jl(()=>{const s=this.pinnedWidgetType$();if(!s)return;const o=this.conversationTurnSnapshot$(),i=Pc(this.conversation).slice(o.length);if(i.length===0)return;const l=WM(e,i,s);n(c=>{var u,m;return!c||l.toolOutput!=null?l:B(w({},l),{toolResponseMetadata:(u=l.toolResponseMetadata)!=null?u:c.toolResponseMetadata,toolOutput:(m=l.toolOutput)!=null?m:c.toolOutput})})})}setPinnedWidgetHeight(e){Mn(this,hm).set(e)}isPinned$(e){return this.pinnedWidgetType$()===e.widgetType}isPinOrigin$(e){return this.pinnedChatSDKId$()===e.widgetId}setDisplayMode$(e,n,s){ba(()=>{this.displayMode$.set(n),n==="fullscreen"?s&&this.title$.set(s):this.title$.set(null),n==="pip"||n==="fullscreen"?this.pinnedChatSDK$.set(e):this.pinnedChatSDK$.set(null)})}setWidgetState$(e,n){this.widgetStateCache.set(e,n);let s=Mn(this,Hc).get(e);s||(s=Mn(this,eh).call(this,e),Mn(this,Hc).set(e,s)),Mn(this,$c).add(e),s(n)}callTool$(e,n,s){return pe.safePost("/ecosystem/call_mcp",{requestBody:{app_uri:e,tool_name:n,tool_input:s}})}getWidgetStateAndProps(e){var n;return{toolInput:e.toolInput,toolOutput:e.toolOutput,toolResponseMetadata:e.toolResponseMetadata,widgetState:(n=this.widgetStateCache.get(e.widgetId))!=null?n:Pwe(e.metadata)}}fullscreenWidgetPlaceholder$(e){if(this.displayMode$()!=="fullscreen")return null;const n=this.pinnedChatSDK$();if(!n)return null;const s=Hwe(Qo(this.conversation.ctx),n);return s!=null&&s.name?e.formatMessage(He({id:"oECdDM",defaultMessage:"Ask {name}"}),{name:s.name}):null}}hm=new WeakMap,$c=new WeakMap,Hc=new WeakMap,eh=new WeakMap;const zwe=_d(t=>new Wwe(t)),WM=(t,e,n)=>{var s,o;for(let a=e.length-1;a>=0;a--){const i=e[a];for(let l=i.messageGroups.length-1;l>=0;l--){const c=i.messageGroups[l];if(c.type===or.JITPlugin)for(let d=c.messages.length-1;d>=0;d--){const u=c.messages[d];if((s=u.metadata)!=null&&s.chatgpt_sdk&&n===$1((o=u.metadata)==null?void 0:o.chatgpt_sdk))return Owe(c.messages)}}}return t};function RQe(){return!1}const qwe={apps:[],selectedApps:[]},LQe=Nt(jm(Cn(()=>qwe))),Ywe=async t=>{var n;const e=t.map(s=>s.id);if(e.length!==0)return(n=xW)==null?void 0:n.pairing.getContentForPairedApps(e)},OQe=async()=>{},DQe=({event:t,conversationMode:e,systemHints:n})=>{const{systemHints:s,extraStreamParams:o}=I1(n);return{sourceEvent:t,completionType:Xa.Continue,extraStreamParams:o,completionMetadata:{conversationMode:e,systemHints:s}}},FQe=async({ctx:t,clientThreadId:e,attachments:n,content:s,contentToSend:o,conversationMode:a,hasSelectedApps:i,desktopOrigin:l,shouldCollectSidebarContext:c,desktopSidebarContext:d,isMessageFollowupsEnabled:u,selectedApps:m,selectedGizmoTag:f,selectedRepos:p,selectedSources:g,selectedMCPConnectors:h,selectedConnectorIds:x,selectedSyncKnowledgeStoreIds:y,searchConnectorIds:b,noFullActionConnectorIds:v,startedWithByoMcp:S,sourceEvent:C,systemHints:k,allSystemHints:M,usedDictation:T,dictationEdited:E,dictationOriginalText:A,dictationAssetPointer:N,dictationAssetTTL:R,dictationAssetFormat:O,isN7jupdActive:D,isForceAllowCustomMcpModeEnabled:F,thinkingEffort:V})=>{var ge,Ne,je;const z=QS({namespace:sf.CompletionRequest,opts:{expectedTimingLogs:[{name:"prompt_submitted",expectedInMs:3e3}],debug:!1}});z.reset();const $=[],{targetedContent:Y}=lf.getState();if(i){const Te=await Ywe(m);Te&&$.push(yW(Te))}const Z=new Map;M.forEach(Te=>Z.set(Te.systemHint,Te)),(S||h&&h.some(Te=>Te.status==="ONLY_ME")||k.some(Te=>{var Fe;return(Fe=Z.get(Te))==null?void 0:Fe.isDangerous}))&&$.push(Ub("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));const Q=[],{rebaseSystemMessageContent:q}=uy.getState();q&&Q.push(vW(q));const X=w({},a);"gizmo"in X&&delete X.gizmo;let oe=X;if(l){const Te=it.newConversationGizmoId$();Te&&(oe={kind:Tt.GizmoInteraction,gizmo_id:Te},it.newConversationGizmoId$.set(void 0))}const se=k.includes(Ie.Search),de=k.includes(Ie.Research),ie=k.includes(Ie.Agent),ae=k.includes(Ie.Glaux),ce=k.includes(Ie.Slurm),ye=k.length===0,fe=se?Xu.CONVERSATION_COMPOSER_WEB_ICON:void 0,Ce=Lxe(),ee=Um(),te=Intl.DateTimeFormat().resolvedOptions().timeZone,le=l?Iwe({systemHints:k,isN7jupdActive:D}):void 0,re=Object.keys(ee).length>0,ve=(ge=zwe(ht(t,e)).pinnedChatSDK$())==null?void 0:ge.toolMessageId,_e=us(s,w(w(w(w(w(w(w(w(w(w(w(w(w(w({},n.length>0&&{attachments:n}),f&&{gizmo_id:f.gizmo.id}),g&&{caterpillar_selected_sources:de?hi(g):void 0,developer_mode_connector_ids:h==null?void 0:h.map(Te=>Te.id),selected_mcp_sources:de||ce||D&&F?h:void 0,selected_connector_ids:x?Array.from(x):void 0,selected_sync_knowledge_store_ids:y?Array.from(y):void 0,selected_sources:ce||ae||de||D||ye||ie?hi(g,ce||ae||ye):void 0}),p&&{selected_github_repos:[...(Ne=p.selectedRepos)!=null?Ne:[]],selected_all_github_repos:p.selectedAllRepos}),k.length>0&&{system_hints:k}),b&&b.length>0&&{search_connectors:b}),v&&v.length>0&&{no_full_action_connectors:v}),!!o.metadata&&{serialization_metadata:o.metadata}),ve?{chatgpt_sdk_focused_message_id:ve}:null),Ce.length>0&&{canvas:{user_created_textdocs:Ce.map(Te=>({user_created_temp_textdoc_id:Te.tempTextdocId,type:Te.type,title:Te.title,content:Te.content,create_source:Te.create_source,remix_shared_textdoc_id:Te.remixSharedTextdocId}))}}),re&&{__internal:{search_settings:re?ee:void 0}}),T&&w(w(w(w(w({dictation:!0},E&&{dictation_edited:!0}),A&&{dictation_original_text:A}),N&&{dictation_asset_pointer:N}),R&&{dictation_asset_ttl:R}),O&&{dictation_asset_format:O})),(de||D)&&te&&{user_timezone:te}),l?w(w({},await Lh(c&&d!=null?d:void 0,l,"user",k)),le!=null?le:{}):{}));let we={sourceEvent:C,completionMetadata:{conversationMode:oe,systemHints:k,searchSource:fe},promptMessage:_e,prependMessages:$,appendMessages:Q,thinkingEffort:V,profiler:z};const De={};if(we=jwe(we),(je=we.completionMetadata)!=null&&je.systemHints){let Te=!1;we.completionMetadata.systemHints=we.completionMetadata.systemHints.filter(Fe=>Fe===Ie.Search?(Te=!0,!1):!0),Te&&(De.forceUseSearch=!0)}return u&&(De.enableMessageFollowups=!0),we.extraStreamParams=De,Y!=null&&Y.createNewCompletionParams&&(we=await Y.createNewCompletionParams(we)),z.logTimingOnce("request_params_ready"),we},Zwe=t=>{"use forget";var v;const e=H.c(27),{clientThreadId:n,composerController:s,availableSystemHints:o}=t,a=G();let i;e[0]!==a?(i=bW(a),e[0]=a,e[1]=i):i=e[1];const l=i,c=ss(),d=g9(),u=qb(),m=h9(),f=_.useRef(void 0);let p;e:{if(!l){let T;e[2]===Symbol.for("react.memo_cache_sentinel")?(T={},e[2]=T):T=e[2],p=T;break e}let S,C;if(e[3]!==o){const T=(v=o==null?void 0:o.filter(Kwe))!=null?v:[],E=T.map(Qwe).flat().filter(Jwe),A=[];T.forEach(N=>{var R;(R=N.keywordInvocations)==null||R.forEach(O=>{A.push([O.toLowerCase(),N])})}),S=Object.fromEntries(A),C=E.length>0?new RegExp("^(".concat(E.join("|"),")\\s+"),"ig"):void 0,e[3]=o,e[4]=S,e[5]=C}else S=e[4],C=e[5];const k=C;let M;e[6]!==m||e[7]!==c||e[8]!==S||e[9]!==k?(M={activeSystemHintType:c,activeConnectorSystemTypes:m,keywordToSystemHintMap:S,regex:k},e[6]=m,e[7]=c,e[8]=S,e[9]=k,e[10]=M):M=e[10],p=M}const g=p;let h,x;e[11]!==s||e[12]!==g||e[13]!==l?(h=()=>{l&&SW(Et(s),g)},x=[s,g,l],e[11]=s,e[12]=g,e[13]=l,e[14]=h,e[15]=x):(h=e[14],x=e[15]),_.useEffect(h,x);let y,b;e[16]!==m||e[17]!==c||e[18]!==d||e[19]!==o||e[20]!==n||e[21]!==s||e[22]!==a||e[23]!==l||e[24]!==u?(y=()=>{if(!l)return;const S=C=>{var T;const k=Et(s),{matches:M}=(T=CW.getState(k.state))!=null?T:{};return{matches:M}};return Mo(()=>S(Oh(s)),C=>{const{matches:k}=C,M=f.current,T=new Set([...k!=null?k:[]].map(Xwe));f.current=T;const E=[...k!=null?k:[]].filter(D=>{const{systemHintType:F}=D;return!(M!=null&&M.has(F))}),A=[...M!=null?M:[]].filter(D=>!T.has(D));if(!k)return;const N=E.map(D=>({systemHint:o==null?void 0:o.find(F=>F.systemHint===D.systemHintType),keyword:D.keyword})),R=A.map(D=>o==null?void 0:o.find(F=>F.systemHint===D)),O=o==null?void 0:o.find(D=>D.systemHint===c);O&&!Yb(O.systemHint)||N.length>0&&!Co(a,"2350526063").get("has_suggestions_enabled",!0)||(N.forEach(D=>{const{systemHint:F,keyword:V}=D;F!=null&&F.isConnector&&!m.has(F.systemHint)&&(em(F.systemHint,tm.PrefixMatch,B(w({},An({clientThreadId:n})),{matched_keyword:V})),d(F.systemHint,{analyticsMetadata:{clientThreadId:n}}))}),R.forEach(D=>{D!=null&&D.isConnector&&m.has(D.systemHint)&&(em(D.systemHint,tm.PrefixRemove,w({},An({clientThreadId:n}))),u(D.systemHint,{analyticsMetadata:{clientThreadId:n}}))}))},{fireImmediately:!0,equals:Cm})},b=[s,n,d,u,o,c,m,l,a],e[16]=m,e[17]=c,e[18]=d,e[19]=o,e[20]=n,e[21]=s,e[22]=a,e[23]=l,e[24]=u,e[25]=y,e[26]=b):(y=e[25],b=e[26]),_.useEffect(y,b)};function Kwe(t){var e;return(e=t.keywordInvocations)==null?void 0:e.length}function Qwe(t){return t.keywordInvocations}function Jwe(t){return t!==void 0}function Xwe(t){const{systemHintType:e}=t;return e}function S3(t){const e=G(),n=ss(),s=ue(()=>t!=null&&ND(wn(ht(e,t)).id,n));return _.useMemo(()=>({isOdysseyMode:s}),[s])}function ND(t,e){return t===wW||fl(e)}const RD=t=>{"use forget";var O,D;const e=H.c(34),{clientThreadId:n}=t,s=ss(),o=_n(),a=yA();let i;e[0]!==o||e[1]!==a?(i=(o==null?void 0:o.isPersonalAccount())&&a,e[0]=o,e[1]=a,e[2]=i):i=e[2];const l=!!i,c=S3(n).isOdysseyMode,d=c||s===Ie.Research,u=ym(),f=!!(u!=null&&u.softmentionEnabled)&&d;let p;e[3]!==f?(p={enabled:f},e[3]=f,e[4]=p):p=e[4];const{connectedTypes:g,linkIdToConnectedType:h}=Mb(p);let x;e[5]!==f?(x={enabled:f},e[5]=f,e[6]=x):x=e[6];const{connectedTypes:y}=bA(x),{data:b}=SA();b==null||b.connection_statuses,u==null||u.connectorConfig;let v,S,C;if(e[7]!==s||e[8]!==(u==null?void 0:u.connectorConfig)||e[9]!==y||e[10]!==f||e[11]!==c||e[12]!==l||e[13]!==g||e[14]!==h||e[15]!==(b==null?void 0:b.connection_statuses)){const F=(O=b==null?void 0:b.connection_statuses.reduce(eke,new Set))!=null?O:new Set;let V=g;if(s===Ie.Research||c)V=y;else{const q=(D=b==null?void 0:b.connection_statuses.reduce((X,oe)=>{if(["activated","partially_activated"].includes(oe.user_connection_details.activation_status)&&oe.user_connection_details.backing_link_id){const se=h.get(oe.user_connection_details.backing_link_id);se&&X.add(se)}return X},new Set))!=null?D:new Set;V=new Set([...g].filter(X=>X===bt.GDRIVE_ACTION_CONNECTOR&&l&&F.has("gdrive_sync_connector")||q.has(X)?!1:!(X===bt.SHAREPOINT_CONNECTOR&&F.has("sharepoint_admin_sync_connector"))))}const z=(u==null?void 0:u.connectorConfig)||{},$={keywordSet:new Set,connectorToKeywordsMap:{},keywordsConnectorMap:{}},{keywordSet:Y,connectorToKeywordsMap:Z,keywordsConnectorMap:Q}=Object.entries(z).reduce((q,X)=>{const[oe,se]=X;if(V.has(oe)||F.has(oe)){const de=((se==null?void 0:se.keywords)||[]).map(tke);q.connectorToKeywordsMap[oe]=de,de.forEach(ie=>{q.keywordSet.add(ie),q.keywordsConnectorMap[ie]=oe})}return q},$);v=Z,S=Q,C=f?Array.from(Y):[],e[7]=s,e[8]=u==null?void 0:u.connectorConfig,e[9]=y,e[10]=f,e[11]=c,e[12]=l,e[13]=g,e[14]=h,e[15]=b==null?void 0:b.connection_statuses,e[16]=v,e[17]=S,e[18]=C}else v=e[16],S=e[17],C=e[18];let k;e[19]!==v||e[20]!==f?(k=f?v:{},e[19]=v,e[20]=f,e[21]=k):k=e[21];let M;e[22]!==f||e[23]!==S?(M=f?S:{},e[22]=f,e[23]=S,e[24]=M):M=e[24];let T;e[25]!==C||e[26]!==k||e[27]!==M?(T={filteredKeywords:C,connectorToKeywordsMap:k,keywordsConnectorMap:M},e[25]=C,e[26]=k,e[27]=M,e[28]=T):T=e[28];const{filteredKeywords:E,connectorToKeywordsMap:A,keywordsConnectorMap:N}=T;let R;return e[29]!==A||e[30]!==f||e[31]!==E||e[32]!==N?(R={enabled:f,keywords:E,connectorToKeywordsMap:A,keywordsConnectorMap:N},e[29]=A,e[30]=f,e[31]=E,e[32]=N,e[33]=R):R=e[33],R};function eke(t,e){return["activated","partially_activated"].includes(e.user_connection_details.activation_status)&&t.add(e.user_connection_details.connection_type),t}function tke(t){return t.toLowerCase()}const nke=({clientThreadId:t,composerController:e})=>{const{mentionedSources:n,addMentionedSource:s,deleteMentionedSource:o}=Ra(t),a=ss(),{setThreadSystemHintMode:i}=na(),l=S3(t).isOdysseyMode,c=_.useRef(l),{keywords:d,connectorToKeywordsMap:u,keywordsConnectorMap:m}=RD({clientThreadId:t});_.useEffect(()=>{_9(d,Et(e))},[e,d]);const f=_.useRef(a);_.useEffect(()=>{const x=f.current;f.current=a;const y=Et(e),b=c.current;if(c.current=l,b&&!l&&__(x_(y.state),y),(x===Ie.Slurm||x===Ie.Research)&&a==null){const v=x_(y.state);__(v,y),v.forEach(S=>o(m[S]))}},[a,e,o,l,m]);const p=_.useRef(n);_.useEffect(()=>{const x=p.current;if(p.current=n,!x)return;const y=Array.from(x).filter(v=>!(n!=null?n:new Set).has(v)),b=[];y.forEach(v=>{var S;b.push(...(S=u[v])!=null?S:[])}),__(b,Et(e))},[e,u,n]);const g=_.useRef([]),h=a!=null;_.useEffect(()=>{const x=b=>{if(g.current.length===0&&b.length>0&&!h){const C={clientThreadId:t};i(Ie.Slurm,!0,C)}const v=b.filter(C=>!g.current.includes(C)),S=g.current.filter(C=>!b.includes(C));v.forEach(C=>s(C)),S.forEach(C=>o(C)),g.current=b},y=b=>x_(b).map(v=>m[v.toLowerCase()]);return jl(()=>{x(kW(y(Oh(e))))})},[s,t,e,o,m,h,i])},BQe=({clientThreadId:t,currentModelId:e,isCompletionInProgress:n,composerController:s,expireConduit:o,availableSystemHints:a})=>{const i=G(),l=ss(),c=mb(b=>{var v,S;return(S=(v=b.threads[t])==null?void 0:v.prepareRequestBlocked)!=null?S:!1}),{isOpen:d}=goe();nke({clientThreadId:t,composerController:s}),Zwe({clientThreadId:t,composerController:s,availableSystemHints:a});const u=_.useRef(n);_.useEffect(()=>{u.current=n},[n]);const m=_.useRef(!1);_.useEffect(()=>{m.current=!1},[t]);const f=_.useCallback(b=>{u.current?o&&qe(t,v=>{v.conduitToken=null,v.prepareState=null}):qe(t,v=>{v.conduitToken=b,v.prepareState="success"})},[t,o]),p=_.useRef(null);p.current=()=>e&&Tse(t,e,l?[l]:void 0,f,{isRegen:!1,isOnboardingConversation:d,delayAfterCompletion:!0});const g=_.useCallback(()=>{var b;return(b=p.current)==null?void 0:b.call(p)},[]),h=_.useCallback(Eb(()=>g(),5e3,{leading:!0,trailing:!0}),[]),x=_.useRef(!1),y=Zb();return _.useEffect(()=>{if(y){if(!x.current){x.current=!0;return}u.current||c||m.current&&g()}},[y,t,e,l,c]),_.useEffect(()=>{h.cancel()},[n,h]),_.useEffect(()=>{if(!(n||!t1(i,!0)))return Mo(()=>Oh(s),()=>{m.current=!0,h()})},[n,s,h,i]),null},ske="side_chat",UQe="ntp",VQe="website";function GQe(t){"use forget";var d;const e=H.c(4),{clientThreadId:n,isKaur1br5Client:s}=t,o=yO(s?n:void 0);let a;e:{if(!o){a=null;break e}a=((d=o.metadata)==null?void 0:d.n7jupd_local_safe_mode)===!0?"incognito":"signedInAccounts"}const i=a;let l,c;return e[0]!==i||e[1]!==s?(l=()=>{s&&i&&it.agentSessionMode$()!==i&&it.agentSessionMode$.set(i)},c=[i,s],e[0]=i,e[1]=s,e[2]=l,e[3]=c):(l=e[2],c=e[3]),_.useEffect(l,c),o!=null}const oke="signedInAccounts";function ake(t){it.agentSessionMode$.set(t)}function rke(t){it.agentSafeModeHasSeenNux$.set(t)}function LD(t){ake(t);const e=Ed();e==null||e.updateAgentSafeMode(t)}function ike(t){rke(t);const e=Ed();e==null||e.updateAgentSafeModeHasSeenNux(t)}const ws=be({incognitoLabel:{id:"R+8byO",defaultMessage:"Start logged out"},incognitoDescription:{id:"Omk3s1",defaultMessage:"Let ChatGPT work alongside you logged out from your accounts."},incognitoMenuLabel:{id:"2E6cUi",defaultMessage:"Logged out"},signedInLabel:{id:"ajcZ1i",defaultMessage:"Start logged in"},signedInDescription:{id:"+aVek4",defaultMessage:"ChatGPT works alongside you using your logged in accounts."},signedInMenuLabel:{id:"dPv7uS",defaultMessage:"Logged in"},modalTitle:{id:"QvXNKA",defaultMessage:"Agent mode may introduce risk"},modalDescriptionIntroHeading:{id:"M46Qff",defaultMessage:"Agent mode may introduce risk."},modalDescriptionIntroBody:{id:"bwpgjC",defaultMessage:"In Agent mode, ChatGPT can perform complex tasks in the browser for you."},modalDescriptionLoggedInHeading:{id:"7YCY6E",defaultMessage:"Logged in:"},modalDescriptionLoggedInBody:{id:"6AOX4E",defaultMessage:'In "logged in" mode, ChatGPT can access your logged in sites, making it faster to complete tasks. ChatGPT is built to protect you, but there is always some risk that attackers could successfully break our safeguards to access your data, or take actions as you on logged in sites. You can use logged out mode to reduce risk.'},modalDescriptionLoggedOutHeading:{id:"seaiYG",defaultMessage:"Logged out:"},modalDescriptionLoggedOutBody:{id:"Gw4NKU",defaultMessage:'Use "logged out" mode to have Agent mode use sites without being logged in as you. You can still log ChatGPT agent into individual sites, allowing it to use just those sites logged in.'},modalIncognitoCta:{id:"JEr/J7",defaultMessage:"Start logged out"},modalSignedInCta:{id:"kGLOXd",defaultMessage:"Start logged in"},modalCancelCta:{id:"5anpHu",defaultMessage:"Cancel"}}),lke=t=>({introHeading:t.formatMessage(ws.modalDescriptionIntroHeading),introBody:t.formatMessage(ws.modalDescriptionIntroBody),loggedInHeading:t.formatMessage(ws.modalDescriptionLoggedInHeading),loggedInBody:t.formatMessage(ws.modalDescriptionLoggedInBody),loggedOutHeading:t.formatMessage(ws.modalDescriptionLoggedOutHeading),loggedOutBody:t.formatMessage(ws.modalDescriptionLoggedOutBody)}),cke=t=>["".concat(t.introHeading," ").concat(t.introBody),"".concat(t.loggedInHeading," ").concat(t.loggedInBody),"".concat(t.loggedOutHeading," ").concat(t.loggedOutBody)].join("\n\n"),dke=j(()=>I(()=>import("./okzny25t09iyl31t.js").then(t=>t._),__vite__mapDeps([350,1])),{loading:t=>L(t)});function uke(t){"use forget";const e=H.c(35),{isOpen:n,onClose:s,onModeSelected:o}=t,a=J(),i=ue(it.agentSessionMode$),l=i!=null?i:oke,c=ue(it.agentSafeModeHasSeenNux$);let d,u,m;e[0]!==a?(d=lke(a),u=a.formatMessage(ws.modalTitle),m=cke(d),e[0]=a,e[1]=d,e[2]=u,e[3]=m):(d=e[1],u=e[2],m=e[3]);let f;e[4]!==a?(f=a.formatMessage(ws.modalIncognitoCta),e[4]=a,e[5]=f):f=e[5];let p;e[6]!==a?(p=a.formatMessage(ws.modalSignedInCta),e[6]=a,e[7]=p):p=e[7];let g;e[8]!==a?(g=a.formatMessage(ws.modalCancelCta),e[8]=a,e[9]=g):g=e[9];let h;e[10]!==d||e[11]!==u||e[12]!==m||e[13]!==f||e[14]!==p||e[15]!==g?(h={title:u,description:m,descriptionSections:d,incognitoCta:f,signedInCta:p,cancelCta:g},e[10]=d,e[11]=u,e[12]=m,e[13]=f,e[14]=p,e[15]=g,e[16]=h):h=e[16];const x=h;let y,b;e[17]!==c||e[18]!==n?(y=()=>{n&&c===!1&&ike(!0)},b=[c,n],e[17]=c,e[18]=n,e[19]=y,e[20]=b):(y=e[19],b=e[20]),_.useEffect(y,b);let v;e[21]!==s||e[22]!==o?(v=k=>{LD(k),o==null||o(k),s()},e[21]=s,e[22]=o,e[23]=v):v=e[23];const S=v;let C;return e[24]!==S||e[25]!==n||e[26]!==x.cancelCta||e[27]!==x.description||e[28]!==x.descriptionSections||e[29]!==x.incognitoCta||e[30]!==x.signedInCta||e[31]!==x.title||e[32]!==l||e[33]!==s?(C=r.jsx(mke,{isOpen:n,onClose:s,selectedMode:l,onSelectMode:S,title:x.title,description:x.description,descriptionSections:x.descriptionSections,incognitoCta:x.incognitoCta,signedInCta:x.signedInCta,cancelCta:x.cancelCta}),e[24]=S,e[25]=n,e[26]=x.cancelCta,e[27]=x.description,e[28]=x.descriptionSections,e[29]=x.incognitoCta,e[30]=x.signedInCta,e[31]=x.title,e[32]=l,e[33]=s,e[34]=C):C=e[34],C}function mke(t){"use forget";const e=H.c(40),{isOpen:n,onClose:s,selectedMode:o,isSubmitting:a,onSelectMode:i,title:l,description:c,descriptionSections:d,incognitoCta:u,signedInCta:m,cancelCta:f}=t;let p;e[0]!==c||e[1]!==d?(p=d?r.jsxs("div",{className:"text-token-text-secondary space-y-3 text-sm md:text-base",children:[r.jsx("p",{children:d.introBody}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:d.loggedInHeading}),r.jsx("span",{children:d.loggedInBody})]}),r.jsxs("p",{children:[r.jsx("span",{className:"text-token-text-primary me-1 font-semibold",children:d.loggedOutHeading}),r.jsx("span",{children:d.loggedOutBody})]})]}):r.jsx("p",{className:"text-token-text-secondary text-sm whitespace-pre-line md:text-base",children:c}),e[0]=c,e[1]=d,e[2]=p):p=e[2];const g=p;let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx("div",{className:"bg-token-main-surface-secondary flex h-12 w-12 items-center justify-center rounded-full",children:r.jsx(dke,{className:"icon-xl text-token-text-primary"})}),e[3]=h):h=e[3];let x;e[4]!==l?(x=r.jsx("h2",{className:"text-token-text-primary text-lg font-semibold md:text-xl",children:l}),e[4]=l,e[5]=x):x=e[5];let y;e[6]!==g||e[7]!==x?(y=r.jsxs("div",{className:"flex flex-col gap-4",children:[h,r.jsxs("div",{className:"space-y-2",children:[x,g]})]}),e[6]=g,e[7]=x,e[8]=y):y=e[8];let b;e[9]!==f||e[10]!==a||e[11]!==s?(b=r.jsx(he,{color:"secondary",onClick:s,disabled:a,className:"md:text-base",children:f}),e[9]=f,e[10]=a,e[11]=s,e[12]=b):b=e[12];let v;e[13]!==i?(v=()=>i("incognito"),e[13]=i,e[14]=v):v=e[14];const S=o==="incognito"&&"font-medium";let C;e[15]!==S?(C=W("md:text-base",S),e[15]=S,e[16]=C):C=e[16];let k;e[17]!==u||e[18]!==a||e[19]!==v||e[20]!==C?(k=r.jsx(he,{color:"primary",onClick:v,disabled:a,className:C,children:u}),e[17]=u,e[18]=a,e[19]=v,e[20]=C,e[21]=k):k=e[21];let M;e[22]!==i?(M=()=>i("signedInAccounts"),e[22]=i,e[23]=M):M=e[23];const T=o==="signedInAccounts"&&"font-medium";let E;e[24]!==T?(E=W("md:text-base",T),e[24]=T,e[25]=E):E=e[25];let A;e[26]!==a||e[27]!==m||e[28]!==M||e[29]!==E?(A=r.jsx(he,{color:"primary",onClick:M,disabled:a,className:E,children:m}),e[26]=a,e[27]=m,e[28]=M,e[29]=E,e[30]=A):A=e[30];let N;e[31]!==A||e[32]!==b||e[33]!==k?(N=r.jsxs("div",{className:"flex flex-col-reverse gap-2 md:flex-row md:justify-end",children:[b,k,A]}),e[31]=A,e[32]=b,e[33]=k,e[34]=N):N=e[34];let R;return e[35]!==n||e[36]!==s||e[37]!==N||e[38]!==y?(R=r.jsxs(Pt,{isOpen:n,onClose:s,testId:"modal-aura-agent-session-mode-nux",size:"xlarge",contentClassName:"flex flex-col gap-6 p-8",children:[y,N]}),e[35]=n,e[36]=s,e[37]=N,e[38]=y,e[39]=R):R=e[39],R}function $Qe({isAgentHintActive:t,isAgentSessionModeDropdownEnabled:e=!1}){const n=Sn(),s=ue(it.agentSafeModeHasSeenNux$),[o,a]=_.useState(!1),i=_.useRef(null),l=n&&e&&t&&s!==!0,c=_.useCallback(()=>{a(!1),i.current=null},[]),d=_.useCallback(f=>l?(i.current=f,a(!0),!0):!1,[l]),u=_.useCallback(f=>{const p=i.current;if(i.current=null,!p)return;const g=()=>p(f);typeof queueMicrotask=="function"?queueMicrotask(g):Promise.resolve().then(g)},[]);return{agentSessionModeNuxModal:_.useMemo(()=>!n||!e||!o?null:r.jsx(uke,{isOpen:o,onClose:c,onModeSelected:u}),[c,u,o,n,e]),closeAgentSessionModeNux:c,ensureAgentSessionModeNux:d,isAgentSessionModeNuxOpen:o}}function HQe(){const t=G(),[e,n]=zs(),s=Sn();_.useEffect(()=>{if(s)return Mo(()=>IW(t),o=>{let a;if(o==="mainPage"||o==="new_page_view")a=EW,MW(t);else if(o==="sidebar"||o==="sidebar_view")a=AW,TW(t);else return;e.get(a.name)!==a.value&&n(i=>{const l=new URLSearchParams(i);return l.set(a.name,a.value),l},{replace:!0})},{fireImmediately:!0})},[t,s,e,n])}function WQe(t){const e=G(),n=cs(e),{setTargetedContent:s}=lf();_.useEffect(()=>{if(n)return yh(()=>it.wantsPopulatePrompt$(),()=>{it.wantsPopulatePrompt$.set(!1);const o=it.populatePrompt;o&&(o.userMessage&&bo(Et(t),o.userMessage),setTimeout(()=>{s(o.targetedReply?{type:"text",label:o.targetedReply,createNewCompletionParams:a=>{if(!o.targetedReply)return a;const i=Mh(o.targetedReply);return B(w({},a),{promptMessage:Gd(a.promptMessage,{metadata:{targeted_reply:o.targetedReply}}),appendMessages:a.appendMessages==null?[i]:[...a.appendMessages,i]})}}:void 0)},0))})},[n,t,s])}function fke(t){"use forget";const e=H.c(26),{size:n,triggerIcon:s,triggerButton:o,children:a,side:i,className:l,triggerIconClassName:c,sideOffset:d,alignOffset:u,open:m,onOpenChange:f,alignAgainstAnchor:p,disableAutofocus:g,modal:h}=t,x=n===void 0?"default":n,y=i===void 0?"bottom":i,b=d===void 0?10:d,v=u===void 0?0:u,S=p===void 0?"center":p,C=g===void 0?!1:g,k=h===void 0?!1:h,M=jW();let T;e[0]!==s||e[1]!==o||e[2]!==c?(T=s?r.jsx(br,{className:W("hover:bg-token-main-surface-secondary rounded-lg p-2",c),children:r.jsx(s,{className:"icon"})}):r.jsx(br,{asChild:!0,children:o}),e[0]=s,e[1]=o,e[2]=c,e[3]=T):T=e[3];let E;e[4]!==C?(E=F=>{C&&F.preventDefault()},e[4]=C,e[5]=E):E=e[5];const A=x==="default";let N;e[6]!==l||e[7]!==A?(N=W({"max-w-xs min-w-[200px]":A},l),e[6]=l,e[7]=A,e[8]=N):N=e[8];let R;e[9]!==S||e[10]!==v||e[11]!==a||e[12]!==y||e[13]!==b||e[14]!==N||e[15]!==E?(R=r.jsx(Nh,{$as:Bl,side:y,sideOffset:b,alignOffset:v,align:S,collisionPadding:10,onOpenAutoFocus:E,className:N,children:a}),e[9]=S,e[10]=v,e[11]=a,e[12]=y,e[13]=b,e[14]=N,e[15]=E,e[16]=R):R=e[16];let O;e[17]!==M||e[18]!==R?(O=r.jsx(Fl,B(w({},M),{children:R})),e[17]=M,e[18]=R,e[19]=O):O=e[19];let D;return e[20]!==k||e[21]!==f||e[22]!==m||e[23]!==O||e[24]!==T?(D=r.jsxs(Dl,{open:m,onOpenChange:f,modal:k,children:[T,O]}),e[20]=k,e[21]=f,e[22]=m,e[23]=O,e[24]=T,e[25]=D):D=e[25],D}function C3(t){"use forget";const e=H.c(2);t.triggerIcon&&t.triggerButton;let n;return e[0]!==t?(n=r.jsx(fke,w({},t)),e[0]=t,e[1]=n):n=e[1],n}function zM(t,e){return t.connector===e.connector&&t.type===e.type}const pke=()=>Nt((t,e)=>({_messages:[],_dismissedMessages:[],getFirstMessage:()=>{var s;return(s=e()._messages[0])!=null?s:null},appendMessageIfNotDismissed:n=>{t(s=>s._messages.some(o=>zM(o,n))||s._dismissedMessages.some(o=>zM(o,n))?s:B(w({},s),{_messages:[...s._messages,n]}))},dismissMessage:n=>{t(s=>s._messages.includes(n)?B(w({},s),{_messages:s._messages.filter(o=>o!==n),_dismissedMessages:[...s._dismissedMessages,n]}):s)},clearMessages:()=>{t(n=>n._messages.length||n._dismissedMessages.length?B(w({},n),{_messages:[],_dismissedMessages:[]}):n)}})),gke=pke(),hke=_.createContext(gke);function $g(){const t=_.useContext(hke);return Db(t)}const hv="open-connector";function _ke(){const t=at(),e=ls(),[n]=zs(),s=n.get(hv),o=_.useCallback(()=>{const i=new URLSearchParams(e.search);i.delete(hv),t(B(w({},e),{search:i.toString()}),{replace:!0})},[e,t]);return{connector:Object.values(Ft).find(i=>i===s),clearParam:o}}async function xke(t,e,n,s){if(!e)return;n();let o="";s===qc.Picker&&(o="".concat(hv,"=").concat(e.type)),t!=null||(t="/"),o&&(t.includes("?")?t+="&".concat(o):t+="?".concat(o)),PW({id:e.id},NW(s),"".concat(window.location.origin,"/ccc/").concat(e.id,"/oauth/callback"),t)}function yke(t,e){t.access_token&&t.expires_at!=null&&t.expires_at*1e3<=Date.now()&&ma.expiredAccessTokenUsed(t.type,e)}function vke(t,e,n,s,o,a,i,l){ar.uploadFile(t,ol(e),e,l!=null?l:vo.Retrieval,n,s,o,{gizmoId:i},a)}function bke(t,e,n,s,o,a,i,l,c){let d=e.title;n===Ft.GDRIVE&&(d=e.syntheticExtension?"".concat(e.title,".").concat(e.syntheticExtension):e.title);const u=e.mimeType.split(";")[0],m=u.startsWith("image/");if((o==null?void 0:o.includes(u))===!1||m&&!s.includes(u)){c.danger(l.formatMessage(qM.unsupportedFileType,{fileName:d}),B(w({},RW),{toastId:"ccc_upload_file",loggingTitle:qM.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}));return}ar.uploadFile(t,e.id,new File([],d,{type:u}),vo.Retrieval,s,l,c,{gizmoId:i},a,{contextConnector:n,sourceUrl:e.url,syntheticExtension:e.syntheticExtension,type:qc.Picker,o365DriveId:e.o365DriveId})}const qM=be({unsupportedFileType:{id:"ContextConnectorUtils.unsupportedFileType",defaultMessage:"{fileName} is not a supported file type"}}),ni={uploadFile:vke,uploadPickedFile:bke,doContextConnectorOauthRedirect:xke,logAttemptIfAccessTokenIsExpired:yke},Ske=j(()=>I(()=>import("./eetxjvcpvrpbo7qr.js").then(t=>t._),__vite__mapDeps([351,1])),{loading:t=>L(t)}),YM=j(()=>I(()=>import("./b25488i064kv0fy8.js").then(t=>t._),__vite__mapDeps([152,1])),{loading:t=>L(t)}),ZM=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),Cke=j(()=>I(()=>import("./kl3c7pa639r7ky2c.js").then(t=>t._),__vite__mapDeps([313,1])),{loading:t=>L(t)}),wke=j(()=>I(()=>import("./mhp2kzvwnqoxwf6q.js").then(t=>t._),__vite__mapDeps([314,1])),{loading:t=>L(t)}),kke=j(()=>I(()=>import("./pe47guieqa4pccw0.js").then(t=>t._),__vite__mapDeps([316,1])),{loading:t=>L(t)}),Mke=j(()=>I(()=>import("./mqkppnsks40c5l5b.js").then(t=>t._),__vite__mapDeps([272,1])),{loading:t=>L(t)}),Tke=j(()=>I(()=>import("./lbr5dcyofn0xux3u.js").then(t=>t._),__vite__mapDeps([273,1])),{loading:t=>L(t)}),Eke=j(()=>I(()=>import("./jqab1cg1m48dccx8.js").then(t=>t._),__vite__mapDeps([23,1])),{loading:t=>L(t)}),OD=j(()=>I(()=>import("./fdkwc23ton7ihjd6.js").then(t=>t._),__vite__mapDeps([277,1])),{loading:t=>L(t)}),Ake=j(()=>I(()=>import("./gmvm3a44s5px1mmy.js").then(t=>t._),__vite__mapDeps([279,1])),{loading:t=>L(t)}),DD=j(()=>I(()=>import("./o6v567j44kxgowzp.js").then(t=>t._),__vite__mapDeps([352,1])),{loading:t=>L(t)}),Ike=j(()=>I(()=>import("./n5fd4985ipltjznc.js").then(t=>t._),__vite__mapDeps([353,1])),{loading:t=>L(t)}),FD=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),jke=j(()=>I(()=>import("./foxtdwhog9l3iocy.js").then(t=>t._),__vite__mapDeps([354,1])),{loading:t=>L(t)}),KM=j(()=>I(()=>import("./nnak5qlpz7soad97.js").then(t=>t._),__vite__mapDeps([355,1])),{loading:t=>L(t)});function zQe({onOauthRedirect:t}){const{connectorConfig:e,isLoading:n}=LW(),s=$g(),o=G(),a=xe(o,"1242184140"),{getFirstMessage:i}=s,l=i(),c=l?e.get(l.connector):null,d=n||!c,u=a?Pke:Nke,m=_.useMemo(()=>{if(d||!l)return null;switch(l.type){case"not-connected":return r.jsx(u,{unconnectedMessage:l,onOauthRedirect:t,entry:c})}},[u,d,c,l,t]),{dismissMessage:f}=$g(),p=_.useCallback(g=>{!g&&l&&!d&&f(l)},[d,f,l]);return r.jsx(C3,{size:"none",open:!d,onOpenChange:p,side:"top",sideOffset:4,triggerButton:r.jsx("button",{type:"button",name:"context-connector-pasted-link-popover-trigger",suppressHydrationWarning:!0,className:"invisible absolute self-center","aria-hidden":!0,tabIndex:-1}),children:m})}function Pke({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=$g(),o=J(),a=zp(t.connector,o),i=Rke(t.connector),l=()=>{ma.oauthUpsellButtonClick(n.type,"link"),ni.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,qc.Link)},c=()=>{ma.oauthUpsellButtonClick(n.type,"not-now"),s(t)};return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-2 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-5 flex flex-row gap-2",children:[r.jsx(Oke,{icon:i}),r.jsx("span",{className:"text-sm font-bold",children:r.jsx(P,B(w({},si.connectTo),{values:{connectorName:a}}))})]}),r.jsx("span",{className:"text-token-text-secondary mb-5 text-sm",children:r.jsx(P,B(w({},si.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(he,{color:"primary",onClick:l,children:r.jsx(P,w({},si.connect))}),r.jsx(he,{color:"secondary",onClick:c,children:r.jsx(P,w({},si.notNow))})]})]})}function Nke({unconnectedMessage:t,onOauthRedirect:e,entry:n}){const{dismissMessage:s}=$g(),o=J(),a=zp(t.connector,o),{icon1:i,icon2:l,icon3:c,icon4:d}=Lke(t.connector);return r.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-4 sm:w-[384px]",children:[r.jsxs("div",{className:"mb-3 flex flex-row gap-2 self-center",children:[r.jsx(sp,{icon:i,rotation:-6}),r.jsx(sp,{icon:l,rotation:6}),r.jsx(sp,{icon:c,rotation:-6}),r.jsx(sp,{icon:d,rotation:6})]}),r.jsx("span",{className:"mb-3 text-lg font-semibold",children:r.jsx(P,B(w({},si.connectTo),{values:{connectorName:a}}))}),r.jsx("span",{className:"text-token-text-secondary mb-4 text-sm",children:r.jsx(P,B(w({},si.description),{values:{connectorName:a}}))}),r.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[r.jsx(he,{color:"primary",onClick:()=>{ma.oauthUpsellButtonClick(n.type,"link"),ni.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,e,qc.Link)},children:r.jsx(P,w({},si.connect))}),r.jsx(he,{color:"secondary",onClick:()=>{ma.oauthUpsellButtonClick(n.type,"not-now"),s(t)},children:r.jsx(P,w({},si.notNow))})]})]})}function Rke(t){switch(t){case Ft.CONFLUENCE:return r.jsx(jke,{width:20,height:20});case Ft.GDRIVE:return r.jsx(FD,{width:20,height:20});case Ft.JIRA:return r.jsx(Ike,{width:20,height:20});case Ft.NOTION_OPEN_CONNECTOR:return r.jsx(Ake,{width:20,height:20});case Ft.O365:case Ft.O365_BUSINESS:case Ft.O365_PERSONAL:return r.jsx(DD,{width:20,height:20});case Ft.SLACK_OPEN_CONNECTOR:return r.jsx(OD,{width:20,height:20})}x9(t)}function Lke(t){switch(t){case Ft.GDRIVE:return{icon1:r.jsx(FD,{}),icon2:r.jsx(Eke,{}),icon3:r.jsx(Mke,{}),icon4:r.jsx(Tke,{})};case Ft.O365:case Ft.O365_BUSINESS:case Ft.O365_PERSONAL:return{icon1:r.jsx(DD,{}),icon2:r.jsx(Cke,{}),icon3:r.jsx(wke,{}),icon4:r.jsx(kke,{})};case Ft.CONFLUENCE:case Ft.JIRA:case Ft.NOTION_OPEN_CONNECTOR:return{icon1:r.jsx(Ske,{}),icon2:r.jsx(KM,{}),icon3:r.jsx(ZM,{}),icon4:r.jsx(YM,{})};case Ft.SLACK_OPEN_CONNECTOR:return{icon1:r.jsx(OD,{}),icon2:r.jsx(KM,{}),icon3:r.jsx(ZM,{}),icon4:r.jsx(YM,{})}}x9(t)}const Oke=({icon:t})=>r.jsx("div",{className:W("flex h-[20px] w-[20px]"),children:r.jsx("div",{className:"object-contain",children:t})});function sp({rotation:t,icon:e}){return r.jsx("div",{className:W("flex h-[44px] w-[44px] items-center justify-center rounded-xl border border-[#EDEDF2] bg-white shadow-[0_1px_12px_0px_#0000000B]"),style:{transform:"rotate(".concat(t,"deg)")},children:r.jsx("div",{className:"object-contain",children:e})})}const si=be({connectTo:{id:"ContextConnectorPastedLinkPopover.connectTo",defaultMessage:"Connect to {connectorName}"},description:{id:"ContextConnectorPastedLinkPopover.description",defaultMessage:"Connect ChatGPT to {connectorName} to reference the content from this link."},notNow:{id:"ContextConnectorPastedLinkPopover.notNow",defaultMessage:"Not now"},connect:{id:"ContextConnectorPastedLinkPopover.connect",defaultMessage:"Connect"},addFromGdriveDescription:{id:"ContextConnectorPastedLinkPopover.addFromDriveDescription",defaultMessage:"To add files from Google Drive, upload them directly to your message."},addFromGdriveNotNow:{id:"ContextConnectorPastedLinkPopover.addFromDriveNotNow",defaultMessage:"Not now"},addFromGdriveUploadFile:{id:"ContextConnectorPastedLinkPopover.addFromDriveUploadFile",defaultMessage:"Upload file"}}),Dke="77377267392",BD="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk";var Fke=(t=>(t.OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",t.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",t.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",t.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",t.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",t))(Fke||{});let mx=null;function UD(t){return mx==null&&(mx=Bke().then(()=>(gapi.client.setToken({access_token:t}),gapi.client.init({apiKey:BD,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),mx}function Bke(){return new Promise((t,e)=>{const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.onload=t,n.onerror=e,document.documentElement.appendChild(n)}).then(()=>Promise.all([new Promise(t=>gapi.load("client",t)),new Promise(t=>gapi.load("client:picker",t))]))}async function Uke(t,e,n,s){await UD(n);async function o(u){switch(u.action){case google.picker.Action.PICKED:{ma.filePickerPicked(Ft.GDRIVE,u.docs.length);const m=u.docs.map(f=>({connector:e,id:f.id,title:f.name,mimeType:f.mimeType,url:f.url,syntheticExtension:f.type==="document"?OW(f.mimeType):null}));s(m);break}case google.picker.Action.CANCEL:ma.filePickerCancelled(Ft.GDRIVE);return;case"loaded":{ma.filePickerLoaded(Ft.GDRIVE);return}}}const a=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(!1).setMode(google.picker.DocsViewMode.LIST);let i="en";QM.includes(t)?i=t:QM.includes(t.split("-")[0])&&(i=t.split("-")[0]);const l=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(BD).setAppId(Dke).setOAuthToken(n).addView(a).setCallback(o).setLocale(i).build();ma.filePickerStarted(Ft.GDRIVE),l.setVisible(!0);const c=Vke(),d=()=>{ma.filePickerCancelled(Ft.GDRIVE),l.setVisible(!1),c==null||c.removeEventListener("click",d)};c==null||c.addEventListener("click",d)}function Vke(){var e;if(typeof window>"u")return null;const t=(e=window.document.body.querySelector("div.picker-dialog-bg"))!=null?e:window.document.body.querySelector("div.oai-picker-dialog-bg");return t==null||t.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-1000"),t==null||t.classList.remove("picker-dialog-bg"),t}const QM=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"],Gke=j(()=>I(()=>import("./gs5bu6f3nr32m7h6.js"),__vite__mapDeps([356,1,29,30])).then(t=>t.GoogleDriveOAuthModal)),$ke=j(()=>I(()=>import("./d8qw1bl2m42jcptw.js"),__vite__mapDeps([357,1,29,30])).then(t=>t.OneDrivePickerModal));function qQe(t){"use forget";var A,N;const e=H.c(32),{connectorConfig:n,modelSupportedImageMimeTypes:s,modelAcceptedMimeTypes:o,attachmentsProductFeature:a,onOauthRedirect:i}=t,l=G(),c=J(),d=Ut(),u=Ci(),{getGizmoId:m}=Kb(),f=(N=(A=ym())==null?void 0:A.enabled)!=null?N:!1,[p,g]=_.useState();let h,x;e[0]!==m?(h=()=>{m?m().then(R=>g(R)):g(void 0)},x=[m],e[0]=m,e[1]=h,e[2]=x):(h=e[1],x=e[2]),_.useEffect(h,x);let y;e[3]!==a||e[4]!==u||e[5]!==p||e[6]!==c||e[7]!==o||e[8]!==s||e[9]!==d?(y=(R,O)=>ni.uploadPickedFile(u,R,O,s,o,a,p,c,d),e[3]=a,e[4]=u,e[5]=p,e[6]=c,e[7]=o,e[8]=s,e[9]=d,e[10]=y):y=e[10];const b=y,v=_.useRef(!1);let S;e[11]!==l||e[12]!==f||e[13]!==i?(S=R=>{if(R.type===Ft.GDRIVE&&f&&!v.current){gt(l,Gke,{onContinue:()=>{v.current=!0,S(R)}});return}ni.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,R,i,qc.Picker),i()},e[11]=l,e[12]=f,e[13]=i,e[14]=S):S=e[14];let C;e[15]!==a||e[16]!==u||e[17]!==p||e[18]!==c||e[19]!==o||e[20]!==s||e[21]!==d?(C=R=>{ni.uploadPickedFile(u,R,Ft.GDRIVE,s,o,a,p,c,d)},e[15]=a,e[16]=u,e[17]=p,e[18]=c,e[19]=o,e[20]=s,e[21]=d,e[22]=C):C=e[22];const k=C;let M;e[23]!==n||e[24]!==l||e[25]!==S||e[26]!==k||e[27]!==b?(M=R=>{const{access_token:O}=R;if(!O){S(R);return}ni.logAttemptIfAccessTokenIsExpired(R,qc.Picker);e:switch(R.type){case Ft.GDRIVE:{Uke(Nn(l).locale,R.type,O,D=>D.forEach(k));break e}case Ft.O365_PERSONAL:case Ft.O365_BUSINESS:{const D=R.type?n.get(R.type):null;D!=null&&D.access_token&&D.onedrive_endpoint_hint&&gt(l,$ke,{accessToken:D.access_token,oneDriveURL:D.onedrive_endpoint_hint,uploadPickedFile:b});break e}}},e[23]=n,e[24]=l,e[25]=S,e[26]=k,e[27]=b,e[28]=M):M=e[28];const T=M;let E;return e[29]!==S||e[30]!==T?(E={onSelectConnector:T,onConnectorOauthRedirect:S},e[29]=S,e[30]=T,e[31]=E):E=e[31],E}function YQe(t,e){"use forget";const n=H.c(6),{connector:s,clearParam:o}=_ke();let a,i;n[0]!==o||n[1]!==s||n[2]!==t||n[3]!==e?(a=()=>{const l=s!=null&&Array.from(t.values()).find(c=>c.type===s&&!!c.access_token);l&&(e(l),o())},i=[t,s,o,e],n[0]=o,n[1]=s,n[2]=t,n[3]=e,n[4]=a,n[5]=i):(a=n[4],i=n[5]),_.useEffect(a,i)}const VD=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z"})),Pr=Object.freeze(Object.defineProperty({__proto__:null,default:VD},Symbol.toStringTag,{value:"Module"})),Hke=j(()=>I(()=>import("./bci083mws0hai8bl.js").then(t=>t._),__vite__mapDeps([186,1])),{loading:t=>L(t)}),Wke=j(()=>I(()=>import("./d63jm146253lx3xq.js").then(t=>t._),__vite__mapDeps([241,1])),{loading:t=>L(t)}),zke=j(()=>I(()=>import("./mpv78j7w75btco0v.js").then(t=>t._),__vite__mapDeps([46,1])),{loading:t=>L(t)}),qke=j(()=>I(()=>Promise.resolve().then(()=>JS),void 0),{loading:t=>L(t)});function Yke({isOpen:t,onClose:e,markAsViewed:n}){const s=J();return r.jsx(Pt,{testId:"modal-memory-alpha",isOpen:t,onClose:e,showCloseButton:!0,size:"custom",type:"success",className:"max-w-xl",title:s.formatMessage({id:"MoonshineAlphaAnnouncement.title",defaultMessage:"You're testing memory improvements"}),footerContent:r.jsxs("div",{className:"ms-1 mt-4 flex w-full justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Wke,{className:"icon text-token-text-secondary me-1.5 inline-block"}),r.jsx("a",{href:"https://help.openai.com/en/articles/10303002-how-does-memory-use-past-conversations",target:"_blank",rel:"noopener noreferrer",onClick:()=>{n&&n(),e()},className:"text-token-text-secondary font-medium",children:s.formatMessage({id:"MoonshineAlphaAnnouncement.secondaryButton",defaultMessage:"Learn more"})})]}),r.jsx("div",{children:r.jsx(so.Button,{title:s.formatMessage({id:"MoonshineAlphaAnnouncement.primaryButton",defaultMessage:"Got it"}),color:"secondary",className:"text-base",onClick:e})})]}),children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(zke,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.chatTitle",defaultMessage:"ChatGPT now uses all past chats"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.chatText",defaultMessage:"All past chats will inform responses, not just saved memories."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(qke,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.optInTitle",defaultMessage:"You're in control"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.optInText",defaultMessage:"Use temporary chats for topics you don't want remembered."})})]})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx(Hke,{className:"icon-lg text-token-text-secondary me-3 mt-1 inline-block"}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-medium",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.optOutText",defaultMessage:"Opt out any time"})}),r.jsx("span",{className:"text-token-text-secondary font-normal",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.settingsLink",defaultMessage:"Visit {settingsLink} to turn off improved memory.",values:{settingsLink:r.jsx(Aa,{to:fd(Bn.Personalization),onClick:()=>{n&&n()},className:"underline",children:r.jsx(P,{id:"MoonshineAlphaAnnouncement.settingsLinkWord",defaultMessage:"Settings"})})}})})]})]})]})})}const w3=Ye.hasSeenMoonshineNux;function ZQe(){"use forget";const t=H.c(17),[e,n]=_.useState(!1),{markAsViewed:s}=$e(w3);let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{n(!0)},t[0]=o):o=t[0];const a=o;let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{n(!1)},t[1]=i):i=t[1];const l=i;let c;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=[],t[2]=c):c=t[2],_.useEffect(Zke,c);let d,u;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{a(),Ee.count(Ae.MOONSHINE,"announcement.learn_more_clicked"),U.logEventWithStatsig("ChatGPT Moonshine: CTA Clicked","chatgpt_moonshine_announcement_cta_clicked")},u=r.jsx(P,{id:"MoonshineAnnouncement.secondaryCtaText",defaultMessage:"Learn more"}),t[3]=d,t[4]=u):(d=t[3],u=t[4]);let m;t[5]!==s?(m=()=>{Ee.count(Ae.MOONSHINE,"announcement.close_clicked"),U.logEventWithStatsig("ChatGPT Moonshine: Announcement Closed","chatgpt_moonshine_announcement_closed"),s()},t[5]=s,t[6]=m):m=t[6];let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsxs("div",{className:"flex items-center gap-2 font-bold",children:[r.jsx(P,{id:"MoonshineAnnouncement.heading",defaultMessage:"You're testing memory improvements"}),r.jsx(DW,{})]}),t[7]=f):f=t[7];let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsxs("div",{className:"grow",children:[f,r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(P,{id:"MoonshineAnnouncement.description",defaultMessage:"ChatGPT can now reference past chats, not just saved memories."})})]}),t[8]=p):p=t[8];let g;t[9]!==m?(g=r.jsx(mn,{onSecondaryCtaClick:d,secondaryCtaText:u,onDismiss:m,content:p}),t[9]=m,t[10]=g):g=t[10];let h;t[11]!==e||t[12]!==s?(h=e&&r.jsx(Yke,{isOpen:e,markAsViewed:s,onClose:()=>{l(),s()}}),t[11]=e,t[12]=s,t[13]=h):h=t[13];let x;return t[14]!==g||t[15]!==h?(x=r.jsxs(r.Fragment,{children:[g,h]}),t[14]=g,t[15]=h,t[16]=x):x=t[16],x}function Zke(){Ee.count(Ae.MOONSHINE,"nux.shown"),U.logEventWithStatsig("ChatGPT Moonshine: Announcement Shown","chatgpt_moonshine_announcement_shown")}function GD(){"use forget";const t=Yh(),{eligible:e,isLoading:n}=$e(w3);return t&&e&&!n}function KQe(){"use forget";const t=H.c(4),e=Yh(),{markAsViewed:n,eligible:s}=$e(w3);let o;return t[0]!==s||t[1]!==e||t[2]!==n?(o=()=>{!e||!s||(Ee.count(Ae.MOONSHINE,"nux.implicit_close"),n())},t[0]=s,t[1]=e,t[2]=n,t[3]=o):o=t[3],o}const Kke=j(()=>I(()=>import("./d2d1p33trde830sx.js").then(t=>t._),__vite__mapDeps([358,1])),{loading:t=>L(t)}),Qke=j(()=>I(()=>import("./dzlsnt42nnmwuxsc.js").then(t=>t._),__vite__mapDeps([136,1])),{loading:t=>L(t)}),k3=t=>{"use forget";const e=H.c(61),{pressed:n,disabled:s,icon:o,label:a,ariaLabel:i,animatedLabel:l,showLabel:c,onClick:d,splitButtonDropdownContent:u,showSplitButton:m,dropdownContent:f,dataTestid:p,splitSecondaryButton:g,tooltip:h,as:x}=t,y=m===void 0?!0:m,b=x===void 0?"popover":x,[v,S]=_.useState(!1),[C,k]=_.useState(!1),M=FW(),T=!s&&n;let E;e[0]!==a?(E=a&&r.jsx("div",{className:"ps-1 pe-1 font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:a}),e[0]=a,e[1]=E):E=e[1];const A=E,N=!!u;let R;e[2]!==N?(R=W("flex h-full min-w-8 items-center justify-center p-2",{"pe-1.5":N}),e[2]=N,e[3]=R):R=e[3];let O;e[4]===Symbol.for("react.memo_cache_sentinel")?(O=()=>k(!1),e[4]=O):O=e[4];let D;e[5]!==f||e[6]!==d?(D=Ne=>{f||(k(!0),d(Ne))},e[5]=f,e[6]=d,e[7]=D):D=e[7];const F=!l&&c?A:null;let V;e[8]!==l||e[9]!==A||e[10]!==M||e[11]!==c?(V=l&&r.jsx(dn,{initial:!1,children:c&&r.jsx(Xe.span,{initial:{x:-10,width:0,opacity:0},animate:{x:0,width:"fit-content",opacity:1},exit:{x:-10,width:0,opacity:0},transition:{ease:"easeOut",duration:M?0:.15},children:A})}),e[8]=l,e[9]=A,e[10]=M,e[11]=c,e[12]=V):V=e[12];let z;e[13]!==i||e[14]!==p||e[15]!==s||e[16]!==o||e[17]!==n||e[18]!==R||e[19]!==D||e[20]!==F||e[21]!==V?(z=r.jsxs("button",{className:R,"data-testid":p,"aria-pressed":n,"aria-label":i,disabled:s,onTransitionEnd:O,onClick:D,children:[o,F,V]}),e[13]=i,e[14]=p,e[15]=s,e[16]=o,e[17]=n,e[18]=R,e[19]=D,e[20]=F,e[21]=V,e[22]=z):z=e[22];const $=z;let Y;e[23]!==$||e[24]!==h?(Y=h?h($):$,e[23]=$,e[24]=h,e[25]=Y):Y=e[25];const Z=Y;let Q;e[26]!==v?(Q=v?r.jsx(Kke,{className:"icon"}):r.jsx(Qke,{className:"icon"}),e[26]=v,e[27]=Q):Q=e[27];const q=Q;let X;e[28]===Symbol.for("react.memo_cache_sentinel")?(X={type:"tween",duration:.15,ease:"easeInOut"},e[28]=X):X=e[28];const oe=X;let se;e[29]!==M?(se=M?qR:{opacity:{delay:.1},default:oe},e[29]=M,e[30]=se):se=e[30];const de=se;let ie;e[31]!==b||e[32]!==f||e[33]!==u?(ie=u||f?b==="popover"?r.jsx(Fl,{children:r.jsx(Nh,{className:"p-0",$as:Bl,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:f!=null?f:u})}):r.jsx(K.Portal,{children:r.jsx(K.Content,{children:f!=null?f:u})}):null,e[31]=b,e[32]=f,e[33]=u,e[34]=ie):ie=e[34];const ae=ie;let ce;e[35]!==b||e[36]!==Z?(ce=b==="popover"?r.jsx(br,{asChild:!0,children:Z}):r.jsx(K.Trigger,{asChild:!0,children:Z}),e[35]=b,e[36]=Z,e[37]=ce):ce=e[37];const ye=ce;let fe;e[38]!==de||e[39]!==b||e[40]!==q||e[41]!==s||e[42]!==T?(fe=b==="popover"?r.jsx(br,{asChild:!0,children:r.jsx("button",{className:"border-token-border-default border-s p-2",style:{borderColor:T?"#0285FF0D":void 0},disabled:s,children:q})}):r.jsx(Xe.div,{initial:{width:0,opacity:0,padding:0},animate:{width:"auto",opacity:1,padding:"0.5rem"},exit:{width:0,opacity:0,padding:0,borderInlineStart:"unset"},transition:de,style:{overflow:"hidden",border:"unset",borderInlineStart:"solid 1px",borderColor:T?"#0285FF0D":"var(--border-default)"},children:r.jsx(K.Trigger,{asChild:!0,children:r.jsx("button",{style:{padding:0,backgroundColor:"transparent",height:"100%",borderRadius:"unset",color:T?"var(--interactive-label-accent-default)":void 0},disabled:s,children:q})})}),e[38]=de,e[39]=b,e[40]=q,e[41]=s,e[42]=T,e[43]=fe):fe=e[43];const Ce=fe,ee=!n,te=!!T,le=!T;let re;e[44]!==s||e[45]!==C||e[46]!==ee||e[47]!==te||e[48]!==le?(re=W("radix-state-open:bg-black/10 inline-flex h-9 rounded-full border text-[13px] font-medium",{"duration-75 motion-safe:transition-all":C,"text-token-text-secondary":ee,"text-token-interactive-label-accent-default bg-token-composer-blue-bg border-transparent hover:bg-[#BDDCF4] dark:bg-[#2A4A6D] dark:text-[#48AAFF] dark:hover:bg-[#1A416A]":te,"border-token-border-default hover:bg-token-main-surface-secondary focus-visible:outline-black dark:focus-visible:outline-white":le,"opacity-30":s}),e[44]=s,e[45]=C,e[46]=ee,e[47]=te,e[48]=le,e[49]=re):re=e[49];const ve=f?ye:Z,_e=!f&&u&&y?Ce:null;let we;e[50]!==_e?(we=r.jsx(dn,{children:_e}),e[50]=_e,e[51]=we):we=e[51];let De;e[52]!==g||e[53]!==re||e[54]!==ve||e[55]!==we?(De=r.jsxs("div",{className:re,children:[ve,we,g]}),e[52]=g,e[53]=re,e[54]=ve,e[55]=we,e[56]=De):De=e[56];const ge=De;if(u||f){let Ne;return e[57]!==b||e[58]!==ge||e[59]!==ae?(Ne=b==="popover"?r.jsxs(Dl,{onOpenChange:je=>S(je),children:[r.jsx(ofe,{asChild:!0,children:ge}),ae]}):r.jsxs(K.Root,{onOpenChange:je=>S(je),children:[ge,ae]}),e[57]=b,e[58]=ge,e[59]=ae,e[60]=Ne):Ne=e[60],Ne}else return ge};function QQe(t){"use forget";var E,A;const e=H.c(9),{account:n,clientBootstrapFlags:s,features:o,clientThreadId:a,currentModelConfig:i,composerController:l,isDisabled:c,gizmoId:d}=t,u=G(),m=r1(a),f=Tl(u,d);let p;e[0]!==(i==null?void 0:i.enabledTools)?(p=(E=i==null?void 0:i.enabledTools)==null?void 0:E.includes(sl.Search),e[0]=i==null?void 0:i.enabledTools,e[1]=p):p=e[1];const g=p,h=m==null||(m==null?void 0:m.kind)===Tt.PrimaryAssistant||(m==null?void 0:m.kind)===Tt.GizmoInteraction&&f,x=!pt(u),y=BW(Ie.Search),b=!x&&(n==null||n.isFree());if(g===!1||x&&(s!=null&&s.includes(Wp.AnonSearchHoldout))||b&&s!=null&&s.includes(Wp.FreeSearchHoldout)||!y||!x&&(n==null||n.isEnterprisey())&&!(o!=null&&o.includes(Rs.BrowsingAvailable))||!h)return null;let S;e[2]===Symbol.for("react.memo_cache_sentinel")?(S={viewTransitionName:"var(--vt-composer-".concat(Ie.Search,"-action)")},e[2]=S):S=e[2];const C=!!c||!g,k=g?void 0:p3.ModelNotSupported,M=(A=i==null?void 0:i.title)!=null?A:"";let T;return e[3]!==a||e[4]!==l||e[5]!==C||e[6]!==k||e[7]!==M?(T=r.jsx("div",{"data-testid":"system-hint-search",style:S,children:r.jsx(Jke,{clientThreadId:a,composerController:l,isDisabled:C,disabledReason:k,currentModelName:M})},"system-hint-".concat(Ie.Search)),e[3]=a,e[4]=l,e[5]=C,e[6]=k,e[7]=M,e[8]=T):T=e[8],T}function Jke(t){"use forget";const e=H.c(28),{clientThreadId:n,composerController:s,isDisabled:o,disabledReason:a,currentModelName:i}=t,l=J();let c;e[0]!==l?(c=l.formatMessage({id:"TbHx8d",defaultMessage:"Search"}),e[0]=l,e[1]=c):c=e[1];const d=c,u=ss(),m=qs(),f=u===Ie.Search;let p,g;e[2]!==n||e[3]!==o||e[4]!==f||e[5]!==m?(p=()=>{o&&f&&m(null,{analyticsMetadata:{clientThreadId:n}})},g=[o,f,m,n],e[2]=n,e[3]=o,e[4]=f,e[5]=m,e[6]=p,e[7]=g):(p=e[6],g=e[7]),_.useEffect(p,g);let h;e[8]!==n||e[9]!==s||e[10]!==f||e[11]!==m?(h=k=>{k.stopPropagation(),k.preventDefault(),m(f?null:Ie.Search,{analyticsMetadata:{clientThreadId:n}}),f||Eo(Et(s)),U.logEventWithStatsig("Composer Search Button Clicked","composer_search_button_clicked",{clientThreadId:n}),f&&UW(Et(s),/^search\b/i)},e[8]=n,e[9]=s,e[10]=f,e[11]=m,e[12]=h):h=e[12];const x=h;let y;e[13]!==n?(y={clientThreadId:n},e[13]=n,e[14]=y):y=e[14];const b=o!=null?o:!1;let v;e[15]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(VD,{className:"icon"}),e[15]=v):v=e[15];let S;e[16]!==x||e[17]!==f||e[18]!==d||e[19]!==b?(S=r.jsx(k3,{pressed:f,disabled:b,icon:v,label:d,ariaLabel:d,animatedLabel:!0,showLabel:!0,onClick:x,dataTestid:"composer-button-search"}),e[16]=x,e[17]=f,e[18]=d,e[19]=b,e[20]=S):S=e[20];let C;return e[21]!==i||e[22]!==a||e[23]!==o||e[24]!==f||e[25]!==y||e[26]!==S?(C=r.jsx(e5e,{analyticsMetadata:y,isThreadUsingSearchMode:f,isDisabled:o,disabledReason:a,currentModelName:i,children:S}),e[21]=i,e[22]=a,e[23]=o,e[24]=f,e[25]=y,e[26]=S,e[27]=C):C=e[27],C}function Xke(){"use forget";const t=GD(),e=$e(Ye.hasSeenComposerSearchButtonTooltip);return!e.isLoading&&e.eligible&&!t}function e5e(t){"use forget";const e=H.c(17),{children:n,analyticsMetadata:s,isThreadUsingSearchMode:o,isDisabled:a,disabledReason:i,currentModelName:l}=t,c=Xke()&&!o,d=$e(Ye.hasSeenComposerSearchButtonTooltip);if(!c){let g;e[0]!==l||e[1]!==i||e[2]!==a?(g=a?i===p3.ModelNotSupported?r.jsx(P,{id:"GZemJe",defaultMessage:"Search disabled for {modelName}",values:{modelName:"".concat(l)}}):r.jsx(P,{id:"GpDAWD",defaultMessage:"Search is unavailable"}):r.jsx(P,{id:"c+4o2s",defaultMessage:"Search the web"}),e[0]=l,e[1]=i,e[2]=a,e[3]=g):g=e[3];let h;e[4]!==s?(h=y=>{y&&U.logEventWithStatsig("Composer Search Button Hovered","composer_search_button_hovered",s)},e[4]=s,e[5]=h):h=e[5];let x;return e[6]!==n||e[7]!==g||e[8]!==h?(x=r.jsx("div",{children:r.jsx(kt,{className:"inline-block",label:g,side:"bottom",onOpenChange:h,children:n})}),e[6]=n,e[7]=g,e[8]=h,e[9]=x):x=e[9],x}let u;e[10]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(P,{id:"Yjduqi",defaultMessage:"Search the web"}),e[10]=u):u=e[10];let m;e[11]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(P,{id:"W51Aei",defaultMessage:"Get fast answers with trusted sources. {learnMore}",values:{learnMore:r.jsx(ao,{href:"https://openai.com/index/introducing-chatgpt-search",className:"underline",children:r.jsx(P,{id:"stA7F4",defaultMessage:"Learn more"})})}}),e[11]=m):m=e[11];let f;e[12]!==n?(f=r.jsx("div",{children:n}),e[12]=n,e[13]=f):f=e[13];let p;return e[14]!==f||e[15]!==d.markAsViewed?(p=r.jsx(Vd,{announcementKey:Ye.hasSeenComposerSearchButtonTooltip,side:"right",show:!0,theme:"bright",dismissOnOutsideClick:!0,badge:"new",title:u,onDismiss:d.markAsViewed,sideOffset:0,className:"xs:max-w-sm! max-w-2xs!",description:m,children:f}),e[14]=f,e[15]=d.markAsViewed,e[16]=p):p=e[16],p}function t5e(t,e,n,s,o){let a=VW.getReadyFiles(t.getState());(s==null?void 0:s.kind)===Tt.GizmoMagicCreate?a=a.filter(g=>g.gizmoId!=null):a=a.filter(g=>g.gizmoId==null);let i=e!=null?e:"";const l=[],c=[],d=y9(n,s,o),m=GW(n,s).length>0,f=d===vo.Interpreter||d===vo.Retrieval||d===vo.ContextConnector,p=xe(Hn(),"3681682292");return a.forEach(g=>{var y;const h=g.fileSpec,x=j2e(h.mimeType,h.name);if(f&&!(m&&p&&x)){const b=h.contextConnectorInfo,v={id:h.id,size:h.size,name:h.name,context_connector_info:b?{context_connector:b==null?void 0:b.contextConnector,source_url:b==null?void 0:b.sourceUrl,synthetic_extension:(y=b==null?void 0:b.syntheticExtension)!=null?y:null,type:b==null?void 0:b.type}:void 0,mime_type:h.mimeType,width:"width"in h?h.width:void 0,height:"height"in h?h.height:void 0,file_token_size:h.fileTokenSize,source:g.source,library_file_id:g.libraryFileId};l.push(v)}m&&("width"in h&&"height"in h&&c.push({content_type:Sa.ImageAssetPointer,asset_pointer:fy(h.id),size_bytes:h.size,width:h.width,height:h.height}),p&&x&&c.push({content_type:Sa.VideoAssetPointer,asset_pointer:fy(h.id),size_bytes:h.size,format:x,metadata:{source:"quick_video_capture"}}))}),c.length>0&&(c.push(e!=null?e:""),i={content_type:dt.MultimodalText,parts:c}),{content:i,attachments:l}}const JQe=async({filePickerStore:t,event:e,intl:n,toaster:s,conversationMode:o,clientThreadId:a,currentModelConfig:i,getEditorGizmoId:l,modelSupportedImageMimeTypes:c,activeSystemHintType:d,ctx:u,contextScopes:m})=>{var M,T;const f=pt(u),p=Nn(u).flags,g=p==null?void 0:p.includes(Wp.NoAuthEnableFileUploads),h=y9(i,o,d),x=c.length>0;U.logEvent("Pasted to Composer",{client_thread_id:a});const{clipboardData:y}=e,b=$W(i,o),v=!f&&g?c:(M=b==null?void 0:b.attachments)==null?void 0:M.accepted_mime_types,S=!f&&g?!1:(T=b==null?void 0:b.attachments)==null?void 0:T.can_accept_all_mime_types,C=w(w({},g&&{isUnauthenticated:!f}),f&&m&&m.length>0?{contextScopes:m}:{});if(x&&y&&y.files.length>0){const E=y.files[0],A=E.name.match(/\.[^.]+$/),N=A?"".concat(_s()).concat(A[0]):_s(),R=new File([E],N,{type:E.type,lastModified:E.lastModified});if(v!==void 0&&!v.includes(R.type)&&S!==!0){s.danger(n.formatMessage(Do.unsupportedFileType,{file_type:HW(R)}),{toastId:"paste_unsupported_file_type",loggingTitle:Do.unsupportedFileType.defaultMessage,loggingDescription:"Unsupported file type"}),e.preventDefault();return}if(yn.hideThreadHeader(),U.logEvent("Upload File",{client:"web",eventSource:"paste"}),l!=null){l().then(O=>ar.uploadFile(t,ol(R),R,h,c,n,s,w({gizmoId:O},C)));return}ar.uploadFile(t,ol(R),R,h,c,n,s,C,b==null?void 0:b.attachments)}if(y&&y.types.includes("text/plain")){const E=y.getData("text");if(E&&QA(u,E)){e.preventDefault();const A="text/plain";let N="txt";const R=await WW(E);R&&(S||v!=null&&v.includes(R.mime))&&(N=R.ext);const O="pasted.".concat(N),D=new Blob([E],{type:A}),F=new File([D],O,{type:A});ar.uploadFile(t,ol(F),F,h,c,n,s,C),U.logEventWithStatsig("Big Paste","chatgpt_web_big_paste",{text_length:n5e(E.length)})}}},n5e=t=>t<500?"under 500":t<=1e3?"500-1000":t<=5e3?"1001-5000":t<=1e4?"5000-10000":"10000+",XQe=(t,{canSubmit:e,isTextContentTooLong:n,toaster:s,requestCompletion:o})=>t.shiftKey||t.altKey||Qb()&&v9(t)?!1:(e?(t.preventDefault(),o(t)):n&&s.danger("The message you submitted was too long, please submit something shorter.",{hasCloseButton:!0}),!0),eJe=(t,{isAutocompletionActive:e,clearAutocompletions:n,canAbortCompletion:s,clientThreadId:o,abortCompletion:a,isEmpty:i,hasTargetedContent:l,clearTargetedContent:c,hasSystemHint:d,removeSystemHint:u,hasSelectedTarget:m,removeSelectedTarget:f,hasNonDefaultModel:p,removeNonDefaultModel:g})=>s?(a(),U.logEventWithStatsig("Pause Completion","chatgpt_pause_completion",{threadId:jt(o),currentLeafId:me.getCurrentNode(ft(o)).message.id,eventSource:"keyboard"}),!0):e!=null&&e()?(n(),!0):d?(u(),!0):p?(g(),!0):i&&l?(c(),!0):m?(f(),!0):!1,tJe={PromptTextareaHeader:"z-20"},s5e=()=>!mt.getItem("hasSeenIntegratedVoiceNuxBefore"),nJe=()=>{mt.setItem("hasSeenIntegratedVoiceNuxBefore",!0)};function sJe(){const t=at();return r.jsx(mn,{primaryCtaText:r.jsx(P,{id:"k/qPdM",defaultMessage:"Manage tasks"}),onPrimaryCtaClick:()=>{t("/tasks")},title:r.jsx(P,{id:"mYNRrn",defaultMessage:"Youve reached your limit for scheduled tasks."}),content:r.jsx(P,{id:"Bwsb55",defaultMessage:"To schedule new ones, pause some of your existing tasks first."})})}const $D=Ye.HasSeenAdvancedVoiceOnMobile,o5e=window.location.origin+"/update-app",JM=window.location.origin+"/update-app?origin=qr";function a5e(t){const e=ut(t),n=xe(t,"989108178");return e!=null&&n}function r5e(t){var l;const e=G(),n=a5e(e),{eligible:s,isLoading:o}=$e($D);return{eligible:!(!n||!s||((l=t.conversationMode)==null?void 0:l.kind)!==Tt.PrimaryAssistant)&&!o}}const i5e=3;function l5e(t){let e=mt.getItem(Le.AdvancedVoiceOnMobileAnnouncementCount);Array.isArray(e)||(e=[]);const n=new Set(e);return t&&n.add(t),e=[...n],mt.setItem(Le.AdvancedVoiceOnMobileAnnouncementCount,e),e.length}function oJe({onClose:t,clientThreadId:e}){const{markAsViewed:n}=$e($D),s=Xn(e);_.useEffect(()=>{const l=l5e(s);l>i5e&&(n(),We.logEvent("chatgpt_advanced_voice_on_mobile_announcement_limit_reached",l)),U.logEvent("Advanced Voice on Mobile: Announcement Shown"),We.logEvent("chatgpt_advanced_voice_on_mobile_announcement_shown")},[s,n]);const o=_.useCallback(()=>{n(),U.logEvent("Advanced Voice on Mobile: Dismissed Announcement"),We.logEvent("chatgpt_advanced_voice_on_mobile_announcement_dismissed"),t&&t()},[n,t]),i={markAsDownloaded:_.useCallback(()=>{U.logEvent("Advanced Voice on Mobile: Link Clicked"),We.logEvent("chatgpt_advanced_voice_on_mobile_announcement_download_clicked"),n(),t&&t()},[n,t]),markAsViewed:o};return r.jsx(d5e,w({},i))}function c5e(){window.open(o5e,"_blank")}function d5e({markAsDownloaded:t,markAsViewed:e}){const n=J(),[s,o]=_.useState(!1),a=_.useCallback(()=>{c5e(),t()},[t]),i=r.jsx("div",{className:"grow flex-row",children:r.jsxs("div",{className:"flex-column",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(P,w({},rc.advancedVoiceOnMobileBannerTitle))}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(P,w({},rc.advancedVoiceOnMobileBannerDescription))})]})}),l=!hd(),c=kl();let d;return l?c?d=Object.freeze({primaryCtaQrLink:JM,onPrimaryCtaQrClick:()=>o(!0)}):d=Object.freeze({onSecondaryCtaClick:()=>o(!0),secondaryCtaText:n.formatMessage(rc.advancedVoiceOnMobileButtonScanCode)}):d=Object.freeze({onPrimaryCtaClick:a,primaryCtaText:n.formatMessage(rc.advancedVoiceOnMobileButtonDownload)}),r.jsxs(r.Fragment,{children:[r.jsx(mn,B(w({},d),{onDismiss:e,content:i})),l&&r.jsx(Pt,{testId:"modal-advanced-voice-on-mobile-qr",size:"custom",className:"w-[328px] max-w-[328px]",title:n.formatMessage(rc.advancedVoiceOnMobileQRModalTitle),isOpen:s,showCloseButton:!0,onClose:()=>o(!1),type:"success",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(LR,{className:"m-[24px] mt-[0px]",size:280,value:JM}),r.jsx("div",{className:"text-token-text-primary text-start",children:r.jsx(P,w({},rc.advancedVoiceOnMobileQRModalDescription))})]})})]})}const rc=be({advancedVoiceOnMobileBannerTitle:{id:"AdvancedVoiceOnMobile.banner.title",defaultMessage:"Download the latest iOS or Android app to try advanced voice mode"},advancedVoiceOnMobileBannerDescription:{id:"AdvancedVoiceOnMobile.banner.description",defaultMessage:"Get more natural, real-time conversations with advanced voice. Senses and responds to humor, sarcasm, interruptions, and more."},advancedVoiceOnMobileButtonDownload:{id:"AdvancedVoiceOnMobile.button.download",defaultMessage:"Download"},advancedVoiceOnMobileButtonScanCode:{id:"AdvancedVoiceOnMobile.button.scancode",defaultMessage:"Scan code"},advancedVoiceOnMobileButtonClose:{id:"AdvancedVoiceOnMobile.button.close",defaultMessage:"Close"},advancedVoiceOnMobileQRModalTitle:{id:"AdvancedVoiceOnMobile.qrmodal.title",defaultMessage:"Download the app"},advancedVoiceOnMobileQRModalDescription:{id:"AdvancedVoiceOnMobile.qrmodal.description",defaultMessage:"Scan the QR code on your phone to download the ChatGPT app."}}),HD=j(()=>I(()=>import("./fqz8sozslskhjbvs.js").then(t=>t._),__vite__mapDeps([359,1])),{loading:t=>L(t)}),WD="1696863369",u5e=Ye.UseSidekick,m5e=Ye.SidekickLauncherOnboarding,f5e="https://help.openai.com/en/articles/9275200",p5e="https://persistent.oaistatic.com/sidekick/public/ChatGPT_Desktop_public_latest.dmg",zD="1697140512",g5e=Ye.UseSidetron,h5e=Ye.hasSeenWindowsAppOnboarding,_5e="https://help.openai.com/en/articles/9982051",x5e="https://apps.microsoft.com/detail/9nt1r1c2hh7j",qD="download";function YD(t,e,n){const s=ut(t),o=Ve(t,e).get(n,!1);return s!=null&&o}function y5e(t){return YD(t,WD,"has_sidekick_access")}function v5e(t){return YD(t,zD,"can_download_sidetron")}function M3(){const t=G(),e=y5e(t),n=v5e(t);return{isSidekickAvailable:e,isSidetronAvailable:n,isDesktopAppAvailable:e||n}}function b5e(t){return t===qD}function S5e(){const t=at(),{hash:e}=ls(),n=b5e(e.slice(1));return{openModal:()=>{t({hash:qD})},closeModal:()=>{t({hash:""})},isOpen:n}}function C5e(t){var p;const e=M3(),{isDesktopAppAvailable:n}=e,s=T3(e),o=G(),i=Ve(o,s.statsigLayerName).get("show_nux_banner",!1),{eligible:l,isLoading:c}=$e(s.downloadAnnouncement),{eligible:d,isLoading:u}=$e(s.onboardingAnnouncement);return{eligible:!(!l||!d||!n||((p=t.conversationMode)==null?void 0:p.kind)!==Tt.PrimaryAssistant)&&i,isLoading:u||c}}function aJe({onClose:t}){const e=M3(),n=T3(e);_.useEffect(()=>{U.logEvent(n.analyticsBannerShown),We.logEvent(n.statsigBannerShown)},[n.analyticsBannerShown,n.statsigBannerShown]);const{markAsViewed:s}=$e(n.downloadAnnouncement),o=_.useCallback(()=>{s(),U.logEvent(n.analyticsBannerDismissed),We.logEvent(n.statsigBannerDismissed),t&&t()},[s,t,n.analyticsBannerDismissed,n.statsigBannerDismissed]),a=_.useCallback(()=>{U.logEvent(n.analyticsBannerDownloadClicked),We.logEvent(n.statsigBannerDownloadClicked),s(),t&&t()},[s,t,n.analyticsBannerDownloadClicked,n.statsigBannerDownloadClicked]),i=B(w({},n),{isAppAvailable:e.isDesktopAppAvailable,markAsDownloaded:a,markAsViewed:o});return r.jsx(M5e,w({},i))}function w5e(t){window.open(t,"_blank")}function T3(t){return t.isSidekickAvailable?j5e:P5e}function k5e(t){return t.bannerTitle}function rJe(){const{closeModal:t,isOpen:e}=S5e(),n=M3(),{isDesktopAppAvailable:s}=n,o=T3(n),a=_.useMemo(()=>({isDesktopAppAvailable:s}),[s]),i=()=>{U.logEvent(o.analyticsModalClosed,a),We.logEvent(o.statsigModalClosed),t()},l=()=>{U.logEvent(o.analyticsModalDownloadClicked,a),We.logEvent(o.statsigModalDownloadClicked),t()};if(_.useEffect(()=>{e&&(U.logEvent(o.analyticsModalShown,w({},a)),We.logEvent(o.statsigModalShown))},[a,e,o.analyticsModalShown,o.statsigModalShown]),!e)return null;const c=B(w({},o),{isAppAvailable:n.isDesktopAppAvailable,markAsDownloaded:l,markAsViewed:i});return r.jsx(T5e,w({},c))}function M5e({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,messages:s,learnMoreUrl:o}){const a=J(),i=_.useCallback(()=>{w5e(t),e()},[e,t]),l=r.jsx(P,w({},k5e(s))),c=r.jsx(P,w({},s.bannerContent)),d=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:l}),r.jsx("span",{className:"text-token-text-secondary",children:c}),r.jsxs(ao,{href:o,className:"ms-2 gap-1 font-medium",children:[r.jsx(P,w({},s.learnMore)),r.jsx(HD,{className:"icon-sm inline-block"})]})]});return r.jsx(mn,{onPrimaryCtaClick:i,primaryCtaText:a.formatMessage(s.download),onDismiss:n,content:d})}function T5e({downloadUrl:t,markAsDownloaded:e,markAsViewed:n,isAppAvailable:s,messages:o,learnMoreUrl:a}){const i=o.modalTitle,l=r.jsx(P,w({},i)),c=r.jsx(P,w({},o.modalContent)),d=r.jsx("div",{className:"mt-2",children:r.jsxs(ao,{href:a,className:"flex items-center gap-1 font-medium",children:[r.jsx(P,w({},o.learnMore)),r.jsx(HD,{className:"icon-sm"})]})}),u=r.jsx(he,{as:"link",to:t,color:"primary",onClick:e,openNewTab:!0,children:r.jsx(P,w({},o.download))}),m=r.jsx(he,{color:"secondary",onClick:n,children:r.jsx(P,w({},I5e.close))}),f=s?u:m,p=s?m:void 0;return r.jsx(G7,{onClose:n,title:l,description:c,actionButton:f,cancelButton:p,moreInfoLink:d})}const E5e=be({bannerTitle:{id:"SidekickOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for macOS 14+ with Apple Silicon"},bannerContent:{id:"SidekickOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Option + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidekickOnboarding.modalTitle",defaultMessage:"ChatGPT is available for macOS 14+ with Apple Silicon"},modalContent:{id:"SidekickOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Option + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidekickOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidekickOnboarding.download",defaultMessage:"Download"}}),A5e=be({bannerTitle:{id:"SidetronOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for Windows 10+"},bannerContent:{id:"SidetronOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Alt + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidetronOnboarding.modalTitle",defaultMessage:"ChatGPT is available for Windows 10+"},modalContent:{id:"SidetronOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Alt + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidetronOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidetronOnboarding.download",defaultMessage:"Download on Microsoft Store"}}),I5e=be({close:{id:"SidekickOnboarding.close",defaultMessage:"Close"}}),j5e={downloadUrl:p5e,messages:E5e,learnMoreUrl:f5e,analyticsModalShown:"Sidekick: Download Modal Shown",analyticsModalClosed:"Sidekick: Download Modal Closed",analyticsModalDownloadClicked:"Sidekick: Download Modal Downloaded",analyticsBannerShown:"Sidekick: Announcement Shown",analyticsBannerDismissed:"Sidekcik: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidekick: Clicked Announcement Link",statsigLayerName:WD,statsigModalShown:"chatgpt_sidekick_modal_shown",statsigModalClosed:"chatgpt_sidekick_modal_closed",statsigModalDownloadClicked:"chatgpt_sidekick_modal_download_clicked",statsigBannerShown:"chatgpt_sidekick_announcement_shown",statsigBannerDismissed:"chatgpt_sidekick_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidekick_announcement_download_clicked",downloadAnnouncement:u5e,onboardingAnnouncement:m5e},P5e={downloadUrl:x5e,messages:A5e,learnMoreUrl:_5e,analyticsModalShown:"Sidetron: Download Modal Shown",analyticsModalClosed:"Sidetron: Download Modal Closed",analyticsModalDownloadClicked:"Sidetron: Download Modal Downloaded",analyticsBannerShown:"Sidetron: Announcement Shown",analyticsBannerDismissed:"Sidetron: Dismissed Announcement",analyticsBannerDownloadClicked:"Sidetron: Clicked Announcement Link",statsigLayerName:zD,statsigModalShown:"chatgpt_sidetron_modal_shown",statsigModalClosed:"chatgpt_sidetron_modal_closed",statsigModalDownloadClicked:"chatgpt_sidetron_modal_download_clicked",statsigBannerShown:"chatgpt_sidetron_announcement_shown",statsigBannerDismissed:"chatgpt_sidetron_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidetron_announcement_download_clicked",downloadAnnouncement:g5e,onboardingAnnouncement:h5e};function ZD({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s=!0}){const o=G(),{data:a,isLoading:i,error:l}=dN({countryCode:t,ctx:o}),[c,d]=_.useState(()=>XM({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:a}));return _.useEffect(()=>{d(XM({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:a}))},[t,e,n,s,a,i,l]),c}function KD({initialCountryCode:t}={}){const e=G(),n=Nn(e),s="userCountry"in n?n.userCountry:null,[o,a]=_.useState(t&&A7(t)?t:yZ({country:s,shouldUseDefaultCountryCode:!1}));return{country:o,setCountry:a,userCountry:s}}function XM({country:t,currentAccount:e,location:n,shouldUsePaidSubscriptionBillingCurrency:s,checkoutPricingConfig:o}){return e!=null&&e.hasPaidSubscription()&&s?{currency:e==null?void 0:e.mustGetSubscriptionBillingCurrency(n)}:o?{country:t,currency:o.currencyConfig.symbol_code}:null}const iJe="promoCode",N5e=t=>{var l,c,d;const{data:e,isLoading:n}=lt({enabled:!!t,queryKey:["promotionEligibility",t],queryFn:()=>pe.safeGet("/promotions/eligibility/{promo_code}",{parameters:{path:{promo_code:t}}})}),{data:s,isLoading:o}=lt({enabled:!!t&&(e==null?void 0:e.is_eligible),queryKey:["promotionMetadata",t],queryFn:()=>pe.safeGet("/promotions/metadata/{promo_code}",{parameters:{path:{promo_code:t}}})}),a=n||o,i=(e==null?void 0:e.ineligible_reason)&&(e&&!e.is_eligible&&(l=e.ineligible_reason)!=null?l:null);return{isEligible:(c=e==null?void 0:e.is_eligible)!=null?c:!1,isPromoLoading:a,promoCode:t,promoError:i,promoMetadata:(d=s==null?void 0:s.metadata)!=null?d:null}},QD=Ye.hasDismissedPromoRedemption,Hg="month",JD="year",XD="hour";function R5e(t){return t==="chatgptplusplan"?"Plus":t==="chatgptgoplan"?"Go":t==="chatgptteamplan"?"Business":(Gs.warn("Unsupported plan name for promo redemption banner, falling back to Plus: ",{planName:t}),"Plus")}function L5e(){const{eligible:t}=$e(QD);return mt.getItem(Le.PromoCode)?t:!1}function lJe(){const t=G(),e=J(),{markAsViewed:n}=$e(QD),s=at(),o=_n(),{country:a}=KD(),i=ZD({country:a,currentAccount:o,location:"PromoRedemptionAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0}),l=mt.getItem(Le.PromoCode),{promoMetadata:c}=N5e(l),d=c!=null&&!c.schedule&&c.plan_name!=="chatgptteamplan",u=(c==null?void 0:c.plan_name)&&R5e(c.plan_name)||"",{data:m,isLoading:f,error:p}=dN({countryCode:i==null?void 0:i.country,currency:i==null?void 0:i.currency,ctx:t,enabled:i!==null});if(_.useEffect(()=>{d&&(U.logEvent("Promo Redemption Banner Shown",{promoCode:l}),We.logEvent("chatgpt_promo_redemption_banner_shown"))},[d,l]),!d)return null;const g=c.plan_name==="chatgptgoplan"?mme():CN();let h,x;i&&m&&!f&&!p&&(h=D5e(e,i,c,g,u,m),x=F5e(e,i,c,m));const y=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:h!=null?h:""}),r.jsx("span",{className:"text-token-text-secondary",children:x!=null?x:""})]});return r.jsx(mn,{onPrimaryCtaClick:()=>{const b=mt.getItem(Le.PromoCode);mt.removeItem(Le.PromoCode),n(),s("/p/".concat(b,"#pricing")),U.logEvent("Promo Redemption Banner Redeem Button Clicked",{promoCode:b}),We.logEvent("chatgpt_promo_redemption_banner_redeem_button_clicked")},primaryCtaText:e.formatMessage(fa.bannerPrimaryCta),onDismiss:n,content:y})}function O5e({planName:t,checkoutPricingConfig:e}){return Gy(e,t==="chatgptgoplan"?oue:aue,vg.Month).amount}function eF(t,e){const{discount:n}=t;let s=O5e({planName:t.plan_name,checkoutPricingConfig:e});if("percentage"in n){const o=(n==null?void 0:n.percentage)/100;s=s*(1-o)}else if("value"in n){const o=n==null?void 0:n.value;s-=o}return s}function D5e(t,e,n,s,o,a){var m,f;const{discount:i,duration:l}=n,c=Td(e.currency),d=l?l.period:Hg,u=l?l.num_periods:1;if("percentage"in i){const p=i==null?void 0:i.percentage;return t.formatMessage(fa.bannerTitleForPercentageDiscount,{discount:"".concat(p),planName:o})}else if("value"in i){const p=eF(n,a),g=(f=(m=c.code.defaultMessage)==null?void 0:m.toString())!=null?f:Nm,h=t.formatNumber(p,{style:"currency",currency:g,minimumFractionDigits:0,maximumFractionDigits:2});let x;switch(d){case Hg:u===1?x=t.formatMessage(fa.bannerTitleForSingleMonth,{cost:h,planName:o}):x=t.formatMessage(fa.bannerTitleForPluralMonths,{cost:h,num_months:u,planName:o});break;case JD:u===1?x=t.formatMessage(fa.bannerTitleForSingleYear,{cost:h,planName:o}):x=t.formatMessage(fa.bannerTitleForPluralYears,{cost:h,num_years:u,planName:o});break;case XD:throw new Error("Period 'hour' is not supported")}return x}}function F5e(t,e,n,s){var f,p;const{duration:o}=n,a=Td(e.currency),i=o?o.period:Hg,l=o?o.num_periods:1,c=(p=(f=a.code.defaultMessage)==null?void 0:f.toString())!=null?p:Nm,d=eF(n,s),u=t.formatNumber(d,{style:"currency",currency:c,minimumFractionDigits:0,maximumFractionDigits:2});let m;switch(i){case Hg:l===1?m=t.formatMessage(fa.bannerContentForSingleMonth,{cost:u}):m=t.formatMessage(fa.bannerContentForPluralMonths,{num_months:l,cost:u});break;case JD:l===1?m=t.formatMessage(fa.bannerContentForSingleYear,{cost:u}):m=t.formatMessage(fa.bannerContentForPluralYears,{num_years:l,cost:u});break;case XD:throw new Error("Period 'hour' is not supported")}return m}const fa=be({bannerTitleForPluralMonths:{id:"promoRedemptionBannerTitleForPluralMonths",defaultMessage:"Get {planName} for {cost}/month for the first {num_months} months"},bannerTitleForSingleMonth:{id:"promoRedemptionBannerTitleForSingleMonth",defaultMessage:"Get {planName} for {cost}/month for the first month"},bannerTitleForPluralYears:{id:"promoRedemptionBannerTitleForPluralYears",defaultMessage:"Get {planName} for {cost}/year for the first {num_years} years"},bannerTitleForSingleYear:{id:"promoRedemptionBannerTitleForSingleYear",defaultMessage:"Get {planName} for {cost}/year for the first year"},bannerTitleForPercentageDiscount:{id:"promoRedemptionBannerTitleForPercentageDiscount",defaultMessage:"Finish redeeming your {discount}% off code for {planName}"},bannerContentForPluralMonths:{id:"promoRedemptionBannerContentForPluralMonths",defaultMessage:"Get {num_months} months of expanded access for only {cost} per month."},bannerContentForSingleMonth:{id:"promoRedemptionBannerContentForSingleMonth",defaultMessage:"Get 1 month of expanded access for only {cost} per month."},bannerContentForPluralYears:{id:"promoRedemptionBannerContentForPluralYears",defaultMessage:"Get {num_years} years of expanded access for only {cost} per year."},bannerContentForSingleYear:{id:"promoRedemptionBannerContentForSingleYear",defaultMessage:"Get 1 year of expanded access for only {cost} per year."},bannerPrimaryCta:{id:"promoRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}}),go=window.localStorage,_v=Nt(Cn(()=>{var n;const t=(n=go==null?void 0:go.getItem(Le.NoAuthBannerDisclaimerClientThreadId))!=null?n:null,e=(go==null?void 0:go.getItem(Le.NoAuthHasAcceptedFooterDisclaimer))==="true";return{bannerDisclaimerClientThreadId:t,hasAcceptedFooterDisclaimer:e}})),tF={updateBannerDisclaimerClientThreadId(t){_v.setState(e=>{e.bannerDisclaimerClientThreadId=t}),go==null||go.setItem(Le.NoAuthBannerDisclaimerClientThreadId,t)},updateHasAcceptedFooterDisclaimer(){_v.setState(t=>{t.hasAcceptedFooterDisclaimer=!0}),go==null||go.setItem(Le.NoAuthHasAcceptedFooterDisclaimer,"true")}},B5e=j(()=>I(()=>import("./jl0gmzdyiwz0e04r.js").then(t=>t._),__vite__mapDeps([344,1])),{loading:t=>L(t)}),fx=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{className:"pointer-events-auto",children:n}),e[0]=n,e[1]=s):s=e[1],s};function U5e({clientThreadId:t}){const e=Jb(t);return e!=null?r.jsx(V5e,{clientThreadId:t,gizmoId:e}):r.jsx(nF,{clientThreadId:t})}function V5e({clientThreadId:t,gizmoId:e}){const n=Pa(e).data,s=Ue(t,me.getThreadCreateTime),o=(n==null?void 0:n.gizmo.updated_at)!=null?new Date(n.gizmo.updated_at):void 0;return(n==null?void 0:n.gizmo.gizmo_type)===Vp.PROJECT||(n==null?void 0:n.gizmo.short_url)==null||o==null||s==null||o<=s?r.jsx(nF,{clientThreadId:t}):r.jsxs("div",{className:"text-token-text-tertiary",children:[r.jsx(B5e,{className:"text-token-secondary me-1 mb-1 inline-block h-4 w-4 stroke-0"}),r.jsx(P,B(w({},gs.outdatedGptDisclaimer),{values:{link:a=>r.jsx(Aa,{to:d9(n.gizmo.short_url),className:"underline",children:a},"gizmo-link-".concat(n.gizmo.short_url)),bold:a=>r.jsx("span",{className:"text-token-secondary font-semibold",children:a},"gizmo-bold-".concat(n.gizmo.short_url))}}))]})}function nF({clientThreadId:t}){const e=G(),n=ut(e),s=_n(),o=!pt(e),a=Sr.useStore(),i=Ue(t,me.hasUserMessage);if(n!=null&&n.isWorkspaceAccount()){if(s==null)return null;if(xe(e,"2462890004"))return r.jsx(fx,{children:s.name!=null?r.jsx(P,B(w({},gs.earlyAccessBusinessDisclaimer),{values:{workspaceName:s.name}})):r.jsx(P,w({},gs.earlyAccessBusinessDisclaimerNoName))});const c=s.data.ekmConfig!=null;return r.jsx(fx,{children:c?s.name!=null?r.jsx(P,B(w({},gs.businessDisclaimerWithEncryption),{values:{workspaceName:s.name}})):r.jsx(P,w({},gs.businessDisclaimerWithEncryptionNoName)):s.name!=null?r.jsx(P,B(w({},gs.businessDisclaimer),{values:{workspaceName:s.name}})):r.jsx(P,w({},gs.businessDisclaimerNoName))})}if(o&&!i)return r.jsx(E3,{clientThreadId:t});let l=gs.mayProduceInaccurateInformation;return f3(e,n)&&(l=gs.mayProduceInaccurateInformationWithCookieConsent),r.jsx(fx,{children:r.jsx(P,B(w({},l),{values:{cookiePreferencesLink:c=>r.jsx("a",{onClick:d=>{d.preventDefault(),U.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!0}),a.openModal()},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:c})}}))})}function E3({clientThreadId:t,variant:e="default"}){const n=G(),s=ut(n),{country:o}=md(n);let a=e==="default"?o==="KR"?gs.mayProduceInaccurateInformationNoAuthKorea:gs.mayProduceInaccurateInformationNoAuthV2:o==="KR"?gs.agreeToTermsNoAuthKorea:gs.agreeToTermsNoAuthV2;const l=Ve(n,"3533083032",{disableExposureLog:!0}).get("disclaimer_color_adjust",!1),c=Sr.useStore();return f3(n,s)&&(a=e==="default"?o==="KR"?gs.mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:gs.mayProduceInaccurateInformationNoAuthV2WithCookieConsent:o==="KR"?gs.agreeToTermsNoAuthKoreaWithCookieConsent:gs.agreeToTermsNoAuthV2WithCookieConsent),_.useEffect(()=>()=>{me.hasUserMessage(ft(t))&&tF.updateHasAcceptedFooterDisclaimer()},[t]),r.jsx("span",{className:W("pointer-events-auto text-sm",e==="byContinuing"?void 0:"leading-none"),children:r.jsx(P,B(w({},a),{values:{privacyLink:d=>r.jsx("a",{href:"https://openai.com/privacy",target:"_blank",className:W(l?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline"),onClick:()=>{We.logEvent("chatgpt_footer_disclaimer_privacy_link_clicked"),U.logEvent("Footer Disclaimer Privacy Link Clicked")},rel:"noreferrer",children:d},"privacy_link"),termsLink:d=>r.jsx("a",{href:"https://openai.com/terms",target:"_blank",className:W(l?"text-token-text-secondary":"text-token-text-primary","decoration-token-text-primary underline"),onClick:()=>{We.logEvent("chatgpt_footer_disclaimer_terms_link_clicked"),U.logEvent("Footer Disclaimer Terms Link Clicked")},rel:"noreferrer",children:d},"terms_link"),koreaAddendumLink:d=>r.jsx("a",{href:"https://openai.com/ko/policies/kr-privacy-policy-addendum",target:"_blank",className:"text-token-text-primary decoration-token-text-primary underline",onClick:()=>{We.logEvent("chatgpt_footer_disclaimer_korea_addendum_link_clicked"),U.logEvent("Footer Disclaimer Korea Addendum Link Clicked")},rel:"noreferrer",children:d},"addendum_link"),cookiePreferencesLink:d=>r.jsx("a",{onClick:u=>{u.preventDefault(),c.openModal(),U.logEventWithStatsig("Footer Disclaimer Cookie Preferences Link Clicked","chatgpt_footer_disclaimer_cookie_preferences_link_clicked",{isAuthenticated:!1})},className:"text-token-text-primary decoration-token-text-primary cursor-pointer underline",children:d},"cookie_preferences_link")}}))})}const gs=be({mayProduceInaccurateInformation:{id:"thread.chatgptMayProduceInaccurateInformation-oct-30",defaultMessage:"ChatGPT can make mistakes. Check important info."},mayProduceInaccurateInformationWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationWithCookieConsent-may-12",defaultMessage:"ChatGPT can make mistakes. Check important info. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthV2:{id:"thread.chatgptMayProduceInaccurateInformationNoAuth-may-06",defaultMessage:"By messaging ChatGPT, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},agreeToTermsNoAuthV2:{id:"thread.agreeToTermsNoAuth-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},mayProduceInaccurateInformationNoAuthV2WithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthV2WithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthV2WithCookieConsent:{id:"thread.agreeToTermsNoAuthV2WithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},mayProduceInaccurateInformationNoAuthKorea:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKorea-may-06",defaultMessage:"By messaging ChatGPT, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},agreeToTermsNoAuthKorea:{id:"thread.agreeToTermsNoAuthKorea-may-06",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},mayProduceInaccurateInformationNoAuthKoreaWithCookieConsent:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By messaging ChatGPT, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},agreeToTermsNoAuthKoreaWithCookieConsent:{id:"thread.agreeToTermsNoAuthKoreaWithCookieConsent-may-12",defaultMessage:"By continuing, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>. See <cookiePreferencesLink>Cookie Preferences</cookiePreferencesLink>."},businessDisclaimer:{id:"thread.businessDisclaimer-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models."},businessDisclaimerNoName:{id:"thread.businessDisclaimerNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models."},businessDisclaimerWithEncryption:{id:"thread.businessDisclaimerWithEncryption-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use {workspaceName} workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},businessDisclaimerWithEncryptionNoName:{id:"thread.businessDisclaimerWithEncryptionNoName-jan-17",defaultMessage:"ChatGPT can make mistakes. OpenAI doesn't use your workspace data to train its models. The content of this workspace is encrypted with your organization managed keys."},outdatedGptDisclaimer:{id:"thread.outdatedGptDisclaimer.0",defaultMessage:"<bold>New version of GPT available</bold> - Continue chatting to use the old version, or start a <link>new chat</link> for the latest version."},earlyAccessBusinessDisclaimer:{id:"thread.earlyAccessBusinessDisclaimer",defaultMessage:"ChatGPT can make mistakes. OpenAI uses {workspaceName} workspace data to train its models."},earlyAccessBusinessDisclaimerNoName:{id:"thread.earlyAccessBusinessDisclaimerNoName",defaultMessage:"ChatGPT can make mistakes. OpenAI uses your workspace data to train its models."}});function cJe({threadId:t}){const e=G(),n=J(),[s,o]=_.useState(!1);_.useEffect(()=>{tF.updateBannerDisclaimerClientThreadId(t),We.logEvent("chatgpt_unauthenticated_legal_banner"),U.logEvent("Unauthenticated Legal Banner",{threadId:t})},[t]);const a=z6(e)?dr.bannerTermsDisclaimer:dr.bannerTermsDisclaimerSafetyAndAbuse;return s?null:r.jsx(mn,{onDismiss:()=>{o(!0),U.logEventWithStatsig("Unauthenticated Legal Banner Dismissed Clicked","chatgpt_unauthenticated_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(E3,{clientThreadId:t}),r.jsx("br",{}),n.formatMessage(a,{learnMoreLink:i=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{We.logEvent("chatgpt_unauthenticated_banner_learn_more_clicked"),U.logEvent("Unauthenticated Signup Banner Learn More Clicked",{threadId:t})},children:i})})]})})}function dJe({threadId:t,showLogin:e=!0}){const n=G(),s=J(),a=Ve(n,"2118136551").get("sign_up_button_has_the_word_free",!0);return _.useEffect(()=>{We.logEvent("chatgpt_unauthenticated_signup_banner"),U.logEvent("Unauthenticated Signup Banner",{threadId:t})},[t]),r.jsx(mn,{content:s.formatMessage(dr.bannerSignup),onPrimaryCtaClick:()=>{Kt(n,{fallbackScreenHint:"signup",callback:i=>{We.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),U.logSignUpButtonClicked({location:"Chat Stage Signup Banner",provider:i},Ct.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})},primaryCtaText:s.formatMessage(a?dr.bannerSignupButtonWithFree:dr.bannerSignupButton),onSecondaryCtaClick:e?()=>{Kt(n,{fallbackScreenHint:"login",callback:i=>{We.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),U.logLogInButtonClicked({location:"Chat Stage Signup Banner",provider:i},Ct.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_SIGNUP_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?s.formatMessage(_t.logInButtonText):void 0})}function uJe({threadId:t,showSignUp:e}){const n=G(),s=J(),a=Ve(n,"2118136551").get("sign_up_button_has_the_word_free",!0);return _.useEffect(()=>{We.logEvent("chatgpt_unauthenticated_login_banner"),U.logEvent("Unauthenticated Login Banner",{threadId:t})},[t]),r.jsx(mn,{content:s.formatMessage(dr.bannerSignup),onPrimaryCtaClick:()=>{Kt(n,{fallbackScreenHint:"login",callback:i=>{We.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),U.logLogInButtonClicked({location:"Chat Stage Login Banner",provider:i},Ct.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})},primaryCtaText:s.formatMessage(_t.logInButtonText),onSecondaryCtaClick:e?()=>{Kt(n,{fallbackScreenHint:"signup",callback:i=>{We.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),U.logSignUpButtonClicked({location:"Chat Stage Login Banner",provider:i},Ct.ACCESS_FLOW_ENTRY_POINT_CHAT_STAGE_LOGIN_BANNER)},skipLoginModal:!1})}:void 0,secondaryCtaText:e?a?s.formatMessage(dr.bannerSignupButtonWithFree):s.formatMessage(dr.bannerSignupButton):void 0})}const dr=be({bannerTermsDisclaimer:{id:"bannerTermsDisclaimer",defaultMessage:"Don't share sensitive info. Chats may be reviewed and used to train our models. <learnMoreLink>Learn more</learnMoreLink>"},bannerTermsDisclaimerSafetyAndAbuse:{id:"pDsoLk",defaultMessage:"Don't share sensitive information. Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"},bannerSignup:{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."},bannerSignupButton:{id:"hedgehog.banner_signup_button",defaultMessage:"Sign up"},bannerSignupButtonWithFree:{id:"xL5gsL",defaultMessage:"Sign up for free"}});function mJe({threadId:t}){const e=G(),n=J(),{isOpen:s,close:o,markViewedInClientThreadId:a,viewedInClientThreadId:i}=eS(),{setHasSeenOnboarding:l}=TI(),c=G5e(e),d=Ue(t,me.hasUserMessage);return _.useEffect(()=>{i?jt(i)!==jt(t)&&o():(a(t),U.logEventWithStatsig("New User Legal Banner Shown","chatgpt_new_user_legal_banner_shown",{threadId:t}))},[t,i,o,a,c,l]),_.useEffect(()=>{!c||!s||!d||i&&jt(i)!==jt(t)||(l(),o())},[o,d,c,s,l,t,i]),s?r.jsx(mn,{onDismiss:()=>{c&&l(),o(),U.logEventWithStatsig("New User Legal Banner Dismissed Clicked","chatgpt_new_user_legal_banner_dismissed")},content:r.jsxs(r.Fragment,{children:[r.jsx(E3,{clientThreadId:t}),r.jsx("br",{}),n.formatMessage(dr.bannerTermsDisclaimer,{learnMoreLink:u=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{U.logEventWithStatsig("New User Legal Banner Learn More Clicked","chatgpt_new_user_legal_banner_learn_more_clicked",{threadId:t})},children:u})})]})}):null}function G5e(t){return Ve(t,"109457",{disableExposureLog:!0}).get("is_new_user_banner_disclaimer_enabled",!1)}const e4={logCouponCheck(t,e){Ee.count(Ae.TEAMS,"promo_campaign.web.check_coupon",[{key:"coupon",value:t},{key:"outcome",value:e}]),U.logEvent("Promo Campaign: Check Coupon",{coupon:t,outcome:e})},logCouponApplied(t){Ee.count(Ae.TEAMS,"promo_campaign.web.coupon_applied",[{key:"coupon",value:t}]),U.logEvent("Promo Campaign: Coupon Applied",{coupon:t})}},$5e=t=>{var e,n,s,o,a;return B(w({},t),{redeemed_at:(e=t.redeemed_at)!=null?e:null,user_redeemed_at:(n=t.user_redeemed_at)!=null?n:null,workspace_redeemed_at:(s=t.workspace_redeemed_at)!=null?s:null,promotion_length_days:(o=t.promotion_length_days)!=null?o:null,expires_at:(a=t.expires_at)!=null?a:null})},H5e=t=>({coupon:t.coupon,state:t.state,redemption:t.redemption?$5e(t.redemption):null}),W5e=t=>{const e=lt({queryKey:["promoCampaignEligibility",t],queryFn:async()=>{const n=await pe.safeGet("/promo_campaign/check_coupon",{parameters:{query:{coupon:t}},authOption:qt.SendIfAvailable});return H5e(n)},enabled:!!t});return _.useEffect(()=>{e.isSuccess&&e.data?e4.logCouponCheck(t,e.data.state):e.isError&&e4.logCouponCheck(t,"error")},[e.isSuccess,e.isError,e.data,t]),e},xv=25,z5e=xv/100,q5e="team_seats_promo";function sF(t){return t==null||!Number.isFinite(t)?null:Math.ceil(t*z5e)}function fJe(t){const{data:e}=W5e(q5e),n=(e==null?void 0:e.state)==="eligible",s=_.useMemo(()=>sF(t),[t]);return _.useMemo(()=>{const o=e!=null?e:null,a=n&&s!=null?s:null;return{eligible:n,seatThresholdGap:a,promoEligibility:o}},[e,n,s])}function Y5e(t){const e=J(),n=Ut();return lt({queryKey:["organization-subscription",t],queryFn:async()=>await pe.safeGet("/subscriptions",{parameters:{query:t}}).catch(s=>(n.danger(e.formatMessage(t4.subscriptionLoadError,{error:s.message}),{toastId:"subscription_data",loggingTitle:t4.subscriptionLoadError.defaultMessage,loggingDescription:"Failed to load subscription"}),null)),enabled:t.account_id!=null||t.organization_id!=null})}function oF(){var o;const t=_n(),e=t==null?void 0:t.id,n=(o=t==null?void 0:t.data.organizationId)!=null?o:void 0,s=t==null?void 0:t.isEnterprisey();return Y5e(s?{organization_id:n}:{account_id:e})}function pJe(t,e,n,s,o=!1){return lt({queryKey:["get-subscription-update-preview",e,s,n],queryFn:async()=>await pe.safeGet("/subscriptions/update/preview",{parameters:{query:{account_id:t,updated_plan:n,updated_seats:e,updated_promo_id:s}}}),enabled:!o})}function gJe(t){const e=xt();return Bt({mutationFn:async n=>pe.safePost("/subscriptions/cancel",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]}),e.invalidateQueries(zW())}})}function hJe(t){const e=xt();return Bt({mutationFn:async n=>pe.safePost("/subscriptions/renew",{requestBody:{account_id:n}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}function _Je(t){const e=xt();return Bt({mutationFn:({accountId:n,updatedPlan:s,updatedSeats:o,updatedPriceInterval:a,updatedPromoId:i,updatedPromoCode:l,updatedPromoCampaign:c})=>pe.safePost("/subscriptions/update",{requestBody:{account_id:n,updated_plan:s,updated_seats:o,updated_price_interval:a,updated_promo_id:i,updated_promo_code:l,updated_promo_campaign:c}}),onSuccess:()=>{e.invalidateQueries({queryKey:["organization-subscription",{account_id:t}]})}})}const t4=be({subscriptionLoadError:{id:"useSubscriptionData.subscriptionLoadError",defaultMessage:"Failed to load subscription: {error}. Contact support@openai.com if error persists."}}),Z5e=j(()=>I(()=>import("./l69z6zkz8odqz99t.js").then(t=>t._),__vite__mapDeps([360,1])),{loading:t=>L(t)});function xJe(){const t=at(),{markAsViewed:e}=$e(Ye.hasSeenTeamSeatsPromoAnnouncement),{data:n}=oF(),s=n==null?void 0:n.seats_entitled,o=_.useMemo(()=>sF(s),[s]);return _.useEffect(()=>{Ee.count(Ae.TEAMS,"teams.web.teamSeatsPromo.impressionAnnouncementBanner"),U.logEvent("Teams: Show Team Seats Promo Announcement Banner")},[]),o==null?null:r.jsx(mn,{icon:r.jsx(Z5e,{className:"h-6 w-6 text-[#4338CA]","aria-hidden":"true"}),title:r.jsx(P,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.title.withThreshold",defaultMessage:"Add {seatsCount, plural, one {# seat} other {# seats}}, get {discount}% off",values:{discount:xv,seatsCount:o}}),content:r.jsx(P,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.content.withThreshold",defaultMessage:"Invite team members to work with you in ChatGPT and save {discount}% for a month when you add {seatsCount, plural, one {# seat} other {# seats}}.",values:{discount:xv,seatsCount:o}}),primaryCtaColor:"purple",className:"border-[#DDD8FF] bg-[#F2F0FF]",primaryCtaText:r.jsx(P,{id:"components.pricing.teams.teamSeatsPromoAnnouncement.primaryCta",defaultMessage:"Add Seats"}),onPrimaryCtaClick:()=>{Ee.count(Ae.TEAMS,"teams.web.teamSeatsPromo.clickAnnouncementBannerPrimaryCta"),U.logEvent("Teams: Click Team Seats Promo Announcement Banner"),e(),t("/admin/billing")},onDismiss:()=>{Ee.count(Ae.TEAMS,"teams.web.teamSeatsPromo.dismissAnnouncementBanner"),U.logEvent("Teams: Close Team Seats Promo Announcement Banner"),e()}})}function K5e(t){return xe(t,"878458344")}const Q5e=t=>{const e=G(),n=K5e(e),{eligible:s}=$e(Ye.hasSeenTeamsContextualAnswersUpsell),o=pn(),a=o!=null&&jA(o),l=!!Ue(t,d=>me.findNode(d,u=>u.message.author.role===Ze.Tool&&u.message.author.name===oo.MYFILES_BROWSER));return n&&s&&a&&l};function yJe(){const t=at(),{markAsViewed:e}=$e(Ye.hasSeenTeamsContextualAnswersUpsell);return _.useEffect(()=>{Ee.count(Ae.TEAMS,"teams.web.caUpsell.impressionAnnouncementBanner"),U.logEvent("Teams: Show CA Upsell Announcement Banner")},[]),r.jsx(mn,{title:r.jsx(P,{id:"components.pricing.teams.contextualUpsellAnnouncement.title",defaultMessage:"Connect to Google Drive directly with the Business plan"}),content:r.jsx(P,{id:"components.pricing.teams.contextualUpsellAnnouncement.content",defaultMessage:"Summarize, analyze, and get smarter answers from your teams docs."}),primaryCtaText:r.jsx(P,{id:"components.pricing.teams.contextualUpsellAnnouncement.primaryCtaText",defaultMessage:"Get Business"}),onPrimaryCtaClick:()=>{Ee.count(Ae.TEAMS,"teams.web.caUpsell.clickAnnouncementBannerPrimaryCta"),U.logEvent("Teams: Click CA Upsell Announcement Banner"),e(),t({hash:Om,search:window.location.search},{state:{[$h]:"CA upsell announcement banner"}})},onDismiss:()=>{Ee.count(Ae.TEAMS,"teams.web.caUpsell.dismissAnnouncementBanner"),U.logEvent("Teams: Close CA Upsell Announcement Banner"),e()}})}const J5e=Ye.hasSeenAgentModeAnnouncementBanner,X5e=t=>xe(t,"785520609");function vJe(){const{markAsViewed:t}=$e(J5e),e=qs();return r.jsx(mn,{title:r.jsx(P,{id:"VjCFGa",defaultMessage:"ChatGPT can now do more work for you"}),content:r.jsx(P,{id:"idZZDZ",defaultMessage:"Agent mode can do even more complex tasks, like spreadsheets, research, and reservations, all on its own."}),primaryCtaText:r.jsx(P,{id:"xT8iIw",defaultMessage:"Try agent mode"}),onPrimaryCtaClick:()=>{t(),e(is)},onDismiss:()=>{t()}})}function bJe({onDismissSideEffect:t,onPrimaryCtaClickSideEffect:e}){var u;const n=J(),s=G(),o=at(),a=Nn(s),{locale:i,usedDefault:l}=aF((u=a.cfIpCity)!=null?u:""),c=n.formatMessage(sMe[i]),d=n.formatMessage({id:"language-upsell-banner.query",defaultMessage:"Talk to me in {language}"},{language:c});return _.useEffect(()=>{U.logEventWithStatsig("Language Upsell Banner Shown","chatgpt_web_language_upsell_banner_shown",{inferred_locale:i,used_default:l})},[i,l]),r.jsx(mn,{title:n.formatMessage({id:"language-upsell-banner.title",defaultMessage:"{hello} Want to chat in {language}?"},{hello:nMe[i],language:c}),content:l?n.formatMessage({id:"language-upsell-banner.content.default",defaultMessage:"ChatGPT speaks many languages. Give it a try, just by typing."}):n.formatMessage({id:"language-upsell-banner.content.language",defaultMessage:"ChatGPT speaks your local language  give it a try, just by typing."}),primaryCtaText:n.formatMessage({id:"language-upsell-banner.primary-cta",defaultMessage:"Try it"}),onPrimaryCtaClick:()=>{e(),o("/?q=".concat(encodeURIComponent(d)))},onDismiss:t})}const eMe=In(()=>Sm(Le.HasManuallyClosedLanguageUpsellBanner,()=>!1,{coerceStoredValue:Lu}));function tMe(t){var c,d;const e=G(),n=Ue(t,(c=me.getIsNewConversation)!=null?c:(()=>!1)),s=Nn(e),{country:o}=md(e),a=Ve(e,"723297404"),i=s.locale,{locale:l}=aF((d=s.cfIpCity)!=null?d:"");return ue(()=>n&&(o==null?void 0:o.toUpperCase())==="IN"&&i!==l&&a.get("show_india_language_upsell_banner",!1)&&!eMe(e))}function aF(t){return t in n4?{locale:n4[t],usedDefault:!1}:{locale:"hi-IN",usedDefault:!0}}const n4={Bengaluru:"kn-IN",Mumbai:"mr-IN",Hyderabad:"te-IN",Chennai:"ta-IN",Pune:"mr-IN","New Delhi":"hi-IN",Delhi:"hi-IN",Kolkata:"bn-BD",Ahmedabad:"gu-IN",Kochi:"ml",Jaipur:"hi-IN",Lucknow:"hi-IN",Indore:"hi-IN",Patna:"hi-IN",Guwahati:"as",Coimbatore:"ta-IN",Chandigarh:"pa",Bhopal:"hi-IN",Surat:"gu-IN",Bhubaneswar:"or",Gurugram:"hi-IN",Nagpur:"mr-IN",Noida:"hi-IN",Ludhiana:"pa",Dehradun:"hi-IN",Thrissur:"ml",Agra:"hi-IN",Visakhapatnam:"te-IN",Vadodara:"gu-IN",Thiruvananthapuram:"ml",Mangalore:"kn-IN",Ranchi:"hi-IN",Ghaziabad:"hi-IN",Kanpur:"hi-IN",Vijayawada:"te-IN",Madurai:"ta-IN",Varanasi:"hi-IN",Srinagar:"hi-IN",Salem:"ta-IN",Faridabad:"hi-IN",Jodhpur:"hi-IN",Raipur:"hi-IN",Jammu:"hi-IN",Sopur:"hi-IN",Nashik:"mr-IN","Navi Mumbai":"mr-IN",Rajkot:"gu-IN",Prayagraj:"hi-IN",Meerut:"hi-IN",Thane:"mr-IN",Kozhikode:"ml",Jabalpur:"hi-IN"},nMe={"kn-IN":"!","mr-IN":"!","te-IN":"!","ta-IN":"!","hi-IN":"!","bn-BD":"!","gu-IN":"!",ml:"!",as:"!",pa:"  !",or:"!"},sMe=be({"kn-IN":{id:"language-upsell-banner.locale.kn",defaultMessage:"Kannada"},"mr-IN":{id:"language-upsell-banner.locale.mr",defaultMessage:"Marathi"},"te-IN":{id:"language-upsell-banner.locale.te",defaultMessage:"Telugu"},"ta-IN":{id:"language-upsell-banner.locale.ta",defaultMessage:"Tamil"},"hi-IN":{id:"language-upsell-banner.locale.hi",defaultMessage:"Hindi"},"bn-BD":{id:"language-upsell-banner.locale.bn",defaultMessage:"Bengali"},"gu-IN":{id:"language-upsell-banner.locale.gu",defaultMessage:"Gujarati"},ml:{id:"language-upsell-banner.locale.ml",defaultMessage:"Malayalam"},as:{id:"language-upsell-banner.locale.as",defaultMessage:"Assamese"},pa:{id:"language-upsell-banner.locale.pa",defaultMessage:"Punjabi"},or:{id:"language-upsell-banner.locale.or",defaultMessage:"Odia"}});function oMe(t){const e=G();return ue(()=>Ib(e,wn(ht(e,t)).id))}function SJe(t){return null}const aMe=1;function rF(){const[t,e]=ja(Le.LastSeenNoAuthTrialsBannerAt,null,o=>o!=null&&typeof o=="number"),n=t==null||xa(Date.now(),wi(t))>=aMe;return{markBannerSeen:()=>{e(Ca(new Date)),localStorage.setItem(Le.LastSeenNoAuthTrialsBannerAt,JSON.stringify(Ca(new Date)))},canBeSeen:n}}function rMe(){const t=G(),e=!pt(t),{canBeSeen:n}=rF();return e&&n&&Ve(t,"1074962980").get("is_plus_1_month_free_enabled",!1)}function CJe(){const t=at(),{markBannerSeen:e}=rF();return _.useEffect(()=>{U.logEventWithStatsig("No Auth Trials Banner Shown","chatgpt_no_auth_trials_banner_shown")},[]),r.jsx(mn,{icon:r.jsx("img",{src:"https://openaiassets.blob.core.windows.net/$web/chatgpt/filled-plus-icon.png",alt:"",style:{width:24,height:24}}),onPrimaryCtaClick:()=>{U.logEventWithStatsig("No Auth Trials Banner Try Plus free Button Clicked","chatgpt_no_auth_trials_banner_try_plus_free_button_clicked"),sessionStorage.setItem("poijcwa","jwoid"),gn(t,"No auth trials banner",void 0,void 0,Hh),e()},primaryCtaText:r.jsx(P,w({},_t.tryPlusTrial)),onDismiss:()=>{U.logEventWithStatsig("No Auth Trials Banner Dismissed","chatgpt_no_auth_trials_banner_dismissed"),e()},title:r.jsx(P,w({},s4.noAuthTrialUpsellTitle)),content:r.jsx(P,w({},s4.noAuthTrialUpsellDescription))})}const s4=be({noAuthTrialUpsellTitle:{id:"sSjBA2",defaultMessage:"Get better, faster responses for free"},noAuthTrialUpsellDescription:{id:"4yEtmJ",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}}),iF=Ye.DesktopOperatorAnnouncement;function wJe(){const{markAsViewed:t}=$e(iF);_.useEffect(()=>{U.logEventWithStatsig("Operator Announcement Banner Shown","chatgpt_operator_announcement_banner_shown")},[]);const e=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:r.jsx(P,{id:"/bPUPL",defaultMessage:"Delegate daily tasks with Operator"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(P,{id:"ODMLVJ",defaultMessage:"With the Pro plan, you can try the Operator research preview  an agent that browses the web to handle tasks for you."})})]});return r.jsx(mn,{onPrimaryCtaClick:()=>{t(),U.logEventWithStatsig("Operator Announcement Banner Try Operator Button Clicked","chatgpt_operator_announcement_banner_try_operator_button_clicked"),window.open("".concat(qW,"?utm_source=chatgpt"),"_blank")},primaryCtaText:r.jsx(P,{id:"eDZIyV",defaultMessage:"Try Operator"}),onDismiss:()=>{t(),U.logEventWithStatsig("Operator Announcement Banner Dismissed","chatgpt_operator_announcement_banner_dismissed")},content:e})}function kJe(t){return xe(t,"2429530106")}const A3=xs(()=>{const t=Qe("loading");return{auraAnnouncementBannerState$:t,setAuraAnnouncementBannerState:n=>{t.set(n)}}});function iMe(){const t=localStorage.getItem(Le.AuraAnnouncementBannerImpressions),e=t?parseInt(t):null;e==null||isNaN(e)?localStorage.setItem(Le.AuraAnnouncementBannerImpressions,JSON.stringify(1)):localStorage.setItem(Le.AuraAnnouncementBannerImpressions,JSON.stringify(e+1)),localStorage.setItem(Le.LastSeenAuraAnnouncementBannerAt,JSON.stringify(Ca(new Date))),localStorage.getItem(Le.FirstSeenAuraAnnouncementBannerAt)==null&&localStorage.setItem(Le.FirstSeenAuraAnnouncementBannerAt,JSON.stringify(Ca(new Date)))}function lMe(t){const e=localStorage.getItem(Le.FirstSeenAuraAnnouncementBannerAt);if(!e)return!1;const n=parseInt(e);if(isNaN(n))return!1;const s=wi(n);return xa(new Date,s)>t}function cMe(t){const e=localStorage.getItem(Le.AuraAnnouncementBannerImpressions);if(!e)return!1;const n=parseInt(e);return isNaN(n)?!1:n>=t}function MJe(t){const e=ds(t,"619645130"),n=e.get("max_days_visible",-1);if(n>=0&&lMe(n))return!0;const s=e.get("max_impressions",-1);if(s>=0&&cMe(s))return!0;if(e.get("limit_one_impression_per_day",!1)){const a=localStorage.getItem(Le.LastSeenAuraAnnouncementBannerAt),i=a?parseInt(a):null;if(i!=null&&!isNaN(i)){const l=wi(i);if(xa(new Date,l)<1)return!0}}return!1}function TJe(){return localStorage.getItem(Le.HasDismissedAuraAnnouncementBanner)!=null}function lF(){localStorage.setItem(Le.HasDismissedAuraAnnouncementBanner,"true")}const dMe=j(()=>I(()=>Promise.resolve().then(()=>vC),void 0),{loading:t=>L(t)});function cF(){"use forget";const t=H.c(3),{markAsViewed:e,eligible:n}=$e(Ye.hasSeenPlusFreeTrialHomepageAnnouncementBanner);let s;return t[0]!==n||t[1]!==e?(s={markAsViewed:e,eligible:n},t[0]=n,t[1]=e,t[2]=s):s=t[2],s}const dF="2850117686",uMe="is-plus-free-trial-homepage-announcement-banner-enabled",mMe="hide_thread_header_upgrade_pill_button",I3=Qe(!1);function fMe(){"use forget";return ue(pMe)}function pMe(){return I3()}function gMe(t){"use forget";const e=H.c(4),{clientThreadId:n}=t,s=G();let o;e[0]!==s?(o=A3(s),e[0]=s,e[1]=o):o=e[1];const{auraAnnouncementBannerState$:a}=o,l=ue(a)!=="not-shown",c=mI();let d;e[2]!==n?(d=Na(n),e[2]=n,e[3]=d):d=e[3];const u=d,m=Ue(n,me.hasUserMessage),f=u&&!m,{eligible:p}=cF();return!l&&p&&c&&f}function hMe(t){return Ve(t,dF).get(uMe,!1)}function _Me(t){"use forget";const e=H.c(7),{onPrimaryCtaClick:n,onDismiss:s}=t;let o,a,i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(dMe,{className:"text-[#5D5BD0] dark:text-[#DCDBF6]","aria-hidden":!0}),a=r.jsx(P,{id:"components.promptTextarea.plusFreeTrialAnnouncement.title",defaultMessage:"Get better, faster responses for free"}),i=r.jsx(P,{id:"components.promptTextarea.plusFreeTrialAnnouncement.content",defaultMessage:"Upgrade to ChatGPT Plus. Your first 30 days are on us."}),l=r.jsx(P,{id:"components.promptTextarea.plusFreeTrialAnnouncement.primaryCta",defaultMessage:"Try Plus for free"}),e[0]=o,e[1]=a,e[2]=i,e[3]=l):(o=e[0],a=e[1],i=e[2],l=e[3]);let c;return e[4]!==s||e[5]!==n?(c=r.jsx(mn,{icon:o,title:a,content:i,primaryCtaText:l,primaryCtaClassName:"px-5 text-sm font-semibold",primaryCtaColor:"primary",onPrimaryCtaClick:n,onDismiss:s,isElevated:!1}),e[4]=s,e[5]=n,e[6]=c):c=e[6],c}function EJe(){"use forget";const t=H.c(9),{markAsViewed:e}=cF(),n=at();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[0]=s):s=t[0],_.useEffect(xMe,s);let o;t[1]!==e||t[2]!==n?(o=()=>{U.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner CTA Clicked","chatgpt_plus_free_trial_homepage_announcement_banner_cta_clicked"),e(),gn(n,"Plus Free Trial Homepage Announcement Banner",void 0,void 0,Hh)},t[1]=e,t[2]=n,t[3]=o):o=t[3];const a=o;let i;t[4]!==e?(i=()=>{U.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner Dismissed","chatgpt_plus_free_trial_homepage_announcement_banner_dismissed"),e()},t[4]=e,t[5]=i):i=t[5];const l=i;let c;return t[6]!==l||t[7]!==a?(c=r.jsx(_Me,{onPrimaryCtaClick:a,onDismiss:l}),t[6]=l,t[7]=a,t[8]=c):c=t[8],c}function xMe(){return U.logEventWithStatsig("Plus Free Trial Homepage Announcement Banner Shown","chatgpt_plus_free_trial_homepage_announcement_banner_shown"),I3.set(!0),yMe}function yMe(){I3.set(!1)}const vMe=20,bMe=7;function AJe(){const t=at(),e=G();return _.useEffect(()=>{U.logEventWithStatsig("Plus Upsell Banner Shown","chatgpt_plus_upsell_banner_shown")},[]),r.jsx(mn,{onPrimaryCtaClick:()=>{U.logEventWithStatsig("Plus Upsell Banner Get Plus Button Clicked","chatgpt_plus_upsell_banner_get_plus_button_clicked"),gn(t,"Plus upsell banner"),o4()},primaryCtaText:r.jsx(P,w({},Dm(e))),onDismiss:()=>{U.logEventWithStatsig("Plus Upsell Banner Dismissed","chatgpt_plus_upsell_banner_dismissed"),o4()},title:r.jsx(P,{id:"CEHXxQ",defaultMessage:"Unlock more with Plus"}),content:r.jsx(P,{id:"s+Afdr",defaultMessage:"ChatGPT Plus gives you higher limits, smarter models, and Sora for video."})})}const uF=Nt(Cn(()=>({lastSeenPlusUpsellBannerAt:SMe()})));function o4(){const t=new Date;uF.setState(e=>{e.lastSeenPlusUpsellBannerAt=t}),localStorage.setItem(Le.LastSeenPlusUpsellBannerAt,String(Ca(new Date)))}function SMe(){const t=localStorage.getItem(Le.LastSeenPlusUpsellBannerAt);return t?wi(Number(t)):null}function CMe(){const t=Qh(vQ),e=uF(i=>i.lastSeenPlusUpsellBannerAt),n=_n(),s=!!(n!=null&&n.isFree()&&(n!=null&&n.features.includes("plus_upsell"))),o=t>=vMe,a=e==null||xa(Date.now(),e)>=bMe;return s&&o&&a}const wMe=j(()=>I(()=>Promise.resolve().then(()=>V3),void 0),{loading:t=>L(t)});function kMe({clientThreadId:t,systemHint:e,label:n,iconSvgString:s,onClick:o,onDismiss:a,onMouseEnter:i,onMouseLeave:l}){"use no forget";const c=Xn(t);return _.useEffect(()=>{e&&em(e,tm.SuggestionTrigger,An({clientThreadId:c}))},[]),n?r.jsxs("button",{type:"button",className:"hover:bg-token-bg-tertiary dark:hover:bg-token-bg-tertiary dark:bg-token-bg-secondary border-token-border-default bg-token-bg-primary text-token-text-primary focus-visible:ring-token-text-tertiary mx-auto mb-1 flex h-9 items-center gap-2.5 rounded-full border py-1 ps-2.5 pe-3 focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden",onClick:o,onMouseEnter:i,onMouseLeave:l,children:[s?r.jsx("span",{className:"h-4.5 w-4.5 shrink-0",children:r.jsx(Yu,{svgString:s,className:"h-full w-full"})}):null,r.jsx("span",{className:"truncate text-sm",children:n}),a?r.jsx("span",{className:"-ms-1.5 -me-1.5",children:r.jsx(P,{id:"GYl7YK",defaultMessage:"Dismiss",children:d=>r.jsx(wMe,{className:"icon dark:hover:bg-token-bg-tertiary hover:bg-token-bg-secondary translate-y-[0.5px] cursor-pointer rounded-full p-0.5 opacity-30 hover:opacity-100","aria-label":d,strokeWidth:.5,onClick:u=>{u.stopPropagation(),a==null||a(u)}})})}):null]}):null}const a4=.2;function IJe(){"use no forget";const t=G(),{store:e}=Ar(),n=e.useSharedProps(o=>o==null?void 0:o.clientThreadId),s=ue(()=>n?am(ht(t,n)).activeSystemHintSuggestionChips$():[]);return cs(t)||!s.length?null:r.jsx("div",{className:"max-xs:flex-col max-xs:gap-0 flex justify-center gap-3",children:s.map(o=>r.jsx(MMe,{threadId:n,systemHintSuggestionChip:o},o.systemHint))})}function MMe(t){"use forget";var Y;const e=H.c(39),{systemHintSuggestionChip:n,threadId:s}=t,o=J(),a=G(),i=wr(),l=_.useRef(null),c=_.useRef(!1),[d,u]=_.useState(!1),m=YW();let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{l.current&&(clearTimeout(l.current),l.current=null)},e[0]=f):f=e[0];const p=f;let g,h;e[1]===Symbol.for("react.memo_cache_sentinel")?(g=()=>()=>{p()},h=[p],e[1]=g,e[2]=h):(g=e[1],h=e[2]),_.useEffect(g,h);let x;e[3]!==a||e[4]!==n||e[5]!==s?(x=Z=>{Z==null||Z.preventDefault(),Z==null||Z.stopPropagation();const Q=n==null?void 0:n.systemHint;if(!s)return;const q=ht(a,s);u(!0),setTimeout(()=>{u(!1),Z&&Q?(em(Q,tm.SuggestionReject,An({clientThreadId:q.id})),am(q).removeActiveSystemHintSuggestionChip(n)):am(q).clearActiveSystemHintSuggestionChips()},a4*1e3),p()},e[3]=a,e[4]=n,e[5]=s,e[6]=x):x=e[6];const y=x;let b;e[7]!==y?(b=()=>{c.current||(p(),l.current=setTimeout(()=>{y()},2e3))},e[7]=y,e[8]=b):b=e[8];const v=b;let S;e[9]===Symbol.for("react.memo_cache_sentinel")?(S=()=>{c.current=!0,p()},e[9]=S):S=e[9];const C=S;let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{c.current=!1},e[10]=k):k=e[10];const M=k;let T;e[11]!==i||e[12]!==v?(T=()=>ml(Et(i).dom,{input:()=>{l.current||v()}}),e[11]=i,e[12]=v,e[13]=T):T=e[13];let E;e[14]!==i||e[15]!==y||e[16]!==v?(E=[i,y,v],e[14]=i,e[15]=y,e[16]=v,e[17]=E):E=e[17],_.useEffect(T,E);let A;e[18]!==n?(A=n!=null?n:{},e[18]=n,e[19]=A):A=e[19];const{actionLabel:N,systemHint:R}=A;let O;e[20]!==R||e[21]!==m.data?(O=(Y=m.data)==null?void 0:Y.find(Z=>Z.systemHint===R),e[20]=R,e[21]=m.data,e[22]=O):O=e[22];const D=O;let F;e[23]!==a||e[24]!==o||e[25]!==y||e[26]!==D||e[27]!==s?(F=()=>{y(),!(!s||!D)&&(Ee.count(Ae.ECOSYSTEM,"suggestion_hint_clicked"),U.logEventWithStatsig("Ecosystem app: Suggestion hint clicked","chatgpt_web_ecosystem_suggestion_hint_clicked",w({system_hint:D.systemHint},D.actionLabel?{system_hint_label:D.actionLabel}:{})),mO({intl:o,conversation:ht(a,s),systemHint:D}))},e[23]=a,e[24]=o,e[25]=y,e[26]=D,e[27]=s,e[28]=F):F=e[28];const V=F;if(!s||!n||!D)return null;let z;e[29]!==N||e[30]!==d||e[31]!==V||e[32]!==y||e[33]!==R||e[34]!==(D==null?void 0:D.logo)||e[35]!==s?(z=!d&&r.jsx(Xe.div,{exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:a4},children:r.jsx(kMe,{clientThreadId:s,systemHint:R,label:N,iconSvgString:D==null?void 0:D.logo,onClick:V,onDismiss:y,onMouseEnter:C,onMouseLeave:M})},"system-hint-suggestion-banner"),e[29]=N,e[30]=d,e[31]=V,e[32]=y,e[33]=R,e[34]=D==null?void 0:D.logo,e[35]=s,e[36]=z):z=e[36];let $;return e[37]!==z?($=r.jsx(dn,{children:z}),e[37]=z,e[38]=$):$=e[38],$}const TMe=({className:t,children:e})=>r.jsx(Xe.div,{className:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.1,delay:0}},transition:{type:"tween",duration:.3,delay:.2},children:e}),EMe=j(()=>I(()=>import("./o16x9m1k4d29ak42.js").then(t=>t._),__vite__mapDeps([361,1])),{loading:t=>L(t)});function jJe(t){"use forget";const e=H.c(6),{canContinue:n,onContinueGenerating:s}=t;let o;e[0]!==s?(o=c=>{s(c),$2()},e[0]=s,e[1]=o):o=e[1];const a=o;let i=null;if(n){let c;e[2]!==a?(c=r.jsx(IMe,{onHandleContinueGenerating:a}),e[2]=a,e[3]=c):c=e[3],i=c}if(!i)return i;let l;return e[4]!==i?(l=r.jsx("div",{className:"flex h-full w-full items-center justify-end gap-0 py-4 md:gap-2",children:i}),e[4]=i,e[5]=l):l=e[5],l}function AMe({className:t}){return r.jsx(EMe,{className:W("-rotate-180",t)})}const IMe=t=>{"use forget";const e=H.c(3),{onHandleContinueGenerating:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(P,w({},Do.continueGenerating)),e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(TMe,{children:r.jsx(he,{as:"button",color:"secondary",onClick:n,className:"py-2 whitespace-nowrap",icon:AMe,size:"small",children:s})}),e[1]=n,e[2]=o):o=e[2],o};function jMe(t){"use forget";const e=H.c(49),{onThennableClick:n,text:s}=t,o=J();let a;e[0]!==o||e[1]!==s?(a=typeof s=="string"?s:o.formatMessage(s),e[0]=o,e[1]=s,e[2]=a):a=e[2];const i=a;let l;e[3]!==o?(l=o.formatMessage(op.copy),e[3]=o,e[4]=l):l=e[4];const c=l;let d;e[5]!==o?(d=o.formatMessage(op.copied),e[5]=o,e[6]=d):d=e[6];const u=d,[m,f]=_.useState(!1),p=_.useRef(null),g=_.useRef(null),[h,x]=_.useState();let y;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=()=>{var ie,ae,ce,ye;const oe=(ae=(ie=p.current)==null?void 0:ie.offsetWidth)!=null?ae:0,se=(ye=(ce=g.current)==null?void 0:ce.offsetWidth)!=null?ye:0,de=Math.max(oe,se);x(de===0?void 0:de)},e[7]=y):y=e[7];let b;e[8]!==u||e[9]!==c?(b=[c,u],e[8]=u,e[9]=c,e[10]=b):b=e[10],En(y,b);let v,S;e[11]!==m?(v=()=>{if(!m)return;const oe=window.setTimeout(()=>{f(!1)},5e3);return()=>{window.clearTimeout(oe)}},S=[m],e[11]=m,e[12]=v,e[13]=S):(v=e[12],S=e[13]),_.useEffect(v,S);let C;e[14]!==n?(C=()=>{n().then(()=>{f(!0)})},e[14]=n,e[15]=C):C=e[15];const k=C;let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M=W("flex w-fit flex-row gap-1 text-center"),e[16]=M):M=e[16];let T;e[17]!==i?(T=r.jsx("code",{className:"max-w-[50vw] truncate sm:max-w-[300px] md:max-w-[200px] lg:max-w-[300px]",children:i}),e[17]=i,e[18]=T):T=e[18];let E;e[19]!==k||e[20]!==T?(E=r.jsx(he,{color:"secondary",className:"w-fit max-w-[40vw] rounded-3xl border px-3 py-2 sm:max-w-[300px]",onClick:k,contentWrapperClassName:"flex justify-between! md:justify-center! w-full",children:T}),e[19]=k,e[20]=T,e[21]=E):E=e[21];const A=m?"primary-inverse":"primary";let N;e[22]!==h?(N=typeof h=="number"?{width:h}:void 0,e[22]=h,e[23]=N):N=e[23];let R;e[24]!==c?(R=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:p,children:c})}),e[24]=c,e[25]=R):R=e[25];let O;e[26]!==u?(O=r.jsx("span",{"aria-hidden":!0,className:"absolute -z-10 whitespace-nowrap opacity-0",children:r.jsx("span",{ref:g,children:u})}),e[26]=u,e[27]=O):O=e[27];const D=m?"copied":"copy";let F,V,z,$;e[28]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0,y:4},V={opacity:1,y:0},z={opacity:0,y:-4},$={duration:.2,ease:"easeInOut"},e[28]=F,e[29]=V,e[30]=z,e[31]=$):(F=e[28],V=e[29],z=e[30],$=e[31]);let Y;e[32]!==m?(Y=m?r.jsx(P,w({},op.copied)):r.jsx(P,w({},op.copy)),e[32]=m,e[33]=Y):Y=e[33];let Z;e[34]!==D||e[35]!==Y?(Z=r.jsx(dn,{mode:"wait",initial:!1,children:r.jsx(Xe.span,{initial:F,animate:V,exit:z,transition:$,className:"inline-flex whitespace-nowrap",children:Y},D)}),e[34]=D,e[35]=Y,e[36]=Z):Z=e[36];let Q;e[37]!==N||e[38]!==R||e[39]!==O||e[40]!==Z?(Q=r.jsxs("span",{className:"relative inline-flex justify-center",style:N,children:[R,O,Z]}),e[37]=N,e[38]=R,e[39]=O,e[40]=Z,e[41]=Q):Q=e[41];let q;e[42]!==k||e[43]!==A||e[44]!==Q?(q=r.jsx(he,{color:A,className:"w-fit px-4 py-2 transition-all duration-200 ease-in-out",onClick:k,contentWrapperClassName:"flex justify-between! lg:justify-center! w-fit min-w-[40px] text-center",children:Q}),e[42]=k,e[43]=A,e[44]=Q,e[45]=q):q=e[45];let X;return e[46]!==E||e[47]!==q?(X=r.jsxs("div",{className:M,children:[E,q]}),e[46]=E,e[47]=q,e[48]=X):X=e[48],X}const op=be({copy:{id:"beacon-banner-copy-to-clipboard.copy",defaultMessage:"Copy"},copied:{id:"beacon-banner-copy-to-clipboard.copied",defaultMessage:"Copied"}});function PMe(t){"use forget";const e=H.c(8),{beaconInfo:n,copyBeaconAction:s,onDismiss:o}=t,{title:a,description:i}=n.ui_info;let l;e[0]!==s.onThennableClick||e[1]!==s.text?(l=r.jsx(jMe,{onThennableClick:s.onThennableClick,text:s.text}),e[0]=s.onThennableClick,e[1]=s.text,e[2]=l):l=e[2];let c;return e[3]!==i||e[4]!==o||e[5]!==l||e[6]!==a?(c=r.jsx(mn,{title:a,content:i,onDismiss:o,customCtas:l,contentClassName:"gap-1!"}),e[3]=i,e[4]=o,e[5]=l,e[6]=a,e[7]=c):c=e[7],c}function mF(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:NMe},t[0]=e):e=t[0],Bt(e)}function NMe(t){return pe.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:Xb.VIEW}})}function fF(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:RMe},t[0]=e):e=t[0],Bt(e)}function RMe(t){const{beaconId:e,eventCtaId:n}=t;return pe.safePost("/beacons/event",{requestBody:{beacon_id:e,event_type:Xb.CLICK,event_cta_id:n}})}function pF(){return Bt({mutationFn:t=>pe.safePost("/beacons/event",{requestBody:{beacon_id:t,event_type:Xb.DISMISS}})})}const LMe=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),OMe=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)}),DMe={banner:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full items-center justify-between gap-2 rounded-4xl! bg-[rgba(13,13,13,0.90)]! px-4 py-2 dark:bg-[rgba(255,255,255,0.90)]!",triggerTextClassName:"truncate font-medium text-white dark:text-[#0D0D0D]",chevronClassName:"icon-sm shrink-0 text-white dark:text-[#0D0D0D]",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-[256px] max-w-[80vw] min-w-[220px] overflow-hidden rounded-2xl border p-1.5 shadow-lg",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1",itemClassName:"m-0 py-1.5 ps-2.5 pe-0 [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"h-6 w-6 dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-sm font-medium",footerPlacement:"inline",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",showLinkIcon:!1},modal:{containerClassName:"flex w-full flex-col gap-2",triggerClassName:"w-full h-11.5 items-center justify-between! gap-3 rounded-2xl! border-token-border-default! bg-token-bg-elevated-primary px-4 py-3 text-start dark:border-token-border-muted dark:bg-token-bg-elevated-secondary",triggerTextClassName:"truncate font-normal font-[14px] text-token-text-tertiary",chevronClassName:"icon-lg shrink-0 text-token-text-secondary",contentClassName:"border-token-border-subtle bg-token-bg-elevated-primary dark:border-token-border-muted w-full overflow-hidden rounded-2xl border p-1.5 shadow-xl w-[416px] sm:max-w-[416px]",headerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",itemsWrapperClassName:"flex flex-col gap-1 px-1",itemClassName:"m-0 pe-2.5 py-1.5 ps-1.5 dark:ps-2.5 [&>div]:w-fit [&>div]:h-6 [&>div]:w-6 [&>div>div]:h-6 [&>div>div]:w-6",itemTextClassName:"text-token-text-primary text-sm",iconClassName:"flex h-6 w-6 items-center justify-center rounded-full dark:border-token-border-muted dark:border dark:bg-white",fallbackTextClassName:"text-token-text-secondary text-base font-semibold",footerPlacement:"below",footerClassName:"text-token-text-tertiary m-0 p-2 text-[13px] leading-4.5 font-normal",footerBelowClassName:"text-token-text-tertiary leading-4.5 text-center text-[13px]",showLinkIcon:!0}};function FMe(t){"use forget";const e=H.c(6),{dropdownAction:n,formatAction:s}=t;let o;e:{if(!n){let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0],o=i;break e}let a;if(e[1]!==n.action_v2.items||e[2]!==s){let i;e[4]!==s?(i=l=>{const c=s(l);return c?{id:l.id,text:l.text,iconUrl:l.icon_url,action:c}:null},e[4]=s,e[5]=i):i=e[5],a=n.action_v2.items.map(i).filter(BMe),e[1]=n.action_v2.items,e[2]=s,e[3]=a}else a=e[3];o=a}return o}function BMe(t){return t!=null}function UMe(t){"use forget";const e=H.c(11),{iconUrl:n,label:s,className:o,fallbackTextClassName:a}=t;let i;e[0]!==s?(i=s.trim().slice(0,1).toUpperCase(),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==o?(c=W("flex items-center justify-center rounded-full",o),e[2]=o,e[3]=c):c=e[3];let d;e[4]!==l||e[5]!==a||e[6]!==n?(d=n?r.jsx("img",{src:n,alt:"",className:"h-4 w-4 object-contain",loading:"eager"}):r.jsx("span",{className:a,children:l}),e[4]=l,e[5]=a,e[6]=n,e[7]=d):d=e[7];let u;return e[8]!==c||e[9]!==d?(u=r.jsx("div",{className:c,"aria-hidden":"true",children:d}),e[8]=c,e[9]=d,e[10]=u):u=e[10],u}function VMe({item:t,beaconInfo:e,beaconClickEventMutation:n,variant:s,onClose:o}){var a,i,l;U.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:e.beacon_id,beacon_name:(a=e.beacon_name)!=null?a:"unknown",beacon_type:s,action_id:t.id}),n.mutate({beaconId:e.beacon_id,eventCtaId:t.id}),"onThennableClick"in t.action&&t.action.onThennableClick?t.action.onThennableClick():(l=(i=t.action).onClick)==null||l.call(i),s==="modal"&&o()}function GMe(t){"use forget";var O;const e=H.c(65),{beaconInfo:n,dropdownAction:s,dropdownItems:o,variant:a,onClose:i}=t,l=a===void 0?"banner":a,c=J(),d=fF(),u=DMe[l];let m=(O=s.action_v2.header_text)!=null?O:void 0;if(m&&typeof m!="string"){let D;e[0]!==c||e[1]!==m?(D=c.formatMessage(m),e[0]=c,e[1]=m,e[2]=D):D=e[2],m=D}let f;e[3]!==d||e[4]!==n||e[5]!==i||e[6]!==l?(f=D=>{VMe({item:D,beaconInfo:n,beaconClickEventMutation:d,variant:l,onClose:i})},e[3]=d,e[4]=n,e[5]=i,e[6]=l,e[7]=f):f=e[7];const p=f;if(o.length===0)return null;const g=u.containerClassName;let h;e[8]!==n||e[9]!==s.action_v2.action_enum||e[10]!==s.id||e[11]!==s.type||e[12]!==l?(h=D=>{var F;D&&U.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:n.beacon_id,beacon_name:(F=n.beacon_name)!=null?F:"unknown",beacon_type:l,action_id:s.id,action_type:s.type,action_enum:s.action_v2.action_enum})},e[8]=n,e[9]=s.action_v2.action_enum,e[10]=s.id,e[11]=s.type,e[12]=l,e[13]=h):h=e[13];let x;e[14]!==u.triggerTextClassName||e[15]!==s.text?(x=r.jsx("span",{className:u.triggerTextClassName,children:s.text}),e[14]=u.triggerTextClassName,e[15]=s.text,e[16]=x):x=e[16];let y;e[17]!==u.chevronClassName?(y=r.jsx(OMe,{className:u.chevronClassName}),e[17]=u.chevronClassName,e[18]=y):y=e[18];let b;e[19]!==u.triggerClassName||e[20]!==x||e[21]!==y?(b=r.jsx(K.Trigger,{asChild:!0,children:r.jsxs("button",{type:"button",className:u.triggerClassName,children:[x,y]})}),e[19]=u.triggerClassName,e[20]=x,e[21]=y,e[22]=b):b=e[22];const v=u.contentClassName;let S;e[23]!==u.headerClassName||e[24]!==s.action_v2.header_text||e[25]!==m?(S=s.action_v2.header_text&&m?r.jsx("p",{className:u.headerClassName,children:m}):null,e[23]=u.headerClassName,e[24]=s.action_v2.header_text,e[25]=m,e[26]=S):S=e[26];const C=u.itemsWrapperClassName;let k;if(e[27]!==u.fallbackTextClassName||e[28]!==u.iconClassName||e[29]!==u.itemClassName||e[30]!==u.itemTextClassName||e[31]!==u.showLinkIcon||e[32]!==o||e[33]!==p){let D;e[35]!==u.fallbackTextClassName||e[36]!==u.iconClassName||e[37]!==u.itemClassName||e[38]!==u.itemTextClassName||e[39]!==u.showLinkIcon||e[40]!==p?(D=F=>r.jsx(K.Item,{size:"large",className:u.itemClassName,icon:r.jsx(UMe,{iconUrl:F.iconUrl,label:F.text,className:u.iconClassName,fallbackTextClassName:u.fallbackTextClassName}),trailing:u.showLinkIcon?r.jsx(LMe,{className:"text-token-text-primary"}):void 0,onSelect:()=>p(F),children:r.jsx("span",{className:u.itemTextClassName,children:F.text})},F.id),e[35]=u.fallbackTextClassName,e[36]=u.iconClassName,e[37]=u.itemClassName,e[38]=u.itemTextClassName,e[39]=u.showLinkIcon,e[40]=p,e[41]=D):D=e[41],k=o.map(D),e[27]=u.fallbackTextClassName,e[28]=u.iconClassName,e[29]=u.itemClassName,e[30]=u.itemTextClassName,e[31]=u.showLinkIcon,e[32]=o,e[33]=p,e[34]=k}else k=e[34];let M;e[42]!==u.itemsWrapperClassName||e[43]!==k?(M=r.jsx("div",{className:C,children:k}),e[42]=u.itemsWrapperClassName,e[43]=k,e[44]=M):M=e[44];let T;e[45]!==u.footerClassName||e[46]!==s.action_v2.footer_text?(T=s.action_v2.footer_text?r.jsx("p",{className:u.footerClassName,children:s.action_v2.footer_text}):null,e[45]=u.footerClassName,e[46]=s.action_v2.footer_text,e[47]=T):T=e[47];let E;e[48]!==u.contentClassName||e[49]!==M||e[50]!==T||e[51]!==S?(E=r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"auto",className:v,children:[S,M,T]})}),e[48]=u.contentClassName,e[49]=M,e[50]=T,e[51]=S,e[52]=E):E=e[52];let A;e[53]!==E||e[54]!==h||e[55]!==b?(A=r.jsxs(K.Root,{onOpenChange:h,children:[b,E]}),e[53]=E,e[54]=h,e[55]=b,e[56]=A):A=e[56];let N;e[57]!==u.footerBelowClassName||e[58]!==u.footerPlacement||e[59]!==s.action_v2.footer_text?(N=u.footerPlacement==="below"&&s.action_v2.footer_text?r.jsx("p",{className:u.footerBelowClassName,children:s.action_v2.footer_text}):null,e[57]=u.footerBelowClassName,e[58]=u.footerPlacement,e[59]=s.action_v2.footer_text,e[60]=N):N=e[60];let R;return e[61]!==u.containerClassName||e[62]!==A||e[63]!==N?(R=r.jsxs("div",{className:g,children:[A,N]}),e[61]=u.containerClassName,e[62]=A,e[63]=N,e[64]=R):R=e[64],R}const pm=t=>{"use forget";var T,E;const e=H.c(33),{actions:n,title:s,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,primaryButtonClassName:c,secondaryButtonColor:d,bannerIconImageUrl:u,icon:m}=t,f=J();let p;e[0]!==n||e[1]!==f?(p=(T=n==null?void 0:n.primaryAction)!=null&&T.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:f.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=f,e[2]=p):p=e[2];const g=p;let h;e[3]!==n||e[4]!==f?(h=(E=n==null?void 0:n.secondaryAction)!=null&&E.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:f.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=f,e[5]=h):h=e[5];const x=h,y=n==null?void 0:n.customActions;let b;e[6]!==u||e[7]!==m?(b=m||u&&r.jsx("img",{src:u,alt:"",style:{width:24,height:24,objectFit:"contain"}}),e[6]=u,e[7]=m,e[8]=b):b=e[8];let v;e[9]!==o?(v=o?r.jsx("div",{dangerouslySetInnerHTML:{__html:o}}):null,e[9]=o,e[10]=v):v=e[10];let S;e[11]!==a||e[12]!==i?(S=a?()=>{i==null||i(),a==null||a()}:void 0,e[11]=a,e[12]=i,e[13]=S):S=e[13];let C;e[14]!==(n==null?void 0:n.primaryAction)||e[15]!==i?(C=()=>{var A,N;i==null||i(),(N=(A=n==null?void 0:n.primaryAction)==null?void 0:A.onClick)==null||N.call(A)},e[14]=n==null?void 0:n.primaryAction,e[15]=i,e[16]=C):C=e[16];let k;e[17]!==(n==null?void 0:n.secondaryAction)||e[18]!==i?(k=()=>{var A,N;i==null||i(),(N=(A=n==null?void 0:n.secondaryAction)==null?void 0:A.onClick)==null||N.call(A)},e[17]=n==null?void 0:n.secondaryAction,e[18]=i,e[19]=k):k=e[19];let M;return e[20]!==y||e[21]!==c||e[22]!==l||e[23]!==g||e[24]!==d||e[25]!==x||e[26]!==b||e[27]!==v||e[28]!==S||e[29]!==C||e[30]!==k||e[31]!==s?(M=r.jsx(mn,{icon:b,title:s,content:v,onDismiss:S,customCtas:y,primaryCtaText:g,primaryCtaColor:l,primaryCtaClassName:c,onPrimaryCtaClick:C,secondaryCtaText:x,secondaryCtaColor:d,onSecondaryCtaClick:k,isElevated:!0}),e[20]=y,e[21]=c,e[22]=l,e[23]=g,e[24]=d,e[25]=x,e[26]=b,e[27]=v,e[28]=S,e[29]=C,e[30]=k,e[31]=s,e[32]=M):M=e[32],M};function $Me({beaconInfo:t,dropdownAction:e,formatAction:n,onDismiss:s}){"use no forget";const{title:o,description:a,icon_image_url:i}=t.ui_info,l=FMe({dropdownAction:e,formatAction:n});if(l.length===0)return r.jsx(pm,{bannerIconImageUrl:i,onDismiss:s,title:o,description:a});const c=r.jsx(GMe,{beaconInfo:t,dropdownAction:e,dropdownItems:l,variant:"banner",onClose:()=>{}});return r.jsx(pm,{bannerIconImageUrl:i,onDismiss:s,title:o,description:a,actions:{customActions:c}})}function HMe(t){switch(t){case Jr.PRIMARY:return"primary";case Jr.SECONDARY:return"secondary";case Jr.COPY:return"primary";case Jr.DROPDOWN:return"primary"}return"primary"}const gF=j(()=>I(()=>import("./c8nigctmte2h5zb2.js"),__vite__mapDeps([362,1,29,30,363,120,250,251,252,122,253,110,364,365,339])).then(t=>t.AdminInviteModal)),WMe=Object.freeze(Object.defineProperty({__proto__:null,AdminInviteModal:gF},Symbol.toStringTag,{value:"Module"})),zMe=j(()=>I(()=>import("./nkzzfmws4g2cwqnd.js"),__vite__mapDeps([366,1,29,30,367,365,339,368,369])).then(t=>t.CreatePromptModal));function qMe(t){"use forget";const e=H.c(22),{clientThreadId:n,location:s,composerController:o,persistedSystemHintsStore:a,openFileDialog:i,beaconInfo:l}=t,c=G(),d=_n();let u;e[0]!==c?(u=pt(c),e[0]=c,e[1]=u):u=e[1];const m=!u,f=at(),p=Xn(n);let g;e[2]!==n?(g={clientThreadId:n},e[2]=n,e[3]=g):g=e[3];const h=MR(g),{mutate:x}=fF(),{systemHints:y}=Ko();let b;e[4]!==d?(b=d==null?void 0:d.isWorkspaceAccount(),e[4]=d,e[5]=b):b=e[5];const v=b;let S;return e[6]!==y||e[7]!==l||e[8]!==n||e[9]!==o||e[10]!==c||e[11]!==d||e[12]!==m||e[13]!==v||e[14]!==s||e[15]!==f||e[16]!==i||e[17]!==a||e[18]!==h||e[19]!==p||e[20]!==x?(S=C=>{if(C===void 0)return;const k=l.ui_info.type==="beacon_banner_info"?"banner":"modal",M=typeof C=="object"&&"type"in C&&C.type?C.type:"unknown",T=()=>{var D,F,V;U.logEventWithStatsig("Web Beacon Clicked","chatgpt_web_beacon_clicked",{beacon_id:l.beacon_id,beacon_name:(D=l.beacon_name)!=null?D:"unknown",beacon_type:k,action_id:(F=C.id)!=null?F:"unknown",action_type:M,action_enum:R.action_enum}),x({beaconId:l.beacon_id,eventCtaId:(V=C.id)!=null?V:"unknown"});const O=[Jr.PRIMARY,Jr.SECONDARY];M&&O.includes(M)&&Qc.dismiss()},E=O=>{if("onClick"in O&&O.onClick){const D=O.onClick;return B(w({},O),{onClick:()=>{T(),D()}})}if("onThennableClick"in O&&O.onThennableClick){const D=O.onThennableClick;return B(w({},O),{onThennableClick:()=>(T(),D())})}return O},{action_v2:A,text:N}=C,R=A;switch(R.action_enum){case Ln.FILE_UPLOAD:case Ln.PHOTO_UPLOAD:return E({text:N,onClick:()=>{if(i(),R.composer_text){const D=Et(o);D.focus(),bo(D,R.composer_text)}}});case Ln.SYSTEM_HINT:return E({text:N,onClick:()=>{const D=e2(R.hint);if(D){if(R.new_chat){const F=new URLSearchParams({[t2]:D});R.composer_text&&F.set("prompt",R.composer_text),Ti(f,{params:F})}else if(KW(a,o,D,y,{analyticsMetadata:{clientThreadId:n}},v),R.composer_text){const F=Et(o);F.focus(),bo(F,R.composer_text)}}}});case Ln.INVITE_TEAM_MEMBERS:return d?E({text:N,onClick:()=>{gt(c,gF,{workspace:d})}}):void 0;case Ln.AUTHENTICATE_LOGIN:return E({text:N,onClick:()=>{Kt(c,{fallbackScreenHint:"login"})}});case Ln.AUTHENTICATE_SIGNUP:return E({text:N,onClick:()=>{Kt(c,{fallbackScreenHint:"signup"})}});case Ln.GET_PLUS:case Ln.GET_GO:case Ln.GET_PRO:case Ln.GET_TEAM:return E({text:N,onClick:()=>{if(m)Kt(c,{fallbackScreenHint:"login",shouldOpenPaymentModalOnAuth:!0});else{const D=R==null?void 0:R.promo_campaign_id;gn(f,s,p2,D)}}});case Ln.DISMISS:return E({text:N,onClick:()=>{if(R.composer_text){const D=Et(o);D.focus(),bo(D,R.composer_text)}}});case Ln.OPEN_URL:return E({text:N,onClick:()=>{window.open(R.url,"_blank","noopener noreferrer")}});case Ln.SHARE_CONVERSATION:return p?E({text:N,onClick:()=>{yn.openSharingModal(p,s)}}):void 0;case Ln.UPDATE_PERSONALITY_TRAIT:return E({text:N,onClick:()=>{ZW(c,R.updated_trait_settings_dict,null,{optimistic:!0})}});case Ln.CREATE_PROMPT:return{text:N,onClick:()=>{var $,Y,Z,Q,q,X,oe,se;if(R.open_in_modal===!1)return;const F=me.getConversationTurns(ft(n)).findLast(YMe),V=(q=(Q=(Z=(Y=($=F==null?void 0:F.messages)==null?void 0:$[0])==null?void 0:Y.metadata)==null?void 0:Z.system_hints)==null?void 0:Q[0])!=null?q:"",z={name:(X=R.prompt_name)!=null?X:"",prompt:(oe=R.prompt_text)!=null?oe:"",description:(se=R.prompt_description)!=null?se:"",system_hint:V};gt(c,zMe,{prompt:z,referer:"prompt_template_beacon"})}};case Ln.COPY_TO_CLIPBOARD:{const O=R.copy_text;return E({text:O,onThennableClick:()=>{if(O.startsWith("$")){const F=O.slice(1);return Ta(F.trim())}else return Ta(O.trim())}})}case Ln.DROPDOWN:return;case Ln.REGENERATE:{const O=me.getCurrentLeafId(ft(n));return E({text:N,onClick:()=>{R.update_model_picker&&bd(ht(c,n),R.model_slug),h({sourceEvent:new Event("click"),nodeId:O,requestedModelId:R.model_slug})}})}}},e[6]=y,e[7]=l,e[8]=n,e[9]=o,e[10]=c,e[11]=d,e[12]=m,e[13]=v,e[14]=s,e[15]=f,e[16]=i,e[17]=a,e[18]=h,e[19]=p,e[20]=x,e[21]=S):S=e[21],S}function YMe(t){return t.role==="user"}const uf=t=>{_.useEffect(t,[])},ZMe=t=>{"use forget";const e=H.c(34),{clientThreadId:n,beaconInfo:s,onDismiss:o,onMount:a,openFileDialog:i}=t,{ui_info:l,action_items:c}=s,{title:d,description:u,icon_image_url:m}=l,f=J(),p=wr(),g=_r.useStore();let h;e[0]!==s||e[1]!==n||e[2]!==p||e[3]!==i||e[4]!==g?(h={clientThreadId:n,location:"Prompt TextareaBeacons Banner",composerController:p,openFileDialog:i,persistedSystemHintsStore:g,beaconInfo:s},e[0]=s,e[1]=n,e[2]=p,e[3]=i,e[4]=g,e[5]=h):h=e[5];const x=qMe(h);let y;e[6]!==a?(y=()=>{a==null||a()},e[6]=a,e[7]=y):y=e[7],uf(y);let b;e:{if(c==null){b=void 0;break e}let E;e[8]!==c?(E=c.find(KMe),e[8]=c,e[9]=E):E=e[9],b=E}const v=b;if(v){let E;return e[10]!==s||e[11]!==v||e[12]!==x||e[13]!==o?(E=r.jsx($Me,{beaconInfo:s,dropdownAction:v,formatAction:x,onDismiss:o}),e[10]=s,e[11]=v,e[12]=x,e[13]=o,e[14]=E):E=e[14],E}let S,C;if(e[15]!==c||e[16]!==s||e[17]!==x||e[18]!==f||e[19]!==o){C=Symbol.for("react.early_return_sentinel");e:{let E;e[22]!==x?(E=O=>{const D=x(O);return D?{action:O,formatted:D}:null},e[22]=x,e[23]=E):E=e[23];const A=(c!=null?c:[]).map(E).filter(QMe),N=A.find(JMe);if(N&&"onThennableClick"in N.formatted&&N.formatted.onThennableClick){const O={text:N.formatted.text,onThennableClick:N.formatted.onThennableClick};C=r.jsx(PMe,{beaconInfo:s,copyBeaconAction:O,onDismiss:o});break e}const R=A.filter(XMe);t:{if(R.length===0){S=void 0;break t}let O;e[24]!==f?(O=D=>{const{action:F,formatted:V}=D,z=typeof V.text=="string"?V.text:f.formatMessage(V.text),$=()=>{var Y;"onThennableClick"in V&&V.onThennableClick?V.onThennableClick():(Y=V.onClick)==null||Y.call(V)};return r.jsx(he,{color:HMe(F.type),className:"w-full sm:w-auto",onClick:$,children:z},F.id)},e[24]=f,e[25]=O):O=e[25],S=r.jsx("div",{className:"flex w-full flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:R.map(O)})}}e[15]=c,e[16]=s,e[17]=x,e[18]=f,e[19]=o,e[20]=S,e[21]=C}else S=e[20],C=e[21];if(C!==Symbol.for("react.early_return_sentinel"))return C;const k=S;let M;e[26]!==k?(M=k?{customActions:k}:void 0,e[26]=k,e[27]=M):M=e[27];let T;return e[28]!==u||e[29]!==m||e[30]!==o||e[31]!==M||e[32]!==d?(T=r.jsx(pm,{bannerIconImageUrl:m,onDismiss:o,title:d,description:u,actions:M}),e[28]=u,e[29]=m,e[30]=o,e[31]=M,e[32]=d,e[33]=T):T=e[33],T};function KMe(t){return(t==null?void 0:t.action_v2.action_enum)===Ln.DROPDOWN}function QMe(t){return t!=null}function JMe(t){const{action:e,formatted:n}=t;return e.type===Jr.COPY&&"onThennableClick"in n&&typeof n.onThennableClick=="function"}function XMe(t){const{action:e}=t;return e.type!==Jr.COPY}const PJe=t=>{"use forget";const e=H.c(21),{clientThreadId:n,openFileDialog:s}=t,o=UI(),a=Ue(n,me.getRequestId),i=Jo(a),l=mF(),c=pF();let d;e[0]!==(o==null?void 0:o.beacon_id)||e[1]!==(o==null?void 0:o.beacon_name)||e[2]!==i?(d=()=>{var b,v;i&&(U.logEventWithStatsig("Web Beacon Ignored","chatgpt_web_beacon_ignored",{beacon_id:(b=o==null?void 0:o.beacon_id)!=null?b:"unknown",beacon_name:(v=o==null?void 0:o.beacon_name)!=null?v:"unknown",beacon_type:"banner"}),Qc.dismiss())},e[0]=o==null?void 0:o.beacon_id,e[1]=o==null?void 0:o.beacon_name,e[2]=i,e[3]=d):d=e[3];let u;e[4]!==o||e[5]!==i?(u=[i,o],e[4]=o,e[5]=i,e[6]=u):u=e[6],_.useEffect(d,u);const m=_.useRef(!1);let f;e[7]!==o||e[8]!==l?(f=()=>{m.current||o&&(U.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:o.beacon_id,beacon_name:o.beacon_name,beacon_type:"banner"}),l.mutate(o.beacon_id),m.current=!0)},e[7]=o,e[8]=l,e[9]=f):f=e[9];const p=f;let g;e[10]!==o||e[11]!==c?(g=()=>{o&&(U.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:o.beacon_id,beacon_name:o.beacon_name,beacon_type:"banner"}),c.mutate(o.beacon_id)),Qc.dismiss()},e[10]=o,e[11]=c,e[12]=g):g=e[12];const h=g;let x;e[13]!==o||e[14]!==n||e[15]!==h||e[16]!==p||e[17]!==s?(x=o&&r.jsx(Xe.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(ZMe,{clientThreadId:n,beaconInfo:o,onDismiss:h,onMount:p,openFileDialog:s})}),e[13]=o,e[14]=n,e[15]=h,e[16]=p,e[17]=s,e[18]=x):x=e[18];let y;return e[19]!==x?(y=r.jsx(dn,{children:x}),e[19]=x,e[20]=y):y=e[20],y};function e4e(t){const e=Ue(t,me.getRequestId),n=Jo(e),s=G(),o=ht(s,t),a=ue(()=>QW(o)),i=UI(),l=Object.values(Ln),c=i!=null&&i.action_items.every(d=>l.includes(d.action_v2.action_enum)?d.action_v2.action_enum===Ln.DROPDOWN?d.action_v2.items.every(u=>l.includes(u.action_v2.action_enum)):d.action_v2.action_enum===Ln.CREATE_PROMPT?!a:!0:!1);return!n&&c}const t4e=3,n4e=3,px="oai/apps/connectorInContextUpsellBannerV1";function s4e(t){return!!Ve(t,"3819205143",{disableExposureLog:!1}).get("enabled",!0)}function o4e(t){return t?new Date>n2(t,t4e):!0}function hF(t){var m;const e=G(),[n,s]=ja(px,null,f=>f!=null&&typeof f=="object"&&typeof f.messageId=="string"&&typeof f.lastSeenAt=="number"&&typeof f.interacted=="boolean"&&typeof f.viewCount=="number"&&typeof f.hasDismissed=="boolean"),o=s4e(e),a=n?wi(n.lastSeenAt):null,i=n&&(m=n.viewCount)!=null?m:0,l=n?n.hasDismissed:!1;return{canBeSeen:t!==""&&!l&&o&&(!n||i<=n4e&&(o4e(a)||n.interacted===!1)),markSeen:f=>{const p={messageId:t,lastSeenAt:Ca(new Date),interacted:f,viewCount:(n?n.viewCount:0)+(f?0:1),hasDismissed:l};Ee.count(Ae.DEFAULT,"connector_upsell_banner_shown"),s(p),window.localStorage.setItem(px,JSON.stringify(p))},markDismissed:()=>{const f={messageId:t,lastSeenAt:Ca(new Date),interacted:!0,viewCount:0,hasDismissed:!0};Ee.count(Ae.DEFAULT,"connector_upsell_banner_dismissed"),s(f),window.localStorage.setItem(px,JSON.stringify(f))}}}const yv=30,a4e=3,r4e=1,vv=Nt(Cn(()=>({lastSeenInContextUpsellBannerAt:l4e()}))),bv=Nt(Cn(()=>({inContextUpsellBannerPeriodStartAt:_F()}))),Sv=Nt(Cn(()=>({inContextUpsellBannerPeriodExposureCount:xF()}))),Cv=Nt(Cn(()=>({inContextUpsellBannerInteractedInPeriod:c4e()}))),wv=Nt(Cn(()=>({inContextUpsellBannerLastSeenId:yF()})));function i4e(t){if(yF()===t)return;const n=_F(),s=xF();!n||!s||xa(Date.now(),n)>=yv?kv({lastSeenAt:new Date,periodStartAt:new Date,exposureCount:1,interactedInPeriod:!1,lastSeenId:t}):kv({lastSeenAt:new Date,exposureCount:s+1,lastSeenId:t})}function kv({lastSeenAt:t,periodStartAt:e,exposureCount:n,interactedInPeriod:s,lastSeenId:o}){t===void 0?t=vv.getState().lastSeenInContextUpsellBannerAt:vv.setState(i=>{i.lastSeenInContextUpsellBannerAt=t===void 0?null:t}),e===void 0?e=bv.getState().inContextUpsellBannerPeriodStartAt:bv.setState(i=>{i.inContextUpsellBannerPeriodStartAt=e===void 0?null:e}),n===void 0?n=Sv.getState().inContextUpsellBannerPeriodExposureCount:Sv.setState(i=>{i.inContextUpsellBannerPeriodExposureCount=n===void 0?null:n}),s===void 0?s=Cv.getState().inContextUpsellBannerInteractedInPeriod:Cv.setState(i=>{i.inContextUpsellBannerInteractedInPeriod=s===void 0?null:s}),o===void 0?o=wv.getState().inContextUpsellBannerLastSeenId:wv.setState(i=>{i.inContextUpsellBannerLastSeenId=o===void 0?null:o});const a={lastSeenInContextUpsellBannerAt:t?String(Ca(t)):null,inContextUpsellBannerPeriodStartAt:e?String(Ca(e)):null,inContextUpsellBannerPeriodExposureCount:n,inContextUpsellBannerInteractedInPeriod:s,inContextUpsellBannerLastSeenId:o};localStorage.setItem(Le.O3MiniHighInContextUpsellBanner,JSON.stringify(a))}function mf(){const t=localStorage.getItem(Le.O3MiniHighInContextUpsellBanner);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}}function l4e(){var e;const t=(e=mf())==null?void 0:e.lastSeenInContextUpsellBannerAt;return t?wi(Number(t)):null}function _F(){var e;const t=(e=mf())==null?void 0:e.inContextUpsellBannerPeriodStartAt;return t?wi(Number(t)):null}function xF(){var t,e;return(e=(t=mf())==null?void 0:t.inContextUpsellBannerPeriodExposureCount)!=null?e:null}function c4e(){var t,e;return(e=(t=mf())==null?void 0:t.inContextUpsellBannerInteractedInPeriod)!=null?e:null}function yF(){var t,e;return(e=(t=mf())==null?void 0:t.inContextUpsellBannerLastSeenId)!=null?e:null}const d4e=t=>{"use forget";var R,O;const e=H.c(39),{actions:n,title:s,description:o,onDismiss:a,onInteract:i,primaryButtonColor:l,secondaryButtonColor:c,bannerIconImageUrl:d,icon:u,className:m,contentClassName:f}=t,p=J();let g;e[0]!==n||e[1]!==p?(g=(R=n==null?void 0:n.primaryAction)!=null&&R.text?typeof n.primaryAction.text=="string"?n.primaryAction.text:p.formatMessage(n.primaryAction.text):void 0,e[0]=n,e[1]=p,e[2]=g):g=e[2];const h=g;let x;e[3]!==n||e[4]!==p?(x=(O=n==null?void 0:n.secondaryAction)!=null&&O.text?typeof n.secondaryAction.text=="string"?n.secondaryAction.text:p.formatMessage(n.secondaryAction.text):void 0,e[3]=n,e[4]=p,e[5]=x):x=e[5];const y=x,b=n==null?void 0:n.customActions;let v;e[6]!==m?(v=W("relative -mb-9 ps-4! pe-2.5! pt-2.5 pb-9!","rounded-t-[32px] rounded-b-none border border-b-0","bg-token-bg-tertiary! dark:bg-token-bg-tertiary!","border-token-border-strong/60 dark:border-token-border-strong/60",m),e[6]=m,e[7]=v):v=e[7];let S;e[8]!==f?(S=W(f),e[8]=f,e[9]=S):S=e[9];let C;e[10]!==d||e[11]!==u?(C=u||d&&r.jsx("img",{src:d,alt:"",style:{width:24,height:24,objectFit:"contain"}}),e[10]=d,e[11]=u,e[12]=C):C=e[12];let k;e[13]!==s?(k=s&&r.jsxs("span",{className:"font-medium",children:[s,s.toString().endsWith(".")?"":r.jsx(r.Fragment,{children:"."})]}),e[13]=s,e[14]=k):k=e[14];let M;e[15]!==o?(M=o?r.jsxs(r.Fragment,{children:["",r.jsx("span",{dangerouslySetInnerHTML:{__html:o}})]}):null,e[15]=o,e[16]=M):M=e[16];let T;e[17]!==k||e[18]!==M?(T=r.jsxs("div",{className:"text-token-text-secondary text-sm",children:[k,M]}),e[17]=k,e[18]=M,e[19]=T):T=e[19];let E;e[20]!==a||e[21]!==i?(E=a?()=>{i==null||i(),a==null||a()}:void 0,e[20]=a,e[21]=i,e[22]=E):E=e[22];let A;e[23]!==(n==null?void 0:n.primaryAction)||e[24]!==(n==null?void 0:n.secondaryAction)||e[25]!==b||e[26]!==i||e[27]!==l||e[28]!==h||e[29]!==c||e[30]!==y?(A=b!=null?b:r.jsxs("div",{className:"m-w-fit flex shrink-0 flex-col gap-2 pb-1 md:pb-0",children:[h&&r.jsx(he,{onClick:()=>{var D,F;i==null||i(),(F=(D=n==null?void 0:n.primaryAction)==null?void 0:D.onClick)==null||F.call(D)},color:l!=null?l:"secondary",className:W("text-[#5856D6] dark:text-[#DCDBF6]","min-h-8"),children:h}),y&&r.jsx(he,{onClick:()=>{var D,F;i==null||i(),(F=(D=n==null?void 0:n.secondaryAction)==null?void 0:D.onClick)==null||F.call(D)},color:c!=null?c:"secondary",className:"shrink-0",children:y})]}),e[23]=n==null?void 0:n.primaryAction,e[24]=n==null?void 0:n.secondaryAction,e[25]=b,e[26]=i,e[27]=l,e[28]=h,e[29]=c,e[30]=y,e[31]=A):A=e[31];let N;return e[32]!==A||e[33]!==v||e[34]!==S||e[35]!==C||e[36]!==T||e[37]!==E?(N=r.jsx("div",{className:"relative",children:r.jsx(mn,{className:v,contentClassName:S,isElevated:!1,icon:C,title:void 0,content:T,onDismiss:E,customCtas:A})}),e[32]=A,e[33]=v,e[34]=S,e[35]=C,e[36]=T,e[37]=E,e[38]=N):N=e[38],N},u4e=[Wt.UPGRADE_TO_GO,Wt.GET_PLUS,Wt.GET_PRO,Wt.GET_BUSINESS_TRIAL,Wt.GET_PLUS_TRIAL,Wt.GET_GO_TRIAL],m4e=j(()=>I(()=>Promise.resolve().then(()=>eJ),void 0).then(t=>t.TatertotNuxModal));function f4e({clientThreadId:t,rateLimitInfo:e,onDismiss:n,onInteract:s,onMount:o}){"use no-forget";var ee;const a=G(),{name:i,title:l,call_to_action:c,description:d,icon_image_url:u}=e,m="metadata"in e&&e.metadata?e.metadata:{},f=ut(a),{updateSystemHint:p}=na(),g=wr(),h=JW(),x=Ue(t,me.getIsNewConversation),y=(ee=f==null?void 0:f.planType)!=null?ee:"unknown",b=Yo(),v=te=>{switch(te.trim().toLowerCase()){case"image_gen":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_IMAGE_GEN;case"send":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_SEND;case"gizmo":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO;case"gizmo_tag":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GIZMO_TAG;case"dalle":case"dall_e":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_DALLE;case"advanced_data_analysis":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_ADAVANCED_DATA_ANALYSIS;case"gpt_4o":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_4O;case"gpt_5_auto":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GPT_5_AUTO;case"progress_banner_gpt_5":return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_PROGRESS_BANNER_GPT_5;default:return Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_TEMPLATE}},S=h&&"block_reason"in h?h.block_reason:null,C="banner_description",k=_.useMemo(()=>({type:i||"unknown",location:C,plan_type:y,is_new_conversation:x,is_hard_block:!!h,hard_block_reason:S!=null?S:"",call_to_action:c,title:l,description:d,icon_image_url:u}),[i,y,x,h,S,c,l,d,u]),M=at(),T=!pt(a),E=Nl(a),A=Nd(_t.signUpButtonText),{eligible:N,isLoading:R}=$e(Ye.hasSeenTatertotNux),O=Ve(a,"1368081792"),D=i9(),F=wd({skip:i!=="agent-connector-in-context-upsell",fetchValidLinksOnly:!0,productSku:"n7jupd"}),V=Array.from(F.connectorLinks.values()).some(te=>te.some(le=>le.connector_id===(m==null?void 0:m.connector_id))),{addSource:z}=Ra(t),$=te=>{switch(te){case Wt.CONNECT_CONNECTOR:return{text:_t.connect,onClick:()=>{U.logEventWithStatsig("Agent Connector In Context Upsell Banner CTA Clicked","chatgpt_agent_connector_in_context_upsell_banner_cta_clicked",{location:"Agent Connector In Context Upsell Banner CTA Clicked",eventProperties:k});const le=jt(t),re=le?new URL(pa(le),window.location.origin):new URL(window.location.href);if(re.searchParams.set("oauth_success","true"),!!(m!=null&&m.connector_id))if(V){z(xp[m==null?void 0:m.connector_id]);return}else D({connectorId:m==null?void 0:m.connector_id,redirectAfter:re.toString(),systemHintType:Ie.Agent,referrer:zc.AgentConnectBanner})}};case Wt.AUTHENTICATE:return{text:E?_t.logInButtonText:A,onClick:()=>{Kt(a,{fallbackScreenHint:E?"login":"signup",callback:le=>{E?U.logLogInButtonClicked({location:"Rate limit banner - ".concat(i),provider:le},v(i)):U.logSignUpButtonClicked({location:"Rate limit banner - ".concat(i),provider:le},v(i))},skipLoginModal:!Ja(a)})}};case Wt.AUTHENTICATE_SECONDARY:return{text:E?A:_t.logInButtonText,onClick:()=>{Kt(a,{fallbackScreenHint:E?"signup":"login",callback:le=>{E?U.logSignUpButtonClicked({location:"Rate limit banner - ".concat(i),provider:le},v(i)):U.logLogInButtonClicked({location:"Rate limit banner - ".concat(i),provider:le},v(i))},skipLoginModal:!Ja(a)})}};case Wt.GET_PLUS:return{text:Dm(a),onClick:()=>{U.logRateLimitGetPlusButtonClicked(k),T?Kt(a,{fallbackScreenHint:E?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:le=>{E?U.logLogInButtonClicked({location:"Rate limit banner Get Plus upsell",provider:le},Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL):U.logSignUpButtonClicked({location:"Rate limit banner Get Plus upsell",provider:le},Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PLUS_UPSELL)},skipLoginModal:!Ja(a)}):gn(M,"Prompt textarea rate limit banner")}};case Wt.NEW_CHAT:return{text:Di.newChatButton,onClick:()=>{U.logNewChatButtonClicked({location:C}),Ti(M)}};case Wt.DEEP_RESEARCH_IN_CONTEXT_UPSELL:{const le=me.findNode(ft(t),ve=>XW(ve.message)),re=le?ko(le.message):void 0;return{text:Di.tryItButton,onClick:()=>{U.logEventWithStatsig("In Context Upsell Banner Deep Research CTA Clicked","chatgpt_in_context_upsell_banner_deep_research_cta_clicked",{location:"In-context upsell deep research - Try it button",eventProperties:k}),p(Ie.Research,{clientThreadId:t});const ve=Et(g);ve.focus(),bo(ve,re!=null?re:"")}}}case Wt.GET_PRO:return{text:MZ(a),onClick:()=>{U.logRateLimitUpgradePlanButtonClicked(B(w({},k),{upgrade_plan_tye:"pro"})),T?Kt(a,{fallbackScreenHint:E?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:le=>{E?U.logLogInButtonClicked({location:"Rate limit banner Get Pro upsell",provider:le},Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL):U.logSignUpButtonClicked({location:"Rate limit banner Get Pro upsell",provider:le},Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_GET_PRO_UPSELL)},skipLoginModal:!Ja(a)}):gn(M,"Prompt textarea rate limit banner")}};case Wt.UPGRADE_TO_GO:return{text:Di.upgradeToGoButton,onClick:()=>{U.logRateLimitUpgradePlanButtonClicked(B(w({},k),{upgrade_plan_tye:"go"})),T?Kt(a,{fallbackScreenHint:E?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:le=>{E?U.logLogInButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:le},Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL):U.logSignUpButtonClicked({location:"Rate limit banner Upgrade to Go upsell",provider:le},Ct.ACCESS_FLOW_ENTRY_POINT_RATE_LIMIT_BANNER_UPGRADE_TO_GO_UPSELL)},skipLoginModal:!Ja(a)}):gn(M,"Prompt textarea rate limit banner")}};case Wt.GET_BUSINESS_TRIAL:return{text:Di.getBusinessTrialButton,onClick:()=>{U.logRateLimitUpgradePlanButtonClicked(B(w({},k),{upgrade_plan_tye:"business"})),gn(M,"Prompt textarea rate limit banner")}};case Wt.GET_GO_TRIAL:return{text:_t.tryGoTrial,onClick:()=>{U.logRateLimitUpgradePlanButtonClicked(B(w({},k),{upgrade_plan_tye:"go"})),gn(M,"Prompt textarea rate limit banner")}};case Wt.GET_PLUS_TRIAL:return{text:Di.getPlusTrialButton,onClick:()=>{U.logRateLimitUpgradePlanButtonClicked(B(w({},k),{upgrade_plan_tye:"plus"})),gn(M,"Prompt textarea rate limit banner",void 0,void 0,Hh)}};case Wt.TRY_CODEX:return{text:Di.tryCodexButton,onClick:()=>{U.logEventWithStatsig("In Context Upsell Banner Codex CTA Clicked","chatgpt_in_context_upsell_banner_codex_cta_clicked",{location:"In-context upsell codex - Try Codex button",eventProperties:k}),M("/codex")}};case Wt.TRY_TATERTOT:return{text:Di.tryItButton,onClick:()=>{U.logEventWithStatsig("In Context Upsell Banner Tatertot CTA Clicked","chatgpt_in_context_upsell_banner_tatertot_cta_clicked",{location:"In-context upsell tatertot - Try it button",eventProperties:k}),Ee.count(Ae.TATERTOT,"tatertot_upsell_banner_try_it_clicked"),p(Ie.Tatertot,{clientThreadId:t}),!R&&N&&xe(a,"1586944302")&&gt(a,m4e)}};case Wt.NOTIFY_ADMIN_FOR_CREDITS:case Wt.ADD_CREDITS:return null}};uf(()=>{!O.get("should_change_model_picker",!0)&&k.type==="o3-mini-high-in-context-upsell-plus"&&(k.type="o3-mini-high-in-context-upsell-plus-no-model-switch"),U.logRateLimitBannerShown(k),o==null||o()});const[Y,Z]=c!=null?c:[];let Q=Z;Y===Wt.AUTHENTICATE&&b&&(Q=Wt.AUTHENTICATE_SECONDARY);const q=xe(a,"2861925050");let X={};q&&(Y===Wt.NOTIFY_ADMIN_FOR_CREDITS||Y===Wt.ADD_CREDITS)?Y===Wt.ADD_CREDITS?X={customActions:r.jsx(G8,{trigger:"prompt-textarea-rate-limit-banner"})}:Y===Wt.NOTIFY_ADMIN_FOR_CREDITS&&(X={customActions:r.jsx($8,{creditConsumingProduct:kce(i),trigger:"prompt-textarea-rate-limit-banner"})}):X={primaryAction:$(Y),secondaryAction:$(Q)};const oe=m==null?void 0:m.connector_id,{platformConnectors:se,isLoading:de}=Cd(!!oe),ie=oe?se.get(oe):void 0;let ae=null;if(i==="agent-connector-in-context-upsell"){if(oe===void 0||!ie||de)return null;ae=r.jsx(Og,{connector:ie,size:"xxlarge"})}const ce=Ve(a,"2206338824"),ye=!x&&u4e.includes(Y)?ce.get("web_design_style","control"):"control",fe=ye==="composer_banner",Ce=ye==="purple_cta";return fe?r.jsx(d4e,{onDismiss:n,title:l,description:d,actions:X,onInteract:s,bannerIconImageUrl:u!=null?u:void 0,icon:ae}):r.jsx(pm,{onDismiss:n,title:l,description:d,actions:X,primaryButtonClassName:W({"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]":Ce}),onInteract:s,bannerIconImageUrl:u!=null?u:void 0,icon:ae})}const Di=be({upgradeToGoButton:{id:"SuXEJy",defaultMessage:"Upgrade to Go"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"},tryItButton:{id:"zPDzun",defaultMessage:"Try it"},tryCodexButton:{id:"KcWniZ",defaultMessage:"Try Codex"},getBusinessTrialButton:{id:"PMkLT4",defaultMessage:"Try Business free"},getPlusTrialButton:{id:"H+N0ro",defaultMessage:"Try Plus free"}}),NJe=t=>{"use forget";const e=H.c(33),{clientThreadId:n,composerController:s}=t,o=s2(),a=Ue(n,me.getRequestId),i=Ue(n,me.getCurrentLeafId),l=Jo(a),{markSeen:c}=b9(i),{markSeen:d,markDismissed:u}=hF(i),m=G();let f;e[0]!==m?(f=Ve(m,"1368081792"),e[0]=m,e[1]=f):f=e[1];const p=f;let g;e[2]!==o||e[3]!==i||e[4]!==d||e[5]!==c?(g=o!=null&&o.name?()=>{e:switch(o.name){case"tatertot-in-context-upsell":{c(!1);break e}case"agent-connector-in-context-upsell":{d(!1);break e}case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":i4e(i)}}:void 0,e[2]=o,e[3]=i,e[4]=d,e[5]=c,e[6]=g):g=e[6];const h=g;let x;e[7]!==m?(x=xe(m,"3612584454"),e[7]=m,e[8]=x):x=e[8];const y=x,b=(o==null?void 0:o.name)==="gpt-4l"&&y;let v;e[9]!==l||e[10]!==b?(v=()=>{l&&!b&&Ku.dismissBanner()},e[9]=l,e[10]=b,e[11]=v):v=e[11];let S;e[12]!==s||e[13]!==l||e[14]!==b?(S=[l,b,s],e[12]=s,e[13]=l,e[14]=b,e[15]=S):S=e[15],_.useEffect(v,S);let C;e[16]!==(o==null?void 0:o.is_dismissible)||e[17]!==(o==null?void 0:o.name)||e[18]!==p||e[19]!==u?(C=o!=null&&o.is_dismissible?()=>{(o==null?void 0:o.name)==="agent-connector-in-context-upsell"?U.logEventWithStatsig("Dismiss Agent Connector In Context Upsell Banner","chatgpt_agent_connector_in_context_upsell_banner_dismissed",{type:"agent-connector-in-context-upsell"}):U.logEventWithStatsig("Rate Limit: Dismiss Banner","chatgpt_rate_limit_banner_dismissed",{type:!p.get("should_change_model_picker",!0)&&(o==null?void 0:o.name)==="o3-mini-high-in-context-upsell-plus"?"o3-mini-high-in-context-upsell-plus-no-model-switch":o==null?void 0:o.name}),(o==null?void 0:o.name)==="agent-connector-in-context-upsell"&&u(),Ku.dismissBanner()}:void 0,e[16]=o==null?void 0:o.is_dismissible,e[17]=o==null?void 0:o.name,e[18]=p,e[19]=u,e[20]=C):C=e[20];const k=C;let M;e[21]!==(o==null?void 0:o.name)||e[22]!==d||e[23]!==c?(M=()=>{e:switch(o==null?void 0:o.name){case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":{kv({interactedInPeriod:!0});break e}case"tatertot-in-context-upsell":{c(!0);break e}case"agent-connector-in-context-upsell":{d(!0);break e}}},e[21]=o==null?void 0:o.name,e[22]=d,e[23]=c,e[24]=M):M=e[24];const T=M;let E;e[25]!==o||e[26]!==n||e[27]!==k||e[28]!==T||e[29]!==h?(E=o&&r.jsx(Xe.div,{transition:{type:"tween",ease:"easeInOut",duration:.1},initial:{opacity:0,transform:"translateY(8px)"},animate:{opacity:1,transform:"translateY(0px)"},exit:{opacity:0,transform:"translateY(8px)"},children:r.jsx(f4e,{clientThreadId:n,rateLimitInfo:o,onDismiss:k,onInteract:T,onMount:h})}),e[25]=o,e[26]=n,e[27]=k,e[28]=T,e[29]=h,e[30]=E):E=e[30];let A;return e[31]!==E?(A=r.jsx(dn,{children:E}),e[31]=E,e[32]=A):A=e[32],A};function p4e(t,e,n,s,o,a,i,l,c,d,u,m,f){if(c||(t.name==="o3-mini-high-in-context-upsell-free"||t.name==="o3-mini-high-in-context-upsell-plus")&&(e.some(S=>S.model_slug==="o4-mini-high")||(n==null?void 0:n.id)==="o4-mini-high")||l&&i&&xa(Date.now(),i)<yv)return!1;const g=s==null||xa(Date.now(),s)>=r4e,h=o===d,x=i==null||a==null||xa(Date.now(),i)>=yv||a<a4e;if(!(g&&x||h))return!1;switch(t.name){case"deep-research-in-context-upsell":return u("should_show_deep_research_upsell_banner",!1);case"deep-research-in-context-upsell-free":return u("should_show_deep_research_upsell_banner_free",!1);case"o3-mini-high-in-context-upsell-free":return u("should_show_o3_mini_high_upsell_banner_free_user_to_plus",!1);case"o3-mini-high-in-context-upsell-plus":return u("should_show_o3_mini_high_upsell_banner_plus_user",!1);case"codex-in-context-upsell":return m("should_show_codex_upsell_banner",!1);case"codex-in-context-upsell-plus":return f("should_show_codex_upsell_banner",!1);default:return!1}}function g4e(t){"use no forget";var k;const e=G(),n=vm(),s=ue(()=>Cr(e)),o=Ch(),a=ue(()=>wn(ht(e,t))),i=Ue(t,me.getRequestId),l=Ue(t,me.getCurrentLeafId),c=Jo(i),d=vv(M=>M.lastSeenInContextUpsellBannerAt),u=Sv(M=>M.inContextUpsellBannerPeriodExposureCount),m=bv(M=>M.inContextUpsellBannerPeriodStartAt),f=wv(M=>M.inContextUpsellBannerLastSeenId),p=Cv(M=>M.inContextUpsellBannerInteractedInPeriod),g=Ve(e,"1368081792"),h=Ve(e,"1738106734"),x=Ve(e,"3861158060"),y=Ve(e,"1092897457"),b=s2(),{canBeSeen:v}=b9(l),{canBeSeen:S}=hF(l);if(n||s)return!1;let C=!1;switch(b==null?void 0:b.name){case null:case void 0:break;case"o3-mini-high-in-context-upsell-free":case"o3-mini-high-in-context-upsell-plus":case"deep-research-in-context-upsell":case"deep-research-in-context-upsell-free":case"codex-in-context-upsell":case"codex-in-context-upsell-plus":C=p4e(b,o,a,d,f,u,m,p,c,l,g.get,h.get,x.get);break;case"tatertot-in-context-upsell":C=v&&y.get("is_tatertot_enabled",!0)&&y.get("is_upsell_banner_enabled",!0);break;case"agent-connector-in-context-upsell":C=S&&((k=b.metadata)==null?void 0:k.connector_id)!==void 0;break;default:C=!0}return!c&&C}function RJe(t){"use forget";const e=H.c(2);if(!t.shouldRender)return null;let n;return e[0]!==t?(n=r.jsx(h4e,w({},t)),e[0]=t,e[1]=n):n=e[1],n}function h4e({contentArea:t,children:e}){"use no forget";const{store:n}=Ar(),s=_.useRef(null);return n.useContentAreaResizeObserver(t,s),r.jsx("div",{ref:s,className:"relative h-full w-full",children:e})}const LJe=In(()=>Qe(!1));function OJe(t){returnwindow.location.host+"/redeem/".concat(t)}function _4e(t){return"/?code=".concat(t,"#referrals")}function DJe(t,e,n){return t.formatNumber(e||0,{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:2})}function x4e(t){return"/?program=".concat(t,"#referrals")}function FJe(t){return"/refer/".concat(t)}function BJe(){const t=at(),{data:e}=vP(),{markAsViewed:n}=$e(Ye.hasSeenReferralUpsellAnnouncement);_.useEffect(()=>{e&&e.info&&Vt.logShowReferralUpsellAnnouncementBanner()},[e]);const s=e==null?void 0:e.info;return s?r.jsx(mn,{title:r.jsx(P,{id:"referralUpsellAnnouncementBanner.title",defaultMessage:"Get up to 12 free months of Plus when you refer classmates"}),content:r.jsx(P,{id:"referralUpsellAnnouncementBanner.content",defaultMessage:"Refer a friend to sign up for ChatGPT, and youll both get a $20 credit."}),primaryCtaText:r.jsx(P,{id:"referralUpsellAnnouncementBanner.primaryCtaText",defaultMessage:"Invite"}),onDismiss:()=>{n(),Vt.logCloseReferralUpsellAnnouncementBanner()},onPrimaryCtaClick:async()=>{n(),Vt.logClickReferralUpsellButton(),t(x4e(s.program_name))}}):null}const UJe=t=>{var i,l,c,d,u,m,f,p;const{data:e,isLoading:n}=lt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>zm.getReferralProgramMetadata(t)}),s=e,o=(c=(l=(i=s==null?void 0:s.metadata)==null?void 0:i.program_name)!=null?l:t)!=null?c:null,a=(s==null?void 0:s.ineligible_reason)&&(s&&!s.is_eligible&&(d=s.ineligible_reason)!=null?d:null);return{isEligible:(u=s==null?void 0:s.is_eligible)!=null?u:!1,referralMetadata:(m=s==null?void 0:s.metadata)!=null?m:null,programName:o,isReferralLoading:n,referralCode:(f=s==null?void 0:s.referral_code)!=null?f:null,transactionId:(p=s==null?void 0:s.transaction_id)!=null?p:null,referralError:a}},y4e=t=>{var a,i,l,c,d,u;const{data:e,isLoading:n}=lt({enabled:!!t,queryKey:["referralMetadata",t],queryFn:async()=>t?zm.getReferralCodeMetadata(t):{metadata:null,is_referrer:!1,ineligible_reason:null,should_forward_to_checkout:!1}}),s=e,o=(i=(a=s==null?void 0:s.metadata)==null?void 0:a.program_name)!=null?i:null;return{shouldForwardToCheckout:(l=s==null?void 0:s.should_forward_to_checkout)!=null?l:!1,isReferrer:(c=s==null?void 0:s.is_referrer)!=null?c:!1,ineligibleReason:(d=s==null?void 0:s.ineligible_reason)!=null?d:null,referralMetadata:(u=s==null?void 0:s.metadata)!=null?u:null,programName:o,isReferralLoading:n}},vF=Ye.hasDismissedRefereeRedemption,bF=()=>{const{eligible:t}=$e(vF),{referralCode:e,discountValue:n,discountDuration:s}=v4e();return{shouldShowBanner:t&&e&&n&&s,referralCode:e,discountValue:n,discountDuration:s}},v4e=()=>{const t=mt.getItem(Le.ReferralCode),{referralMetadata:e}=y4e(t);return{referralCode:t,discountValue:e==null?void 0:e.discount,discountDuration:e==null?void 0:e.duration}},b4e=()=>{const t=G(),e=xe(t,"727502549"),n=xe(t,"550432558"),{shouldShowBanner:s}=bF();return e&&n&&s};function VJe(){const t=J(),e=at(),{markAsViewed:n}=$e(vF),{shouldShowBanner:s,referralCode:o,discountValue:a,discountDuration:i}=bF();if(_.useEffect(()=>{s&&o&&a&&i&&Vt.logShowRefereeRedemptionBanner(o)},[s,o,a,i]),!s||!a||!i)return null;const l=S4e(t,a,i);return r.jsx(mn,{onPrimaryCtaClick:()=>{n(),Vt.logClickRefereeRedeemButton(o),mt.removeItem(Le.ReferralCode),e(_4e(o))},primaryCtaText:r.jsx(P,{id:"refereeRedemptionBannerPrimaryCta",defaultMessage:"Redeem"}),onDismiss:()=>{n(),Vt.logCloseRefereeRedemptionBanner(o),mt.removeItem(Le.ReferralCode)},title:l,content:r.jsx(P,{id:"xoQacW",defaultMessage:"Verify you are a student to get your first month of Plus for free."})})}function S4e(t,e,n){var i,l;const o=(l=(i=Td(e.currency_code).code.defaultMessage)==null?void 0:i.toString())!=null?l:Nm,a=t.formatNumber(e.value,{style:"currency",currency:o,minimumFractionDigits:0,maximumFractionDigits:2});return e.value===que?r.jsx(P,{id:"refereeRedemptionFree",defaultMessage:"Finish redeeming your free month of Plus"}):r.jsx(P,{id:"refereeRedemptionDiscount",defaultMessage:"Get ChatGPT Plus for {discount} off for the {months, plural, one {first month} other {first # months}}.",values:{discount:a,months:n.num_periods}})}async function C4e(t){return pe.safePost("/payments/checkout",{requestBody:t,additionalHeaders:L2(null,null,null,await tj("chatgpt_checkout").catch(e=>{Oe.addError(e)}))})}async function w4e(t,e,n){U.logEvent("Account Pay: Payment Checkout Clicked",e),We.logEvent("chatgpt_account_payment_modal_upgrade_button_click",Je.PLUS);const s=await C4e(w({plan_name:"chatgptplusplan",billing_details:t},n&&{student_verification_id:n}));U.logEvent("Account Pay: Navigating to Payment Checkout",B(w({},e),{url:s.url})),We.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",Je.PLUS,{url:s.url}),n&&mt.setItem(Le.CheckoutFrom,"students"),window.location.href=s.url}const k4e=t=>{var s;const{data:e,isLoading:n}=lt({queryKey:["referralDiscount",t],queryFn:async()=>t?await zm.getReferralDiscount():{discount:null}});return{discount:(s=e==null?void 0:e.discount)!=null?s:null,isDiscountLoading:n}},SF=Ye.hasDismissedReferrerRedemption,CF=()=>{const{eligible:t}=$e(SF),{discount:e,isDiscountLoading:n}=k4e(t);return{shouldShowBanner:t&&e&&!n,discountValue:e==null?void 0:e.value,discountDuration:e==null?void 0:e.duration}},M4e=()=>{const t=G(),e=xe(t,"727502549"),n=xe(t,"550432558"),{shouldShowBanner:s}=CF();return e&&n&&s},Wg="month",wF="year";function GJe(){const t=_n(),e=G(),n=J(),{markAsViewed:s}=$e(SF),{country:o}=KD(),a=ZD({country:o,currentAccount:t,location:"ReferrerRedemptionAvailableAnnouncementBanner",shouldUsePaidSubscriptionBillingCurrency:!0}),i=_.useMemo(()=>B(w({},t==null?void 0:t.subscriptionAnalyticsParams),{referrer:document.referrer}),[t]);async function l(){try{if(!a)return;await w4e(a,i)}catch(g){}}const{shouldShowBanner:c,discountValue:d,discountDuration:u}=CF();if(_.useEffect(()=>{c&&d&&u&&Vt.logShowReferrerRedemptionBanner()},[c,d,u]),!c||!d||!u||!a)return null;const m=T4e(n,a,d,u),f=E4e(n,a,d,u),p=r.jsxs("div",{className:"grow",children:[r.jsx("div",{className:"mb-0.5 font-semibold",children:m}),r.jsx("span",{className:"text-token-text-secondary",children:f})]});return r.jsx(mn,{onPrimaryCtaClick:()=>{s(),Vt.logClickReferrerRedeemButton(),l()},primaryCtaText:r.jsx(P,w({},Dm(e))),onDismiss:()=>{s(),Vt.logCloseReferrerRedemptionBanner()},content:p})}function T4e(t,e,n,s){var u,m;const o=Td(e.currency),a=s?s.period:Wg,i=s?s.num_periods:1,l=(m=(u=o.code.defaultMessage)==null?void 0:u.toString())!=null?m:Nm,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let d;return a===Wg?d=i===1?r.jsx(P,{id:"referrerRedemptionBannerTitleForSingleMonth",defaultMessage:"Your {discount} credit is ready",values:{discount:c}}):r.jsx(P,{id:"referrerRedemptionBannerTitleForPluralMonths",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):a===wF&&(d=i===1?r.jsx(P,{id:"referrerRedemptionBannerTitleForSingleYear",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}}):r.jsx(P,{id:"referrerRedemptionBannerTitleForPluralYears",defaultMessage:"Redeem your {discount} referral reward",values:{discount:c}})),d}function E4e(t,e,n,s){var u,m;const o=Td(e.currency),a=s?s.period:Wg,i=s?s.num_periods:1,l=(m=(u=o.code.defaultMessage)==null?void 0:u.toString())!=null?m:Nm,c=t.formatNumber(n.value,{style:"currency",currency:l,minimumFractionDigits:0,maximumFractionDigits:2});let d;return a===Wg?d=i===1?r.jsx(P,{id:"referrerRedemptionBannerContentForSingleMonth",defaultMessage:"Your referral link was used  claim your free month of Plus."}):r.jsx(P,{id:"referrerRedemptionBannerContentForPluralMonths",defaultMessage:"Your referral link earned you {discount} off {num_months} months of Plus.",values:{discount:c,num_months:i}}):a===wF&&(d=i===1?r.jsx(P,{id:"referrerRedemptionBannerContentForSingleYear",defaultMessage:"Your referral link earned you {discount} off a year of Plus.",values:{discount:c}}):r.jsx(P,{id:"referrerRedemptionBannerContentForPluralYears",defaultMessage:"Your referral link earned you {discount} off {num_years} years of Plus.",values:{discount:c,num_years:i}})),d}const gx={logDisabledAccess(t){Ee.count(Ae.STUDENTS,"students.web.disabled",{reason:t})},logLandingPageImpression(){Ee.count(Ae.STUDENTS,"students.web.landingPageImpression"),U.logEvent("Students: Landing Page Impression")},logClickLoginButton(t){Ee.count(Ae.STUDENTS,"students.web.clickLoginButton",{key:"source",value:t}),U.logEvent("Students: Click Login Button",{source:t})},logClickVerifyButton(t){Ee.count(Ae.STUDENTS,"students.web.clickVerifyButton",{key:"source",value:t}),U.logEvent("Students: Click Verify Button",{source:t})},logClickCheckoutButton(t){Ee.count(Ae.STUDENTS,"students.web.clickCheckoutButton",{key:"source",value:t}),U.logEvent("Students: Click Checkout Button",{source:t})},logShowNeedsVerificationModal(){Ee.count(Ae.STUDENTS,"students.web.showNeedsVerificationModal"),U.logEvent("Students: Show Needs Verification Modal")},logShowVerifiedModal(){Ee.count(Ae.STUDENTS,"students.web.showVerifiedModal"),U.logEvent("Students: Show Verified Modal")},logError(t){Ee.count(Ae.STUDENTS,"students.web.error",{key:"errorType",value:t})},logShowAnnouncementBanner(){Ee.count(Ae.STUDENTS,"students.web.showAnnouncementBanner"),U.logEvent("Students: Show Announcement Banner")},logClickAnnouncementBanner(){Ee.count(Ae.STUDENTS,"students.web.clickAnnouncementBanner"),U.logEvent("Students: Click Announcement Banner")},logCloseAnnouncementBanner(){Ee.count(Ae.STUDENTS,"students.web.closeAnnouncementBanner"),U.logEvent("Students: Close Announcement Banner")}},$Je="redirectedFromAuth",r4="studentsPromotion";function i4(t){return t?"/students?".concat(t,"=true"):"/students"}function HJe(t=!1){return t?window.location.origin+"/?".concat(r4,"=true"):"/?".concat(r4,"=true")}function WJe(t){const e=t.hasPaidSubscription(),n=t.getLastActiveSubscription(),s=e&&[w_.CHATGPT_IOS,w_.SORA_IOS].includes(n.purchase_origin_platform),o=e&&n.purchase_origin_platform===w_.MOBILE_ANDROID;return s||o}function zJe(){const t=at(),{markAsViewed:e}=$e(Ye.hasSeenStudentsUpsellAnnouncement);return _.useEffect(()=>{gx.logShowAnnouncementBanner()},[]),r.jsx(mn,{title:r.jsx(P,{id:"GA5kGX",defaultMessage:"Students can claim 2 months of Plus, free."}),content:r.jsx(P,{id:"WOGB1g",defaultMessage:"Get access to premium features when you verify youre a student in the US or Canada. {learnMoreLink}",values:{learnMoreLink:r.jsx("span",{className:"underline",children:r.jsx(Aa,{to:i4(),children:r.jsx(P,{id:"0cZpUc",defaultMessage:"Learn more"})})})}}),primaryCtaText:r.jsx(P,{id:"uA26i5",defaultMessage:"Learn More"}),onPrimaryCtaClick:()=>{gx.logClickAnnouncementBanner(),e(),t(i4())},onDismiss:()=>{gx.logCloseAnnouncementBanner(),e()}})}const qJe=t=>S9([Tt.GizmoMagicCreate,Tt.GizmoTest],t==null?void 0:t.kind),A4e=t=>S9([Tt.GizmoInteraction,Tt.GizmoMagicCreate,Tt.GizmoTest],t==null?void 0:t.kind);function kF(t){return[{title:t.formatMessage({id:"er580q",defaultMessage:"Create an image of a magazine cover of cute animals with headlines and text"}),body:"",type:ke.Autocomplete,prompt:t.formatMessage({id:"SKZKBN",defaultMessage:"Create an image of a photorealistic magazine cover for 'CUTE ANIMALS,' featuring three impossibly cute and stylishly accessorized pets, with realistic, catchy headlines and teaser text"}),theme:et.Image},{title:t.formatMessage({id:"ukPFbH",defaultMessage:"Create an image for a garden-themed birthday party invitation"}),body:"",type:ke.Autocomplete,prompt:t.formatMessage({id:"uYg5kL",defaultMessage:"Create an image of a colorful invitation for a garden-themed birthday party, including whimsical typography"}),theme:et.Image},{title:t.formatMessage({id:"mMiJxP",defaultMessage:"Create an image of an astronaut with an inflatable duck on Mars"}),body:"",type:ke.Autocomplete,prompt:t.formatMessage({id:"5nFWh4",defaultMessage:"Create a photorealistic image of an international astronaut on Mars, wearing a giant duck inflatable toy around its waist"}),theme:et.Image},{title:t.formatMessage({id:"+T7POI",defaultMessage:"Create an image of a tutorial for cooking pasta"}),body:"",type:ke.Autocomplete,prompt:t.formatMessage({id:"9N2bJ0",defaultMessage:"Create an image of a comic-book style tutorial for cooking pasta"}),theme:et.Image}]}const I4e=Rm(()=>Qe(!1)),j3=Rm(t=>{const e=Qe([],{equals:Sd}),n=It(()=>{const s=I4e(t),o=ez(Et(t));return Dh(t)&&!s()&&e().length>0&&!(o!=null&&o())},{getServerFallback:()=>!1});return{autocompletions$:e,shouldShowAutocomplete$:n}});function Gl(){"use forget";const t=H.c(8),e=G(),{store:n}=Ar(),s=ss(),{clearSystemHintModeTrigger:o,getSystemHintModeTrigger:a}=na(),i=!nf.useDisabledGlobally(),l=Ci();let c;return t[0]!==s||t[1]!==o||t[2]!==e||t[3]!==l||t[4]!==a||t[5]!==i||t[6]!==n?(c=(d,u,m,f)=>{var q,X,oe,se,de,ie,ae;const p=n.getSharedProps();if(!p)return;const{clientThreadId:g,onResetState:h,conversationMode:x}=p,y=ht(e,g);yn.hideThreadHeader();const b=s===Ie.Search,v=b?a(Ie.Search):void 0,S=ft(g);let C;u.type===ke.Starter&&(C=(q=u.data)==null?void 0:q.system_hint);const k=C!=null?C:s,M=(oe=(X=S==null?void 0:S.selectedSources)==null?void 0:X.get(k))!=null?oe:new Set;let T,E;if(G2(u))T=u.categoryId!=="ask"?[u.categoryId]:[],E=u.modelOverride?{model:u.modelOverride}:{};else{const ce=I1(k?[k]:[]);T=(se=ce.systemHints)!=null?se:[],E=(de=ce.extraStreamParams)!=null?de:{}}i&&(E.enableMessageFollowups=!0);const A=wn(y),{content:N,attachments:R}=t5e(l,yo(u),A,x,k),O=T.includes(Ie.Slurm),D=T.includes(Ie.Glaux),F=Um(),V=w({suggestion_type:u.type,starter_prompt_id:"id"in u?u.id:void 0,selected_sources:O||D?Array.from(M.values()).map(P4e).filter(Boolean):void 0},T.length>0&&{system_hints:T});if(F&&(V.__internal={search_settings:F}),R.length>0&&(V.attachments=R),u.type===ke.Starter&&((ie=u.data)!=null&&ie.kaur1br5)){const ce=(ae=u.data)==null?void 0:ae.kaur1br5;V.kaur1br5=ce}const z=us(N,V),$=[];(S==null?void 0:S.startedWithByoMcp)===!0&&$.push(Ub("",{disable_tool_ids:["gmail","gcal","gcontacts"]}));let Y;if(T!=null&&T.some(j4e)&&o2(e)){const ce=tz(e);ce&&(Y=ce)}Er({conversation:y,requestedModelId:Y,promptMessage:z,prependMessages:$,sourceEvent:d,extraStreamParams:E,completionMetadata:{suggestions:m,suggestion:u,suggestionIndex:f,conversationMode:x!=null?x:S==null?void 0:S.mode,systemHints:T,searchSource:v}});const Q=me.getCurrentNode(S).message.id;h(),c1(u,f,g,Q),Qb()||$2(),v&&b&&o(Ie.Search)},t[0]=s,t[1]=o,t[2]=e,t[3]=l,t[4]=a,t[5]=i,t[6]=n,t[7]=c):c=t[7],c}function j4e(t){return Tm(t)}function P4e(t){return bb[t]}function P3(){return"virtualKeyboard"in navigator}const N4e=Nt()(()=>({height:0,isKeyboardOpen:!1,scrollOffset:null,composerHeight:null}));function R4e(t){return t?t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable:!1}function L4e(){document.documentElement.classList.add("keyboard-open")}function O4e(){document.documentElement.classList.remove("keyboard-open")}const N3=xs(()=>{const t=Qe(null),e=Qe(!1),n=Qe(null),s=Qe(0),o=Qe(!1),a=new EventTarget,i=m=>{a.dispatchEvent(new CustomEvent(m))},l=(m,f,p)=>{a.addEventListener(m,f,p)},c=(m,f,p)=>{a.removeEventListener(m,f,p)};setTimeout(()=>{o.set(P3())});function d(m){const f=new AbortController,p=t();if(!p)return;p.blur(),l("keyboard-closed",()=>{f.abort(),m==null||m()},{signal:f.signal});const g=window.setTimeout(()=>{m==null||m(),f.abort()},500);f.signal.addEventListener("abort",()=>{window.clearTimeout(g)})}return{closeKeyboard:d,events:{addEventListener:l,dispatch:i,removeEventListener:c},focusedElement:t,isKeyboardOpen:e,keyboardDimensions:n,keyboardHeight:s,reset:()=>{ba(()=>{t.set(null),e.set(!1),n.set(null),s.set(0)})},supportsVirtualKeyboardApi$:o}});function YJe(t){if(!P3())return;const e=N3(t);let n=!1;const s=navigator.virtualKeyboard.overlaysContent;function o(){if(n)return;e.reset(),document.removeEventListener("focusout",a),O4e(),document.body.style.removeProperty("--screen-keyboard-height"),navigator.virtualKeyboard.removeEventListener("geometrychange",i);let c;const d=u=>{u.target.boundingRect.height===0&&setTimeout(()=>{e.events.dispatch("keyboard-closed"),window.clearTimeout(c)},100)};c=window.setTimeout(()=>{navigator.virtualKeyboard.removeEventListener("geometrychange",d),e.events.dispatch("keyboard-closed")},500),navigator.virtualKeyboard.addEventListener("geometrychange",d)}const a=()=>{n=!1,e.isKeyboardOpen.set(!1),requestAnimationFrame(o)},i=c=>{document.body.style.setProperty("--screen-keyboard-height","".concat(c.target.boundingRect.height,"px")),L4e(),e.keyboardDimensions.set(c.target.boundingRect),e.keyboardHeight.set(c.target.boundingRect.height)},l=c=>{const d=c.target;R4e(d)&&(n=!0,e.focusedElement.set(d),e.isKeyboardOpen.set(!0),e.events.dispatch("keyboard-opened"),document.addEventListener("focusout",a),navigator.virtualKeyboard.addEventListener("geometrychange",i))};return navigator.virtualKeyboard.overlaysContent=!0,document.addEventListener("focusin",l),()=>{navigator.virtualKeyboard.overlaysContent=s,document.removeEventListener("focusin",l),o()}}function ZJe(t){"use forget";const e=H.c(14),{canShowAutocomplete$:n,layoutMode:s,composerController:o,clientThreadId:a}=t,i=G(),l=ue(n);let c;e[0]!==i?(c=N3(i),e[0]=i,e[1]=c):c=e[1];const u=ue(c.supportsVirtualKeyboardApi$);let m;e[2]!==o?(m=(b,v,S)=>{v&&bo(Et(o),S?"".concat(S.title).concat(S.body):"")},e[2]=o,e[3]=m):m=e[3];const f=m;if(!l)return null;const p=s==="center"?"top-full":"bottom-full",g=u&&"keyboard-open:fixed keyboard-open:bottom-[calc(var(--screen-keyboard-height,0px)+var(--composer-height,100px)+12px)] keyboard-open:px-4";let h;e[4]!==p||e[5]!==g?(h=W("absolute start-0 z-[-1] box-border w-full ps-0",p,g),e[4]=p,e[5]=g,e[6]=h):h=e[6];let x;e[7]!==a||e[8]!==o||e[9]!==f?(x=r.jsx(D4e,{composerController:o,onChange:f,clientThreadId:a}),e[7]=a,e[8]=o,e[9]=f,e[10]=x):x=e[10];let y;return e[11]!==h||e[12]!==x?(y=r.jsx("div",{className:h,children:x}),e[11]=h,e[12]=x,e[13]=y):y=e[13],y}function D4e(t){"use forget";const e=H.c(51),{composerController:n,onSelect:s,onChange:o,clientThreadId:a}=t;let i;e[0]!==n?(i=j3(n),e[0]=n,e[1]=i):i=e[1];const l=ue(i.autocompletions$),c=Gl(),d=G();let u,m;e[2]!==a||e[3]!==l?(u=()=>{l.length>0&&l.every(B4e)&&fj(l,a)},m=[l,a],e[2]=a,e[3]=l,e[4]=u,e[5]=m):(u=e[4],m=e[5]),_.useEffect(u,m);let f;e[6]!==c||e[7]!==d||e[8]!==s?(f=(q,X,oe,se)=>{var de,ie;if(X.onSelectOverride)return X.onSelectOverride(q,X,oe,se);if(X.type===ke.Templated){const ae={id:(de=X.id)!=null?de:"dyn-".concat(Date.now()),name:X.title,prompt:X.prompt,description:(ie=X.title)!=null?ie:null};nz({ctx:d,prompt:ae,referer:"autocomplete-suggestion"}),s==null||s(X,oe,se);return}s==null||s(X,oe,se),c(q,X,oe,se)},e[6]=c,e[7]=d,e[8]=s,e[9]=f):f=e[9];const p=f,g=l.length>0,[h,x]=_.useState(-1),[y,b]=_.useState(!1);let v;e[10]!==o||e[11]!==h||e[12]!==l?(v=()=>{const q=h===l.length-1?0:h+1;return x(q),o==null||o(q,!0,l[q]),!0},e[10]=o,e[11]=h,e[12]=l,e[13]=v):v=e[13];const S=ya(v);let C;e[14]!==o||e[15]!==h||e[16]!==l?(C=()=>{const q=h<=0?l.length-1:h-1;return x(q),o==null||o(q,!0,l[q]),!0},e[14]=o,e[15]=h,e[16]=l,e[17]=C):C=e[17];const k=ya(C);let M;e[18]!==p||e[19]!==h||e[20]!==l?(M=q=>l[h]?(p(q,l[h],l,h),!0):!1,e[18]=p,e[19]=h,e[20]=l,e[21]=M):M=e[21];const T=ya(M);let E,A;e[22]!==n||e[23]!==S||e[24]!==k||e[25]!==T?(E=()=>C9(Et(n),{ArrowDown:S,ArrowUp:k,Enter:T}),A=[n,S,k,T],e[22]=n,e[23]=S,e[24]=k,e[25]=T,e[26]=E,e[27]=A):(E=e[26],A=e[27]),_.useEffect(E,A);let N,R;e[28]!==y?(N=()=>{if(!y){const q=()=>{b(!0),window.removeEventListener("mousemove",q)};return window.addEventListener("mousemove",q),()=>{window.removeEventListener("mousemove",q)}}},R=[y],e[28]=y,e[29]=N,e[30]=R):(N=e[29],R=e[30]),_.useEffect(N,R);let O;e[31]!==o?(O=()=>{x(-1),o==null||o(-1,!1),b(!1)},e[31]=o,e[32]=O):O=e[32];let D;e[33]!==o||e[34]!==l?(D=[l,o],e[33]=o,e[34]=l,e[35]=D):D=e[35],_.useEffect(O,D);let F,V,z;e[36]===Symbol.for("react.memo_cache_sentinel")?(F={opacity:0},V={opacity:1},z={opacity:0},e[36]=F,e[37]=V,e[38]=z):(F=e[36],V=e[37],z=e[38]);const $=g?"flex":"hidden";let Y;e[39]!==$?(Y=W("bg-token-bg-primary divide-token-border-light w-full flex-col divide-y p-2.5 max-sm:px-0",$),e[39]=$,e[40]=Y):Y=e[40];let Z;e[41]!==y||e[42]!==n||e[43]!==p||e[44]!==o||e[45]!==h||e[46]!==l?(Z=l.map((q,X)=>{var oe;return r.jsx(Xe.li,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:X*.03},exit:{opacity:0,translateY:4},className:"w-full",children:r.jsxs("button",{className:W("flex w-full cursor-pointer items-center justify-start rounded-lg px-2.5 py-3 text-start whitespace-pre-wrap",h===X?"bg-token-main-surface-secondary":"bg-token-main-surface-primary"),onClick:se=>{se.preventDefault(),p(se,q,l,X),Qb()&&Et(n).dom.blur()},onMouseDown:F4e,onMouseEnter:()=>{y&&(x(X),o==null||o(X,!1,q))},onMouseLeave:()=>{x(-1),o==null||o(-1,!1,q)},children:[q.source==="CURATED"&&(q.iconThumbnailUrl||q.coverThumbnailImageUrl)?r.jsx("img",{className:W("me-2 flex-none rounded-md object-cover",q.coverThumbnailImageUrl?"h-7 w-7":"h-8 w-8"),src:q.iconThumbnailUrl||q.coverThumbnailImageUrl,alt:""}):q.emoji?r.jsx("span",{"aria-hidden":"true",className:W("bg-primary text-token-text-primary text-md me-4 flex flex-none items-center justify-center"),children:q.emoji}):q.icon?r.jsx("span",{className:"text-token-text-secondary icon me-2 flex-none",children:q.icon}):null,r.jsx("span",{className:W(q.category==="personalized"?"text-md":"text-sm","whitespace-pre-wrap"),children:q.autocompletionChunks&&q.autocompletionChunks.length>0?r.jsx(r.Fragment,{children:q.autocompletionChunks.map((se,de)=>{var ie;return r.jsx("span",{className:W((ie=se.className)!=null?ie:se.isMatched?"text-token-text-tertiary":q.category==="personalized"?"text-token-text-secondary":"text-token-text-primary"),children:se.text},de)})}):q.source==="CURATED"?r.jsx("span",{className:W("text-pretty",q.type===ke.Starter||q.type===ke.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:q.title}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:W("text-pretty",q.type===ke.Starter||q.type===ke.Trending?"text-token-text-secondary":"text-token-text-tertiary"),children:q.title}),r.jsx("span",{className:"text-token-text-primary text-pretty",children:q.body})]})}),q.trailing?q.trailing:null]})},(oe=q.id)!=null?oe:X)}),e[41]=y,e[42]=n,e[43]=p,e[44]=o,e[45]=h,e[46]=l,e[47]=Z):Z=e[47];let Q;return e[48]!==Y||e[49]!==Z?(Q=r.jsx(Xe.ul,{initial:F,animate:V,exit:z,className:Y,children:Z}),e[48]=Y,e[49]=Z,e[50]=Q):Q=e[50],Q}function F4e(t){t.preventDefault()}function B4e(t){return t.type===ke.Autocomplete||t.type===ke.Trending}function MF(t,e){t=t.toLocaleLowerCase();const n=e;e=e.toLocaleLowerCase();const s=[];let o=0;for(let l=0;l<e.length&&(o<t.length&&t[o]===e[l]&&(s.push(l),o++),o!==t.length);l++);const a=[];let i=0;if(s.forEach(l=>{if(l>i){const c=n.slice(i,l);c&&a.push({text:c,isMatched:!1})}a.push({text:n[l],isMatched:!0}),i=l+1}),i<e.length){const l=n.slice(i);l&&a.push({text:l,isMatched:!1})}return U4e(a)}function U4e(t){if(t.length===0)return t;const e=[t[0]];for(let s=1;s<t.length;s++){const o=e[e.length-1],a=t[s];o.isMatched===a.isMatched?o.text+=a.text:e.push(a)}const n=e.filter(s=>s.isMatched).reduce((s,o)=>s+o.text.trim().length,0);return e.length<=4&&n>=2?e:[{text:e.map(s=>s.text).join(""),isMatched:!1}]}function TF(t=8,e=null){return io({queryKey:["promptStarters",t,e],queryFn:async()=>{const n=await pe.safeGet("/prompt_library/",{parameters:{query:{limit:t,use_v2:!0,model_slug:e}},authOption:qt.SendIfAvailable});return Oe.addFirstTiming("load.promptStarters"),n}})}function Mv(t){var e;return(e=yc(t)?t.promptStarters:t.gizmo.display.prompt_starters)==null?void 0:e.map(n=>({type:ke.Starter,title:"",body:n,prompt:n}))}function EF(){const t=G(),e=pn(),n=Qh(vI),s=pt(t),o=ff(t,!1);return!s&&n<o.get("new-user-message-count",20)||s&&e&&Date.now()/1e3-e.created<o.get("new-user-age-seconds",336*60*60)}const AF=()=>{const t=G(),e=ff(t,!0),n=EF();return()=>n&&e.get("web-enable-for-new-users",!1)||!n&&e.get("web_enable_for_existing_users",!1)};function IF({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const n=AF(),s=G(),o=ut(s),a=Ue(e,l=>l==null?void 0:l.mode),i=A4e(a);return t&&!i&&!(o!=null&&o.isEnterprisey())&&n()}function V4e({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e}){const n=G(),s=ff(n,!1),o=EF(),[a,i]=ja("homepage_prompt_style","",m=>typeof m=="string"),l=s.get("homepage_prompt_style","chips"),c=s.get("persist_new_user_experience",!1);let d=l;return c&&a&&(d=a),_.useEffect(()=>{a&&!c?i(""):!a&&o&&c&&i(l)},[a,i,s,o,l,c]),IF({shouldBeEnabledForDefaultAssistant:t,clientThreadId:e})?d:"chips"}const KJe=({clientThreadId:t,limit:e,shouldBeEnabledForDefaultAssistant:n,modelSlug:s})=>{var M,T;const o=wr(),{autocompletions$:a}=j3(o),i=Ia(),l=J(),{clearAllSystemHintModeTriggers:c,setThreadSystemHintMode:d}=na(),u=Ue(t,E=>E==null?void 0:E.mode),m=Pa((u==null?void 0:u.kind)===Tt.GizmoInteraction?u.gizmo_id:void 0).data,{gizmoEditorData:f,mode:p}=Kb(),g=IF({shouldBeEnabledForDefaultAssistant:n,clientThreadId:t}),{data:h,isSuccess:x}=lt(B(w({},TF(e,s)),{enabled:g}));if(i==null)return{promptStarters:[],isLoading:!0,isSuccess:!1};if(p==="test"&&f)return{promptStarters:(M=Mv(f))!=null?M:[],isLoading:!1,isSuccess:!0};if(m!=null)return{promptStarters:Mv(m),isLoading:!1,isSuccess:!0};if(!g)return{promptStarters:[],isLoading:!1,isSuccess:!0};const y=(T=h==null?void 0:h.items.map(E=>({type:ke.Starter,id:E.id,title:E.title,body:E.description,prompt:E.prompt,category:E.category,oneliner:E.oneliner,theme:E.theme,requires_file_upload:E.requires_file_upload})))!=null?T:[],b=(E,A,N,R)=>{const O=Et(o);if(A.type===ke.Starter&&A.category==="dalle"){requestAnimationFrame(()=>{c(),d(Ie.PictureV2,!0,{}),Eo(O)}),a.set(kF(l));return}const D=A.title;a.set([]),O.focus(),bo(O,D),requestAnimationFrame(()=>{const F=y.filter(V=>V.theme===A.theme).map(V=>{const z=gi(V.oneliner),$=z.startsWith(V.title);return B(w({},V),{title:$?"".concat(V.title," "):"",body:$?V.body:z,autocompletionChunks:MF(D,z),type:ke.Autocomplete})});a.set(F),c1(A,R,t)})},v=y==null?void 0:y.reduce((E,A)=>(A.theme&&!E[A.theme]&&(E[A.theme]=A),E),{}),S=[];if(v)for(const E in v)E!=="For you"&&S.push(v[E]);const C=S.length>0,k=n&&x&&C;return n&&(_a.markStart("StarterPromptChips",_a.NS_COMPOSER),k&&_a.markRendered("StarterPromptChips",_a.NS_COMPOSER)),{onSelectStarterPrompt:b,shouldShowStarterPrompts:k,promptStarters:S}};function ff(t,e=!1){const n=qo(t),s=n.getLayer("4031588851",{disableExposureLog:!e}),o=n.getLayer("3533083032",{disableExposureLog:!e});return pt(t)?s:o}const yt=be({personal_trainer_title:{id:"curated-starter-prompts.personal_trainer.title-2",defaultMessage:"Be my personal trainer"},personal_trainer_body:{id:"curated-starter-prompts.personal_trainer.body-3",defaultMessage:"Create a strength training plan"},personal_trainer_prompt:{id:"curated-starter-prompts.personal_trainer.prompt",defaultMessage:"Create a strength training plan with daily check-ins and guidance on exercises, sets, and progression."},upgrade_skin_care_title:{id:"curated-starter-prompts.upgrade_skin_care.title",defaultMessage:"Upgrade my skin care"},upgrade_skin_care_body:{id:"curated-starter-prompts.upgrade_skin_care.body",defaultMessage:"Use my selfie for skincare tips"},upgrade_skin_care_prompt:{id:"curated-starter-prompts.upgrade_skin_care.prompt",defaultMessage:"I want good advice with skin care and makeup. Based on a selfie, get me advice for skin and hair, along with any products. Ask for a selfie if not provided."},is_this_scam_title:{id:"curated-starter-prompts.is_this_scam.title",defaultMessage:"Is this text a scam?"},is_this_scam_body:{id:"curated-starter-prompts.is_this_scam.body",defaultMessage:"Tell me if this text is a scam"},is_this_scam_prompt:{id:"curated-starter-prompts.is_this_scam.prompt",defaultMessage:"I just got this weird text message. Here's a screenshot. Do you think its a scam or some kind of phishing attempt?"},motivate_me_title:{id:"curated-starter-prompts.motivate_me.title",defaultMessage:"Motivate me"},motivate_me_body:{id:"curated-starter-prompts.motivate_me.body-2",defaultMessage:"Help with procrastination"},motivate_me_prompt:{id:"curated-starter-prompts.motivate_me.prompt",defaultMessage:"I'm struggling to get started. Motivate me. Break things down into the very small tasks to make it easy. Ask me questions for context."},meal_prep_title:{id:"curated-starter-prompts.meal_prep.title",defaultMessage:"Simplify meal prep"},meal_prep_body:{id:"curated-starter-prompts.meal_prep.body-2",defaultMessage:"Create a protein-packed meal plan"},meal_prep_prompt:{id:"curated-starter-prompts.meal_prep.prompt",defaultMessage:"Create a plan for meal prep with a grocery list. I want more protein and less carbs. I have a limited budget. Keep it simple."},morning_routine_title:{id:"curated-starter-prompts.morning_routine.title",defaultMessage:"Build my morning routine"},morning_routine_body:{id:"curated-starter-prompts.morning_routine.body-2",defaultMessage:"Build a morning routine for focus"},morning_routine_prompt:{id:"curated-starter-prompts.morning_routine.prompt",defaultMessage:"Help me build a better morning routine. I want to start my days with more focus. Be my coach and keep me honest."},budget_title:{id:"curated-starter-prompts.budget.title",defaultMessage:"Make my budget"},budget_body:{id:"curated-starter-prompts.budget.body",defaultMessage:"Make my weekly budget"},budget_prompt:{id:"curated-starter-prompts.budget.prompt",defaultMessage:"I want to get control of my bills. Here's what is due, my monthly paycheck, other expenses. I'd like help getting on top of this and then trying to save some money."},color_theory_title:{id:"curated-starter-prompts.color_theory.title",defaultMessage:"Do my color theory analysis"},color_theory_body:{id:"curated-starter-prompts.color_theory.body",defaultMessage:"Do my color theory analysis"},color_theory_prompt:{id:"curated-starter-prompts.color_theory.prompt",defaultMessage:"Take a look at this picture of me. Using color theory, tell me my season and suggest my best colors for clothing and makeup. Ask for a picture if not provided."},fix_procrastination_title:{id:"curated-starter-prompts.fix_procrastination.title-2",defaultMessage:"Help with procrastination"},fix_procrastination_body:{id:"curated-starter-prompts.fix_procrastination.body",defaultMessage:"Help me start a project I put off"},fix_procrastination_prompt:{id:"curated-starter-prompts.fix_procrastination.prompt",defaultMessage:"I'm struggling to get started. Motivate me. Break things down into the very small tasks to make it easy. Ask me questions for context."},decode_this_text_message_title:{id:"curated-starter-prompts.decode_this_text_message.title",defaultMessage:"Decode this text message"},decode_this_text_message_body:{id:"curated-starter-prompts.decode_this_text_message.body",defaultMessage:"Decode this text message"},decode_this_text_message_prompt:{id:"curated-starter-prompts.decode_this_text_message.prompt",defaultMessage:"Decode this text and explain possible intentions behind it. I want to understand what the person might really mean."},help_me_get_recognized_title:{id:"curated-starter-prompts.help_me_get_recognized.title",defaultMessage:"Help me get recognized"},help_me_get_recognized_body:{id:"curated-starter-prompts.help_me_get_recognized.body",defaultMessage:"Help me get recognition for my work"},help_me_get_recognized_prompt:{id:"curated-starter-prompts.help_me_get_recognized.prompt",defaultMessage:"I'm not getting recognized for everything I'm doing. Be my personal coach. Ask me questions and help me advocate for myself."},anime_style_portrait_title:{id:"curated-starter-prompts.anime_style_portrait.title",defaultMessage:"Anime-style portrait"},anime_style_portrait_body:{id:"curated-starter-prompts.anime_style_portrait.body",defaultMessage:"Make an anime-style portrait of me"},anime_style_portrait_prompt:{id:"curated-starter-prompts.anime_style_portrait.prompt-2",defaultMessage:"Recreate this photo in a playful anime style. Ask for a photo if not provided."},action_figure_portrait_title:{id:"curated-starter-prompts.action_figure_portrait.title",defaultMessage:"Action figure portrait"},action_figure_portrait_body:{id:"curated-starter-prompts.action_figure_portrait.body",defaultMessage:"Turn me into an action figure"},action_figure_portrait_prompt:{id:"curated-starter-prompts.action_figure_portrait.prompt",defaultMessage:"Use my photo to create a 3D superhero action figure of me. Label the box and include my pet as a sidekick. Ask for my name and picture if not provided."},b_w_raindrop_portrait_title:{id:"curated-starter-prompts.b_w_raindrop_portrait.title-2",defaultMessage:"Cinematic raindrop portrait"},b_w_raindrop_portrait_body:{id:"curated-starter-prompts.b_w_raindrop_portrait.body-2",defaultMessage:"Make a cinematic raindrop portrait"},b_w_raindrop_portrait_prompt:{id:"curated-starter-prompts.b_w_raindrop_portrait.prompt-2",defaultMessage:"Make this photo a black and white portrait of the subject emerging from water. Make it feel cinematic. Ask for a photo if not provided."},b_w_studio_portrait_title:{id:"curated-starter-prompts.b_w_studio_portrait.title",defaultMessage:"Studio Portrait in B&W"},b_w_studio_portrait_body:{id:"curated-starter-prompts.b_w_studio_portrait.body",defaultMessage:"Make a studio portrait in B&W"},b_w_studio_portrait_prompt:{id:"curated-starter-prompts.b_w_studio_portrait.prompt",defaultMessage:"Fashion photography portrait, black and white. high fashion, editorial lighting, cinematic."},create_a_puppet_title:{id:"curated-starter-prompts.create_a_puppet.title",defaultMessage:"Create a puppet"},create_a_puppet_body:{id:"curated-starter-prompts.create_a_puppet.body",defaultMessage:"Create a puppet"},create_a_puppet_prompt:{id:"curated-starter-prompts.create_a_puppet.prompt",defaultMessage:"Make a puppet from this photo. Ask for a photo if not provided."},document_summary_title:{id:"curated-starter-prompts.document_summary.title",defaultMessage:"Read this document"},document_summary_body:{id:"curated-starter-prompts.document_summary.body",defaultMessage:"Read this document"},document_summary_prompt:{id:"curated-starter-prompts.document_summary.prompt",defaultMessage:"Give me the key points from this document. Start simple, and I'll ask follow-up questions. Ask for a document if not provided."},recommend_a_movie_title:{id:"curated-starter-prompts.recommend_a_movie.title",defaultMessage:"Recommend a movie"},recommend_a_movie_body:{id:"curated-starter-prompts.recommend_a_movie.body",defaultMessage:"Recommend a movie"},recommend_a_movie_prompt:{id:"curated-starter-prompts.recommend_a_movie.prompt",defaultMessage:"What are well-reviewed movies I should watch tonight? I love action and comedies."},create_a_quiz_title:{id:"curated-starter-prompts.create_a_quiz.title",defaultMessage:"Create a quiz"},create_a_quiz_body:{id:"curated-starter-prompts.create_a_quiz.body",defaultMessage:"Create a quiz"},create_a_quiz_prompt:{id:"curated-starter-prompts.create_a_quiz.prompt",defaultMessage:"I have an exam this week. Create a quiz based on my notes and ask questions one at a time."},language_coach_spanish_title:{id:"curated-starter-prompts.language_coach_spanish.title",defaultMessage:"Be my language coach"},language_coach_spanish_body:{id:"curated-starter-prompts.language_coach_spanish.body",defaultMessage:"Help me practice Spanish vocabulary and gently correct my mistakes."},language_coach_spanish_prompt:{id:"curated-starter-prompts.language_coach_spanish.prompt",defaultMessage:"I'm trying to master some Spanish vocabulary before traveling to Mexico. Can you practice with me and gently correct my mistakes when I get something wrong?"},friendly_text_roommate_title:{id:"curated-starter-prompts.friendly_text_roommate.title",defaultMessage:"Make this text sound friendlier"},friendly_text_roommate_body:{id:"curated-starter-prompts.friendly_text_roommate.body",defaultMessage:"Make this text to my roommate kinder, please"},friendly_text_roommate_prompt:{id:"curated-starter-prompts.friendly_text_roommate.prompt",defaultMessage:"My roommate plays heavy metal music really loud late at night. Can you draft a friendly text that asks him to turn it down after 10 PM?"},packing_list_camping_title:{id:"curated-starter-prompts.packing_list_camping.title",defaultMessage:"Make a packing list"},packing_list_camping_body:{id:"curated-starter-prompts.packing_list_camping.body",defaultMessage:"Create a minimal packing list for a camping trip"},packing_list_camping_prompt:{id:"curated-starter-prompts.packing_list_camping.prompt",defaultMessage:"I'm planning on going camping for the first time with friends this weekend and don't have much room to bring stuff with me. Can you create a packing list with just the bare essentials?"},gift_under_20_title:{id:"curated-starter-prompts.gift_under_20.title",defaultMessage:"Find a great gift under $20"},gift_under_20_body:{id:"curated-starter-prompts.gift_under_20.body",defaultMessage:"Give me gift ideas under $20 for a friend"},gift_under_20_prompt:{id:"curated-starter-prompts.gift_under_20.prompt",defaultMessage:"My friend loves kpop music and they have a birthday coming up. Can you recommend a gift for them that's under $20?"},plan_game_night_mystery_title:{id:"curated-starter-prompts.plan_game_night_mystery.title",defaultMessage:"Plan a game night"},plan_game_night_mystery_body:{id:"curated-starter-prompts.plan_game_night_mystery.body",defaultMessage:"Plan a themed game night with six friends"},plan_game_night_mystery_prompt:{id:"curated-starter-prompts.plan_game_night_mystery.prompt",defaultMessage:"I want to host a murder mystery party with my friends. Can you help plan the mystery and suggest fun food and drinks to serve?"},decluttering_plan_4_weeks_title:{id:"curated-starter-prompts.decluttering_plan_4_weeks.title",defaultMessage:"Make a decluttering plan"},decluttering_plan_4_weeks_body:{id:"curated-starter-prompts.decluttering_plan_4_weeks.body",defaultMessage:"Create a 4 week, 10 mins-per-day decluttering plan"},decluttering_plan_4_weeks_prompt:{id:"curated-starter-prompts.decluttering_plan_4_weeks.prompt",defaultMessage:"I want to have more kitchen countertop space. Can you help me create a decluttering plan so I can make more space? I only want to spend 10 minutes per day on it over the next 4 weeks."},fridge_recipes_three_title:{id:"curated-starter-prompts.fridge_recipes_three.title",defaultMessage:"Recipes for what's in my fridge"},fridge_recipes_three_body:{id:"curated-starter-prompts.fridge_recipes_three.body",defaultMessage:"Give me 3 quick recipes with chicken, lettuce, and salsa"},fridge_recipes_three_prompt:{id:"curated-starter-prompts.fridge_recipes_three.prompt",defaultMessage:"I'm stumped on what to make for dinner. Can you create three easy recipes for me based on the leftover chicken, lettuce, and cheese I have in my fridge?"},desk_stretch_routine_title:{id:"curated-starter-prompts.desk_stretch_routine.title",defaultMessage:"Make a daily desk stretch routine"},desk_stretch_routine_body:{id:"curated-starter-prompts.desk_stretch_routine.body",defaultMessage:"Draft a desk-friendly, 5-minute stretch routine"},desk_stretch_routine_prompt:{id:"curated-starter-prompts.desk_stretch_routine.prompt",defaultMessage:"I have a lot of back pain at my desk job. Can you suggest some 5-minute stretches that I can do discreetly at the office?"},prep_for_appointment_title:{id:"curated-starter-prompts.prep_for_appointment.title",defaultMessage:"Prep for an appointment"},prep_for_appointment_body:{id:"curated-starter-prompts.prep_for_appointment.body",defaultMessage:"Write questions + checklist for my PT visit"},prep_for_appointment_prompt:{id:"curated-starter-prompts.prep_for_appointment.prompt",defaultMessage:"I have a mild cough and a runny nose. Help me prep for my doctor's visit with a checklist."},decode_bill_title:{id:"curated-starter-prompts.decode_bill.title",defaultMessage:"Decode this bill"},decode_bill_body:{id:"curated-starter-prompts.decode_bill.body",defaultMessage:"Explain this charge and what I owe, simply."},decode_bill_prompt:{id:"curated-starter-prompts.decode_bill.prompt",defaultMessage:"I'll upload my bill. Help me understand why I was charged this amount and how much I owe in plain language."},decision_pros_cons_title:{id:"curated-starter-prompts.decision_pros_cons.title",defaultMessage:"Help me make a decision"},decision_pros_cons_body:{id:"curated-starter-prompts.decision_pros_cons.body",defaultMessage:"Compare A vs B: give me pros, cons, and a recommendation"},decision_pros_cons_prompt:{id:"curated-starter-prompts.decision_pros_cons.prompt",defaultMessage:"I'm trying to decide what to buy. Can you give me pros, cons and a recommendation?"},organize_notes_title:{id:"curated-starter-prompts.organize_notes.title",defaultMessage:"Organize my notes"},organize_notes_body:{id:"curated-starter-prompts.organize_notes.body",defaultMessage:"Turn these notes into an outline + actions."},organize_notes_prompt:{id:"curated-starter-prompts.organize_notes.prompt",defaultMessage:"Summarize this document and give me a list of key points and action items"},excel_shortcuts_cheatsheet_title:{id:"curated-starter-prompts.excel_shortcuts_cheatsheet.title",defaultMessage:"Write an Excel cheat sheet"},excel_shortcuts_cheatsheet_body:{id:"curated-starter-prompts.excel_shortcuts_cheatsheet.body",defaultMessage:"Write a one-page Excel shortcuts cheat sheet."},excel_shortcuts_cheatsheet_prompt:{id:"curated-starter-prompts.excel_shortcuts_cheatsheet.prompt",defaultMessage:"I'm trying to get better at making spreadsheets. Can you make me a one-page cheat sheet to help me be more productive?"},presentation_outline_title:{id:"curated-starter-prompts.presentation_outline.title",defaultMessage:"Start a presentation outline"},presentation_outline_body:{id:"curated-starter-prompts.presentation_outline.body",defaultMessage:"Outline a 6-slide deck with key points"},presentation_outline_prompt:{id:"curated-starter-prompts.presentation_outline.prompt",defaultMessage:"I'm putting together a presentation on the digestive system for school. Outline a 6-slide deck with key points to help me get started."},social_media_captions_title:{id:"curated-starter-prompts.social_media_captions.title",defaultMessage:"Draft social media captions"},social_media_captions_body:{id:"curated-starter-prompts.social_media_captions.body",defaultMessage:"Write 5 short captions for a summer trip Instagram post"},social_media_captions_prompt:{id:"curated-starter-prompts.social_media_captions.prompt",defaultMessage:"Here's an Instagram campaign I'm running. Write short captions for each of the images."},true_crime_watch_list_title:{id:"curated-starter-prompts.true_crime_watch_list.title",defaultMessage:"Make a true crime watch list"},true_crime_watch_list_body:{id:"curated-starter-prompts.true_crime_watch_list.body",defaultMessage:"Recommend true crime books, videos, and podcasts"},true_crime_watch_list_prompt:{id:"curated-starter-prompts.true_crime_watch_list.prompt",defaultMessage:"Recommend books, videos, and podcasts about true crime that I might like."},help_me_translate_title:{id:"curated-starter-prompts.help_me_translate.title",defaultMessage:"Help me translate"},help_me_translate_body:{id:"curated-starter-prompts.help_me_translate.body",defaultMessage:"Help me translate"},help_me_translate_prompt:{id:"curated-starter-prompts.help_me_translate.prompt",defaultMessage:"Help me translate between English and another language. Explain tone and nuance where helpful."},professional_email_boss_title:{id:"curated-starter-prompts.professional_email_boss.title",defaultMessage:"Write a professional email"},professional_email_boss_body:{id:"curated-starter-prompts.professional_email_boss.body",defaultMessage:"Draft a clear email to my boss about a project that I want to kick off."},professional_email_boss_prompt:{id:"curated-starter-prompts.professional_email_boss.prompt",defaultMessage:"Draft a clear email to my boss about a project that I want to kick off."},summarize_financial_news_title:{id:"curated-starter-prompts.summarize_financial_news.title",defaultMessage:"Summarize this"},summarize_financial_news_body:{id:"curated-starter-prompts.summarize_financial_news.body",defaultMessage:"Summarize the latest financial news with three takeaways that are relevant for me."},summarize_financial_news_prompt:{id:"curated-starter-prompts.summarize_financial_news.prompt",defaultMessage:"Summarize the latest financial news with three takeaways that are relevant for me."},breathing_meditation_title:{id:"curated-starter-prompts.breathing_meditation.title",defaultMessage:"Lead a breathing meditation"},breathing_meditation_body:{id:"curated-starter-prompts.breathing_meditation.body",defaultMessage:"Lead a 5-minute breathing meditation"},breathing_meditation_prompt:{id:"curated-starter-prompts.breathing_meditation.prompt",defaultMessage:"Lead a 5-minute breathing meditation."},voice_mock_interview_title:{id:"curated-starter-prompts.voice_mock_interview.title",defaultMessage:"Mock interview coach"},voice_mock_interview_body:{id:"curated-starter-prompts.voice_mock_interview.body",defaultMessage:"Do a voice mock interview for [role] and give feedback"},voice_mock_interview_prompt:{id:"curated-starter-prompts.voice_mock_interview.prompt",defaultMessage:"Do a voice mock interview for [role] and give feedback."},toast_speech_coach_title:{id:"curated-starter-prompts.toast_speech_coach.title",defaultMessage:"Toast coach"},toast_speech_coach_body:{id:"curated-starter-prompts.toast_speech_coach.body",defaultMessage:"Listen to my toast; coach pacing, pauses, and tone"},toast_speech_coach_prompt:{id:"curated-starter-prompts.toast_speech_coach.prompt",defaultMessage:"Listen to my toast; coach my pacing, pauses, and tone."},logo_ideas_simple_title:{id:"curated-starter-prompts.logo_ideas_simple.title",defaultMessage:"Create simple logo ideas"},logo_ideas_simple_body:{id:"curated-starter-prompts.logo_ideas_simple.body",defaultMessage:"Create simple logo ideas for my business, they should be clean and modern"},logo_ideas_simple_prompt:{id:"curated-starter-prompts.logo_ideas_simple.prompt",defaultMessage:"Create simple logo ideas for my business, they should be clean and modern"},translation_generic_title:{id:"curated-starter-prompts.translation_generic.title",defaultMessage:"Translation"},translation_generic_body:{id:"curated-starter-prompts.translation_generic.body",defaultMessage:"Translate text between languages"},translation_generic_prompt:{id:"curated-starter-prompts.translation_generic.prompt",defaultMessage:"Translate the following text to [language]. Keep it natural and explain any tricky phrases."},professional_profile_picture_title:{id:"curated-starter-prompts.professional_profile_picture.title",defaultMessage:"Make a professional profile picture"},professional_profile_picture_body:{id:"curated-starter-prompts.professional_profile_picture.body",defaultMessage:"Create a professional headshot of me using this photo"},professional_profile_picture_prompt:{id:"curated-starter-prompts.professional_profile_picture.prompt",defaultMessage:"Create a professional headshot of me using this photo. I'll upload the photo."},visualize_concept_benzene_title:{id:"curated-starter-prompts.visualize_concept_benzene.title",defaultMessage:"Visualize a concept"},visualize_concept_benzene_body:{id:"curated-starter-prompts.visualize_concept_benzene.body",defaultMessage:"Create an image to help me visualize the 3D molecular structure for benzene."},visualize_concept_benzene_prompt:{id:"curated-starter-prompts.visualize_concept_benzene.prompt",defaultMessage:"Please create an image to help me visualize the 3D molecular structure for benzene."},redesign_this_room_title:{id:"curated-starter-prompts.redesign_this_room.title",defaultMessage:"Redesign this room"},redesign_this_room_body:{id:"curated-starter-prompts.redesign_this_room.body",defaultMessage:"Make this room a mid-century modern style with new paint and furniture."},redesign_this_room_prompt:{id:"curated-starter-prompts.redesign_this_room.prompt",defaultMessage:"Redesign this room with new paint and furniture. I'll upload a photo of the room."},make_me_an_action_figure_title:{id:"curated-starter-prompts.make_me_an_action_figure.title",defaultMessage:"Make me an action figure"},make_me_an_action_figure_body:{id:"curated-starter-prompts.make_me_an_action_figure.body",defaultMessage:"Draw a picture of me as a real-life action figure. Include my interests, like gardening and baking, in the packaging."},make_me_an_action_figure_prompt:{id:"curated-starter-prompts.make_me_an_action_figure.prompt",defaultMessage:"Draw a picture of me as a real-life action figure. Include my interests, like gardening and baking, in the packaging. I'll upload my photo."},promo_code_title:{id:"curated-starter-prompts.promo_code.title",defaultMessage:"Find shopping promo codes"},promo_code_body:{id:"curated-starter-prompts.promo_code.body",defaultMessage:"Find shopping promo codes"},promo_code_prompt:{id:"curated-starter-prompts.promo_code.prompt",defaultMessage:"Find promo codes or coupons for my favorite sites. Confirm they're active."}});function jF(){const t=J();return[{type:ke.Starter,id:"morning_routine",title:t.formatMessage(yt.morning_routine_title),body:t.formatMessage(yt.morning_routine_body),prompt:t.formatMessage(yt.morning_routine_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-sun-xl@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/64/wc-icon-sun-sm@2x.png",accentColor:"#F9C00D",isFeatured:!0,source:"CURATED"},{type:ke.Starter,id:"be_my_personal_trainer",title:t.formatMessage(yt.personal_trainer_title),body:t.formatMessage(yt.personal_trainer_body),prompt:t.formatMessage(yt.personal_trainer_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-fitness-xl@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/64/wc-icon-fitness-sm@2x.png",accentColor:"#000000",isFeatured:!0,source:"CURATED"},{type:ke.Starter,id:"fix_procrastination",title:t.formatMessage(yt.fix_procrastination_title),body:t.formatMessage(yt.fix_procrastination_body),prompt:t.formatMessage(yt.fix_procrastination_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-bulb-xl@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/64/wc-icon-bulb-sm@2x.png",accentColor:"#F9C00D",isFeatured:!0,source:"CURATED"},{type:ke.Starter,id:"upgrade_skin_care",title:t.formatMessage(yt.upgrade_skin_care_title),body:t.formatMessage(yt.upgrade_skin_care_body),prompt:t.formatMessage(yt.upgrade_skin_care_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-skincare-xl@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/64/wc-icon-skincare-sm@2x.png",accentColor:"#F3A38C",requires_file_upload:!0,isFeatured:!0,source:"CURATED"},{type:ke.Starter,id:"meal_prep",title:t.formatMessage(yt.meal_prep_title),body:t.formatMessage(yt.meal_prep_body),prompt:t.formatMessage(yt.meal_prep_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-food@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-food-40@2x.png",accentColor:"#E66E04",isFeatured:!0,source:"CURATED"},{type:ke.Starter,id:"budget",title:t.formatMessage(yt.budget_title),body:t.formatMessage(yt.budget_body),prompt:t.formatMessage(yt.budget_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-preadsheet@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-preadsheet-40@2x.png",accentColor:"#F8907F",source:"CURATED"},{type:ke.Starter,id:"color_theory",title:t.formatMessage(yt.color_theory_title),body:t.formatMessage(yt.color_theory_body),prompt:t.formatMessage(yt.color_theory_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-color-xl@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/64/wc-icon-color-sm@2x.png",accentColor:"#EABD7E",requires_file_upload:!0,source:"CURATED"},{type:ke.Starter,id:"help_me_get_recognized",title:t.formatMessage(yt.help_me_get_recognized_title),body:t.formatMessage(yt.help_me_get_recognized_body),prompt:t.formatMessage(yt.help_me_get_recognized_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-award@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-award-40@2x.png",source:"CURATED"},{type:ke.Starter,id:"anime_style_portrait",title:t.formatMessage(yt.anime_style_portrait_title),body:t.formatMessage(yt.anime_style_portrait_body),prompt:t.formatMessage(yt.anime_style_portrait_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-anime@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-anime-40@2x.png",coverImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/anime@2x.png",coverThumbnailImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/anime.png",requires_file_upload:!0,systemHints:[Ie.PictureV2],source:"CURATED"},{type:ke.Starter,id:"action_figure_portrait",title:t.formatMessage(yt.action_figure_portrait_title),body:t.formatMessage(yt.action_figure_portrait_body),prompt:t.formatMessage(yt.action_figure_portrait_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-actionfigure@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-actionfigure-40@2x.png",coverImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/action-figure@2x.png",coverThumbnailImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/action-figure.png",requires_file_upload:!0,systemHints:[Ie.PictureV2],source:"CURATED"},{type:ke.Starter,id:"b_w_raindrop_portrait",title:t.formatMessage(yt.b_w_raindrop_portrait_title),body:t.formatMessage(yt.b_w_raindrop_portrait_body),prompt:t.formatMessage(yt.b_w_raindrop_portrait_prompt),coverImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/raindrop-bnw@2x.png",coverThumbnailImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/raindrop-bnw.png",requires_file_upload:!0,source:"CURATED"},{type:ke.Starter,id:"b_w_studio_portrait",title:t.formatMessage(yt.b_w_studio_portrait_title),body:t.formatMessage(yt.b_w_studio_portrait_body),prompt:t.formatMessage(yt.b_w_studio_portrait_prompt),coverImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/studio-bnw@2x.png",coverThumbnailImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/studio-bnw.png",requires_file_upload:!0,source:"CURATED"},{type:ke.Starter,id:"create_a_puppet",title:t.formatMessage(yt.create_a_puppet_title),body:t.formatMessage(yt.create_a_puppet_body),prompt:t.formatMessage(yt.create_a_puppet_prompt),coverImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/create-puppet@2x.png",coverThumbnailImageUrl:"https://persistent.oaistatic.com/chatgpt/trending/image-gen/create-puppet.png",requires_file_upload:!0,systemHints:[Ie.PictureV2],source:"CURATED"},{type:ke.Starter,id:"document_summary",title:t.formatMessage(yt.document_summary_title),body:t.formatMessage(yt.document_summary_body),prompt:t.formatMessage(yt.document_summary_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-paper-pen@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-paper-pen-40@2x.png",requires_file_upload:!0,source:"CURATED"},{type:ke.Starter,id:"recommend_a_movie",title:t.formatMessage(yt.recommend_a_movie_title),body:t.formatMessage(yt.recommend_a_movie_body),prompt:t.formatMessage(yt.recommend_a_movie_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-movies@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-movies-40@2x.png",source:"CURATED"},{type:ke.Starter,id:"create_a_quiz",title:t.formatMessage(yt.create_a_quiz_title),body:t.formatMessage(yt.create_a_quiz_body),prompt:t.formatMessage(yt.create_a_quiz_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-pencil-paper@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-pencil-paper-40@2x.png",requires_file_upload:!0,source:"CURATED"},{type:ke.Starter,id:"promo_code",title:t.formatMessage(yt.promo_code_title),body:t.formatMessage(yt.promo_code_body),prompt:t.formatMessage(yt.promo_code_prompt),iconImageUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/228/wc-icon-pencil-paper@2x.png",iconThumbnailUrl:"https://persistent.oaistatic.com/chatgpt/icons/wc-icons/40/wc-icon-pencil-paper-40@2x.png",source:"CURATED"}]}function G4e(t,e=[],n=4,s=2){if(!t||t.length===0)return[];const o=p=>p.category==="dalle"||!!p.coverImageUrl,a=(p,g)=>p.id!=null&&g.id!=null?p.id===g.id:p===g,i=(p,g)=>e.some(h=>g&&!g(h)?!1:a(h,p)),l=t.filter(p=>p.category==="dalle"&&!i(p,o));let c=l.length>0?l[Math.floor(Math.random()*l.length)]:void 0;if(!c){const p=t.filter(g=>!!g.coverImageUrl).filter(g=>!i(g,o));c=p.length>0?p[Math.floor(Math.random()*p.length)]:void 0}const u=[...t.filter(p=>!(p===c||o(p)||i(p,g=>!o(g))))].sort(()=>Math.random()-.5);if(c){const p=Math.max(0,n-1),g=[],h=new Set;for(const b of u){const v=b.iconImageUrl;if(!h.has(v)&&(h.add(v),g.push(b),g.length===p))break}if(g.length<p){for(const b of u)if(!g.includes(b)&&(g.push(b),g.length===p))break}const x=[...g],y=Math.min(Math.max(s,0),Math.max(n-1,0));return x.splice(y,0,c),x.slice(0,n)}const m=[],f=new Set;for(const p of u){const g=p.iconImageUrl;if(!f.has(g)&&(f.add(g),m.push(p),m.length===n))break}if(m.length<n){for(const p of u)if(!m.includes(p)&&(m.push(p),m.length===n))break}return m.slice(0,n)}const vs=be({add_picture_do_rest:{id:"india-viral-image-gen-prompts.add_picture_do_rest",defaultMessage:"Just add a picture  ChatGPT will do the rest."},navratri_title:{id:"india-viral-image-gen-prompts.navratri.title",defaultMessage:"Navratri Garba Glow"},navratri_oneliner:{id:"india-viral-image-gen-prompts.navratri.oneliner",defaultMessage:"Garba night photo, styled for you"},navratri_prompt:{id:"india-viral-image-gen-prompts.navratri.prompt",defaultMessage:"Transform us into a Garba dance celebration, wearing colorful chaniya cholis and kediyus, ready to dance under strings of fairy lights in a festive ground."},diwali_title:{id:"india-viral-image-gen-prompts.diwali.title",defaultMessage:"Diwali Family Lights"},diwali_oneliner:{id:"india-viral-image-gen-prompts.diwali.oneliner",defaultMessage:"Create a Diwali card from your photo"},diwali_prompt:{id:"india-viral-image-gen-prompts.diwali.prompt",defaultMessage:"Change the photo to us wearing traditional clothes, participating in a Diwali celebration. Glowing 'Happy Diwali From [Insert Name]' text written in background with shining letters floats in the air. Make it a slightly stylized festive illustration."},childrens_title:{id:"india-viral-image-gen-prompts.childrens.title",defaultMessage:"Children's Day Story"},childrens_oneliner:{id:"india-viral-image-gen-prompts.childrens.oneliner",defaultMessage:"Make a playful Childrens Day card"},childrens_prompt:{id:"india-viral-image-gen-prompts.childrens.prompt",defaultMessage:"Create a Happy Children's Day greeting card in a photo surrealistic style. The photo looks like there is a big open book with the greeting written on it and the children are playing on swings and slides around it. There are rainbows and confetti all around."},christmas_title:{id:"india-viral-image-gen-prompts.christmas.title",defaultMessage:"Christmas Wonderland Card"},christmas_oneliner:{id:"india-viral-image-gen-prompts.christmas.oneliner",defaultMessage:"Make a snowy family Christmas card"},christmas_prompt:{id:"india-viral-image-gen-prompts.christmas.prompt",defaultMessage:'Make the family celebrate Christmas in a detailed snowy winter wonderland Christmas card style with "Merry Christmas from the [Insert Name]" written in the background.'},cricket_title:{id:"india-viral-image-gen-prompts.cricket.title",defaultMessage:"Cricket Festival Street"},cricket_oneliner:{id:"india-viral-image-gen-prompts.cricket.oneliner",defaultMessage:"Get a custom match-day photo"},cricket_prompt:{id:"india-viral-image-gen-prompts.cricket.prompt",defaultMessage:"Generate a vibrant Indian festival street scene with me included in the celebration and fans in blue jerseys dancing Garba and waving flags, colorful gulal (powder) flying in the air, and a glowing banner reading 'Chak De India' in beautiful English calligraphy."}});function $4e(){"use forget";var p;const t=H.c(16),e=G(),n=J();let s;if(t[0]!==e){const{country:g}=md(e);s=(g!=null?g:"").toUpperCase(),t[0]=e,t[1]=s}else s=t[1];const o=s;let a;if(t[2]!==n||t[3]!==o){const g=n.formatMessage(vs.add_picture_do_rest),h=z4e,x=S=>{var M;const C=(M=S.trending_target_countries)!=null?M:[];return C.length===0||o===""?!1:new Set(C.map(W4e)).has(o)},b=[{type:ke.Trending,id:"india_viral_navratri_garba",title:n.formatMessage(vs.navratri_title),body:g,oneliner:n.formatMessage(vs.navratri_oneliner),prompt:n.formatMessage(vs.navratri_prompt),category:"dalle",systemHints:[Ie.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-21T18:30:00Z",end_time_utc:"2025-10-02T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/navratri-2@2x.png"}],theme:et.ImageGenTrending,source:"CURATED"},{type:ke.Trending,id:"india_viral_diwali_family_glow",title:n.formatMessage(vs.diwali_title),body:g,oneliner:n.formatMessage(vs.diwali_oneliner),prompt:n.formatMessage(vs.diwali_prompt),category:"dalle",systemHints:[Ie.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-10-14T18:30:00Z",end_time_utc:"2025-10-22T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-1@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-2@2x.png"},{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/diwali-3@2x.png"}],theme:et.ImageGenTrending,source:"CURATED"},{type:ke.Trending,id:"india_viral_childrens_day_card",title:n.formatMessage(vs.childrens_title),body:g,oneliner:n.formatMessage(vs.childrens_oneliner),prompt:n.formatMessage(vs.childrens_prompt),category:"dalle",systemHints:[Ie.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-11-11T18:30:00Z",end_time_utc:"2025-11-14T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/childrens-day@2x.png"}],theme:et.ImageGenTrending,source:"CURATED"},{type:ke.Trending,id:"india_viral_christmas_card",title:n.formatMessage(vs.christmas_title),body:g,oneliner:n.formatMessage(vs.christmas_oneliner),prompt:n.formatMessage(vs.christmas_prompt),category:"dalle",systemHints:[Ie.PictureV2],requires_dalle:!0,requires_file_upload:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-12-24T18:30:00Z",end_time_utc:"2025-12-25T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/christmas@2x.png"}],theme:et.ImageGenTrending,source:"CURATED"},{type:ke.Trending,id:"india_viral_cricket_festival",title:n.formatMessage(vs.cricket_title),body:g,oneliner:n.formatMessage(vs.cricket_oneliner),prompt:n.formatMessage(vs.cricket_prompt),category:"dalle",systemHints:[Ie.PictureV2],requires_dalle:!0,is_trending:!0,trending_target_countries:["IN"],trending_schedule_timezone:"Asia/Kolkata",trending_schedule_utc:[{start_time_utc:"2025-09-08T18:30:00Z",end_time_utc:"2025-09-28T18:29:59Z"},{start_time_utc:"2025-10-18T18:30:00Z",end_time_utc:"2025-10-19T18:29:59Z"},{start_time_utc:"2025-10-22T18:30:00Z",end_time_utc:"2025-10-23T18:29:59Z"},{start_time_utc:"2025-10-24T18:30:00Z",end_time_utc:"2025-10-25T18:29:59Z"},{start_time_utc:"2025-10-28T18:30:00Z",end_time_utc:"2025-10-29T18:29:59Z"},{start_time_utc:"2025-10-30T18:30:00Z",end_time_utc:"2025-10-31T18:29:59Z"},{start_time_utc:"2025-11-01T18:30:00Z",end_time_utc:"2025-11-02T18:29:59Z"},{start_time_utc:"2025-11-05T18:30:00Z",end_time_utc:"2025-11-06T18:29:59Z"},{start_time_utc:"2025-11-07T18:30:00Z",end_time_utc:"2025-11-08T18:29:59Z"},{start_time_utc:"2025-11-29T18:30:00Z",end_time_utc:"2025-11-30T18:29:59Z"},{start_time_utc:"2025-12-02T18:30:00Z",end_time_utc:"2025-12-03T18:29:59Z"},{start_time_utc:"2025-12-05T18:30:00Z",end_time_utc:"2025-12-06T18:29:59Z"},{start_time_utc:"2025-12-08T18:30:00Z",end_time_utc:"2025-12-09T18:29:59Z"},{start_time_utc:"2025-12-10T18:30:00Z",end_time_utc:"2025-12-11T18:29:59Z"},{start_time_utc:"2025-12-13T18:30:00Z",end_time_utc:"2025-12-14T18:29:59Z"},{start_time_utc:"2025-12-16T18:30:00Z",end_time_utc:"2025-12-17T18:29:59Z"},{start_time_utc:"2025-12-18T18:30:00Z",end_time_utc:"2025-12-19T18:29:59Z"}],example_image_urls:[{"320_2x":"https://persistent.oaistatic.com/chatgpt/trending/image-gen/cricket@2x.png"}],theme:et.ImageGenTrending,source:"CURATED"}].filter(S=>x(S)&&h(S)),v=H4e;a=b.filter(v),t[2]=n,t[3]=o,t[4]=a}else a=t[4];const i=a,l=i[Math.floor(Math.random()*i.length)];if(!l){let g;return t[5]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[5]=g):g=t[5],g}const c=l.oneliner;let d;t[6]!==c||t[7]!==l?(d=c?B(w({},l),{title:c}):l,t[6]=c,t[7]=l,t[8]=d):d=t[8];const u=d,m=u.example_image_urls;if(Array.isArray(m)&&m.length>0){const g=m[Math.floor(Math.random()*m.length)];let h;t[9]!==g?(h=(p=g==null?void 0:g["320_2x"])!=null?p:g?Object.values(g)[0]:void 0,t[9]=g,t[10]=h):h=t[10];const x=h;if(typeof x=="string"&&x.length>0){let y;return t[11]!==u||t[12]!==x?(y=[B(w({},u),{coverImageUrl:x})],t[11]=u,t[12]=x,t[13]=y):y=t[13],y}}let f;return t[14]!==u?(f=[u],t[14]=u,t[15]=f):f=t[15],f}function H4e(t){var e;return(e=t.systemHints)==null?void 0:e.includes(Ie.PictureV2)}function W4e(t){return t.toUpperCase()}function z4e(t){var s;const e=(s=t.trending_schedule_utc)!=null?s:[];if(e.length===0)return!1;const n=new Date;for(const o of e){const a=o.start_time_utc,i=o.end_time_utc;if(!a||!i)continue;const l=new Date(a),c=new Date(i);if(l<=n&&n<=c)return!0}return!1}const PF=Rm(()=>{const t=Qe(!1);let e=null;const n=o=>{e&&(clearTimeout(e),e=null),t.set(o)};return{shouldHighlight$:t,setShouldHighlight:n,flashHighlight:(o=4e3)=>{n(!0),e=setTimeout(()=>{t.set(!1),e=null},o)}}});function NF(){"use forget";const t=H.c(3),{store:e}=Ar(),n=qs();let s;return t[0]!==n||t[1]!==e?(s=(o,a,i,l)=>{const c=e.getSharedProps(),d=c==null?void 0:c.composerController;if(!d)return;const u=yo(a);if(u==null)return;const m="systemHints"in a?a.systemHints:void 0,f=m&&m.length>0?m[0]:void 0;if(f){const x=c!=null&&c.clientThreadId?{clientThreadId:c.clientThreadId}:void 0;n(f,w({},x?{analyticsMetadata:x}:{}))}if((a.type===ke.Starter||a.type===ke.Autocomplete||a.type===ke.Trending)&&a.requires_file_upload===!0){const{flashHighlight:x}=PF(d);x()}o.preventDefault();const g=Et(d);bo(g,u),g.focus();const h=c==null?void 0:c.clientThreadId;h&&c1(a,l,h)},t[0]=n,t[1]=e,t[2]=s):s=t[2],s}const q4e=be({subtitle:{id:"starter-prompt-banner.subtitle",defaultMessage:"Just add a picture  ChatGPT will do the rest. <tryNow>Try now</tryNow>"}});function Y4e(){"use forget";const[t]=ja("oai/apps/hasDismissedStarterPromptBanner",!1,Z4e);return!t}function Z4e(t){return typeof t=="boolean"}function QJe(t){"use forget";var Z;const e=H.c(35),{className:n}=t,s=Gl(),o=NF(),[a,i]=ja("oai/apps/hasDismissedStarterPromptBanner",!1,J4e),l=jF(),c=$4e(),d=G(),f=ff(d,!1).get("image_gen_prompts_type","evergreen")==="trending"?c:l;let p;e[0]!==f?(p=f.filter(Q4e),e[0]=f,e[1]=p):p=e[1];const g=p,h=g[Math.floor(Math.random()*g.length)];let x,y;e[2]!==h?(x=()=>{var Q;h&&U.logEventWithStatsig("Show Image Gen Prompt","chatgpt_prompt_show_suggestion",{type:h.type,id:h.id,index:0,theme:(Q=h.theme)!=null?Q:""})},y=[h],e[2]=h,e[3]=x,e[4]=y):(x=e[3],y=e[4]),_.useEffect(x,y);const b=w9();if(!h)return null;let v;e[5]!==h?(v=[h],e[5]=h,e[6]=v):v=e[6];const S=v,C=b,k=h.title,M=(Z=h.coverImageUrl)!=null?Z:h.coverThumbnailImageUrl;let T;e[7]!==S||e[8]!==s||e[9]!==C||e[10]!==o||e[11]!==h?(T=Q=>{var X;if(C){Q.preventDefault();return}if(Q.stopPropagation(),h.requires_file_upload===!0&&((X=h.systemHints)==null?void 0:X.includes(Ie.PictureV2))){o(Q,h,S,0);return}s(Q,h,S,0)},e[7]=S,e[8]=s,e[9]=C,e[10]=o,e[11]=h,e[12]=T):T=e[12];const E=T;if(a)return null;let A;e[13]!==n?(A=W("relative",n),e[13]=n,e[14]=A):A=e[14];const N=C?"opacity-60":"";let R;e[15]!==N?(R=W("border-token-border-default bg-tertiary flex w-full items-center gap-3 rounded-2xl border shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)]",N),e[15]=N,e[16]=R):R=e[16];let O;e[17]!==M?(O=M?r.jsx("div",{className:"py-3 ps-3",children:r.jsx("div",{className:"border-token-border-default borde h-14 w-14 -rotate-2 overflow-hidden rounded-xl p-0.5 shadow-lg",children:r.jsx("img",{src:M,alt:"","aria-hidden":"true",className:"h-full w-full rounded-lg object-cover"})})}):null,e[17]=M,e[18]=O):O=e[18];let D;e[19]!==k?(D=r.jsx("div",{className:"text-token-text-primary truncate text-sm leading-5 font-medium sm:text-base",children:k}),e[19]=k,e[20]=D):D=e[20];let F;e[21]===Symbol.for("react.memo_cache_sentinel")?(F=r.jsx("div",{className:"text-token-text-secondary mt-1 text-xs leading-5 sm:text-sm",children:r.jsx(P,B(w({},q4e.subtitle),{values:{tryNow:K4e}}))}),e[21]=F):F=e[21];let V;e[22]!==D?(V=r.jsxs("div",{className:"min-w-0 flex-1 py-3 text-start",children:[D,F]}),e[22]=D,e[23]=V):V=e[23];let z;e[24]!==i?(z=r.jsx(fn,{className:"me-1 mt-1 self-start",iconSize:"md",onClick:Q=>{Q.stopPropagation(),i(!0)}}),e[24]=i,e[25]=z):z=e[25];let $;e[26]!==E||e[27]!==V||e[28]!==z||e[29]!==R||e[30]!==O?($=r.jsxs("div",{role:"button",tabIndex:0,className:R,onClick:E,children:[O,V,z]}),e[26]=E,e[27]=V,e[28]=z,e[29]=R,e[30]=O,e[31]=$):$=e[31];let Y;return e[32]!==$||e[33]!==A?(Y=r.jsx("div",{className:A,children:$}),e[32]=$,e[33]=A,e[34]=Y):Y=e[34],Y}function K4e(t){return r.jsx("span",{className:"inline-flex items-center gap-1 text-xs font-medium text-blue-500 sm:text-sm dark:text-blue-400",children:r.jsx("span",{children:t})})}function Q4e(t){var e;return(e=t.systemHints)==null?void 0:e.includes(Ie.PictureV2)}function J4e(t){return typeof t=="boolean"}function JJe({label:t,onClick:e,disabled:n=!1,icon:s,rightIcon:o}){return r.jsxs("button",{className:"group border-token-border-default enabled:hover:bg-token-main-surface-secondary relative flex h-[42px] items-center gap-1.5 rounded-full border px-3 py-2 text-start text-[13px] transition disabled:cursor-not-allowed xl:gap-2 xl:text-[14px]",disabled:n,onClick:e,children:[s,r.jsx("span",{className:"group-hover:text-token-text-primary max-w-full whitespace-nowrap text-gray-600 transition select-none dark:text-gray-500",children:t}),o]})}const XJe=()=>ls().pathname==="/new-tab-page";function eXe({starterPrompt:t,allPrompts:e,index:n,disabled:s,className:o}){var p;const a=Gl(),i=NF(),l=(p=t.body)!=null?p:t.title,c=g=>{var x;((x=t.systemHints)==null?void 0:x.includes(Ie.PictureV2))&&t.requires_file_upload?i(g,t,e,n):a(g,t,e,n)},d=t.iconImageUrl,u=t.coverImageUrl,m=t.accentColor,f=m&&u?{backgroundColor:m}:void 0;return r.jsxs("button",{disabled:s,onClick:c,className:W("group relative flex aspect-[4/3] items-end overflow-hidden rounded-2xl border p-3 text-start transition","border-token-border-default enabled:hover:bg-token-interactive-bg-secondary-hover shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] disabled:opacity-60",o),style:f,"aria-label":l,children:[!d&&u&&r.jsxs(r.Fragment,{children:[r.jsx("img",{src:u,alt:"","aria-hidden":"true",className:"absolute inset-0 h-full w-full object-cover object-center"}),r.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent"})]}),r.jsx("div",{className:"absolute start-3 top-3",children:d?r.jsx("img",{src:d,alt:"","aria-hidden":"true",className:"h-10 w-10 rounded-md sm:h-12 sm:w-12"}):null}),r.jsx("div",{className:"pointer-events-none absolute start-3 end-3 bottom-3 select-none",children:r.jsx("div",{className:W("line-clamp-2 text-sm leading-tight sm:text-base",u?"text-white":"text-token-text-primary"),children:l})})]})}j(()=>I(()=>import("./bwwtp434e5t8plq3.js").then(t=>t._),__vite__mapDeps([187,1])),{loading:t=>L(t)});const RF=Ye.hasSeenGoldenHourAnnouncement;function X4e(){"use forget";var S,C,k;const t=H.c(6),e=G();let n;t[0]!==e?(n=cs(e),t[0]=e,t[1]=n):n=t[1];const s=n,o=ut(e),a=pn();let i;t[2]!==a?(i=a!=null&&wb(a),t[2]=a,t[3]=i):i=t[3];const l=i,{eligible:c,isLoading:d}=$e(RF),u=ki();let m;t[4]!==e?(m=gI(e),t[4]=e,t[5]=m):m=t[5];const f=m,{data:p}=Vm(void 0,!1,u),g=(S=p==null?void 0:p.memoryFullPct)!=null?S:0,h=(C=o==null?void 0:o.isFree())!=null?C:!1,x=(k=o==null?void 0:o.isGo())!=null?k:!1,v=l||g>=(h||x?95:90);return c&&!d&&f&&v&&!s}function tXe(){"use forget";const t=H.c(4),e=X4e(),{markAsViewed:n,eligible:s}=$e(RF);let o;return t[0]!==e||t[1]!==s||t[2]!==n?(o=()=>{!e||!s||(Ee.count(Ae.GOLDEN_HOUR,"announcement_banner.implicit_close"),n())},t[0]=e,t[1]=s,t[2]=n,t[3]=o):o=t[3],o}const l4=j(()=>I(()=>import("./dkkcsrii3168szu2.js").then(t=>t._),__vite__mapDeps([132,1])),{loading:t=>L(t)}),st=window.sessionStorage,LF=4320*60*1e3,OF=1440*60*1e3;function eTe(){const t=(st==null?void 0:st.getItem(Le.MemoryFullBannerDismissed))==="true",e=st==null?void 0:st.getItem(Le.MemoryFullBannerDismissedTimestamp);if(!t)return e!=null&&(st==null||st.removeItem(Le.MemoryFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return st==null||st.removeItem(Le.MemoryFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(st==null||st.removeItem(Le.MemoryFullBannerDismissed),st==null||st.removeItem(Le.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=OF?(st==null||st.removeItem(Le.MemoryFullBannerDismissed),st==null||st.removeItem(Le.MemoryFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}function tTe(){const t=(st==null?void 0:st.getItem(Le.MemoryAlmostFullBannerDismissed))==="true",e=st==null?void 0:st.getItem(Le.MemoryAlmostFullBannerDismissedTimestamp);if(!t)return e!=null&&(st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissedTimestamp)),{dismissed:!1,timestamp:null};if(!e)return st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissed),{dismissed:!1,timestamp:null};const n=Number.parseInt(e,10),s=Number.isFinite(n)&&n>=0?n:null;return s==null?(st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissed),st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):Date.now()-s>=LF?(st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissed),st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissedTimestamp),{dismissed:!1,timestamp:null}):{dismissed:!0,timestamp:s}}const oi=Nt(Cn(()=>{const{dismissed:t,timestamp:e}=eTe(),{dismissed:n,timestamp:s}=tTe();return{memoryFullBannerDismissed:t,memoryFullBannerDismissedTimestamp:e,memoryAlmostFullBannerDismissed:n,memoryAlmostFullBannerDismissedTimestamp:s}})),ul={dismissBanner(){const t=Date.now();oi.setState(e=>{e.memoryFullBannerDismissed=!0,e.memoryFullBannerDismissedTimestamp=t}),st==null||st.setItem(Le.MemoryFullBannerDismissed,"true"),st==null||st.setItem(Le.MemoryFullBannerDismissedTimestamp,t.toString())},dismissAlmostFullBanner(){const t=Date.now();oi.setState(e=>{e.memoryAlmostFullBannerDismissed=!0,e.memoryAlmostFullBannerDismissedTimestamp=t}),st==null||st.setItem(Le.MemoryAlmostFullBannerDismissed,"true"),st==null||st.setItem(Le.MemoryAlmostFullBannerDismissedTimestamp,t.toString())},clearDismissedBanner(){oi.setState(t=>{t.memoryFullBannerDismissed=!1,t.memoryFullBannerDismissedTimestamp=null}),st==null||st.removeItem(Le.MemoryFullBannerDismissed),st==null||st.removeItem(Le.MemoryFullBannerDismissedTimestamp)},clearAlmostFullDismissedBanner(){oi.setState(t=>{t.memoryAlmostFullBannerDismissed=!1,t.memoryAlmostFullBannerDismissedTimestamp=null}),st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissed),st==null||st.removeItem(Le.MemoryAlmostFullBannerDismissedTimestamp)}};function nTe(t){var F,V;const e=Jb(t),n=Es(),s=Zh(),{data:o}=Vm(e,!1,s),a=G(),i=ki(),l=j2(a,o==null?void 0:o.memoryFullPct,!0),c=typeof l=="object"?l.layer:"control",d=typeof l=="object"?l.threshold:Zi,u=Ue(t,z=>me.findNode(z,$=>$.message.author.role===Ze.Tool&&$.message.author.name==="bio")),f=Ue(t,z=>!z||z.isLoading)&&!!t,p=(F=u==null?void 0:u.message.metadata)==null?void 0:F.memory_percentage_used,g=_.useRef(void 0),h=_.useRef(!1),[x,y]=_.useState(!1);_.useEffect(()=>{if(f)return;const z=u==null?void 0:u.message.id;if(!h.current){g.current=z!=null?z:null,h.current=!0;return}z&&z!==g.current&&Promise.resolve().then(()=>y(!0))},[f,u==null?void 0:u.message.id]);const b=p!=null?p*100:null,v=(V=o==null?void 0:o.memoryFullPct)!=null?V:null,S=x?b!=null:v!=null,C=x?b!=null?b:0:v!=null?v:0,k=S&&C>=d,[M,T]=_.useState(!k);_.useEffect(()=>{x&&T(!0)},[x]);const[E,A]=_.useState(!1),N=_.useRef(null),R=_.useRef(!1);_.useEffect(()=>{var $;if(!S)return;const z=($=N.current)!=null?$:-1/0;N.current=C,z<Zi&&C>=Zi&&(R.current=!0,Promise.resolve().then(()=>A(!0))),C<Zi&&R.current&&(R.current=!1,Promise.resolve().then(()=>A(!1)),Promise.resolve().then(()=>T(!0)))},[S,C,E]);const O=oi(z=>z.memoryAlmostFullBannerDismissed),D=oi(z=>z.memoryAlmostFullBannerDismissedTimestamp);switch(_.useEffect(()=>{if(!O||D==null)return;const z=Date.now()-D,$=LF-z;if($<=0){ul.clearAlmostFullDismissedBanner();return}const Y=window.setTimeout(()=>{ul.clearAlmostFullDismissedBanner()},$);return()=>{window.clearTimeout(Y)}},[O,D]),c){case"control":return{shouldShowMemoryAlmostFull:!1};case"treatment_upsell_on_convo_start":return{shouldShowMemoryAlmostFull:!n&&i&&k&&M&&!O&&C<100};case"treatment_upsell_on_bio_tool":return{shouldShowMemoryAlmostFull:!n&&i&&k&&x&&M&&!O&&C<100};default:return{shouldShowMemoryAlmostFull:!1}}}function sTe(t){"use forget";var X,oe;const e=H.c(27),n=Jb(t),s=G(),o=Es(),a=Zh(),{data:i}=Vm(n,!1,a),l=ki(),c=j2(s,i==null?void 0:i.memoryFullPct),d=Ue(t,lTe),m=Ue(t,iTe)&&!!t,f=(X=d==null?void 0:d.message.metadata)==null?void 0:X.memory_percentage_used,p=_.useRef(void 0),g=_.useRef(!1),[h,x]=_.useState(!1),y=f!=null?f*100:null,b=(oe=i==null?void 0:i.memoryFullPct)!=null?oe:null,v=h?y!=null:b!=null,S=h?y!=null?y:0:b!=null?b:0,C=v&&S>=Tf,[k,M]=_.useState(!C),[T,E]=_.useState(!1),A=_.useRef(null),N=_.useRef(!1);let R,O;e[0]!==h?(R=()=>{h&&M(!0)},O=[h],e[0]=h,e[1]=R,e[2]=O):(R=e[1],O=e[2]),_.useEffect(R,O);let D;e[3]!==(d==null?void 0:d.message.id)||e[4]!==m?(D=()=>{if(m)return;const se=d==null?void 0:d.message.id;if(!g.current){p.current=se!=null?se:null,g.current=!0;return}se&&se!==p.current&&Promise.resolve().then(()=>x(!0))},e[3]=d==null?void 0:d.message.id,e[4]=m,e[5]=D):D=e[5];const F=d==null?void 0:d.message.id;let V;e[6]!==m||e[7]!==F?(V=[m,F],e[6]=m,e[7]=F,e[8]=V):V=e[8],_.useEffect(D,V);let z;e[9]!==S||e[10]!==v?(z=()=>{var de;if(!v)return;const se=(de=A.current)!=null?de:-1/0;A.current=S,se<Tf&&S>=Tf&&(N.current=!0,Promise.resolve().then(()=>E(!0))),S<Tf&&N.current&&(N.current=!1,Promise.resolve().then(()=>E(!1)),Promise.resolve().then(()=>M(!0)))},e[9]=S,e[10]=v,e[11]=z):z=e[11];let $;e[12]!==S||e[13]!==v||e[14]!==T?($=[v,S,T],e[12]=S,e[13]=v,e[14]=T,e[15]=$):$=e[15],_.useEffect(z,$);const Y=oi(rTe),Z=oi(aTe);let Q,q;switch(e[16]!==Y||e[17]!==Z?(Q=()=>{if(!Y||Z==null)return;const se=Date.now()-Z,de=OF-se;if(de<=0){ul.clearDismissedBanner();return}const ie=window.setTimeout(oTe,de);return()=>{window.clearTimeout(ie)}},q=[Y,Z],e[16]=Y,e[17]=Z,e[18]=Q,e[19]=q):(Q=e[18],q=e[19]),_.useEffect(Q,q),c){case"control":{const se=!o&&l?C&&k&&!Y:!1;let de;return e[20]!==se?(de={shouldShowMemoryFull:se},e[20]=se,e[21]=de):de=e[21],de}case"treatment_upsell_on_convo_start":{const se=!o&&l?C&&!Y:!1;let de;return e[22]!==se?(de={shouldShowMemoryFull:se},e[22]=se,e[23]=de):de=e[23],de}case"treatment_upsell_on_bio_tool":{const se=!o&&l?C&&h&&!Y:!1;let de;return e[24]!==se?(de={shouldShowMemoryFull:se},e[24]=se,e[25]=de):de=e[25],de}default:{let se;return e[26]===Symbol.for("react.memo_cache_sentinel")?(se={shouldShowMemoryFull:!1},e[26]=se):se=e[26],se}}}function oTe(){ul.clearDismissedBanner()}function aTe(t){return t.memoryFullBannerDismissedTimestamp}function rTe(t){return t.memoryFullBannerDismissed}function iTe(t){return!t||t.isLoading}function lTe(t){return me.findNode(t,cTe)}function cTe(t){return t.message.author.role===Ze.Tool&&t.message.author.name==="bio"}function nXe({memoryAlmostFullVariant:t}={}){const e=J(),{openSettings:n}=Fm(),s=at(),o=G(),a=ut(o),i=a==null?void 0:a.isFree(),l=kee(o,!0),c=l!=="control",d=e.formatMessage(No.getMore),u=()=>{var f;if(typeof window<"u")try{(f=window.sessionStorage)==null||f.setItem(yP,"true")}catch(p){}};_.useEffect(()=>{t?c&&U.logEventWithStatsig("Memory Banner Almost Full Shown","chatgpt_memory_banner_almost_full_shown",{variant:l,threshold:Zi}):U.logEventWithStatsig("Memory Banner Full Shown","chatgpt_memory_banner_full_shown",{variant:l})},[c,t,l]);const m=f=>{U.logEventWithStatsig("Memory Banner Upgrade Clicked","chatgpt_memory_banner_upgrade_clicked",{variant:l,surface:f}),gn(s,"Memory Full Banner")};if(t){if(!i||!c)return null;const f=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(he,{color:"secondary",onClick:()=>{U.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),u(),n(Bn.Personalization)},children:e.formatMessage(No.memoryManageButton)}),r.jsx(he,{color:"primary",onClick:()=>m("almost_full"),children:d})]});return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(mn,{title:e.formatMessage(No.memoryAlmostFullTitleTreatment),icon:r.jsx(l4,{className:"h-6 w-6"}),content:e.formatMessage(No.memoryAlmostFullTreatmentBody),customCtas:f,onDismiss:()=>ul.dismissAlmostFullBanner()})})}if(c){const f=r.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[r.jsx(he,{color:"secondary",onClick:()=>{U.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"almost_full"}),u(),n(Bn.Personalization)},children:e.formatMessage(No.memoryManageButton)}),r.jsx(he,{color:"primary",onClick:()=>m("almost_full"),children:d})]});return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(mn,{icon:r.jsx(l4,{className:"h-6 w-6"}),title:e.formatMessage(No.memoryFullTitleTreatment),content:e.formatMessage(No.memoryFullTreatmentBody),customCtas:f,onDismiss:()=>ul.dismissBanner()})})}return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},children:r.jsx(mn,{title:e.formatMessage(No.memoryFullTitleControl),content:e.formatMessage(No.memoryFullTooltipControl,No.memoryFullTooltipControl.values),primaryCtaText:e.formatMessage(No.memoryManageButton),onPrimaryCtaClick:()=>{U.logEventWithStatsig("Memory Banner Manage Clicked","chatgpt_memory_banner_manage_clicked",{variant:l,surface:"full"}),n(Bn.Personalization)},onDismiss:()=>ul.dismissBanner()})})}const No=be({memoryFullTitleControl:{id:"xzFgrm",defaultMessage:"ChatGPT's out of space for saved memories"},memoryFullTitleTreatment:{id:"61wRTj",defaultMessage:"Memory full"},memoryFullTreatmentBody:{id:"bGCh/f",defaultMessage:"Responses may feel less personalized. Upgrade to expand memory, or manage existing memories."},getMore:{id:"LdblxY",defaultMessage:"Get more"},getMoreTreatment:{id:"zq5dLI",defaultMessage:"Upgrade"},memoryManageButton:{id:"a5A88o",defaultMessage:"Manage"},memoryAlmostFullTitleTreatment:{id:"2IibCN",defaultMessage:"Memory almost full"},memoryAlmostFullTreatmentBody:{id:"2wtxF6",defaultMessage:"Once memory is full, responses will feel less personalized. Upgrade to expand memory, or manage existing memories."},memoryTooltipVariant:{id:"h72m3Z",defaultMessage:"<link>Manage</link> saved memories or upgrade to {planType} to get more.",values:{link:t=>r.jsx(Aa,{to:fd(Bn.Personalization),className:"underline",children:t})}},memoryFullTooltipControl:{id:"I1DjDy",defaultMessage:"New memories wont be added until you make space. <a>Learn more</a>",values:{a:t=>r.jsx("a",{href:See,target:"_blank",rel:"noopener noreferrer",className:"underline",children:t})}}});function sXe(t){return Ve(t,"3637408529").get("is_secondary_auth_banner_button_enabled",!1)}function DF(t){var e,n,s;return(s=(n=(e=t.metadata)==null?void 0:e.dalle)==null?void 0:n.prompt)!=null?s:""}async function dTe(t,e,n="image/png"){return new Promise((s,o)=>{t.toBlob(a=>{a!=null?s(new File([a],e,{type:n})):o(new Error("Failed to convert canvas to blob"))},n)})}async function uTe(t,e){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const s=n.getContext("2d");if(s==null)throw new Error("Failed to get 2d context for mask canvas");const o=s.createImageData(t.width,t.height);for(let a=0;a<t.data.length;a+=4)t.data[a+3]!==0?(o.data[a]=0,o.data[a+1]=0,o.data[a+2]=0,o.data[a+3]=255):(o.data[a]=255,o.data[a+1]=255,o.data[a+2]=255,o.data[a+3]=255);return s.putImageData(o,0,0),dTe(n,e)}async function mTe(t,e){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}function fTe(t){const e=oz(new Date,"yyyy-MM-dd HH.mm.ss");let n=t.slice(0,150);return n.endsWith(".")&&(n=n.slice(0,-1)),"DALLE ".concat(e," - ").concat(n,".webp")}async function pTe(t,e,n,s=!1){var l,c,d,u,m,f,p,g,h,x,y,b,v,S,C,k,M,T,E,A,N,R;const o=DF(t),a=fTe(o);await mTe(t.url,a);const i=s?"chatgpt_dalle_image_captioning_download":"chatgpt_dalle_image_download";We.logEvent(i,null,{sourceOperation:(d=(c=(l=t.metadata)==null?void 0:l.dalle)==null?void 0:c.edit_op)!=null?d:"none",hasParent:((m=(u=t.metadata)==null?void 0:u.dalle)==null?void 0:m.parent_gen_id)!=null?"true":"false",model:"dalle"}),U.logEvent(i,{conversationId:e,messageId:n,generationId:(p=(f=t.metadata)==null?void 0:f.dalle)==null?void 0:p.gen_id,parentGenerationId:(h=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:h.parent_gen_id,fileId:To(t.asset_pointer),sourceOperation:(y=(x=t.metadata)==null?void 0:x.dalle)==null?void 0:y.edit_op,model:"dalle"}),We.logEvent("chatgpt_image_download",null,{sourceOperation:(S=(v=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:v.edit_op)!=null?S:"none",hasParent:((k=(C=t.metadata)==null?void 0:C.dalle)==null?void 0:k.parent_gen_id)!=null?"true":"false",model:"dalle"}),U.logEvent("chatgpt_image_download",{conversationId:e,messageId:n,generationId:(T=(M=t.metadata)==null?void 0:M.dalle)==null?void 0:T.gen_id,parentGenerationId:(A=(E=t.metadata)==null?void 0:E.dalle)==null?void 0:A.parent_gen_id,fileId:To(t.asset_pointer),sourceOperation:(R=(N=t.metadata)==null?void 0:N.dalle)==null?void 0:R.edit_op,model:"dalle"})}function gTe(t){const e=r1(t),n=A1(),s=e&&"gizmo"in e?e.gizmo:void 0;return!n&&(s==null?void 0:s.gizmo.id)===sz}function hTe(t,e){var o,a;const n=(a=(o=e.metadata)==null?void 0:o.dalle)==null?void 0:a.gen_id,s=To(e.asset_pointer);return s==null||n==null?t:Gd(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"transformation",original_gen_id:n,original_file_id:s}}}}}})}async function _Te(t,e,n,s){return new Promise((o,a)=>{az(ol(t),t,e,n,{kind:rz.DalleAgent},{onFileCreated:rs,onFileUploadProgress:rs,onFileUploaded:(i,l)=>o(l),onError:(i,l)=>{a(new Error("Failed to upload file with reason: ".concat(l)))}},s)})}async function xTe(t,e,n,s,o){var l,c;const a=(c=(l=e.metadata)==null?void 0:l.dalle)==null?void 0:c.gen_id,i=To(e.asset_pointer);if(i==null||a==null||n==null)return t;try{const d=await uTe(n,"mask.png"),u=await _Te(d,s,o,{imageDimensions:{width:e.width,height:e.height}});return Gd(t,{promptMessage:{metadata:{dalle:{from_client:{operation:{type:"inpainting",original_gen_id:a,original_file_id:i,mask_file_id:u}}}}}})}catch(d){return Oe.addError(d),t}}async function yTe(t,e,n,s,o){return await Promise.all(e.map(a=>Wd.fetch(t,{asset:a,sharedThreadId:n,gizmoId:s,conversationId:o}))).catch(a=>{const i=e.map(l=>To(l.asset_pointer));throw Oe.addError(new Error("Could not fetch files with IDs ".concat(i," from file service"),{cause:a})),a})}function vTe(t){const e=G(),n=uO(e),s=x1(v1.getMaxBannerClientThreadId);return!(!n||s!==t)}let Ga="";const c4={setSessionId(t){Ga=t},logImpression(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.impression"),Oe.addAction("tasks.notification.impression"),U.logEvent("tasks:notification.impression",{logging_session_id:Ga})},logNotNow(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.not_now"),Oe.addAction("tasks.notification.not_now"),U.logEvent("tasks:notification.not_now",{logging_session_id:Ga})},logAllow(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.allow"),Oe.addAction("tasks.notification.allow"),U.logEvent("tasks:notification.allow",{logging_session_id:Ga})},logSystemDeny(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.system_deny"),Oe.addAction("tasks.notification.system_deny"),U.logEvent("tasks:notification.system_deny",{logging_session_id:Ga})},logSystemAllow(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.system_allow"),Oe.addAction("tasks.notification.system_allow"),U.logEvent("tasks:notification.system_allow",{logging_session_id:Ga})},logSystemSuccess(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.system_success"),Oe.addAction("tasks.notification.system_success"),U.logEvent("tasks:notification.system_success",{logging_session_id:Ga})},logRegistration(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.registration"),Oe.addAction("tasks.notification.registration"),U.logEvent("tasks:notification.registration",{logging_session_id:Ga})},logErrorDismissed(){Ee.count(Ae.JAWBONE,"jawbone_notifications_banner.error_dismissed"),Oe.addAction("tasks.notification.error_dismissed"),U.logEvent("tasks:notification.error_dismissed",{logging_session_id:Ga})}},Uc=window.localStorage,R3=Nt(Cn(()=>{var t;return{initialized:!1,requestingClientThreadId:null,previouslyRequestedClientThreadIds:new Set,lastRequestTime:(t=Uc==null?void 0:Uc.getItem("oai/apps/jawboneNotificationLastRequestTime"))!=null?t:null,permission:typeof window<"u"&&"Notification"in window?Notification.permission:"default"}})),Ip=R3.getState,ap=R3.setState,oXe={initIfNeeded:(t=Ip())=>{var e;t.initialized||(ap({initialized:!0}),typeof window<"u"&&"Notification"in window&&((e=navigator.permissions)==null||e.query({name:"notifications"}).then(n=>{n.onchange=()=>{switch(Notification.permission){case"granted":c4.logSystemAllow();break;case"denied":c4.logSystemDeny();break}ap({permission:Notification.permission})}})))},setRequestingClientThreadId:t=>{ap(e=>{e.previouslyRequestedClientThreadIds.has(t)||(e.requestingClientThreadId=t,e.previouslyRequestedClientThreadIds.add(t))})},clearNotificationRequest:()=>{ap(t=>{if(t.requestingClientThreadId){const e=new Date().toISOString();t.lastRequestTime=e,Uc==null||Uc.setItem("oai/apps/jawboneNotificationLastRequestTime",e)}t.requestingClientThreadId=null})}},bTe={getRequestingClientThreadId:(t=Ip())=>t.requestingClientThreadId,getLastRequestTime:(t=Ip())=>t.lastRequestTime,getPermission:(t=Ip())=>t.permission};function STe(t){const{requestingClientThreadId:e}=R3(o=>({requestingClientThreadId:bTe.getRequestingClientThreadId(o)})),n=G();return!(!uO(n)||t!==e)}const CTe=j(()=>I(()=>import("./dw5r5zt0675lb73y.js"),__vite__mapDeps([370,1,29,30])).then(t=>t.BeaconModal));function wTe(t){"use forget";const e=H.c(13),{clientThreadId:n,composerController:s,openFileDialog:o}=t,a=hee(),i=G(),l=mF(),c=pF(),d=_.useRef(!1),u=Ue(n,me.getCurrentLeafId),m=_r.useStore();let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{d.current=!1},e[0]=f):f=e[0];let p;e[1]!==u?(p=[u],e[1]=u,e[2]=p):p=e[2],_.useEffect(f,p);let g,h;e[3]!==c||e[4]!==l||e[5]!==n||e[6]!==s||e[7]!==i||e[8]!==a||e[9]!==o||e[10]!==m?(g=()=>{if(!a||d.current)return;d.current=!0,U.logEventWithStatsig("Web Beacon Shown","chatgpt_web_beacon_shown",{beacon_id:a.beacon_id,beacon_name:a.beacon_name,beacon_type:"modal"}),l.mutate(a.beacon_id),gt(i,CTe,{onDismiss:()=>{U.logEventWithStatsig("Web Beacon Dismissed","chatgpt_web_beacon_dismissed",{beacon_id:a.beacon_id,beacon_name:a.beacon_name,beacon_type:"modal"}),c.mutate(a.beacon_id),Qc.dismiss()},modalInfo:a,clientThreadId:n,composerController:s,persistedSystemHintsStore:m,openFileDialog:o})},h=[a,i,l,c,n,s,m,o],e[3]=c,e[4]=l,e[5]=n,e[6]=s,e[7]=i,e[8]=a,e[9]=o,e[10]=m,e[11]=g,e[12]=h):(g=e[11],h=e[12]),_.useEffect(g,h)}function kTe(){var l;const t=G(),e=xe(t,"727502549"),n=xe(t,"550432558"),{eligible:s}=$e(Ye.hasSeenReferralUpsellAnnouncement),{data:o}=vP(s),a=Ve(t,"1976075658"),i=((l=o==null?void 0:o.info)==null?void 0:l.program_name)==="colombia"?a.get("show_banner",!1):!0;return e&&n&&i&&s&&!!(o!=null&&o.info)}function MTe(){var d;const t=G(),e=xe(t,"3148583717"),n=xe(t,"3362382575"),s=ds(t,"1087852479").value,{eligible:o}=$e(Ye.hasSeenStudentsUpsellAnnouncement),a=pn(),i=a==null?void 0:a.email,l=(d=s==null?void 0:s.blacklist)!=null?d:[];return Array.isArray(l)&&i&&l.some(u=>i.endsWith(u))?!1:(i==null?void 0:i.endsWith(".edu"))&&o&&e&&n}const TTe=5,aXe=_.memo(function(e){return ETe(e),ATe(e),wTe({clientThreadId:e.clientThreadId,composerController:e.composerController,openFileDialog:e.openFileDialog}),ITe(),null});function ETe(t){const{store:e}=Ar(),n=e.useSetSharedProps();En(()=>{n(t)},[t,n])}function ATe(t){const{clientThreadId:e,canContinue:n}=t,{store:s}=Ar(),o=G(),a=_.useRef({top:s.useContentAreaApi(bg.HeaderTop),bottom:s.useContentAreaApi(bg.HeaderBottom)}).current,i=gTe(e),{shouldShowBannerSignup:l,shouldShowBannerTermsDisclaimer:c}=jTe(e),{isOpen:d}=eS(),u=g4e(e),m=e4e(e),f=C5e(t);o_e(t);const p=GD(),g=a_e(t),{shouldShowMemoryFull:h}=sTe(e),{shouldShowMemoryAlmostFull:x}=nTe(e),y=r5e(t),b=STe(e),v=vTe(e),S=L5e(),{eligible:C}=$e(iF),k=M4e(),M=b4e(),T=kTe(),E=MTe(),{eligible:A}=$e(Ye.hasSeenTeamSeatsPromoAnnouncement),N=oMe(e),R=Q5e(e),O=CMe(),D=gMe({clientThreadId:e}),F=rMe(),V=tMe(e),z=ue(()=>wn(ht(o,e)).id),$=r1(e),Y=ss(),Z=X5e(o),{eligible:Q}=$e(Ye.hasSeenAgentModeAnnouncementBanner),q=ue(()=>am(ht(o,e)).activeSystemHintSuggestionChips$().length>0),X=Q&&Z&&Y!==is,oe=kl(),se=Na(e),de=V4e({shouldBeEnabledForDefaultAssistant:se&&!oe,clientThreadId:e}),ie=Y4e(),ae=de==="hscroll",ce=de==="image_gen_banner"&&ie,ye=Il()&&s5e();En(()=>{c?a.top.set(Jt.BannerTermsDisclaimer):d?a.top.set(Jt.NewUserBannerTermsDisclaimer):z&&($==null?void 0:$.kind)===Tt.GizmoInteraction&&$.gizmo&&iz(z,$.gizmo)?a.top.set(Jt.ProjectConversationTaskNoFileAccess):y.eligible?a.top.set(Jt.AdvancedVoiceOnMobileAnnouncement):u?a.top.set(Jt.BannersRateLimit):m?a.top.set(Jt.BannersBeaconUI):D&&hMe(o)?a.top.set(Jt.PlusFreeTrialHomepageAnnouncementBanner):O?a.top.set(Jt.BannerPlusUpsell):F?a.top.set(Jt.BannerNoAuthTrials):b?a.top.set(Jt.JawboneAnnouncement):v?a.top.set(Jt.JawboneMaxActiveAnnouncement):f.eligible?a.top.set(Jt.BannerSidekickAnnouncement):p?a.top.set(Jt.MoonshineAnnouncement):g?a.top.set(Jt.SearchBrowserExtensionReactiveAnnouncement):S?a.top.set(Jt.PromoRedemptionAnnouncement):C?a.top.set(Jt.OperatorAnnouncement):T?a.top.set(Jt.ReferralProgramUpsellAnnouncement):n?a.top.set(Jt.PromptTextareaAction):l?a.top.set(Jt.BannerSignup):h?a.top.set(Jt.BannerMemoryFull):x?a.top.set(Jt.BannerMemoryAlmostFull):k?a.top.set(Jt.ReferrerRedemptionAvailableAnnouncement):M?a.top.set(Jt.RefereeRedemptionAvailableAnnouncement):E?a.top.set(Jt.StudentsUpsellAnnouncement):A?a.top.set(Jt.TeamSeatsPromoAnnouncement):N?a.top.set(Jt.ModelDeprecationBanner):R?a.top.set(Jt.TeamsContextualAnswersUpsell):V?a.top.set(Jt.LanguageUpsellBanner):X?a.top.set(Jt.AgentModeAnnouncementBanner):ae?a.top.set(Jt.StarterPrompts):ce?a.top.set(Jt.ImageGenBanner):q?a.top.set(Jt.SystemHintSuggestion):a.top.set(null),ye&&a.top.set("IntegratedVoiceModeNuxBanner")},[a,Y,D,n,c,d,l,u,f,h,x,y,X,A,ae,ce,q,ye]),En(()=>{i&&a.bottom.set(TN.DallePromptControls)},[a,i])}function ITe(){const{store:t}=Ar();_.useEffect(()=>()=>{t.reset()},[t])}function jTe(t){const e=G(),{isUnauthenticated:n}=Un(),s=Ve(e,"3637408529",{disableExposureLog:!0}),a=Ve(e,"3637408529").get("no_auth_banner_signup_rate_limit",TTe),i=s.get("should_show_no_auth_signup_banner",!0),l=_v(f=>f.bannerDisclaimerClientThreadId),c=pI(),d={shouldShowBannerTermsDisclaimer:!1,shouldShowBannerSignup:!1},[u,m]=Ue(t,f=>{var p;return[me.getConversationTurns(f).filter(g=>g.role===Ze.User).length,PTe((p=me.getCurrentNode(f))==null?void 0:p.message)]});return t&&(d.shouldShowBannerTermsDisclaimer=m&&n&&u===1&&!c&&(l==null||l===t),d.shouldShowBannerSignup=i&&m&&n&&u>0&&u%a===0),d}function PTe(t){return(t==null?void 0:t.author.role)===Ze.Assistant&&dA(t)}function rXe(t){"use forget";const e=H.c(13),[n,s]=_.useState(!1),o=G();let a;e[0]!==t||e[1]!==o?(a=ht(o,t),e[0]=t,e[1]=o,e[2]=a):a=e[2];const i=a;let l;e[3]!==i?(l=()=>{var g;return((g=Mi(i))==null?void 0:g.value)===Yt.REALTIME},e[3]=i,e[4]=l):l=e[4];const c=ue(l);let d;e[5]!==c?(d=()=>{c&&s(!0)},e[5]=c,e[6]=d):d=e[6];const u=d;let m,f;e[7]!==c?(m=()=>{c||s(!1)},f=[c],e[7]=c,e[8]=m,e[9]=f):(m=e[8],f=e[9]),_.useEffect(m,f);let p;return e[10]!==n||e[11]!==u?(p={maybeSetWaitingForRealtimeOnAbort:u,isWatingForRealtimeStatusChange:n},e[10]=n,e[11]=u,e[12]=p):p=e[12],p}function iXe(){const t=G(),e=dz(),n=xe(t,"1416952492");return _.useMemo(()=>{const s=[];for(const o of e){const a=uz(o.name);a&&s.push(a)}return n&&!s.includes(Ie.Research)&&s.push(Ie.Research),s},[e,n])}function NTe(t){const e=G(),n=J(),s=ut(e),o=(s==null?void 0:s.isSelfServeBusiness())||(s==null?void 0:s.isEnterpriseCBP()),a=r9(y=>y.bySystemHint(t)),i=lz(cz(t)),l=i&&o,c=t===Ie.Research?RTe(n.locale,a,o):fl(t)?LTe(n.locale,a,o):null,d=c!=null&&!i,u=t===Ie.Research&&xe(e,"1416952492"),m=fl(t)&&xe(e,"926440545"),f=u||m,p=f||i!=null,g=f?r.jsx(P,{id:"composer.skills.unavailable",defaultMessage:"Temporarily unavailable"}):i&&!o?r.jsx(P,{id:"composer.skills.rateLimited",defaultMessage:"{limit} more available on {resetDate}",values:{limit:i.limit,resetDate:new Date(i.resets_after).toLocaleDateString(n.locale,{month:"long",day:"numeric"})}}):void 0;let h,x;return(l||d)&&(h=l?i.title:c==null?void 0:c.label,x=l?i.description:c==null?void 0:c.secondaryLabel),{isBlocked:p,blockedLabel:g,remainingLabel:h,remainingLabelSecondary:x}}function FF(t,e){return new Date(e.reset_after).toLocaleDateString(t,{month:"long",day:"numeric"})}function RTe(t,e,n){return n||!e?null:{label:r.jsx(P,{id:"m6JsYD",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(P,{id:"8V98un",defaultMessage:"More available on {resetDate}",values:{resetDate:FF(t,e)}})}}function LTe(t,e,n){return n||!e?null:{label:r.jsx(P,{id:"nD45w8",defaultMessage:"{remaining} left",values:{remaining:e.remaining}}),secondaryLabel:r.jsx(P,{id:"eBZSNV",defaultMessage:"More available on {resetDate}",values:{resetDate:FF(t,e)}})}}function L3(t){it.sidebarUrlTrayOpen$.set(t)}function lXe(){const t=G(),e=vn(un),n=Fh(t),s=ue(it.sidebarUrlTrayOpen$),o=ue(it.context$),a=ss(),i=qs(),l=_.useRef(a);_.useEffect(()=>{if(!e||!n)return;const d=l.current;l.current=a,a===Ie.Agent&&d!==Ie.Agent&&o&&(s||L3(!0))},[e,n,a,o,s]);const c=_.useRef(s);_.useEffect(()=>{if(!e||!n)return;const d=s,u=c.current;c.current=d,u&&!d&&a===Ie.Agent&&i(null,{ifPrevSystemHint:Ie.Agent})},[e,n,s,a,i])}var OTe=(t=>(t.ConfigureRepos="configure-repos",t.SyncRepos="sync-repos",t.IndexRepos="index-repos",t))(OTe||{});const DTe=j(()=>I(()=>import("./e4831ztdomqzv5q3.js"),__vite__mapDeps([371,29,1,30,372])).then(t=>t.ContextConnectorDocumentParser));function cXe({composerController:t,parsedDocumentHandler:e}){const n=G(),{gdriveLinkStatus:s,o365BusinessLinkStatus:o,o365PersonalLinkStatus:a}=mz(n);return s==="false"&&o==="false"&&a==="false"?null:r.jsx(DTe,{composerController:t,parsedDocumentHandler:e})}const O3=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M9.38759 8.53403C10.0712 8.43795 10.7036 8.91485 10.7997 9.59849C10.8956 10.2819 10.4195 10.9133 9.73622 11.0096C9.05259 11.1057 8.4202 10.6298 8.32411 9.94614C8.22804 9.26258 8.70407 8.63022 9.38759 8.53403Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3886 5.58677C10.8476 5.5681 11.2608 5.5975 11.6581 5.74204L11.8895 5.83677C12.4185 6.07813 12.8721 6.46152 13.1991 6.94614L13.2831 7.07993C13.4673 7.39617 13.5758 7.74677 13.6571 8.14048C13.7484 8.58274 13.8154 9.13563 13.8993 9.81919L14.245 12.6317L14.3554 13.5624C14.3852 13.8423 14.4067 14.0936 14.4159 14.3192C14.4322 14.7209 14.4118 15.0879 14.3095 15.4393L14.2606 15.5887C14.0606 16.138 13.7126 16.6202 13.2577 16.9823L13.0565 17.1297C12.7061 17.366 12.312 17.4948 11.8622 17.5877C11.6411 17.6334 11.3919 17.673 11.1132 17.7118L10.1835 17.8299L7.37098 18.1756C6.68748 18.2596 6.13466 18.3282 5.68348 18.3465C5.28176 18.3628 4.9148 18.3424 4.56337 18.2401L4.41395 18.1913C3.86454 17.9912 3.38258 17.6432 3.0204 17.1883L2.87294 16.9872C2.63655 16.6367 2.50788 16.2427 2.41493 15.7928C2.36926 15.5717 2.32964 15.3226 2.29091 15.0438L2.17274 14.1141L1.82704 11.3016C1.74311 10.6181 1.67455 10.0653 1.65614 9.61411C1.63747 9.15518 1.66697 8.74175 1.81141 8.34458L1.90614 8.11313C2.14741 7.58441 2.53115 7.13051 3.01552 6.80356L3.1493 6.71958C3.46543 6.53545 3.8163 6.42688 4.20985 6.34556C4.65206 6.25423 5.20506 6.18729 5.88856 6.10337L8.70106 5.75767L9.63173 5.64731C9.91161 5.61744 10.163 5.59597 10.3886 5.58677ZM6.75673 13.0594C6.39143 12.978 6.00943 13.0106 5.66298 13.1522C5.5038 13.2173 5.32863 13.3345 5.06923 13.5829C4.80403 13.8368 4.49151 14.1871 4.04091 14.6932L3.64833 15.1327C3.67072 15.2763 3.69325 15.4061 3.71766 15.5243C3.79389 15.893 3.87637 16.0961 3.97548 16.243L4.06141 16.3602C4.27134 16.6237 4.5507 16.8253 4.86903 16.9413L5.00477 16.9813C5.1536 17.0148 5.34659 17.0289 5.6288 17.0174C6.01317 17.0018 6.50346 16.9419 7.20888 16.8553L10.0214 16.5106L10.9306 16.3944C11.0173 16.3824 11.0997 16.3693 11.1776 16.3573L8.61513 14.3065C8.08582 13.8831 7.71807 13.5905 7.41395 13.3846C7.19112 13.2338 7.02727 13.1469 6.88856 13.0975L6.75673 13.0594ZM10.4432 6.91587C10.2511 6.9237 10.0319 6.94288 9.77333 6.97056L8.86317 7.07798L6.05067 7.42271C5.34527 7.50932 4.85514 7.57047 4.47841 7.64829C4.20174 7.70549 4.01803 7.76626 3.88173 7.83481L3.75966 7.9061C3.47871 8.09575 3.25597 8.35913 3.1161 8.66587L3.06141 8.79966C3.00092 8.96619 2.96997 9.18338 2.98524 9.55942C3.00091 9.94382 3.06074 10.4341 3.14735 11.1395L3.42274 13.3895L3.64442 13.1434C3.82631 12.9454 3.99306 12.7715 4.1493 12.6219C4.46768 12.3171 4.78299 12.0748 5.16005 11.9208L5.38661 11.8377C5.92148 11.6655 6.49448 11.6387 7.04579 11.7616L7.19325 11.7987C7.53151 11.897 7.8399 12.067 8.15907 12.2831C8.51737 12.5256 8.9325 12.8582 9.4452 13.2684L12.5966 15.7889C12.7786 15.6032 12.9206 15.3806 13.0106 15.1336L13.0507 14.9979C13.0842 14.8491 13.0982 14.6561 13.0868 14.3739C13.079 14.1817 13.0598 13.9625 13.0321 13.704L12.9247 12.7938L12.58 9.9813C12.4933 9.27584 12.4322 8.78581 12.3544 8.40903C12.2972 8.13219 12.2364 7.94873 12.1679 7.81235L12.0966 7.69028C11.9069 7.40908 11.6437 7.18669 11.3368 7.04673L11.203 6.99204C11.0364 6.93147 10.8195 6.90059 10.4432 6.91587Z"}),_.createElement("path",{d:"M9.72841 1.5897C10.1797 1.60809 10.7322 1.67665 11.4159 1.7606L14.2284 2.1063L15.1581 2.22446C15.4371 2.26322 15.6859 2.3028 15.9071 2.34849C16.3571 2.44144 16.7509 2.57006 17.1015 2.80649L17.3026 2.95396C17.7576 3.31618 18.1055 3.79802 18.3056 4.34751L18.3544 4.49692C18.4567 4.84845 18.4772 5.21519 18.4608 5.61704C18.4516 5.84273 18.4292 6.09381 18.3993 6.37388L18.2899 7.30454L17.9442 10.117C17.8603 10.8007 17.7934 11.3535 17.702 11.7958C17.6207 12.1895 17.5122 12.5401 17.328 12.8563L17.244 12.9901C17.0958 13.2098 16.921 13.4086 16.7255 13.5829L16.6171 13.662C16.3496 13.8174 16.0009 13.769 15.787 13.5292C15.5427 13.255 15.5666 12.834 15.8407 12.5897L16.0018 12.4276C16.0519 12.3703 16.0986 12.3095 16.1415 12.2459L16.2128 12.1239C16.2813 11.9875 16.3421 11.8041 16.3993 11.5272C16.4771 11.1504 16.5383 10.6605 16.6249 9.95493L16.9696 7.14243L17.077 6.23228C17.1047 5.97357 17.1239 5.7546 17.1317 5.56235C17.1432 5.27997 17.1291 5.08722 17.0956 4.93833L17.0556 4.80259C16.9396 4.4842 16.7381 4.20493 16.4745 3.99497L16.3573 3.90903C16.2103 3.80991 16.0075 3.72745 15.6386 3.65122C15.4502 3.61231 15.2331 3.57756 14.9755 3.54185L14.0663 3.42563L11.2538 3.08091C10.5481 2.99426 10.0582 2.93444 9.67372 2.9188C9.39129 2.90732 9.19861 2.92142 9.0497 2.95493L8.91395 2.99497C8.59536 3.11093 8.31538 3.31224 8.10536 3.57603L8.0204 3.69321C7.95293 3.79324 7.89287 3.91951 7.83778 4.10532L7.787 4.23032C7.64153 4.50308 7.31955 4.64552 7.01161 4.55454C6.65948 4.45019 6.45804 4.07952 6.56239 3.72739L6.63075 3.52036C6.70469 3.31761 6.79738 3.12769 6.91786 2.94907L7.06532 2.7479C7.42756 2.29294 7.90937 1.94497 8.45888 1.74497L8.60829 1.69614C8.95981 1.59385 9.32655 1.57335 9.72841 1.5897Z"})),$l=Object.freeze(Object.defineProperty({__proto__:null,default:O3},Symbol.toStringTag,{value:"Module"}));function dXe(){"use forget";const t=H.c(8),e=G(),n=J();let s;t[0]!==n?(s=n.formatMessage({id:"ebFfvg",defaultMessage:"Create image"}),t[0]=n,t[1]=s):s=t[1];const o=s;let a;t[2]!==e?(a=d=>{d.preventDefault(),d.stopPropagation(),U.logEventWithStatsig("Composer Create Image Button Clicked","composer_create_image_button_clicked"),Kt(e,{fallbackScreenHint:"login_or_signup",skipLoginModal:!1,loginModalSubtitleVariant:"create-image"})},t[2]=e,t[3]=a):a=t[3];const i=a;let l;t[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(O3,{className:"icon"}),t[4]=l):l=t[4];let c;return t[5]!==i||t[6]!==o?(c=r.jsx(k3,{pressed:!1,disabled:!1,icon:l,label:o,ariaLabel:o,animatedLabel:!0,showLabel:!0,onClick:i,dataTestid:"composer-button-create-image"}),t[5]=i,t[6]=o,t[7]=c):c=t[7],c}const BF=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":""},t),_.createElement("path",{d:"M16.3965 5.01128C16.3963 4.93399 16.3489 4.87691 16.293 4.85406L16.2354 4.84332C13.9306 4.91764 12.5622 5.32101 10.665 6.34722V16.3716C11.3851 15.9994 12.0688 15.7115 12.7861 15.5015C13.8286 15.1965 14.9113 15.0633 16.2402 15.0435L16.2979 15.0308C16.353 15.0063 16.3965 14.9483 16.3965 14.8755V5.01128ZM3.54492 14.8765C3.54492 14.9725 3.62159 15.0422 3.70117 15.0435L4.19629 15.0562C5.94062 15.1247 7.26036 15.4201 8.65918 16.0484C8.05544 15.1706 7.14706 14.436 6.17871 14.1109V14.1099C5.56757 13.9045 5.16816 13.3314 5.16797 12.6988V4.98882C4.86679 4.93786 4.60268 4.8999 4.28223 4.87457L3.72754 4.84429C3.62093 4.84079 3.54505 4.92417 3.54492 5.01226V14.8765ZM17.7266 14.8755C17.7266 15.6314 17.1607 16.2751 16.4121 16.3628L16.2598 16.3736C15.0122 16.3922 14.0555 16.5159 13.1602 16.7779C12.2629 17.0404 11.3966 17.4508 10.3369 18.0738C10.129 18.1959 9.87099 18.1958 9.66309 18.0738C7.71455 16.9283 6.31974 16.4689 4.12988 16.3853L3.68164 16.3736C2.85966 16.3614 2.21484 15.6838 2.21484 14.8765V5.01226C2.21497 4.15391 2.93263 3.4871 3.77246 3.51519L4.39844 3.54937C4.67996 3.57191 4.92258 3.60421 5.16797 3.64214V2.51031C5.16797 1.44939 6.29018 0.645615 7.31055 1.15679L7.31152 1.15582C8.78675 1.89511 10.0656 3.33006 10.5352 4.91461C12.3595 3.98907 13.8688 3.58817 16.1924 3.51324L16.3506 3.51714C17.1285 3.5741 17.7264 4.23496 17.7266 5.01128V14.8755ZM6.49805 12.6988C6.49824 12.7723 6.5442 12.8296 6.60254 12.8492L6.96289 12.9859C7.85245 13.3586 8.68125 13.9846 9.33496 14.7496V5.5816C9.08794 4.37762 8.13648 3.1566 6.95801 2.47613L6.71582 2.34527C6.67779 2.32617 6.6337 2.32502 6.58301 2.35796C6.52946 2.39279 6.49805 2.44863 6.49805 2.51031V12.6988Z"})),H1=Object.freeze(Object.defineProperty({__proto__:null,default:BF},Symbol.toStringTag,{value:"Module"}));function uXe(t){"use forget";const e=H.c(12),{composerController:n,clientThreadId:s}=t,o=J(),a=ss(),i=qs(),l=a===Ie.Tatertot;let c;e[0]!==o?(c=o.formatMessage({id:"bF9p2/",defaultMessage:"Study"}),e[0]=o,e[1]=c):c=e[1];const d=c;let u;e[2]!==s||e[3]!==n||e[4]!==l||e[5]!==i?(u=g=>{g.stopPropagation(),g.preventDefault(),i(l?null:Ie.Tatertot,{analyticsMetadata:{clientThreadId:s}}),l||Eo(Et(n))},e[2]=s,e[3]=n,e[4]=l,e[5]=i,e[6]=u):u=e[6];const m=u;let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(BF,{className:"h-[18px] w-[18px]"}),e[7]=f):f=e[7];let p;return e[8]!==m||e[9]!==l||e[10]!==d?(p=r.jsx(k3,{pressed:l,icon:f,label:d,ariaLabel:d,animatedLabel:!0,showLabel:!0,onClick:m,disabled:!1,dataTestid:"composer-button-study"}),e[8]=m,e[9]=l,e[10]=d,e[11]=p):p=e[11],p}class Tv extends El()(()=>({files:[]})){addFile(e){this.setState(n=>B(w({},n),{files:[...n.files,e]}))}updateFile(e,n){this.setState(s=>B(w({},s),{files:s.files.map(o=>o.fileSpec.id===e?w(w({},o),n):o)}))}removeFile(e){this.setState(n=>B(w({},n),{files:n.files.filter(s=>s.fileSpec.id!==e)}))}reset(){this.setState(()=>({files:[]}))}}ne(Tv,"selectFiles",e=>e.files),ne(Tv,"selectFile",(e,n)=>e.files.find(s=>s.fileSpec.id===n));const d4=j(()=>I(()=>import("./o9hljbbpo7aqoo2o.js").then(t=>t._),__vite__mapDeps([373,1])),{loading:t=>L(t)});function W1({isFirstParty:t,gizmoId:e,src:n,alt:s,className:o,showLoading:a,simple:i}){const l=G(),c=Tl(l,e),[d,u]=_.useState(!1),[m,f]=_.useState(!0);if(d||!n){const g=t||c;return i?g?r.jsx(iy,{className:o,"aria-label":""}):r.jsx(d4,{className:o,"aria-label":""}):r.jsx("div",{className:o,children:r.jsx("div",{className:"gizmo-shadow-stroke bg-token-main-surface-primary text-token-text-primary relative flex h-full items-center justify-center rounded-full",children:r.jsx(Xe.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1,transition:{duration:.1}},children:g?r.jsx(iy,{className:"h-2/3 w-2/3"}):r.jsx(d4,{className:"h-2/3 w-2/3 text-gray-400"})})})})}const p=r.jsx("img",{src:n,className:"bg-token-tertiary h-full w-full",alt:s!=null?s:"GPT Icon",width:80,height:80,onError:()=>u(!0),onLoad:()=>f(!1)});return i?r.jsx("div",{className:W("overflow-hidden rounded-full",a&&m&&"animate-pulse",o),children:p}):r.jsx("div",{className:o,children:r.jsx("div",{className:W("gizmo-shadow-stroke overflow-hidden rounded-full",a&&m&&"animate-pulse"),children:p})})}function FTe({gizmoId:t,className:e}){var s,o;const{data:n}=Pa(t);return r.jsx(W1,{src:n==null?void 0:n.gizmo.display.profile_picture_url,gizmoId:t,isFirstParty:(o=(s=n==null?void 0:n.gizmo.tags)==null?void 0:s.includes(qp.FirstParty))!=null?o:!1,className:e})}const mXe={id:"PromptTextarea.integratedVoiceModeListeningPlaceholder",defaultMessage:"Listening",description:"Placeholder text reflecting voice mode is listening in the prompt text area when voice mode is active"},fXe={id:"SplashScreenV2.integratedVoiceModeHeadline",defaultMessage:"Start talking",description:"Headline override message for integrated voice mode"},pXe={id:"SplashScreenV2.integratedVoiceModeHeadline.connecting",defaultMessage:"Connecting to voice",description:"Headline override message for integrated voice mode"};function _c(t){return Et(t).state.doc.textContent}var tl=(t=>(t.FeedbackOnCard="pulse-feedback-on-card",t.FeedbackConversation="pulse-feedback-conversation",t.FeedbackPreview="pulse-feedback-preview",t))(tl||{});const UF={type:"pulse-feedback-preview"},VF={activeCardId:null};class BTe{constructor(){ne(this,"autoSendCompletion");ne(this,"shouldAutoSendCompletion$",Qe(!1));ne(this,"populatePrompt$",Qe(void 0));ne(this,"isFeedbackModalOpen$",Qe(!1));ne(this,"feedbackModalState$",Qe(UF));ne(this,"isCardModalOpen$",Qe(!1));ne(this,"cardModalState$",Qe(VF))}}const Nr=xs(()=>new BTe),as={recentPulse:["recent-pulse"],pulseCard:t=>["pulse-card",t],pulseEntrypoint:["pulse-entrypoint"]};function UTe(t,e){t.setQueryData(as.pulseCard(e.id),e)}function gXe(t,e,n){t.setQueryData(as.pulseCard(e),s=>B(w({},s),{conversation_id:n})),t.setQueryData(as.recentPulse,s=>{const o=s.items.map(a=>U2(a)&&a.id===e?B(w({},a),{conversation_id:n}):a);return B(w({},s),{items:o})})}const GF=t=>Object.keys(t).length===0,z1=In(t=>Em(t,()=>io({queryKey:as.recentPulse,queryFn:async()=>{const e=await pe.safeGet("/feed/mixed");return GF(e)?null:(e.items.filter(U2).forEach(n=>{UTe(Qo(t),n)}),e)}}),{enabled$:()=>B2(t)})),D3=In(t=>Em(t,()=>io({queryKey:as.pulseEntrypoint,queryFn:async()=>{const e=await pe.safeGet("/feed/entrypoint");return GF(e)?null:e}}),{enabled$:()=>Gte(t)})),hXe=In(t=>It(()=>{var e,n;return(n=(e=z1(t).data)==null?void 0:e.feedback)==null?void 0:n.feedback_conversation_id})),_Xe=xs(t=>EA(t,{mutationFn:async()=>await pe.safePost("/feed/feedback/conversation/delete"),onSuccess:()=>{Qo(t).invalidateQueries({queryKey:as.recentPulse})}})),$F=t=>{"use forget";const e=H.c(11),n=G();let s;e[0]!==t?(s=as.pulseCard(t),e[0]=t,e[1]=s):s=e[1];let o;e[2]!==t?(o=async()=>{if(!t)throw new Error("Card ID is required");return await pe.safeGet("/feed/card/{card_id}",{parameters:{path:{card_id:t}}})},e[2]=t,e[3]=o):o=e[3];let a;e[4]!==t||e[5]!==n?(a=F2(n)&&!!t,e[4]=t,e[5]=n,e[6]=a):a=e[6];let i;return e[7]!==s||e[8]!==o||e[9]!==a?(i={queryKey:s,queryFn:o,enabled:a},e[7]=s,e[8]=o,e[9]=a,e[10]=i):i=e[10],lt(i)},VTe=t=>{"use forget";const e=H.c(12),n=xt();let s;e[0]!==t?(s=async c=>c==="remove"?await pe.safeDelete("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}}}):await pe.safePost("/feed/card/{card_id}/reaction",{parameters:{path:{card_id:t}},requestBody:{emoji:c}}),e[0]=t,e[1]=s):s=e[1];let o,a,i;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:as.pulseCard(t)});const d=n.getQueryData(as.pulseCard(t));return d&&n.setQueryData(as.pulseCard(t),B(w({},d),{reaction:c})),{previousCard:d}},a=(c,d,u)=>{u!=null&&u.previousCard&&n.setQueryData(as.pulseCard(t),u.previousCard)},i=(c,d,u)=>{const{emoji:m}=c,{previousCard:f}=u;n.setQueryData(as.pulseCard(t),B(w({},f),{reaction:m}))},e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:s,onMutate:o,onError:a,onSuccess:i},e[7]=s,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],Bt(l)},GTe=t=>{"use forget";const e=H.c(12),n=xt();let s;e[0]!==t?(s=async c=>c==="save"?await pe.safePut("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}):await pe.safeDelete("/feed/card/{card_id}/save",{parameters:{path:{card_id:t}}}),e[0]=t,e[1]=s):s=e[1];let o,a,i;e[2]!==t||e[3]!==n?(o=async c=>{await n.cancelQueries({queryKey:as.pulseCard(t)});const d=n.getQueryData(as.pulseCard(t));return d&&n.setQueryData(as.pulseCard(t),B(w({},d),{is_saved:c==="save"})),{previousCard:d}},a=(c,d,u)=>{u!=null&&u.previousCard&&n.setQueryData(as.pulseCard(t),u.previousCard)},i=(c,d,u)=>{const{saved:m}=c,{previousCard:f}=u;n.setQueryData(as.pulseCard(t),B(w({},f),{is_saved:m}))},e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i):(o=e[4],a=e[5],i=e[6]);let l;return e[7]!==s||e[8]!==o||e[9]!==a||e[10]!==i?(l={mutationFn:s,onMutate:o,onError:a,onSuccess:i},e[7]=s,e[8]=o,e[9]=a,e[10]=i,e[11]=l):l=e[11],Bt(l)},xXe=(t,e)=>{"use forget";const n=H.c(3);let s;return n[0]!==t||n[1]!==e?(s={mutationFn:async()=>await pe.safePost("/feed/interactions",{requestBody:{events:[{type:"proactive_connectors_declined",connector_ids:t,item_id:e,timestamp:new Date().toISOString()}]}})},n[0]=t,n[1]=e,n[2]=s):s=n[2],Bt(s)};function yXe(t){"use forget";const e=H.c(8),n=G();let s;e[0]!==n?(s=Nr(n),e[0]=n,e[1]=s):s=e[1];const o=s,{setTargetedContent:a}=lf();let i,l;e[2]!==t||e[3]!==n||e[4]!==o||e[5]!==a?(i=()=>jl(()=>{var u;if(!o.isFeedbackModalOpen$())return;const c=o.populatePrompt$();let d;e:switch(c==null?void 0:c.type){case"surveyReply":{d=$Te(c.userMessage,c.targetedReply);break e}case"cardReply":{d=HTe(Qo(n).getQueryData(as.pulseCard(c.cardId)));break e}default:d={userMessage:null,targetedReply:null}}bo(Et(t),(u=d.userMessage)!=null?u:""),setTimeout(()=>{var m;a((m=d.targetedReply)!=null?m:void 0)},0)}),l=[n,o,t,a],e[2]=t,e[3]=n,e[4]=o,e[5]=a,e[6]=i,e[7]=l):(i=e[6],l=e[7]),_.useEffect(i,l)}const $Te=(t,e)=>({userMessage:t,targetedReply:e?{type:"text",label:e,isFocusedViewContent:!1,createNewCompletionParams:n=>{var o;if(!e)return n;const s=Mh(e);return B(w({},n),{promptMessage:Gd(n.promptMessage,{metadata:{targeted_reply:e}}),appendMessages:[...(o=n.appendMessages)!=null?o:[],s]})}}:null}),HTe=t=>({userMessage:null,targetedReply:t!=null&&t.title?{type:"text",label:t.title,isFocusedViewContent:!1,createNewCompletionParams:e=>t.title?B(w({},e),{extraStreamParams:B(w({},e.extraStreamParams),{pulseCompletionParams:{feedback_card_id:t.id,type:"feedback-conversation"}}),promptMessage:Gd(e.promptMessage,{metadata:{targeted_reply:t.title}})}):e}:null});function WTe(t,e,n){return t.get(e,n)}function Ec({globalOverride:t,layer:e,condition:n,paramName:s,defaultValue:o}){const a=_.useRef(n);return En(()=>{a.current=n},[n]),_.useCallback(i=>!a.current||a.current()?t!==void 0&&!(i!=null&&i.skipOverride)?t:(i!=null&&i.override&&!i.skipOverride&&Oe.addError(new Error("override is not allowed in production")),WTe(e,s,o)):o,[e,s,o,t])}function HF(){const t=G(),{isUnauthenticated:e,isLoading:n}=Un(),s=Ve(t,"3434623093"),o=e&&!n;return{getShowUpsellReason:Ec({layer:s,condition:()=>o,paramName:"with-reason-upsell",defaultValue:!1}),getUpsellLabelType:Ec({layer:s,condition:()=>o,paramName:"labels",defaultValue:void 0}),getShowVoiceUpsell:Ec({layer:s,condition:()=>o,paramName:"with-voice-upsell",defaultValue:!1}),getUpsellShowsAttach:Ec({layer:s,condition:()=>o,paramName:"with-attach-upsell",defaultValue:!1})}}const zTe=Rm(()=>{let t=u4;function e(o){t=o}function n(){e(u4)}function s(o){return B(w({},t),{dictationEdited:qTe(t,o)})}return{setData:e,resetData:n,getData:s}}),u4={usedDictation:!1,dictationOriginalText:null,dictationAssetPointer:null,dictationAssetTTL:null,dictationAssetFormat:null};function qTe(t,e){return t.usedDictation&&t.dictationOriginalText!=null&&!e.includes(t.dictationOriginalText)}const F3=Rm(()=>{const t=Qe(!1),e=Qe(void 0);return{isWhisperActive$:t,waveformData$:e}});function YTe(t){return io({queryKey:["shared-prompt",t],queryFn:()=>pe.safeGet("/templated_prompts/{prompt_id}/subscribed",{parameters:{path:{prompt_id:t!=null?t:""}}}),enabled:!!t})}const ZTe=j(()=>I(()=>Promise.resolve().then(()=>VUe),void 0).then(t=>t.PromptSharingModal)),vXe=(t,e,n,s)=>{"use forget";const o=H.c(10);let a;o[0]!==e?(a=YTe(e),o[0]=e,o[1]=a):a=o[1];const{data:i,isError:l}=lt(a),c=J();let d,u;o[2]!==t||o[3]!==i||o[4]!==c||o[5]!==l||o[6]!==n||o[7]!==s?(d=()=>{l&&(fz(t).danger(c.formatMessage({id:"tDSvzy",defaultMessage:"Prompt not found, please verify you are in the right workspace"})),n()),i!=null&&gt(t,ZTe,{prompt:i,mode:"sharee",onClose:n,onTryIt:s})},u=[t,i,n,s,l,c],o[2]=t,o[3]=i,o[4]=c,o[5]=l,o[6]=n,o[7]=s,o[8]=d,o[9]=u):(d=o[8],u=o[9]),_.useEffect(d,u)},KTe=(t,e,n=!1)=>t.role===Ze.Root?!1:t.role===Ze.System||t.role===Ze.Developer||e.every(s=>{var o,a;return((o=s.metadata)==null?void 0:o.is_visually_hidden_from_conversation)&&!((a=s.metadata)!=null&&a.targeted_reply_label)})?n:!0,bXe=(t,e)=>t.length===1&&t[0].author.name==="n7jupd.metadata"&&!e,WF=t=>t.some(e=>{var s,o;if((s=e.metadata)!=null&&s.is_visually_hidden_from_conversation&&!((o=e.metadata)!=null&&o.targeted_reply_label)||e.author.role===Ze.Tool||e.author.role===Ze.System||e.recipient!=="all")return!1;const n=e.content;return(n.content_type===dt.Text||n.content_type===dt.MultimodalText)&&n.parts.some(a=>typeof a=="string"&&a.length>0)});function SXe(t,e,n){return!n&&t.role!==Ze.User&&WF(t.messages)&&t.messages.some(s=>{var i,l;const o=!!((l=(i=s.metadata)==null?void 0:i.content_references)!=null&&l.some(c=>c.type==="file"||c.type==="file_navlist")),a=e&&QTe(s);return o||a})}function CXe(t,e,n){return!e&&t.role!==Ze.User&&WF(t.messages)&&t.messages.some(s=>{var o,a;return!!((a=(o=s.metadata)==null?void 0:o.content_references)!=null&&a.some(i=>i.type==="file"&&i.medical_file_reference!=null||n&&i.type==="grouped_webpages"))})}function QTe(t){return B3(t)&&t.content.result.length>0&&t.content.result.trim()!=="Visible: 0% - 100%"}function B3(t){return t.author.role===Ze.Tool&&t.author.name==="file_search"&&t.content.content_type===dt.TetherBrowsingDisplay}function wXe(t){return t.startsWith("ks--")}const kXe=/^\[L\d+\] (.+)$/,MXe=/"(text|description|content|snippet)":\s*\"(.*)\"/;function JTe(t,e){var m;const{systemHints:n}=Ko(),s=G(),o=ut(s),a=ue(()=>wn(ht(s,e))),[i,l]=Ue(e,f=>[f==null?void 0:f.mode,f==null?void 0:f.startedWithByoMcp]),c=Es(),d=ue(()=>wm(s)),u=(m=o==null?void 0:o.isWorkspaceAccount())!=null?m:!1;return _.useMemo(()=>{if(!n)return!0;const f=n.find(p=>p.systemHint===t);return f!=null&&kR({systemHint:f,modelConfig:a,conversationMode:i,isTemporaryChat:c,isDeveloperMode:d,isWorkspaceTenant:u,startedWithByoMcp:l})},[n,t,a,i,c,d,u,l])}const XTe="https://help.openai.com/en/articles/11752874-chatgpt-agent#h_beedf96566",eEe="composer_system_hint",$a={segment:{shown:"Agent Nux Modal Shown",continueClicked:"Agent Nux Modal Continue Clicked",dismissed:"Agent Nux Modal Dismissed"},statsig:{shown:"chatgpt_agent_nux_modal_shown",continueClicked:"chatgpt_agent_nux_modal_continue_clicked",dismissed:"chatgpt_agent_nux_modal_dismissed"},datadog:{shown:"agent_nux_modal_shown",continueClicked:"agent_nux_modal_continue_clicked",dismissed:"agent_nux_modal_dismissed"}},xc={title:r.jsx(P,{id:"jFh1/1",defaultMessage:"Welcome to agent mode"}),description:r.jsx(P,{id:"RJdktl",defaultMessage:"Let ChatGPT handle complex tasks from start to finish, from finding the perfect product to creating spreadsheets."}),privacy:r.jsx(P,{id:"AgLzPZ",defaultMessage:"Agent mode uses a remote browser and takes screenshots. You can take control anytime. Agent mode has privacy risks and is important to monitor. <learnMoreLink>Learn more</learnMoreLink>",values:{learnMoreLink:t=>r.jsx("a",{href:XTe,target:"_blank",rel:"noopener noreferrer",className:"cursor-pointer underline",children:t})}}),buttonText:r.jsx(P,{id:"RW8OC0",defaultMessage:"Get started"})},zF=()=>{const t=G(),{eligible:e,isLoading:n}=$e(Ye.hasSeenn7jupdNux),s=cs(t),o=xe(t,"3014776572"),a=JTe(is,pz);return!o||!a||s?"hide":n?"loading":e?"show":"hide"},tEe=t=>{"use forget";const e=H.c(38),{onClose:n,clientThreadId:s,source:o}=t,a=o===void 0?eEe:o,i=G(),{markAsViewed:l}=$e(Ye.hasSeenn7jupdNux);let c,d;if(e[0]!==i){const D=ds(i,"2302071098");c=D.get("videoUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.mp4"),d=D.get("posterUrl","https://persistent.oaistatic.com/deep-research/nuxx.070152025.jpg"),e[0]=i,e[1]=c,e[2]=d}else c=e[1],d=e[2];const u=d,[m,f]=_.useState(!1);let p;e[3]!==s||e[4]!==a?(p={client_thread_id:s,source:a},e[3]=s,e[4]=a,e[5]=p):p=e[5];const g=p;let h;e[6]!==g?(h=()=>{U.logEventWithStatsig($a.segment.shown,$a.statsig.shown,g),Oe.addAction($a.datadog.shown,g)},e[6]=g,e[7]=h):h=e[7];let x;e[8]!==g||e[9]!==s||e[10]!==a?(x=[g,s,a],e[8]=g,e[9]=s,e[10]=a,e[11]=x):x=e[11],_.useEffect(h,x);let y;e[12]!==g||e[13]!==l||e[14]!==n?(y=()=>{U.logEventWithStatsig($a.segment.dismissed,$a.statsig.dismissed,g),Oe.addAction($a.datadog.dismissed,g),l(),n()},e[12]=g,e[13]=l,e[14]=n,e[15]=y):y=e[15];const b=y;let v;e[16]!==g||e[17]!==l||e[18]!==n?(v=()=>{U.logEventWithStatsig($a.segment.continueClicked,$a.statsig.continueClicked,g),Oe.addAction($a.datadog.continueClicked,g),l(),n()},e[16]=g,e[17]=l,e[18]=n,e[19]=v):v=e[19];const S=v;let C;e[20]!==u||e[21]!==m?(C=!m&&r.jsx("img",{src:u,alt:"",className:"pointer-events-none absolute inset-0 h-full w-full object-cover object-bottom transition-opacity duration-300"}),e[20]=u,e[21]=m,e[22]=C):C=e[22];let k;e[23]===Symbol.for("react.memo_cache_sentinel")?(k=()=>f(!0),e[23]=k):k=e[23];let M;e[24]!==c?(M=r.jsx("video",{src:c,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"pointer-events-none h-full w-full object-cover object-bottom",onLoadedData:k}),e[24]=c,e[25]=M):M=e[25];let T;e[26]!==M||e[27]!==C?(T=r.jsxs("div",{className:"relative aspect-16/9 w-full",children:[C,M]}),e[26]=M,e[27]=C,e[28]=T):T=e[28];let E,A,N;e[29]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx("div",{className:"text-xl font-medium",children:xc.title}),A=r.jsx("div",{className:"text-token-text-secondary",children:xc.description}),N=r.jsx("div",{className:"text-token-text-secondary text-xs",children:xc.privacy}),e[29]=E,e[30]=A,e[31]=N):(E=e[29],A=e[30],N=e[31]);let R;e[32]!==S?(R=r.jsxs("div",{className:"flex flex-col gap-4 px-8 pt-6 pb-8 text-center",children:[E,A,N,r.jsx("div",{className:"mt-4 flex w-full justify-center gap-3",children:r.jsx("div",{className:"mx-auto flex w-fit max-w-full min-w-[260px] justify-center gap-3",children:r.jsx(he,{color:"primary",onClick:S,className:"min-w-0 flex-1",children:xc.buttonText})})})]}),e[32]=S,e[33]=R):R=e[33];let O;return e[34]!==b||e[35]!==T||e[36]!==R?(O=r.jsxs(Pt,{testId:"modal-agent-nux",isOpen:!0,noPadding:!0,onClose:b,showCloseButton:!0,size:"custom",type:"success",className:"max-w-md",title:xc.title,visuallyHiddenHeader:!0,children:[T,R]}),e[34]=b,e[35]=T,e[36]=R,e[37]=O):O=e[37],O},nEe=Object.freeze(Object.defineProperty({__proto__:null,AgentNuxModal:tEe,agentModeWelcomeCopy:xc,useAgentNuxModalState:zF},Symbol.toStringTag,{value:"Module"}));var sEe=(t=>(t.Gizmo="gizmo",t.App="app",t))(sEe||{});function TXe(t){return typeof t=="object"&&t!=null&&"command"in t}function EXe(t){"use forget";const e=H.c(11),{command:n,isHighlighted:s,onHighlight:o,onClick:a}=t;let i;e[0]!==n.title?(i=r.jsx("span",{className:"break-all",children:n.title}),e[0]=n.title,e[1]=i):i=e[1];let l;return e[2]!==n.disabled||e[3]!==n.icon||e[4]!==n.secondary||e[5]!==n.trailing||e[6]!==s||e[7]!==a||e[8]!==o||e[9]!==i?(l=r.jsx(Hb,{as:"div",hasManagedFocus:!0,disabled:n.disabled,highlighted:s,icon:n.icon,secondary:n.secondary,trailing:n.trailing,onPointerMove:o,onClick:a,children:i}),e[2]=n.disabled,e[3]=n.icon,e[4]=n.secondary,e[5]=n.trailing,e[6]=s,e[7]=a,e[8]=o,e[9]=i,e[10]=l):l=e[10],l}function AXe(t){var e,n;return{targets:[t.command,...(e=t.aliases)!=null?e:[],...(n=t.regexMatches)!=null?n:[],t.secondary?"".concat(t.title," ").concat(t.secondary):t.title],weight:t.matchWeight}}class oEe{constructor(e,n){ne(this,"store",[]);this.compare=e,this.maxSize=n}push(e){const n=this.store;n.length<this.maxSize?(n.push(e),aEe(this.store,this.compare)):this.compare(e,n[0])>0&&(n[0]=e,m4(this.store,this.compare))}pop(){const e=this.store,n=e[0],s=e.pop();return e.length>0&&(e[0]=s,m4(this.store,this.compare)),n}toArray(e){const n=this.store.length,s=new Array(n);for(let o=n-1;o>=0;o--){const a=this.pop();s[o]=e?e(a):a}return s}}function aEe(t,e){let n=t.length-1;for(;n>0;){const s=Math.floor((n-1)/2);if(e(t[s],t[n])<=0)break;[t[s],t[n]]=[t[n],t[s]],n=s}}function m4(t,e){let n=0;for(let s=1;s<t.length;s=n*2+1){const o=s+1,a=o<t.length&&e(t[o],t[s])<0?o:s;if(e(t[n],t[a])<=0)break;[t[n],t[a]]=[t[a],t[n]],n=a}}function IXe(t,e,n,{locale:s,maxResults:o=50}={}){const a=e.toLocaleLowerCase();if(!a)return t;const i=new oEe((l,c)=>l.score-c.score,o);for(let l=0;l<t.length;l++){const{targets:c,weight:d=1}=n(t[l]);let u=0;for(let m=0;m<c.length;m++){const f=c[m];if(f){const p=f.toLowerCase(),g=rEe(p,a,s);g>u&&(u=g)}}u>0&&i.push({value:t[l],score:u*d})}return i.toArray(l=>l.value)}function rEe(t,e,n){if(e.length===0||e.length>t.length||!t.includes(e[0])||e.length>1&&!t.includes(e[e.length-1]))return 0;const s=[];for(let c=0,d=0;c<t.length&&d<e.length;c++)t.charCodeAt(c)===e.charCodeAt(d)&&(s.push(c),d++);if(s.length!==e.length)return 0;for(let c=s.length-2;c>=0;c--){const d=s[c+1]-1;s[c]<d&&t.charCodeAt(d)===e.charCodeAt(c)&&(s[c]=d)}const o=s[0];let a=0,i=0,l=f4(t,s[0],n)?1:0;for(let c=1;c<s.length;c++){const d=s[c]-s[c-1];d===1?a++:(i+=d-1,l+=f4(t,s[c],n)?1:0)}return iEe*s.length+lEe*a+cEe*(o===0?1:0)+dEe*l+uEe*i+mEe*o}const iEe=5,lEe=10,cEe=5,dEe=15,uEe=-5,mEe=-.2;function f4(t,e,n){var s;if(typeof Intl.Segmenter=="function"){const o=new Intl.Segmenter(n,{granularity:"word"}).segment(t);if(typeof o.containing=="function"){const a=o.containing(e);if(!a)return!1;const i=(s=a.segment)==null?void 0:s[e-a.index-1];return a.isWordLike===!0&&(a.index===e||i==="_")}}return!1}var fEe=gz();const jXe=Wn(fEe);function PXe({children:t,className:e,showBackground:n}){return r.jsxs("div",{className:"relative",children:[t,n&&r.jsx(Xe.div,{initial:{scale:0},animate:{scale:1},transition:{stiffness:260,damping:20},className:W("pointer-events-none absolute inset-0 rounded-full",e)})]})}function pEe({shortName:t,includeAction:e,entry:n,onClick:s}){_.useEffect(()=>{if(!open||n.type!==Ft.GDRIVE)return;const d=n.access_token;d&&UD(d)},[n]);const o=hz(n.type),a=J(),i=!t&&(n.type===Ft.O365_BUSINESS||n.type===Ft.O365_PERSONAL)?zp(Ft.O365,a,t):zp(n.type,a,t),l=t?void 0:n.type===Ft.O365_BUSINESS?a.formatMessage(g4.workSchool):n.type===Ft.O365_PERSONAL?a.formatMessage(g4.personal):void 0,c=!t&&n.type===Ft.O365_BUSINESS?!0:!!l;return r.jsx(K.Item,{onClick:s,icon:o,label:e?n.access_token?r.jsx(P,B(w({},p4.uploadFromMessage),{values:{connectorName:i}})):r.jsx(P,B(w({},p4.signinWithMessage),{values:{connectorName:i}})):i,secondary:c?[l,n.type===Ft.O365_BUSINESS?a.formatMessage(_z.includesSharePoint):void 0].filter(Boolean).join(" - "):null},n.id)}const p4=be({signinWithMessage:{id:"ContextConnectorPickerDropdownItem.signInWithMessage",defaultMessage:"Connect {connectorName}"},uploadFromMessage:{id:"ContextConnectorPickerDropdownItem.uploadWithMessage",defaultMessage:"Add from {connectorName}"}}),g4=be({personal:{id:"ContextConnectorPickerDropdownItem.o365Personal",defaultMessage:"Personal"},workSchool:{id:"ContextConnectorPickerDropdownItem.o365WorkSchool",defaultMessage:"Work/School"}}),gEe=j(()=>I(()=>import("./bh6hb7ypq0ifozyx.js").then(t=>t._),__vite__mapDeps([347,1])),{loading:t=>L(t)});function hEe({isLoadingConnectors:t,connectorConfig:e,onConnectorClick:n}){const s=!kl(),a=_.useMemo(()=>Array.from(e.values()),[e]).filter(l=>l.access_token!=null),i=bi();return a.length===0&&(!t||i)?null:r.jsxs(K.Sub,{onOpenChange:l=>{l&&U.logEventWithStatsig("Composer: Open Context Connector Picker","chatgpt_composer_open_context_connector_picker")},children:[r.jsx(K.SubMenuTrigger,{icon:gEe,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(P,w({},_Ee.addFromApps))})}),r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{className:W(s&&"-translate-x-1/2 -translate-y-full"),children:[t&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),r.jsx(Ev,{includeAction:!1,shortName:!1,connectorConfig:e,onConnectorClick:n})]})})]})}const Ev=({shortName:t,includeAction:e,connectorConfig:n,onConnectorClick:s})=>{const a=_.useMemo(()=>Array.from(n.values()),[n]).filter(i=>i.access_token!=null);return r.jsx(r.Fragment,{children:a.map(i=>r.jsx(pEe,{shortName:t,includeAction:e,entry:i,onClick:()=>s(i)},i.id))})},_Ee=be({addFromApps:{id:"ContextConnectorPicker.addFromApps",defaultMessage:"Add from apps"}});function qF(){var i;const t=G(),e=vn(un),n=Fh(t),s=ue(it.sidebarUrlTrayOpen$),o=ue(it.context$),a=s&&!!o;return e&&n?r.jsx(K.Item,{icon:r.jsx(Lg,{base64:o==null?void 0:o.base64favicon,title:(i=o==null?void 0:o.title)!=null?i:o==null?void 0:o.url,className:"h-4 w-4 rounded-[4px]"}),disabled:a,onClick:()=>{var l;(l=k9())==null||l.triggerProductEvent("addTabContext"),L3(!0)},children:r.jsx("span",{children:r.jsx(P,{id:"+gYTJ0",defaultMessage:"Attach tab"})})},"tab_context"):null}const xEe=j(()=>I(()=>import("./dkwbd01msodbgagg.js").then(t=>t._),__vite__mapDeps([374,1])),{loading:t=>L(t)}),yEe=j(()=>I(()=>import("./nyiv7m02dbt9yeja.js").then(t=>t._),__vite__mapDeps([345,1])),{loading:t=>L(t)}),vEe={"image/jpeg":".jpg","image/png":".png"};function bEe({entry:t}){return r.jsx(K.Item,{onClick:t.onClick,icon:t.icon,children:r.jsx(P,w({},t.label))},t.key)}function SEe(t){const e=J(),n=Ut(),s=Ci();return _.useCallback(async a=>{const i="".concat(new Date().toISOString().replaceAll(":","-")).concat(vEe[a.mimeType]);ni.uploadFile(s,new File([Fg(a.data)],i,{type:a.mimeType}),t,e,n,void 0,void 0,vo.Multimodal)},[s,e,n,t])}function YF(t){const e=SEe(t),n=CEe(e),s=wEe(e);return{desktopConnectors:_.useMemo(()=>Ho?[n,s].filter(a=>a!==void 0):[],[n,s])}}function CEe(t){return _.useMemo(()=>({key:"takeScreenshot",label:ZF.takeScreenshot,icon:xEe,onClick:async()=>{const e=await xz();e&&(U.logEvent("Sidetron: Screenshot Attached"),await t(e))}}),[t])}function wEe(t){return _.useMemo(()=>({key:"takePhoto",label:ZF.takePhoto,icon:yEe,onClick:async()=>{const e=await yz();e&&(U.logEvent("Sidetron: Photo Attached"),await t(e))}}),[t])}const ZF=be({takeScreenshot:{id:"ContextConnectorPickerDropdownItem.takeScreenshotDesktop",defaultMessage:"Take screenshot"},takePhoto:{id:"ContextConnectorPickerDropdownItem.takePhotoDesktop",defaultMessage:"Take photo"}});function NXe({clientThreadId:t,icon:e,modelSupportedImageMimeTypes:n,isLoadingConnectors:s,connectorConfig:o,onSelectConnector:a,openFileDialog:i,isDisabled:l=!1,highlightTooltip:c=!1,showLabel:d,disabledReason:u,currentModelName:m}){const f=J(),p=M9(),[g,h]=_.useState(!1),x=_.useRef(!1),y=G(),b=vn(un),v=p!=null||u===mi.RateLimitReached,S=N=>{h(N),N&&(U.logEventWithStatsig("Composer: Open Plus Menu","chatgpt_web_composer_plus_menu_open",v?{file_upload_disabled_reason:"rate_limit"}:void 0),x.current=!0,setTimeout(()=>{x.current=!1},250))},{desktopConnectors:C}=YF(n),k=n.length>0,M=r.jsxs(r.Fragment,{children:[b&&r.jsx(qF,{}),r.jsx(hEe,{isLoadingConnectors:s,connectorConfig:o,onConnectorClick:a}),r.jsx(KF,{modelSupportedImageMimeTypes:n}),r.jsx(bD,{openFileDialog:i,showMenuForNoAuth:!1,modelSupportsImages:k,clientThreadId:t})]}),T=l||p!=null,E=_.useRef(!1),A=r.jsxs(K.Root,{open:g,onOpenChange:S,children:[r.jsx(_D,{clientThreadId:t,rateLimitPopup:p,highlightTooltip:c,disabled:T,disabledReason:u,currentModelName:m,children:r.jsxs(K.BasicTrigger,{className:"composer-btn",disabled:T,id:"upload-file-btn","aria-label":V1(y,f,T,u,m),children:[e,d&&r.jsx(twe,{})]})}),r.jsx(K.Portal,{children:r.jsx(K.Content,{alignOffset:-8,onEscapeKeyDown:()=>{E.current=!0},side:"bottom",size:"small",onCloseAutoFocus:N=>{E.current||N.preventDefault()},className:"radix-side-bottom:flex-col-reverse flex flex-col",children:M})})]});return r.jsx("div",{className:"flex flex-col",children:A})}const KF=({modelSupportedImageMimeTypes:t})=>bi()?r.jsx(kEe,{modelSupportedImageMimeTypes:t}):null,kEe=({modelSupportedImageMimeTypes:t})=>{const{desktopConnectors:e}=YF(t);return r.jsx(r.Fragment,{children:e.map(n=>r.jsx(bEe,{entry:n},n.key))})},MEe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M4.33496 12.5V7.5C4.33496 7.13273 4.63273 6.83496 5 6.83496C5.36727 6.83496 5.66504 7.13273 5.66504 7.5V12.5C5.66504 14.8942 7.60585 16.835 10 16.835C12.3942 16.835 14.335 14.8942 14.335 12.5V5.83301C14.3348 4.35959 13.1404 3.16522 11.667 3.16504C10.1934 3.16504 8.99822 4.35948 8.99805 5.83301V12.5C8.99805 13.0532 9.44679 13.502 10 13.502C10.5532 13.502 11.002 13.0532 11.002 12.5V7.5C11.002 7.13273 11.2997 6.83496 11.667 6.83496C12.0341 6.83514 12.332 7.13284 12.332 7.5V12.5C12.332 13.7877 11.2877 14.832 10 14.832C8.71226 14.832 7.66797 13.7877 7.66797 12.5V5.83301C7.66814 3.62494 9.45888 1.83496 11.667 1.83496C13.875 1.83514 15.6649 3.62505 15.665 5.83301V12.5C15.665 15.6287 13.1287 18.165 10 18.165C6.87131 18.165 4.33496 15.6287 4.33496 12.5Z"})),TEe=Object.freeze(Object.defineProperty({__proto__:null,default:MEe},Symbol.toStringTag,{value:"Module"})),EEe=j(()=>I(()=>import("./dkwbd01msodbgagg.js").then(t=>t._),__vite__mapDeps([374,1])),{loading:t=>L(t)});function AEe({modelSupportedImageMimeTypes:t}){const e=vn(un),n=Ci(),s=Ut(),o=J();return e?r.jsx(K.Item,{icon:EEe,onClick:async()=>{const a=await I(()=>import("./ippis36bhy56w9ig.js"),__vite__mapDeps([375,29,1,30])).then(i=>i.getTabScreenshot());if(a)try{const i=atob(a.base64image),l=i.length,c=new Uint8Array(l);for(let u=0;u<l;u++)c[u]=i.charCodeAt(u);const d=new File([c],a.filename,{type:a.mimetype});ni.uploadFile(n,d,t,o,s,void 0,void 0,vo.Multimodal)}catch(i){}},children:r.jsx(P,{id:"HiFPUD",defaultMessage:"Attach screenshot"})},"attach_screenshot"):null}function QF(t,e){return new Intl.DateTimeFormat(t.locale,{year:"numeric",month:"short",day:"numeric"}).format(e)}function IEe(t,e){return new Intl.DateTimeFormat(t.locale,{month:"short",day:"numeric"}).format(e)}const jEe=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)});function PEe({onAttachLibraryFile:t,attachedFileIds:e}){const n=J(),[s,o]=_.useState(null),[a,i]=_.useState(!1),[l,c]=_.useState(null),d=_.useRef(!1),u=_.useMemo(()=>e==null?new Set:e instanceof Set?e:new Set(e),[e]),m=async p=>{i(!0),c(null);try{const h=await pe.safePost("/files/library",{requestBody:{limit:5,cursor:p}});o(x=>x?[...x,...h.items]:h.items)}catch(g){c(g.message)}finally{i(!1)}};function f(p){const g=p.lastIndexOf(".");return g>0?p.slice(0,g):p}return _.useEffect(()=>{d.current&&s==null&&!a&&m(null)},[d.current]),r.jsxs(K.Sub,{onOpenChange:p=>{d.current=p,p&&s==null&&!a&&m(null)},children:[r.jsx(K.SubMenuTrigger,{icon:jEe,children:r.jsx("div",{className:"line-clamp-1 text-ellipsis",children:r.jsx(P,w({},h4.addFromLibrary))})}),r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{children:[s==null&&a&&r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{}),r.jsx(K.Shimmer,{})]}),l?r.jsx(K.Label,{children:r.jsx(P,{id:"fRTSh4",defaultMessage:"Failed to load library files"})}):(s==null?void 0:s.length)===0&&!a&&r.jsx(K.Label,{children:r.jsx(P,{id:"CalUoF",defaultMessage:"No results"})}),s==null?void 0:s.map(p=>r.jsx(K.Item,{className:"gap-2",size:"large",secondary:p.state==="failed"?"Failed":void 0,disabled:p.state!=="ready"||u.has(p.file_id),onClick:()=>{p.state!=="ready"||u.has(p.file_id)||(t==null||t({id:p.file_id,name:p.file_name,mimeType:p.mime_type,libraryFileId:p.id}),U.logEventWithStatsig("chatgpt_files_user_action","chatgpt_library_file_attached_to_conversation",{mimeType:p.mime_type}))},children:r.jsx(_R,{fileName:f(p.file_name),icon:r.jsx(HS,{filename:p.file_name,contextConnectorInfo:void 0}),fileNameClass:"text-token-text-primary text-sm leading-[18px] font-normal tracking-[-0.3px]",customFileDescription:r.jsx("span",{className:"text-token-text-tertiary text-xs leading-4 font-normal tracking-[-0.1px]",children:r.jsx(P,B(w({},h4.fileDesc),{values:{category:vz(p.library_file_category),sep:"",date:IEe(n,new Date(p.file_upload_time))}}))})})},p.id))]})})]})}const h4=be({addFromLibrary:{id:"hAUk/T",defaultMessage:"Recent files"},fileDesc:{id:"ContextConnectorLibraryFileDropdownItem.fileDesc",defaultMessage:"{category} {sep} {date}"}}),NEe=j(()=>I(()=>Promise.resolve().then(()=>tB),void 0),{loading:t=>L(t)}),REe=t=>{"use forget";var oe,se,de,ie;const e=H.c(52),{conversation:n,layoutMode:s,selectedModelId:o,onSelectModelId:a}=t,i=G();let l;e[0]!==n?(l=()=>ea(n),e[0]=n,e[1]=l):l=e[1];const c=ue(l);let d;e[2]!==n?(d=()=>bz(n),e[2]=n,e[3]=d):d=e[3];const u=ue(d);let m;e[4]!==c.categories?(m=(oe=c.categories)!=null?oe:[],e[4]=c.categories,e[5]=m):m=e[5];const f=m;let p;e[6]!==c.categories||e[7]!==c.models||e[8]!==o?(p=(ie=(se=c.categories.find(ae=>{var ce;return ae.defaultModel===o||((ce=ae.supportedModels)==null?void 0:ce.includes(o))}))==null?void 0:se.label)!=null?ie:(de=c.models.get(o))==null?void 0:de.title,e[6]=c.categories,e[7]=c.models,e[8]=o,e[9]=p):p=e[9];const g=p;let h;e[10]!==f?(h=f.filter(LEe),e[10]=f,e[11]=h):h=e[11];const x=h;let y;e[12]!==f?(y=Md(f.filter(OEe),"subcategory"),e[12]=f,e[13]=y):y=e[13];const b=y;let v;e[14]!==x||e[15]!==b?(v={primaryGroup:x,subGroups:b},e[14]=x,e[15]=b,e[16]=v):v=e[16];const{primaryGroup:S,subGroups:C}=v;if(!PA(i))return null;let M;e[17]!==i?(M=xe(i,"3315017149"),e[17]=i,e[18]=M):M=e[18];const T=M,E=3+(T?9:0)+12*S.length+2+9+3;let A;e[19]===Symbol.for("react.memo_cache_sentinel")?(A=r.jsx(P,{id:"RylQRg",defaultMessage:"Model"}),e[19]=A):A=e[19];let N;e[20]!==g?(N=r.jsx("span",{className:"max-w-40 truncate",children:g}),e[20]=g,e[21]=N):N=e[21];const R=!u;let O;e[22]!==N||e[23]!==R?(O=r.jsx(K.SubMenuTrigger,{icon:NEe,label:A,trailing:N,disabled:R}),e[22]=N,e[23]=R,e[24]=O):O=e[24];const D=s==="center"?"start":"end",F="min(var(--radix-dropdown-menu-content-available-height),calc(var(--spacing)*".concat(E,"))");let V;e[25]!==F?(V={maxHeight:F},e[25]=F,e[26]=V):V=e[26];let z;e[27]!==T||e[28]!==c.title?(z=T&&r.jsx(K.Label,{children:c.title}),e[27]=T,e[28]=c.title,e[29]=z):z=e[29];let $;if(e[30]!==S||e[31]!==o){let ae;e[33]!==o?(ae=ce=>r.jsx(_4,{category:ce,isSelected:o===ce.defaultModel},ce.defaultModel),e[33]=o,e[34]=ae):ae=e[34],$=S.map(ae),e[30]=S,e[31]=o,e[32]=$}else $=e[32];let Y;e[35]!==o||e[36]!==C?(Y=Object.entries(C).map(ae=>{const[ce,ye]=ae;return r.jsxs(K.Group,{children:[r.jsx(K.Label,{children:ce}),ye.map(fe=>r.jsx(_4,{category:fe,isSelected:o===fe.defaultModel},fe.defaultModel))]},ce)}),e[35]=o,e[36]=C,e[37]=Y):Y=e[37];let Z;e[38]!==a||e[39]!==o||e[40]!==z||e[41]!==$||e[42]!==Y?(Z=r.jsxs(K.RadioGroup,{value:o,onValueChange:a,children:[z,$,Y]}),e[38]=a,e[39]=o,e[40]=z,e[41]=$,e[42]=Y,e[43]=Z):Z=e[43];let Q;e[44]===Symbol.for("react.memo_cache_sentinel")?(Q=!1,e[44]=Q):Q=e[44];let q;e[45]!==D||e[46]!==V||e[47]!==Z?(q=r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{align:D,style:V,children:[Z,Q]})}),e[45]=D,e[46]=V,e[47]=Z,e[48]=q):q=e[48];let X;return e[49]!==O||e[50]!==q?(X=r.jsxs(K.Sub,{children:[O,q]},"models-menu"),e[49]=O,e[50]=q,e[51]=X):X=e[51],X},_4=t=>{"use forget";const e=H.c(12),{category:n,isSelected:s}=t,o=J();let a;e[0]!==n.isAlpha||e[1]!==n.isBeta||e[2]!==n.modelBadge||e[3]!==o?(a=n.isBeta?o.formatMessage({id:"Mu+7v6",defaultMessage:"Beta"}):n.isAlpha?o.formatMessage({id:"chDss2",defaultMessage:"Alpha"}):n.modelBadge,e[0]=n.isAlpha,e[1]=n.isBeta,e[2]=n.modelBadge,e[3]=o,e[4]=a):a=e[4];const i=a,l=s?"selected":"default";let c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=r.jsx(K.RadioItemCheck,{}),e[5]=c):c=e[5];let d;return e[6]!==i||e[7]!==n.defaultModel||e[8]!==n.description||e[9]!==n.label||e[10]!==l?(d=r.jsx(K.RadioItem,{value:n.defaultModel,color:l,trailing:c,label:n.label,secondary:n.description,badge:i,disabled:!1}),e[6]=i,e[7]=n.defaultModel,e[8]=n.description,e[9]=n.label,e[10]=l,e[11]=d):d=e[11],d};function LEe(t){return t.subcategory==null}function OEe(t){return t.subcategory!=null}const DEe=j(()=>I(()=>import("./dt74bs5wyg16icnh.js").then(t=>t._),__vite__mapDeps([254,1])),{loading:t=>L(t)}),FEe=[];function RXe(t){"use forget";const e=H.c(49),{composerController:n,activeSystemHintType:s,systemHints:o,clientThreadId:a,disabled:i}=t,l=i===void 0?!1:i,c=qs(),d=h9(),u=G();let m;e[0]!==a||e[1]!==c?(m=se=>{c(se,{analyticsMetadata:{clientThreadId:a}})},e[0]=a,e[1]=c,e[2]=m):m=e[2];const f=m;let p;e[3]!==a?(p={clientThreadId:a},e[3]=a,e[4]=p):p=e[4];const g=p;let h;e[5]!==g?(h=function(){U.logEventWithStatsig("Composer System Hint Button Hovered","composer_system_hint_button_hovered",g)},e[5]=g,e[6]=h):h=e[6];const x=h;let y;e[7]!==g||e[8]!==u?(y=function(){Ve(u,"1092897457").get("is_tatertot_enabled",!0),U.logEventWithStatsig("Composer System Hint Button Clicked","composer_system_hint_button_clicked",g)},e[7]=g,e[8]=u,e[9]=y):y=e[9];const b=y;let v;e[10]!==n?(v=()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{Eo(Et(n))})})},e[10]=n,e[11]=v):v=e[11];const S=v,C=J(),[k,M]=_.useState(!1),T=s!=null,E=!T,A=_.useRef(!1),N=_.useRef(!1);let R;e[12]!==b||e[13]!==S?(R=se=>{M(se),se?b==null||b():requestAnimationFrame(()=>{requestAnimationFrame(()=>{A.current&&(A.current=!1,S())})})},e[12]=b,e[13]=S,e[14]=R):R=e[14];let O;e[15]!==k?(O=a2(k),e[15]=k,e[16]=O):O=e[16];let D;e[17]!==C?(D=C.formatMessage({id:"mJYhKI",defaultMessage:"Choose tool"}),e[17]=C,e[18]=D):D=e[18];let F;e[19]===Symbol.for("react.memo_cache_sentinel")?(F=r.jsx(DEe,{"aria-label":"",className:"icon"}),e[19]=F):F=e[19];let V;e[20]!==E?(V=E&&r.jsx("span",{className:"ms-1.5 me-0.5",children:r.jsx(P,{id:"mNL7WC",defaultMessage:"Tools"})}),e[20]=E,e[21]=V):V=e[21];let z;e[22]!==l||e[23]!==x||e[24]!==V||e[25]!==O||e[26]!==D?(z=r.jsxs(T9,{className:"composer-btn px-2","data-opened":O,"aria-label":D,id:"system-hint-button",disabled:l,onPointerOver:x,onClick:UEe,onFocusCapture:BEe,children:[F,V]}),e[22]=l,e[23]=x,e[24]=V,e[25]=O,e[26]=D,e[27]=z):z=e[27];let $;e[28]!==l||e[29]!==T||e[30]!==z?($=r.jsx(GEe,{disabled:l,hintSelected:T,children:z}),e[28]=l,e[29]=T,e[30]=z,e[31]=$):$=e[31];let Y,Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(Y=()=>{N.current=!0},Z=se=>{var de;if(!N.current||A.current){se.preventDefault();return}(de=document.querySelector("#system-hint-button"))==null||de.focus()},e[32]=Y,e[33]=Z):(Y=e[32],Z=e[33]);let Q;e[34]!==E?(Q=!E&&r.jsx(K.Label,{children:r.jsx(P,{id:"KSn3Jr",defaultMessage:"Tools"})}),e[34]=E,e[35]=Q):Q=e[35];let q;e[36]!==d||e[37]!==s||e[38]!==f||e[39]!==o?(q=r.jsx(jp,{systemHints:o,activeConnectorSystemHintTypes:d,selectedHintType:s,onSelectHintType:f}),e[36]=d,e[37]=s,e[38]=f,e[39]=o,e[40]=q):q=e[40];let X;e[41]!==Q||e[42]!==q?(X=r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"auto",alignOffset:-7,onEscapeKeyDown:Y,onCloseAutoFocus:Z,children:[Q,q]})}),e[41]=Q,e[42]=q,e[43]=X):X=e[43];let oe;return e[44]!==k||e[45]!==$||e[46]!==X||e[47]!==R?(oe=r.jsxs(K.Root,{open:k,onOpenChange:R,children:[$,X]}),e[44]=k,e[45]=$,e[46]=X,e[47]=R,e[48]=oe):oe=e[48],oe}function BEe(t){t.stopPropagation()}function UEe(t){t.preventDefault()}const jp=({systemHints:t,activeConnectorSystemHintTypes:e,selectedHintType:n,onSelectHintType:s})=>r.jsx(K.RadioGroup,{value:n!=null?n:void 0,onValueChange:o=>{s(o===n?null:o)},children:t?r.jsx(r.Fragment,{children:t.map(o=>r.jsx(VEe,{hint:o,isSelected:n===o.systemHint||Yb(n)&&(e==null?void 0:e.has(o.systemHint))},o.systemHint))}):r.jsxs(r.Fragment,{children:[r.jsx(K.Shimmer,{size:"short"}),r.jsx(K.Shimmer,{size:"short"})]})}),VEe=t=>{"use forget";var v;const e=H.c(24),{hint:n,isSelected:s}=t,o=J(),a=NTe(n.systemHint);let i;e[0]!==n.systemHint?(i=FEe.includes(n.systemHint),e[0]=n.systemHint,e[1]=i):i=e[1];const l=i,{badgeText:c,isDangerous:d,hideFromInitialSelection:u}=n;if(u&&!s)return null;let m;e[2]!==c||e[3]!==o||e[4]!==l?(m=l?o.formatMessage({id:"composer.skills.new",defaultMessage:"New"}):c!=null?c:void 0,e[2]=c,e[3]=o,e[4]=l,e[5]=m):m=e[5];const f=m,p=s?"selected":"default";let g;e[6]!==n?(g=r.jsx(il,{hint:n,isNextToLabel:!0}),e[6]=n,e[7]=g):g=e[7];let h;e[8]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(K.RadioItemCheck,{}),e[8]=h):h=e[8];const x=(v=n.actionLabel)!=null?v:n.name;let y;e[9]!==f||e[10]!==n.systemHint||e[11]!==d||e[12]!==a.blockedLabel||e[13]!==a.isBlocked||e[14]!==p||e[15]!==g||e[16]!==x?(y=r.jsx(K.RadioItem,{value:n.systemHint,disabled:a.isBlocked,color:p,icon:g,trailing:h,label:x,secondary:a.blockedLabel,badge:f,isDangerous:d}),e[9]=f,e[10]=n.systemHint,e[11]=d,e[12]=a.blockedLabel,e[13]=a.isBlocked,e[14]=p,e[15]=g,e[16]=x,e[17]=y):y=e[17];const b=y;if(a.remainingLabel){const S=a.isBlocked?"left":"center",C=a.isBlocked?void 0:null;let k;return e[18]!==b||e[19]!==a.remainingLabel||e[20]!==a.remainingLabelSecondary||e[21]!==S||e[22]!==C?(k=r.jsx(kt,{side:"right",labelTextAlign:S,label:a.remainingLabel,secondaryLabel:a.remainingLabelSecondary,contentClassName:"cant-hover:hidden",triggerAs:C,children:b}),e[18]=b,e[19]=a.remainingLabel,e[20]=a.remainingLabelSecondary,e[21]=S,e[22]=C,e[23]=k):k=e[23],k}return b},GEe=({disabled:t,children:e,hintSelected:n})=>{const s=$e(Ye.hasSeenComposerSystemHintButtonTooltip),o=$Ee(),a=!t&&!o.isLoading&&o.eligible,i=!t&&!s.isLoading&&s.eligible,l=_.useMemo(()=>{if(a)return{announcementKey:Ye.hasSeenConnectorsSourcesPillTooltip,title:r.jsx(P,{id:"qgvuHg",defaultMessage:"Search connected apps"}),onDismiss:o.markAsViewed,description:r.jsx(P,{id:"bJE6uS",defaultMessage:"Get insights across Google Drive, SharePoint, Dropbox, and more."})};if(i)return{announcementKey:Ye.hasSeenComposerSystemHintButtonTooltip,title:r.jsx(P,{id:"tTydhk",defaultMessage:"All your tools, in one handy place"}),onDismiss:s.markAsViewed,description:r.jsx(P,{id:"Kgb5fv",defaultMessage:"Create an image, research report, and more."})}},[i,s.markAsViewed,a,o.markAsViewed]);if(!n&&!a)return e;if(l)return r.jsx(Vd,B(w({show:!0,side:"bottom",theme:"bright",dismissOnOutsideClick:!0,badge:"new",sideOffset:0,className:"xs:max-w-sm! max-w-2xs!"},l),{children:e}));let c;return t?c=r.jsx(P,{id:"uw9x80",defaultMessage:"Tools unavailable"}):c=r.jsx(P,{id:"Yr1zf1",defaultMessage:"Choose tool"}),r.jsx(kt,{side:"bottom",label:c,children:e})},$Ee=()=>{const{systemHints:t}=Ko(),{data:e,isLoading:n}=th(u=>u==null?void 0:u.announcements),{eligible:s,markAsViewed:o,markAsViewedDontInvalidateCache:a,isLoading:i}=$e(Ye.hasSeenConnectorsSourcesPillTooltip),l=e==null?void 0:e[Ye.hasSeenConnectorsNuxModal],c=!!(l&&pb(new Date,new Date(l))>=1);return{eligible:s&&c&&t!=null&&t.some(u=>u.systemHint===Ie.Slurm),isLoading:n||i,markAsViewed:o,markAsViewedDontInvalidateCache:a}},HEe=j(()=>I(()=>Promise.resolve().then(()=>nEe),void 0).then(t=>t.AgentNuxModal));function LXe(t){"use forget";var SC;const e=H.c(135),{conversation:n,composerController:s,composerDisabled:o,layoutMode:a,shouldUseBottomSheet:i,openFileDialog:l,modelSupportedImageMimeTypes:c,isFileUploadEnabled:d,fileUploadDisabledReason:u,currentModelId:m,currentModelConfig:f,selectModelId:p,connectorConfig:g,onSelectConnector:h,availableSystemHints:x,activeConnectorSystemHintTypes:y,activeSystemHintType:b}=t,v=G(),S=J();let C;e[0]!==v?(C=E9(v),e[0]=v,e[1]=C):C=e[1];const k=C,M=M9(),T=M!=null,E=c.length>0,A=Ci(),N=Bh(qEe),R=Il();let O;e[2]!==s?(O=F3(s),e[2]=s,e[3]=O):O=e[3];const D=ue(O.isWhisperActive$);let F;e[4]!==s?(F=PF(s),e[4]=s,e[5]=F):F=e[5];const{shouldHighlight$:V}=F;let z;e[6]!==V?(z=()=>V(),e[6]=V,e[7]=z):z=e[7];const $=ue(z),Y=zF();let Z;e[8]!==Y||e[9]!==n.id||e[10]!==v?(Z=()=>{Y==="show"&&gt(v,HEe,{clientThreadId:n.id,source:"composer_system_hint"})},e[8]=Y,e[9]=n.id,e[10]=v,e[11]=Z):Z=e[11];const Q=Z,q=qs(),X=g9();let oe;e[12]!==X||e[13]!==n.id||e[14]!==Q||e[15]!==q?(oe=js=>{js!==null&&(Sz(js)?X(js,{analyticsMetadata:{clientThreadId:n.id}}):q(js,{analyticsMetadata:{clientThreadId:n.id}}),js===Ie.Agent&&Q())},e[12]=X,e[13]=n.id,e[14]=Q,e[15]=q,e[16]=oe):oe=e[16];const se=oe;let de;e[17]!==v?(de=GO(v,!0),e[17]=v,e[18]=de):de=e[18];const{showRecentFilesDropdown:ie}=de;let ae;e[19]!==v?(ae=pt(v),e[19]=v,e[20]=ae):ae=e[20];const ce=ae;let ye;e[21]!==v?(ye=()=>Id(v),e[21]=v,e[22]=ye):ye=e[22];const fe=ue(ye),{isCombinedList:Ce,fullyCollapsedToolMenu:ee,showSlashHint:te,showModelsInPlusMenu:le}=fe,re=ee&&!i,ve=le&&!i,_e=x==null||x.length>0,we=!Ce&&!i&&_e&&((SC=x==null?void 0:x.length)!=null?SC:0)>5,De=Array.from(g.values()).some(zEe);let ge;if(e[23]!==v||e[24]!==R||e[25]!==i){const js=qo(v).getLayer("3081064739");ge=R||i&&js.get("no-explicit-add-from-social",!1),e[23]=v,e[24]=R,e[25]=i,e[26]=ge}else ge=e[26];const Ne=ge;let je;e[27]!==g||e[28]!==De||e[29]!==Ne||e[30]!==d||e[31]!==ce||e[32]!==h||e[33]!==i?(je=ce&&d&&i&&!Ne&&De?r.jsx(K.Group,{children:r.jsx(Ev,{includeAction:!0,shortName:!0,connectorConfig:g,onConnectorClick:h})},"connect-apps"):null,e[27]=g,e[28]=De,e[29]=Ne,e[30]=d,e[31]=ce,e[32]=h,e[33]=i,e[34]=je):je=e[34];const Te=je;let Fe;e[35]!==y||e[36]!==b||e[37]!==x||e[38]!==Te||e[39]!==re||e[40]!==_e||e[41]!==ce||e[42]!==a||e[43]!==se?(Fe=re&&ce&&(_e||Te)?r.jsxs(DCe,{layoutMode:a,children:[r.jsx(K.Group,{children:r.jsx(jp,{systemHints:x,activeConnectorSystemHintTypes:y,selectedHintType:b,onSelectHintType:se})}),Te]},"tools-menu"):null,e[35]=y,e[36]=b,e[37]=x,e[38]=Te,e[39]=re,e[40]=_e,e[41]=ce,e[42]=a,e[43]=se,e[44]=Fe):Fe=e[44];let Ge;e[45]!==n||e[46]!==m||e[47]!==a||e[48]!==p||e[49]!==ve?(Ge=ve?r.jsx(REe,{conversation:n,layoutMode:a,selectedModelId:m!=null?m:"",onSelectModelId:js=>{p(js,"plus menu")}},"models-menu"):null,e[45]=n,e[46]=m,e[47]=a,e[48]=p,e[49]=ve,e[50]=Ge):Ge=e[50];let Se;e[51]!==Fe||e[52]!==Ge?(Se=[Fe,Ge].filter(WEe),e[51]=Fe,e[52]=Ge,e[53]=Se):Se=e[53];const Re=Se;let tt;e[54]!==x||e[55]!==we?(tt=x&&(we?x.slice(0,4):x),e[54]=x,e[55]=we,e[56]=tt):tt=e[56];const Ke=tt;let nt;e[57]!==R||e[58]!==Re?(nt=Re.length>0&&!R?r.jsx(K.Group,{children:Re},"submenus"):null,e[57]=R,e[58]=Re,e[59]=nt):nt=e[59];const ot=nt,Lt=i?"sheet":void 0,vt=!d,Ht=f==null?void 0:f.title;let nn;e[60]!==n.id||e[61]!==u||e[62]!==E||e[63]!==l||e[64]!==M||e[65]!==Lt||e[66]!==vt||e[67]!==Ht?(nn=r.jsx(bD,{openFileDialog:l,modelSupportsImages:E,mode:Lt,showMenuForNoAuth:!1,isDisabled:vt,disabledReason:u,currentModelName:Ht,rateLimitInfo:M,clientThreadId:n.id}),e[60]=n.id,e[61]=u,e[62]=E,e[63]=l,e[64]=M,e[65]=Lt,e[66]=vt,e[67]=Ht,e[68]=nn):nn=e[68];let sn;e[69]!==N||e[70]!==g||e[71]!==A||e[72]!==d||e[73]!==ce||e[74]!==c||e[75]!==E||e[76]!==h||e[77]!==i||e[78]!==ie?(sn=ce&&r.jsxs(r.Fragment,{children:[d&&E&&r.jsx(KF,{modelSupportedImageMimeTypes:c}),!i&&d&&r.jsx(Ev,{includeAction:!0,shortName:!0,connectorConfig:g,onConnectorClick:h}),ie&&r.jsx(PEe,{attachedFileIds:N,onAttachLibraryFile:js=>ar.attachLibraryFile(A,js)}),r.jsx(qF,{}),r.jsx(AEe,{modelSupportedImageMimeTypes:c})]}),e[69]=N,e[70]=g,e[71]=A,e[72]=d,e[73]=ce,e[74]=c,e[75]=E,e[76]=h,e[77]=i,e[78]=ie,e[79]=sn):sn=e[79];let on;e[80]!==nn||e[81]!==sn?(on=r.jsxs(K.Group,{className:"content-sheet:content-sheet-inset-section",children:[nn,sn]},"add-files"),e[80]=nn,e[81]=sn,e[82]=on):on=e[82];const kn=Ce&&ot;let an;e[83]!==y||e[84]!==b||e[85]!==x||e[86]!==Ke||e[87]!==Te||e[88]!==re||e[89]!==_e||e[90]!==R||e[91]!==ce||e[92]!==a||e[93]!==se||e[94]!==we?(an=(!re||!ce)&&_e&&!R&&r.jsxs(K.Group,{children:[r.jsx(jp,{systemHints:Ke,activeConnectorSystemHintTypes:y,selectedHintType:b,onSelectHintType:se}),we&&r.jsxs(OCe,{layoutMode:a,children:[r.jsx(K.Group,{children:r.jsx(jp,{systemHints:x==null?void 0:x.slice(4),activeConnectorSystemHintTypes:y,selectedHintType:b,onSelectHintType:se})}),Te]})]},"system-hints"),e[83]=y,e[84]=b,e[85]=x,e[86]=Ke,e[87]=Te,e[88]=re,e[89]=_e,e[90]=R,e[91]=ce,e[92]=a,e[93]=se,e[94]=we,e[95]=an):an=e[95];const jn=(!re||!ce)&&!R&&Te&&(!we||!_e||i)&&Te,Pn=!Ce&&ot;let es;e[96]!==ce?(es=!ce&&r.jsx(BCe,{},"upsell"),e[96]=ce,e[97]=es):es=e[97];let Ot;e[98]!==S||e[99]!==R||e[100]!==te?(Ot=te&&!R&&r.jsx(K.Group,{children:r.jsx("div",{className:"text-token-text-tertiary p-2 text-center text-sm",children:S.formatMessage({id:"composer.plusMenu.typeSlashForQuickAccess",defaultMessage:"Type '/' for quick access"})})},"slash-hint"),e[98]=S,e[99]=R,e[100]=te,e[101]=Ot):Ot=e[101];let At;e[102]!==on||e[103]!==kn||e[104]!==an||e[105]!==jn||e[106]!==Pn||e[107]!==es||e[108]!==Ot?(At=r.jsxs(r.Fragment,{children:[on,kn,an,jn,Pn,es,Ot]}),e[102]=on,e[103]=kn,e[104]=an,e[105]=jn,e[106]=Pn,e[107]=es,e[108]=Ot,e[109]=At):At=e[109];const Ls=At,Da=i?"sheet":"dropdown";let Fa;e[110]!==s||e[111]!==k.composer?(Fa=js=>{k.composer.autofocusDisabled$()||(js.preventDefault(),Eo(Et(s)))},e[110]=s,e[111]=k.composer,e[112]=Fa):Fa=e[112];let xn;e[113]!==S||e[114]!==ce?(xn=ce?S.formatMessage({id:"composer.plusMenu.label",defaultMessage:"Add files and more"}):S.formatMessage({id:"composer.plusMenu.label.loggedOut",defaultMessage:"Add photos and more"}),e[113]=S,e[114]=ce,e[115]=xn):xn=e[115];let Dr;e[116]===Symbol.for("react.memo_cache_sentinel")?(Dr=r.jsx("kbd",{className:"bg-token-bg-tertiary -me-1 inline-grid aspect-square w-4 items-center justify-center rounded-sm text-[11px]",children:r.jsx("span",{children:"/"})}),e[116]=Dr):Dr=e[116];const l_=d?l:void 0;let Wl;e[117]!==v?(Wl=js=>{if(Ih())return;const CC=N3(v);CC.isKeyboardOpen()&&(js.preventDefault(),CC.closeKeyboard(()=>{df(v).isSheetOpen$.set(!0)}))},e[117]=v,e[118]=Wl):Wl=e[118];let zl;e[119]!==D||e[120]!==l_||e[121]!==Wl?(zl=r.jsx(RCe,{onDoubleClick:l_,onPointerDown:Wl,disabled:D}),e[119]=D,e[120]=l_,e[121]=Wl,e[122]=zl):zl=e[122];let ql;e[123]!==o||e[124]!==n.id||e[125]!==$||e[126]!==xn||e[127]!==zl?(ql=r.jsx(_D,{disabled:o,clientThreadId:n.id,rateLimitPopup:null,highlightTooltip:$,label:xn,secondaryLabel:Dr,children:zl}),e[123]=o,e[124]=n.id,e[125]=$,e[126]=xn,e[127]=zl,e[128]=ql):ql=e[128];let _f;return e[129]!==T||e[130]!==Ls||e[131]!==Da||e[132]!==Fa||e[133]!==ql?(_f=r.jsx(PCe,{mode:Da,onCloseAutoFocus:Fa,items:Ls,fileUploadRateLimited:T,children:ql}),e[129]=T,e[130]=Ls,e[131]=Da,e[132]=Fa,e[133]=ql,e[134]=_f):_f=e[134],_f}function WEe(t){return t!=null}function zEe(t){return t.access_token!=null}function qEe(t){return t.files.map(ZEe).filter(YEe)}function YEe(t){return t!=null}function ZEe(t){return t.fileId}const KEe=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),QEe=j(()=>I(()=>import("./f87olchknhsp1yyk.js").then(t=>t._),__vite__mapDeps([135,1])),{loading:t=>L(t)}),JF=_.createContext({isScrolling:!1});function JEe(){"use forget";return _.useContext(JF)}function XEe({items:t,getItemKey:e,onRenderItem:n,itemClassName:s,loadingItemClassName:o,getItemStyle:a,onShown:i,onClick:l,className:c,arrowClassName:d,numLoadingItems:u}){"use no forget";const m=G(),f=ue(()=>un(m)),[p,g]=_.useState(!1),[h,x]=_.useState(!1),[y,b]=_.useState(!1),v=_.useRef(null),S=_.useRef(void 0),C=_.useRef(!1),k=_.useRef(!1),M=_.useRef(0),T=8,E=_.useRef([]),A=_.useCallback(Z=>{Z.button!==0&&Z.button!==1||(C.current=!0,k.current=!1,M.current=Z.clientX)},[]),N=_.useCallback(Z=>{const Q=v.current;if(!Q||!C.current&&!Q.hasPointerCapture(Z.pointerId))return;if(!p)if(Math.abs(Z.clientX-M.current)>=T){g(!0),k.current=!0;try{Z.currentTarget.setPointerCapture(Z.pointerId)}catch(oe){}}else return;const q=Z.movementX||0;q!==0&&(Q.scrollLeft-=q)},[p,k,M,T]),R=_.useCallback(Z=>{const Q=v.current;if(Q){try{Q.hasPointerCapture(Z.pointerId)&&Q.releasePointerCapture(Z.pointerId)}catch(q){}C.current=!1,g(!1)}},[]),O=_.useCallback(Z=>{k.current&&(Z.preventDefault(),Z.stopPropagation(),k.current=!1)},[]),D=_.useCallback(Z=>{var Q;(Q=v.current)!=null&&Q.hasPointerCapture(Z.pointerId)||R(Z)},[R]),F=_.useCallback(Z=>{Z.preventDefault(),Z.stopPropagation()},[]);En(()=>{if(!v.current)return;const Z=v.current,Q=()=>{x(!0),clearTimeout(S.current),S.current=setTimeout(()=>x(!1),150)};return Z.addEventListener("scroll",Q,{passive:!0}),()=>{Z.removeEventListener("scroll",Q),clearTimeout(S.current),x(!1)}},[v]),En(()=>Ul({axis:"width",target:v.current,onChange:({width:Z})=>{v.current&&b(v.current.scrollWidth>Z)}}),[t]);const V=!v.current||v.current.scrollLeft===0,z=!!v.current&&v.current.scrollLeft+v.current.clientWidth>=v.current.scrollWidth,$=_.useCallback(()=>{if(!v.current)return;const Z=v.current;Z.scrollTo({left:Z.scrollLeft+Z.clientWidth,behavior:"smooth"})},[]),Y=_.useCallback(()=>{if(!v.current)return;const Z=v.current;Z.scrollTo({left:Z.scrollLeft-Z.clientWidth,behavior:"smooth"})},[]);return r.jsxs("div",{className:"group relative -my-3 overflow-hidden py-3",children:[r.jsx("div",{ref:v,onPointerDown:y?A:void 0,onPointerMove:y?N:void 0,onPointerUp:y?R:void 0,onPointerCancel:y?R:void 0,onLostPointerCapture:y?R:void 0,onPointerLeave:y?D:void 0,onDragStartCapture:y?F:void 0,onClickCapture:y?O:void 0,onAuxClickCapture:y?O:void 0,className:W("relative w-full touch-none","no-scrollbar touch-pan-y overflow-x-auto overflow-y-hidden overscroll-x-contain",y&&(p?"cursor-grabbing select-none":"cursor-grab"),f?"scroll-px-[var(--thread-content-margin)] px-[var(--thread-content-margin)]":"scroll-px-6 px-6"),children:r.jsx("div",{className:"relative w-max",children:r.jsx(JF.Provider,{value:{isScrolling:p||h},children:r.jsxs("ul",{className:W("not-prose relative flex list-none items-stretch gap-2 px-0",c),children:[t.map((Z,Q)=>r.jsx("li",{ref:q=>{E.current[Q]=q},className:W("not-prose border-token-border-default border-thin hover:border-token-border-heavy relative overflow-hidden rounded-lg",s),style:a==null?void 0:a(Z),children:r.jsx(e6e,{item:Z,onRenderItem:n,onShown:i?()=>i(Z,Q):void 0,onClick:l?()=>l(Z,Q):void 0,containerRef:v})},e(Z))),SL(u!=null?u:0,Z=>r.jsx("li",{className:W("not-prose border-token-border-default border-thin hover:border-token-border-heavy relative overflow-hidden rounded-lg",s,o),children:r.jsx("div",{className:"loading-results-shimmer h-full w-full"})},"loading-".concat(Z)))]})})})}),y&&r.jsxs(r.Fragment,{children:[r.jsx(x4,{side:"left",onClick:Y,isFullyScrolled:V,className:d}),r.jsx(x4,{side:"right",onClick:$,isFullyScrolled:z,className:d})]})]})}function e6e(t){"use forget";const e=H.c(12),{item:n,onRenderItem:s,onShown:o,onClick:a,containerRef:i}=t,l=_.useRef(null),c=_.useRef(o);let d,u;e[0]!==o?(d=()=>{c.current=o},u=[o],e[0]=o,e[1]=d,e[2]=u):(d=e[1],u=e[2]),_.useEffect(d,u);let m,f;e[3]!==i?(m=()=>{if(!l.current)return;const h=new IntersectionObserver(x=>{const[y]=x;return y.isIntersecting&&c.current&&c.current()},{root:i.current,threshold:.5});return h.observe(l.current),()=>h.disconnect()},f=[i],e[3]=i,e[4]=m,e[5]=f):(m=e[4],f=e[5]),En(m,f);let p;e[6]!==n||e[7]!==s?(p=s(n),e[6]=n,e[7]=s,e[8]=p):p=e[8];let g;return e[9]!==a||e[10]!==p?(g=r.jsx("div",{ref:l,className:"h-full w-full overflow-hidden",onClick:a,children:p}),e[9]=a,e[10]=p,e[11]=g):g=e[11],g}function x4(t){"use forget";const e=H.c(10),{side:n,onClick:s,isFullyScrolled:o,className:a}=t,i=n==="left"?"start-0 -translate-x-full rounded-e-full ps-1 pe-1.5":"end-0 translate-x-full rounded-s-full ps-1.5 pe-1",l=!o&&"group-hover:pointer-events-auto group-hover:translate-x-0 group-hover:opacity-1000";let c;e[0]!==a||e[1]!==i||e[2]!==l?(c=W("bg-token-bg-primary hover:bg-token-bg-secondary shadow-long pointer-events-none absolute top-[50%] -translate-y-1/2 py-1","transition-translate-x opacity-0 delay-100 duration-150 ease-out",i,l,a),e[0]=a,e[1]=i,e[2]=l,e[3]=c):c=e[3];let d;e[4]!==n?(d=n==="left"?r.jsx(QEe,{className:"icon-sm"}):r.jsx(KEe,{className:"icon-sm"}),e[4]=n,e[5]=d):d=e[5];let u;return e[6]!==s||e[7]!==c||e[8]!==d?(u=r.jsx("button",{onClick:s,className:c,children:d}),e[6]=s,e[7]=c,e[8]=d,e[9]=u):u=e[9],u}const t6e=({root:t=void 0,rootMargin:e="0px",threshold:n=0,onlyOnce:s=!1})=>{const[o,a]=_.useState(!1),i=_.useCallback(l=>{if(!l)return;const c=new IntersectionObserver(d=>{for(const u of d)u.isIntersecting?(a(!0),s&&l&&c.unobserve(l)):a(!1)},{root:t,rootMargin:e,threshold:n});return c.observe(l),()=>{c.unobserve(l)}},[t,e,n,s]);return[o,i]},n6e=350,s6e=150;function XF({favicon:t,heading:e,title:n,quoteHeading:s,quoteText:o,snippet:a,isContentBlocked:i,theme:l,children:c}){const[d,u]=_.useState(!1),m=_.useRef(null),f=_.useRef(null),p=_.useRef(!1),{isScrolling:g}=JEe(),h=s!=null||o!=null,[x,y]=t6e({threshold:.75}),b=_.useCallback(()=>{m.current&&clearTimeout(m.current)},[]),v=_.useCallback(()=>{f.current&&clearTimeout(f.current)},[]),S=_.useCallback(()=>{u(!1)},[]),C=_.useCallback(E=>{E.stopPropagation(),p.current=!0,v(),m.current=setTimeout(()=>{p.current&&u(!0)},n6e)},[v]),k=_.useCallback(E=>{E.stopPropagation(),p.current=!1,b(),f.current=setTimeout(()=>{S()},s6e)},[b,S]);_.useEffect(()=>{d&&v()},[d,v]),_.useEffect(()=>{g&&S()},[g,S]);const M=_.useMemo(()=>({onBlur:k,onMouseLeave:k,onMouseEnter:C,onFocus:C}),[k,C]),T=x&&d&&!g;return r.jsxs(Dl,{open:T,children:[r.jsx(br,B(w({ref:y,asChild:!0},M),{children:c})),r.jsx(Fl,{children:r.jsx(Bl,B(w({side:"top",align:"start",sideOffset:4},M),{onOpenAutoFocus:E=>E.preventDefault(),onCloseAutoFocus:E=>E.preventDefault(),className:W(Cz,l==="grey"&&"bg-token-bg-primary!","relative w-64 text-sm focus:outline-none"),collisionPadding:8,onPointerDown:E=>E.stopPropagation(),children:r.jsxs("div",{className:"rounded-xl px-3 py-1.5 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[t,r.jsx("span",{className:"text-token-text-secondary truncate text-xs",children:e})]}),i?r.jsx("div",{className:"mt-2",children:r.jsx(P,{id:"iGylAw",defaultMessage:"ChatGPT is unable to access the contents of this website."})}):r.jsxs(r.Fragment,{children:[n&&r.jsx("div",{className:"mt-2 line-clamp-2 leading-snug font-semibold text-ellipsis",children:n}),h&&r.jsxs("div",{className:"border-token-border-default mt-2 flex flex-col gap-1 border-s-2 ps-2 text-xs",children:[s&&r.jsx("div",{className:"text-token-link text-xs font-semibold",children:s}),o&&r.jsx("div",{className:"text-token-text-secondary line-clamp-2 overflow-hidden text-xs leading-snug text-ellipsis",children:o})]}),a&&r.jsx("div",{className:"mt-2 line-clamp-4 text-sm select-text",children:a})]})]})}))})]})}const o6e=j(()=>I(()=>import("./3j20em1lilnrpdcm.js").then(t=>t._),__vite__mapDeps([376,1])),{loading:t=>L(t)}),a6e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)});function OXe(){"use forget";var ce,ye,fe;const t=H.c(55),e=G(),n=ue(it.context$),s=ue(it.sidebarUrlTrayOpen$),o=Fh(e),a=J(),c=ss()===Ie.Agent||n==null?void 0:n.selection,d=i6e(c),u=d>0,m=_.useRef(null),[f,p]=_.useState(!1);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{const Ce=m.current;Ce&&p(Ce.scrollWidth>Ce.clientWidth)},t[0]=g):g=t[0];const h=n==null?void 0:n.title,x=n==null?void 0:n.url;let y;if(t[1]!==c||t[2]!==h||t[3]!==x?(y=[h,x,c],t[1]=c,t[2]=h,t[3]=x,t[4]=y):y=t[4],_.useEffect(g,y),!o||!n)return null;let b,v;if(n!=null&&n.url){let Ce;if(t[5]!==n.url){let ee;t[7]===Symbol.for("react.memo_cache_sentinel")?(ee=/^[a-zA-Z][a-zA-Z\d+\-.]*:\/\//,t[7]=ee):ee=t[7],Ce=n.url.replace(ee,""),t[5]=n.url,t[6]=Ce}else Ce=t[6];v=Ce;try{let ee;t[8]!==n.url?(ee=new URL(n.url),t[8]=n.url,t[9]=ee):ee=t[9],b=ee.host}catch(ee){}}let S;t[10]!==n.title?(S=(ce=n.title)==null?void 0:ce.trim(),t[10]=n.title,t[11]=S):S=t[11];const C=S,k=(ye=v&&v.length>0?v:n.url)!=null?ye:void 0,M=C&&C.length>0?C:k,T=!!(n!=null&&n.blocked);if(!s)return null;const A=M!=null?M:n.url;let N;t[12]!==n.base64favicon||t[13]!==A?(N=r.jsx(Lg,{base64:n.base64favicon,title:A,className:"h-4 w-4 flex-shrink-0 rounded-[4px]"}),t[12]=n.base64favicon,t[13]=A,t[14]=N):N=t[14];const R=(fe=b!=null?b:k)!=null?fe:n.url,O=M!=null?M:n.url;let D;t[15]!==u||t[16]!==d?(D=u?r.jsx(P,{id:"EwD8lK",defaultMessage:"Selected text ({count} words)",values:{count:d}}):null,t[15]=u,t[16]=d,t[17]=D):D=t[17];const F=u&&c!=null?c:null,V=T?"bg-[rgba(255,214,10,0.1)]":u?"bg-token-interactive-bg-accent-default":"bg-[rgba(0,0,0,0.03)] hover:bg-[rgba(0,0,0,0.08)] dark:bg-[rgba(255,255,255,0.05)] dark:hover:bg-[rgba(255,255,255,0.1)]";let z;t[18]!==V?(z=W("group flex h-[36px] w-fit max-w-[150px] min-w-0 cursor-default items-center gap-[6px] rounded-xl px-2 pe-3 transition-all",V),t[18]=V,t[19]=z):z=t[19];let $;t[20]!==n.base64favicon||t[21]!==n.url||t[22]!==M||t[23]!==T?($=T?r.jsx(o6e,{className:"text-token-icon-status-warning block h-4 w-4 group-hover:hidden"}):r.jsx(Lg,{base64:n.base64favicon,title:M!=null?M:n.url,className:"block h-4 w-4 rounded-[4px] group-hover:hidden"}),t[20]=n.base64favicon,t[21]=n.url,t[22]=M,t[23]=T,t[24]=$):$=t[24];let Y;t[25]!==a?(Y=a.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),t[25]=a,t[26]=Y):Y=t[26];let Z;t[27]===Symbol.for("react.memo_cache_sentinel")?(Z=r.jsx(a6e,{className:"h-4 w-4 text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]"}),t[27]=Z):Z=t[27];let Q;t[28]!==Y?(Q=r.jsx("button",{onClick:r6e,className:"absolute start-0 top-0 hidden group-hover:block","aria-label":Y,children:Z}),t[28]=Y,t[29]=Q):Q=t[29];let q;t[30]!==$||t[31]!==Q?(q=r.jsxs("div",{className:"relative h-4 w-4 flex-shrink-0",children:[$,Q]}),t[30]=$,t[31]=Q,t[32]=q):q=t[32];const X=f&&!u&&"[mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]";let oe;t[33]!==X?(oe=W("overflow-hidden text-xs whitespace-nowrap select-none",X),t[33]=X,t[34]=oe):oe=t[34];let se;t[35]!==n.url||t[36]!==M||t[37]!==u||t[38]!==T?(se=u&&!T?r.jsx(P,{id:"DaC6ra",defaultMessage:"Selected text"}):M?r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:M}):r.jsx("span",{className:"text-[rgba(0,0,0,0.6)] dark:text-[rgba(255,255,255,0.7)]",children:n.url}),t[35]=n.url,t[36]=M,t[37]=u,t[38]=T,t[39]=se):se=t[39];let de;t[40]!==oe||t[41]!==se?(de=r.jsx("span",{ref:m,className:oe,children:se}),t[40]=oe,t[41]=se,t[42]=de):de=t[42];let ie;t[43]!==z||t[44]!==q||t[45]!==de?(ie=r.jsxs("div",{className:z,children:[q,de]}),t[43]=z,t[44]=q,t[45]=de,t[46]=ie):ie=t[46];let ae;return t[47]!==T||t[48]!==F||t[49]!==ie||t[50]!==N||t[51]!==R||t[52]!==O||t[53]!==D?(ae=r.jsx("div",{className:"relative px-3 pt-3",children:r.jsx(XF,{favicon:N,heading:R,title:O,quoteHeading:D,quoteText:F,snippet:null,isContentBlocked:T,theme:"grey",children:ie})}),t[47]=T,t[48]=F,t[49]=ie,t[50]=N,t[51]=R,t[52]=O,t[53]=D,t[54]=ae):ae=t[54],ae}function r6e(){var t;(t=k9())==null||t.triggerProductEvent("removeTabContext"),L3(!1)}function i6e(t){if(!t)return 0;const e=t.trim();if(!e)return 0;if(typeof Intl.Segmenter=="function")try{const n=new Intl.Segmenter(void 0,{granularity:"word"}).segment(e);return Array.from(n).reduce((s,o)=>s+(o.isWordLike?1:0),0)}catch(n){}return e.split(/\s+/).filter(Boolean).length}const eB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.338 3.08492C15.0406 3.08955 15.7151 3.28724 16.214 3.78609C16.7128 4.28495 16.9105 4.95949 16.9151 5.66207C16.9197 6.36056 16.7358 7.13467 16.419 7.92672C16.153 8.59182 15.7832 9.291 15.3243 9.99996C15.7832 10.7089 16.153 11.4081 16.419 12.0732C16.7358 12.8652 16.9197 13.6394 16.9151 14.3379C16.9105 15.0404 16.7128 15.715 16.214 16.2138C15.7151 16.7127 15.0406 16.9104 14.338 16.915C13.6395 16.9196 12.8654 16.7357 12.0733 16.4189C11.4082 16.1528 10.709 15.783 10.0001 15.3242C9.29112 15.783 8.59194 16.1528 7.92684 16.4189C7.1348 16.7357 6.36069 16.9196 5.66219 16.915C4.95961 16.9104 4.28507 16.7127 3.78622 16.2138C3.28736 15.715 3.08967 15.0404 3.08504 14.3379C3.08049 13.6394 3.26432 12.8652 3.58114 12.0732C3.84715 11.4082 4.21616 10.7088 4.67489 9.99996C4.21616 9.29115 3.84715 8.59168 3.58114 7.92672C3.26432 7.13467 3.08049 6.36056 3.08504 5.66207C3.08967 4.95949 3.28736 4.28495 3.78622 3.78609C4.28507 3.28724 4.95961 3.08955 5.66219 3.08492C6.36069 3.08037 7.1348 3.2642 7.92684 3.58102C8.5918 3.84703 9.29127 4.21603 10.0001 4.67477C10.7089 4.21603 11.4084 3.84703 12.0733 3.58102C12.8654 3.2642 13.6395 3.08037 14.338 3.08492ZM5.5118 11.1728C5.22609 11.6559 4.99351 12.1249 4.81649 12.5673C4.53951 13.2598 4.41207 13.8575 4.41512 14.3291C4.4182 14.7967 4.54582 15.0926 4.72664 15.2734C4.90747 15.4542 5.20337 15.5818 5.67098 15.5849C6.14256 15.588 6.74026 15.4605 7.4327 15.1836C7.8751 15.0066 8.34325 14.7729 8.82625 14.4873C8.23208 14.0242 7.64066 13.5038 7.06844 12.9316C6.49588 12.359 5.97512 11.7674 5.5118 11.1728ZM14.4874 11.1728C14.0242 11.7672 13.5041 12.3592 12.9317 12.9316C12.3593 13.504 11.7673 14.024 11.1729 14.4873C11.6562 14.7731 12.1248 15.0065 12.5675 15.1836C13.2599 15.4605 13.8576 15.588 14.3292 15.5849C14.7968 15.5818 15.0927 15.4542 15.2735 15.2734C15.4544 15.0926 15.582 14.7967 15.585 14.3291C15.5881 13.8575 15.4607 13.2598 15.1837 12.5673C15.0066 12.1247 14.7732 11.6561 14.4874 11.1728ZM10.0001 6.29C9.33643 6.77801 8.66365 7.35398 8.00887 8.00875C7.3541 8.66352 6.77813 9.33631 6.29012 9.99996C6.77813 10.6636 7.3541 11.3364 8.00887 11.9912C8.66349 12.6458 9.33658 13.221 10.0001 13.7089C10.6636 13.221 11.3367 12.6458 11.9913 11.9912C12.6459 11.3366 13.2211 10.6635 13.7091 9.99996C13.2211 9.33646 12.6459 8.66337 11.9913 8.00875C11.3365 7.35398 10.6637 6.77801 10.0001 6.29ZM5.67098 4.415C5.20337 4.41808 4.90747 4.54569 4.72664 4.72652C4.54582 4.90735 4.4182 5.20325 4.41512 5.67086C4.41207 6.14244 4.53951 6.74014 4.81649 7.43258C4.99342 7.87485 5.22629 8.34327 5.5118 8.82613C5.975 8.23179 6.49608 7.64069 7.06844 7.06832C7.64081 6.49595 8.23192 5.97488 8.82625 5.51168C8.3434 5.22617 7.87497 4.9933 7.4327 4.81637C6.74026 4.53939 6.14256 4.41195 5.67098 4.415ZM14.3292 4.415C13.8576 4.41195 13.2599 4.53939 12.5675 4.81637C12.125 4.99338 11.656 5.22597 11.1729 5.51168C11.7675 5.97499 12.3592 6.49576 12.9317 7.06832C13.5039 7.64053 14.0243 8.23195 14.4874 8.82613C14.773 8.34312 15.0067 7.87498 15.1837 7.43258C15.4607 6.74014 15.5881 6.14244 15.585 5.67086C15.582 5.20325 15.4544 4.90735 15.2735 4.72652C15.0927 4.54569 14.7968 4.41808 14.3292 4.415Z",fill:"currentColor"})),tB=Object.freeze(Object.defineProperty({__proto__:null,default:eB},Symbol.toStringTag,{value:"Module"})),U3=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M12.1338 5.94433C12.3919 5.77382 12.7434 5.80202 12.9707 6.02929C13.1979 6.25656 13.2261 6.60807 13.0556 6.8662L12.9707 6.9707L8.47067 11.4707C8.21097 11.7304 7.78896 11.7304 7.52926 11.4707L3.02926 6.9707L2.9443 6.8662C2.77379 6.60807 2.80199 6.25656 3.02926 6.02929C3.25653 5.80202 3.60804 5.77382 3.86617 5.94433L3.97067 6.02929L7.99996 10.0586L12.0293 6.02929L12.1338 5.94433Z"})),Rr=Object.freeze(Object.defineProperty({__proto__:null,default:U3},Symbol.toStringTag,{value:"Module"})),Av=t=>_.createElement("svg",w({width:16,height:16,viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.1152 3.91503C11.3868 3.73594 11.756 3.7658 11.9951 4.00488C12.2341 4.24395 12.264 4.61309 12.0849 4.88476L11.9951 4.99511L8.99018 7.99999L11.9951 11.0049L12.0849 11.1152C12.264 11.3869 12.2341 11.756 11.9951 11.9951C11.756 12.2342 11.3868 12.2641 11.1152 12.085L11.0048 11.9951L7.99995 8.99023L4.99506 11.9951C4.7217 12.2685 4.2782 12.2685 4.00483 11.9951C3.73146 11.7217 3.73146 11.2782 4.00483 11.0049L7.00971 7.99999L4.00483 4.99511L3.91499 4.88476C3.73589 4.61309 3.76575 4.24395 4.00483 4.00488C4.24391 3.7658 4.61305 3.73594 4.88471 3.91503L4.99506 4.00488L7.99995 7.00976L11.0048 4.00488L11.1152 3.91503Z"})),V3=Object.freeze(Object.defineProperty({__proto__:null,default:Av},Symbol.toStringTag,{value:"Module"})),q1=t=>{"use forget";const e=H.c(41),{icon:n,removable:s,label:o,content:a,dropdownContent:i,onRemove:l,onOpenChange:c,onCloseAutoFocus:d}=t,u=J();let m;e[0]!==u||e[1]!==o?(m=u.formatMessage({id:"giCR14",defaultMessage:"{selectedMode}, click to remove"},{selectedMode:o}),e[0]=u,e[1]=o,e[2]=m):m=e[2];const f=m,p=l6e;let g;e[3]!==l?(g=T=>{const E=T.changedTouches[0];T.target===T.currentTarget&&T.currentTarget.contains(document.elementFromPoint(E.clientX,E.clientY))&&(T.preventDefault(),l==null||l(T))},e[3]=l,e[4]=g):g=e[4];let h;e[5]!==l||e[6]!==g?(h={onClick:l,onTouchStart:c6e,onTouchEnd:g},e[5]=l,e[6]=g,e[7]=h):h=e[7];const x=h;let y;e[8]!==n?(y=typeof n=="function"?r.jsx(n,{}):n,e[8]=n,e[9]=y):y=e[9];let b;e[10]!==y?(b=r.jsx("div",{className:"__composer-pill-icon",inert:!0,children:y}),e[10]=y,e[11]=b):b=e[11];const v=b,S=a!=null?a:o;let C;e[12]!==S?(C=r.jsx("span",{className:"max-w-40 truncate [[data-collapse-labels]_&]:sr-only",ref:p,children:S}),e[12]=S,e[13]=C):C=e[13];const k=C;if(i){let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx(U3,{className:"icon-sm -me-0.5 h-3.5 w-3.5",inert:!0}),e[14]=T):T=e[14];let E;e[15]!==v||e[16]!==k?(E=r.jsxs(K.BasicTrigger,{className:"__composer-pill group/pill",children:[v,k,T]}),e[15]=v,e[16]=k,e[17]=E):E=e[17];let A;e[18]!==i||e[19]!==d?(A=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",align:"start",alignOffset:-8,onCloseAutoFocus:d,children:i})}),e[18]=i,e[19]=d,e[20]=A):A=e[20];let N;e[21]!==c||e[22]!==A||e[23]!==E?(N=r.jsxs(K.Root,{modal:!1,onOpenChange:c,children:[E,A]}),e[21]=c,e[22]=A,e[23]=E,e[24]=N):N=e[24];const R=N;if(s){let O;e[25]===Symbol.for("react.memo_cache_sentinel")?(O=r.jsx(Av,{className:"icon-sm",inert:!0}),e[25]=O):O=e[25];let D;e[26]!==x||e[27]!==f?(D=r.jsx("button",B(w({type:"button",className:"__composer-pill-remove","aria-label":f},x),{children:O})),e[26]=x,e[27]=f,e[28]=D):D=e[28];let F;return e[29]!==R||e[30]!==D?(F=r.jsxs("div",{className:"__composer-pill-composite group relative",children:[D,R]}),e[29]=R,e[30]=D,e[31]=F):F=e[31],F}return R}if(s){let T;e[32]===Symbol.for("react.memo_cache_sentinel")?(T=r.jsx("div",{className:"__composer-pill-remove",inert:!0,children:r.jsx(Av,{className:"icon-sm"})}),e[32]=T):T=e[32];let E;return e[33]!==v||e[34]!==x||e[35]!==f||e[36]!==k?(E=r.jsxs("button",B(w({type:"button",className:"__composer-pill group","aria-label":f},x),{children:[v,k,T]})),e[33]=v,e[34]=x,e[35]=f,e[36]=k,e[37]=E):E=e[37],E}let M;return e[38]!==v||e[39]!==k?(M=r.jsxs("div",{className:"__composer-pill",children:[v,k]}),e[38]=v,e[39]=k,e[40]=M):M=e[40],M};function l6e(t){t!=null&&t.parentElement&&t.textContent&&t.scrollWidth>t.clientWidth&&(t.parentElement.title=t.textContent)}function c6e(t){t.preventDefault()}const DXe=t=>{"use forget";const e=H.c(7),{label:n,tooltipLabel:s,onRemoveModel:o}=t,a=s==null;let i;e[0]!==n||e[1]!==o?(i=r.jsx(q1,{icon:eB,label:n,removable:!0,onRemove:o}),e[0]=n,e[1]=o,e[2]=i):i=e[2];let l;return e[3]!==a||e[4]!==i||e[5]!==s?(l=r.jsx(kt,{label:s,disabled:a,children:i}),e[3]=a,e[4]=i,e[5]=s,e[6]=l):l=e[6],l},d6e=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),u6e=j(()=>I(()=>import("./oz2w8uv2a0ics46w.js").then(t=>t._),__vite__mapDeps([287,1])),{loading:t=>L(t)});function m6e({repoName:t,onClose:e}){const n=J();return r.jsxs(Pt,{isOpen:!0,onClose:e,shouldIgnoreClickOutside:!0,testId:"modal-github-indexing",type:"success",size:"custom",className:"max-w-[420px]",headerClassName:"pt-0 pb-0 pe-2",showCloseButton:!0,hideSeparator:!0,title:r.jsx("span",{}),children:[r.jsx("div",{className:"mt-0 mb-4 flex justify-center",children:r.jsx("div",{className:"bg-tertiary border-token-border-subtle rounded-lg border p-3",children:r.jsx(u6e,{className:"h-10 w-10"})})}),r.jsx("h2",{className:"mb-4 px-4 text-center text-xl font-semibold",children:n.formatMessage({id:"ejqREp",defaultMessage:"{repoName} is not indexed yet"},{repoName:t})}),r.jsx("p",{className:"text-token-text-secondary mb-6 px-6 text-center text-sm leading-relaxed",children:n.formatMessage({id:"KkmieM",defaultMessage:"This repository can't be accessed by ChatGPT until it's indexed by GitHub. You can trigger indexing by searching the repository's code on GitHub. After about 510 minutes, you can use it in ChatGPT."})}),r.jsxs(he,{className:"w-full",size:"large",onClick:()=>{const s="https://github.com/search?q=repo:".concat(t,"&type=code");window.open(s,"_blank"),e()},children:[n.formatMessage({id:"yUeuLL",defaultMessage:"Trigger indexing on GitHub"}),r.jsx(d6e,{className:"icon-sm ms-2 inline-block"})]})]})}const f6e=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),y4=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)}),p6e=({items:t,searchTerm:e,setSearchTerm:n,selectedItems:s,searchPlaceholder:o,handleSelectItem:a,showSelectAllRepos:i,loading:l,onEndScroll:c,maxRepos:d,contentRef:u,subContentRef:m})=>{var v;const f=wz("installations/select_target"),p=_.useRef(null),g=_.useRef(null),h=i&&(s==null?void 0:s.includes("$all_accessible_repos")),x=(v=s==null?void 0:s.filter(S=>S!=="$all_accessible_repos").length)!=null?v:0,y=d!==void 0&&x>=d,b=d===1;return _.useEffect(()=>{requestAnimationFrame(()=>{var S;(S=p.current)==null||S.focus()})},[]),_.useEffect(()=>{const S=T=>{p.current&&document.activeElement!==p.current&&(A9(T)||T.key==="Enter"||T.ctrlKey||T.metaKey||T.key.length!==1&&!I9(T)||(T.stopPropagation(),p.current.focus()))},C=T=>{if(T)return T.addEventListener("keydown",S),()=>{T.removeEventListener("keydown",S)}},k=u&&C(u==null?void 0:u.current),M=m&&C(m==null?void 0:m.current);return()=>{k==null||k(),M==null||M()}},[]),_.useEffect(()=>{var M,T;const S=g.current;if(!S)return;const C=(T=(M=m==null?void 0:m.current)!=null?M:u==null?void 0:u.current)!=null?T:null,k=new IntersectionObserver(E=>{E[0].isIntersecting&&(c==null||c())},C?{root:C}:void 0);return k.observe(S),()=>k.disconnect()},[u,m,c]),r.jsxs(r.Fragment,{children:[r.jsx(K.InputItem,{selectAllOnFocus:!1,border:!1,ref:p,value:e,onChange:S=>n(S.target.value),placeholder:o,name:"github-submenu-dropdown-input"}),r.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t==null?void 0:t.map(S=>{const C=s==null?void 0:s.includes(S.name),k=d!==void 0&&!C&&y&&!b;return r.jsx(K.Item,{onClick:M=>{M.preventDefault(),a(S)},secondary:r.jsx("span",{className:"line-clamp-2",children:S.description}),trailing:C&&y4,className:W((k||!S.indexed)&&"text-token-text-tertiary opacity-50"),disabled:k,children:r.jsx("div",{className:"truncate",children:S.name})},S.name)}),r.jsx("div",{className:"w-auto",ref:g}),!l&&t.length===0&&r.jsx(K.Item,{className:"text-token-text-tertiary pointer-events-none",children:r.jsx(P,{id:"LRA3gT",defaultMessage:"No repositories found"})}),l&&r.jsx("div",{className:"text-token-text-tertiary mx-1.5 px-2 py-2.5 text-sm",role:"alert","aria-busy":"true",children:r.jsx(P,{id:"HvTGRC",defaultMessage:"Loading..."})})]}),i&&d===void 0&&r.jsx(K.Item,{onClick:S=>{S.preventDefault(),a({name:"$all_accessible_repos"}),h&&!e&&g6e(S.currentTarget)},secondary:r.jsx(P,{id:"EhTGqu",defaultMessage:"Select all repositories accessible to ChatGPT"}),trailing:h&&y4,children:r.jsx(P,{id:"pJnTxe",defaultMessage:"All Repositories"})}),r.jsx(K.Separator,{}),r.jsx(K.Item,{onClick:()=>{window.open(f,"_blank")},trailing:r.jsx(f6e,{className:"icon-sm"}),children:r.jsx(P,{id:"ICVOEb",defaultMessage:"Configure Repositories"})}),r.jsx(K.Separator,{}),r.jsxs("div",{className:"text-token-text-tertiary mx-1.5 px-2.5 py-2 text-xs",children:[d&&r.jsx(P,{id:"k/9Fjt",defaultMessage:"Choose up to {maxRepos} {maxRepos, plural, one {repository} other {repositories}}. To search more, use deep research.",values:{maxRepos:d}}),r.jsx(P,{id:"4Z21ID",defaultMessage:"Not seeing a repository? {helpLink}",values:{helpLink:r.jsx(r.Fragment,{children:r.jsx("a",{href:"https://help.openai.com/en/articles/11145903-chatgpt-connectors",target:"_blank",rel:"noopener noreferrer",className:"underline",children:r.jsx(P,{id:"sVuhcw",defaultMessage:"Learn more"})})})}})]})]})};function g6e(t){const e=t.closest("[role=menuitem]");if(!e)return;let n=e.nextElementSibling;for(;n&&n.getAttribute("role")!=="menuitem";)n=n.nextElementSibling;if(!n)for(n=e.previousElementSibling;n&&n.getAttribute("role")!=="menuitem";)n=n.previousElementSibling;n instanceof HTMLElement&&n.focus()}const h6e=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),_6e=30,x6e=25,y6e=t=>{"use forget";const e=H.c(11),{enabled:n,debouncedSearchTerm:s,linkId:o,limit:a}=t,i=n===void 0?!0:n,l=a===void 0?20:a;let c;e[0]!==s||e[1]!==o?(c=["github-repos",s,o],e[0]=s,e[1]=o,e[2]=c):c=e[2];let d;e[3]!==s||e[4]!==l||e[5]!==o?(d=async m=>{const{pageParam:f}=m,p=f===void 0?null:f;return await pe.safePost("/aip/connectors/github/search_repos",{requestBody:{query:s,limit:l,next_token:p,link_id:o}})},e[3]=s,e[4]=l,e[5]=o,e[6]=d):d=e[6];let u;return e[7]!==i||e[8]!==c||e[9]!==d?(u={queryKey:c,enabled:i,queryFn:d,getNextPageParam:S6e,initialPageParam:null,retry:1},e[7]=i,e[8]=c,e[9]=d,e[10]=u):u=e[10],vi(u)};function nB(t){"use forget";var Ne,je;const e=H.c(57),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:a,githubSyncEnabled:i,enabled:l,onSelectAllRepos:c}=t,d=s===void 0?!1:s,u=i===void 0?!1:i,m=l===void 0?!0:l,{selectedRepos:f,setSelectedRepos:p}=FP(n);let g;e[0]!==f?(g=BP(f),e[0]=f,e[1]=g):g=e[1];const h=g,[x]=_.useState(f),[y,b]=_.useState(""),v=gxe(y,300),{maxRepos:S}=DP(),[C,k]=_.useState(null),M=m&&!!o,T=o!=null?o:"";let E;e[2]!==v||e[3]!==M||e[4]!==T?(E={enabled:M,debouncedSearchTerm:v,linkId:T},e[2]=v,e[3]=M,e[4]=T,e[5]=E):E=e[5];const{data:A,isFetching:N,isFetchingNextPage:R,isError:O,fetchNextPage:D}=y6e(E),F=m&&u&&!!(a!=null&&a.length),V=a!=null?a:"";let z;e[6]!==F||e[7]!==V?(z={enabled:F,connectionInstanceId:V},e[6]=F,e[7]=V,e[8]=z):z=e[8];const{data:$,isFetching:Y}=LP(z);let Z;e:{if(!($!=null&&$.sync_enabled_objects)){let Fe;e[9]===Symbol.for("react.memo_cache_sentinel")?(Fe=[],e[9]=Fe):Fe=e[9],Z=Fe;break e}let Te;e[10]!==$.sync_enabled_objects?(Te=$.sync_enabled_objects.filter(b6e).map(v6e),e[10]=$.sync_enabled_objects,e[11]=Te):Te=e[11],Z=Te}const Q=Z;let q;if(e[12]!==v||e[13]!==u||e[14]!==x||e[15]!==A||e[16]!==Q){const Te=new Map;v.length===0&&((Ne=x.selectedRepos)==null||Ne.forEach(Fe=>{Te.set(Fe,{repository_full_name:Fe,description:null,is_code_search_indexed:!0,synced:!1})})),u&&Q&&Q.forEach(Fe=>{var Ge;Te.set(Fe.repository_full_name,{repository_full_name:Fe.repository_full_name,description:(Ge=Fe.description)!=null?Ge:null,is_code_search_indexed:!0,synced:!0})}),A&&A.pages.forEach(Fe=>{Fe.repos.forEach(Ge=>{var Re,tt,Ke;const Se=Te.get(Ge.repository_full_name);Te.set(Ge.repository_full_name,{repository_full_name:Ge.repository_full_name,description:(Re=Ge.description)!=null?Re:null,is_code_search_indexed:(tt=Ge.is_code_search_indexed)!=null?tt:void 0,synced:(Ke=Se==null?void 0:Se.synced)!=null?Ke:!1})})}),v.length>0&&Te.forEach(Fe=>{var Ge;!Fe.repository_full_name.toLowerCase().includes(v.toLowerCase())&&!((Ge=Fe.description)!=null&&Ge.toLowerCase().includes(v.toLowerCase()))&&Te.delete(Fe.repository_full_name)}),q=Array.from(Te.values()),e[12]=v,e[13]=u,e[14]=x,e[15]=A,e[16]=Q,e[17]=q}else q=e[17];const X=q;let oe;e[18]!==u||e[19]!==X?(oe=X.map(Te=>{const Fe=!!Te.is_code_search_indexed||Te.synced&&u;return{name:Te.repository_full_name,description:Te.description,indexed:Fe,synced:Te.synced}}),e[18]=u,e[19]=X,e[20]=oe):oe=e[20];const se=oe;let de;e[21]!==S||e[22]!==c||e[23]!==f.selectedAllRepos||e[24]!==f.selectedRepos||e[25]!==p?(de=Te=>{var tt,Ke,nt,ot,Lt;const Fe=Te.name;if(!Te.indexed&&!Te.synced){k(Te.name);return}if(Fe==="$all_accessible_repos"){const vt=!f.selectedAllRepos;p({selectedRepos:[],selectedAllRepos:vt}),vt&&(c==null||c());return}const Ge=(tt=f.selectedRepos)==null?void 0:tt.includes(Fe),Se=(nt=(Ke=f.selectedRepos)==null?void 0:Ke.length)!=null?nt:0;if(S!==void 0&&S>1&&!Ge&&Se>=S)return;if(S!==void 0&&S===1&&!Ge){p({selectedRepos:[Fe],selectedAllRepos:!1});return}const Re=Ge?((ot=f.selectedRepos)!=null?ot:[]).filter(vt=>vt!==Fe):[...(Lt=f.selectedRepos)!=null?Lt:[],Fe];p({selectedRepos:Re,selectedAllRepos:!1})},e[21]=S,e[22]=c,e[23]=f.selectedAllRepos,e[24]=f.selectedRepos,e[25]=p,e[26]=de):de=e[26];const ie=de;let ae;e[27]!==f.selectedRepos?(ae=(je=f.selectedRepos)!=null?je:[],e[27]=f.selectedRepos,e[28]=ae):ae=e[28];let ce;e[29]!==f.selectedAllRepos?(ce=f.selectedAllRepos?["$all_accessible_repos"]:[],e[29]=f.selectedAllRepos,e[30]=ce):ce=e[30];let ye;e[31]!==ae||e[32]!==ce?(ye=[...ae,...ce],e[31]=ae,e[32]=ce,e[33]=ye):ye=e[33];const fe=ye,Ce=_.useRef(0);let ee;e[34]!==m||e[35]!==D?(ee=()=>{m&&Ce.current<1&&D()},e[34]=m,e[35]=D,e[36]=ee):ee=e[36];const te=ee;let le;e[37]===Symbol.for("react.memo_cache_sentinel")?(le=()=>{Ce.current=0},e[37]=le):le=e[37];let re;e[38]!==v?(re=[v],e[38]=v,e[39]=re):re=e[39],_.useEffect(le,re);let ve,_e;e[40]!==R||e[41]!==O?(ve=()=>{O?Ce.current=Ce.current+1:!R&&!O&&(Ce.current=0)},_e=[R,O],e[40]=R,e[41]=O,e[42]=ve,e[43]=_e):(ve=e[42],_e=e[43]),_.useEffect(ve,_e);const we=m&&N||R||Y,De=m&&(u||!!o);let ge;return e[44]!==d||e[45]!==se||e[46]!==ie||e[47]!==h||e[48]!==C||e[49]!==we||e[50]!==S||e[51]!==te||e[52]!==y||e[53]!==fe||e[54]!==f||e[55]!==De?(ge={isAvailable:De,allowSelectAllRepos:d,dropdownItems:se,handleSelectItem:ie,indexModalRepo:C,setIndexModalRepo:k,loading:we,maxRepos:S,onEndScroll:te,searchTerm:y,setSearchTerm:b,selectedItemNames:fe,selectedRepos:f,hasRepos:h},e[44]=d,e[45]=se,e[46]=ie,e[47]=h,e[48]=C,e[49]=we,e[50]=S,e[51]=te,e[52]=y,e[53]=fe,e[54]=f,e[55]=De,e[56]=ge):ge=e[56],ge}function v6e(t){var e;return{repository_full_name:t.object_name,description:(e=t.object_description)!=null?e:null}}function b6e(t){return t.object_type==="repository"&&t.object_name}function G3(t){"use forget";const e=H.c(23),{state:n,searchPlaceholder:s,notIndexedLabel:o,contentRef:a,subContentRef:i}=t;let l;if(e[0]!==o||e[1]!==n.dropdownItems){let f;e[3]!==o?(f=p=>B(w({},p),{description:!p.indexed&&!p.synced?o:p.description}),e[3]=o,e[4]=f):f=e[4],l=n.dropdownItems.map(f),e[0]=o,e[1]=n.dropdownItems,e[2]=l}else l=e[2];const c=l;let d;e[5]!==n?(d=n.indexModalRepo&&r.jsx(m6e,{repoName:n.indexModalRepo,onClose:()=>n.setIndexModalRepo(null)}),e[5]=n,e[6]=d):d=e[6];let u;e[7]!==a||e[8]!==c||e[9]!==s||e[10]!==n.allowSelectAllRepos||e[11]!==n.handleSelectItem||e[12]!==n.loading||e[13]!==n.maxRepos||e[14]!==n.onEndScroll||e[15]!==n.searchTerm||e[16]!==n.selectedItemNames||e[17]!==n.setSearchTerm||e[18]!==i?(u=r.jsx(p6e,{items:c,searchTerm:n.searchTerm,setSearchTerm:n.setSearchTerm,selectedItems:n.selectedItemNames,searchPlaceholder:s,handleSelectItem:n.handleSelectItem,showSelectAllRepos:n.allowSelectAllRepos,loading:n.loading,onEndScroll:n.onEndScroll,maxRepos:n.maxRepos,contentRef:a,subContentRef:i}),e[7]=a,e[8]=c,e[9]=s,e[10]=n.allowSelectAllRepos,e[11]=n.handleSelectItem,e[12]=n.loading,e[13]=n.maxRepos,e[14]=n.onEndScroll,e[15]=n.searchTerm,e[16]=n.selectedItemNames,e[17]=n.setSearchTerm,e[18]=i,e[19]=u):u=e[19];let m;return e[20]!==d||e[21]!==u?(m=r.jsxs(r.Fragment,{children:[d,u]}),e[20]=d,e[21]=u,e[22]=m):m=e[22],m}function FXe(t){"use forget";var F,V,z,$;const e=H.c(33),{clientThreadId:n,allowSelectAllRepos:s,linkId:o,syncConnectionId:a,githubSyncEnabled:i,contentRef:l}=t,c=s===void 0?!1:s,d=i===void 0?!1:i,u=J(),m=_.useRef(null),{addSource:f}=Ra(n);let p;e[0]!==f?(p=()=>{f(bt.GITHUB_CONNECTOR)},e[0]=f,e[1]=p):p=e[1];let g;e[2]!==c||e[3]!==n||e[4]!==d||e[5]!==o||e[6]!==a||e[7]!==p?(g={clientThreadId:n,allowSelectAllRepos:c,linkId:o,syncConnectionId:a,githubSyncEnabled:d,enabled:!0,onSelectAllRepos:p},e[2]=c,e[3]=n,e[4]=d,e[5]=o,e[6]=a,e[7]=p,e[8]=g):g=e[8];const h=nB(g),x=h.hasRepos,[y,b]=_.useState(!x);let v,S;e[9]!==x?(v=()=>{x||b(!0)},S=[x],e[9]=x,e[10]=v,e[11]=S):(v=e[10],S=e[11]),_.useEffect(v,S);let C;e:{if((V=(F=h.selectedRepos)==null?void 0:F.selectedRepos)!=null&&V.length&&(($=(z=h.selectedRepos)==null?void 0:z.selectedRepos)==null?void 0:$.length)>=1){const Y=h.selectedRepos.selectedRepos;let Z=Y[0];if(Z.length>_6e){const q=(x6e-3)/2;Z=Z.slice(0,Math.floor(q))+"..."+Z.slice(Math.floor(-q))}const Q=Y.length-1;C=Q>0?"".concat(Z," +").concat(Q):Z;break e}C=void 0}const k=C;if(!h.isAvailable)return null;const M=!x||y;let T;e[12]!==x?(T=Y=>{x&&b(Y)},e[12]=x,e[13]=T):T=e[13];let E;e[14]!==u||e[15]!==k?(E=k!=null?k:u.formatMessage({id:"sDCihQ",defaultMessage:"Repositories"}),e[14]=u,e[15]=k,e[16]=E):E=e[16];let A;e[17]!==E?(A=r.jsx(K.SubMenuTrigger,{className:"ps-4",icon:h6e,children:E}),e[17]=E,e[18]=A):A=e[18];let N;e[19]!==u?(N=u.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[19]=u,e[20]=N):N=e[20];let R;e[21]!==u?(R=u.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[21]=u,e[22]=R):R=e[22];let O;e[23]!==l||e[24]!==h||e[25]!==N||e[26]!==R?(O=r.jsx(K.Portal,{children:r.jsx(K.SubContent,{ref:m,children:r.jsx(G3,{state:h,searchPlaceholder:N,notIndexedLabel:R,contentRef:l,subContentRef:m})})}),e[23]=l,e[24]=h,e[25]=N,e[26]=R,e[27]=O):O=e[27];let D;return e[28]!==A||e[29]!==O||e[30]!==M||e[31]!==T?(D=r.jsxs(K.Sub,{open:M,onOpenChange:T,children:[A,O]}),e[28]=A,e[29]=O,e[30]=M,e[31]=T,e[32]=D):D=e[32],D}function S6e(t){var e;return(e=t.next_token)!=null?e:void 0}function C6e(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"text-token-interactive-label-danger-secondary-default border-token-border-status-error items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(P,{id:"w+mmPI",defaultMessage:"DEV"})}),t[0]=e):e=t[0],e}const w6e=t=>{"use forget";const e=H.c(4),{content:n}=t;let s;e[0]!==n?(s=n!=null?n:r.jsx(P,{defaultMessage:"Custom",id:"allConnectors.custom"}),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:s}),e[2]=s,e[3]=o):o=e[3],o};function v4(t){"use forget";const e=H.c(3),{systemHint:n}=t;if(n.isDangerous){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=C6e(),e[0]=s):s=e[0],s}if(n.badgeText){let s;return e[1]!==n.badgeText?(s=r.jsx(w6e,{content:n.badgeText}),e[1]=n.badgeText,e[2]=s):s=e[2],s}return null}const k6e=j(()=>I(()=>Promise.resolve().then(()=>hf),void 0),{loading:t=>L(t)}),zg="connector:".concat(j9),M6e=t=>{"use forget";const e=H.c(16),{clientThreadId:n,activeConnectorSystemHints:s,githubMenuState:o,githubLabels:a}=t,i=J(),l=qb(),c=_.useRef(null),d=_.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(k6e,{}),e[0]=u):u=e[0];let m;e[1]!==s.length||e[2]!==i?(m=i.formatMessage({id:"composer.apps.multiple",defaultMessage:"{count} apps"},{count:s.length}),e[1]=s.length,e[2]=i,e[3]=m):m=e[3];let f;e[4]!==s||e[5]!==n||e[6]!==a||e[7]!==o||e[8]!==i||e[9]!==l?(f=s.map(h=>{var y,b,v,S;return h.systemHint===zg&&(o!=null&&o.isAvailable)?r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{icon:r.jsx(il,{hint:h,isNextToLabel:!0}),trailing:r.jsx(K.RadioItemCheck,{}),highlightTrailing:r.jsx("button",{type:"button",className:"text-token-text-tertiary hover:bg-tertiary hover:text-token-text-secondary flex h-6 w-6 items-center justify-center rounded transition","aria-label":i.formatMessage({id:"wpLHSw",defaultMessage:"Remove {connector}"},{connector:(y=h.actionLabel)!=null?y:h.name}),onClick:C=>{C.preventDefault(),C.stopPropagation(),l(zg,{analyticsMetadata:{clientThreadId:n}})}}),onSelect:T6e,children:r.jsxs("div",{className:"flex items-center gap-2",children:[(b=h.actionLabel)!=null?b:h.name,r.jsx(v4,{systemHint:h})]})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{ref:d,children:r.jsx(G3,{state:o,searchPlaceholder:a.searchPlaceholder,notIndexedLabel:a.notIndexedLabel,contentRef:c,subContentRef:d})})})]},h.systemHint):r.jsx(K.RadioGroup,{value:(v=h.systemHint)!=null?v:void 0,onValueChange:C=>{l(C,{analyticsMetadata:{clientThreadId:n}})},children:r.jsx(K.RadioItem,{value:h.systemHint,color:"default",icon:r.jsx(il,{hint:h,isNextToLabel:!0}),trailing:r.jsx(K.RadioItemCheck,{}),label:r.jsxs("div",{className:"flex items-center gap-2",children:[(S=h.actionLabel)!=null?S:h.name,r.jsx(v4,{systemHint:h})]}),isDangerous:h.isDangerous,onSelect:E6e},h.systemHint)},h.systemHint)}),e[4]=s,e[5]=n,e[6]=a,e[7]=o,e[8]=i,e[9]=l,e[10]=f):f=e[10];let p;e[11]!==f?(p=r.jsx("div",{className:"min-w-48",ref:c,children:f}),e[11]=f,e[12]=p):p=e[12];let g;return e[13]!==m||e[14]!==p?(g=r.jsx(q1,{icon:u,label:m,removable:!1,dropdownContent:p}),e[13]=m,e[14]=p,e[15]=g):g=e[15],g},BXe=t=>{"use forget";var q,X,oe;const e=H.c(42),{clientThreadId:n,activeSystemHint:s,activeSystemHintType:o,activeConnectorSystemHints:a,locked:i,onRemoveSystemHint:l}=t,c=J(),d=qb(),{connectorLinks:u}=wd(),m=_A(),f=!m;let p;e[0]!==f?(p={skip:f},e[0]=f,e[1]=p):p=e[1];const{connectionInstanceData:g}=Mm(p);let h;e[2]!==(g==null?void 0:g.connection_statuses)?(h=g==null?void 0:g.connection_statuses.find(A6e),e[2]=g==null?void 0:g.connection_statuses,e[3]=h):h=e[3];const x=h;let y;e[4]!==u?(y=(X=(q=u.get(j9))==null?void 0:q[0])==null?void 0:X.id,e[4]=u,e[5]=y):y=e[5];const b=y,v=x==null?void 0:x.user_connection_details.connection_instance_id,S=!!(m&&v);let C;e[6]!==a?(C=a.some(I6e),e[6]=a,e[7]=C):C=e[7];const k=C,M=S?v:void 0;let T;e[8]!==n||e[9]!==b||e[10]!==S||e[11]!==k||e[12]!==M?(T={clientThreadId:n,allowSelectAllRepos:!1,linkId:b,syncConnectionId:M,githubSyncEnabled:S,enabled:k},e[8]=n,e[9]=b,e[10]=S,e[11]=k,e[12]=M,e[13]=T):T=e[13];const E=nB(T);let A;e[14]!==c?(A=c.formatMessage({id:"o4McNz",defaultMessage:"Search repositories"}),e[14]=c,e[15]=A):A=e[15];let N;e[16]!==c?(N=c.formatMessage({id:"oFTjZm",defaultMessage:"Not indexed"}),e[16]=c,e[17]=N):N=e[17];let R;e[18]!==A||e[19]!==N?(R={searchPlaceholder:A,notIndexedLabel:N},e[18]=A,e[19]=N,e[20]=R):R=e[20];const O=R,D=_.useRef(null);let F,V=s,z=l;if(o&&Yb(o)){if((a==null?void 0:a.length)===0)return null;if((a==null?void 0:a.length)===1){V=a[0];let se;if(e[21]!==a[0]||e[22]!==n||e[23]!==d?(se=()=>d(a[0].systemHint,{analyticsMetadata:{clientThreadId:n}}),e[21]=a[0],e[22]=n,e[23]=d,e[24]=se):se=e[24],z=se,V.systemHint===zg&&E.isAvailable){let de;e[25]!==O.notIndexedLabel||e[26]!==O.searchPlaceholder||e[27]!==E?(de=r.jsx("div",{ref:D,children:r.jsx(G3,{state:E,searchPlaceholder:O.searchPlaceholder,notIndexedLabel:O.notIndexedLabel,contentRef:D})}),e[25]=O.notIndexedLabel,e[26]=O.searchPlaceholder,e[27]=E,e[28]=de):de=e[28],F=de}}else{let se;return e[29]!==a||e[30]!==n||e[31]!==O||e[32]!==E?(se=r.jsx(M6e,{activeConnectorSystemHints:a,clientThreadId:n,githubMenuState:E,githubLabels:O}),e[29]=a,e[30]=n,e[31]=O,e[32]=E,e[33]=se):se=e[33],se}}if(!V)return null;let $;e[34]!==V?($=r.jsx(il,{hint:V,isNextToLabel:!0}),e[34]=V,e[35]=$):$=e[35];const Y=(oe=V.shortLabel)!=null?oe:V.name,Z=!i;let Q;return e[36]!==F||e[37]!==z||e[38]!==$||e[39]!==Y||e[40]!==Z?(Q=r.jsx(q1,{icon:$,label:Y,removable:Z,onRemove:z,dropdownContent:F}),e[36]=F,e[37]=z,e[38]=$,e[39]=Y,e[40]=Z,e[41]=Q):Q=e[41],Q};function T6e(t){t.preventDefault()}function E6e(t){t.preventDefault()}function A6e(t){return t.user_connection_details.knowledge_connector_type==="github"&&["partially_activated","activated"].includes(t.user_connection_details.activation_status)&&!!t.user_connection_details.connection_instance_id&&!!t.user_connection_details.backing_link_id}function I6e(t){return t.systemHint===zg}const j6e=j(()=>I(()=>import("./okzny25t09iyl31t.js").then(t=>t._),__vite__mapDeps([350,1])),{loading:t=>L(t)}),P6e=j(()=>I(()=>import("./is1k3hg6hctfw3sz.js").then(t=>t._),__vite__mapDeps([335,1])),{loading:t=>L(t)}),N6e=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)});function UXe(t){"use forget";const e=H.c(60),{disabled:n,showLeadingDivider:s}=t,o=n===void 0?!1:n,a=s===void 0?!1:s,i=J(),l=ue(it.agentSessionMode$),c=l!=null?l:"signedInAccounts";let d;e[0]!==i?(d=i.formatMessage(ws.signedInMenuLabel),e[0]=i,e[1]=d):d=e[1];const u=d;let m;e[2]!==i?(m=i.formatMessage(ws.incognitoMenuLabel),e[2]=i,e[3]=m):m=e[3];const f=m,p=c==="signedInAccounts"?u:f;let g;e[4]!==c?(g=c==="signedInAccounts"?r.jsx(j6e,{className:"icon"}):r.jsx(P6e,{className:"icon"}),e[4]=c,e[5]=g):g=e[5];const h=g;let x;e[6]!==o||e[7]!==c?(x=oe=>{o||oe!==c&&LD(oe)},e[6]=o,e[7]=c,e[8]=x):x=e[8];const y=x,b=a&&"group/trigger";let v;e[9]!==b?(v=W("composer-btn -ms-2 ps-3.5 pe-2 disabled:cursor-not-allowed disabled:opacity-60",b),e[9]=b,e[10]=v):v=e[10];const S=v;let C;e[11]!==a?(C=a?r.jsx("span",{className:"bg-token-border-medium -me-3 hidden h-6 w-px min-[420px]:inline-block"}):null,e[11]=a,e[12]=C):C=e[12];let k;e[13]!==h?(k=r.jsx("span",{className:"hidden items-center [[data-collapse-labels]_&]:me-1.5 [[data-collapse-labels]_&]:inline-flex",children:h}),e[13]=h,e[14]=k):k=e[14];let M;e[15]!==u?(M=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:u}),e[15]=u,e[16]=M):M=e[16];let T;e[17]!==f?(T=r.jsx("span",{"aria-hidden":!0,className:"invisible col-start-1 row-start-1 whitespace-nowrap",children:f}),e[17]=f,e[18]=T):T=e[18];let E;e[19]!==p?(E=r.jsx("span",{className:"col-start-1 row-start-1 whitespace-nowrap",children:p}),e[19]=p,e[20]=E):E=e[20];let A;e[21]!==M||e[22]!==T||e[23]!==E?(A=r.jsxs("span",{className:"relative grid [[data-collapse-labels]_&]:sr-only",children:[M,T,E]}),e[21]=M,e[22]=T,e[23]=E,e[24]=A):A=e[24];let N;e[25]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(N6e,{className:"icon-sm ms-1"}),e[25]=N):N=e[25];let R;e[26]!==o||e[27]!==k||e[28]!==A||e[29]!==S?(R=r.jsxs("button",{type:"button",className:S,disabled:o,children:[k,A,N]}),e[26]=o,e[27]=k,e[28]=A,e[29]=S,e[30]=R):R=e[30];let O;e[31]!==o||e[32]!==R?(O=r.jsx(K.BasicTrigger,{asChild:!0,disabled:o,children:R}),e[31]=o,e[32]=R,e[33]=O):O=e[33];let D;e[34]!==o||e[35]!==y?(D=oe=>{o||(oe==="incognito"||oe==="signedInAccounts")&&y(oe)},e[34]=o,e[35]=y,e[36]=D):D=e[36];let F;e[37]!==i?(F=i.formatMessage(ws.signedInMenuLabel),e[37]=i,e[38]=F):F=e[38];let V;e[39]===Symbol.for("react.memo_cache_sentinel")?(V=r.jsx(P,w({},ws.signedInDescription)),e[39]=V):V=e[39];let z;e[40]!==o||e[41]!==F?(z=r.jsx(K.RadioItem,{value:"signedInAccounts",disabled:o,label:F,secondary:V}),e[40]=o,e[41]=F,e[42]=z):z=e[42];let $;e[43]!==i?($=i.formatMessage(ws.incognitoMenuLabel),e[43]=i,e[44]=$):$=e[44];let Y;e[45]===Symbol.for("react.memo_cache_sentinel")?(Y=r.jsx(P,w({},ws.incognitoDescription)),e[45]=Y):Y=e[45];let Z;e[46]!==o||e[47]!==$?(Z=r.jsx(K.RadioItem,{value:"incognito",disabled:o,label:$,secondary:Y}),e[46]=o,e[47]=$,e[48]=Z):Z=e[48];let Q;e[49]!==c||e[50]!==D||e[51]!==z||e[52]!==Z?(Q=r.jsx(K.Portal,{children:r.jsx(K.Content,{size:"auto",alignOffset:-7,children:r.jsxs(K.RadioGroup,{value:c,onValueChange:D,children:[z,Z]})})}),e[49]=c,e[50]=D,e[51]=z,e[52]=Z,e[53]=Q):Q=e[53];let q;e[54]!==O||e[55]!==Q?(q=r.jsxs(K.Root,{children:[O,Q]}),e[54]=O,e[55]=Q,e[56]=q):q=e[56];let X;return e[57]!==q||e[58]!==C?(X=r.jsxs(r.Fragment,{children:[C,q]}),e[57]=q,e[58]=C,e[59]=X):X=e[59],X}function VXe(){return r.jsx("div",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(P,{id:"mP0mrm",defaultMessage:"Beta"})})}function R6e(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"text-token-interactive-label-danger-secondary-default border-token-border-status-error items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(P,{id:"w+mmPI",defaultMessage:"DEV"})}),t[0]=e):e=t[0],e}const L6e=()=>{"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(P,{defaultMessage:"Custom",id:"allConnectors.custom"})}),t[0]=e):e=t[0],e},O6e=()=>{"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("span",{className:"border-token-text-quartenary text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary items-center rounded-full border px-1 py-0.5 text-[8px] leading-3 font-semibold uppercase",children:r.jsx(P,{defaultMessage:"Beta",id:"allConnectors.beta"})}),t[0]=e):e=t[0],e};function GXe(t){"use forget";const e=H.c(3),{connector:n}=t;if(n.connector_type!=="MCP"||n.developer_type==="TRUSTED_PARTNER")return null;if(n.status==="ONLY_ME"){let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(R6e,{}),e[0]=s):s=e[0],s}else if(n.supports_full_actions&&n.status==="ENABLED"){let s;return e[1]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(O6e,{}),e[1]=s):s=e[1],s}else{let s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(L6e,{}),e[2]=s):s=e[2],s}}const b4=j(()=>I(()=>import("./gn07ixwwa4zyd9g5.js").then(t=>t._),__vite__mapDeps([377,1])),{loading:t=>L(t)}),S4=j(()=>I(()=>import("./jgvrewhnjcf398o6.js").then(t=>t._),__vite__mapDeps([378,1])),{loading:t=>L(t)}),C4=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)}),D6e=j(()=>I(()=>import("./gyslsi6u3sjz2wcb.js").then(t=>t._),__vite__mapDeps([379,1])),{loading:t=>L(t)}),$Xe=({connection:t,onClose:e})=>{var l;const n=J(),s=t.user_connection_details.activation_status,o=s==="activating"?[{icon:C4,label:n.formatMessage(ia.initialTime)},{icon:b4,label:n.formatMessage(ia.response)},{icon:S4,label:n.formatMessage(ia.future)}]:[{icon:D6e,label:n.formatMessage(ia.search)},{icon:C4,label:n.formatMessage(ia.fullSyncTime)},{icon:b4,label:n.formatMessage(ia.response)},{icon:S4,label:n.formatMessage(ia.future)}],a=s==="activating"?n.formatMessage(ia.titleSyncing):n.formatMessage(ia.titlePartialSyncing),i=t.connection_display_info.display_name;return r.jsx(F6e,{iconUrl:(l=t.connection_display_info.icon_url)!=null?l:void 0,iconAlt:t.connection_display_info.display_name,footerLogo:s==="activating"?r.jsx(UC,{sizeOverride:18,percentage:40,className:"text-token-text-tertiary"}):r.jsx(UC,{sizeOverride:18,percentage:60,className:"text-blue-400"}),bulletPoints:o,onClose:e,title:a,description:i})},F6e=({title:t,iconUrl:e,iconAlt:n,footerLogo:s,description:o,bulletPoints:a,onClose:i})=>{const l=J();return r.jsxs(Pt,{testId:"modal-ca-nux",isOpen:!0,noPadding:!0,onClose:i,shouldIgnoreClickOutside:!0,size:"custom",type:"success",className:"z-[10000] max-w-sm",children:[r.jsx("div",{className:"relative h-12",children:r.jsx(fn,{onClick:i,className:"absolute end-0 top-0 z-10 me-2 mt-2 text-black"})}),r.jsxs("div",{className:"flex flex-col p-6 pb-5 text-center",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:e,alt:n,className:"h-12 w-12 rounded-full"}),r.jsx("div",{className:"bg-token-bg-primary absolute end-0 bottom-0 z-10 flex items-center justify-center rounded-full",children:s})]})}),r.jsx("div",{className:"text-md mt-6 font-medium",children:t}),r.jsx("div",{className:"text-token-text-tertiary text-sm",children:o}),r.jsx("div",{className:"mt-5 mb-9 flex flex-col justify-center gap-3",children:a.map(c=>r.jsxs("div",{className:"text-token-text-secondary flex items-start gap-2",children:[r.jsx(c.icon,{className:"icon"}),r.jsx("span",{className:"text-body-small-regular text-start",children:c.label})]},c.label))}),r.jsx("div",{children:r.jsx(he,{color:"secondary",onClick:i,children:r.jsx("span",{className:"px-4",children:l.formatMessage(ia.gotIt)})})})]})]})},ia=be({titleSyncing:{id:"contextual-answers.status-modal.title-syncing",defaultMessage:"Sync in progress..."},titlePartialSyncing:{id:"contextual-answers.status-modal.title-partial-syncing",defaultMessage:"Last 30 days synced. Still syncing..."},search:{id:"contextual-answers.status-modal.search",defaultMessage:"The last 30 days are ready to search."},initialTime:{id:"contextual-answers.status-modal.initial-time",defaultMessage:"The initial sync may take 8 hours or longer, based on workspace size."},fullSyncTime:{id:"contextual-answers.status-modal.full-time",defaultMessage:"Full sync may take up to 16 hours or longer, based on workspace size."},response:{id:"contextual-answers.status-modal.response",defaultMessage:"Syncing enables instant ChatGPT responses about your data."},future:{id:"contextual-answers.status-modal.future",defaultMessage:"Future changes are available in real-time."},gotIt:{id:"contextual-answers.status-modal.got-it",defaultMessage:"Got it"}});function HXe(t,{target:e,referrer:n,toggleAllAfterRedirect:s}={target:"connectors"}){let o="#settings/".concat(Bn.Connectors);return t&&(o+="?connector=".concat(fr[t],"&add-connector-link=true&target=").concat(e),n&&(o+="&referrer=".concat(encodeURIComponent(n))),s&&(o+="&".concat(py))),o}function WXe(t){return"#settings/".concat(Bn.Connectors,"?connector=").concat(fr[t])}function zXe(){const t=ls(),{availableConnectors:e}=ih(),n=ss(),s=G();return o=>{var m,f;const a=t.pathname.match(/\/c\/.+/)?t.pathname:"/",i=t.hash.includes("suggestedPromptsText="),l=t.hash.includes(py),c=t.hash.includes("target=")?(m=t.hash.match(/target=([^&]+)/))==null?void 0:m[1]:"connectors",d="".concat(a,"?hints=").concat(c,"&sources=").concat(xp[o.id]);if(i){const p=(f=t.hash.match(/suggestedPromptsText=([^&]+)/))==null?void 0:f[1];return"".concat(d,"&prompt=").concat(p,"&redirect_source=suggested_ca_prompts")}if(l)return"".concat(d,"&").concat(py);if((n==null||n===Ie.Slurm)&&e.some(p=>p.id===o.id&&[bt.GDRIVE_ACTION_CONNECTOR,bt.BOX_CONNECTOR,bt.DROPBOX_CONNECTOR,bt.SHAREPOINT_CONNECTOR].includes(xp[p.id]))){const p=Co(s,"1204757806").get("group","control");if(p==="connector-enabled"||p==="suggestions")return"".concat(d).concat(p==="suggestions"?"&suggestions-for-connector=".concat(xp[o.id]):"")}return""}}const qXe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20%3e%3cpath%20d='M3.51105%2018.4269L4.39307%2019.9615C4.57634%2020.2846%204.8398%2020.5384%205.14908%2020.723L8.29914%2015.2307H1.99902C1.99902%2015.5884%202.09066%2015.9461%202.27394%2016.2692L3.51105%2018.4269Z'%20fill='%230066DA'%20/%3e%3cpath%20d='M11.999%208.76916L8.84897%203.27686C8.53969%203.46147%208.27623%203.71532%208.09295%204.03839L2.27394%2014.1922C2.09403%2014.5083%201.99926%2014.8663%201.99902%2015.2307H8.29914L11.999%208.76916Z'%20fill='%2300AC47'%20/%3e%3cpath%20d='M18.8492%2020.723C19.1585%2020.5384%2019.422%2020.2846%2019.6053%2019.9615L19.9718%2019.3269L21.7244%2016.2692C21.9077%2015.9461%2021.9993%2015.5884%2021.9993%2015.2307H15.6987L17.0394%2017.8846L18.8492%2020.723Z'%20fill='%23EA4335'%20/%3e%3cpath%20d='M11.9982%208.76923L15.1483%203.27692C14.839%203.09231%2014.4839%203%2014.1173%203H9.87907C9.51252%203%209.15742%203.10385%208.84814%203.27692L11.9982%208.76923Z'%20fill='%2300832D'%20/%3e%3cpath%20d='M15.6983%2015.2307H8.29849L5.14844%2020.723C5.45772%2020.9076%205.81281%2020.9999%206.17937%2020.9999H17.8174C18.1839%2020.9999%2018.539%2020.8961%2018.8483%2020.723L15.6983%2015.2307Z'%20fill='%232684FC'%20/%3e%3cpath%20d='M18.8146%209.11532L15.9051%204.03839C15.7218%203.71532%2015.4584%203.46147%2015.1491%203.27686L11.999%208.76916L15.6989%2015.2307H21.9876C21.9876%2014.873%2021.8959%2014.5153%2021.7127%2014.1922L18.8146%209.11532Z'%20fill='%23FFBA00'%20/%3e%3c/svg%3e",YXe=({includeDisabledByAdmin:t}={})=>{const e=G(),{enabled:n,availableConnectorsType:s}=kz(e),{availableConnectors:o,isLoading:a}=Mz({enabled:n,includeDisabledByAdmin:t,productSku:o9.N7JUPD}),i=Tz(e),l=xe(e,"1826175200"),c=_.useMemo(()=>i?o.filter(d=>s.includes(d.type)):l?o.filter(d=>s.includes(d.type)||d.type===Qu.MCP_CONNECTOR&&d.status!=="ONLY_ME"):o.filter(d=>s.includes(d.type)&&d.type!==Qu.MCP_CONNECTOR),[s,o,i,l]);return n?{enabled:!0,availableConnectors:c,isLoading:a}:{enabled:!1,availableConnectors:[],isLoading:!1}},B6e=j(()=>I(()=>import("./gpmvxeb8kgs3tobh.js").then(t=>t._),__vite__mapDeps([380,1])),{loading:t=>L(t)}),U6e=j(()=>I(()=>import("./dx8c7lvygozv45al.js"),__vite__mapDeps([381,1,29,30])).then(t=>t.AgentConnectorsSafetyModal));function V6e({ctx:t,connector:e,clientThreadId:n,activeSystemHintType:s,account:o}){gt(t,U6e,{connector:e,alreadyViewed:!0,onClose:()=>{},onConfirm:()=>{},onTurnOffConnectors:()=>{qe(n,a=>{var i,l;(i=a.selectedSources)!=null||(a.selectedSources=new Map),a.selectedSources.set(s,new Set(["web"])),(l=a.selectedMCPSources)!=null||(a.selectedMCPSources=new Map),a.selectedMCPSources.set(s,new Set),a.mentionedSources=new Set,CA({selectedSourcesMap:a.selectedSources,selectedMCPSourcesMap:a.selectedMCPSources,scope:{userId:o==null?void 0:o.authUserId,workspaceId:o==null?void 0:o.id}})})}})}function ZXe(t){"use forget";var C;const e=H.c(23),{clientThreadId:n,activeSystemHintType:s,layoutMode:o}=t,a=J(),i=G();let l;e[0]!==i?(l=ut(i),e[0]=i,e[1]=l):l=e[1];const c=l,d=$e(Ye.hasSeenOdysseyConnectorsModal),{platformConnectors:u}=Cd(),{selectedSources:m}=Ra(n);if(d.isLoading||d.eligible)return null;let f,p;if(e[2]!==u||e[3]!==m){p=Symbol.for("react.early_return_sentinel");e:{const k=Array.from(m!=null?m:[]).find(G6e);if(!(k!=null)){p=null;break e}if(k){const T=(C=fr[k])!=null?C:k;f=u.get(T)}if(!f&&u.size>0){let T;e[6]!==u?(T=Array.from(u.values()),e[6]=u,e[7]=T):T=e[7],f=T[0]}}e[2]=u,e[3]=m,e[4]=f,e[5]=p}else f=e[4],p=e[5];if(p!==Symbol.for("react.early_return_sentinel"))return p;if(!f)return null;let g;e[8]!==c||e[9]!==s||e[10]!==n||e[11]!==f||e[12]!==i?(g=()=>{V6e({ctx:i,connector:f,clientThreadId:n,activeSystemHintType:s,account:c})},e[8]=c,e[9]=s,e[10]=n,e[11]=f,e[12]=i,e[13]=g):g=e[13];const h=g;let x;e[14]!==a?(x=a.formatMessage($6e.tooltip),e[14]=a,e[15]=x):x=e[15];const y=o==="center"?"bottom":"top";let b;e[16]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(B6e,{className:"icon-sm text-[#E25507] dark:text-[#FF9E6C]"}),e[16]=b):b=e[16];let v;e[17]!==h?(v=r.jsx("button",{type:"button",onClick:h,className:"-ms-1 flex h-9 items-center justify-center p-1.5",children:b}),e[17]=h,e[18]=v):v=e[18];let S;return e[19]!==x||e[20]!==y||e[21]!==v?(S=r.jsx(kt,{label:x,side:y,delayDuration:300,children:v}),e[19]=x,e[20]=y,e[21]=v,e[22]=S):S=e[22],S}function G6e(t){return t!=="web"&&t!=="cloud"}const $6e=be({tooltip:{id:"IK9l6I",defaultMessage:"Learn more about privacy risks with connectors"}}),KXe=t=>{"use forget";const e=H.c(42),{modelLabel:n,modelSlug:s,thinkingEffort:o,onChangeThinkingEffort:a,onRemoveModel:i,onCloseAutoFocus:l}=t,c=J(),d=G();let u,m,f,p,g,h,x,y,b,v,S,C;if(e[0]!==d||e[1]!==c||e[2]!==n||e[3]!==s||e[4]!==a||e[5]!==l||e[6]!==i||e[7]!==o){const T=Ez(d);let E;e[20]!==c||e[21]!==o?(E=P9(c,o),e[20]=c,e[21]=o,e[22]=E):E=e[22];const{filledIcon:A,fullLabel:N}=E;m=q1,y=A,b=o==="standard"?n:N,v=!0,S=i,C=l,p=W6e,u=K.RadioGroup,f=o,e[23]!==s||e[24]!==a?(g=R=>{const O=R;Az(s,O),a(O)},e[23]=s,e[24]=a,e[25]=g):g=e[25],e[26]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(K.Label,{children:r.jsx(P,{id:"YhWabo",defaultMessage:"Thinking time"})}),e[26]=h):h=e[26],x=T.map(z6e),e[0]=d,e[1]=c,e[2]=n,e[3]=s,e[4]=a,e[5]=l,e[6]=i,e[7]=o,e[8]=u,e[9]=m,e[10]=f,e[11]=p,e[12]=g,e[13]=h,e[14]=x,e[15]=y,e[16]=b,e[17]=v,e[18]=S,e[19]=C}else u=e[8],m=e[9],f=e[10],p=e[11],g=e[12],h=e[13],x=e[14],y=e[15],b=e[16],v=e[17],S=e[18],C=e[19];let k;e[27]!==u||e[28]!==f||e[29]!==g||e[30]!==h||e[31]!==x?(k=r.jsxs(u,{value:f,onValueChange:g,children:[h,x]}),e[27]=u,e[28]=f,e[29]=g,e[30]=h,e[31]=x,e[32]=k):k=e[32];let M;return e[33]!==m||e[34]!==p||e[35]!==k||e[36]!==y||e[37]!==b||e[38]!==v||e[39]!==S||e[40]!==C?(M=r.jsx(m,{icon:y,label:b,removable:v,onRemove:S,onCloseAutoFocus:C,onOpenChange:p,dropdownContent:k}),e[33]=m,e[34]=p,e[35]=k,e[36]=y,e[37]=b,e[38]=v,e[39]=S,e[40]=C,e[41]=M):M=e[41],M};function H6e({effort:t}){const e=J(),{progressIcon:n,shortLabel:s,description:o}=P9(e,t);return r.jsx(kt,{side:"right",labelTextAlign:"left",contentClassName:"cant-hover:hidden",labelClassName:"[text-wrap:pretty]",label:o,triggerAs:null,children:r.jsx(K.RadioItem,{value:t,icon:n,label:s})})}function W6e(t){t&&U.logEventWithStatsig("ChatGPT Composer Thinking Effort Opened","chatgpt_composer_thinking_effort_opened")}function z6e(t){return r.jsx(H6e,{effort:t},t)}const sB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.99992 16V6.41407L5.70696 9.70704C5.31643 10.0976 4.68342 10.0976 4.29289 9.70704C3.90237 9.31652 3.90237 8.6835 4.29289 8.29298L9.29289 3.29298L9.36907 3.22462C9.76184 2.90427 10.3408 2.92686 10.707 3.29298L15.707 8.29298L15.7753 8.36915C16.0957 8.76192 16.0731 9.34092 15.707 9.70704C15.3408 10.0732 14.7618 10.0958 14.3691 9.7754L14.2929 9.70704L10.9999 6.41407V16C10.9999 16.5523 10.5522 17 9.99992 17C9.44764 17 8.99992 16.5523 8.99992 16Z"})),q6e=Object.freeze(Object.defineProperty({__proto__:null,default:sB},Symbol.toStringTag,{value:"Module"})),Y6e=j(()=>I(()=>import("./d69imh1iyv32gaf9.js").then(t=>t._),__vite__mapDeps([382,1])),{loading:t=>L(t)}),Z6e=j(()=>I(()=>import("./bzgf4ifuffcltugf.js").then(t=>t._),__vite__mapDeps([383,1])),{loading:t=>L(t)});function K6e({voice:t,voiceSpeed:e}){const[n,s]=_.useState(!1),o=Gb(),a=t.voice,i=t.preview_url,l=_.useRef({playPromise:null}).current,c=$b(p=>p.isPlaying&&p.sourceUrl===i);_.useEffect(()=>{o&&o.setSpeed(e)},[o,e]);const d=Ut(),u=_.useCallback(async()=>{if(!o)return;const p={voice:a,source:i};$t.previews.click(p);try{s(!0),o.changeSource(i),l.playPromise=o.play(),s(!1)}catch(g){$t.previews.error(g,p),d.danger(He({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}),{toastId:"voice_preview_player_play_error"})}},[o,i,a,l,d]),m=_.useCallback(()=>{o&&(l.playPromise?l.playPromise.then(()=>{o.stop(),l.playPromise=null}):o.stop())},[o,l]),f=_.useCallback(()=>{c?m():n||u()},[m,u,n,c]);return _.useEffect(()=>()=>{c&&m()},[t,c,m]),r.jsx(he,{onClick:f,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:n,icon:c?Y6e:Z6e,children:c?r.jsx(P,{id:"yGpEMJ",defaultMessage:"Stop"}):r.jsx(P,{id:"JwYDVp",defaultMessage:"Play"})})}var oB=["PageUp","PageDown"],aB=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rB={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},zd="Slider",[Iv,Q6e,J6e]=ob(zd),[iB]=wl(zd,[J6e]),[X6e,Y1]=iB(zd),lB=_.forwardRef((t,e)=>{const N=t,{name:n,min:s=0,max:o=100,step:a=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:m=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g}=N,h=Me(N,["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted","form"]),x=_.useRef(new Set),y=_.useRef(0),v=i==="horizontal"?eAe:tAe,[S=[],C]=ur({prop:u,defaultProp:d,onChange:R=>{var D;(D=[...x.current][y.current])==null||D.focus(),m(R)}}),k=_.useRef(S);function M(R){const O=rAe(S,R);A(R,O)}function T(R){A(R,y.current)}function E(){const R=k.current[y.current];S[y.current]!==R&&f(S)}function A(R,O,{commit:D}={commit:!1}){const F=dAe(a),V=uAe(Math.round((R-s)/a)*a+s,F),z=Ig(V,[s,o]);C(($=[])=>{const Y=oAe($,z,O);if(cAe(Y,c*a)){y.current=Y.indexOf(z);const Z=String(Y)!==String($);return Z&&D&&f(Y),Z?Y:$}else return $})}return r.jsx(X6e,{scope:t.__scopeSlider,name:n,disabled:l,min:s,max:o,valueIndexToChangeRef:y,thumbs:x.current,values:S,orientation:i,form:g,children:r.jsx(Iv.Provider,{scope:t.__scopeSlider,children:r.jsx(Iv.Slot,{scope:t.__scopeSlider,children:r.jsx(v,B(w({"aria-disabled":l,"data-disabled":l?"":void 0},h),{ref:e,onPointerDown:Rt(h.onPointerDown,()=>{l||(k.current=S)}),min:s,max:o,inverted:p,onSlideStart:l?void 0:M,onSlideMove:l?void 0:T,onSlideEnd:l?void 0:E,onHomeKeyDown:()=>!l&&A(s,0,{commit:!0}),onEndKeyDown:()=>!l&&A(o,S.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:O})=>{if(!l){const V=oB.includes(R.key)||R.shiftKey&&aB.includes(R.key)?10:1,z=y.current,$=S[z],Y=a*V*O;A($+Y,z,{commit:!0})}}}))})})})});lB.displayName=zd;var[cB,dB]=iB(zd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),eAe=_.forwardRef((t,e)=>{const v=t,{min:n,max:s,dir:o,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d}=v,u=Me(v,["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),[m,f]=_.useState(null),p=Rn(e,S=>f(S)),g=_.useRef(),h=sh(o),x=h==="ltr",y=x&&!a||!x&&a;function b(S){const C=g.current||m.getBoundingClientRect(),k=[0,C.width],T=$3(k,y?[n,s]:[s,n]);return g.current=C,T(S-C.left)}return r.jsx(cB,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:r.jsx(uB,B(w({dir:h,"data-orientation":"horizontal"},u),{ref:p,style:B(w({},u.style),{"--radix-slider-thumb-transform":"translateX(-50%)"}),onSlideStart:S=>{const C=b(S.clientX);i==null||i(C)},onSlideMove:S=>{const C=b(S.clientX);l==null||l(C)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:S=>{const k=rB[y?"from-left":"from-right"].includes(S.key);d==null||d({event:S,direction:k?-1:1})}}))})}),tAe=_.forwardRef((t,e)=>{const h=t,{min:n,max:s,inverted:o,onSlideStart:a,onSlideMove:i,onSlideEnd:l,onStepKeyDown:c}=h,d=Me(h,["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"]),u=_.useRef(null),m=Rn(e,u),f=_.useRef(),p=!o;function g(x){const y=f.current||u.current.getBoundingClientRect(),b=[0,y.height],S=$3(b,p?[s,n]:[n,s]);return f.current=y,S(x-y.top)}return r.jsx(cB,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:r.jsx(uB,B(w({"data-orientation":"vertical"},d),{ref:m,style:B(w({},d.style),{"--radix-slider-thumb-transform":"translateY(50%)"}),onSlideStart:x=>{const y=g(x.clientY);a==null||a(y)},onSlideMove:x=>{const y=g(x.clientY);i==null||i(y)},onSlideEnd:()=>{f.current=void 0,l==null||l()},onStepKeyDown:x=>{const b=rB[p?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:b?-1:1})}}))})}),uB=_.forwardRef((t,e)=>{const m=t,{__scopeSlider:n,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:c}=m,d=Me(m,["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"]),u=Y1(zd,n);return r.jsx(cn.span,B(w({},d),{ref:e,onKeyDown:Rt(t.onKeyDown,f=>{f.key==="Home"?(i(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):oB.concat(aB).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:Rt(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(p)?p.focus():s(f)}),onPointerMove:Rt(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&o(f)}),onPointerUp:Rt(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),a(f))})}))}),mB="SliderTrack",fB=_.forwardRef((t,e)=>{const a=t,{__scopeSlider:n}=a,s=Me(a,["__scopeSlider"]),o=Y1(mB,n);return r.jsx(cn.span,B(w({"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation},s),{ref:e}))});fB.displayName=mB;var jv="SliderRange",pB=_.forwardRef((t,e)=>{const f=t,{__scopeSlider:n}=f,s=Me(f,["__scopeSlider"]),o=Y1(jv,n),a=dB(jv,n),i=_.useRef(null),l=Rn(e,i),c=o.values.length,d=o.values.map(p=>hB(p,o.min,o.max)),u=c>1?Math.min(...d):0,m=100-Math.max(...d);return r.jsx(cn.span,B(w({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},s),{ref:l,style:B(w({},t.style),{[a.startEdge]:u+"%",[a.endEdge]:m+"%"})}))});pB.displayName=jv;var Pv="SliderThumb",gB=_.forwardRef((t,e)=>{const n=Q6e(t.__scopeSlider),[s,o]=_.useState(null),a=Rn(e,l=>o(l)),i=_.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return r.jsx(nAe,B(w({},t),{ref:a,index:i}))}),nAe=_.forwardRef((t,e)=>{const b=t,{__scopeSlider:n,index:s,name:o}=b,a=Me(b,["__scopeSlider","index","name"]),i=Y1(Pv,n),l=dB(Pv,n),[c,d]=_.useState(null),u=Rn(e,v=>d(v)),m=c?i.form||!!c.closest("form"):!0,f=DA(c),p=i.values[s],g=p===void 0?0:hB(p,i.min,i.max),h=aAe(s,i.values.length),x=f==null?void 0:f[l.size],y=x?iAe(x,g,l.direction):0;return _.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),r.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:"calc(".concat(g,"% + ").concat(y,"px)")},children:[r.jsx(Iv.ItemSlot,{scope:t.__scopeSlider,children:r.jsx(cn.span,B(w({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":i.min,"aria-valuenow":p,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0},a),{ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:Rt(t.onFocus,()=>{i.valueIndexToChangeRef.current=s})}))}),m&&r.jsx(sAe,{name:o!=null?o:i.name?i.name+(i.values.length>1?"[]":""):void 0,form:i.form,value:p},s)]})});gB.displayName=Pv;var sAe=t=>{const a=t,{value:e}=a,n=Me(a,["value"]),s=_.useRef(null),o=Nb(e);return _.useEffect(()=>{const i=s.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&d){const u=new Event("input",{bubbles:!0});d.call(i,e),i.dispatchEvent(u)}},[o,e]),r.jsx("input",B(w({style:{display:"none"}},n),{ref:s,defaultValue:e}))};function oAe(t=[],e,n){const s=[...t];return s[n]=e,s.sort((o,a)=>o-a)}function hB(t,e,n){const a=100/(n-e)*(t-e);return Ig(a,[0,100])}function aAe(t,e){return e>2?"Value ".concat(t+1," of ").concat(e):e===2?["Minimum","Maximum"][t]:void 0}function rAe(t,e){if(t.length===1)return 0;const n=t.map(o=>Math.abs(o-e)),s=Math.min(...n);return n.indexOf(s)}function iAe(t,e,n){const s=t/2,a=$3([0,50],[0,s]);return(s-a(e)*n)*n}function lAe(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function cAe(t,e){if(e>0){const n=lAe(t);return Math.min(...n)>=e}return!0}function $3(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function dAe(t){return(String(t).split(".")[1]||"").length}function uAe(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var H3=lB,W3=fB,_B=pB,z3=gB;const Nv=.5,Rv=2,xB=.1,yB=Math.round((Rv-Nv)/xB),mAe=Array.from({length:yB+1},(t,e)=>e),vB=2,Pp=8,w4=(Pp-vB)/2,fAe=t=>{const e=Number(t);return isNaN(e)?1:e};function pAe(){const t=G();return xe(t,"174366048")}function gAe(){const t=G();return xe(t,"3302173089")}const bB=()=>{const{value:t}=Z1(en.VoiceEnabled);return t!==!1};function QXe(){const t=pAe(),e=Ia(),n=gAe(),{isLoading:s,value:o,setValue:a}=Z1(en.VoiceSpeed),i=fAe(o),l=bB();if(!t)return null;const c=(e==null?void 0:e.length)&&!(e!=null&&e.includes(Rs.VideoScreenSharing));return r.jsxs(r.Fragment,{children:[l&&r.jsxs(r.Fragment,{children:[r.jsx(Yi,{children:r.jsx(xAe,{})}),r.jsx(Yi,{children:r.jsx(hAe,{voiceSpeed:i})})]}),n&&r.jsx(Yi,{children:r.jsx(_Ae,{voiceSpeed:i,setVoiceSpeed:a,isLoading:s})}),c&&r.jsx(Yi,{children:r.jsx(yAe,{})})]})}function Z1(t,e=!1){const{data:n,isLoading:s}=wo(t)||{},o=gd(e);return{isLoading:s,value:n,setValue:a=>{o.mutate({setting:t,value:a})}}}function hAe({voiceSpeed:t}){const{isLoading:e,value:n,setValue:s}=Z1(en.VoiceName),o=TO(),a=MO(),i=e?"":EO(n,a),l=o.find(({voice:c})=>c===i);return r.jsx(r.Fragment,{children:r.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(P,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),r.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?r.jsxs(r.Fragment,{children:[r.jsx(K6e,{voice:l,voiceSpeed:t}),r.jsx("div",{className:"h-4 border-s"})]}):null,r.jsxs(Dn.Root,{value:i,onValueChange:c=>s(c),disabled:e,children:[r.jsxs(Dn.Trigger,{children:[r.jsx(Dn.Value,{}),r.jsx(Dn.Icon,{})]}),r.jsx(Dn.Portal,{children:r.jsx(Dn.Content,{children:o.map(({voice:c,name:d})=>r.jsx(Dn.Item,{value:c,children:d},c))})})]})]})]})})})}function _Ae({voiceSpeed:t,setVoiceSpeed:e,isLoading:n}){const[s,o]=_.useState(t);return _.useEffect(()=>o(t),[t]),r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(P,{id:"speechSettings.content.voiceSpeed",defaultMessage:"Voice speed"})}),r.jsx("div",{className:"text-token-text-secondary tabular-nums",children:r.jsx(P,{id:"speechSettings.content.voiceSpeed.current",defaultMessage:"{value}x",values:{value:s.toFixed(1)}})})]}),r.jsx("div",{className:"w-full",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(H3,{className:"relative flex w-full items-center",min:Nv,max:Rv,step:xB,value:[s],disabled:n,onValueChange:a=>o(a[0]),onValueCommit:a=>{const i=a[0],l=Math.min(Rv,Math.max(Nv,i));e(l.toString())},children:[r.jsxs(W3,{className:"relative h-[4px] grow rounded-full",children:[r.jsx("div",{className:"bg-token-text-tertiary/30 absolute top-0 bottom-0 rounded-full",style:{left:w4,right:w4}}),r.jsx("div",{className:"pointer-events-none absolute top-0 bottom-0",style:{left:Pp/2,right:Pp/2},children:mAe.map(a=>r.jsx("div",{className:"bg-token-text-secondary/30 absolute top-[-2px] bottom-[-2px] rounded",style:{width:vB,left:"".concat(a/yB*100,"%"),transform:"translateX(-50%)"}},a))})]}),r.jsx(z3,{className:"bg-token-bg-primary border-token-bg-secondary block h-[24px] cursor-pointer rounded-full border focus:outline-none",style:{width:Pp}})]})})})]})}function xAe(){const{isLoading:t,value:e,setValue:n}=Z1(en.VoiceMainLanguage);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{children:r.jsx(P,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),r.jsxs(Dn.Root,{value:t?"":e!=null?e:_u.Auto,onValueChange:s=>n(s),disabled:t,children:[r.jsxs(Dn.Trigger,{children:[r.jsx(Dn.Value,{}),r.jsx(Dn.Icon,{})]}),r.jsx(Dn.Portal,{children:r.jsxs(Dn.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[r.jsx(Dn.Item,{value:_u.Auto,children:r.jsx(P,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(_u).filter(([s,o])=>o!==_u.Auto).map(([s,o])=>r.jsx(Dn.Item,{value:o,className:"capitalize",children:s},o))]})})]})]}),r.jsx(FA,{children:r.jsx(P,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function yAe(){const t=J();return r.jsx(_p,{label:t.formatMessage(k4.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:t.formatMessage(k4.voiceAndScreenSharingDescription)})}const k4=be({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}}),SB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M7.167 15.416V4.583a.75.75 0 0 1 1.5 0v10.833a.75.75 0 0 1-1.5 0Zm4.166-2.5V7.083a.75.75 0 0 1 1.5 0v5.833a.75.75 0 0 1-1.5 0ZM3 11.25V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Zm12.5 0V8.75a.75.75 0 0 1 1.5 0v2.5a.75.75 0 0 1-1.5 0Z"})),CB=Object.freeze(Object.defineProperty({__proto__:null,default:SB},Symbol.toStringTag,{value:"Module"}));class q3{constructor(e){ne(this,"namespace","Voice");e&&(this.namespace=e.namespace)}log(e,...n){}info(...e){this.log("log",...e)}debug(...e){this.log("debug",...e)}error(...e){this.log("error",...e)}createChild(e){return new q3({namespace:"".concat(this.namespace,":").concat(e)})}}const yi=new q3,za=t=>t===0?null:t+performance.timeOrigin,K1=t=>{const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];e[n]=za(s!=null?s:0)}return e},wB=Qe(void 0),kB=Qe(void 0),MB=Qe(void 0),TB=Qe(void 0),vAe=Qe(void 0),EB=Qe(void 0),AB=Qe(void 0),IB=Qe(void 0),jB=Qe(void 0),bAe=Qe(void 0),PB=Qe(void 0),NB=Qe(void 0),RB=Qe(void 0),JXe=()=>jd(()=>{const t=MB(),e=wB(),n=kB(),s=EB(),o=jB();return K1({pre_connection_setup_start_time:t==null?void 0:t.start_time,pre_connection_setup_end_time:t==null?void 0:t.end_time,audio_input_aquisition_start_time:e==null?void 0:e.start_time,audio_input_aquisition_end_time:e==null?void 0:e.end_time,audio_transceiver_setup_start_time:n==null?void 0:n.start_time,audio_transceiver_setup_end_time:n==null?void 0:n.end_time,post_connection_setup_start_time:s==null?void 0:s.start_time,post_connection_setup_end_time:s==null?void 0:s.end_time,quality_monitor_setup_start_time:o==null?void 0:o.start_time,quality_monitor_setup_end_time:o==null?void 0:o.end_time})}),XXe=()=>jd(()=>{const t=bAe(),e=PB(),n=NB(),s=RB(),o=TB(),a=vAe();return K1({pre_connect_get_peer_connection_start_time:t==null?void 0:t.start_time,pre_connect_get_peer_connection_end_time:t==null?void 0:t.end_time,pre_connect_data_channel_start_time:e==null?void 0:e.start_time,pre_connect_data_channel_end_time:e==null?void 0:e.end_time,pre_connect_event_handlers_start_time:n==null?void 0:n.start_time,pre_connect_event_handlers_end_time:n==null?void 0:n.end_time,pre_connect_blank_transceiver_start_time:s==null?void 0:s.start_time,pre_connect_blank_transceiver_end_time:s==null?void 0:s.end_time,pre_connect_create_offer_start_time:o==null?void 0:o.start_time,pre_connect_create_offer_end_time:o==null?void 0:o.end_time,pre_connect_create_abort_signal_start_time:a==null?void 0:a.start_time,pre_connect_create_abort_signal_end_time:a==null?void 0:a.end_time})}),eet=()=>jd(()=>{const t=AB(),e=IB();return K1({post_connect_set_remote_description_start_time:t==null?void 0:t.start_time,post_connect_set_remote_description_end_time:t==null?void 0:t.end_time,post_connect_get_response_text_start_time:e==null?void 0:e.start_time,post_connect_get_response_text_end_time:e==null?void 0:e.end_time})}),Y3=Qe(void 0),Z3=Qe(void 0),LB=Qe(void 0),tet=()=>jd(()=>{const t=Z3(),e=Y3();return K1({connect_auth_headers_start_time:t==null?void 0:t.start_time,connect_auth_headers_end_time:t==null?void 0:t.end_time,connect_new_form_start_time:e==null?void 0:e.start_time,connect_new_form_end_time:e==null?void 0:e.end_time})}),net=()=>{wB.set(void 0),kB.set(void 0),MB.set(void 0),EB.set(void 0),jB.set(void 0),PB.set(void 0),NB.set(void 0),RB.set(void 0),TB.set(void 0),AB.set(void 0),IB.set(void 0),Y3.set(void 0),Z3.set(void 0),LB.set(void 0)},M4=(t,e)=>{const n=performance.now(),s=e(),o=performance.now();return t.set({start_time:n,end_time:o}),s},set=async(t,e)=>{const n=performance.now(),s=await e(),o=performance.now();return t.set({start_time:n,end_time:o}),s},SAe=xs(t=>xe(t,"2783249450")),Q1=t=>SAe(t),CAe=window.location.origin+"/voice",OB=window.location.origin,DB=window.location.origin,wAe=[/\[abort\]/,/The user aborted a request/,/Fetch is aborted/,/Request signal is aborted/],kAe="v=0\r\no=- 0 0 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\na=ice-ufrag:foo\r\na=ice-pwd:barbazqux\r\na=fingerprint:sha-256 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00\r\na=setup:actpass\r\na=msid-semantic: WMS\r\nm=audio 9 UDP/TLS/RTP/SAVPF 111\r\nc=IN IP4 0.0.0.0\r\na=rtpmap:111 opus/48000/2\r\na=mid:0\r\na=rtcp-mux\r\n",MAe=t=>{const e=t instanceof Error?t.message:String(t);return wAe.some(n=>n.test(e))},FB=()=>{const t=Hn();return xe(t,"571174949")&&!0},T4=()=>{const t=FB(),e=t?DB:OB,n=t?"/realtime/status":"/v1/vp/status";return"".concat(e).concat(n)},hx=(t=!0)=>{const e=FB(),n=e?DB:OB,s=e?"/realtime/vp":"/v1/vp";return"".concat(n).concat(s).concat(t?"":"s")};async function E4(t,{payload:e,eventSource:n,url:s}){var i;const o={eventSource:n,voice:e.voice,voice_mode:(i=e.voice_mode)!=null?i:"undefined",voice_session_id:e.voice_session_id};performance.clearResourceTimings();const a=performance.now();$t.getToken.request(o);try{const l=await t();jd(()=>{const d=performance.getEntriesByType("resource").filter(m=>m.name.includes(s))[0],u={domain_lookup_start_time:null,domain_lookup_end_time:null,connect_end_time:null,connect_start_time:null,secure_connection_start_time:null,request_start_time:null,response_start_time:null,response_end_time:null,latency_ms:null};if(d){const{domainLookupEnd:m,domainLookupStart:f,connectEnd:p,connectStart:g,secureConnectionStart:h,requestStart:x,responseStart:y,responseEnd:b,duration:v}=d;u.domain_lookup_start_time=za(f),u.domain_lookup_end_time=za(m),u.connect_end_time=za(p),u.connect_start_time=za(g),u.secure_connection_start_time=za(h),u.request_start_time=za(x),u.response_start_time=za(y),u.response_end_time=za(b),u.latency_ms=v||null}yi.debug({timing:u,entry:d}),LB.set(u)});const c=performance.now()-a;return $t.getToken.success(B(w({},o),{durationMs:c})),l}catch(l){const c=performance.now()-a,d=MAe(l);throw $t.getToken.failure(B(w({},o),{durationMs:c,error:l instanceof Error?l.message:String(l),voice_session_id:e.voice_session_id,user_aborted:d})),l}}class Lv{static startLivekitSession(e,n,s){const o="".concat(CAe,"/get_token");return E4(()=>jc.post(o,e,{additionalHeaders:s?{[gc.ProofToken]:s}:{}}),{payload:e,eventSource:n,url:o})}static startTransceiverSession({payload:e,accessToken:n,proofOfWorkAnswer:s,eventSource:o,signal:a,dataChannelId:i=0,offer:l}){const c=e.voice_mode==="advanced",d="".concat(hx(c),"?dcid=").concat(i);return E4(async()=>{const u=M4(Z3,()=>Zu({accessToken:n}));delete u["cf-timezone"];let m={};const f=M4(Y3,()=>{const g=new FormData;return g.append("sdp",l.sdp),g.append("session",JSON.stringify(e)),g}),p=await fetch(d,{method:"POST",body:f,headers:w(w(w({},u),m),s?{[gc.ProofToken]:s}:{}),signal:a});if(!p.ok)throw new Error("Failed to create session: ".concat(p.statusText));return p},{payload:e,eventSource:o,url:d})}static prewarmRealtimeVoice(){const e={[gc.ProofToken]:"dummy"},n=w(w({},Zu({accessToken:"dummy"})),e),s=()=>{};jc.post(T4(),{requested_voice_mode:"prewarm"},{additionalHeaders:e}).catch(s);const o=()=>{const a=new FormData;return a.append("sdp",kAe),a.append("session",JSON.stringify({voice_mode:"prewarm"})),a};fetch("".concat(hx(!0),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s),fetch("".concat(hx(!1),"?dcid=0"),{method:"POST",body:o(),headers:n}).catch(s)}static async getVoiceStatus(e,n){var a;const s={eventSource:n,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await vr.getRequirementsToken();return $t.getVoiceStatus.request(s),pe.safePost("/conversation/voice/status",{requestBody:e,additionalHeaders:{[gc.ProofToken]:o}}).then(i=>($t.getVoiceStatus.success(s),i)).catch(i=>{throw $t.getVoiceStatus.failure(B(w({},s),{error:i==null?void 0:i.message})),i})}static async getRealtimeVoiceStatus(e,n){var a;const s={eventSource:n,requested_voice_mode:(a=e.requested_voice_mode)!=null?a:"null"},o=await vr.getRequirementsToken();return $t.getVoiceStatus.request(s),jc.post(T4(),e,{additionalHeaders:{[gc.ProofToken]:o}}).then(i=>($t.getVoiceStatus.success(s),i)).catch(i=>{throw $t.getVoiceStatus.failure(B(w({},s),{error:i==null?void 0:i.message})),i})}}const TAe=()=>{const t=G();return Q1(t)?Lv.getRealtimeVoiceStatus:Lv.getVoiceStatus},EAe=()=>[8,4,4,4,12].map(e=>Math.floor(Math.random()*Math.pow(10,e)).toString(16).padStart(e,"0").toUpperCase()).join("-");var nr=(t=>(t.StateUpdate="state_update",t.ActionRequest="action_request",t.ConversationUpdate="conversation_update",t.RelayMessage="relay_message",t.Unknown="unknown",t.UsageUpdate="usage_update",t.ToolUpdate="tool_update",t.TurnContext="turn_context",t.Performance="performance",t.StartupTelemetry="startup_telemetry",t.TrackState="track_state",t))(nr||{}),AAe=(t=>(t.StartListeningIntently="start_listening",t.StopListeningIntently="stop_listening",t.HaltAllActivity="stop_speaking",t.ResumeListening="resume_listening",t.RelayMessage="relay_message",t))(AAe||{}),IAe=(t=>(t.Connecting="connecting",t.Idle="idle",t.Connected="connected",t.Halted="halted",t.Listening="listening",t.ListeningIntently="listening_intently",t.Thinking="thinking",t.Speaking="speaking",t))(IAe||{}),Ov=(t=>(t.Add="add",t.Remove="remove",t))(Ov||{});let _x;const jAe=()=>(_x||(_x=new TextEncoder),_x);async function BB({room:t,event:e,voiceStore:n}){const s=jAe();await t.localParticipant.publishData(s.encode(JSON.stringify(e))),n.setState(o=>{o.server.messages.push(B(w({},e),{timestamp:new Date,source:"local"}))})}function oet(t,e,n,s){BB({room:t,voiceStore:e,event:{type:nr.TrackState,payload:{type:nr.TrackState,track_id:n==="camera_front"?"webcam":"screenshare",media_type:"video",media_source:n,state:s}}})}function PAe(t,e,n,s){BB({room:t,voiceStore:e,event:{type:nr.TrackState,payload:{type:nr.TrackState,track_id:"microphone",media_type:"audio",media_source:n,state:s}}})}class NAe{constructor(){ne(this,"logger",yi.createChild("VoiceTurnContext"));ne(this,"publish",async()=>{throw new Error("VoiceTurnContext does not have a set publisher.")});ne(this,"store",Nt(jm(Cn(()=>({parts:{},attachments:{}})))))}useState(e){return this.store(e||(n=>n))}setPublisher(e){this.publish=e}async add({parts:e,attachments:n}){if(!e&&!n)return;let s={},o={};n&&(s=Object.fromEntries(n.map(i=>[this.makeId("attachment"),i]))),e&&(o=Object.fromEntries(e.map(i=>[this.makeId("part"),i])));const a={type:nr.TurnContext,payload:{type:nr.TurnContext,action:Ov.Add,attachments:s,parts:o}};await this.publish(a),this.store.setState(i=>{i.parts=Object.assign(i.parts,o),i.attachments=Object.assign(i.attachments,s)}),this.logger.info("Added",{payload:a})}async remove({parts:e,attachments:n}){if(!e&&!n)return;this.logger.info("Removing turn context attachment",{parts:e,attachments:n});const s={},o={},a=this.store.getState();n&&n.forEach(l=>{a.attachments[l]&&(s[l]=a.attachments[l])}),e&&e.forEach(l=>{a.parts[l]&&(o[l]=a.parts[l])});const i={type:nr.TurnContext,payload:{type:nr.TurnContext,action:Ov.Remove,attachments:s,parts:o}};this.publish(i),this.store.setState(l=>{Object.keys(o).forEach(c=>{delete l.parts[c]}),Object.keys(s).forEach(c=>{delete l.attachments[c]})}),this.logger.info("Removed",{payload:i})}async clear(){this.store.setState(e=>{e.parts={},e.attachments={}}),this.logger.info("Cleared")}makeId(e){return"client:".concat(e?"".concat(e,":"):"").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,15))}}var RAe=(t=>(t.Starting="starting",t.Started="started",t.Stopping="stopping",t.Stopped="stopped",t))(RAe||{});const UB={conversationId:null,voiceSessionId:null,isActivityHalted:!1,isVoiceModeActive:!1,video:"stopped",screenshare:"stopped",dev:{room:null},credentials:{token:null,url:null,e2eeKey:null},server:{actions:null,connectionState:null,remoteState:null,messages:[],usage:null,toolUpdate:null,voiceConnectionQuality:null,turnContext:new NAe,relayReady:!1},disconnectPending:void 0,showVoicePicker:!1,showNuxFullPage:!1,metrics:{totalLatencyMs:[],currentRttMs:[],numSpeaking:0,numThinking:0,numListening:0,conversationLatency:0},hasConnectedOnce:!1},VB=t=>{const e=Nt(jm(Cn(()=>UB)));return t&&e.setState(t),e},LAe=VB(),GB=_.createContext(null),aet=({children:t,initializer:e})=>{const n=_.useRef(void 0);return n.current||(n.current=VB(e)),r.jsx(GB.Provider,{value:n.current,children:t})};function Hl(){const t=_.useContext(GB);return t!=null?t:LAe}function sd(t){return Hl()(t)}function ret(){const t=ue(()=>r2()),e=sd(s=>!!(s.credentials.token&&s.credentials.url&&s.credentials.e2eeKey)),n=sd(s=>s.server.connectionState==="connected");return t==="livekit"?e:n}function iet(){return Hl()(e=>e.voiceStatus)}function OAe(){const{voiceName:t}=O1(),e=Hl(),n=TAe();return _.useCallback(async function(o,a){var c;const i=EAe(),l=await n(B(w({},o),{timezone_offset_min:new Date().getTimezoneOffset(),nonce:Iz(),voice:(c=o.voice)!=null?c:t,voice_session_id:i}),a);return l!=null&&l.chatreq&&vr.startEnforcement(l==null?void 0:l.chatreq),e.setState({voiceStatus:l}),B(w({},l),{voice_session_id:i})},[t,n,e])}function cet(){const[t,e]=_.useState(!1),n=Hl(),s=_.useCallback(async()=>{e(!0);const o=n.getState().dev.room;if(o){const a=o.localParticipant.isMicrophoneEnabled,i=a?"mute":"unmute";$t.toggleMuteButton.click({toggleTo:i});try{await o.localParticipant.setMicrophoneEnabled(!a),PAe(o,n,"microphone",i==="mute"?"muted":"live")}finally{e(!1)}}},[n]);return{isMuting:t,toggleMute:s}}function det(t,e){if(t){const{credentials:n,conversationId:s,voiceSessionId:o,voiceMode:a}=t;yi.debug("setting credentials",t),e.setState(i=>{i.conversationId=s,i.credentials=n,i.voiceSessionId=o,i.voiceMode=a});return}yi.debug("clearing credentials"),DAe(e)}function uet(){const t=Hl(),e=sd(o=>o.video),n=_.useCallback(o=>{t.setState(a=>{const i=a.video?"off":"on";$t.toggleVideoButton.click({eventSource:o,toggleTo:i}),a.video==="stopped"?(a.screenshare==="started"&&(a.screenshare="stopping"),a.video="starting"):a.video="stopping"})},[t]),s=_.useCallback(o=>{t.setState(a=>{a.video=o})},[t]);return{cameraTrackState:e,finalizeCameraState:s,toggleCamera:n}}function met(){const t=sd(o=>o.screenshare),e=Hl(),n=_.useCallback(o=>{e.setState(a=>{const i=a.screenshare?"off":"on";$t.toggleScreenShareButton.click({eventSource:o,toggleTo:i}),a.screenshare==="stopped"?(a.video==="started"&&(a.video="stopping"),a.screenshare="starting"):a.screenshare="stopping"})},[e]),s=_.useCallback(o=>{e.setState(a=>{a.screenshare=o})},[e]);return{screenshareTrackState:t,toggleScreenShare:n,finalizeScreenshareState:s}}function DAe(t){t.setState(e=>B(w({},UB),{isVoiceModeActive:e.isVoiceModeActive,hasConnectedOnce:e.hasConnectedOnce}))}function fet(t){const e=t.default_voice_mode,n=t.modes.find(s=>s.mode===e);if(!n)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return n}const FAe="/assets/pcm-player-processor-Bnki682T.js";var ca,da,_m,Wc,Bo,Vi,$B;class A4 extends jz.EventEmitter{constructor({sampleRate:n=24e3,channels:s=1}={}){super();co(this,Bo);co(this,ca);co(this,da,null);co(this,_m);co(this,Wc);Fr(this,ca,new AudioContext({sampleRate:n,latencyHint:"playback"})),Fr(this,_m,s),Fr(this,da,null),Fr(this,Wc,!1)}async preload(){return await Qt(this,Bo,Vi).call(this),this}async stream(n){const s=await Qt(this,Bo,Vi).call(this);let o=0,a=await n.read();for(;!a.done;)this.emit("ready"),s.port.postMessage({type:"push",payload:{chunk:a.value}}),o+=a.value.byteLength,a=await n.read();Fr(this,Wc,!0),o===0&&this.emit("error")}async play(){Mn(this,ca).state==="suspended"&&await Mn(this,ca).resume(),(await Qt(this,Bo,Vi).call(this)).port.postMessage({type:"play"})}async pause(){(await Qt(this,Bo,Vi).call(this)).port.postMessage({type:"pause"})}async seek(n){(await Qt(this,Bo,Vi).call(this)).port.postMessage({type:"seek",payload:{seconds:n}})}async reset(){(await Qt(this,Bo,Vi).call(this)).port.postMessage({type:"reset"})}destroy(){this.removeAllListeners(),Mn(this,da)&&(Mn(this,da).disconnect(),Fr(this,da,null)),Mn(this,ca).close()}}ca=new WeakMap,da=new WeakMap,_m=new WeakMap,Wc=new WeakMap,Bo=new WeakSet,Vi=async function(){if(Mn(this,da))return Mn(this,da);await Mn(this,ca).audioWorklet.addModule(FAe);const n=new AudioWorkletNode(Mn(this,ca),"pcm-player");return n.connect(Mn(this,ca).destination),n.port.postMessage({type:"init",payload:{channels:Mn(this,_m)}}),n.port.onmessage=Qt(this,Bo,$B).bind(this),Fr(this,da,n),n},$B=function(n){switch(n.data.type){case"timeupdate":{this.emit("timeupdate",{seconds:n.data.payload.seconds,totalSeconds:n.data.payload.totalSeconds}),Mn(this,Wc)&&n.data.payload.seconds>=n.data.payload.totalSeconds&&this.emit("ended");break}}};const qg=Symbol("both-are-bad"),BAe=({serverThreadId:t})=>vb(Cn((e,n)=>{const s=(o,a)=>e(i=>{const l=i.paragens.find(c=>c.id===o);l&&a(l)});return{serverThreadId:t,paragens:[],playingId:null,selectedId:null,shouldShowAudioParagenPrompt:!1,shouldShowThankYouTooltip:!1,actions:{createAudioParagen:async o=>{var v,S,C;const{serverThreadId:a}=n();if(!a){const k=new Error("thread id is not set");throw Oe.addError(k),k}const i=_s(),l=_s();e(k=>{k.paragens[0]={id:i},k.paragens[1]={id:l}});const{forceParagen:c,forceParagenModel:d}=yd(),[u,m,f]=await Promise.all([pe.safePost("/generate_audio_paragen",{requestBody:w({conversation_id:a,message_id:o,paragen_ids:[i,l]},c?{force_paragen:!0,force_paragen_model_slug:d.value}:{}),skipJsonTransform:!0}),new A4().preload(),new A4().preload()]),p=(v=u.body)==null?void 0:v.getReader();if(!u.ok||!p){for(const k of[i,l])s(k,M=>{M.error=new Error("Failed to create audio paragen: ".concat(u.statusText))});return}const g={},h=k=>new ReadableStream({start(M){g[k]=M}}),x=(k,M)=>{k.on("ready",()=>s(M,T=>{T.player=k})).on("error",()=>s(M,T=>{T.error=!0}))};x(m,i),x(f,l),m.stream(h(i).getReader()),f.stream(h(l).getReader());const y=new TextDecoder;let b="";for(;;){const{value:k,done:M}=await p.read();if(M)break;b+=y.decode(k,{stream:!0});let T=b.indexOf("\n");for(;T!==-1;){const E=b.slice(0,T).trim();if(b=b.slice(T+1),E)try{const A=JSON.parse(E),N=A.paragen_id;if(A.chunk){const R=Uint8Array.from(atob(A.chunk),O=>O.charCodeAt(0));(S=g[N])==null||S.enqueue(R)}A.done&&((C=g[N])==null||C.close())}catch(A){}T=b.indexOf("\n")}}},playParagen:o=>{U.logEventWithStatsig("Audio Paragen: Play","chatgpt_audio_paragen_play",{paragen_id:o}),e(a=>{a.playingId=o})},pauseParagen:(o,a=!1)=>{a&&U.logEventWithStatsig("Audio Paragen: Pause","chatgpt_audio_paragen_pause",{paragen_id:o}),e(i=>{i.playingId===o&&(i.playingId=null)})},selectParagen:o=>{U.logEventWithStatsig("Audio Paragen: Select Option","chatgpt_audio_paragen_select_option",{paragen_id:o}),e(a=>{a.playingId=null,a.selectedId=o})},submitParagenResults:async(o,a,i)=>{const{paragens:l,selectedId:c,serverThreadId:d}=n();if(!d){const m=new Error("thread id is not set");throw Oe.addError(m),m}U.logEventWithStatsig("Audio Paragen: Submit Results","chatgpt_audio_paragen_submit_results");const u=await pe.safePost("/paragen_audio_submission",{requestBody:{conversation_id:d,user_prompt_message_id:o,displayed_paragen_ids:l.map(m=>m.id),selected_paragen_id:c===qg?null:c,reviews:a,stream_type:"stream",freeform_feedback:i},skipJsonTransform:!0});if(!u.ok){const m=new Error("Failed to create audio paragen: ".concat(u.statusText));throw Oe.addError(m,{conversationId:d,messageId:o}),m}},setShouldShowThankYouTooltip:o=>{e(a=>{a.shouldShowThankYouTooltip=o})},resetStore:()=>{e(o=>{var a;for(const i of o.paragens)(a=i.player)==null||a.destroy();o.paragens=[],o.playingId=null,o.selectedId=null})}}}}),Cm),J1=_.createContext(null);J1.displayName="AudioParagenStore";function UAe(){const t=_.useContext(J1);if(!t)throw new Error("useAudioParagenState must be used within a AudioParagenStoreProvider");return t}function VAe(t,e){const n=_.useContext(J1);if(n)return n(t,e)}function od(t,e){const n=UAe(),s=Pz(n,t,e);if(s===n.getState())throw new Error("Selector cannot return the entire state. Please select a specific part of the state.");return s}function X1(){return od(t=>t.actions)}function pet(t,e){const{createAudioParagen:n,resetStore:s}=X1(),{paragens:o}=od(a=>({paragens:a.paragens}));return _.useEffect(()=>{if(!(!e||!t))return n(t),()=>{s()}},[n,e,t,s]),o.every(a=>a.player&&!a.error)}function get({children:t,serverThreadId:e}){const n=_.useRef(null);return n.current==null&&(n.current=BAe({serverThreadId:e})),_.useEffect(()=>{const s=n.current;s&&!s.getState().serverThreadId&&e&&s.setState(o=>{o.serverThreadId=e})},[e]),r.jsx(J1.Provider,{value:n.current,children:t})}const HB=new Set;function het(t){return t?HB.has(t):!1}function GAe(t){HB.add(t)}function $Ae(){return typeof RTCPeerConnection<"u"&&typeof RTCPeerConnection.generateCertificate=="function"}function HAe(){"use forget";const t=$e(Ye.hasSeenAdvancedVoiceNuxFullPage);return!t.isLoading&&t.eligible}function WAe(t){$t.voiceAdvancedDisclosureShown.success(),t.setState(e=>{e.showNuxFullPage=!0})}function zAe(t,e){return W("relative flex h-9 items-center justify-center rounded-full disabled:text-gray-50 disabled:opacity-30",t?"min-w-8 p-2":e?"w-7":"w-9",e&&"h-7!","composer-secondary-button-color hover:opacity-80")}function qAe(){const t=J();return r.jsx("span",{className:"ps-1 pe-1 text-[13px] font-semibold whitespace-nowrap [[data-collapse-labels]_&]:sr-only",children:t.formatMessage({id:"composerSpeechUpsell.voiceLabel",defaultMessage:"Voice"})})}const YAe=j(()=>I(()=>import("./jz6627o4ye424akj.js"),__vite__mapDeps([384,1,29,30,385,386,387,388])).then(t=>t.VoiceModals)),ZAe=()=>{const t=Hl(),{isUnauthenticated:e}=Un(),n=HAe(),s=i2();return()=>{if(U.logEventWithStatsig("Composer Speech Button Clicked","composer_speech_button_clicked",{protocol:s}),e)return $t.voiceSelectionShown.click(e?{isUnauthenticated:!0,eventSource:"composerSpeechButton"}:{}),t.setState(a=>{a.showVoicePicker=!0});if(n)return WAe(t);t.setState(a=>{a.isVoiceModeActive=!0})}};function KAe({isSmall:t=!1,disableTooltip:e=!1,clientThreadId:n}){const s=G(),a=J().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),i=i2(),l=sd(p=>p.isVoiceModeActive),{loggedOutVoiceLabel:c}=ue(()=>Id(s)),{getUpsellLabelType:d}=HF(),u=pt(s)?d()==="all":c,m=ZAe(),f=Zb()?$Ae():!0;return r.jsxs(r.Fragment,{children:[r.jsx(QAe,{disabled:e,protocol:i,isRTCSupported:f,children:r.jsxs("button",{"data-testid":"composer-speech-button",onClick:m,"aria-label":a,disabled:!f||l,className:zAe(u,t),style:{viewTransitionName:"var(--vt-composer-speech-button)"},children:[r.jsx("div",{className:"flex items-center justify-center",children:r.jsx(SB,{className:"icon"})}),u&&r.jsx(qAe,{})]})}),r.jsx(YAe,{clientThreadId:n})]})}function QAe(t){return VAe(n=>n.shouldShowThankYouTooltip)?r.jsx(XAe,w({},t)):r.jsx(JAe,w({},t))}function JAe({children:t,disabled:e=!1,protocol:n,isRTCSupported:s}){const o=J();return r.jsx(kt,{open:e?!1:void 0,label:s?o.formatMessage(Yg.defaultTooltipLabel):o.formatMessage(Yg.webRTCNotSupportedLabel),side:"bottom",onOpenChange:a=>{a&&(U.logEvent("Composer Speech Button Hovered",{protocol:n}),$t.composerSpeechButton.hover())},children:t})}function XAe({children:t}){const{setShouldShowThankYouTooltip:e}=X1();return _.useEffect(()=>{const n=setTimeout(()=>{e(!1)},5e3);return()=>clearTimeout(n)},[e]),r.jsx(kt,{open:!0,label:r.jsx(P,w({},Yg.audioParagenThankYouLabelHeader)),secondaryLabel:r.jsx(P,w({},Yg.audioParagenThankYouLabelSubheader)),side:"top",withArrow:!0,children:t})}const Yg=be({audioParagenThankYouLabelHeader:{id:"ComposerSpeechButton.audioParagenThankYouLabelHeader",defaultMessage:"Thank you for your feedback!"},audioParagenThankYouLabelSubheader:{id:"ComposerSpeechButton.audioParagenThankYouLabelSubheader",defaultMessage:"Continue chatting with voice mode"},defaultTooltipLabel:{id:"ComposerSpeechButton.defaultTooltipLabel",defaultMessage:"Use voice mode"},webRTCNotSupportedLabel:{id:"ComposerSpeechButton.webRTCNotSupportedLabel",defaultMessage:"Voice mode unsupported"}}),e9e=j(()=>I(()=>import("./ecpt9jb1cc653p1n.js"),__vite__mapDeps([389,1,29,30,386,387,390,385,391,392,62,55,58,53,51,52,77])).then(t=>t.VoiceModeLayout)),t9e=j(()=>I(()=>import("./ohp971zrcpar3sy7.js"),__vite__mapDeps([393,1,29,30])).then(t=>t.VoiceConversationRating));function n9e(){const t=G(),e=i2();return xe(t,"482976135")&&e==="transceiver"}function K3(){const t=n9e();return!bB()||hd()?!1:N9()?t:!0}function _et(t){return K3()?r.jsx(e9e,w({},t)):null}function s9e(t){return K3()?r.jsx(t9e,w({},t)):null}const o9e=j(()=>I(()=>import("./o84nb2862ibyoi1c.js").then(t=>t._),__vite__mapDeps([331,1])),{loading:t=>L(t)}),I4=j(()=>I(()=>import("./b0t5nk82pz9yweia.js"),__vite__mapDeps([394,1,29,30,388,385,386,387,390,391,392,62,55,58,53,51,52,77,395])).then(t=>t.IntegratedUXComposerContainer));function a9e(t){"use forget";var A;const e=H.c(4),n=G(),s=!pt(n),a=Bh(r9e).length>0;let i;e[0]!==t.composerController?(i=()=>!gl(t.composerController),e[0]=t.composerController,e[1]=i):i=e[1];const l=ue(i),c=!a&&!l,{browseMode:d}=wa(),u=bi(),m=hd()&&!u,f=Es(),p=xe(n,"2360528850"),g=Il(),h=f&&!p,x=xe(n,"3728856343"),y=ut(n),b=Ia(),v=cs(n),S=vn(un);let C;e[2]!==n?(C=()=>Id(n),e[2]=n,e[3]=C):C=e[3];const{isSingleLine:k}=ue(C),{getShowVoiceUpsell:M}=HF();if(g)return"speech";if(t.inputState==="disabled"&&t.disableReason!=="pimBlock"||S&&k&&c&&t.state!=="streaming")return"disabled";const T=y!=null&&!v&&((A=b==null?void 0:b.includes(Rs.AllowVoiceUse))!=null?A:!1);return(!s&&T||s&&(x||M()))&&c&&t.state==="disabled"&&t.clientThreadId&&d!=="gizmo-editor"&&!m&&!h?"speech":"submit"}function r9e(t){return t.files}function xet(t){"use forget";const e=H.c(26),n=G();let s;e[0]!==n?(s=Nz(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=Il(),i=Ue(t.clientThreadId,i9e),l=a9e(t),c=K3();let d;e[2]!==t.composerController?(d=()=>Dh(t.composerController),e[2]=t.composerController,e[3]=d):d=e[3];const u=ue(d);if(l==="disabled"&&!i)return null;const m=t.state==="disabled",f=t.state==="streaming";let p;e[4]!==t.clientThreadId||e[5]!==t.composerController||e[6]!==t.disableReason||e[7]!==t.forceStopButton||e[8]!==t.isSmall||e[9]!==t.onSubmit||e[10]!==t.useStartButtonText||e[11]!==i||e[12]!==m||e[13]!==f?(p=r.jsx(l9e,{isSmall:t.isSmall,isDisabled:m,isStreaming:f,showSpinner:i,onSubmit:t.onSubmit,disableReason:t.disableReason,useStartButtonText:t.useStartButtonText,composerController:t.composerController,clientThreadId:t.clientThreadId,forceStopButton:t.forceStopButton}),e[4]=t.clientThreadId,e[5]=t.composerController,e[6]=t.disableReason,e[7]=t.forceStopButton,e[8]=t.isSmall,e[9]=t.onSubmit,e[10]=t.useStartButtonText,e[11]=i,e[12]=m,e[13]=f,e[14]=p):p=e[14];const g=p;if(a&&t.clientThreadId){let h;return e[15]!==u||e[16]!==t.clientThreadId||e[17]!==t.onSubmit?(h=r.jsx(I4,{clientThreadId:t.clientThreadId,isFocused:u,onComposerSubmit:t.onSubmit}),e[15]=u,e[16]=t.clientThreadId,e[17]=t.onSubmit,e[18]=h):h=e[18],h}if(l==="speech"&&t.clientThreadId&&c){let h;return e[19]!==o||e[20]!==u||e[21]!==t.clientThreadId||e[22]!==t.disableTooltip||e[23]!==t.isSmall||e[24]!==t.onSubmit?(h=o?r.jsx(I4,{clientThreadId:t.clientThreadId,isFocused:u,onComposerSubmit:t.onSubmit}):r.jsx("div",{className:t.isSmall?"min-w-7":"min-w-9","data-testid":"composer-speech-button-container",children:r.jsx(KAe,{isSmall:t.isSmall,clientThreadId:t.clientThreadId,disableTooltip:t.disableTooltip})}),e[19]=o,e[20]=u,e[21]=t.clientThreadId,e[22]=t.disableTooltip,e[23]=t.isSmall,e[24]=t.onSubmit,e[25]=h):h=e[25],h}return g}function i9e(t){var e,n;return!!(t!=null&&t.interruptionInProgress)&&!!((n=(e=me.getCurrentNode(t))==null?void 0:e.message.metadata)!=null&&n.n7jupd_message)}function l9e(t){"use forget";var V;const e=H.c(27),{onSubmit:n,isStreaming:s,isDisabled:o,showSpinner:a,disableReason:i,useStartButtonText:l,composerController:c,isSmall:d,clientThreadId:u,forceStopButton:m}=t;let f;e[0]!==c?(f=()=>gl(c),e[0]=c,e[1]=f):f=e[1];const p=ue(f),g=lee(u),h=s&&(!g||p||m),x=a?Ws:h?o9e:sB,y=J(),b=i==="async_task_pending"&&!g,v=GL(),S=o||b||a;let C;e[2]!==y||e[3]!==h?(C=h?y.formatMessage(Fi.stopStreamingLabel):y.formatMessage(Fi.sendPromptLabel),e[2]=y,e[3]=h,e[4]=C):C=e[4];const k=h?"stop-button":"send-button",M=h?"composer-secondary-button-color":"composer-submit-button-color",T=d?"h-7":"h-9",E=l&&!h?"w-fit px-3":d?"w-7":"w-9";let A;e[5]!==M||e[6]!==T||e[7]!==E?(A=W("composer-submit-btn",M,T,E),e[5]=M,e[6]=T,e[7]=E,e[8]=A):A=e[8];let N;e[9]!==x||e[10]!==h||e[11]!==l?(N=l&&!h?r.jsx("p",{className:"text-md font-medium",children:r.jsx(P,{id:"q2Rxh8",defaultMessage:"Start"})}):r.jsx(x,{className:"icon"}),e[9]=x,e[10]=h,e[11]=l,e[12]=N):N=e[12];let R;e[13]!==n||e[14]!==S||e[15]!==C||e[16]!==k||e[17]!==A||e[18]!==N?(R=r.jsx("button",{onClick:n,disabled:S,id:"composer-submit-button","aria-label":C,"data-testid":k,className:A,children:N}),e[13]=n,e[14]=S,e[15]=C,e[16]=k,e[17]=A,e[18]=N,e[19]=R):R=e[19];const O=R;let D;if(e[20]!==v||e[21]!==i||e[22]!==y){e:{if(!i){D=void 0;break e}const z=i==="file_upload_pending"?y.formatMessage(Fi.fileUploadPendingLabel):i==="rate_limit_hard_block"?y.formatMessage(Fi.rateLimitHardBlockLabel):i==="empty_text_content"?y.formatMessage(Fi.emptyTextContentLabel):i==="async_task_pending"?y.formatMessage(Fi.asyncTaskInProgressLabel):i==="no_source_selected_dr"?v.caterpillarNoneSelectedMessage:i==="text_content_too_long"?y.formatMessage(Fi.textContentTooLongLabel):void 0;if(z){D=z;break e}const $=(V=ine(i))==null?void 0:V.placeholder;if($){D=y.formatMessage($);break e}D=void 0}e[20]=v,e[21]=i,e[22]=y,e[23]=D}else D=e[23];const F=D;if(i&&o||b){let z;return e[24]!==O||e[25]!==F?(z=F?r.jsx(kt,{sideOffset:14,label:F,side:"bottom",children:O}):O,e[24]=O,e[25]=F,e[26]=z):z=e[26],z}return O}const Fi=be({stopStreamingLabel:{id:"+yfm/p",defaultMessage:"Stop streaming"},sendPromptLabel:{id:"xfIykB",defaultMessage:"Send prompt"},emptyTextContentLabel:{id:"LCVL2q",defaultMessage:"Message is empty"},textContentTooLongLabel:{id:"kDrqDJ",defaultMessage:"Message is too long"},fileUploadPendingLabel:{id:"Qv7jQN",defaultMessage:"File upload pending"},rateLimitHardBlockLabel:{id:"YhP4bh",defaultMessage:"Messages limit reached"},asyncTaskInProgressLabel:{id:"a959Km",defaultMessage:"Disabled"},bigBoxSubmitShortcutWindows:{id:"v8kTwt",defaultMessage:"Ctrl + Enter to send"},bigBoxSubmitShortcutMac:{id:"DC5el0",defaultMessage:" Enter to send"}}),c9e=j(()=>I(()=>import("./jlbpmfnxy8htpnjq.js").then(t=>t._),__vite__mapDeps([396,1])),{loading:t=>L(t)}),d9e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),u9e=({textdocId:t,userCreatedTextdoc:e,isCanvasOpen:n=!1,isFocused:s=!1})=>r.jsxs("div",{className:"group/file-tile relative",children:[r.jsx("button",{onClick:()=>{ML.removeTempTextdoc(t),oS()},className:"dark:border-token-main-surface-secondary absolute -start-1 -top-1 z-10 hidden rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white group-hover/file-tile:block dark:bg-white dark:text-black",children:r.jsx(d9e,{className:"icon-xs"})}),r.jsx(Tpe,{textdocId:t,clientThreadId:void 0,name:e.title,tag:e.type,icon:r.jsx(c9e,{className:"icon"}),size:"small",isCanvasOpen:n,isFocused:s,isInlinePreview:!0,isInferring:e.status===mo.INFERRING,onClick:()=>xi(t),children:r.jsx("div",{className:W("px-4 whitespace-pre",kg(e.type)&&"font-mono"),children:e.content})})]}),m9e=({textdocId:t,userCreatedTextdoc:e})=>{const n=rS(t),s=Wm();return r.jsx(u9e,{textdocId:t,userCreatedTextdoc:e,isFocused:n,isCanvasOpen:s})},f9e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)});function p9e({selectedApp:t}){const e=J(),n=be({removeItem:{id:"WorkWithAppsTile.removeItem",defaultMessage:"Remove"}});return r.jsxs("div",{className:"group border-token-border-default bg-token-main-surface-primary text-token-text-primary relative inline-block rounded-xl border p-2 text-sm",children:[r.jsxs("div",{className:"grid h-full grid-cols-[auto_1fr] items-center gap-2",children:[r.jsx("div",{className:"icon relative overflow-hidden",children:r.jsx(h9e,{app:t,className:"h-full w-full"})}),r.jsx("div",{className:"truncate font-semibold",children:_9e(t.name)})]}),r.jsx("button",{className:"dark:border-token-main-surface-secondary absolute end-1 top-1 translate-x-1/2 -translate-y-1/2 rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white transition-colors dark:bg-white dark:text-black",children:r.jsx(kt,{label:e.formatMessage(n.removeItem),side:"top",children:r.jsx(f9e,{className:"icon-xs"})})})]})}const g9e=r.jsx("span",{className:"pe-2 text-2xl",children:r.jsx(P,{id:"WorkWithAppsTile.defaultIcon",defaultMessage:""})});function h9e({app:t,className:e}){const[n,s]=_.useState(null);return _.useEffect(()=>{if(!t||!t.icon){s(null);return}const o=new Blob([Fg(t.icon.data)],{type:t.icon.mimeType}),a=URL.createObjectURL(o);return s(a),()=>{URL.revokeObjectURL(a)}},[t]),n?r.jsx("img",{src:n,alt:"",className:e}):g9e}function _9e(t){if(!t)return"";if(t.length<=32)return t;const n=t.substring(0,20),s=t.substring(t.length-9);return"".concat(n,"...").concat(s)}function x9e(t){if(t.length!==1)return!1;const{file:e,fileId:n}=t[0],s=ui(e)&&!!(e!=null&&e.type)&&e.type.startsWith("image/"),o=n!=null&&!!e&&Al(e.name);return s||o}function yet(t){"use forget";const e=H.c(34),{files:n,selectedApps:s,className:o,activeSystemHintType:a,disableEditButton:i,forceSmallView:l}=t;let c;e[0]!==s?(c=s===void 0?[]:s,e[0]=s,e[1]=c):c=e[1];const d=c,u=i===void 0?!1:i,m=l===void 0?!1:l,f=Io(),p=Ci(),g=Tv.useStore(),{updateSystemHint:h}=na(),x=Xo(),y=vn(un);let b;e[2]!==n?(b=x9e(n),e[2]=n,e[3]=b):b=e[3];const v=b,S=!u&&v&&a!==Ie.PictureV2,C=Dxe();let k;e[4]!==C?(k=C.map(v9e),e[4]=C,e[5]=k):k=e[5];let M;e[6]!==d?(M=d.map(y9e),e[6]=d,e[7]=M):M=e[7];let T;if(e[8]!==x||e[9]!==n||e[10]!==m||e[11]!==y||e[12]!==f||e[13]!==g||e[14]!==S||e[15]!==v||e[16]!==p||e[17]!==h){let A;e[19]!==x||e[20]!==m||e[21]!==y||e[22]!==f||e[23]!==g||e[24]!==S||e[25]!==v||e[26]!==p||e[27]!==h?(A=N=>{var R;return r.jsx(bR,{borderRadius:"2xl",width:f?"normal":"wide",onRemoveFileClick:()=>{ar.remove(p,N.tempId,"none"),g.removeFile(N.tempId)},useLargeImageThumbnailStyle:v&&!y&&!m,onImageEditClick:S?()=>{x&&h(Ie.PictureV2,{clientThreadId:x.id})}:void 0,file:N.file,fileId:(R=N.fileId)!=null?R:void 0,contextConnectorInfo:N.contextConnectorInfo,loadingPercentage:N.status===Rz.Uploading?N.progress:void 0},N.tempId)},e[19]=x,e[20]=m,e[21]=y,e[22]=f,e[23]=g,e[24]=S,e[25]=v,e[26]=p,e[27]=h,e[28]=A):A=e[28],T=n.map(A),e[8]=x,e[9]=n,e[10]=m,e[11]=y,e[12]=f,e[13]=g,e[14]=S,e[15]=v,e[16]=p,e[17]=h,e[18]=T}else T=e[18];let E;return e[29]!==o||e[30]!==k||e[31]!==M||e[32]!==T?(E=r.jsxs("div",{className:o,children:[k,M,T]}),e[29]=o,e[30]=k,e[31]=M,e[32]=T,e[33]=E):E=e[33],E}function y9e(t){return r.jsx(p9e,{selectedApp:t},t.id)}function v9e(t){return r.jsx(m9e,{textdocId:t.tempTextdocId,userCreatedTextdoc:t},t.tempTextdocId)}const b9e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),WB=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),vet=t=>{"use forget";const e=H.c(4),{replyRegions:n}=t;let s;e[0]!==n?(s=n.map(k9e),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("div",{className:"divide-token-border-default bg-token-main-surface-primary mx-1 mt-1 flex cursor-auto flex-col divide-y overflow-hidden rounded-t-[24px] rounded-b-lg",children:s}),e[2]=s,e[3]=o):o=e[3],o};function S9e(t){"use forget";const e=H.c(8),{value:n,hideQuotes:s,onRemoveRegion:o}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(X3,{children:r.jsx(WB,{className:"icon"})}),e[0]=a):a=e[0];const i=s?n:"".concat(n,"");let l;e[1]!==i?(l=r.jsx(eC,{children:i}),e[1]=i,e[2]=l):l=e[2];let c;e[3]!==o?(c=r.jsx(Q3,{onClick:o}),e[3]=o,e[4]=c):c=e[4];let d;return e[5]!==l||e[6]!==c?(d=r.jsxs(J3,{className:"text-token-text-secondary",children:[a,l,c]}),e[5]=l,e[6]=c,e[7]=d):d=e[7],d}function C9e(t){"use forget";const e=H.c(8),{value:n,onRemoveRegion:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(X3,{children:r.jsx(WB,{className:"icon"})}),e[0]=o):o=e[0];let a;e[1]!==n?(a=r.jsx(eC,{className:"font-semibold",children:n}),e[1]=n,e[2]=a):a=e[2];let i;e[3]!==s?(i=r.jsx(Q3,{onClick:s}),e[3]=s,e[4]=i):i=e[4];let l;return e[5]!==a||e[6]!==i?(l=r.jsxs(J3,{className:"text-blue-400",children:[o,a,i]}),e[5]=a,e[6]=i,e[7]=l):l=e[7],l}function w9e(t){"use forget";const e=H.c(10),{value:n,icon:s,onRemoveRegion:o}=t;let a;e[0]!==s?(a=r.jsx(X3,{className:"mt-0",children:s}),e[0]=s,e[1]=a):a=e[1];let i;e[2]!==n?(i=r.jsx(eC,{className:"text-token-text-primary font-semibold",children:n}),e[2]=n,e[3]=i):i=e[3];let l;e[4]!==o?(l=r.jsx(Q3,{onClick:o}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==a||e[7]!==i||e[8]!==l?(c=r.jsxs(J3,{children:[a,i,l]}),e[6]=a,e[7]=i,e[8]=l,e[9]=c):c=e[9],c}function Q3(t){"use forget";const e=H.c(6),{onClick:n}=t,s=J();let o;e[0]!==s?(o=s.formatMessage({id:"PlVqJ1",defaultMessage:"Remove"}),e[0]=s,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx(b9e,{className:"icon"}),e[2]=a):a=e[2];let i;return e[3]!==n||e[4]!==o?(i=r.jsx("button",{onClick:n,type:"button",className:"text-token-text-secondary flex h-9 w-9 shrink-0 items-center justify-center","aria-label":o,children:a}),e[3]=n,e[4]=o,e[5]=i):i=e[5],i}var i6;const J3=ct.div(i6||(i6=rt(["bg-token-main-surface-secondary dark:bg-token-main-surface-tertiary flex items-start py-1 gap-1.5 px-1.5 text-sm"])));var l6;const X3=ct.span(l6||(l6=rt(["shrink-0 w-9 h-9 flex justify-center items-center"])));var c6;const eC=ct.span(c6||(c6=rt(["flex-1 line-clamp-3 py-2"])));function k9e(t,e){switch(t.type){case"text":return r.jsx(S9e,{value:t.value,hideQuotes:t.hideQuotes,onRemoveRegion:t.onRemoveRegion},e);case"object":return r.jsx(C9e,{value:t.value,onRemoveRegion:t.onRemoveRegion},e);case"mention":case"system_hint":return r.jsx(w9e,{value:t.value,icon:t.icon,onRemoveRegion:t.onRemoveRegion},e)}return null}const M9e="_fallbackTextarea_1dsxi_2",j4={"prosemirror-parent":"_prosemirror-parent_1dsxi_2",fallbackTextarea:M9e},T9e=be({informationSeekingAskLatestNews:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askLatestNews",defaultMessage:"Ask for the latest news"},informationSeekingAskTodaysWeather:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTodaysWeather",defaultMessage:"Ask about today's weather"},informationSeekingAskFunTrivia:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askFunTrivia",defaultMessage:"Ask for fun trivia"},informationSeekingAskFamousQuotes:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askFamousQuotes",defaultMessage:"Ask for famous quotes"},informationSeekingAskShortExplainer:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askShortExplainer",defaultMessage:"Ask for a short explainer"},informationSeekingAskMovieSuggestions:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askMovieSuggestions",defaultMessage:"Ask for movie suggestions"},informationSeekingAskBookSummaries:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askBookSummaries",defaultMessage:"Ask for book summaries"},informationSeekingAskTravelRecommendations:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTravelRecommendations",defaultMessage:"Ask for travel recommendations"},informationSeekingAskPopularLocalRestaurants:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askPopularLocalRestaurants",defaultMessage:"Ask about popular local restaurants"},informationSeekingAskLatestGameScore:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askLatestGameScore",defaultMessage:"Ask for the latest game score"},informationSeekingAskRecipeIdeas:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askRecipeIdeas",defaultMessage:"Ask for recipe ideas"},informationSeekingAskProductReviews:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askProductReviews",defaultMessage:"Ask for product reviews"},informationSeekingAskTranslationHelp:{id:"PromptTextarea.rotatingPlaceholders.informationSeeking.askTranslationHelp",defaultMessage:"Ask for translation help"},howToAskHelpAchievingGoal:{id:"PromptTextarea.rotatingPlaceholders.howTo.askHelpAchievingGoal",defaultMessage:"Ask for help achieving a goal"},howToAskFixSomething:{id:"PromptTextarea.rotatingPlaceholders.howTo.askFixSomething",defaultMessage:"Ask how to fix something"},howToAskStayOrganized:{id:"PromptTextarea.rotatingPlaceholders.howTo.askStayOrganized",defaultMessage:"Ask how to stay organized"},howToAskBudgetBetter:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBudgetBetter",defaultMessage:"Ask how to budget better"},howToAskImproveFocus:{id:"PromptTextarea.rotatingPlaceholders.howTo.askImproveFocus",defaultMessage:"Ask how to improve your focus"},howToAskBuildHabit:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBuildHabit",defaultMessage:"Ask how to build a habit"},howToAskManageStressTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askManageStressTips",defaultMessage:"Ask for tips to manage stress"},howToAskBakeBread:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBakeBread",defaultMessage:"Ask how to bake bread"},howToAskBoostCreativityTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askBoostCreativityTips",defaultMessage:"Ask for tips to boost creativity"},howToAskNegotiateSalary:{id:"PromptTextarea.rotatingPlaceholders.howTo.askNegotiateSalary",defaultMessage:"Ask how to negotiate a salary"},howToAskTripPlanningTips:{id:"PromptTextarea.rotatingPlaceholders.howTo.askTripPlanningTips",defaultMessage:"Ask for trip planning tips"},howToAskWriteResume:{id:"PromptTextarea.rotatingPlaceholders.howTo.askWriteResume",defaultMessage:"Ask how to write a resume"},howToAskMakeCoffee:{id:"PromptTextarea.rotatingPlaceholders.howTo.askMakeCoffee",defaultMessage:"Ask how to make coffee"},howToAskUseExcel:{id:"PromptTextarea.rotatingPlaceholders.howTo.askUseExcel",defaultMessage:"Ask how to use Excel"},howToAskRefreshDecor:{id:"PromptTextarea.rotatingPlaceholders.howTo.askRefreshDecor",defaultMessage:"Ask how to refresh your decor"},howToAskManageTime:{id:"PromptTextarea.rotatingPlaceholders.howTo.askManageTime",defaultMessage:"Ask how to manage time"},howToAskNetworkEffectively:{id:"PromptTextarea.rotatingPlaceholders.howTo.askNetworkEffectively",defaultMessage:"Ask how to network effectively"},howToAskStayMotivated:{id:"PromptTextarea.rotatingPlaceholders.howTo.askStayMotivated",defaultMessage:"Ask how to stay motivated"},educationAskExplainConcept:{id:"PromptTextarea.rotatingPlaceholders.education.askExplainConcept",defaultMessage:"Ask to explain a concept"},educationAskStudyTips:{id:"PromptTextarea.rotatingPlaceholders.education.askStudyTips",defaultMessage:"Ask for study tips"},educationAskMathHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askMathHelp",defaultMessage:"Ask for help with a math problem"},educationAskTopicOverview:{id:"PromptTextarea.rotatingPlaceholders.education.askTopicOverview",defaultMessage:"Ask for a topic overview"},educationAskHistoryPeriod:{id:"PromptTextarea.rotatingPlaceholders.education.askHistoryPeriod",defaultMessage:"Ask about a period in history"},educationAskTestPrepHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askTestPrepHelp",defaultMessage:"Ask for test prep help"},educationAskLearnLanguage:{id:"PromptTextarea.rotatingPlaceholders.education.askLearnLanguage",defaultMessage:"Ask for help learning a language"},educationAskSimplifyIdeas:{id:"PromptTextarea.rotatingPlaceholders.education.askSimplifyIdeas",defaultMessage:"Ask for help simplifying ideas"},educationAskMemoryTricks:{id:"PromptTextarea.rotatingPlaceholders.education.askMemoryTricks",defaultMessage:"Ask for tricks to help memory"},educationAskStructureEssay:{id:"PromptTextarea.rotatingPlaceholders.education.askStructureEssay",defaultMessage:"Ask how to structure an essay"},educationAskHomeworkHelp:{id:"PromptTextarea.rotatingPlaceholders.education.askHomeworkHelp",defaultMessage:"Ask for homework help"},educationAskCustomizedQuiz:{id:"PromptTextarea.rotatingPlaceholders.education.askCustomizedQuiz",defaultMessage:"Ask for a customized quiz"},educationAskGrammarCheck:{id:"PromptTextarea.rotatingPlaceholders.education.askGrammarCheck",defaultMessage:"Ask for a grammar check"},educationAskCodingBasics:{id:"PromptTextarea.rotatingPlaceholders.education.askCodingBasics",defaultMessage:"Ask for help with coding basics"},writingAskDraftMessages:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftMessages",defaultMessage:"Ask to draft messages"},writingAskDraftText:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftText",defaultMessage:"Ask to draft a text"},writingAskDraftEmail:{id:"PromptTextarea.rotatingPlaceholders.writing.askDraftEmail",defaultMessage:"Ask to draft an email"},writingAskToneSuggestions:{id:"PromptTextarea.rotatingPlaceholders.writing.askToneSuggestions",defaultMessage:"Ask for tone suggestions"},writingAskSmallTalkTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askSmallTalkTips",defaultMessage:"Ask for small talk tips"},writingAskPersuasiveTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askPersuasiveTips",defaultMessage:"Ask for persuasive writing tips"},writingAskBlogIdeas:{id:"PromptTextarea.rotatingPlaceholders.writing.askBlogIdeas",defaultMessage:"Ask for blog ideas"},writingAskSocialMediaCaptions:{id:"PromptTextarea.rotatingPlaceholders.writing.askSocialMediaCaptions",defaultMessage:"Ask for social media captions"},writingAskStorytellingAdvice:{id:"PromptTextarea.rotatingPlaceholders.writing.askStorytellingAdvice",defaultMessage:"Ask for storytelling advice"},writingAskOutlineSpeech:{id:"PromptTextarea.rotatingPlaceholders.writing.askOutlineSpeech",defaultMessage:"Ask to outline a speech"},writingAskCreativePrompts:{id:"PromptTextarea.rotatingPlaceholders.writing.askCreativePrompts",defaultMessage:"Ask for creative prompts"},writingAskSocialMediaCopy:{id:"PromptTextarea.rotatingPlaceholders.writing.askSocialMediaCopy",defaultMessage:"Ask for social media copy"},writingAskHeadlineIdeas:{id:"PromptTextarea.rotatingPlaceholders.writing.askHeadlineIdeas",defaultMessage:"Ask for headline ideas"},writingAskSummarizeText:{id:"PromptTextarea.rotatingPlaceholders.writing.askSummarizeText",defaultMessage:"Ask to summarize text"},writingAskPresentationTips:{id:"PromptTextarea.rotatingPlaceholders.writing.askPresentationTips",defaultMessage:"Ask for presentation tips"},writingAskFeedbackPhrasing:{id:"PromptTextarea.rotatingPlaceholders.writing.askFeedbackPhrasing",defaultMessage:"Ask for feedback phrasing"},healthAskDailyMotivation:{id:"PromptTextarea.rotatingPlaceholders.health.askDailyMotivation",defaultMessage:"Ask for daily motivation"},healthAskHealthyHabits:{id:"PromptTextarea.rotatingPlaceholders.health.askHealthyHabits",defaultMessage:"Ask for simple healthy habits"},healthAskMindfulnessTips:{id:"PromptTextarea.rotatingPlaceholders.health.askMindfulnessTips",defaultMessage:"Ask for mindfulness tips"},healthAskSleepBetter:{id:"PromptTextarea.rotatingPlaceholders.health.askSleepBetter",defaultMessage:"Ask how to sleep better"},healthAskProteinRecipes:{id:"PromptTextarea.rotatingPlaceholders.health.askProteinRecipes",defaultMessage:"Ask for protein-packed recipes"},healthAskTwentyMinuteWorkouts:{id:"PromptTextarea.rotatingPlaceholders.health.askTwentyMinuteWorkouts",defaultMessage:"Ask for 20-minute workout ideas"},healthAskMeditationTechniques:{id:"PromptTextarea.rotatingPlaceholders.health.askMeditationTechniques",defaultMessage:"Ask for meditation techniques"},healthAskSelfCareIdeas:{id:"PromptTextarea.rotatingPlaceholders.health.askSelfCareIdeas",defaultMessage:"Ask for simple self-care ideas"},healthAskBoostEnergy:{id:"PromptTextarea.rotatingPlaceholders.health.askBoostEnergy",defaultMessage:"Ask how to boost your energy"},healthAskHydrationTips:{id:"PromptTextarea.rotatingPlaceholders.health.askHydrationTips",defaultMessage:"Ask for hydration tips"},healthAskStretchingRoutines:{id:"PromptTextarea.rotatingPlaceholders.health.askStretchingRoutines",defaultMessage:"Ask for stretching routines"},healthAskNutritionInfo:{id:"PromptTextarea.rotatingPlaceholders.health.askNutritionInfo",defaultMessage:"Ask for nutritional info for a food"},healthAskStressReliefTips:{id:"PromptTextarea.rotatingPlaceholders.health.askStressReliefTips",defaultMessage:"Ask for stress-relief tips"},healthAskDeskExercises:{id:"PromptTextarea.rotatingPlaceholders.health.askDeskExercises",defaultMessage:"Ask for exercises to do at your desk"},healthAskProductivityHacks:{id:"PromptTextarea.rotatingPlaceholders.health.askProductivityHacks",defaultMessage:"Ask for productivity hacks"}}),Yr=[{id:"informationSeeking",messageKeys:["informationSeekingAskLatestNews","informationSeekingAskTodaysWeather","informationSeekingAskFunTrivia","informationSeekingAskFamousQuotes","informationSeekingAskShortExplainer","informationSeekingAskMovieSuggestions","informationSeekingAskBookSummaries","informationSeekingAskTravelRecommendations","informationSeekingAskPopularLocalRestaurants","informationSeekingAskLatestGameScore","informationSeekingAskRecipeIdeas","informationSeekingAskProductReviews","informationSeekingAskTranslationHelp"]},{id:"howToGuidance",messageKeys:["howToAskHelpAchievingGoal","howToAskFixSomething","howToAskStayOrganized","howToAskBudgetBetter","howToAskImproveFocus","howToAskBuildHabit","howToAskManageStressTips","howToAskBakeBread","howToAskBoostCreativityTips","howToAskNegotiateSalary","howToAskTripPlanningTips","howToAskWriteResume","howToAskMakeCoffee","howToAskUseExcel","howToAskRefreshDecor","howToAskManageTime","howToAskNetworkEffectively","howToAskStayMotivated"]},{id:"educationLearning",messageKeys:["educationAskExplainConcept","educationAskStudyTips","educationAskMathHelp","educationAskTopicOverview","educationAskHistoryPeriod","educationAskTestPrepHelp","educationAskLearnLanguage","educationAskSimplifyIdeas","educationAskMemoryTricks","educationAskStructureEssay","educationAskHomeworkHelp","educationAskCustomizedQuiz","educationAskGrammarCheck","educationAskCodingBasics"]},{id:"writingCommunication",messageKeys:["writingAskDraftMessages","writingAskDraftText","writingAskDraftEmail","writingAskToneSuggestions","writingAskSmallTalkTips","writingAskPersuasiveTips","writingAskBlogIdeas","writingAskSocialMediaCaptions","writingAskStorytellingAdvice","writingAskOutlineSpeech","writingAskCreativePrompts","writingAskSocialMediaCopy","writingAskHeadlineIdeas","writingAskSummarizeText","writingAskPresentationTips","writingAskFeedbackPhrasing"]},{id:"healthWellness",messageKeys:["healthAskDailyMotivation","healthAskHealthyHabits","healthAskMindfulnessTips","healthAskSleepBetter","healthAskProteinRecipes","healthAskTwentyMinuteWorkouts","healthAskMeditationTechniques","healthAskSelfCareIdeas","healthAskBoostEnergy","healthAskHydrationTips","healthAskStretchingRoutines","healthAskNutritionInfo","healthAskStressReliefTips","healthAskDeskExercises","healthAskProductivityHacks"]}];function E9e(t,e,n,s){return t.current&&(clearInterval(t.current),t.current=null),_.startTransition(()=>{n(),t.current=window.setInterval(()=>{_.startTransition(()=>{s()})},e)}),()=>{t.current&&(clearInterval(t.current),t.current=null)}}function A9e(){return{finished:Promise.resolve(),ready:Promise.resolve(),skipTransition:()=>{},types:new Set,updateCallbackDone:Promise.resolve()}}function I9e(){return"ViewTransitionTypeSet"in document}function zB({forceFlushSync:t,update:e,className:n,types:s}){var o;if("startViewTransition"in document){let a;const i=I9e();s&&document.documentElement.setAttribute("active-view-transition-type",s.join(","));const l=["active-view-transition"];return n&&(Array.isArray(n)?l.push(...n):l.push(n)),document.documentElement.classList.add(...l),i?a=document.startViewTransition({update:()=>{if(document.documentElement.classList.add("update-callback-done"),t)fi.flushSync(e);else return e()},types:s}):a=document.startViewTransition(()=>{if(document.documentElement.classList.add("update-callback-done"),t)fi.flushSync(e);else return e()}),(o=a.finished)==null||o.then(async()=>{await Yp.yield(),document.documentElement.classList.remove(...l,"update-callback-done"),document.documentElement.removeAttribute("active-view-transition-type")}),a}else{const a=A9e();return setTimeout(()=>{e()},0),a}}const j9e={"composer-slide":"_composer-slide_rfswj_125","composer-placeholder-rotate":"_composer-placeholder-rotate_rfswj_135","pinned-widget":"_pinned-widget_rfswj_196","becoming-inline":"_becoming-inline_rfswj_240","becoming-pinned":"_becoming-pinned_rfswj_261","fullscreen-widget-composer-transition":"_fullscreen-widget-composer-transition_rfswj_280","fullscreen-popover-thread-opening-transition":"_fullscreen-popover-thread-opening-transition_rfswj_294","fullscreen-popover-thread-closing-transition":"_fullscreen-popover-thread-closing-transition_rfswj_295"},P9e=3500;function xx(){return Yr.length===0?{nextCategoryIndex:0}:{nextCategoryIndex:Yr.length>1?1:0}}const bet=({composerController:t,placeholder:e,disableAutoFocus:n=!1,textareaMaxHeightClassName:s="max-h-[max(35svh,5rem)]",fontSize:o="base",enableRotatingPlaceholders:a=!1})=>{"use no forget";const i=_.useRef(null),l=_.useRef(null),c=_.useRef(!1),d=_.useRef(null),u=_.useRef(xx()),m=G(),f=J(),p=ue(()=>L9()),g=E9(m),h=ue(g.composer.autofocusDisabled$),x=_.useRef(n||h),y=T=>Math.floor(Math.random()*T),b=_.useCallback(T=>{if(T.messageKeys.length===0)return null;const E=y(T.messageKeys.length),A=T.messageKeys[E];return{messageKey:A,placeholder:f.formatMessage(T9e[A])}},[f]),v=_.useMemo(()=>{var A;if(!a)return e;const T=Yr[0],E=T!=null?b(T):null;return(A=E==null?void 0:E.placeholder)!=null?A:e},[a,b,e]),[S,C]=_.useState(()=>a?v:e),k=_.useCallback((T,{withTransition:E=!0}={})=>{const A=()=>{C(T)},N=typeof document<"u"&&document.querySelector('[data-modal-layer="overlay"]')!==null;if(!E||p||N){A();return}zB({className:j9e["composer-placeholder-rotate"],update:A})},[p]),M=_.useCallback(()=>{var R;if(Yr.length===0)return;const T=u.current,E=(R=T.nextCategoryIndex)!=null?R:0,A=Yr[E];if(T.nextCategoryIndex=(E+1)%Yr.length,!A)return;const N=b(A);N&&(k(N.placeholder),U.logEventWithStatsig("chatgpt_web_prompttextarea_placeholder_rotated","chatgpt_web_prompttextarea_placeholder_rotated",{category:A.id,message_key:N.messageKey}),Ee.count(Ae.DEFAULT,"chatgpt_web_prompttextarea_placeholder_rotated",{category:A.id,message_key:N.messageKey}))},[k,b]);return En(()=>{if(c.current||!i.current)return;const T=Et(t);c.current=!0;const E=l.current;if(E!=null){const{value:A,selectionStart:N,selectionEnd:R}=E;T.dispatch(T.state.tr.insertText(A)),T.dispatch(T.state.tr.setSelection(R9.create(T.state.doc,N+1,R+1))),E.style.display="none",E.value=""}i.current.appendChild(T.dom),T.dom.id=cg,T.dom.dataset.virtualkeyboard="true",dne(T.dom),x.current||Eo(Et(t))},[t]),_.useEffect(()=>{if(!a||Yr.length===0)return;u.current=xx();const T=Yr[0];if(T){const E=b(T);E&&k(E.placeholder,{withTransition:!1})}return E9e(d,P9e,()=>{},M)},[a,k,b,M]),_.useEffect(()=>{a||C(e)},[e,a]),_.useEffect(()=>{a||(u.current=xx())},[a]),_.useEffect(()=>{const T=i.current;if(!T)return;const E=Et(t);return Ul({target:E.dom,axis:"height",onChange:({height:A,previousHeight:N})=>{if(hn(()=>VC(t))&&N!=null&&A>N)return;const R=document.createElement("span");R.textContent="",R.inert=!0;const O=getComputedStyle(E.dom);for(const F of["font-size","line-height","padding-top","padding-bottom"])R.style.setProperty(F,O.getPropertyValue(F));R.style.position="absolute",T.appendChild(R);const D=R.offsetHeight;T.removeChild(R),VC.set(t,A>D)}})},[t]),_.useEffect(()=>{Lz(Et(t),S)},[S,t]),_.useEffect(()=>{Oe.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted")},[]),r.jsxs("div",{ref:i,onKeyDown:()=>{Yp.postTask(()=>{Hs.prefetch()},{priority:"background"})},className:W([j4["prosemirror-parent"],"text-token-text-primary",s,"max-h-52","flex-1 overflow-auto [scrollbar-width:thin]",N9()?"firefox":"default-browser"],"vertical-scroll-fade-mask"),"data-size":o!=="base"?o:void 0,children:[r.jsx("textarea",{className:j4.fallbackTextarea,name:cg,autoFocus:!x.current,placeholder:S,ref:l,"data-virtualkeyboard":!0}),r.jsx(wpe,{scriptSrc:"window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))"})]})},N9e=4,qB=.0025;function Cet(n){var s=n,{composerController:t}=s,e=Me(s,["composerController"]);const{waveformData$:o}=F3(t),a=ue(o);return a?r.jsx(R9e,w({waveform:a},e)):null}function R9e({waveform:t,progressPercentage:e,barWidth:n=N9e,normalize:s=!1,scaleFactor:o=10,initialValue:a=qB,silentColor:i,activeColor:l,className:c}){const d=_.useRef(null),u=Zo(),m=i!=null?i:u?"#000":"#CCC",f=l!=null?l:u?"#CCC":"#000",[p,g]=_.useState(300);_.useEffect(()=>{d.current&&g(d.current.clientWidth)},[]);const{soundBars:h,firstAudioBarIndex:x}=_.useMemo(()=>{const y=t.length,b=Math.floor(p/n),v=y/b;let S=-1;const C=[];for(let M=0;M<b;M++){const T=Math.floor(M*v),E=Math.min(Math.floor((M+1)*v),y);if(T>=E){C.push(0);continue}let A=0;for(let R=T;R<E;R++)A+=Math.abs(t[R]);const N=A/(E-T);S===-1&&N>a&&(S=M),C.push(N)}let k=C;if(s){const T=1/(Math.max(...k)||1);k=k.map(E=>{const A=E*T;return Math.max(Math.min(A,.92),.08)})}return{soundBars:k,firstAudioBarIndex:S}},[t,p,n,s,a]);return _.useEffect(()=>{const y=d.current,b=y==null?void 0:y.getContext("2d");if(!y||!b)return;const v=window.devicePixelRatio,{clientHeight:S,clientWidth:C}=y;y.width=C*v,y.height=S*v,b.clearRect(0,0,y.width,y.height);const k=S*v*.5;b.translate(0,k);const M=y.width/h.length;for(let T=0;T<h.length;T++){let E=h[T];s||(E*=o);const A=E*k,N=T*M;if(typeof e=="number"){const O=(h.length-T)/h.length<e;b.fillStyle=O?f:m}else{const R=x===-1||T<x?m:f;b.fillStyle=R}b.fillRect(N,-A,M/2,A*2)}},[h,p,m,f,s,o,x,e]),r.jsx("canvas",{ref:d,className:W("h-8 w-full",c)})}const YB=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M15.7806 10.1963C16.1326 10.3011 16.3336 10.6714 16.2288 11.0234L16.1487 11.2725C15.3429 13.6262 13.2236 15.3697 10.6644 15.6299L10.6653 16.835H12.0833L12.2171 16.8486C12.5202 16.9106 12.7484 17.1786 12.7484 17.5C12.7484 17.8214 12.5202 18.0894 12.2171 18.1514L12.0833 18.165H7.91632C7.5492 18.1649 7.25128 17.8672 7.25128 17.5C7.25128 17.1328 7.5492 16.8351 7.91632 16.835H9.33527L9.33429 15.6299C6.775 15.3697 4.6558 13.6262 3.84992 11.2725L3.76984 11.0234L3.74445 10.8906C3.71751 10.5825 3.91011 10.2879 4.21808 10.1963C4.52615 10.1047 4.84769 10.2466 4.99347 10.5195L5.04523 10.6436L5.10871 10.8418C5.8047 12.8745 7.73211 14.335 9.99933 14.335C12.3396 14.3349 14.3179 12.7789 14.9534 10.6436L15.0052 10.5195C15.151 10.2466 15.4725 10.1046 15.7806 10.1963ZM12.2513 5.41699C12.2513 4.17354 11.2437 3.16521 10.0003 3.16504C8.75675 3.16504 7.74835 4.17343 7.74835 5.41699V9.16699C7.74853 10.4104 8.75685 11.418 10.0003 11.418C11.2436 11.4178 12.2511 10.4103 12.2513 9.16699V5.41699ZM13.5814 9.16699C13.5812 11.1448 11.9781 12.7479 10.0003 12.748C8.02232 12.748 6.41845 11.1449 6.41828 9.16699V5.41699C6.41828 3.43889 8.02221 1.83496 10.0003 1.83496C11.9783 1.83514 13.5814 3.439 13.5814 5.41699V9.16699Z"})),L9e=Object.freeze(Object.defineProperty({__proto__:null,default:YB},Symbol.toStringTag,{value:"Module"})),wet=300,ket=async(t=1)=>{let e=0,n;return new Promise(s=>{const o=a=>(n||(n=a),a-n<t*1e3?(e+=1,requestAnimationFrame(o)):s(Math.floor(e/t)));requestAnimationFrame(o)})},Met=t=>{const e=_.useRef(t),n=_.useCallback(s=>{(e.current[0]!==s.width||e.current[1]!==s.height)&&(e.current=[s.width,s.height])},[]);return{canvasSizeRef:e,handleCanvasSizeUpdate:n}},Tet=t=>{var i,l,c,d,u,m,f,p,g;const{voiceSessionId:e,server:n,voiceMode:s,audioInputDevice:o,voiceStatus:a}=t;return{voice_session_id:e!=null?e:"(none)",server_messages:n.messages.map(h=>h.type).join(","),rate_limit_message:(l=JSON.stringify((i=n.usage)==null?void 0:i.rate_limit_message))!=null?l:"(none)",audio_s:(d=(c=n.usage)==null?void 0:c.audio_s)!=null?d:"(none)",tool_update:(m=(u=n.toolUpdate)==null?void 0:u.type)!=null?m:"(none)",voice_connection_quality:(f=n.voiceConnectionQuality)!=null?f:"(none)",voice_mode:s!=null?s:"(none)",audio_input_device:(p=o==null?void 0:o.label)!=null?p:"(none)",voice_status:(g=JSON.stringify(a))!=null?g:"(none)"}};function ZB(t){return t instanceof DOMException&&t.name==="NotAllowedError"?($t.permissions.denied({message:t.message}),!0):!1}const Wu=class Wu{constructor(){ne(this,"userMediaPromiseMap",new Map)}static getLocalDevices(e,n=!0){return Wu.instance.getDevices(e,n)}async getDevices(e,n=!0){if(this.userMediaPromiseMap.size>0)try{e?await this.userMediaPromiseMap.get(e):await Promise.all(Array.from(this.userMediaPromiseMap.values()))}catch(o){console.warn("error waiting for media permissions",o)}let s=await navigator.mediaDevices.enumerateDevices();if(n&&!(Oz()&&this.hasDeviceInUse(e))&&(s.filter(a=>a.kind===e).length===0||s.some(a=>{const i=a.label==="",l=e?a.kind===e:!0;return i&&l}))){const a={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},i=await navigator.mediaDevices.getUserMedia(a);s=await navigator.mediaDevices.enumerateDevices(),i.getTracks().forEach(l=>{l.stop()})}return e&&(s=s.filter(o=>o.kind===e)),s}hasDeviceInUse(e){return e?this.userMediaPromiseMap.has(e):this.userMediaPromiseMap.size>0}};ne(Wu,"instance",new Wu);let Dv=Wu;async function O9e(t){let e;try{e=await Dv.getLocalDevices(t)}catch(o){ZB(o),yi.debug("Error fetching local devices",o);return}const n={};for(const o of e)o.kind===t&&(n[o.groupId]||(n[o.groupId]=[]),n[o.groupId].push(o));for(const o in n){const a=n[o];if(a.length>1&&a.find(l=>l.deviceId==="default")){const l=a.find(c=>c.deviceId!=="default");if(l)return l}}let s;for(const o of e)if(o.kind===t){if(o.deviceId==="default")return o;s||(s=o)}return s}async function D9e(){var a,i;const e=(await navigator.mediaDevices.enumerateDevices()).filter(l=>l.kind==="audioinput"),n=e.find(l=>l.deviceId==="default"),s=e.find(l=>l.label.toLowerCase().includes("iphone")),o=e.find(l=>{const c=!!(s&&s.label!==l.label),d=!!(n&&l.deviceId===n.deviceId);return c||d});return(i=o==null?void 0:o.deviceId)!=null?i:(a=e[0])==null?void 0:a.deviceId}const F9e=()=>{const t=O9()&&Ho;return async()=>{if(t)return await Dz();try{const e=await D9e(),n=await navigator.mediaDevices.getUserMedia({audio:e!==""?{deviceId:{exact:e}}:!0,video:!1}),s=await navigator.mediaDevices.enumerateDevices();return n.getTracks().forEach(a=>a.stop()),s.some(a=>a.kind==="audioinput"&&a.label!=="")}catch(e){if(!ZB(e))throw e;return!1}}};function B9e(t){const e=_.useRef(void 0);_.useEffect(()=>{if(!(O9()&&Ho||!navigator.permissions))return navigator.permissions.query({name:"microphone"}).then(s=>{e.current=s,s.onchange=()=>{t(s.state==="granted")}}).catch(()=>{}),()=>{e.current&&(e.current.onchange=null)}},[t])}const U9e=()=>{const[t,e]=_.useState(!1),[n,s]=_.useState(!1),[o,a]=_.useState(),i=_.useCallback(u=>{e(u)},[]);B9e(i);const l=F9e(),c=_.useCallback(async()=>n?t:l().then(u=>(e(u),u)).finally(()=>{s(!0)}),[l,n,t]);return _.useEffect(()=>{t&&V9e().then(u=>{a(u)})},[t]),{permissionsRequested:n,requestMicrophonePermissions:c,userDeclinedMicrophonePermissions:n&&!t,microphoneAvailable:t,microphoneLabel:o}},V9e=async()=>{var t;try{const e=await O9e("audioinput");return(t=e==null?void 0:e.label)!=null?t:""}catch(e){const n=r2();return Oe.addError("Failed to fetch default media device",{error:e,protocol:n}),"Error accessing microphone devices"}},G9e={status:"idle"},$9e=Nt()(jm(Cn(()=>w({},G9e)))),KB=W("flex items-center justify-center rounded-full"),QB=W(KB,"border border-token-border-default p-1 text-token-text-secondary","focus-visible:outline-black dark:text-token-text-secondary dark:focus-visible:outline-white","bg-transparent dark:bg-transparent"),JB=W("hover:bg-token-main-surface-tertiary"),XB=W(KB,"bg-transparent text-token-text-secondary transition-colors","hover:bg-token-main-surface-tertiary focus-visible:outline-black","disabled:text-[#f4f4f4] disabled:opacity-30","dark:bg-transparent dark:text-token-text-secondary dark:hover:bg-token-main-surface-tertiary dark:focus-visible:outline-white","h-8 w-8"),H9e=t=>{const{requestMicrophonePermissions:e}=U9e(),s=J().formatMessage({id:"vONrv3",defaultMessage:"Enable mic access to dictate"}),o=Ut();return async()=>{if(U.logEvent("Whisper on Web/Windows: Clicked to start dictation"),We.logEvent("chatgpt_composer_whisper_button_clicked_start"),!await e())return o.danger(s,{toastId:"whisper_icon_button_click_failure"});t()}},W9e=c=>{var d=c,{size:t="medium",disabled:e,onExit:n,buttonClassName:s,invertColor:o,disableTooltip:a=!1,visualTreatment:i}=d,l=Me(d,["size","disabled","onExit","buttonClassName","invertColor","disableTooltip","visualTreatment"]);const u=J(),m=$9e(h=>h.status),f=H9e(n);m==="error"&&(U.logEvent("Whisper on Web/Windows: Error"),We.logEvent("chatgpt_composer_whisper_button_error"));const p=r.jsx(YB,{"aria-label":"",className:"icon",fontSize:"inherit"}),g=vn(un);return r.jsx(z9e,{disabled:a,children:i==="composer-btn"||i==="codex"?r.jsx("button",B(w({},l),{"aria-label":u.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),type:"button",onClick:f,disabled:e,className:W("composer-btn",g&&"composer-btn--desktopSidebar"),children:p})):r.jsx(he,B(w({},l),{"aria-label":u.formatMessage({id:"QFVCwl",defaultMessage:"Dictate button"}),size:t,type:"button",onClick:f,disabled:e,className:W(o?XB:QB,"[view-transition-name:var(--vt-composer-whisper-button)]",e?"opacity-30":!o&&JB,"dark:hover:bg-transparent dark:hover:opacity-100",s),children:p}))})};function z9e({children:t,disabled:e=!1}){const n=J();return r.jsx(kt,{open:e?!1:void 0,label:n.formatMessage({id:"abw2XH",defaultMessage:"Dictate"}),side:"bottom",onOpenChange:s=>{s&&(U.logEvent("Whisper on Web/Windows: Button hover to see tooltip"),We.logEvent("chatgpt_composer_whisper_button_hovered"))},children:t})}const P4=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),N4=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)});function q9e(t){const e=G();return pt(e)?r.jsx(W9e,w({},t)):null}function Y9e(t){return t.visualTreatment==="codex"?r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx(he,{type:"button",color:"ghost",size:"small",icon:P4,children:r.jsx(P,{id:"wham.whisperModeControlsLoading.cancel",defaultMessage:"Cancel"})}),r.jsx(he,{type:"button",color:"secondary",size:"small",icon:N4,children:r.jsx(P,{id:"wham.whisperModeControlsLoading.done",defaultMessage:"Done"})})]}):r.jsxs("div",{className:"flex gap-x-1.5",children:[r.jsx("div",{className:W(QB,JB,t.buttonClassName),children:r.jsx(P4,{className:"icon"})}),r.jsx("div",{className:W(XB,t.buttonClassName),children:r.jsx(N4,{className:"icon-lg"})})]})}const Z9e=j(()=>I(()=>import("./i8srkfobxvgw8sgj.js"),__vite__mapDeps([397,1,29,30])).then(t=>t.WhisperModeControls),{loading:t=>r.jsx(Y9e,w({},t))});function K9e(t){return r.jsx(Z9e,w({},t))}function Eet({composerController:t,composerType:e}){const{waveformData$:n,isWhisperActive$:s}=F3(t),o=ue(s),a=_.useCallback((i,l,c,d)=>{const u=Et(t),m=u.state.selection.ranges[0].$from.pos;s.set(!1),requestAnimationFrame(()=>{u.focus(),u.dispatch(u.state.tr.insertText(i,m,m)),u.dispatch(u.state.tr.setSelection(R9.create(u.state.doc,m+i.length)).scrollIntoView()),zTe(t).setData({usedDictation:!0,dictationOriginalText:i!=null?i:null,dictationAssetPointer:l!=null?l:null,dictationAssetTTL:c!=null?c:null,dictationAssetFormat:d!=null?d:null})})},[t,s]);return o?r.jsx(K9e,{initialValue:qB,onSuccess:a,onWaveformDataUpdate:n.set,onExit:()=>{s.set(!1)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"}):r.jsx(q9e,{size:"small",onExit:()=>{s.set(!0)},visualTreatment:e,buttonClassName:"h-9 min-h-9 w-9 min-w-9"})}const Q9e=He({id:"imageGenEditor.transformationTextareaPlaceholder",defaultMessage:"Describe what you want to add, remove or replace"}),J9e=He({id:"imageGenEditor.transformationTextareaPlaceholderShort",defaultMessage:"Describe your edit"}),Fv="image",Aet=({image:t,currentDrawnShape:e,onCleared:n,getImageData:s})=>{const o=J(),{setTargetedContent:a}=lf(),i=Ut(),c=Yo()?Q9e:J9e;_.useEffect(()=>(e==null?a({type:"object",subtype:Fv,placeholderTextOverride:c,shouldPersistAcrossMessages:!0,isFocusedViewContent:!1,createNewCompletionParams:d=>hTe(d,t)}):a({type:"object",subtype:Fv,placeholderTextOverride:c,isFocusedViewContent:!1,createNewCompletionParams:async d=>await xTe(d,t,s(),o,i),onCleared:n}),()=>{a(void 0)}),[e,s,t,o,n,a,i,c])},eU={cyberpunk:{id:"cyberpunk",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/cyberpunk.webp",label:He({id:"EoebyJ",defaultMessage:"Cyberpunk"}),textToImagePrompt:He({id:"Deq9he",defaultMessage:"Create an image in a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."}),imageToImagePrompt:He({id:"omZTK1",defaultMessage:"Restyle this image with a cyberpunk aesthetic: vivid neon accents, futuristic textures, glowing details, and high-contrast lighting."})},"coloring-book":{id:"coloring-book",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/coloring-book.webp",label:He({id:"Ma5v0R",defaultMessage:"Coloring Book"}),textToImagePrompt:He({id:"PWjYK/",defaultMessage:"Create an image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."}),imageToImagePrompt:He({id:"U6fwpJ",defaultMessage:"Restyle this image in a children's coloring book style: bold, even black outlines on white, no shading or tone. Simplify textures into playful, easily recognizable shapes."})},anime:{id:"anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/anime.webp",label:He({id:"U/Qrsc",defaultMessage:"Anime"}),textToImagePrompt:He({id:"gCogZd",defaultMessage:"Create an image in a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."}),imageToImagePrompt:He({id:"jZIKG9",defaultMessage:"Restyle this image with a detailed anime aesthetic: expressive eyes, smooth cel-shaded coloring, and clean linework. Emphasize emotion and character presence, with a sense of motion or atmosphere typical of anime scenes."})},"classic-anime":{id:"classic-anime",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/classic-anime.webp",label:He({id:"jLkVYJ",defaultMessage:"Classic Anime"}),textToImagePrompt:He({id:"7SgRKH",defaultMessage:"Create an image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."}),imageToImagePrompt:He({id:"r6UnyO",defaultMessage:"Restyle this image in a classic 2D anime style with flat cel shading, clear black outlines, and stylized charactersmixing realism with fantasy in a heartfelt, nostalgic tone."})},"dramatic-headshot":{id:"dramatic-headshot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/dramatic-headshot.webp",label:He({id:"p4IJX5",defaultMessage:"Dramatic Headshot"}),textToImagePrompt:He({id:"L2OTSr",defaultMessage:"Create an ultra-realistic high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."}),imageToImagePrompt:He({id:"HwR32X",defaultMessage:"Restyle this photo into a high-contrast black-and-white headshot, close up, black shadow background, 35mm lens, 4K quality, aspect ratio 4:3."})},"photo-shoot":{id:"photo-shoot",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/photo-shoot.webp",label:He({id:"ZmdPZ5",defaultMessage:"Photo Shoot"}),textToImagePrompt:He({id:"APWtsI",defaultMessage:"Create an ultra-realistic professional photo shoot with soft lighting."}),imageToImagePrompt:He({id:"ugvh1K",defaultMessage:"Make a professional photo shoot with soft lighting based on this photo."})},"retro-cartoon":{id:"retro-cartoon",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/retro-cartoon.webp",label:He({id:"GAjF4n",defaultMessage:"Retro Cartoon"}),textToImagePrompt:He({id:"46xB6P",defaultMessage:"Create a retro 1950s cartoon style image, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."}),imageToImagePrompt:He({id:"ozicEm",defaultMessage:"Restyle this photo in a retro 1950s cartoon style, minimal vector art, Art Deco inspired, clean flat colors, geometric shapes, mid-century modern design, elegant silhouettes, UPA style animation, smooth lines, limited color palette (black, red, beige, brown, white), grainy paper texture background, vintage jazz club atmosphere, subtle lighting, slightly exaggerated character proportions, classy and stylish mood."})},"80s-glam":{id:"80s-glam",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/80s-glam.webp",label:He({id:"fDejVt",defaultMessage:"80s Glam"}),textToImagePrompt:He({id:"W7Od8r",defaultMessage:"Create a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."}),imageToImagePrompt:He({id:"sL7kY5",defaultMessage:"Turn this photo into a selfie styled like a cheesy 1980s mall glamour shot, foggy soft lighting, teal and magenta lasers in the background, feathered hair, shoulder pads, portrait studio vibes, ironic glam 4 life caption."})},"art-nouveau":{id:"art-nouveau",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/art-nouveau.webp",label:He({id:"JNecL3",defaultMessage:"Art Nouveau"}),textToImagePrompt:He({id:"Kdl/EG",defaultMessage:"Create an image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."}),imageToImagePrompt:He({id:"IicReU",defaultMessage:"Restyle this image in an Art Nouveau style: flowing lines, organic shapes, floral motifs, and soft, decorative elegance."})},synthwave:{id:"synthwave",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/synthwave.webp",label:He({id:"Db9V0o",defaultMessage:"Synthwave"}),textToImagePrompt:He({id:"t8FH1X",defaultMessage:"Create an image in a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."}),imageToImagePrompt:He({id:"CnZDU9",defaultMessage:"Restyle this image with a synthwave aesthetic: retro-futuristic 1980s vibe with neon grids, glowing sunset, vibrant magenta-and-cyan gradients, chrome highlights, and a nostalgic outrun atmosphere."})},"tiranga-portrait-2025":{id:"tiranga-portrait-2025",imageUrl:"https://cdn.openai.com/API/images/image-picker-styles/v2/tiranga-portrait-2025.webp",label:He({id:"eHhV1D",defaultMessage:"Tiranga Portrait"}),textToImagePrompt:He({id:"V7BzQx",defaultMessage:"Create a photorealistic photo on a clean background with soft key lighting. Add saffron-white-green rim light and a subtle Ashoka Chakra halo behind the head. Blend one soft overlay  Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette  into the shoulders/background. Include light tricolor bokeh or smoke and a gentle khadi/paper micro-texture. Crisp detail, no text, no flag as clothing."}),imageToImagePrompt:He({id:"AJ1btA",defaultMessage:'Restyle this photo in a "Tiranga double-exposure" look: preserve identity and pose, add saffron-white-green rim light and a subtle Ashoka Chakra halo. Blend one overlay - Red Fort or India Gate skyline, India map contour, or Ayodhya Ram Mandir silhouette - plus soft tricolor bokeh/smoke and gentle khadi/paper micro-texture. Photo real, balanced saturation. No text, don\'t use the flag as clothing'})}},tU=Object.values(eU),X9e=j(()=>I(()=>import("./d3awu4bo9vouiss6.js").then(t=>t._),__vite__mapDeps([398,1])),{loading:t=>L(t)}),e7e=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)});function Iet({composerController:t}){const e=Bh(u=>u.files.some(m=>Al(m.file.name))),{targetedContent:n}=lf(),s=e||(n==null?void 0:n.subtype)===Fv,o=J(),a=G(),c=ds(a,"3961845717").get("styles",tU.map(u=>u.id)).map(u=>eU[u]).filter(Boolean);_.useEffect(()=>{U.logEventWithStatsig("chatgpt_imagegen_style_picker_shown","chatgpt_imagegen_style_picker_shown")},[]);const d=_.useCallback(u=>{const m=s?o.formatMessage(u.imageToImagePrompt):o.formatMessage(u.textToImagePrompt);n7e(m,t,o),U.logEventWithStatsig("chatgpt_imagegen_preset_style_selected","chatgpt_imagegen_preset_style_selected",{style_id:u.id})},[t,o,s]);return r.jsxs(Dl,{onOpenChange:u=>{u&&U.logEventWithStatsig("chatgpt_imagegen_style_picker_opened","chatgpt_imagegen_style_picker_opened")},children:[r.jsx(br,{asChild:!0,children:r.jsxs("button",{type:"button",className:"composer-btn px-2",children:[r.jsx(X9e,{className:"icon"}),r.jsx("span",{className:"ms-1.5 [[data-collapse-labels]_&]:sr-only",children:r.jsx(P,{id:"X850uz",defaultMessage:"Styles"})}),r.jsx(e7e,{className:"icon-sm xs:ms-1.5 ms-1"})]})}),r.jsx(Fl,{children:r.jsx(Nh,{className:"z-[51] max-h-[294px] w-[345px] overflow-y-auto bg-clip-border px-3 py-4",$as:Bl,side:"bottom",align:"start",collisionPadding:10,sideOffset:8,children:r.jsx("div",{className:"grid grid-cols-3 gap-x-2 gap-y-4",children:c.map(u=>r.jsx(t7e,{style:u,onClick:()=>d(u)},u.id))})})})]})}function t7e({style:t,onClick:e}){const n=J();return r.jsxs("button",{onClick:e,className:"hover:bg-token-bg-secondary focus-visible:ring-ring flex flex-col items-center gap-2.5 rounded-md p-1 text-xs focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-none",children:[r.jsx("img",{src:t.imageUrl,alt:n.formatMessage(t.label),className:"aspect-square w-4/5 rounded-full object-cover"}),r.jsx("span",{children:n.formatMessage(t.label)})]})}function n7e(t,e,n){const s=Et(e),o=_c(e);if(o.trim()===""){Fz(s,t);return}const a=o.toLowerCase();for(const{textToImagePrompt:i,imageToImagePrompt:l}of tU){const d=[n.formatMessage(i),n.formatMessage(l)].map(u=>{const m=a.indexOf(u.toLowerCase());return m===-1?null:{start:m,end:m+u.length}}).filter(Boolean);if(d.length){const u=Math.min(...d.map(p=>p.start)),m=Math.max(...d.map(p=>p.end)),f=o.substring(u,m).trimEnd();Bz(s,f,t);return}}Uz(s,t)}function s7e(){const t=Zb(),e=ue(Vz);return t&&e&&f9()&&P3()}function o7e(t){const i=t,{ref:e,children:n,className:s}=i,o=Me(i,["ref","children","className"]),a=s7e();return r.jsx("div",B(w({},o),{className:W(a&&"keyboard-open:fixed keyboard-open:bottom-[var(--screen-keyboard-height,0)] keyboard-open:start-3 keyboard-open:end-3 keyboard-open:z-50 keyboard-open:w-auto! keyboard-open:-translate-y-2",s),ref:l=>{if(typeof e=="function"?e(l):e!=null&&(e.current=l),!!a)return Ul({axis:"height",target:l,onChange:({height:c})=>{N4e.setState(d=>B(w({},d),{composerHeight:c}))}})},children:n}))}const jet=t=>{"use forget";const e=H.c(91),{viewTransitionName:n,isTemporaryChat:s,isDeveloperMode:o,isNewConversation:a,composerController:i,children:l,expanded:c,onSubmit:d,shouldUseTightRadius:u,canCollapseWithInput:m,canCollapseWithFooterActions:f,expandOnMultilineInput:p,backgroundClassName:g,ariaLabel:h,ref:x,disableMotion:y}=t,b=n===void 0?"var(--vt-composer)":n,v=u===void 0?!1:u;let S=m===void 0?!1:m,C=f===void 0?!0:f;const k=p===void 0?!1:p,M=y===void 0?!1:y,T=vn(un);let E,A,N,R,O,D,F;e[0]!==l?(O=null,D=null,R=null,E=[],F=[],A=[],N=[],_.Children.forEach(l,At=>{if(_.isValidElement(At)){if(At.type===a7e){if(O!=null)throw new Error("PromptTextareaComposer only accepts a single primary content");O=At}if(At.type===r7e){if(D!=null)throw new Error("PromptTextareaComposer only accepts a single submit button");D=At}else if(At.type===i7e){if(R!=null)throw new Error("PromptTextareaComposer only accepts a single leading action");R=At}else At.type===c7e||At.type===l7e?E.push(At):At.type===d7e?F.push(At):At.type===u7e?A.push(At):At.type===m7e&&N.push(At)}}),e[0]=l,e[1]=E,e[2]=A,e[3]=N,e[4]=R,e[5]=O,e[6]=D,e[7]=F):(E=e[1],A=e[2],N=e[3],R=e[4],O=e[5],D=e[6],F=e[7]),k&&(S=!0,C=!1);const V=E.length>0,z=F.length>0,$=z||D!=null,Y=fA(),Z=G(),Q=!pt(Z),q=ue(()=>!V&&!$?!1:c!=null?c:k&&$z(i)||!k&&Hz(i)||!S&&!gl(i)||!C&&V),X=f7e;let oe;e[8]!==d?(oe=At=>{At.preventDefault(),d(At)},e[8]=d,e[9]=oe):oe=e[9];const se=oe,[de,ie]=_.useState(!1);let ae;e[10]===Symbol.for("react.memo_cache_sentinel")?(ae=()=>{ie(!0),setTimeout(()=>{ie(!1)},250)},e[10]=ae):ae=e[10];const ce=ae;let ye;e[11]!==de||e[12]!==Y?(ye=de?{duration:0}:Y?qR:E0e,e[11]=de,e[12]=Y,e[13]=ye):ye=e[13];const fe=ye,Ce=J();let ee;e[14]!==Ce?(ee=Ce.formatMessage({id:"U6PwZd",defaultMessage:"Developer mode"}).toLocaleUpperCase(),e[14]=Ce,e[15]=ee):ee=e[15];const te=ee,le=o&&!a&&"relative";let re;e[16]!==le?(re=W("group/composer w-full",le),e[16]=le,e[17]=re):re=e[17];const ve=b!=null?b:void 0;let _e;e[18]!==ve?(_e={viewTransitionName:ve},e[18]=ve,e[19]=_e):_e=e[19];const we=_e;let De;e[20]!==q?(De=a2(q),e[20]=q,e[21]=De):De=e[21];const ge="unified-composer";let Ne;e[22]!==i?(Ne=Gz(i),e[22]=i,e[23]=Ne):Ne=e[23];const je=hxe(Ne,x);let Te;e[24]!==te||e[25]!==o||e[26]!==a?(Te=o&&!a&&r.jsx(rh,{href:"#settings/Connectors/Advanced",underline:!1,className:"absolute end-12 top-0 -translate-y-full rounded-t-xl bg-orange-400 px-2 text-xs font-medium text-white transition-colors hover:bg-orange-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-orange-500",children:te}),e[24]=te,e[25]=o,e[26]=a,e[27]=Te):Te=e[27];let Fe;e[28]!==N?(Fe=N.length>0&&r.jsx("div",{className:"hidden",children:N}),e[28]=N,e[29]=Fe):Fe=e[29];const Ge=o7e;let Se;e[30]!==i||e[31]!==Z?(Se=At=>{!Dh(i)&&!At.defaultPrevented&&(m9(Z).anySheetOpen$()||Eo(Et(i)))},e[30]=i,e[31]=Z,e[32]=Se):Se=e[32];const Re=ic,tt=!0,Ke=T&&"dark:bg-token-bg-primary",nt=s&&"dark",ot=!o&&"shadow-short",Lt=o&&"relative shadow-sm outline-2 outline-orange-400";let vt;e[33]!==g||e[34]!==Ke||e[35]!==nt||e[36]!==ot||e[37]!==Lt?(vt=W("bg-token-bg-primary cursor-text overflow-clip bg-clip-padding p-2.5 contain-inline-size dark:bg-[#303030]","grid grid-cols-[auto_1fr_auto] [grid-template-areas:'header_header_header'_'leading_primary_trailing'_'._footer_.'] group-data-expanded/composer:[grid-template-areas:'header_header_header'_'primary_primary_primary'_'leading_footer_trailing']",Ke,nt,ot,Lt,g),e[33]=g,e[34]=Ke,e[35]=nt,e[36]=ot,e[37]=Lt,e[38]=vt):vt=e[38];const Ht=T?"0":v?"var(--radius-xl)":"28px";let nn;e[39]!==Ht?(nn={borderRadius:Ht},e[39]=Ht,e[40]=nn):nn=e[40];let sn;e[41]!==M||e[42]!==q||e[43]!==O||e[44]!==fe?(sn=r.jsx(ic,{disableMotion:M,layout:"position",layoutDependency:q,transition:fe,className:"-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5",children:O}),e[41]=M,e[42]=q,e[43]=O,e[44]=fe,e[45]=sn):sn=e[45];let on;e[46]!==M||e[47]!==q||e[48]!==R||e[49]!==fe?(on=R&&r.jsx(ic,{disableMotion:M,layout:"position",layoutDependency:q,transition:fe,className:"[grid-area:leading]",children:R}),e[46]=M,e[47]=q,e[48]=R,e[49]=fe,e[50]=on):on=e[50];const kn=V&&r.jsx(ic,{disableMotion:M,layout:"position",layoutDependency:q,transition:fe,"data-testid":"composer-footer-actions",className:W("-m-1 max-w-full overflow-x-auto p-1 [grid-area:footer] [scrollbar-width:none]",C&&"group-not-data-expanded/composer:-mb-12"),inert:!q,initial:{translateY:q?0:"calc(-6*var(--spacing))"},animate:{translateY:0},children:r.jsx("div",{className:W("flex min-w-fit items-center",Q?"gap-1.5 ps-0 pe-1.5":"cant-hover:px-1.5 cant-hover:gap-1.5"),ref:X,children:E})});let an;e[51]!==M||e[52]!==$||e[53]!==z||e[54]!==q||e[55]!==D||e[56]!==F||e[57]!==fe?(an=$&&r.jsxs(ic,{disableMotion:M,layout:"position",layoutDependency:q,transition:fe,className:"flex items-center gap-2 [grid-area:trailing]",children:[z&&r.jsx("div",{className:"relative ms-1",children:F}),D]}),e[51]=M,e[52]=$,e[53]=z,e[54]=q,e[55]=D,e[56]=F,e[57]=fe,e[58]=an):an=e[58];let jn;e[59]!==M||e[60]!==A||e[61]!==q||e[62]!==fe?(jn=A.length>0&&r.jsx(ic,{disableMotion:M,layout:"position",layoutDependency:q,transition:fe,className:"-mx-2.5 -mt-2.5 mb-2.5 flex flex-col [grid-area:header]",children:A}),e[59]=M,e[60]=A,e[61]=q,e[62]=fe,e[63]=jn):jn=e[63];let Pn;e[64]!==Re||e[65]!==M||e[66]!==q||e[67]!==vt||e[68]!==nn||e[69]!==sn||e[70]!==on||e[71]!==kn||e[72]!==an||e[73]!==jn||e[74]!==fe?(Pn=r.jsxs(Re,{disableMotion:M,layout:tt,layoutDependency:q,transition:fe,className:vt,style:nn,children:[sn,on,kn,an,jn]}),e[64]=Re,e[65]=M,e[66]=q,e[67]=vt,e[68]=nn,e[69]=sn,e[70]=on,e[71]=kn,e[72]=an,e[73]=jn,e[74]=fe,e[75]=Pn):Pn=e[75];let es;e[76]!==Ge||e[77]!==Se||e[78]!==Pn?(es=r.jsx(Ge,{onClick:Se,children:Pn}),e[76]=Ge,e[77]=Se,e[78]=Pn,e[79]=es):es=e[79];let Ot;return e[80]!==h||e[81]!==ce||e[82]!==se||e[83]!==re||e[84]!==we||e[85]!==De||e[86]!==je||e[87]!==Te||e[88]!==Fe||e[89]!==es?(Ot=r.jsxs("form",{onPaste:ce,className:re,style:we,"data-expanded":De,onSubmit:se,"data-type":ge,"aria-label":h,ref:je,children:[Te,Fe,es]}),e[80]=h,e[81]=ce,e[82]=se,e[83]=re,e[84]=we,e[85]=De,e[86]=je,e[87]=Te,e[88]=Fe,e[89]=es,e[90]=Ot):Ot=e[90],Ot},ic=t=>{"use forget";var m;const e=H.c(20);let n,s,o,a,i,l,c,d;if(e[0]!==t?(m=t,{disableMotion:o,layout:i,layoutDependency:l,transition:d,initial:a,animate:n,children:s}=m,c=Me(m,["disableMotion","layout","layoutDependency","transition","initial","animate","children"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i,e[6]=l,e[7]=c,e[8]=d):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5],l=e[6],c=e[7],d=e[8]),o){let f;return e[9]!==s||e[10]!==c?(f=r.jsx("div",B(w({},c),{children:s})),e[9]=s,e[10]=c,e[11]=f):f=e[11],f}let u;return e[12]!==n||e[13]!==s||e[14]!==a||e[15]!==i||e[16]!==l||e[17]!==c||e[18]!==d?(u=r.jsx(Xe.div,B(w({layout:i,layoutDependency:l,transition:d,initial:a,animate:n},c),{children:s})),e[12]=n,e[13]=s,e[14]=a,e[15]=i,e[16]=l,e[17]=c,e[18]=d,e[19]=u):u=e[19],u},a7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},r7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{className:"ms-auto flex items-center gap-1.5",onPointerDown:p7e,children:n}),e[0]=n,e[1]=s):s=e[1],s},i7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s},l7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=n?r.jsx(r.Fragment,{children:n}):null,e[0]=n,e[1]=s):s=e[1],s},c7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{onPointerDown:g7e,children:n}),e[0]=n,e[1]=s):s=e[1],s},d7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx("div",{onPointerDown:h7e,children:n}),e[0]=n,e[1]=s):s=e[1],s},u7e=t=>{"use forget";const e=H.c(5),{children:n,width:s}=t,a=(s===void 0?"full":s)==="fit"?"w-fit":"w-full";let i;e[0]!==a?(i=W(a),e[0]=a,e[1]=i):i=e[1];let l;return e[2]!==n||e[3]!==i?(l=r.jsx("div",{className:i,onPointerDown:_7e,children:n}),e[2]=n,e[3]=i,e[4]=l):l=e[4],l},m7e=t=>{"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(r.Fragment,{children:n}),e[0]=n,e[1]=s):s=e[1],s};function f7e(t){const e=t==null?void 0:t.parentElement;if(!t||!e)return;const n=()=>{const o=D9(t,"data-collapse-labels"),a=t.scrollWidth>(o?0:e.clientWidth);sr(t,"data-collapse-labels",a)},s=new ResizeObserver(n);return s.observe(t),s.observe(e),()=>s.disconnect()}function p7e(t){return t.stopPropagation()}function g7e(t){return t.stopPropagation()}function h7e(t){return t.stopPropagation()}function _7e(t){return t.stopPropagation()}const Pet=({clientThreadId:t,accountUserId:e})=>{var o;const n=Ue(t,a=>a==null?void 0:a.sharedProjectConversationOwner);return(n==null?void 0:n.id)!=null&&n.id!==e?r.jsx("p",{className:"text-token-text-secondary mb-2 text-center text-xs",children:r.jsx(P,{id:"thread.sharedProjectConversationOwnerNotice",defaultMessage:"This is a conversation between ChatGPT and {name}. Responding will create a branch.",values:{name:(o=n==null?void 0:n.name)!=null?o:"the owner"}})}):null};function Net(){const t=J();return r.jsx(he,{onClick:()=>{yn.openModal(Zc.SharedConversationModeration)},className:"w-1/3",children:t.formatMessage({id:"thread.sharedConversation.moderate",defaultMessage:"Moderate conversation"})})}function Ret(t){"use forget";const e=H.c(7),[n,s]=_.useState(null),o=r1(t);let a;e[0]!==o||e[1]!==n?(a=n!=null?{gizmo:n,gizmo_id:n.gizmo.id,kind:Tt.GizmoInteraction}:o,e[0]=o,e[1]=n,e[2]=a):a=e[2];const i=a,l=i&&"gizmo"in i&&i.gizmo!=null?i==null?void 0:i.gizmo:void 0;let c;return e[3]!==i||e[4]!==l||e[5]!==n?(c=[i,l,n,s],e[3]=i,e[4]=l,e[5]=n,e[6]=c):c=e[6],c}const x7e=j(()=>I(()=>import("./eu4d2sy2duibeikv.js").then(t=>t._),__vite__mapDeps([218,1])),{loading:t=>L(t)});function y7e({className:t,file:e,fileName:n,fileId:s,gizmoId:o}){const a=Al(n)&&s!=null,i=J(),l=CR(e&&ui(e)?e:null,n,s,o,void 0);return a?r.jsx("div",{className:W("flex h-full w-full items-center justify-center bg-[#8F8F8F] bg-cover bg-center text-white",t),"aria-label":i.formatMessage({id:"snorlax.imageThumbnail",defaultMessage:"Image thumbnail for {fileName}"},{fileName:n}),style:{backgroundImage:"url(".concat(l,")")},children:!l&&r.jsx(x7e,{className:"icon-lg"})}):null}const R4=j(()=>I(()=>import("./ekpl12ubjxpdxfy1.js"),__vite__mapDeps([399,1,29,30,368,369,400,401,245])).then(t=>t.SnorlaxFileModal)),L4=j(()=>I(()=>import("./dujttbag0lb0tmgz.js"),__vite__mapDeps([245,1,29,30])).then(t=>t.CustomInstructionsModal));function Let({gizmo:t}){return r.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:t?r.jsxs(r.Fragment,{children:[r.jsx(v7e,{gizmo:t,className:"rounded-s-[20px] rounded-e-[0] border-[1px] border-e-[0.5px]"}),r.jsx(S7e,{gizmo:t,className:"rounded-s-[0] rounded-e-[20px] border-[1px] border-s-[0.5px]"})]}):r.jsxs(r.Fragment,{children:[r.jsx(O4,{}),r.jsx(O4,{})]})})}const tC=({className:t,header:e,context:n,contextClassName:s="",icon:o,onClick:a,disabled:i=!1})=>r.jsx("button",{onClick:a,disabled:i,className:W("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",t),children:r.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[r.jsxs("div",{className:"w-full grow text-start",children:[r.jsx("div",{className:"text-sm font-medium",children:e}),r.jsx("div",{className:W("text-token-text-secondary text-xs",s),children:n})]}),o]})}),O4=()=>{"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(tC,{disabled:!0,header:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:r.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})}),t[0]=e):e=t[0],e};function v7e(t){"use forget";const e=H.c(28),{className:n,gizmo:s}=t,{files:o}=s,a=!o.length,i=G();let l;e[0]!==i||e[1]!==s?(l=()=>gt(i,R4,{gizmo:s,onClose:()=>Cs(i,R4)}),e[0]=i,e[1]=s,e[2]=l):l=e[2];const c=l;let d,u,m;const{canEdit:f}=Lb(s);if(a){const h=f?Gt.addFilesButtonLabel:Gt.viewFilesButtonLabel;let x;e[3]!==h?(x=r.jsx(P,w({},h)),e[3]=h,e[4]=x):x=e[4],d=x;const y=f?Gt.filesControlDescription:Gt.noFilesReadOnlyDescription;let b;e[5]!==y?(b=r.jsx(P,w({},y)),e[5]=y,e[6]=b):b=e[6],u=b,m=null}else{let h,x;if(e[7]!==o||e[8]!==s.gizmo){const b=o.slice(0,3);let v;e[13]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx(P,w({},Gt.projectFilesModalTitle)),e[13]=v):v=e[13],d=v;let S;e[14]!==o.length?(S=r.jsx(P,B(w({},Gt.filesCount),{values:{count:o.length}})),e[14]=o.length,e[15]=S):S=e[15],u=S,h="relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only";let C;e[16]!==s.gizmo?(C=(k,M)=>r.jsx(b7e,{file:k,index:M,gizmoId:s.gizmo.id},k.id),e[16]=s.gizmo,e[17]=C):C=e[17],x=b.toReversed().map(C),e[7]=o,e[8]=s.gizmo,e[9]=h,e[10]=x,e[11]=d,e[12]=u}else h=e[9],x=e[10],d=e[11],u=e[12];let y;e[18]!==h||e[19]!==x?(y=r.jsx("div",{className:h,children:x}),e[18]=h,e[19]=x,e[20]=y):y=e[20],m=y}const p=a&&!f;let g;return e[21]!==n||e[22]!==u||e[23]!==d||e[24]!==m||e[25]!==c||e[26]!==p?(g=r.jsx(tC,{className:n,onClick:c,header:d,context:u,icon:m,disabled:p}),e[21]=n,e[22]=u,e[23]=d,e[24]=m,e[25]=c,e[26]=p,e[27]=g):g=e[27],g}function b7e(t){"use forget";const e=H.c(16),{file:n,index:s,gizmoId:o}=t,a=n.name;let i;e[0]!==n.file_id||e[1]!==a?(i=Al(a)&&n.file_id!=null,e[0]=n.file_id,e[1]=a,e[2]=i):i=e[2];const l=i;let c;e[3]!==n.file_id||e[4]!==a||e[5]!==o||e[6]!==l?(c=l&&r.jsx(y7e,{fileName:a,fileId:n.file_id,gizmoId:o,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"}),e[3]=n.file_id,e[4]=a,e[5]=o,e[6]=l,e[7]=c):c=e[7];const d=c,u="translateX(".concat(s*-20,"px)");let m;e[8]!==u?(m={transform:u},e[8]=u,e[9]=m):m=e[9];let f;e[10]!==n.name||e[11]!==d?(f=d||r.jsx(HS,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:n.name,contextConnectorInfo:void 0}),e[10]=n.name,e[11]=d,e[12]=f):f=e[12];let p;return e[13]!==m||e[14]!==f?(p=r.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:m,children:f}),e[13]=m,e[14]=f,e[15]=p):p=e[15],p}function S7e(t){"use forget";const e=H.c(15),{gizmo:n,className:s}=t,{instructions:o}=n.gizmo,a=!o.length,i=G();let l;e[0]!==i||e[1]!==n?(l=()=>gt(i,L4,{gizmo:n,onClose:()=>Cs(i,L4)}),e[0]=i,e[1]=n,e[2]=l):l=e[2];const c=l;let d,u,m;const{canEdit:f}=Lb(n);if(a){const h=f?Gt.customInstructionsTitle:Gt.customInstructionsReadOnlyTitle;let x;e[3]!==h?(x=r.jsx(P,w({},h)),e[3]=h,e[4]=x):x=e[4],d=x;const y=f?Gt.customInstructionsDescription:Gt.customInstructionsReadOnlyDescription;let b;e[5]!==y?(b=r.jsx(P,w({},y)),e[5]=y,e[6]=b):b=e[6],u=b}else{let h;e[7]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(P,w({},Gt.editCustomInstructionsTitle)),e[7]=h):h=e[7],d=h,m="overflow-hidden text-ellipsis whitespace-nowrap",u=o}const p=a&&!f;let g;return e[8]!==s||e[9]!==u||e[10]!==m||e[11]!==d||e[12]!==c||e[13]!==p?(g=r.jsx(tC,{className:s,onClick:c,header:d,context:u,contextClassName:m,disabled:p}),e[8]=s,e[9]=u,e[10]=m,e[11]=d,e[12]=c,e[13]=p,e[14]=g):g=e[14],g}const nU=In(()=>Qe({}));function Oet(t,e){var n;return(n=nU(t)[e])!=null?n:null}function Det(t,e,n){nU.set(t,s=>B(w({},s),{[e]:n}))}const sU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M2.6687 11.333V8.66699C2.6687 7.74455 2.66841 7.01205 2.71655 6.42285C2.76533 5.82612 2.86699 5.31731 3.10425 4.85156L3.25854 4.57617C3.64272 3.94975 4.19392 3.43995 4.85229 3.10449L5.02905 3.02149C5.44666 2.84233 5.90133 2.75849 6.42358 2.71582C7.01272 2.66769 7.74445 2.66797 8.66675 2.66797H9.16675C9.53393 2.66797 9.83165 2.96586 9.83179 3.33301C9.83179 3.70028 9.53402 3.99805 9.16675 3.99805H8.66675C7.7226 3.99805 7.05438 3.99834 6.53198 4.04102C6.14611 4.07254 5.87277 4.12568 5.65601 4.20313L5.45581 4.28906C5.01645 4.51293 4.64872 4.85345 4.39233 5.27149L4.28979 5.45508C4.16388 5.7022 4.08381 6.01663 4.04175 6.53125C3.99906 7.05373 3.99878 7.7226 3.99878 8.66699V11.333C3.99878 12.2774 3.99906 12.9463 4.04175 13.4688C4.08381 13.9833 4.16389 14.2978 4.28979 14.5449L4.39233 14.7285C4.64871 15.1465 5.01648 15.4871 5.45581 15.7109L5.65601 15.7969C5.87276 15.8743 6.14614 15.9265 6.53198 15.958C7.05439 16.0007 7.72256 16.002 8.66675 16.002H11.3337C12.2779 16.002 12.9461 16.0007 13.4685 15.958C13.9829 15.916 14.2976 15.8367 14.5447 15.7109L14.7292 15.6074C15.147 15.3511 15.4879 14.9841 15.7117 14.5449L15.7976 14.3447C15.8751 14.128 15.9272 13.8546 15.9587 13.4688C16.0014 12.9463 16.0017 12.2774 16.0017 11.333V10.833C16.0018 10.466 16.2997 10.1681 16.6667 10.168C17.0339 10.168 17.3316 10.4659 17.3318 10.833V11.333C17.3318 12.2555 17.3331 12.9879 17.2849 13.5771C17.2422 14.0993 17.1584 14.5541 16.9792 14.9717L16.8962 15.1484C16.5609 15.8066 16.0507 16.3571 15.4246 16.7412L15.1492 16.8955C14.6833 17.1329 14.1739 17.2354 13.5769 17.2842C12.9878 17.3323 12.256 17.332 11.3337 17.332H8.66675C7.74446 17.332 7.01271 17.3323 6.42358 17.2842C5.90135 17.2415 5.44665 17.1577 5.02905 16.9785L4.85229 16.8955C4.19396 16.5601 3.64271 16.0502 3.25854 15.4238L3.10425 15.1484C2.86697 14.6827 2.76534 14.1739 2.71655 13.5771C2.66841 12.9879 2.6687 12.2555 2.6687 11.333ZM13.4646 3.11328C14.4201 2.334 15.8288 2.38969 16.7195 3.28027L16.8865 3.46485C17.6141 4.35685 17.6143 5.64423 16.8865 6.53613L16.7195 6.7207L11.6726 11.7686C11.1373 12.3039 10.4624 12.6746 9.72827 12.8408L9.41089 12.8994L7.59351 13.1582C7.38637 13.1877 7.17701 13.1187 7.02905 12.9707C6.88112 12.8227 6.81199 12.6134 6.84155 12.4063L7.10132 10.5898L7.15991 10.2715C7.3262 9.53749 7.69692 8.86241 8.23218 8.32715L13.2791 3.28027L13.4646 3.11328ZM15.7791 4.2207C15.3753 3.81702 14.7366 3.79124 14.3035 4.14453L14.2195 4.2207L9.17261 9.26856C8.81541 9.62578 8.56774 10.0756 8.45679 10.5654L8.41772 10.7773L8.28296 11.7158L9.22241 11.582L9.43433 11.543C9.92426 11.432 10.3749 11.1844 10.7322 10.8271L15.7791 5.78027L15.8552 5.69629C16.185 5.29194 16.1852 4.708 15.8552 4.30371L15.7791 4.2207Z"})),pf=Object.freeze(Object.defineProperty({__proto__:null,default:sU},Symbol.toStringTag,{value:"Module"})),oU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.0857 8.74999C14.0857 5.80355 11.6972 3.41503 8.75073 3.41503C5.80429 3.41503 3.41577 5.80355 3.41577 8.74999C3.41577 11.6964 5.80429 14.085 8.75073 14.085C11.6972 14.085 14.0857 11.6964 14.0857 8.74999ZM15.4158 8.74999C15.4158 10.3539 14.848 11.8245 13.9041 12.9746L13.9705 13.0303L16.9705 16.0303L17.0564 16.1338C17.2269 16.3919 17.1977 16.7434 16.9705 16.9707C16.7432 17.1975 16.3925 17.226 16.1345 17.0557L16.03 16.9707L13.03 13.9707L12.9753 13.9033C11.8253 14.8472 10.3547 15.415 8.75073 15.415C5.06975 15.415 2.08569 12.431 2.08569 8.74999C2.08569 5.06901 5.06975 2.08495 8.75073 2.08495C12.4317 2.08495 15.4158 5.06901 15.4158 8.74999Z"})),nC=Object.freeze(Object.defineProperty({__proto__:null,default:oU},Symbol.toStringTag,{value:"Module"})),Vs=xs(t=>{let e;return Mo(()=>{var n,s;return(s=(n=D3(t).data)==null?void 0:n.id)!=null?s:void 0},n=>{e=n},{fireImmediately:!0}),{logEventWithStatsig:(n,s,o)=>{const a=e?B(w({},o),{feed_id:e}):o;U.logEventWithStatsig(n,s,a)}}}),C7e=j(()=>I(()=>import("./j2tk9qhizy0n5zaq.js").then(t=>t._),__vite__mapDeps([402,1])),{loading:t=>L(t)});function w7e(t){"use forget";const e=H.c(4),{iconOnly:n}=t,s=G();let o;if(e[0]!==s?(o=()=>B2(s),e[0]=s,e[1]=o):o=e[1],!ue(o))return null;let i;return e[2]!==n?(i=r.jsx(k7e,{iconOnly:n}),e[2]=n,e[3]=i):i=e[3],i}function k7e(t){"use forget";const e=H.c(12),{iconOnly:n}=t,s=J(),o=Wte(),a=G();let i;e[0]!==s?(i=s.formatMessage({id:"zEGHd1",defaultMessage:"Pulse"}),e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==a?(c=()=>{Vs(a).logEventWithStatsig("(Web) Feed Opened From Sidebar","chatgpt_web_fyp_feed_opened_from_sidebar")},e[2]=a,e[3]=c):c=e[3];let d;e[4]!==n||e[5]!==l?(d=n?{iconOnly:!0,iconAriaLabel:l}:{},e[4]=n,e[5]=l,e[6]=d):d=e[6];let u;return e[7]!==o||e[8]!==l||e[9]!==c||e[10]!==d?(u=r.jsx(La,w({"data-testid":"sidebar-item-pulse",icon:C7e,to:"/pulse",onClick:c,label:l,active:o},d)),e[7]=o,e[8]=l,e[9]=c,e[10]=d,e[11]=u):u=e[11],u}const M7e={type:"unsupported",value:void 0};const T7e={home:{from:{type:"landing-page",className:"back-animation"}},"landing-page":{from:{type:"home",className:"use-case-animation"},to:{type:"home",className:"back-animation"}},conversation:{},unsupported:{},library:{from:{type:"home",className:"use-case-animation"},to:{type:"home",className:"back-animation"}}},Kr=class Kr{constructor(){ne(this,"activeViewTransition",null);ne(this,"classNames",[]);ne(this,"storage",new Bv);ne(this,"currentPage",null);ne(this,"previousPage",null);ne(this,"waitForReadyPromise",null);ne(this,"waitForReadyResolve",null)}static getPageToPageConfig({to:e,from:n}){if(!T7e[e.type]||e.type===(n==null?void 0:n.type))return null;const o=[];return n&&(o.push("from-".concat(n.type)),n.value&&o.push("from-value-".concat(n.value))),o.push("to-".concat(e.type)),e.value&&o.push("to-value-".concat(e.value)),o}addStaticClass(e){if(!e)return;const n=Array.isArray(e)?e:[e];n.forEach(s=>{Kr.persistedClassNames.add(s)}),document.documentElement.classList.add(...n)}static getPageType(e){let n;for(const s of e)if(s.id==="routes/_conversation.$landingType"){const o=s.data;o!=null&&o.type&&(n={type:o.page,value:o.type})}else s.id==="routes/_conversation"?n={type:"home",value:void 0}:s.id==="routes/_conversation.c.$conversationId"?n={type:"conversation",value:void 0}:s.id==="routes/trending"&&(n={type:"trending",value:void 0});return n!=null?n:M7e}loadPageTransition(e){const n=Kr.getPageType(e);this.previousPage=this.currentPage,this.currentPage=n}loadPageTransitionFromStorage(){const e=this.storage.getEntry();e&&(this.addClassToCurrentTransition(e.classNames),this.signalTransitionReady())}transitionToPage(e,n){const s=Kr.getPageToPageConfig({to:e,from:this.currentPage});this.classNames=[],this.addClassToCurrentTransition(s);const o=this.storage.createEntry({from:this.currentPage,to:e,classNames:s});this.storage.saveEntry(o),this.startTransition({classNames:s,waitForReady:!0,update:n})}addClassToCurrentTransition(e){e&&(this.classNames.push(...Array.isArray(e)?e:[e]),this.syncClassNames())}syncClassNames(){const e=Array.from(document.documentElement.classList).filter(n=>!this.classNames.includes(n)&&!Kr.persistedClassNames.has(n)&&(n.startsWith("from-")||n.startsWith("to-")));document.documentElement.classList.remove(...e),document.documentElement.classList.add(...this.classNames)}signalTransitionReady(){var e;this.waitForReadyPromise&&((e=this.waitForReadyResolve)==null||e.call(this))}waitForTransitionReady(){return this.waitForReadyPromise}static timeout(e,n){return new Promise(s=>{setTimeout(()=>{n.aborted||Oe.addError(new Error("Unexpected view transition timeout")),s()},e)})}startTransition({classNames:e,forceFlushSync:n,staticClassNames:s,types:o,update:a,waitForReady:i=!1}){this.addStaticClass(s),i&&(this.waitForReadyPromise=new Promise(d=>{this.waitForReadyResolve=d}));const c=zB({update:i?async()=>{await a();const d=new AbortController;await Promise.race([this.waitForTransitionReady(),Kr.timeout(1500,d.signal)]),d.abort(),await new Promise(u=>setTimeout(u,60))}:a,className:e,forceFlushSync:n,types:o});return this.activeViewTransition=c,c}};ne(Kr,"persistedClassNames",new Set);let Zg=Kr;const zu=class zu{getEntry(){const e=sessionStorage.getItem(zu.key);return e?JSON.parse(e):null}saveEntry(e){sessionStorage.setItem(zu.key,JSON.stringify(e))}createEntry({from:e,to:n,classNames:s}){return n.type==="home"?{version:1,classNames:s!=null?s:[],from:e==null?void 0:e.type,to:n.type,selector:"[data-type='unified-composer']",wait:!1}:n.type==="landing-page"?{version:1,from:e==null?void 0:e.type,to:n.type,classNames:s!=null?s:[],selector:"[data-landing-page-load-target]",wait:!0}:{version:1,from:e==null?void 0:e.type,to:n.type,classNames:s!=null?s:[],wait:!1}}};ne(zu,"key","view-transition-session-storage");let Bv=zu;const E7e=xs(()=>new Zg);function A7e(t){return E7e(t)}function I7e(){const t=G(),e=QV(),n=Zg.getPageType(e),s=A7e(t);return uf(()=>{s.loadPageTransition(e)}),_.useEffect(()=>{s.loadPageTransitionFromStorage()},[n.type,s]),{pageType:n}}function j7e(){return{library:Ie.PictureV2,images:Ie.PictureV2,research:Ie.Research,write:Ie.Canvas}}const P7e=j7e();Object.fromEntries(Object.entries(P7e).map(([t,e])=>[e,t]));function N7e(t,e){return"/".concat(e)}const Fet=JV(function(){return null}),R7e=t=>{"use forget";const e=H.c(18),{iconOnly:n}=t,s=J(),{pageType:o}=I7e(),a=AS();let i;e[0]!==s?(i=s.formatMessage({id:"E56n+Q",defaultMessage:"Library"}),e[0]=s,e[1]=i):i=e[1];const l=i;let c,d;if(e[2]===Symbol.for("react.memo_cache_sentinel")){c=null;try{typeof window<"u"&&(c=window.localStorage.getItem("chatgpt_library_last_tab"))}catch(S){c=null}d=N7e(Ie.PictureV2,"library"),e[2]=c,e[3]=d}else c=e[2],d=e[3];const u=d;let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=()=>u,e[4]=m):m=e[4];const[f,p]=_.useState(m);let g;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{p(c?"".concat(u,"?tab=").concat(encodeURIComponent(c)):u)},e[5]=g):g=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=[c,u],e[6]=h):h=e[6],_.useEffect(g,h);let x;e[7]!==a?(x=()=>{U.logEventWithStatsig("chatgpt_web_image_library_sidebar_item_clicked","chatgpt_web_image_library_sidebar_item_clicked",{location:a})},e[7]=a,e[8]=x):x=e[8];const y=o.type==="library";let b;e[9]!==n||e[10]!==l?(b=n?{iconOnly:!0,iconAriaLabel:l}:{},e[9]=n,e[10]=l,e[11]=b):b=e[11];let v;return e[12]!==l||e[13]!==x||e[14]!==y||e[15]!==b||e[16]!==f?(v=r.jsx(La,w({"data-testid":"sidebar-item-library",onClick:x,active:y,icon:O3,to:f,label:l},b)),e[12]=l,e[13]=x,e[14]=y,e[15]=b,e[16]=f,e[17]=v):v=e[17],v},Bet=()=>{"use forget";const t=H.c(15),e=G();let n;t[0]!==e?(n=xe(e,"713974087"),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a,i,l,c,d,u,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=W("tall:sticky tall:top-header-height tall:z-20 bg-token-bg-elevated-secondary relative","[--sticky-spacer:6px]"),a=r.jsx(L7e,{}),i=r.jsx(O7e,{}),l=!1,c=!1,d=!1,u=r.jsx(w7e,{}),m=r.jsx(R7e,{}),t[2]=o,t[3]=a,t[4]=i,t[5]=l,t[6]=c,t[7]=d,t[8]=u,t[9]=m):(o=t[2],a=t[3],i=t[4],l=t[5],c=t[6],d=t[7],u=t[8],m=t[9]);let f;t[10]!==s?(f=!1,t[10]=s,t[11]=f):f=t[11];let p;t[12]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx("div",{"aria-hidden":!0,className:W("pointer-events-none absolute start-0 end-0","-bottom-[var(--sticky-spacer)] h-[var(--sticky-spacer)]","opacity-0 will-change-[opacity] group-data-scrolled-from-top/scrollport:opacity-100","bg-token-bg-elevated-secondary")}),t[12]=p):p=t[12];let g;return t[13]!==f?(g=r.jsxs(sSe,{first:!0,className:o,children:[a,i,l,c,d,u,m,f,p]}),t[13]=f,t[14]=g):g=t[14],g},L7e=t=>{"use forget";const e=H.c(15),{iconOnly:n}=t,s=G(),o=J(),a=AS(),i=ue(Wb);let l;e[0]!==s||e[1]!==a?(l=h=>{U.logEvent("Sidebar Click Gizmo",{gizmo_id:"primary"}),Y8(s,h,{location:a!=null?a:"Sidebar gizmo list"})},e[0]=s,e[1]=a,e[2]=l):l=e[2];const c=l;let d;e[3]!==o?(d=o.formatMessage({id:"6Abeg/",defaultMessage:"New chat"}),e[3]=o,e[4]=d):d=e[4];const u=d,m=p1();let f;e[5]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(w1,{binding:D8,className:"touch:hidden"}),e[5]=f):f=e[5];let p;e[6]!==n||e[7]!==u?(p=n?{iconOnly:!0,iconAriaLabel:u}:{},e[6]=n,e[7]=u,e[8]=p):p=e[8];let g;return e[9]!==i||e[10]!==c||e[11]!==u||e[12]!==m||e[13]!==p?(g=r.jsx(La,w({"data-testid":"create-new-chat-button",to:"/",state:m,onClick:c,icon:sU,label:u,highlightTrailing:f,showHighlightTrailing:i},p)),e[9]=i,e[10]=c,e[11]=u,e[12]=m,e[13]=p,e[14]=g):g=e[14],g},O7e=({iconOnly:t})=>{const e=G(),n=J(),{isFannyPackEnabled:s}=yS(e),o=AS(),a=ue(Wb);if(_.useEffect(()=>{s&&(Oe.addAction("fannypack.web.action_seen"),I(()=>import("./ivwhma44lqs3zafn.js").then(l=>l.d),__vite__mapDeps([403,404,29,1,30])))},[s]),!s)return null;const i=n.formatMessage({id:"bDEsvT",defaultMessage:"Search chats"});return r.jsx(DO,w({onClick:()=>{I(()=>import("./ivwhma44lqs3zafn.js").then(l=>l.d),__vite__mapDeps([403,404,29,1,30])).then(l=>l.openFannyPackSearch()),U.logEventWithStatsig("chatgpt_web_search_sidebar_item_clicked","chatgpt_web_search_sidebar_item_clicked",{location:o})},icon:oU,label:i,highlightTrailing:r.jsx("div",{className:"touch:hidden",children:r.jsx(w1,{binding:rce})}),showHighlightTrailing:a},t?{iconOnly:!0,iconAriaLabel:i}:{}))};function Uet({gizmoResource:t,serverThreadId:e,isOnProjectPage:n,conversations:s,hasNextPage:o=!1}){const a=G(),i=s!=null?s:[],l=i.findIndex(u=>u.id===e),c=i.slice(0,Su);l!=null&&l>=Su&&(c[Su-1]=i[l]);const d=o||i.length>Su;return r.jsxs(r.Fragment,{children:[c.map(u=>r.jsx(G1,{className:"ps-9",conversation:u,isActive:u.id===e},u.id)),d&&!n&&r.jsx(La,{to:km(a,t),className:"ps-9",label:r.jsx(P,w({},Gt.seeAllChats))})]})}function Vet(t){"use forget";const e=H.c(21),{className:n,autoFocus:s,initialValue:o,onCommit:a,onCancel:i}=t,l=s===void 0?!0:s,[c,d]=_.useState(o),u=_.useRef(null);let m;e[0]!==o||e[1]!==i||e[2]!==a||e[3]!==c?(m=function(){c!==o?a(c):i()},e[0]=o,e[1]=i,e[2]=a,e[3]=c,e[4]=m):m=e[4];const f=m;let p;e[5]===Symbol.for("react.memo_cache_sentinel")?(p=b=>d(b.target.value),e[5]=p):p=e[5];let g;e[6]!==f||e[7]!==i?(g=b=>{if(v9(b)){b.key===" "&&b.stopPropagation();e:switch(b.key){case"Escape":{i();break e}case"Enter":f()}}},e[6]=f,e[7]=i,e[8]=g):g=e[8];let h;e[9]!==f||e[10]!==i||e[11]!==c.length?(h=()=>{c.length?f():i()},e[9]=f,e[10]=i,e[11]=c.length,e[12]=h):h=e[12];let x;e[13]!==n?(x=W("w-full border-none bg-transparent p-0 text-sm focus:ring-0",n),e[13]=n,e[14]=x):x=e[14];let y;return e[15]!==l||e[16]!==g||e[17]!==h||e[18]!==x||e[19]!==c?(y=r.jsx("input",{ref:u,type:"text",name:"title-editor",value:c,onFocus:F7e,autoFocus:l,onChange:p,onClick:D7e,onKeyDown:g,onBlur:h,className:x}),e[15]=l,e[16]=g,e[17]=h,e[18]=x,e[19]=c,e[20]=y):y=e[20],y}function D7e(t){t.preventDefault()}function F7e(t){var e;(e=t.currentTarget)==null||e.select()}const Get=be({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),D4=2,F4=3;function $et(t,e){var u,m,f,p,g,h,x;const n=Md(t,y=>y.flair.kind);let s=[],o=[];const a=(u=n[Pi.Recent])==null?void 0:u.slice(0,D4),i=(m=n[Pi.Recent])==null?void 0:m.slice(D4),l=(f=n[Pi.Workspace])==null?void 0:f.slice(0,F4),c=(p=n[Pi.Workspace])==null?void 0:p.slice(F4),d=(g=n[Pi.Mine])!=null?g:[];return s=[...l!=null?l:[],...(h=n[Pi.FirstParty])!=null?h:[],...(x=n[Pi.SidebarKeep])!=null?x:[],...a!=null?a:[],...e?d:[]],o=[...i!=null?i:[],...c!=null?c:[]],{topGizmos:s,remainingGizmos:o}}function aU(t){const e=JSON.stringify(t.map(s=>[s.id,s.title,s.update_time]));return _.useMemo(()=>t,[e])}const B7e="starred-conversations",U7e=1;function V7e({activeId:t}){var a;const e=fb(B7e,U7e,Ak().queryKey),{data:n,isLoading:s}=lt(B(w({},Ak()),{placeholderData:e})),o=aU((a=n==null?void 0:n.map(i=>i.item))!=null?a:[]);return!s&&o.length===0?null:s?r.jsxs(kd,{children:[r.jsx(So,{}),r.jsx(So,{})]}):o.map(i=>r.jsx(G1,{conversation:i,isActive:t===i.id,isStarred:!0},i.id))}const G7e=5;function rU(t){"use forget";const e=H.c(9),{activeId:n,items:s,hasNextPage:o,infiniteScrollTriggerElementRef:a,hideOverflowMenu:i,onSelect:l}=t;let c;e[0]!==n||e[1]!==o||e[2]!==i||e[3]!==a||e[4]!==s||e[5]!==l?(c=s.map((m,f)=>{var g;const p=o&&((g=s[s.length-G7e-1])==null?void 0:g.id)===m.id?a:void 0;return r.jsx(G1,{conversation:m,hideOverflowMenu:i,isActive:n===m.id,elementRef:p,testId:"history-item-".concat(f),onSelect:l},m.id)}),e[0]=n,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=c):c=e[6];let d;return e[7]!==c?(d=r.jsx(r.Fragment,{children:c}),e[7]=c,e[8]=d):d=e[8],d}const B4=be({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function $7e(t){"use forget";const e=H.c(61),{activeId:n,hideOverflowMenu:s}=t,o=G(),a=xt(),[i,l]=_.useState(!1),[c,d]=_.useState(0),u=Wz(),[m,f]=_.useState(!1),p=dwe(),g=SP();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={},e[0]=h):h=e[0];const{conversations:x,hasNextPage:y,fetchNextPage:b,isLoading:v,isFetchingNextPage:S,isError:C}=k2(h),k=aU(x);let M;e[1]!==y||e[2]!==v||e[3]!==b?(M=ve=>{if(v||ve==null)return;const _e=new IntersectionObserver(we=>{we[0].isIntersecting&&y&&b()});return _e.observe(ve),()=>{_e.disconnect()}},e[1]=y,e[2]=v,e[3]=b,e[4]=M):M=e[4];const T=M;let E,A;e[5]!==k?(E=()=>{nl.publish({kind:"refreshHistory",conversations:k})},A=[k],e[5]=k,e[6]=E,e[7]=A):(E=e[6],A=e[7]),_.useEffect(E,A);let N,R;e[8]!==o||e[9]!==a?(N=()=>zz(o,"conversations").onMessage(_e=>{_e.type==="conversation-turn-complete"&&xe(o,"1163864876")&&ro(a,_e.payload.conversation_id)}),R=[o,a],e[8]=o,e[9]=a,e[10]=N,e[11]=R):(N=e[10],R=e[11]),_.useEffect(N,R);const O=k;let D,F;e[12]!==c||e[13]!==u?(D=()=>{const ve=qz(Yz(),Date.now());u(()=>{d(c+1)},ve+1e3)},F=[c,u],e[12]=c,e[13]=u,e[14]=D,e[15]=F):(D=e[14],F=e[15]),_.useEffect(D,F);const V=O.length===0;_a.markStart("History",_a.NS_SIDEBAR);const z=ut(o);let $;e[16]!==o?($=xe(o,"2560369700"),e[16]=o,e[17]=$):$=e[17];const Y=$;z!=null&&!v&&_a.markRendered("History",_a.NS_SIDEBAR);let Q;e[18]!==p?(Q=p!=null&&p.kind==="conversation"&&p.gizmoId!=null&&$s(p.gizmoId),e[18]=p,e[19]=Q):Q=e[19];const q=Q,X=v||C||V,oe=_.useRef(0),se=X&&"h-full items-center justify-center empty:hidden",de=m&&"opacity-50";let ie;e[20]!==se||e[21]!==de?(ie=W(se,de),e[20]=se,e[21]=de,e[22]=ie):ie=e[22];let ae;e[23]!==q?(ae=ve=>{ve.preventDefault(),q&&f(!0)},e[23]=q,e[24]=ae):ae=e[24];let ce;e[25]!==q||e[26]!==p||e[27]!==g?(ce=ve=>{var _e;ve.preventDefault(),q&&(oe.current=0,f(!1),g({newGizmoId:null,conversation:p.conversation,previousGizmoId:(_e=p.gizmoId)!=null?_e:null}))},e[25]=q,e[26]=p,e[27]=g,e[28]=ce):ce=e[28];let ye,fe;e[29]!==q?(ye=ve=>{ve.preventDefault(),q&&(oe.current=oe.current+1)},fe=ve=>{ve.preventDefault(),q&&(oe.current=oe.current-1,oe.current===0&&f(!1))},e[29]=q,e[30]=ye,e[31]=fe):(ye=e[30],fe=e[31]);let Ce;e[32]!==V||e[33]!==v?(Ce=V&&v&&r.jsx(kd,{children:r.jsx(Ws,{className:"m-auto"})}),e[32]=V,e[33]=v,e[34]=Ce):Ce=e[34];let ee;e[35]!==i||e[36]!==V||e[37]!==C||e[38]!==a?(ee=V&&C&&r.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[r.jsx(P,w({},B4.unableToLoadHistory)),!i&&r.jsx("div",{className:"mt-1",children:r.jsx(he,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{l(!0),ro(a)},children:r.jsx(P,w({},B4.retryButton))})})]}),e[35]=i,e[36]=V,e[37]=C,e[38]=a,e[39]=ee):ee=e[39];let te;e[40]!==n||e[41]!==y||e[42]!==s||e[43]!==T||e[44]!==V||e[45]!==v||e[46]!==O||e[47]!==Y?(te=!v&&!V&&r.jsxs(r.Fragment,{children:[Y&&r.jsx(V7e,{activeId:n}),r.jsx(rU,{activeId:n,hasNextPage:y,items:O,infiniteScrollTriggerElementRef:T,hideOverflowMenu:s})]}),e[40]=n,e[41]=y,e[42]=s,e[43]=T,e[44]=V,e[45]=v,e[46]=O,e[47]=Y,e[48]=te):te=e[48];let le;e[49]!==S?(le=S&&r.jsxs("div",{className:"mb-5",children:[r.jsx(So,{}),r.jsx(So,{}),r.jsx(So,{})]}),e[49]=S,e[50]=le):le=e[50];let re;return e[51]!==ie||e[52]!==ae||e[53]!==ce||e[54]!==ye||e[55]!==fe||e[56]!==Ce||e[57]!==ee||e[58]!==te||e[59]!==le?(re=r.jsxs("div",{id:"history",className:ie,onDragOver:ae,onDrop:ce,onDragEnter:ye,onDragLeave:fe,children:[Ce,ee,te,le]}),e[51]=ie,e[52]=ae,e[53]=ce,e[54]=ye,e[55]=fe,e[56]=Ce,e[57]=ee,e[58]=te,e[59]=le,e[60]=re):re=e[60],re}const Het=Kn.memo($7e);function H7e(t,e){return t in Np&&typeof e=="boolean"}const Np={apps:!1,projects:!0,gpts:!0,chats:!0,favorites:!1,groupChats:!0},W7e=xs(()=>{const t=z7e(),e={apps:Qe(t.sectionStates.apps),projects:Qe(t.sectionStates.projects),gpts:Qe(t.sectionStates.gpts),chats:Qe(t.sectionStates.chats),favorites:Qe(t.sectionStates.favorites),groupChats:Qe(t.sectionStates.groupChats)};return{sidebarSectionState:e,expandSection:s=>{e[s].set(!0),U4(e)},collapseSection:s=>{e[s].set(!1),U4(e)}}});function U4(t){const e={apps:t.apps(),projects:t.projects(),gpts:t.gpts(),chats:t.chats(),favorites:t.favorites(),groupChats:t.groupChats()};q7e({sectionStates:e})}function z7e(){try{const t=Qn.getCookie(Jn.SidebarSections);if(t){const e=JSON.parse(t);if(e&&typeof e.sectionStates=="object"){const n=w({},Np);for(const[s,o]of Object.entries(e.sectionStates))H7e(s,o)&&(n[s]=o);return{sectionStates:n}}}return{sectionStates:Np}}catch(t){return Oe.addError(new Error("Failed to load sidebar section state",{cause:t})),{sectionStates:Np}}}function q7e(t){try{Qn.setCookie(Jn.SidebarSections,JSON.stringify({sectionStates:t.sectionStates}))}catch(e){Oe.addError(new Error("Failed to save sidebar section state",{cause:e}))}}const Y7e=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),Z7e=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)});function Wet(t){"use forget";const e=H.c(27),{title:n,id:s,children:o}=t,a=G(),i=J();let l;e[0]!==a?(l=W7e(a),e[0]=a,e[1]=l):l=e[1];const c=l,d=ue(c.sidebarSectionState[s]);let u;e[2]!==s||e[3]!==c||e[4]!==d?(u=k=>{k.preventDefault(),d?c.collapseSection(s):c.expandSection(s)},e[2]=s,e[3]=c,e[4]=d,e[5]=u):u=e[5];const m=u;let f;e[6]!==i||e[7]!==d?(f=d?i.formatMessage({defaultMessage:"Collapse section",id:"sidebar.collapseSection"}):i.formatMessage({defaultMessage:"Expand section",id:"sidebar.expandSection"}),e[6]=i,e[7]=d,e[8]=f):f=e[8];const p=f,g=d?"mb-[var(--sidebar-expanded-section-margin-bottom)]":"mb-[var(--sidebar-collapsed-section-margin-bottom)]";let h;e[9]!==g?(h=W("group/sidebar-expando-section",g),e[9]=g,e[10]=h):h=e[10];let x;e[11]!==n?(x=r.jsx(OO,{"data-no-spacing":!0,children:n}),e[11]=n,e[12]=x):x=e[12];let y;e[13]!==d?(y=d?r.jsx(Z7e,{className:"hidden h-3 w-3 group-hover/sidebar-expando-section:block"}):r.jsx(Y7e,{className:"h-3 w-3 group-hover/sidebar-expando-section:block"}),e[13]=d,e[14]=y):y=e[14];let b;e[15]!==x||e[16]!==y?(b=r.jsxs("div",{className:"text-token-text-tertiary flex w-full items-center justify-start gap-0.5",children:[x,y]}),e[15]=x,e[16]=y,e[17]=b):b=e[17];let v;e[18]!==p||e[19]!==m||e[20]!==d||e[21]!==b?(v=r.jsx(DO,{onClick:m,"aria-expanded":d,"aria-label":p,"data-no-hover-bg":!0,"data-no-contents-gap":!0,children:b}),e[18]=p,e[19]=m,e[20]=d,e[21]=b,e[22]=v):v=e[22];const S=d&&o;let C;return e[23]!==S||e[24]!==h||e[25]!==v?(C=r.jsxs("div",{className:h,children:[v,S]}),e[23]=S,e[24]=h,e[25]=v,e[26]=C):C=e[26],C}function zet({showRetry:t,refetch:e}){return r.jsxs("div",{className:"text-token-text-tertiary mt-5 p-3 text-center italic",children:[r.jsx(P,w({},Gt.unableToLoadHistory)),t&&r.jsx("div",{className:"mt-1",children:r.jsx(he,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{e(!0)},children:r.jsx(P,w({},Gt.retryLoadingHistory))})})]})}function K7e(t){return r.jsx(Si,{side:"right",sideOffset:-4,alignOffset:-7,size:"auto",triggerButton:r.jsx(Hb,{as:"div",icon:t.icon,label:t.label,highlightTrailing:t.highlightTrailing}),children:r.jsx("div",{className:"max-h-[50dvh] max-w-(--sidebar-width) overflow-x-auto [scrollbar-gutter:stable]",children:r.jsx(kd,{children:t.children})})})}const Q7e=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)});function qet({currentGizmoId:t}){return r.jsx(K7e,{label:r.jsx(P,w({},Gt.seeMoreProjectItems)),icon:Q7e,children:r.jsx(By,{currentGizmoId:t,inSidebarFlyout:!0})})}const sC=t=>{switch(t){case"thumbsDown":return"thumbs_down";case"thumbsUp":return"thumbs_up"}},J7e="ecosystem_app_feedback";function Lr(t,e,n="CHAT"){return{signal_detail:{common_metadata:e},signal_type:t,signal_metadata:{},user_metadata:{},product_surface:n}}function Or(t){pe.safePost("/unified_user_signals",{requestBody:t,authOption:qt.SendIfAvailable})}function X7e(t,e,n,s="CHAT",o={}){var a=Lr("message_feedback",{conversation_id:e,message_id:n},s);a.signal_detail.message_feedback=t,Object.assign(a.signal_detail,o),Or(a)}function eIe(t,e,n,s="CHAT"){var o=Lr("conversation_rating",{conversation_id:e,message_id:n},s);o.signal_detail.conversation_rating=t,Or(o)}function $r(t,e,n,s,o={},a="CHAT"){const i=Lr(t,{conversation_id:e,message_id:n,image_generation_id:s},a);Object.assign(i.signal_detail,o),Or(i)}function iU(t,e,n,s="CHAT"){var o=Lr("turn_regeneration",{conversation_id:e,model_slug:n},s);o.signal_detail.turn_regeneration=t,Or(o)}function Yet(t,e,n="CHAT"){var s=Lr("active_branch_switch",{conversation_id:e},n);s.signal_detail.active_branch_switch=t,Or(s)}function tIe(t,e,n="CHAT"){const s=Lr("survey_submission",{conversation_id:e},n);s.signal_detail.survey_submission=t,Or(s)}function nIe(t,e,n="CHAT"){const s=Lr("survey_seen",{conversation_id:e},n);s.signal_detail.survey_seen=t,Or(s)}function sIe(t,e,n="CHAT"){var o,a;const s=Lr("survey_dismissed",{conversation_id:e},n);s.signal_detail.survey_dismissed={survey_campaign_name:(o=t.survey_campaign_name)!=null?o:null,survey_election_id:(a=t.survey_election_id)!=null?a:null},Or(s)}function Zet({rating:t,conversationId:e,messageId:n,suggestionMessageId:s,attributionId:o,widgetType:a,productSurface:i="CHAT"}){const l=Lr(J7e,{conversation_id:e!=null?e:null,message_id:n!=null?n:null},i);l.signal_detail.ecosystem_app_feedback={rating:sC(t),attribution_id:o!=null?o:null,widget_type:a!=null?a:null,suggestion_message_id:s!=null?s:null},Or(l)}const oIe=768,aIe=320,rIe=140,rp=8,iIe=12;function lIe(t,e,n){const[s,o]=_.useState(null),[a,i]=_.useState(!1),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=()=>{var g,h,x,y,b;const m=e.current;if(!m)return;let f=null;if(t){const v='nav a[href*="/c/'.concat(t,'"]'),S=document.querySelector(v);if(S&&(f=S.getBoundingClientRect()),f&&(f.bottom<=0||f.top>=window.innerHeight)){o(null);return}}if(f||(f=((g=document.querySelector("nav"))!=null?g:m).getBoundingClientRect()),window.matchMedia("(max-width: ".concat(oIe,"px)")).matches){const v=(x=(h=n.current)==null?void 0:h.getBoundingClientRect().width)!=null?x:aIe,S=(b=(y=n.current)==null?void 0:y.getBoundingClientRect().height)!=null?b:rIe,C=f.left+f.width/2-v/2,k=Math.max(rp,Math.min(C,window.innerWidth-v-rp)),M=f.top-S-rp,T=Math.max(rp,M);i(!0),o({top:T,left:k})}else{const v=f.top+f.height/2,S=f.right+iIe;i(!1),o({top:v,left:S})}};return En(()=>{u();const m=()=>{l.current&&cancelAnimationFrame(l.current),l.current=requestAnimationFrame(u)},f=()=>{m()};window.addEventListener("resize",f),window.addEventListener("scroll",f,!0);const p=document.querySelector("nav");if(p&&typeof MutationObserver<"u"){const g=new MutationObserver(()=>m());g.observe(p,{childList:!0,subtree:!0}),c.current=g}if(typeof ResizeObserver<"u"){const g=new ResizeObserver(()=>m());p&&g.observe(p),n.current&&g.observe(n.current),d.current=g}return()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",f,!0),l.current&&cancelAnimationFrame(l.current),c.current&&(c.current.disconnect(),c.current=null),d.current&&(d.current.disconnect(),d.current=null)}},[t]),{pos:s,isMobileAbove:a,remeasure:u}}function cIe({conversationId:t,children:e,onClose:n,clickOutsideToClose:s=!1,onVisibilityChange:o=()=>{}}){const[a,i]=_.useState(!1),l=J(),c=_.useRef(null),d=_.useRef(null),u=ZZ(),{pos:m,isMobileAbove:f}=lIe(t,c,d);En(()=>{u||yn.setSidebarOpen(!0)},[u]),En(()=>{if(!s)return;const x=y=>{const b=d.current;b&&y.target instanceof Node&&!b.contains(y.target)&&n()};return document.addEventListener("mousedown",x,!0),()=>document.removeEventListener("mousedown",x,!0)},[n,s]),En(()=>{if(!m)return;i(!1);const x=requestAnimationFrame(()=>i(!0));return()=>cancelAnimationFrame(x)},[m]);const p=ya(o);_.useEffect(()=>{const x=!!m;p==null||p(x)},[m,p]);const g=r.jsx("span",{ref:c,role:"presentation",style:{display:"none"}});if(!m)return g;const h=r.jsxs("div",{ref:d,style:{position:"fixed",top:m.top,left:m.left,zIndex:1e3},className:"border-token-border-light relative max-h-[60vh] max-w-md transform rounded-lg border bg-blue-500 p-4 text-sm text-white shadow-2xl transition-opacity duration-200 "+(f?"":"-translate-y-1/2")+(a?" opacity-100":" opacity-0"),children:[r.jsx(fn,{onClick:n,className:"absolute end-2 top-2 text-white hover:bg-blue-400/20! hover:text-white",bg:"transparent","aria-label":l.formatMessage({id:"n7Yh10",defaultMessage:"Close survey"})}),f?r.jsx("div",{className:"border-token-border-light absolute start-4 -bottom-2 h-4 w-4 rotate-45 border bg-blue-500"}):r.jsx("div",{className:"border-token-border-light absolute -start-2 top-1/2 h-4 w-4 -translate-y-1/2 rotate-45 border bg-blue-500"}),e]});return r.jsxs(r.Fragment,{children:[g,fi.createPortal(h,document.body)]})}const dIe=5;function Ket(){"use forget";const t=H.c(6),e=G();let n;t[0]!==e?(n=xe(e,"3324471394"),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a;if(t[2]!==s?(o=()=>{s||zI()},a=[s],t[2]=s,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a),!s)return null;let i;return t[5]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(uIe,{}),t[5]=i):i=t[5],i}function uIe(){"use forget";const t=H.c(49),{survey:e,finishSurvey:n}=jee();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={},t[0]=s):s=t[0];const{conversations:o}=k2(s),a=G();Pee();const i=!ue(mIe),l=_.useRef(null);let c,d;if(t[1]!==o||t[2]!==e){const Y=(Array.isArray(o)?o:[]).slice(0,dIe);c=Boolean,d=e&&Y.some(Z=>(Z==null?void 0:Z.id)===(e==null?void 0:e.conversation_id)),t[1]=o,t[2]=e,t[3]=c,t[4]=d}else c=t[3],d=t[4];const u=c(d),m=!(e!=null&&e.survey_display_type)||e.survey_display_type==="CONVERSATION_COACHMARK",f=!(e!=null&&e.trigger_event_type)||e.trigger_event_type==="NEW_CHAT_CLICK",p=!!(e!=null&&e.content),g=!!(e&&u&&p&&m&&f&&!i);let h;t[5]!==g||t[6]!==e?(h=()=>{if(!g||!(e!=null&&e.conversation_id))return;const $='nav a[href*="/c/'.concat(e.conversation_id,'"]'),Y=document.querySelector($);if(Y)return Y.classList.add("ring-2","ring-blue-500","rounded-md"),()=>{Y.classList.remove("ring-2","ring-blue-500","rounded-md")}},t[5]=g,t[6]=e,t[7]=h):h=t[7];const x=e==null?void 0:e.conversation_id;let y;t[8]!==g||t[9]!==x?(y=[g,x],t[8]=g,t[9]=x,t[10]=y):y=t[10],En(h,y);let b;t[11]!==a||t[12]!==e?(b=$=>{var Q;if(!$||!e)return;const Y=e.conversation_id,Z=e.survey_election_id;!Y||!Z||l.current!==Z&&(nIe({survey_campaign_name:e.survey_campaign_name,survey_election_id:Z},Y),ii(a,"chatgpt_survey_seen",void 0,{survey_campaign_name:String((Q=e.survey_campaign_name)!=null?Q:""),survey_election_id:Z,conversation_id:Y}),l.current=Z)},t[11]=a,t[12]=e,t[13]=b):b=t[13];const v=b;if(!g||!e)return null;const{conversation_id:S}=e,C=e.content;let k;t[14]!==C.answers?(k=Array.isArray(C==null?void 0:C.answers)?C.answers:[],t[14]=C.answers,t[15]=k):k=t[15];const M=k;let T;t[16]!==a?(T=$=>{var Y,Z,Q,q;tIe({survey_campaign_name:$.campaign_name,survey_election_id:$.election_id,question_id:void 0,question_text:(Y=$.question)!=null?Y:null,answer_id:$.answer_id,answer_text:(Z=$.answer_text)!=null?Z:null,tags:null},$.conversation_id),ii(a,"chatgpt_survey_response",void 0,{survey_campaign_name:$.campaign_name,survey_election_id:$.election_id,conversation_id:$.conversation_id,question_text:(Q=$.question)!=null?Q:"",answer_id:$.answer_id,answer_text:(q=$.answer_text)!=null?q:""})},t[16]=a,t[17]=T):T=t[17];const E=T;let A;t[18]!==a?(A=$=>{var Y,Z;sIe({survey_campaign_name:$.campaign_name,survey_election_id:$.election_id},$.conversation_id),ii(a,"chatgpt_survey_dismissed",void 0,{survey_campaign_name:String((Y=$.campaign_name)!=null?Y:""),survey_election_id:String((Z=$.election_id)!=null?Z:""),conversation_id:$.conversation_id})},t[18]=a,t[19]=A):A=t[19];const N=A,R=e.conversation_id;let O;t[20]!==N||t[21]!==n||t[22]!==e?(O=()=>{e&&N({conversation_id:e.conversation_id,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name}),n()},t[20]=N,t[21]=n,t[22]=e,t[23]=O):O=t[23];let D;t[24]!==C.question?(D=r.jsx("div",{className:"mb-3 pe-8 font-medium break-words",children:C.question}),t[24]=C.question,t[25]=D):D=t[25];let F;if(t[26]!==M||t[27]!==C.question||t[28]!==S||t[29]!==n||t[30]!==E||t[31]!==e.survey_campaign_name||t[32]!==e.survey_election_id){let $;t[34]!==C.question||t[35]!==S||t[36]!==n||t[37]!==E||t[38]!==e.survey_campaign_name||t[39]!==e.survey_election_id?($=Y=>r.jsx("button",{className:"rounded-full border border-gray-300 bg-white px-4 py-2 font-medium whitespace-nowrap text-black hover:bg-gray-100",onClick:()=>{E({conversation_id:S,election_id:e.survey_election_id,campaign_name:e.survey_campaign_name,question:C.question,answer_id:Y.answer_id,answer_text:Y.text}),n()},children:Y.text},Y.answer_id),t[34]=C.question,t[35]=S,t[36]=n,t[37]=E,t[38]=e.survey_campaign_name,t[39]=e.survey_election_id,t[40]=$):$=t[40],F=M.map($),t[26]=M,t[27]=C.question,t[28]=S,t[29]=n,t[30]=E,t[31]=e.survey_campaign_name,t[32]=e.survey_election_id,t[33]=F}else F=t[33];let V;t[41]!==F?(V=r.jsx("div",{className:"flex gap-2",children:F}),t[41]=F,t[42]=V):V=t[42];let z;return t[43]!==v||t[44]!==e.conversation_id||t[45]!==O||t[46]!==D||t[47]!==V?(z=r.jsxs(cIe,{conversationId:R,onClose:O,onVisibilityChange:v,children:[D,V]}),t[43]=v,t[44]=e.conversation_id,t[45]=O,t[46]=D,t[47]=V,t[48]=z):z=t[48],z}function mIe(){return Uh()}const fIe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M11.2475 18.25C10.6975 18.25 10.175 18.1455 9.67999 17.9365C9.18499 17.7275 8.74499 17.436 8.35999 17.062C7.94199 17.205 7.50749 17.2765 7.05649 17.2765C6.31949 17.2765 5.63749 17.095 5.01049 16.732C4.38349 16.369 3.87749 15.874 3.49249 15.247C3.11849 14.62 2.93149 13.9215 2.93149 13.1515C2.93149 12.8325 2.97549 12.486 3.06349 12.112C2.62349 11.705 2.28249 11.2375 2.04049 10.7095C1.79849 10.1705 1.67749 9.6095 1.67749 9.0265C1.67749 8.4325 1.80399 7.8605 2.05699 7.3105C2.30999 6.7605 2.66199 6.2875 3.11299 5.8915C3.57499 5.4845 4.10849 5.204 4.71349 5.05C4.83449 4.423 5.08749 3.862 5.47249 3.367C5.86849 2.861 6.35249 2.465 6.92449 2.179C7.49649 1.893 8.10699 1.75 8.75599 1.75C9.30599 1.75 9.82849 1.8545 10.3235 2.0635C10.8185 2.2725 11.2585 2.564 11.6435 2.938C12.0615 2.795 12.496 2.7235 12.947 2.7235C13.684 2.7235 14.366 2.905 14.993 3.268C15.62 3.631 16.1205 4.126 16.4945 4.753C16.8795 5.38 17.072 6.0785 17.072 6.8485C17.072 7.1675 17.028 7.514 16.94 7.888C17.38 8.295 17.721 8.768 17.963 9.307C18.205 9.835 18.326 10.3905 18.326 10.9735C18.326 11.5675 18.1995 12.1395 17.9465 12.6895C17.6935 13.2395 17.336 13.718 16.874 14.125C16.423 14.521 15.895 14.796 15.29 14.95C15.169 15.577 14.9105 16.138 14.5145 16.633C14.1295 17.139 13.651 17.535 13.079 17.821C12.507 18.107 11.8965 18.25 11.2475 18.25ZM7.17199 16.1875C7.72199 16.1875 8.20049 16.072 8.60749 15.841L11.7095 14.059C11.8195 13.982 11.8745 13.8775 11.8745 13.7455V12.3265L7.88149 14.62C7.63949 14.763 7.39749 14.763 7.15549 14.62L4.03699 12.8215C4.03699 12.8545 4.03149 12.893 4.02049 12.937C4.02049 12.981 4.02049 13.047 4.02049 13.135C4.02049 13.696 4.15249 14.213 4.41649 14.686C4.69149 15.148 5.07099 15.511 5.55499 15.775C6.03899 16.05 6.57799 16.1875 7.17199 16.1875ZM7.33699 13.498C7.40299 13.531 7.46349 13.5475 7.51849 13.5475C7.57349 13.5475 7.62849 13.531 7.68349 13.498L8.92099 12.7885L4.94449 10.4785C4.70249 10.3355 4.58149 10.121 4.58149 9.835V6.2545C4.03149 6.4965 3.59149 6.8705 3.26149 7.3765C2.93149 7.8715 2.76649 8.4215 2.76649 9.0265C2.76649 9.5655 2.90399 10.0825 3.17899 10.5775C3.45399 11.0725 3.81149 11.4465 4.25149 11.6995L7.33699 13.498ZM11.2475 17.161C11.8305 17.161 12.3585 17.029 12.8315 16.765C13.3045 16.501 13.6785 16.138 13.9535 15.676C14.2285 15.214 14.366 14.697 14.366 14.125V10.561C14.366 10.429 14.311 10.33 14.201 10.264L12.947 9.538V14.1415C12.947 14.4275 12.826 14.642 12.584 14.785L9.46549 16.5835C10.0045 16.9685 10.5985 17.161 11.2475 17.161ZM11.8745 11.122V8.878L10.01 7.822L8.12899 8.878V11.122L10.01 12.178L11.8745 11.122ZM7.05649 5.8585C7.05649 5.5725 7.17749 5.358 7.41949 5.215L10.538 3.4165C9.99899 3.0315 9.40499 2.839 8.75599 2.839C8.17299 2.839 7.64499 2.971 7.17199 3.235C6.69899 3.499 6.32499 3.862 6.04999 4.324C5.78599 4.786 5.65399 5.303 5.65399 5.875V9.4225C5.65399 9.5545 5.70899 9.659 5.81899 9.736L7.05649 10.462V5.8585ZM15.4385 13.7455C15.9885 13.5035 16.423 13.1295 16.742 12.6235C17.072 12.1175 17.237 11.5675 17.237 10.9735C17.237 10.4345 17.0995 9.9175 16.8245 9.4225C16.5495 8.9275 16.192 8.5535 15.752 8.3005L12.6665 6.5185C12.6005 6.4745 12.54 6.458 12.485 6.469C12.43 6.469 12.375 6.4855 12.32 6.5185L11.0825 7.2115L15.0755 9.538C15.1965 9.604 15.2845 9.692 15.3395 9.802C15.4055 9.901 15.4385 10.022 15.4385 10.165V13.7455ZM12.122 5.3635C12.364 5.2095 12.606 5.2095 12.848 5.3635L15.983 7.195C15.983 7.118 15.983 7.019 15.983 6.898C15.983 6.37 15.851 5.8695 15.587 5.3965C15.334 4.9125 14.9655 4.5275 14.4815 4.2415C14.0085 3.9555 13.4585 3.8125 12.8315 3.8125C12.2815 3.8125 11.803 3.928 11.396 4.159L8.29399 5.941C8.18399 6.018 8.12899 6.1225 8.12899 6.2545V7.6735L12.122 5.3635Z"})),Qet=Object.freeze(Object.defineProperty({__proto__:null,default:fIe},Symbol.toStringTag,{value:"Module"})),Jet=s=>{var o=s,{className:t,children:e}=o,n=Me(o,["className","children"]);const a=_.useRef(null),i=_.useCallback(()=>{const l=a.current;l&&(sr(l,"data-scrolled-from-top",l.scrollTop>0),sr(l,"data-scrolled-from-end",l.scrollTop<l.scrollHeight-l.clientHeight-1))},[]);return _.useEffect(()=>{const l=a.current;if(!l)return;const c=new ResizeObserver(i);return c.observe(l),()=>c.disconnect()},[i]),_.useEffect(()=>{setTimeout(()=>{i()},500)},[]),r.jsx("nav",B(w({className:W("group/scrollport",t),onScroll:i,ref:a},n),{children:e}))},pIe=j(()=>I(()=>Promise.resolve().then(()=>vC),void 0),{loading:t=>L(t)}),gIe=j(()=>I(()=>import("./bz46otimdhidcz20.js").then(t=>t._),__vite__mapDeps([133,1])),{loading:t=>L(t)}),hIe=j(()=>I(()=>Promise.resolve().then(()=>WMe),void 0).then(t=>t.AdminInviteModal));function _Ie(t){"use forget";const e=H.c(8),{location:n}=t,s=G(),o=_n();let a;e[0]!==s||e[1]!==o||e[2]!==n?(a=()=>{o&&(U.logEvent("Account: Invite Member Button Clicked",{eventSource:"mouse",location:n}),qo(s).logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:n,text:"AddTeammates",step:"OpenModal"}),gt(s,hIe,{workspace:o}))},e[0]=s,e[1]=o,e[2]=n,e[3]=a):a=e[3];const i=a;let l,c;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(gIe,{className:"icon-sm","aria-hidden":"true"}),c=r.jsx(P,{id:"inviteMemberButton.inviteMemberSidebarFooterCap",defaultMessage:"Invite team members"}),e[4]=l,e[5]=c):(l=e[4],c=e[5]);let d;return e[6]!==i?(d={icon:l,label:c,onClick:i},e[6]=i,e[7]=d):d=e[7],d}function xIe(t){"use forget";const e=H.c(7),{location:n}=t,s=at();let o;e[0]!==n||e[1]!==s?(o=()=>{gn(s,n)},e[0]=n,e[1]=s,e[2]=o):o=e[2];const a=o;let i,l;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(pIe,{className:"icon-sm text-[#5856D6] dark:text-[#DCDBF6]","aria-hidden":"true"}),l=r.jsx(P,w({},_t.upgradeYourPlan)),e[3]=i,e[4]=l):(i=e[3],l=e[4]);let c;return e[5]!==a?(c={icon:i,label:l,labelClassName:"text-[#5856D6] dark:text-[#DCDBF6]",onClick:a},e[5]=a,e[6]=c):c=e[6],c}function lU(t,e){"use forget";const n=H.c(4),{location:s}=e;let o;n[0]!==s?(o={location:s},n[0]=s,n[1]=o):o=n[1];const a=_Ie(o);let i;n[2]!==s?(i={location:s},n[2]=s,n[3]=i):i=n[3];const l=xIe(i);return t==="invite"?a:l}const yIe=j(()=>I(()=>import("./dkkqsrmgpmz14chv.js").then(t=>t._),__vite__mapDeps([405,1])),{loading:t=>L(t)});function Xet(t){"use forget";const e=H.c(18),{variant:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={location:"sidebar footer cap above user menu"},e[0]=s):s=e[0];const{icon:o,label:a,onClick:i}=lU(n,s);let l,c;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=W("sm:bg-primary relative rounded-t-2xl bg-white/80 sm:bg-transparent","sm:backdrop-blur-0 backdrop-blur-sm","group-data-scrolled-from-end/scrollport:shadow-[0_-20px_40px_rgba(0,0,0,0.04)]","sm:group-data-scrolled-from-end/scrollport:shadow-[0_-20px_40px_rgba(0,0,0,0.08)]","motion-safe:transition-shadow motion-safe:duration-150 motion-safe:ease-out"),c=r.jsx("div",{className:"l-0 r-0 bg-token-bg-elevated-secondary pointer-events-none absolute top-[-175px] z-0 hidden h-[200px] w-full [mask-image:linear-gradient(180deg,transparent_33.62%,black_100%)] opacity-0 [-webkit-mask-image:linear-gradient(180deg,transparent_33.62%,black_100%)] group-data-scrolled-from-end/scrollport:opacity-100 motion-safe:transition-opacity motion-safe:duration-150 motion-safe:ease-out sm:block"}),e[1]=l,e[2]=c):(l=e[1],c=e[2]);let d;e[3]!==i?(d=x=>{(x.key==="Enter"||x.key===" ")&&i()},e[3]=i,e[4]=d):d=e[4];let u;e[5]===Symbol.for("react.memo_cache_sentinel")?(u=W("group sm:bg-token-main-surface-primary text-token-text-primary hover:bg-token-main-surface-secondary relative z-10 flex w-full items-center justify-between rounded-t-2xl","py-3 ps-4 pe-4 text-xs","border-token-border-default border border-[.5px] p-2","focus-visible:ring-token-text-tertiary focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150"),e[5]=u):u=e[5];let m;e[6]!==o?(m=r.jsx("span",{children:o}),e[6]=o,e[7]=m):m=e[7];let f;e[8]!==a?(f=r.jsx("span",{children:a}),e[8]=a,e[9]=f):f=e[9];let p;e[10]!==m||e[11]!==f?(p=r.jsxs("span",{className:"flex items-center gap-3",children:[m,f]}),e[10]=m,e[11]=f,e[12]=p):p=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(yIe,{className:"icon-xs text-token-text-primary","aria-hidden":"true"}),e[13]=g):g=e[13];let h;return e[14]!==i||e[15]!==d||e[16]!==p?(h=r.jsxs("div",{className:l,children:[c,r.jsxs("div",{role:"button",tabIndex:0,onClick:i,onKeyDown:d,className:u,children:[p,g]})]}),e[14]=i,e[15]=d,e[16]=p,e[17]=h):h=e[17],h}function ett(t){"use forget";const e=H.c(12),{variant:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={location:"sidebar, below user menu"},e[0]=s):s=e[0];const{icon:o,label:a,onClick:i,labelClassName:l}=lU(n,s);let c;e[1]!==i?(c=f=>{(f.key==="Enter"||f.key===" ")&&i()},e[1]=i,e[2]=c):c=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=W("border-token-interactive-border-secondary-default flex w-full items-center justify-center gap-1","bg-token-main-surface-primary rounded-full border px-3 py-2","text-xs font-medium","hover:bg-token-interactive-bg-secondary-hover","focus-visible:ring-2 focus-visible:ring-[#5856D6] focus-visible:ring-offset-1 focus-visible:ring-offset-transparent focus-visible:outline-hidden","motion-safe:transition-colors motion-safe:duration-150 motion-safe:ease-out"),e[3]=d):d=e[3];let u;e[4]!==a||e[5]!==l?(u=r.jsx("span",{className:l,children:a}),e[4]=a,e[5]=l,e[6]=u):u=e[6];let m;return e[7]!==o||e[8]!==i||e[9]!==c||e[10]!==u?(m=r.jsx("div",{className:"px-3.5 pt-1 pb-3",children:r.jsxs("button",{type:"button",onClick:i,onKeyDown:c,className:d,children:[o,u]})}),e[7]=o,e[8]=i,e[9]=c,e[10]=u,e[11]=m):m=e[11],m}const vIe=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),bIe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),SIe=()=>lt({queryKey:["userSurvey"],queryFn:()=>pe.safeGet("/user_surveys/active")}),CIe=()=>{const t=xt();return Bt({mutationFn:({surveyId:e,reason:n})=>pe.safePost("/user_surveys/{survey_id}/complete",{parameters:{path:{survey_id:e}},requestBody:{reason:n}}),onSuccess:()=>{t.invalidateQueries({queryKey:["userSurvey"]})}})};function ttt(){const t=J(),[e,n]=_.useState(!1),{mutate:s}=CIe(),{data:o}=SIe(),a=o==null?void 0:o.survey,i=c=>{n(!0),a!=null&&s({surveyId:a.id,reason:c})};return!e&&a!=null?r.jsx("div",{className:"bg-brand-blue-800 mx-1.5 rounded-lg",children:r.jsxs("div",{className:"flex flex-col gap-3 p-3 text-sm text-white",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"font-bold text-wrap",children:r.jsx(P,{id:"navigation.survey.title",defaultMessage:"We are asking a small group of people for their opinion"})}),r.jsx("button",{className:"text-white/25 hover:text-white/40",onClick:()=>i("dismissed"),"aria-label":t.formatMessage({id:"navigation.survey.dismiss",defaultMessage:"Dismiss survey"}),children:r.jsx(bIe,{className:"icon"})})]}),r.jsx("div",{className:"text-wrap",children:r.jsx(P,{id:"navigation.survey.description",defaultMessage:"Could you spare few minutes to take a short survey?"})}),r.jsxs("a",{href:a.link,target:"_blank",className:"flex w-full cursor-pointer items-center justify-center gap-2 rounded-sm bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:()=>i("link_clicked"),children:[r.jsx(vIe,{className:"icon-sm"}),r.jsx(P,{id:"navigation.survey.takeSurvey",defaultMessage:"Take survey"})]})]})}):null}const wIe="/assets/team-upsell-landscape-ee106ppw.webp",kIe={src:wIe};function ntt(){const t=G(),e=!pt(t),n=Co(t,"2210309751").get("variant","control"),s=Io(),[o]=ja(Le.HasDismissedTeamsNoAuthUpsell,!1,Kh),a=!s&&e&&n==="front-door"&&!o;xe(t,"676035580");const[i,l]=_.useState(()=>mt.getItem(Le.HasDismissedTeamsNoAuthUpsell)!==!0),c=at(),d=F9(),u=()=>{l(!1),mt.setItem(Le.HasDismissedTeamsNoAuthUpsell,!0)},m=()=>{u(),c({hash:Om,search:window.location.search},{state:{[$h]:"Teams no-auth upsell announcement"}})};return!a||!i?null:r.jsx(Sl,{open:i,modal:!1,children:r.jsx(Cl,{container:d==null?void 0:d.document.body,children:r.jsxs("div",{className:"bg-token-bg-primary popover border-token-border-default bg-primary fixed end-4 bottom-4 z-100 flex w-full max-w-sm flex-col gap-3 overflow-hidden rounded-2xl border shadow-xl",children:[r.jsx("img",{className:"h-[147px] object-cover",src:kIe.src,alt:""}),r.jsxs("div",{className:"flex flex-col px-6 py-5",children:[r.jsx("p",{className:"text-token-text-primary mb-1 text-lg font-medium text-pretty",children:r.jsx(P,w({},ip.teamsNoAuthUpsellTitle))}),r.jsx("p",{className:"text-token-text-secondary text-sm text-pretty",children:r.jsx(P,w({},ip.teamsNoAuthUpsellDescription))}),r.jsxs("div",{className:"mt-5 flex flex-row justify-start space-x-2",children:[r.jsx(he,{as:"button",color:"primary",onClick:m,children:r.jsx(P,w({},ip.getTeam))}),!1,r.jsx(he,{as:"button",color:"secondary",onClick:u,children:r.jsx(P,w({},ip.notNow))})]})]})]})})})}const ip=be({teamsNoAuthUpsellTitle:{id:"TeamsNoAuthUpsell.title",defaultMessage:"A shared space for teams"},teamsNoAuthUpsellDescription:{id:"TeamsNoAuthUpsell.description",defaultMessage:"Supercharge your team's work with a shared workspace, admin controls, and connectors to your company tools."},getTeam:{id:"TeamsNoAuthUpsell.getTeam",defaultMessage:"Get Business"},notNow:{id:"TeamsNoAuthUpsell.notNow",defaultMessage:"Not now"}});function MIe(t,e){return"/checkout/".concat(t,"/").concat(e)}class TIe{static async getCheckoutLink(e,n){return pe.safePost("/payments/checkout",{requestBody:e,additionalHeaders:L2(null,null,null,n!=null&&n.skipSentinelCheckout?void 0:await tj("chatgpt_checkout",{sdkVariant:n!=null&&n.fromiOSWebview?"openai":"chatgpt"}).catch(s=>{Oe.addError(s)}))})}static async fetchExistingCheckoutSession(e,n){return await pe.safeGet("/payments/checkout/{processor_entity}/{checkout_session_id}",{parameters:{path:{processor_entity:e,checkout_session_id:n}}})}}const EIe="3950229590",AIe="enabled_custom_checkout_for_plus",IIe="enabled_custom_checkout_for_go",jIe="enabled_custom_checkout_for_pro",PIe="enabled_custom_checkout_for_team",NIe="enabled_custom_checkout_for_quorum",RIe="is_checkout_redesign",LIe="enable_flush_statsig_on_checkout",OIe="checkoutRedesignExposureLogged",V4="chatgpt_web_checkout_navigate_to_checkout",DIe="chatgpt_web_checkout_prepare_checkout_session";function oC(t,{shouldLogExposure:e=!0}={}){return Ve(t,EIe,{disableExposureLog:!e})}function FIe({ctx:t,shouldLogExposure:e=!0}){return oC(t,{shouldLogExposure:e}).get(RIe,!1)}function BIe(t){switch(t){case Zd.PLUS:return AIe;case Zd.GO:return IIe;case Zd.PRO:return jIe;case Zd.SELF_SERVE_BUSINESS:return PIe;case Zd.QUORUM:return NIe;default:return null}}function UIe(t,e){const n=BIe(e);return n==null?"redirect":oC(t).get(n,!1)?"custom":"redirect"}function stt(){const t=at(),e=G();async function n(a=1e3){const i=qo(e);await Promise.race([i.flush(),new Promise(l=>setTimeout(l,a))])}async function s(a,i){var l;return a.checkout_ui_mode=(l=a.checkout_ui_mode)!=null?l:(i==null?void 0:i.fromiOSWebview)===!0?"redirect":UIe(e,a.plan_name),ii(e,{eventName:DIe,metadata:{ui_mode:a.checkout_ui_mode}}),await TIe.getCheckoutLink(a,{skipSentinelCheckout:i==null?void 0:i.skipSentinelCheckout,fromiOSWebview:i==null?void 0:i.fromiOSWebview})}async function o(a){const i=oC(e).get(LIe,!1);if("tag"in a)switch(ii(e,{eventName:V4,metadata:{tag:a.tag}}),i&&await n(),a.tag){case"hosted_checkout_session":case"redirect_to_portal":{window.location.href=a.url;break}case"custom_checkout_session":{const l=a.processor_entity,c=a.checkout_session_id;await t({pathname:MIe(l,c),search:"",hash:""},{state:{[OIe]:!0}});break}}else if(a.url)ii(e,{eventName:V4,metadata:{tag:"missing_tag"}}),i&&await n(),window.location.href=a.url;else throw new Error("Received invalid response from /checkout")}return{prepareCheckoutSession:s,navigateToCheckout:o}}const VIe=({onDismiss:t})=>{const e=J();_.useEffect(()=>{We.logEvent("chatgpt_web_mobile_app_upsell_banner_shown"),U.logEvent("Mobile App Upsell Banner Shown")},[]);const n=()=>{localStorage.setItem(Le.HasDismissedMobileAppUpsellBanner,"true"),t==null||t(),We.logEvent("chatgpt_web_mobile_app_upsell_banner_dismissed"),U.logEvent("Mobile App Upsell Banner Dismissed")},s=()=>{window.open("https://apps.apple.com/us/app/chatgpt/id6448311069","_blank"),We.logEvent("chatgpt_web_mobile_app_upsell_banner_clicked"),U.logEvent("Mobile App Upsell Banner Clicked")};return r.jsx(OR,{title:e.formatMessage({id:"mobileTopBanner.title",defaultMessage:"ChatGPT"}),content:e.formatMessage({id:"mobileTopBanner.content",defaultMessage:"The official app by OpenAI"}),secondaryCtaText:e.formatMessage({id:"mobileTopBanner.secondaryCtaText",defaultMessage:"Open"}),onDismiss:n,onSecondaryCtaClick:s})};function GIe(t){const e=encodeURIComponent(t);return"https://wa.me/18002428478?text=".concat(e)}function $Ie({onDismiss:t}){const e=J(),n=e.formatMessage({id:"moodengUpsellBanner.prefilledMessage",defaultMessage:"Hey ChatGPT, can you tell me a little bit more about what you can do?"}),s=()=>{U.logEventWithStatsig("Moodeng Upsell Banner Clicked","chatgpt_web_moodeng_upsell_banner_clicked"),window.open(GIe(n),"_blank")},o=()=>{localStorage.setItem(Le.HasDismissedMoodengUpsellBanner,"true"),t==null||t(),U.logEventWithStatsig("Moodeng Upsell Banner Dismissed","chatgpt_web_moodeng_upsell_banner_dismissed")};return _.useEffect(()=>{U.logEventWithStatsig("Moodeng Upsell Banner Shown","chatgpt_web_moodeng_upsell_banner_shown")},[]),r.jsx(OR,{title:e.formatMessage({id:"moodengUpsellBanner.title",defaultMessage:"Chat on WhatsApp"}),content:e.formatMessage({id:"moodengUpsellBanner.content",defaultMessage:"Supported by OpenAI"}),secondaryCtaText:e.formatMessage({id:"moodengUpsellBanner.secondaryCtaText",defaultMessage:"Try Now"}),onSecondaryCtaClick:s,onDismiss:o})}function ott(){var h;const t=G(),e=ls(),n=Io(),s=Zz(),[o,a]=_.useState(()=>localStorage.getItem(Le.HasDismissedMobileAppUpsellBanner)==="true"),[i,l]=_.useState(()=>localStorage.getItem(Le.HasDismissedMoodengUpsellBanner)==="true"),c=Ve(t,"3927927759"),d=e.pathname.split("/").filter(Boolean),u=d.length===3&&d[0]==="checkout",m=_.useMemo(()=>!u||!FIe({ctx:t,shouldLogExposure:!1})?!1:Ve(t,"3950229590").get("suppress_native_download_banner",!1),[t,u]),p=_.useMemo(()=>[{Component:()=>r.jsx(VIe,{onDismiss:()=>{a(!0)}}),isVisible:()=>n&&s&&!o&&!m&&c.get("enable_mobile_app_upsell_banner",!1)},{Component:()=>r.jsx($Ie,{onDismiss:()=>{l(!0)}}),isVisible:()=>n&&!i&&c.get("enable_moodeng_upsell_banner",!1)}],[n,s,o,i,m,c]).find(x=>x.isVisible()),g=(h=p==null?void 0:p.Component)!=null?h:(()=>null);return r.jsx(g,{})}const HIe=1;function WIe(t){return t?new Date>n2(t,HIe):!0}function zIe(){const[t,e]=ja(Le.SubscriptionFailedBanner,null,a=>typeof a=="number"),n=t!=null?wi(t):null;return{canBeSeen:WIe(n),markSeen:()=>{e(Ca(new Date))}}}var yx,G4;function qIe(){if(G4)return yx;G4=1;var t=NR();function e(n,s,o){var a=n.length;return o=o===void 0?a:o,!s&&o>=a?n:t(n,s,o)}return yx=e,yx}var vx,$4;function cU(){if($4)return vx;$4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,a="\\ufe0e\\ufe0f",i="\\u200d",l=RegExp("["+i+t+o+a+"]");function c(d){return l.test(d)}return vx=c,vx}var bx,H4;function YIe(){if(H4)return bx;H4=1;function t(e){return e.split("")}return bx=t,bx}var Sx,W4;function ZIe(){if(W4)return Sx;W4=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",s="\\u20d0-\\u20ff",o=e+n+s,a="\\ufe0e\\ufe0f",i="["+t+"]",l="["+o+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=d+"?",h="["+a+"]?",x="(?:"+p+"(?:"+[u,m,f].join("|")+")"+h+g+")*",y=h+g+x,b="(?:"+[u+l+"?",l,m,f,i].join("|")+")",v=RegExp(c+"(?="+c+")|"+b+y,"g");function S(C){return C.match(v)||[]}return Sx=S,Sx}var Cx,z4;function KIe(){if(z4)return Cx;z4=1;var t=YIe(),e=cU(),n=ZIe();function s(o){return e(o)?n(o):t(o)}return Cx=s,Cx}var wx,q4;function QIe(){if(q4)return wx;q4=1;var t=qIe(),e=cU(),n=KIe(),s=B9();function o(a){return function(i){i=s(i);var l=e(i)?n(i):void 0,c=l?l[0]:i.charAt(0),d=l?t(l,1).join(""):i.slice(1);return c[a]()+d}}return wx=o,wx}var kx,Y4;function JIe(){if(Y4)return kx;Y4=1;var t=QIe(),e=t("toUpperCase");return kx=e,kx}var Mx,Z4;function XIe(){if(Z4)return Mx;Z4=1;var t=B9(),e=JIe();function n(s){return e(t(s).toLowerCase())}return Mx=n,Mx}var eje=XIe();const Rp=Wn(eje),tje=j(()=>I(()=>import("./gr73ffwzttzymtep.js").then(t=>t._),__vite__mapDeps([406,1])),{loading:t=>L(t)}),nje=({message:t,buttonText:e,buttonAction:n,iconAriaLabel:s,isDismissible:o,onDismiss:a})=>r.jsx("div",{className:"pointer-events-none fixed inset-x-4 top-2 z-50 flex justify-center",children:r.jsx(mn,{className:"pointer-events-auto bg-yellow-300 text-[16px] text-black",icon:r.jsx(tje,{className:"icon-lg mt-1.5","aria-label":s}),content:t,customCtas:e?r.jsx("button",{onClick:n,className:"font-medium text-black underline dark:text-white",type:"button",children:e}):void 0,onDismiss:o?a:void 0})}),sje=j(()=>I(()=>import("./gr73ffwzttzymtep.js").then(t=>t._),__vite__mapDeps([406,1])),{loading:t=>L(t)}),oje=({title:t,message:e,buttonText:n,buttonAction:s,iconAriaLabel:o,isDismissible:a,onDismiss:i})=>r.jsxs("div",{className:"border-main-surface-secondary flex h-auto min-h-16 items-center justify-between bg-yellow-300 p-3 text-black dark:border-transparent",ref:l=>{const c=Ul({axis:"height",target:l,onChange({height:d}){document.documentElement.style.setProperty("--top-banner-height","".concat(d,"px"))}});return()=>{c==null||c(),document.documentElement.style.removeProperty("--top-banner-height")}},children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"px-2",children:r.jsx(sje,{className:"icon-lg","aria-label":o})}),r.jsx("div",{className:"px-2",children:r.jsxs("div",{children:[t&&r.jsx("div",{className:"text-sm font-bold",children:t}),r.jsx("div",{className:W(t?"text-sm":""),children:e})]})})]}),r.jsxs("div",{className:"flex flex-none items-center gap-2 pe-4",children:[n&&r.jsx(he,{onClick:s,color:"primary",className:"dark:bg-gray-950 dark:text-white",children:n}),a&&r.jsx(fn,{onClick:i,className:"hover:bg-black/10! dark:hover:bg-white/10!"})]})]}),aje=7,Zs=be({userTitle:{id:"SubscriptionRenewalFailedBanner.userTitle",defaultMessage:"Your workspace will be deactivated on {date}"},ownerTile:{id:"SubscriptionRenewalFailedBanner.ownerTitle",defaultMessage:"Unable to charge payment method for your Team subscription"},userMessage:{id:"SubscriptionRenewalFailedBanner.userMessage",defaultMessage:"Please contact your workspace admin to retain access to your account"},ownerMessage:{id:"SubscriptionRenewalFailedBanner.ownerMessage",defaultMessage:"We'll keep trying this method, or you can update it now. To continue accessing your workspace, please take action by {date}"},ownerButtonText:{id:"SubscriptionRenewalFailedBanner.ownerButtonText",defaultMessage:"Update"},iconAriaLabel:{id:"SubscriptionRenewalFailedBanner.iconAriaLabel",defaultMessage:"Warning"},personalTitle:{id:"SubscriptionRenewalFailedBanner.personalTitle",defaultMessage:"Unable to charge payment method for your {subscription} subscription"},personalDescriptionNoDate:{id:"SubscriptionRenewalFailedBanner.personalDescription",defaultMessage:"We're keeping your access active for now. To continue using {subscription}, please update your payment details."},personalDescriptionWithDate:{id:"SubscriptionRenewalFailedBanner.personalDescriptionWithDate",defaultMessage:"We're keeping your access active for now. To continue using {subscription}, please update your payment details by {date}."},personalMessageMobileNoDate:{id:"SubscriptionRenewalFailedBanner.personalMessageMobile",defaultMessage:"Subscription charge failed. Please update your payment method."},personalMessageMobileWithDate:{id:"SubscriptionRenewalFailedBanner.personalMessageMobileWithDate",defaultMessage:"Subscription charge failed. Please update your payment method by {date}."}});function rje(t){t?document.documentElement.classList.add("top-banner-visible"):document.documentElement.classList.remove("top-banner-visible")}const att=t=>{"use forget";const e=H.c(2),n=G(),s=ut(n),o=Vb();if(!(s!=null&&s.hasPaidSubscription())||o.authStatus!==Vo.LoggedIn)return null;let a;return e[0]!==t?(a=r.jsx(ije,w({},t)),e[0]=t,e[1]=a):a=e[1],a},ije=({setIsVisible:t})=>{"use no forget";const e=J(),n=at(),[s,o]=_.useState(!1),[a,i]=_.useState(!1),{data:l}=oF(),{canBeSeen:c,markSeen:d}=zIe(),u=_n(),m=u==null?void 0:u.isStandardUserOfAccount(),f=bi(),p=l!=null&&l.plan_type===Je.SELF_SERVE_BUSINESS,g=G(),h=l?lje({ctx:g,planType:l.plan_type}):null,x=l!=null&&l.became_delinquent_timestamp?new Date(l.became_delinquent_timestamp):null,y=x!=null&&new Date>n2(x,p&&m?3:2),b=l!=null&&l.grace_period_end_timestamp!=null&&new Date(l.grace_period_end_timestamp)>new Date,v=l!=null&&!!l.is_delinquent&&b&&l.will_renew&&y,S=v&&p,C=!!(v&&c&&h&&h.get("include_banner_notifications",!1)),k=C&&l!=null&&l.grace_period_end_timestamp!=null&&Kz(new Date(l.grace_period_end_timestamp),aje)<new Date,M=!!(C&&h&&h.get("is_banner_notification_dismissible",!1)),T=xe(g,"2293185713"),E=!f&&l!=null&&(S||C||T),A=Io(),N=E&&(!A||M)&&!a,R=N&&!A,O=N&&A;E&&!N&&U.logEvent("Subscription Renewal Failed Banner Hidden On Mobile"),_.useEffect(()=>{N&&(p?m?U.logEventWithStatsig("Subscription Renewal Failed Banner Shown to User","chatgpt_web_subscription_renewal_failed_banner_shown_to_user"):U.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Owner","chatgpt_web_subscription_renewal_failed_banner_shown_to_owner"):U.logEventWithStatsig("Subscription Renewal Failed Banner Shown to Personal User","chatgpt_web_subscription_renewal_failed_banner_shown_to_personal_user")),t==null||t(N)},[N,m,t,p]);const D=async()=>{o(!0);let X;try{X=(await pe.safeGet("/payments/customer_portal",{parameters:{query:{account_id:u==null?void 0:u.getWorkspaceId()}},intercomEventOnError:"fetch-error:customer_portal:get"})).url}catch(oe){X=window.location.origin+"/admin/billing"}finally{o(!1)}U.logEventWithStatsig("Subscription Renewal Failed Banner Owner Clicked","chatgpt_web_subscription_renewal_failed_banner_owner_clicked"),location.href=X},F=()=>{D().catch(()=>{})},V=()=>{U.logEventWithStatsig("Subscription Renewal Failed Banner Personal Manage Subscription CTA Clicked","chatgpt_web_subscription_renewal_failed_banner_personal_cta_clicked"),n("/account/manage")},z=l!=null&&l.grace_period_end_timestamp!=null?QF(e,new Date(l.grace_period_end_timestamp)):null;let $="",Y="",Z="",Q;p?m?($=e.formatMessage(Zs.userTitle,{date:z}),Y=e.formatMessage(Zs.userMessage)):($=e.formatMessage(Zs.ownerTile),Y=e.formatMessage(Zs.ownerMessage,{date:z}),Z=e.formatMessage(Zs.ownerButtonText),Q=F):($=e.formatMessage(Zs.personalTitle,{subscription:Rp(l==null?void 0:l.plan_type)}),Z=e.formatMessage(Zs.ownerButtonText),Q=V,A?k?Y=e.formatMessage(Zs.personalMessageMobileWithDate,{date:z}):Y=e.formatMessage(Zs.personalMessageMobileNoDate):k?Y=e.formatMessage(Zs.personalDescriptionWithDate,{subscription:Rp(l==null?void 0:l.plan_type),date:z}):Y=e.formatMessage(Zs.personalDescriptionNoDate,{subscription:Rp(l==null?void 0:l.plan_type)})),rje(R);const q=()=>{U.logEventWithStatsig("Subscription Renewal Failed Banner Personal Dismissed","chatgpt_web_subscription_renewal_failed_banner_personal_dismissed"),d(),i(!0)};return N?O?r.jsx(nje,{message:Y,buttonText:Z,buttonAction:Q,iconAriaLabel:e.formatMessage(Zs.iconAriaLabel),isDismissible:M,onDismiss:q}):r.jsx(oje,{title:$,message:Y,buttonText:Z,buttonAction:Q,iconAriaLabel:e.formatMessage(Zs.iconAriaLabel),isDismissible:M,onDismiss:q}):null};function lje({ctx:t,planType:e}){switch(e){case Je.PLUS:return Ve(t,"3850010910");case Je.GO:return Ve(t,"1445695849");case Je.PRO:return Ve(t,"2420067952");default:return null}}const cje="_leadingBar_sbmq2_1",dje="_leadingBarScrollAnimation_sbmq2_19",uje="_trailingBar_sbmq2_23",mje="_trailingBarScrollAnimation_sbmq2_41",fje="_primary_sbmq2_45",du={leadingBar:cje,leadingBarScrollAnimation:dje,trailingBar:uje,trailingBarScrollAnimation:mje,primary:fje};function pje({disabled:t=!1,track:e}={}){const[n,s]=_.useState(null),o=_.useRef(null),a=_.useRef(null),i=_.useCallback(l=>{if(a.current&&(a.current.disconnect(),a.current=null),o.current=l,t||!l)return;const c=new ResizeObserver(d=>{if(!d.length)return;const u=d[0],{width:m,height:f}=gje(u);_.startTransition(()=>{s(p=>{const g={width:m,height:f};return!p||e==="width"&&p.width!==m||e==="height"&&p.height!==f||p.width!==m||p.height!==f?g:p})})});c.observe(l),a.current=c},[t,e]);return[n,i]}function gje(t){let e,n;if(t.borderBoxSize){const s=Array.isArray(t.borderBoxSize)?t.borderBoxSize[0]:t.borderBoxSize;e=s.inlineSize,n=s.blockSize}else e=t.contentRect.width,n=t.contentRect.height;return{width:e,height:n}}function Lp({disableSizeTracking:t,name:e,track:n}){const[s,o]=pje({disabled:n===void 0||t,track:n});let a={};return e&&!t&&n&&s&&(a={["--".concat(e,"-").concat(n)]:"".concat(s[n==="width"?"width":"height"],"px")}),[a,o,s]}function hje(t){var g;const p=t,{axis:e="horizontal",children:n,className:s,hidden:o,leading:a,trailing:i,ref:l,style:c,type:d}=p,u=Me(p,["axis","children","className","hidden","leading","trailing","ref","style","type"]),[m,f]=Lp(u);return r.jsx("div",{"bar-type":d,hidden:o,"data-testid":"bar-".concat((g=u.name)!=null?g:"default"),className:W("gap-bar grid",e==="vertical"&&"flex-col",a&&[du.leadingBar,du.leadingBarScrollAnimation],i&&[du.trailingBar,du.trailingBarScrollAnimation],d==="primary"&&du.primary,s),ref:l!=null?l:f,style:w(w({},c),m),children:n})}const _je="_screen_c7xqp_1",xje={screen:_je};function yje(t){const k=t,{anchor:e,children:n,className:s,contentClassName:o,leading:a,leadingClassName:i,primaryScrollContainer:l,ref:c,style:d,trailing:u,trackLeading:m,trackTrailing:f}=k,p=Me(k,["anchor","children","className","contentClassName","leading","leadingClassName","primaryScrollContainer","ref","style","trailing","trackLeading","trackTrailing"]),{name:g}=p,[h,x]=Lp(p),[y,b]=Lp({disableSizeTracking:!m,name:"".concat(g,"-leading"),track:"height"}),[v,S]=Lp({disableSizeTracking:!f,name:"".concat(g,"-trailing"),track:"height"}),C=g!=null?g:"default";return r.jsxs("section",{className:W(xje.screen,"h-[var(--screen-height-override,calc(var(--cqh-full)-var(--screen-height-offset,0px)))]","keyboard-open:h-[var(--screen-height-override,calc(var(--cqh-full)-env(keyboard-inset-height,0px)-var(--screen-height-offset,0px)-var(--force-redraw,0px)))]",s),"data-testid":"screen-".concat(C),"data-primary-scroller":l,"screen-anchor":e,ref:e3(x,c),style:B(w(w(w(w({},d),h),y),v),{container:g?"".concat(g," / inline-size"):void 0,minWidth:"min(var(--screen-".concat(C,"_min-width), 100cqw)")}),children:[r.jsx("div",{slot:"leading",ref:b,className:i,children:a}),r.jsx("div",{slot:"content",className:o,children:n}),r.jsx("div",{slot:"trailing",ref:M=>{S(M)},children:u})]})}const vje=j(()=>I(()=>import("./od3rnm4927scb9m9.js").then(t=>t._),__vite__mapDeps([407,1])),{loading:t=>L(t)});var d6;const bje=ct.button(d6||(d6=rt(["cursor-pointer absolute z-30 rounded-full bg-clip-padding border text-token-text-secondary border-token-border-default end-1/2 translate-x-1/2 bg-token-main-surface-primary w-8 h-8 flex items-center justify-center"])));function Sje({show:t,onClick:e,className:n}){return r.jsx(dn,{children:t&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},children:r.jsx(bje,{className:n,onClick:e,children:r.jsx(vje,{className:"icon text-token-text-primary"})})})})}function Cje(d){var u=d,{ariaLabel:t,leadingFullBleed:e,trailing:n,handleClose:s,showScrollToBottomButton:o=!1,children:a,onScroll:i,restoreScrollTop:l}=u,c=Me(u,["ariaLabel","leadingFullBleed","trailing","handleClose","showScrollToBottomButton","children","onScroll","restoreScrollTop"]);const m=G(),f=cs(m),p=_.useRef(null),[g,h]=_.useState(!0);return _.useEffect(()=>{const x=p.current;if(!x||typeof i!="function")return;function y(){x&&i&&i(x.scrollTop)}return x.addEventListener("scroll",y,{passive:!0}),()=>{x.removeEventListener("scroll",y)}},[i]),_.useEffect(()=>{const x=p.current;!x||l==null||requestAnimationFrame(()=>{x.scrollTop=l})},[l]),r.jsxs(r.Fragment,{children:[r.jsxs(yje,{ref:p,anchor:"top",className:W("relative flex-1",f?"border-s-thin border-(--bento-border-color)":"border-s-token-border-sharp dark:border-token-main-surface-secondary border-s"),name:"threadFlyOut",ariaLabel:t,primaryScrollContainer:!0,trackLeading:!0,trailing:n,contentClassName:"bg-token-bg-primary",leading:(()=>{if("renderLeading"in c)return c.renderLeading({handleClose:s});const{leading:x}=c;return r.jsx(hje,{name:"search-sources-header",type:"primary",className:W("flex items-center ".concat(x?"":"justify-end p-1.5"," bg-transparent!"),e&&"pointer-events-none",f?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:x?r.jsxs("div",{className:W("flex items-center justify-between px-4 py-3",f?"h-[var(--header-height,3.5rem)] border-(--bento-border-color)":"border-token-border-sharp h-[calc(var(--header-height,3.5rem)+1px)]",e?"pointer-events-none bg-transparent":f?"bg-token-main-surface-primary border-b-thin border-(--bento-border-color)":"bg-token-main-surface-primary border-b"),children:[x,r.jsx(fn,{className:W("bg-token-main-surface-primary pointer-events-auto -me-2.5",e&&"opacity-80"),bg:e?"primary":"transparent",onClick:s})]}):r.jsx(fn,{className:"bg-token-main-surface-primary! hover:bg-token-main-surface-secondary! me-3 p-1",onClick:s})})})(),leadingClassName:e?"pointer-events-none":void 0,children:[a,o&&r.jsx(Qz,{setIsScrolledToEdge:x=>{h(!x)},options:{rootMargin:"0px 0px 80px 0px"}})]}),o&&r.jsx(Sje,{show:!g,className:"bottom-8",onClick:()=>{var x,y;(y=p==null?void 0:p.current)==null||y.scrollTo({top:(x=p==null?void 0:p.current)==null?void 0:x.scrollHeight,behavior:"smooth"})}})]})}const wje=j(()=>I(()=>import("./bfbugzzlr3yhrunk.js"),__vite__mapDeps([408,1,29,30,409,410,64,65,66,67,68,69,62,55,58,53,51,52,54,56,70,71,72])).then(t=>t.ChatScreenProductFlyout),{loading:Oa}),kje=j(()=>I(()=>import("./ntllkljs03gtr0eq.js"),__vite__mapDeps([411,1,29,30,410,64,65,66,67,68,69,62,55,58,53,51,52,54,56,70,71,72,74,412,413,414,365,339,116])).then(t=>t.ChatScreenEntityFlyout),{loading:Oa}),Mje=j(()=>I(()=>import("./msa4w63vhygpe5iv.js"),__vite__mapDeps([415,1,416,29,30,417,418])).then(t=>t.ChatScreenSearchSourcesFlyout),{loading:Oa}),Tje=j(()=>I(()=>import("./hdvkrxbvy7kwpghs.js"),__vite__mapDeps([419,1,420,29,30,66,421,416,417,418])).then(t=>t.ChatScreenRetrievalResultsFlyout),{loading:Oa}),Eje=j(()=>I(()=>import("./blz4q0fq9ltf2r30.js"),__vite__mapDeps([422,1,29,30])).then(t=>t.ChatScreenSummarizerFlyout),{loading:Oa}),Aje=j(()=>I(()=>import("./h2fsh6u947t1mvet.js").then(t=>t.c),__vite__mapDeps([423,1,29,30,424,421,117,425,426,67,427,416,417,418])).then(t=>t.ChatScreenCoTFlyout),{loading:Oa}),Ije=j(()=>I(()=>import("./mefat3kp0bny0xvn.js"),__vite__mapDeps([428,1,423,29,30,424,421,117,425,426,67,427,416,417,418])).then(t=>t.CaterpillarSidebar),{loading:Oa}),jje=j(()=>I(()=>import("./lcprnl5smvp60nx3.js"),__vite__mapDeps([429,1,416,29,30,417,418])).then(t=>t.AgentSourcesSidebar),{loading:Oa}),Pje=j(()=>I(()=>import("./jck4acc8t15jgzfz.js"),__vite__mapDeps([430,1,29,30])).then(t=>t.AgentTabsSidebar),{loading:Oa});j(()=>I(()=>import("./fsehb5gxjzapxyup.js"),__vite__mapDeps([431,1,29,30,117])).then(t=>t.CodingCitationsSidebar),{loading:Oa});function Oa(){"use forget";const t=H.c(5),e=Xo();let n;t[0]!==e?(n=()=>e&&M1(e),t[0]=e,t[1]=n):n=t[1];let s;t[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(r.Fragment,{}),t[2]=s):s=t[2];let o;return t[3]!==n?(o=r.jsx(Cje,{ariaLabel:"",handleClose:n,children:s}),t[3]=n,t[4]=o):o=t[4],o}function rtt(t){"use forget";const e=H.c(11),{isExpanded:n,children:s}=t,[o,a]=_.useState("400px");let i;e[0]!==s?(i=Kn.isValidElement(s)?Kn.cloneElement(s,{setWidth:a}):s,e[0]=s,e[1]=i):i=e[1];const l=i;let c;e[2]!==l?(c=Kn.Children.toArray(l).some(Boolean),e[2]=l,e[3]=c):c=e[3];const d=c;let u;e[4]!==l||e[5]!==d||e[6]!==n||e[7]!==o?(u=n&&d?r.jsx(Xe.div,{className:"bg-token-sidebar-surface-primary relative z-1 shrink-0 overflow-x-hidden max-lg:w-0!",initial:{width:0},animate:{width:o,transition:{bounce:.12,duration:.3}},exit:{width:0},children:r.jsx("div",{className:"absolute h-full",style:{width:o},children:r.jsx("div",{className:"flex h-full flex-col",children:l})})}):null,e[4]=l,e[5]=d,e[6]=n,e[7]=o,e[8]=u):u=e[8];let m;return e[9]!==u?(m=r.jsx(dn,{children:u}),e[9]=u,e[10]=m):m=e[10],m}const itt=t=>{"use forget";const e=H.c(35),{conversation:n}=t,s=ue(U9);let o;e[0]!==n?(o=()=>Ea(n),e[0]=n,e[1]=o):o=e[1];const a=ue(o);if(!a)return null;if(s)switch(a.type){case"searchSources":{let i;return e[2]!==a||e[3]!==n?(i=r.jsx(Mje,{conversation:n,sidebar:a}),e[2]=a,e[3]=n,e[4]=i):i=e[4],i}case"product":{let i;return e[5]!==a||e[6]!==n?(i=r.jsx(wje,{conversation:n,sidebar:a}),e[5]=a,e[6]=n,e[7]=i):i=e[7],i}case"entity":{let i;return e[8]!==a||e[9]!==n?(i=r.jsx(kje,{conversation:n,sidebar:a}),e[8]=a,e[9]=n,e[10]=i):i=e[10],i}}switch(a.type){case"retrievalResults":{let i;return e[11]!==a||e[12]!==n?(i=r.jsx(Tje,{conversation:n,sidebar:a}),e[11]=a,e[12]=n,e[13]=i):i=e[13],i}case"summarizer":{let i;return e[14]!==a||e[15]!==n?(i=r.jsx(Eje,{conversation:n,sidebar:a}),e[14]=a,e[15]=n,e[16]=i):i=e[16],i}case"cot":{let i;return e[17]!==a||e[18]!==n?(i=r.jsx(Aje,{conversation:n,sidebar:a}),e[17]=a,e[18]=n,e[19]=i):i=e[19],i}case"caterpillar":{let i;return e[20]!==a.caterpillarId||e[21]!==a.initialTab?(i=r.jsx(Ije,{taskId:a.caterpillarId,initialTab:a.initialTab}),e[20]=a.caterpillarId,e[21]=a.initialTab,e[22]=i):i=e[22],i}case"n7jupdSources":{let i;return e[23]!==a||e[24]!==n?(i=r.jsx(jje,{conversation:n,sidebar:a}),e[23]=a,e[24]=n,e[25]=i):i=e[25],i}case"n7jupdTabs":{let i;return e[26]!==a.tabs||e[27]!==n?(i=r.jsx(Pje,{conversation:n,tabs:a.tabs}),e[26]=a.tabs,e[27]=n,e[28]=i):i=e[28],i}}return null};function ltt({clientThreadId:t}){const e=T2(o=>o.notifications),n=_.useRef(new Set),s=W("pointer-events-auto fixed end-4 top-8 z-100 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse px-2 py-4",e.length>3&&"overflow-y-auto");return _.useEffect(()=>{e.filter(a=>a.clientThreadId===void 0||t===a.clientThreadId).map(a=>a.id).filter(a=>a!==void 0).forEach(a=>E2(a)),e.forEach(a=>{a.id&&!n.current.has(a.id)&&(We.logEvent("chatgpt_notification_shown"),U.logEvent("Notifications: Notification Shown to User"),n.current.add(a.id))})},[t,e]),e.length===0||Ho?null:r.jsx("div",{className:s,children:r.jsx(dn,{children:e.map(o=>r.jsx(Rje,w({},o),o.id))})})}function Nje({notification:t}){return t.icon?r.jsx(_7,{className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border",IconComponent:t.icon}):r.jsx(Zp,{iconName:"openai",className:"border-token-secondary bg-token-main-surface-primary text-token-text-primary rounded-full border"})}function Rje(e){var t=Me(e,[]);var l,c;const n=at(),s=xt(),o=J(),a=Xn(t.clientThreadId),i=()=>{We.logEvent("chatgpt_notification_clicked"),U.logEvent("Notifications: User Clicked Notification"),t.onClick!=null?t.onClick():a&&M2(n,s,a),t.id&&E2(t.id)};return r.jsxs(Xe.div,{onClick:i,className:"border-token-border-default bg-token-main-surface-primary z-100 inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border px-3 py-3 align-middle shadow-lg","data-ignore-for-page-load":!0,initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[r.jsx(Nje,{notification:t}),r.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[r.jsx("div",{className:"text-token-text-primary w-full truncate text-sm font-medium",children:(l=t.title)!=null?l:o.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),t.subtitle&&r.jsx("div",{className:"text-token-text-tertiary w-full truncate text-sm",children:t.subtitle}),((c=t.payload)==null?void 0:c.display_image_url)&&r.jsx("img",{className:"mt-2 h-12 w-12 rounded-xs",src:t.payload.display_image_url,alt:t.payload.image_alt})]})]})}function ctt(){const t=xt(),e=_.useCallback(function(s){var l,c;const o=s.data.conversation_id;if(!o)return;const a=(c=(l=ft(o))==null?void 0:l.title)!=null?c:void 0,i=me.getGizmoId(ft(o));tg({title:a,subtitle:s.title,clientThreadId:o}),ro(t,i),ka(o)},[t]),n=_.useCallback(function(s){var i,l;const o=s.data.conversation_id;if(!o)return;const a=(l=(i=ft(o))==null?void 0:i.title)!=null?l:void 0;tg({title:a,subtitle:s.body,clientThreadId:o})},[]);return _.useEffect(()=>{const s={"new-message":e,"automation-error":n},o=a=>{if(a.data.type in s){const i=a.data.type;s[i](a.data)}};return"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",o),()=>{"serviceWorker"in navigator&&navigator.serviceWorker.removeEventListener("message",o)}},[e,n,t]),null}function dtt(){const t=ls();return Dje(t.pathname)}function Lje(t){const n=new URL("http://example.com".concat(t)).pathname.match(/\/g\/(g-p-[\w\d-]+)/);if(n)return n[1]}function Oje(t){const e=t.split("-");return e.length>1&&e[0]==="g"?(e==null?void 0:e[1])==="p"?"g-p-".concat(e[2]):"g-".concat(e[1]):e[0]}function Dje(t){const e=Lje(t);if(e)return Oje(e)}const K4="3747963938802455",Ac="1105138088231444",Fje="Lead",Bje="AddToCart",Uje={"":"",[Je.GO]:"FindLocation",[Je.PLUS]:"AddToWishlist",[Je.PRO]:"CustomizeProduct",[Je.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent"},Vje={"":"",[Je.GO]:"",[Je.PLUS]:"",[Je.PRO]:"",[Je.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":""};function utt(){"use forget";const t=H.c(5),{isUnauthenticated:e,isLoading:n}=Un(),{eligible:s,isLoading:o,markAsViewed:a}=$e(Ye.hasSeenMaverick),i=pn();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=B(w({},pl),{staleTime:144e5,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1}),t[0]=l):l=t[0];const{data:c,isLoading:d}=lt(l),u=c?c.is_consent_required?!!c.consent_marketing:!0:!1,m=i&&s&&u&&!e,f=o||n||d;let p;return t[1]!==a||t[2]!==m||t[3]!==f?(p={eligible:m,isLoading:f,markAsViewed:a},t[1]=a,t[2]=m,t[3]=f,t[4]=p):p=t[4],p}function mtt(t){"use forget";const e=H.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=G(),l=pn();let c;e[0]!==i?(c=Nn(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return Gje;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{const m=kr(Mr.Fbclid),f=m?Uje[n]:Vje[n];if(!f)return;const p=dU(d);p("set","autoConfig","false",Ac),p("init",Ac),p("dataProcessingOptions",["LDU"],0,0),m?p("trackSingle",Ac,f,{fbclid:m}):p("trackSingle",Ac,f),s()},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function Gje(){}function ftt(){"use forget";const t=H.c(7),e=pn(),n=G();let s;t[0]!==n?(s=Nn(n),t[0]=n,t[1]=s):s=t[1];const o=s,{cspScriptNonce:a}=o,i=o.eligibleNoCookieConsumerMarketing.isUserEligibleForMaverick,{eligible:l,markAsViewed:c}=$e(Ye.hasSeenMaverickCapi);if(!window||!e||!a)return $je;let d;return t[2]!==a||t[3]!==l||t[4]!==c||t[5]!==i?(d=()=>{const u=kr(Mr.Fbclid);if(!u&&!i)return;const m=dU(a);u&&(m("init",K4),m("dataProcessingOptions",["LDU"],0,0),m("trackSingle",K4,Fje,{fbclid:u})),l&&(m("init",Ac),m("dataProcessingOptions",["LDU"],0,0),m("trackSingle",Ac,Bje,{fbclid:u!=null?u:""}),c())},t[2]=a,t[3]=l,t[4]=c,t[5]=i,t[6]=d):d=t[6],d}function $je(){}function dU(t){return!window||!document?()=>{}:((function(e,n,s,o,a,i,l){e.fbq||(a=e.fbq=function(){a.callMethod?a.callMethod(...arguments):a.queue.push(arguments)},e._fbq||(e._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],i=n.createElement(s),i.async=!0,i.src=o,i.nonce=t,l=n.getElementsByTagName(s)[0],l==null||l.parentNode.insertBefore(i,l))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),window.fbq)}function ptt(){const{isUnauthenticated:t,isLoading:e}=Un(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.hasSeenPioneer),a=pn(),{data:i,isLoading:l}=lt(B(w({},pl),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),c=i?i.is_consent_required?!!i.consent_marketing:!0:!1;return{eligible:a&&a.created>Date.now()/1e3-1440*60&&n&&c&&!t,isLoading:s||e||l,markAsViewed:o}}function Hje(){["IDE","ANID","NID"].forEach(e=>{try{document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=."+window.location.hostname}catch(n){We.logEvent("chatgpt_pioneer_cookie_error")}})}async function Wje(t){if(t)try{const n=new TextEncoder().encode(t);return await crypto.subtle.digest("SHA-256",n).then(s=>Array.from(new Uint8Array(s)).map(o=>o.toString(16).padStart(2,"0")).join(""))}catch(e){We.logEvent("chatgpt_pioneer_email_error")}}const zje={"":"",[Je.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[Je.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[Je.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[Je.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"AW-16679965591/qdZOCN-224sbEJen0JE-","chatgpt-team-contact-sales":"AW-16679965591/X1ZvCLPptJQbEJen0JE-"},qje={"":"",[Je.GO]:"AW-16679965591/WLICCMbBkYUbEJen0JE-",[Je.PLUS]:"AW-16679965591/_IcwCPrEnYQbEJen0JE-",[Je.PRO]:"AW-16679965591/vEXOCMPBkYUbEJen0JE-",[Je.SELF_SERVE_BUSINESS]:"AW-16679965591/GuBcCP3CkYUbEJen0JE-","go-secondary":"AW-16678058309/OcdrCOT1g5kbEMXy25A-","plus-secondary":"AW-16678058309/ekpFCMui9ZgbEMXy25A-","pro-secondary":"AW-16678058309/CuIdCPne8JgbEMXy25A-","team-secondary":"AW-16678058309/nwKZCKzt8pgbEMXy25A-","chatgpt-team-get-started":"","chatgpt-team-contact-sales":""},Q4=[["AW-16678058309","0kStCJHMl9QZEMXy25A-"],["AW-16679965591","1dOfCL2W9ZYbEJen0JE-"]];function gtt({key:t,onTracked:e,allowUnauthenticatedTracking:n=!1}){const s=G(),o=pn(),{cspScriptNonce:a}=Nn(s);return!window||!o&&!n||!a?()=>{}:()=>{const i=kr(Mr.Gclid),l=i?zje[t]:qje[t];if(!l)return;const c=V9(a,"AW-16679965591");c("config","AW-16679965591",{send_page_view:!1,conversion_linker:!1,allow_ad_personalization_signals:!1,restricted_data_processing:!0}),i?c("event","conversion",{send_to:l,user_data:{gclid:i}}):c("event","conversion",{send_to:l}),e()}}function htt(){const t=pn(),e=G(),n=Nn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForPioneer;return!window||!t||!s?()=>{}:async()=>{const a=kr(Mr.Gclid);if(!a&&!o)return;const i=await Wje(t.email),[l]=Q4[0],c=V9(s,l);for(const[d,u]of Q4)c("config",d,{send_page_view:!1,conversion_linker:!0,restricted_data_processing:!0}),Hje(),c("set","user_data",{sha256_email_address:i}),c("event","conversion",{send_to:"".concat(d,"/").concat(u),user_data:{sha256_email_address:i,gclid:a!=null?a:void 0}});We.logEvent("chatgpt_pioneer_conv")}}function _tt(){const{isUnauthenticated:t,isLoading:e}=Un(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.hasSeenStratos),a=pn(),{data:i,isLoading:l}=lt(B(w({},pl),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),c=i?i.is_consent_required?!!i.consent_marketing:!0:!1;return{eligible:a&&n&&c&&!t,isLoading:s||e||l,markAsViewed:o}}function xtt(){const t=pn(),e=G(),n=Nn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForStratos;return!window||!t||!s?()=>{}:()=>{const a=kr(Mr.Tiktokclid);if(!(!a&&!o))try{const i=Yje(s);i.load("D0V58BRC77UC6ES2LGJG",{limited_data_use:!0}),i.page(),i.identify({external_id:a}),i.track("AddToCart")}catch(i){Oe.addError(i,{message:"Failed to track Stratos conversion"})}}}function Yje(t){return!window||!document?()=>{}:((function(e,n,s){e.TiktokAnalyticsObject=s;var o=e[s]=e[s]||[];o.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie","holdConsent","revokeConsent","grantConsent"],o.setAndDefer=function(i,l){i[l]=function(){i.push([l].concat(Array.prototype.slice.call(arguments,0)))}};for(var a=0;a<o.methods.length;a++)o.setAndDefer(o,o.methods[a]);o.instance=function(i){for(var l=o._i[i]||[],c=0;c<o.methods.length;c++)o.setAndDefer(l,o.methods[c]);return l},o.load=function(i,l){var c="https://analytics.tiktok.com/i18n/pixel/events.js";l&&l.partner,o._i=o._i||{},o._i[i]=[],o._i[i]._u=c,o._t=o._t||{},o._t[i]=+new Date,o._o=o._o||{},o._o[i]=l||{},l=n.createElement("script"),l.type="text/javascript",l.async=!0,l.src=c+"?sdkid="+i+"&lib="+s,l.nonce=t,i=n.getElementsByTagName("script")[0],i.parentNode.insertBefore(l,i)}})(window,document,"ttq"),window.ttq)}function ytt(){const{isUnauthenticated:t,isLoading:e}=Un(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.hasSeenTrailBlazer),a=pn(),{data:i,isLoading:l}=lt(B(w({},pl),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),c=i?i.is_consent_required?!!i.consent_marketing:!0:!1;return{eligible:a&&n&&c&&!t,isLoading:s||e||l,markAsViewed:o}}const Zje={"":"",[Je.GO]:"FindLocation",[Je.PLUS]:"AddToWishlist",[Je.PRO]:"CustomizeProduct",[Je.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"PageVisit","chatgpt-team-contact-sales":"SignUp"},Kje={"":"",[Je.GO]:"",[Je.PLUS]:"",[Je.PRO]:"",[Je.SELF_SERVE_BUSINESS]:"","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"","chatgpt-team-contact-sales":""};function vtt({key:t,onTracked:e,allowUnauthenticatedTracking:n=!1}){const s=G(),o=pn(),{cspScriptNonce:a}=Nn(s);return!window||!o&&!n||!a?()=>{}:()=>{const i=kr(Mr.Rdtcid),l=i?Zje[t]:Kje[t];if(!l)return;const c=uU(a);c("init","a2_f1c16ccvsrrl",{dpm:"LDU",dpcc:"ALL",dprc:"ALL"}),i?c("track",l,{rdt_cid:i}):c("track",l),e()}}function btt(){const t=pn(),e=G(),n=Nn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForTrailBlazer;return!window||!t||!s?()=>{}:()=>{const a=kr(Mr.Rdtcid);if(!a&&!o)return;const i=uU(s);i("init","a2_f1c16ccvsrrl",{email:t.email}),i("track","Lead",{rdt_cid:a!=null?a:void 0})}}function uU(t){return!window||!document?()=>{}:((function(e,n){if(!e.rdt){var s=e.rdt=function(){s.sendEvent?s.sendEvent(...arguments):s.callQueue.push(arguments)};s.callQueue=[];var o=n.createElement("script");o.src="https://www.redditstatic.com/ads/pixel.js",o.async=!0,o.nonce=t;var a=n.getElementsByTagName("script")[0];a==null||a.parentNode.insertBefore(o,a)}})(window,document),window.rdt)}const Qje="187204252",J4="wayfinder-uet-script",Jje={"":"",[Je.GO]:"FindLocation",[Je.PLUS]:"AddToWishlist",[Je.PRO]:"CustomizeProduct",[Je.SELF_SERVE_BUSINESS]:"Contact","go-secondary":"","plus-secondary":"","pro-secondary":"","team-secondary":"","chatgpt-team-get-started":"Search","chatgpt-team-contact-sales":"ViewContent"};function Stt(){const{isUnauthenticated:t,isLoading:e}=Un(),{eligible:n,isLoading:s,markAsViewed:o}=$e(Ye.hasSeenWayfinder),a=pn(),{data:i,isLoading:l}=lt(B(w({},pl),{staleTime:14400*1e3,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1})),c=i?i.is_consent_required?!!i.consent_marketing:!0:!1;return{eligible:a&&n&&c&&!t,isLoading:s||e||l,markAsViewed:o}}function Ctt(t){"use forget";const e=H.c(6),{key:n,onTracked:s,allowUnauthenticatedTracking:o}=t,a=o===void 0?!1:o,i=G(),l=pn();let c;e[0]!==i?(c=Nn(i),e[0]=i,e[1]=c):c=e[1];const{cspScriptNonce:d}=c;if(!window||!l&&!a||!d)return Xje;let u;return e[2]!==d||e[3]!==n||e[4]!==s?(u=()=>{if(!kr(Mr.Msclkid))return;const f=Jje[n];if(f)try{const p=mU(d);if(!p)return;p.push("event",f),s()}catch(p){const g=p;Oe.addError(g,{message:"Failed to track Wayfinder Bing b2b conversion",eventName:f})}},e[2]=d,e[3]=n,e[4]=s,e[5]=u):u=e[5],u}function Xje(){}function wtt(){const t=pn(),e=G(),n=Nn(e),{cspScriptNonce:s}=n,o=n.eligibleNoCookieConsumerMarketing.isUserEligibleForWayfinder;return!window||!t||!s?()=>{}:()=>{const a="AddToCart";if(!(!kr(Mr.Msclkid)&&!o))try{const l=mU(s);if(!l)return;l.push("event",a)}catch(l){Oe.addError(l,{message:"Failed to track Wayfinder Bing b2c conversion",eventName:a})}}}function mU(t){var a,i;if(!window||!document)return;const e=window;e.uetq=(a=e.uetq)!=null?a:[];const n=()=>{var c;if(e.__wayfinderUetInitialized||typeof e.UET!="function")return;const l={ti:Qje,enableAutoSpaTracking:!0};l.q=e.uetq,e.uetq=new e.UET(l),(c=e.uetq)==null||c.push("pageLoad"),e.__wayfinderUetInitialized=!0};if(document.getElementById(J4))return n(),e.uetq;const s=document.createElement("script");s.id=J4,s.async=!0,s.src="https://bat.bing.com/bat.js",t&&(s.nonce=t),s.onload=n,s.addEventListener("readystatechange",()=>{const l=s.readyState;(!l||l==="loaded"||l==="complete")&&n()});const o=document.getElementsByTagName("script")[0];return(i=o==null?void 0:o.parentNode)==null||i.insertBefore(s,o),e.uetq}const ePe={stiffness:300,damping:30,mass:1},tPe={transition:ePe,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},nPe={setFocusedObject:t=>{fg.setState({focusedObject:t}),Tae()},close(){fg.setState({focusedObject:null})}},sPe=({className:t})=>r.jsxs(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:[r.jsx("path",{d:"M11.5047 10C12.8828 10 14 11.1172 14 12.4953C14 15.2919 10.9404 14.9905 9.00947 14.9905C9.00947 13.0596 8.70813 10 11.5047 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),r.jsx("path",{d:"M12 9.5C13.8983 6.79576 16.0839 4.85949 18.8983 3.40128C19.3829 3.15019 19.9712 3.25691 20.3571 3.64286V3.64286C20.7431 4.0288 20.8498 4.61706 20.5987 5.10168C19.1405 7.91612 17.2042 10.1017 14.5 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),r.jsx("path",{d:"M12.0003 21.0003C11.5003 21.0003 8.93732 20.1297 6.71782 17.9102C3.00784 14.2002 2.05809 9.13491 4.5965 6.5965C6.68218 4.51082 10.4738 4.78002 13.8179 7.00031M17.1066 10.0003C19.9927 13.3315 21.2146 16.7289 19.0003 18.5003C17.3415 19.8274 15.2424 18.2927 14.0176 17.1097",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),oPe=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.70711 2.29289C8.09763 2.68342 8.09763 3.31658 7.70711 3.70711L6.41421 5H13.5C17.6421 5 21 8.35786 21 12.5C21 16.6421 17.6421 20 13.5 20H9C8.44772 20 8 19.5523 8 19C8 18.4477 8.44772 18 9 18H13.5C16.5376 18 19 15.5376 19 12.5C19 9.46243 16.5376 7 13.5 7H6.41421L7.70711 8.29289C8.09763 8.68342 8.09763 9.31658 7.70711 9.70711C7.31658 10.0976 6.68342 10.0976 6.29289 9.70711L3.29289 6.70711C2.90237 6.31658 2.90237 5.68342 3.29289 5.29289L6.29289 2.29289C6.68342 1.90237 7.31658 1.90237 7.70711 2.29289Z",fill:"currentColor"})}),aPe=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.2929 2.29289C16.6834 1.90237 17.3166 1.90237 17.7071 2.29289L20.7071 5.29289C21.0976 5.68342 21.0976 6.31658 20.7071 6.70711L17.7071 9.70711C17.3166 10.0976 16.6834 10.0976 16.2929 9.70711C15.9024 9.31658 15.9024 8.68342 16.2929 8.29289L17.5858 7H10.5C7.46243 7 5 9.46243 5 12.5C5 15.5376 7.46243 18 10.5 18H15C15.5523 18 16 18.4477 16 19C16 19.5523 15.5523 20 15 20H10.5C6.35786 20 3 16.6421 3 12.5C3 8.35786 6.35786 5 10.5 5H17.5858L16.2929 3.70711C15.9024 3.31658 15.9024 2.68342 16.2929 2.29289Z",fill:"currentColor"})}),ktt=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{d:"M3 18H4.17157C4.70201 18 5.21071 17.7893 5.58579 17.4142L15.4142 7.58579C15.7893 7.21071 16.298 7 16.8284 7H19M3 6H4.17157C4.70201 6 5.21071 6.21071 5.58579 6.58579L8 9M19 17H16.8284C16.298 17 15.7893 16.7893 15.4142 16.4142L14 15M18 4L21 7L18 10M18 14L21 17L18 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Mtt=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Ttt=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),Ett=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("rect",{x:"6",y:"2",width:"12",height:"20",rx:"2",stroke:"currentColor",strokeWidth:"2"})}),rPe=({className:t})=>r.jsx(As,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:t,children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4C13 3.44772 13.4477 3 14 3H20C20.5523 3 21 3.44772 21 4V10C21 10.5523 20.5523 11 20 11C19.4477 11 19 10.5523 19 10V6.41421L15.2071 10.2071C14.8166 10.5976 14.1834 10.5976 13.7929 10.2071C13.4024 9.81658 13.4024 9.18342 13.7929 8.79289L17.5858 5H14C13.4477 5 13 4.55228 13 4ZM4 13C4.55228 13 5 13.4477 5 14V17.5858L8.79289 13.7929C9.18342 13.4024 9.81658 13.4024 10.2071 13.7929C10.5976 14.1834 10.5976 14.8166 10.2071 15.2071L6.41421 19H10C10.5523 19 11 19.4477 11 20C11 20.5523 10.5523 21 10 21H4C3.44772 21 3 20.5523 3 20V14C3 13.4477 3.44772 13 4 13Z",fill:"currentColor"})}),iPe=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),lPe=j(()=>I(()=>import("./mbhfxri3syrb9rbq.js").then(t=>t._),__vite__mapDeps([301,1])),{loading:t=>L(t)}),fU=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),cPe=j(()=>I(()=>import("./fwyctp3zfyh6emd2.js").then(t=>t._),__vite__mapDeps([191,1])),{loading:t=>L(t)});function Att({imageAsset:t,mode:e,setMode:n,clientThreadId:s,messageId:o,cursorWidth:a,setCursorWidth:i,inpaintingDrawingState:l,isLoadingNewImage:c}){const d=jt(s),{canUndoDrawing:u,undoDrawing:m,canRedoDrawing:f,redoDrawing:p,clearAllDrawings:g}=l,h=J();return r.jsxs(Xe.div,B(w({className:"flex h-16 w-full justify-between px-4"},tPe),{children:[r.jsx("div",{className:"flex items-center",children:e==="inpaint"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:W("flex items-center gap-3",c&&"opacity-50"),children:[r.jsx(eT,{className:"h-[11px] w-[11px]"}),r.jsxs(H3,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[a],onValueChange:x=>i(x[0]),disabled:c,children:[r.jsx(W3,{className:"bg-token-text-quaternary relative h-[2px] grow",children:r.jsx(_B,{className:"bg-token-text-secondary absolute h-full"})}),r.jsx(z3,{className:"bg-token-text-secondary block h-[11px] w-[11px] rounded-full"})]}),r.jsx(eT,{className:"h-6 w-6"})]}),r.jsx(X4,{}),r.jsx(Za,{disabled:!u||c,onClick:m,children:r.jsx(oPe,{})}),r.jsx(Za,{disabled:!f||c,onClick:p,children:r.jsx(aPe,{})}),r.jsx(X4,{}),r.jsx(Za,{disabled:!u||c,onClick:g,children:r.jsx(P,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),r.jsx("div",{className:"flex items-center",children:e==="inpaint"?r.jsx(Za,{onClick:()=>n("default"),disabled:c,children:r.jsx(P,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):r.jsxs(r.Fragment,{children:[r.jsx(uPe,{imageAsset:t,setMode:n,messageId:o,serverThreadId:d}),r.jsx(Za,{tooltip:h.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>pTe(t,d,o),children:r.jsx(lPe,{})}),r.jsx(dPe,{prompt:DF(t),children:r.jsx(Za,{tooltip:h.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:r.jsx(iPe,{})})}),r.jsx(Za,{tooltip:h.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:nPe.close,children:r.jsx(fU,{className:"icon-lg"})})]})})]}))}function dPe({prompt:t,children:e}){const[n,s]=_.useState(!1),o=J(),a=Ut();return r.jsx(C3,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:r.jsx("div",{className:"group",children:e}),className:"z-10",size:"none",children:r.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[r.jsx("div",{className:"text-token-text-secondary",children:r.jsx(P,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),r.jsx("div",{children:t}),r.jsx("div",{children:r.jsx(he,{color:"secondary",disabled:n,onClick:i=>{s(!0),Ta(t,a,i),setTimeout(()=>s(!1),2e3)},icon:cPe,children:n?o.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):o.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function Za({children:t,tooltip:e,disabled:n,onClick:s}){const o=r.jsx("button",{className:W("hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary rounded-sm p-2 font-semibold",n?"text-token-text-quaternary":"text-token-text-secondary"),disabled:n,onClick:s,children:t});return e!=null?r.jsx(kt,{label:e,children:o}):o}function Itt({onClose:t}){const e=J();return r.jsx(Za,{tooltip:e.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:t,children:r.jsx(fU,{className:"icon-lg"})})}function uPe({imageAsset:t,setMode:e,messageId:n,serverThreadId:s,disabled:o}){const a=J(),i=$e(Ye.DalleEditingOnboarding),l=i.eligible&&!i.isLoading,c=r.jsx(Za,{tooltip:l?void 0:a.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{var d,u,m,f,p,g,h,x,y,b,v,S,C,k,M,T,E,A,N,R,O,D;e("inpaint"),We.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:(m=(u=(d=t.metadata)==null?void 0:d.dalle)==null?void 0:u.edit_op)!=null?m:"none",hasParent:((p=(f=t.metadata)==null?void 0:f.dalle)==null?void 0:p.parent_gen_id)!=null?"true":"false",model:"dalle"}),U.logEvent("chatgpt_dalle_inpaint_click",{conversationId:s,messageId:n,generationId:(h=(g=t.metadata)==null?void 0:g.dalle)==null?void 0:h.gen_id,fileId:To(t.asset_pointer),parentGenerationId:(y=(x=t.metadata)==null?void 0:x.dalle)==null?void 0:y.parent_gen_id,sourceOperation:(v=(b=t.metadata)==null?void 0:b.dalle)==null?void 0:v.edit_op,model:"dalle"}),We.logEvent("chatgpt_image_inpaint_click",null,{sourceOperation:(k=(C=(S=t.metadata)==null?void 0:S.dalle)==null?void 0:C.edit_op)!=null?k:"none",hasParent:((T=(M=t.metadata)==null?void 0:M.dalle)==null?void 0:T.parent_gen_id)!=null?"true":"false",model:"dalle"}),U.logEvent("chatgpt_image_inpaint_click",{conversationId:s,messageId:n,generationId:(A=(E=t.metadata)==null?void 0:E.dalle)==null?void 0:A.gen_id,fileId:To(t.asset_pointer),parentGenerationId:(R=(N=t.metadata)==null?void 0:N.dalle)==null?void 0:R.parent_gen_id,sourceOperation:(D=(O=t.metadata)==null?void 0:O.dalle)==null?void 0:D.edit_op,model:"dalle"})},disabled:o,children:r.jsx(sPe,{})});return l?r.jsx(Vd,{announcementKey:Ye.DalleEditingOnboarding,show:!0,side:"bottom",sideOffset:0,title:a.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:a.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:i.markAsViewed,children:r.jsx("div",{children:c})}):c}var u6;const X4=ct.div(u6||(u6=rt(["mx-3 w-[1px] h-6 bg-token-border-default"])));var m6;const eT=ct.div(m6||(m6=rt(["rounded-full border-2 border-token-text-secondary"])));async function tT({url:t,fileName:e}){const s=await(await fetch(t)).blob(),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=e,o.click(),o.remove()}const mPe="ChatGPT Image";function fPe(t){const e=new Date,n=t.formatDate(e,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return"".concat(mPe," ").concat(n,".png")}function jtt(){const[t,e]=_.useState({undoStack:[],currentIndex:-1});function n(i){e(l=>({undoStack:[...l.undoStack.slice(0,l.currentIndex+1),i],currentIndex:l.currentIndex+1}))}function s(){e(i=>({undoStack:i.undoStack,currentIndex:Math.max(i.currentIndex-1,-1)}))}function o(){e(i=>({undoStack:i.undoStack,currentIndex:Math.min(i.currentIndex+1,i.undoStack.length-1)}))}function a(){e({undoStack:[],currentIndex:-1})}return{currentDrawnShape:t.undoStack.length>0?t.undoStack[t.currentIndex]:null,onNewDrawnShape:n,canUndoDrawing:t.currentIndex>=0,undoDrawing:s,canRedoDrawing:t.currentIndex<t.undoStack.length-1,redoDrawing:o,clearAllDrawings:a}}const pPe=j(()=>I(()=>import("./d37wnl6f0j36qmcs.js"),__vite__mapDeps([432,1,29,30,433,434])).then(t=>t.DynamicDrawingCanvas)),gPe=136;function Ptt({image:t,drawingState:e,drawingCanvasRef:n}){return r.jsx("div",{className:"pointer-events-none absolute inset-0 z-[60] overflow-visible",children:r.jsx("div",{className:"pointer-events-auto absolute inset-0",children:r.jsx(pPe,{drawingCanvasRef:n,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:gPe,canvasWidth:t.width,canvasHeight:t.height,currentDrawnShape:e.currentDrawnShape,onNewDrawnShape:e.onNewDrawnShape})})})}function hPe(s){var o=s,{className:t,children:e}=o,n=Me(o,["className","children"]);return r.jsx(Qde,B(w({className:t},n),{children:e}))}const _Pe=o=>{var a=o,{value:t,className:e,label:n}=a,s=Me(a,["value","className","label"]);return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(MS,w({id:t,value:t,className:W("border-token-text-tertiary hover:bg-token-main-surface-tertiary h-4 w-4 shrink-0 gap-2 rounded-full border bg-transparent shadow-sm outline-hidden",e)},s)),r.jsx("label",{htmlFor:t,className:"w-full cursor-pointer",children:n})]})},xPe=n=>{var s=n,{className:t}=s,e=Me(s,["className"]);return r.jsx(TS,w({className:W("after:bg-token-text-primary relative flex h-full w-full items-center justify-center after:block after:h-2 after:w-2 after:rounded-[50%] after:content-['']",t)},e))},Tx={Root:hPe,Item:_Pe,Indicator:xPe};function pU(n){var s=n,{className:t}=s,e=Me(s,["className"]);return r.jsx("textarea",w({className:W("form-textarea border-token-border-default bg-token-main-surface-secondary text-token-text-primary focus:border-token-text-primary focus:ring-token-text-primary w-full rounded-lg border text-sm focus:shadow-none focus:outline-hidden",t)},e))}function yPe(t){var e,n;return((n=(e=t.sub_reasons)==null?void 0:e.length)!=null?n:0)===0&&t.details_placeholder==null&&t.link_attachment==null&&t.subtext==null}function Ntt(t,e,n,s,o={},a,i,l){const c=Ut(),d={};return a&&$s(a)&&i&&(d["chatgpt-project-id"]=a,d["chatgpt-conv-owner-id"]=i),l&&(d["chatgpt-conv-message-id"]=l),Bt({mutationFn:u=>{var f,p;return pt(t)?pe.safePost("/report_flow/report",{requestBody:B(w({},u),{entity_type:s,entity_id:n,additional_fields_values:w(w({},(f=u.additional_fields_values)!=null?f:{}),o!=null?o:{})}),additionalHeaders:d,authOption:qt.SendIfAvailable}):Pb.safePost("/report_flow/report",{requestBody:B(w({},u),{entity_type:s,entity_id:n,additional_fields_values:w(w({},(p=u.additional_fields_values)!=null?p:{}),o!=null?o:{})}),authOption:qt.Anonymous})},onError:u=>{var m;Oe.addError(new Error("Error occurred while reporting",{cause:u}),{entityType:s,id:n}),c.danger(e.formatMessage({id:"report.submitError",defaultMessage:"Error reporting: {detail}"},{detail:u.message}),{toastId:"report_mutation_failed_to_report",loggingTitle:String((m=u==null?void 0:u.message)!=null?m:""),loggingDescription:"Error message when submitting a report fails"})}})}function Rtt(t,e){return lt({queryKey:["reportReasons",{entityType:e}],queryFn:()=>pt(t)?pe.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:qt.SendIfAvailable}):Pb.safeGet("/report_flow/reasons/{entity_type}",{parameters:{path:{entity_type:e}},authOption:qt.Anonymous})})}var f6;ct.div(f6||(f6=rt(["divide-y overflow-hidden rounded-md border border-token-border-medium"])));var p6;ct.button(p6||(p6=rt(["w-full border-token-border-medium p-2 text-start text-sm hover:bg-token-main-surface-secondary"])));var g6;const vPe=ct.div(g6||(g6=rt(["text-base font-medium"])));var h6;const bPe=ct.div(h6||(h6=rt(["text-sm text-token-text-secondary"])));function lc({header:t,subHeader:e}){return t==null&&e==null?null:r.jsxs("div",{className:"mb-4",children:[t!=null&&r.jsx(vPe,{children:t}),e!=null&&r.jsx(bPe,{children:e})]})}function SPe({reasons:t,setSelectedReason:e,selectedReason:n}){var s;return r.jsx(Tx.Root,{value:(s=n==null?void 0:n.id)!=null?s:"",onValueChange:o=>e(t.find(a=>a.id===o)),className:"flex flex-col gap-3",children:t.map(o=>r.jsx(Tx.Item,{value:o.id,label:o.cta,children:r.jsx(Tx.Indicator,{})},o.id))})}function CPe({reason:t,details:e,setDetails:n,name:s,setName:o,email:a,setEmail:i,showName:l,showEmail:c}){const d=l||c,u=J(),m=u.formatMessage({id:"report.loggedOut.name",defaultMessage:"Your name"}),f=u.formatMessage({id:"report.loggedOut.email",defaultMessage:"Your email address"}),p=u.formatMessage({id:"report.loggedOut.details",defaultMessage:"Add details"});return r.jsxs("div",{className:"flex flex-col gap-4",children:[d&&r.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[l&&r.jsxs("div",{className:"flex flex-col gap-1",children:[m,r.jsx(sm,{ariaLabel:m,name:"name",type:"text",value:s,onChange:g=>o(g.target.value)})]}),c&&r.jsxs("div",{className:"flex flex-col gap-1",children:[f,r.jsx(sm,{ariaLabel:f,name:"email",type:"email",value:a,onChange:g=>i(g.target.value)})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 text-sm",children:[d&&p,r.jsx(pU,{"aria-label":d?p:void 0,value:e,onChange:g=>n(g.target.value),placeholder:!d&&t.details_placeholder?t.details_placeholder:void 0,autoFocus:!0,className:"bg-token-main-surface-primary!"})]}),t.subtext!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:t.subtext})]})}function wPe({reason:t}){return r.jsx("div",{className:"text-sm",children:r.jsx("div",{className:"mb-2",children:t.link_explanation})})}function Ltt({reasons:t,submitReport:e,title:n,onClose:s,header:o}){var R,O;const a=J(),[i,l]=_.useState([]);let c=t,d;for(const D of i)d=c.find(F=>F.id===D.id),c=(R=d==null?void 0:d.sub_reasons)!=null?R:[];const[u,m]=_.useState(),f=u!=null&&yPe(u),[p,g]=_.useState(""),[h,x]=_.useState(""),[y,b]=_.useState(""),v=(O=d==null?void 0:d.additional_fields)==null?void 0:O.map(D=>D.id),S=v==null?void 0:v.includes(GC.UserName),C=v==null?void 0:v.includes(GC.UserEmail);let k;f?k=r.jsx(he,{color:"primary",onClick:()=>{e.mutateAsync({reason:{id:u.id}})},disabled:!u||e.isPending,loading:e.isPending,children:r.jsx(P,{id:"report.submitReport",defaultMessage:"Submit"})}):k=r.jsx(he,{color:"primary",onClick:()=>{u&&(l(D=>[...D,u]),m(void 0))},disabled:!u,children:r.jsx(P,{id:"z5fExR",defaultMessage:"Next"})});let M=d!=null?r.jsx(he,{onClick:()=>{if(i.length>0){const D=i[i.length-1];l(F=>F.slice(0,-1)),m(D)}},color:"secondary",children:r.jsx(P,{id:"xJnONr",defaultMessage:"Back"})}):null;const T=(d==null?void 0:d.subtext)!=null&&r.jsx("div",{className:"text-token-text-secondary text-sm",children:d.subtext}),E=a.formatMessage({id:"report.submittedModal.header",defaultMessage:"Report submitted"}),A=a.formatMessage({id:"report.submittedModal.subHeader",defaultMessage:"Thank you for your report. We'll review the content to determine if it violates our policies."});let N;if(e.isSuccess)M=void 0,k=void 0,N=r.jsxs(r.Fragment,{children:[r.jsx(lc,{header:E}),r.jsxs("div",{className:"text-sm",children:[A,r.jsx("br",{}),r.jsx("br",{}),r.jsx(P,{id:"report.submittedModal.learn",defaultMessage:"Learn more about "}),r.jsx("a",{href:"https://openai.com/transparency-and-content-moderation/",target:"_blank",rel:"noreferrer",className:"break-words underline",children:r.jsx(P,{id:"report.submittedModal.link",defaultMessage:"how we handle reports."})})]})]});else if((d==null?void 0:d.details_placeholder)!=null)k=r.jsx(he,{color:"primary",onClick:()=>{let D;(S||C)&&(D={},S&&(D.user_name=h),C&&(D.user_email=y)),e.mutateAsync({reason:{id:d.id,details:p},additional_fields_values:D})},disabled:e.isPending,loading:e.isPending,children:r.jsx(P,{id:"report.submitReport",defaultMessage:"Submit"})}),N=r.jsxs(r.Fragment,{children:[r.jsx(lc,{header:r.jsx(P,{id:"CGoWjT",defaultMessage:"Please tell us more"})}),r.jsx(CPe,{reason:d,showName:S!=null?S:!1,showEmail:C!=null?C:!1,details:p,setDetails:g,name:h,setName:x,email:y,setEmail:b})]});else if((d==null?void 0:d.link_attachment)!=null){const D=d.link_attachment;k=r.jsx(he,{color:"primary",onClick:()=>{window.open(D,"_blank")},children:r.jsx(P,{id:"report.goToForm",defaultMessage:"Go to Form"})}),N=r.jsxs(r.Fragment,{children:[r.jsx(lc,{}),r.jsx(wPe,{reason:d}),T]})}else c.length>0?N=r.jsxs(r.Fragment,{children:[r.jsx(lc,{header:o}),c.length>0&&r.jsx(SPe,{reasons:c,selectedReason:u,setSelectedReason:m}),T]}):(d==null?void 0:d.subtext)!=null?(k=void 0,N=r.jsxs(r.Fragment,{children:[r.jsx(lc,{header:o}),r.jsx("div",{className:"text-sm",children:d==null?void 0:d.subtext})]})):(Oe.addError("Reporting: arrived at empty leaf reason",d),k=void 0,M=void 0,N=r.jsx(lc,{header:E,subHeader:A}));return r.jsx(Pt,{testId:"modal-report-reason-selection",title:n,onClose:s,isOpen:!0,showCloseButton:!0,type:"success",secondaryButton:M,primaryButton:k,children:N})}const kPe="https://openai.com/form/report-content/",Ott=({areButtonsFullWidth:t,post:e,setIsReportModalOpen:n})=>{const{isUnauthenticated:s}=Un(),o=J(),a=e.attachments.every(i=>i.kind==="media_generation");return r.jsx("div",{className:"border-token-border-default flex w-full justify-center border-b-[0.5px] px-2 sm:px-6",children:r.jsx("div",{className:W("flex w-full items-center justify-between gap-4 py-4",!t&&"max-w-[1200px]"),children:r.jsxs("div",{children:[r.jsx(kt,{align:"start",theme:"primary",labelTextAlign:"left",wide:!0,contentClassName:"![&>*]:font-normal *:font-normal",label:o.formatMessage({id:"rZHri8",defaultMessage:"The content youre seeing was made by a ChatGPT user. It may be unverified or contain potentially unsafe content that doesnt reflect the views of OpenAI."}),children:r.jsx("h1",{className:"text-token-text-primary line-clamp-1 text-base font-semibold",children:e.text})}),r.jsxs("div",{className:"text-token-text-secondary xs:flex-col flex flex-col gap-1.5 text-xs sm:flex-row",children:[!a&&r.jsx("div",{className:"cursor-default",children:o.formatMessage(Ex.madeWithCanvas)}),r.jsx("div",{children:s?r.jsx("a",{className:"underline",href:kPe,target:"_blank",rel:"noreferrer",onClick:()=>{},children:o.formatMessage(Ex.report)}):r.jsx("button",{className:"underline",onClick:()=>{n(!0)},children:o.formatMessage(Ex.report)})})]})]})})})},Ex=be({report:{id:"DHsq+d",defaultMessage:"Report"},editWithChatGPT:{id:"DrcR8S",defaultMessage:"Edit with ChatGPT"},edit:{id:"PpEliN",defaultMessage:"Edit"},madeWithCanvas:{id:"h8SGou",defaultMessage:"Youre viewing user-generated content that may be unverified or unsafe."}}),MPe=j(()=>I(()=>import("./jwaqw91gvomlruq4.js"),__vite__mapDeps([435,1])),{loading:t=>L(t)});function gU({className:t}){const e=J();return r.jsx(MPe,{className:W("h-6 w-24",t),"aria-label":e.formatMessage({id:"VJmCc9",defaultMessage:"ChatGPT logo"}),role:"img"})}const hU=j(()=>I(()=>import("./i62z0czv9p8e8lku.js"),__vite__mapDeps([436,1,29,30,437,438,106,261,262,105,439,104,440,99,98,441,100,442,108,443,444,445,97,446,447,448,96,61,55,56,52,49,50,51,53,54,60,95,101,58,63,65,66,67,449,450,121,122,451,452,74,453])).then(t=>t.AttachmentContent));function TPe(){hU.prefetch()}function _U({attachments:t,variant:e,className:n,clientThreadId:s}){return r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsx("div",{className:n,children:r.jsx(hU,{attachment:o,caption:"",variant:e,hasActiveRequest:!1,clientThreadId:s})},a))})}function EPe({attachments:t,clientThreadId:e,className:n}){var a;const s=G(),o=((a=t[0])==null?void 0:a.kind)==="media_generation";return r.jsx(Jz,{conversation:ht(s,e),children:r.jsxs("div",{className:W("bg-token-primary relative m-0 box-border w-full overflow-hidden",n),"data-testid":"sharing-post-unfurl-view",children:[r.jsx(_U,{attachments:t,variant:"unfurl",className:"h-full w-full",clientThreadId:e}),r.jsx("div",{className:W("absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent",o?"from-black/35":"from-token-main-surface-primary")}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(gU,{className:W("inline h-4 w-24 text-end",o&&"text-white")})})]})})}const APe=Object.freeze(Object.defineProperty({__proto__:null,PostListPreview:_U,PostUnfurlPreview:EPe,prefetchPostPreviewContentComponent:TPe},Symbol.toStringTag,{value:"Module"}));async function IPe(){var t;try{const e=(t=Ou)==null?void 0:t.getHost();return e?await e.getClientCapabilityVersion():void 0}catch(e){return}}async function jPe(){const t=await IPe();return t!=null&&t>=2}function PPe(t){"use forget";var z,$,Y,Z,Q,q,X,oe,se,de;const e=H.c(30),n=ue(it.wantsHandleAgentRequest$),s=G(),{selectedSources:o}=Ra(t),a=Xn(t),[i,l]=_.useState(!1),c=Ue(t,DPe),d=((z=c==null?void 0:c.metadata)==null?void 0:z.is_takeover_ended_message)===!0,u=Ue(t,LPe),m=Ue(t,RPe);let f;e[0]!==m?(f=fh(m)===ph.n7jupd_m&&(($=m.metadata)==null?void 0:$.kaur1br5_mode)===!0,e[0]=m,e[1]=f):f=e[1];const p=f,g=(Y=m.metadata)==null?void 0:Y.agent_preinitialize_request_id,h=((Z=m.metadata)==null?void 0:Z.n7jupd_local_safe_mode)===!0;let x;e[2]!==t||e[3]!==s?(x=()=>{var ae;const ie=ht(s,t);return(ae=Mi(ie))==null?void 0:ae.value},e[2]=t,e[3]=s,e[4]=x):x=e[4];const y=ue(x),b=y===Yt.STREAMING||y===Yt.REALTIME,v=c&&c.create_time&&u&&u.create_time&&c.create_time<u.create_time&&b,S=_.useRef(void 0),C=(m==null?void 0:m.author.role)===Ze.Assistant?m:void 0,k=!!(C&&(((q=(Q=C.metadata)==null?void 0:Q.finish_details)==null?void 0:q.type)==="interrupted"&&((oe=(X=C.metadata)==null?void 0:X.finish_details)==null?void 0:oe.reason)==="server_error"||((se=C.clientMetadata)==null?void 0:se.err)!=null||((de=C.clientMetadata)==null?void 0:de.errType)!=null)),M=(C==null?void 0:C.end_turn)===!0;let T,E;e[5]!==o||e[6]!==a||e[7]!==s||e[8]!==n?(T=()=>{if(!n)return;it.wantsHandleAgentRequest$.set(!1);const ie=it.agentRequest;if(ie&&a)e:switch(ie){case"startTakeoverFromAgent":{wO({showPlaceholderMessage:!0});break e}case"endTakeoverFromAgent":{(async()=>{const ae=await Lh(void 0,"side_chat","user",[Ie.Agent]);await kO(s,o,{startNewTurn:!0,skipTakeoverAfterAbort:async()=>await CJ(a)!=="running"},ae)})();break e}case"stopAgent":{l(!0);break e}}},E=[n,o,s,a],e[5]=o,e[6]=a,e[7]=s,e[8]=n,e[9]=T,e[10]=E):(T=e[9],E=e[10]),_.useEffect(T,E);let A,N;e[11]!==t||e[12]!==v||e[13]!==i?(A=()=>{!i||!v||(l(!1),e1(t,void 0,{clientInitiated:!0,reason:"stop_button",isLastTurnAgent:!0}))},N=[i,v,t],e[11]=t,e[12]=v,e[13]=i,e[14]=A,e[15]=N):(A=e[14],N=e[15]),_.useEffect(A,N);const R=Ue(t,NPe);let O,D;e[16]!==p||e[17]!==g||e[18]!==h||e[19]!==d||e[20]!==a||e[21]!==R?(O=()=>{if(!p||!a)return;let ie=!1;return(async()=>!(await jPe()||!d)||ie||(l(!1),bJ(a,R,h,d,g)))(),()=>{ie=!0}},D=[a,p,g,h,d,R,l],e[16]=p,e[17]=g,e[18]=h,e[19]=d,e[20]=a,e[21]=R,e[22]=O,e[23]=D):(O=e[22],D=e[23]),_.useEffect(O,D);let F,V;e[24]!==y||e[25]!==k||e[26]!==M||e[27]!==a?(F=()=>{const ie=S.current;S.current=y;const ae=ie===Yt.REALTIME&&y!==Yt.REALTIME;a&&(M||ae)&&SJ(a,k)},V=[a,y,S,M,k],e[24]=y,e[25]=k,e[26]=M,e[27]=a,e[28]=F,e[29]=V):(F=e[28],V=e[29]),_.useEffect(F,V)}function NPe(t){return me.getUserMessages(t)}function RPe(t){return me.getCurrentNode(t).message}function LPe(t){var e;return(e=me.findNode(t,OPe))==null?void 0:e.message}function OPe(t){var e;return fh(t.message)===ph.n7jupd_m&&((e=t.message.metadata)==null?void 0:e.kaur1br5_mode)===!0}function DPe(t){return me.getUserMessages(t).at(-1)}const Dtt=t=>{"use forget";const{clientThreadId:e}=t;return PPe(e),null};var Zr=(t=>(t.Running="running",t.Finished="finished",t.Error="error",t))(Zr||{});const Ax=(t,e)=>"".concat(t,":").concat(e),Gi=Nt((t,e)=>({toolStates:new Map,setToolState:(n,s,o,a)=>{const i=Ax(n,s),l=e().toolStates.get(i);t(c=>{var u;const d=new Map(c.toolStates);return d.set(i,{status:a,toolName:o,messageId:s,startTime:(u=l==null?void 0:l.startTime)!=null?u:Date.now()}),{toolStates:d}})},getToolState:(n,s)=>{const o=Ax(n,s);return e().toolStates.get(o)},removeToolState:(n,s)=>{const o=Ax(n,s);t(a=>{const i=new Map(a.toolStates);return i.delete(o),{toolStates:i}})},getRunningToolsForThread:n=>{const s=e().toolStates,o=[];for(const[a,i]of s.entries())a.startsWith("".concat(n,":"))&&i.status==="running"&&o.push(i);return o}})),FPe=j(()=>I(()=>import("./f510v2yorm9a64cn.js"),__vite__mapDeps([454,1,29,30])).then(t=>t.SafeLinkWarningModal)),BPe=15e3,xU="TimeoutError",UPe="opening link failed";function Ftt(t){const e=_.useRef(new Set),n=Ue(t,me.getConversationTurns,{disablePerfDetector:!0});_.useEffect(()=>{Sn()&&N2().catch(()=>{})},[]);const s=Ue(t,o=>me.getRequestId(o));_.useEffect(()=>{if(!Sn()||!n.length)return;n.flatMap(a=>a.messages).filter(a=>{var i;return!!a.recipient&&bp(a.recipient)&&(a.status==="in_progress"||a.status==="finished_successfully")&&!e.current.has(a.id)&&((i=a.clientMetadata)==null?void 0:i.requestId)===s}).forEach(a=>{a.recipient&&bp(a.recipient)&&Gi.getState().setToolState(t,a.id,a.recipient,Zr.Running)})},[t,n,s]),_.useEffect(()=>{if(Sn())return p9(nl,{completionFinished:async()=>{const o=ft(t);if(!o)return;const a=me.getConversationTurns(o);if(!a.length)return;const i=me.getRequestId(o),l=a.flatMap(c=>c.messages).filter(c=>{var d;return!!c.recipient&&bp(c.recipient)&&c.status==="finished_successfully"&&!e.current.has(c.id)&&((d=c.clientMetadata)==null?void 0:d.requestId)===i});if(l.length!==0)for(const c of l)e.current.add(c.id),await VPe(c,t)}})},[t,s])}async function VPe(t,e){var f;const n=t.recipient;if(!n||!bp(n))return;let s;if(t.content.content_type===dt.Text?s=t.content.parts&&t.content.parts.length?t.content.parts[0]:"":t.content.content_type===dt.Code?s=t.content.text:s="",!await GPe(n,s,e)){Gi.getState().setToolState(e,t.id,n,Zr.Finished);return}if(!await WPe(n,s,e)){Gi.getState().setToolState(e,t.id,n,Zr.Finished);return}if(!await qPe(n,s,e)){Gi.getState().setToolState(e,t.id,n,Zr.Finished);return}if(n===Nee){Gi.getState().setToolState(e,t.id,n,Zr.Finished);return}const l=()=>{Gi.getState().setToolState(e,t.id,n,Zr.Error)},c=()=>{l(),nT(e,n,"Tool host unavailable","host_unavailable")};try{await ri}catch(p){c();return}const d=(f=Ou)==null?void 0:f.getHost();if(!d||!d.callLocalTool){c();return}let u,m;try{u=await ZPe(d.callLocalTool(n,s),BPe)}catch(p){m=p.name===xU?"timeout":"exception",l(),nT(e,n,m,m);return}Gi.getState().setToolState(e,t.id,n,Zr.Finished);for(const p of u)await yU(e,p.author,p.message)}async function yU(t,e,n){const s={id:_s(),author:{role:Ze.Tool,name:e},create_time:Date.now()/1e3,content:{content_type:dt.Text,parts:[n]},recipient:"all",status:"finished_successfully",weight:0};try{const o=Hn();await Er({conversation:ht(o,t),promptMessage:s,eventSource:"keyboard"})}catch(o){qe(t,a=>{ln.appendMessage(a,s)})}}function nT(t,e,n,s){const o={id:_s(),author:{role:Ze.Assistant,name:e},create_time:Date.now()/1e3,content:{content_type:dt.Text,parts:["Error: "+n]},status:"finished_successfully",weight:0,metadata:{local_function_error:!0,local_function_error_type:s}};qe(t,a=>{ln.appendMessage(a,o)})}function GPe(t,e,n){return t!=="kaur1br5.navigate_current_tab"?Promise.resolve(!0):aC(t,e,n,s=>{const o=HPe(s);return o?[o]:void 0})}function $Pe(t){return l2(t)&&(t.url===void 0||typeof t.url=="string")}function HPe(t){try{const e=JSON.parse(t||"{}");if($Pe(e))return e.url}catch(e){}}function WPe(t,e,n){return t!=="kaur1br5.open_tabs"?Promise.resolve(!0):aC(t,e,n,zPe)}function zPe(t){try{const e=JSON.parse(t||"{}"),n=l2(e)?e:{};if(Array.isArray(n.urls))return n.urls.filter(s=>typeof s=="string")}catch(e){}}function qPe(t,e,n){return t!=="kaur1br5.add_bookmark"?Promise.resolve(!0):aC(t,e,n,YPe)}function YPe(t){try{const e=JSON.parse(t||"{}"),n=l2(e)?e:{};if(typeof n.url=="string")return[n.url]}catch(e){}}function ZPe(t,e){return new Promise((n,s)=>{const o=setTimeout(()=>{const a=new Error("Local function invocation timed out");a.name=xU,s(a)},e);t.then(a=>{clearTimeout(o),n(a)}).catch(a=>{clearTimeout(o),s(a)})})}async function Ix(t,e,n,s){const o=await KPe(t,s);return o||await yU(e,n,UPe),o}function KPe(t,e){return new Promise(n=>{let s=!1;const o=a=>{s||(s=!0,n(a))};gt(t,FPe,{urls:e,suppressNavigation:!0,onAction:a=>o(a==="open"),onActionAborted:()=>o(!1)})})}async function aC(t,e,n,s){const o=Hn();try{const a=s(e);if(!a||a.length===0)return Ix(o,n,t,e);const i=a.filter(c=>!QPe(c));if(i.length===0)return!0;const l=await W2e(o,n,i);return l.length===0?!0:Ix(o,n,t,l.length===1?l[0]:l)}catch(a){return Ix(o,n,t,e)}}function QPe(t){try{return new URL(t).protocol.toLowerCase()==="atlas:"}catch(e){return!1}}function Btt(){const t=G(),e=vm();_.useEffect(()=>{Sn()&&e&&Xz.set(t,!1)},[t,e])}const JPe=j(()=>I(()=>import("./cffo1yt0w7ufpf9i.js"),__vite__mapDeps([455,404,29,1,30])).then(t=>t.FannyPackInitializer));function Utt(){const t=G(),{isFannyPackEnabled:e,isFannyPackInitializerEnabled:n}=yS(t);return e||!n?null:r.jsx(JPe,{})}function Vtt({clientThreadId:t,urlThreadId:e}){const n=G(),s=J(),o=at(),a=Es();return r.jsx(kd,{children:a&&t&&!!e&&r.jsx(lS,{isOpen:!0,title:r.jsx(P,{id:"HistoryGizmoItem.leaveTempChatTitle",defaultMessage:"Leave Temporary Chat?"}),description:r.jsx(P,{id:"HistoryGizmoItem.leaveTempChatDescription",defaultMessage:"Temporary Chats don't appear in your history, so you won't be able to come back to it."}),confirmText:s.formatMessage({id:"HistoryGizmoItem.leaveTempChatConfirm",defaultMessage:"Leave Temporary Chat"}),onClose:()=>{o("/")},onConfirm:()=>{gh.set(n,!1)}})})}var jx,sT;function XPe(){if(sT)return jx;sT=1;var t="Expected a function",e=NaN,n="[object Symbol]",s=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof yf=="object"&&yf&&yf.Object===Object&&yf,d=typeof self=="object"&&self&&self.Object===Object&&self,u=c||d||Function("return this")(),m=Object.prototype,f=m.toString,p=Math.max,g=Math.min,h=function(){return u.Date.now()};function x(C,k,M){var T,E,A,N,R,O,D=0,F=!1,V=!1,z=!0;if(typeof C!="function")throw new TypeError(t);k=S(k)||0,y(M)&&(F=!!M.leading,V="maxWait"in M,A=V?p(S(M.maxWait)||0,k):A,z="trailing"in M?!!M.trailing:z);function $(ie){var ae=T,ce=E;return T=E=void 0,D=ie,N=C.apply(ce,ae),N}function Y(ie){return D=ie,R=setTimeout(q,k),F?$(ie):N}function Z(ie){var ae=ie-O,ce=ie-D,ye=k-ae;return V?g(ye,A-ce):ye}function Q(ie){var ae=ie-O,ce=ie-D;return O===void 0||ae>=k||ae<0||V&&ce>=A}function q(){var ie=h();if(Q(ie))return X(ie);R=setTimeout(q,Z(ie))}function X(ie){return R=void 0,z&&T?$(ie):(T=E=void 0,N)}function oe(){R!==void 0&&clearTimeout(R),D=0,T=O=E=R=void 0}function se(){return R===void 0?N:X(h())}function de(){var ie=h(),ae=Q(ie);if(T=arguments,E=this,O=ie,ae){if(R===void 0)return Y(O);if(V)return R=setTimeout(q,k),$(O)}return R===void 0&&(R=setTimeout(q,k)),N}return de.cancel=oe,de.flush=se,de}function y(C){var k=typeof C;return!!C&&(k=="object"||k=="function")}function b(C){return!!C&&typeof C=="object"}function v(C){return typeof C=="symbol"||b(C)&&f.call(C)==n}function S(C){if(typeof C=="number")return C;if(v(C))return e;if(y(C)){var k=typeof C.valueOf=="function"?C.valueOf():C;C=y(k)?k+"":k}if(typeof C!="string")return C===0?C:+C;C=C.replace(s,"");var M=a.test(C);return M||i.test(C)?l(C.slice(2),M?2:8):o.test(C)?e:+C}return jx=x,jx}var e8e=XPe();const oT=Wn(e8e);var rC=typeof window<"u"?_.useLayoutEffect:_.useEffect;function t8e(t,e,n,s){const o=_.useRef(e);rC(()=>{o.current=e},[e]),_.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{o.current(l)};return a.addEventListener(t,i,s),()=>{a.removeEventListener(t,i,s)}},[t,n,s])}var n8e=typeof window>"u";function s8e(t,{defaultValue:e=!1,initializeWithValue:n=!0}={}){const s=l=>n8e?e:window.matchMedia(l).matches,[o,a]=_.useState(()=>n?s(t):e);function i(){a(s(t))}return rC(()=>{const l=window.matchMedia(t);return i(),l.addListener?l.addListener(i):l.addEventListener("change",i),()=>{l.removeListener?l.removeListener(i):l.removeEventListener("change",i)}},[t]),o}function o8e(t){const e=_.useRef(t);e.current=t,_.useEffect(()=>()=>{e.current()},[])}function a8e(t,e=500,n){const s=_.useRef();o8e(()=>{s.current&&s.current.cancel()});const o=_.useMemo(()=>{const a=oT(t,e,n),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!s.current,i.flush=()=>a.flush(),i},[t,e,n]);return _.useEffect(()=>{s.current=oT(t,e,n)},[t,e,n]),o}function Gtt({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:s=!1,initialIsIntersecting:o=!1,onChange:a}={}){var i;const[l,c]=_.useState(null),[d,u]=_.useState(()=>({isIntersecting:o,entry:void 0})),m=_.useRef();m.current=a;const f=((i=d.entry)==null?void 0:i.isIntersecting)&&s;_.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||f)return;const h=new IntersectionObserver(x=>{const y=Array.isArray(h.thresholds)?h.thresholds:[h.thresholds];x.forEach(b=>{const v=b.isIntersecting&&y.some(S=>b.intersectionRatio>=S);u({isIntersecting:v,entry:b}),m.current&&m.current(v,b)})},{threshold:t,root:e,rootMargin:n});return h.observe(l),()=>{h.disconnect()}},[l,JSON.stringify(t),e,n,f,s]);const p=_.useRef(null);_.useEffect(()=>{var h;!l&&((h=d.entry)!=null&&h.target)&&!s&&!f&&p.current!==d.entry.target&&(p.current=d.entry.target,u({isIntersecting:o,entry:void 0}))},[l,d.entry,s,f,o]);const g=[c,!!d.isIntersecting,d.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function r8e(){const t=_.useRef(!1);return _.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),_.useCallback(()=>t.current,[])}var aT={width:void 0,height:void 0};function $tt(t){const{ref:e,box:n="content-box"}=t,[{width:s,height:o},a]=_.useState(aT),i=r8e(),l=_.useRef(w({},aT)),c=_.useRef(void 0);return c.current=t.onResize,_.useEffect(()=>{if(!e.current||typeof window>"u"||!("ResizeObserver"in window))return;const d=new ResizeObserver(([u])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",f=rT(u,m,"inlineSize"),p=rT(u,m,"blockSize");if(l.current.width!==f||l.current.height!==p){const h={width:f,height:p};l.current.width=f,l.current.height=p,c.current?c.current(h):i()&&a(h)}});return d.observe(e.current,{box:n}),()=>{d.disconnect()}},[n,e,i]),{width:s,height:o}}function rT(t,e,n){return t[e]?Array.isArray(t[e])?t[e][0][n]:t[e][n]:e==="contentBoxSize"?t.contentRect[n==="inlineSize"?"width":"height"]:void 0}var i8e=typeof window>"u";function Htt(t={}){let{initializeWithValue:e=!0}=t;i8e&&(e=!1);const[n,s]=_.useState(()=>e?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),o=a8e(s,t.debounceDelay);function a(){(t.debounceDelay?o:s)({width:window.innerWidth,height:window.innerHeight})}return t8e("resize",a),rC(()=>{a()},[]),n}const l8e=t=>_.createElement("svg",w({viewBox:"0 0 468 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("style",null,"\n  .path1 { fill: var(--bg-primary, currentColor); }\n  .path2 { fill: var(--tab-color, rgba(0,0,0,1)); }\n"),_.createElement("g",{clipPath:"url(#clip0_3_20)"},_.createElement("mask",{id:"path-1-outside-1_3_20",maskUnits:"userSpaceOnUse",x:-1,y:7.19714,width:777,height:50,fill:"black"},_.createElement("rect",{fill:"currentColor",x:-1,y:7.19714,width:777,height:50}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z"})),_.createElement("path",{className:"path1",fillRule:"evenodd",clipRule:"evenodd",d:"M33.738 17.1748C33.738 14.0323 33.738 12.4611 34.3496 11.2608C34.8875 10.205 35.7459 9.34666 36.8017 8.80871C38.002 8.19714 39.5732 8.19714 42.7157 8.19714H123.515C126.657 8.19714 128.228 8.19714 129.429 8.80871C130.484 9.34666 131.343 10.205 131.881 11.2608C132.492 12.4611 132.492 14.0323 132.492 17.1748V26.2161C132.526 28.6659 134.523 30.6417 136.981 30.6417H132.492V30.6413H33.7385V30.6417H29.2492C31.7073 30.6417 33.7044 28.6654 33.738 26.2153V17.1748ZM774.322 30.6421H0V55.3306H774.322V30.6421Z",fill:"currentColor"}),_.createElement("path",{className:"path2",d:"M34.3496 11.2608L33.4586 10.8068L33.4586 10.8068L34.3496 11.2608ZM36.8017 8.80871L37.2557 9.69972L37.2557 9.69972L36.8017 8.80871ZM129.429 8.80871L129.883 7.9177L129.883 7.9177L129.429 8.80871ZM131.881 11.2608L130.99 11.7148L130.99 11.7148L131.881 11.2608ZM132.492 26.2161H131.492L131.492 26.23L132.492 26.2161ZM132.492 30.6417H131.492V31.6417H132.492V30.6417ZM132.492 30.6413H133.492V29.6413H132.492V30.6413ZM33.7385 30.6413V29.6413H32.7385V30.6413H33.7385ZM33.7385 30.6417V31.6417H34.7385V30.6417H33.7385ZM33.738 26.2153L34.738 26.229V26.2153H33.738ZM0 30.6421V29.6421H-1V30.6421H0ZM774.322 30.6421H775.322V29.6421H774.322V30.6421ZM0 55.3306H-1V56.3306H0V55.3306ZM774.322 55.3306V56.3306H775.322V55.3306H774.322ZM34.3496 11.2608L33.4586 10.8068C33.069 11.5714 32.8993 12.4106 32.8178 13.408C32.7372 14.3939 32.738 15.6201 32.738 17.1748H33.738H34.738C34.738 15.5871 34.7388 14.4564 34.8111 13.5709C34.8825 12.6971 35.0186 12.1505 35.2406 11.7148L34.3496 11.2608ZM36.8017 8.80871L36.3477 7.9177C35.1038 8.55152 34.0924 9.56288 33.4586 10.8068L34.3496 11.2608L35.2406 11.7148C35.6827 10.8472 36.3881 10.1418 37.2557 9.69972L36.8017 8.80871ZM42.7157 8.19714V7.19714C41.1609 7.19714 39.9347 7.19637 38.9489 7.27691C37.9514 7.35841 37.1123 7.52812 36.3477 7.9177L36.8017 8.80871L37.2557 9.69972C37.6914 9.47773 38.238 9.34166 39.1118 9.27027C39.9973 9.19792 41.1279 9.19714 42.7157 9.19714V8.19714ZM123.515 8.19714V7.19714H42.7157V8.19714V9.19714H123.515V8.19714ZM129.429 8.80871L129.883 7.9177C129.118 7.52812 128.279 7.35841 127.281 7.27691C126.295 7.19637 125.069 7.19714 123.515 7.19714V8.19714V9.19714C125.102 9.19714 126.233 9.19792 127.118 9.27027C127.992 9.34166 128.539 9.47773 128.975 9.69972L129.429 8.80871ZM131.881 11.2608L132.772 10.8068C132.138 9.56289 131.126 8.55153 129.883 7.9177L129.429 8.80871L128.975 9.69972C129.842 10.1418 130.548 10.8472 130.99 11.7148L131.881 11.2608ZM132.492 17.1748H133.492C133.492 15.6201 133.493 14.3939 133.412 13.408C133.331 12.4106 133.161 11.5714 132.772 10.8068L131.881 11.2608L130.99 11.7148C131.212 12.1505 131.348 12.6971 131.419 13.5709C131.491 14.4564 131.492 15.5871 131.492 17.1748H132.492ZM132.492 26.2161H133.492V17.1748H132.492H131.492V26.2161H132.492ZM136.981 30.6417V29.6417C135.071 29.6417 133.519 28.1059 133.492 26.2022L132.492 26.2161L131.492 26.23C131.534 29.2258 133.976 31.6417 136.981 31.6417V30.6417ZM132.492 30.6417V31.6417H136.981V30.6417V29.6417H132.492V30.6417ZM132.492 30.6413H131.492V30.6417H132.492H133.492V30.6413H132.492ZM33.7385 30.6413V31.6413H132.492V30.6413V29.6413H33.7385V30.6413ZM33.7385 30.6417H34.7385V30.6413H33.7385H32.7385V30.6417H33.7385ZM29.2492 30.6417V31.6417H33.7385V30.6417V29.6417H29.2492V30.6417ZM33.738 26.2153L32.7381 26.2016C32.712 28.1056 31.1596 29.6417 29.2492 29.6417V30.6417V31.6417C32.255 31.6417 34.6968 29.2253 34.7379 26.229L33.738 26.2153ZM33.738 17.1748H32.738V26.2153H33.738H34.738V17.1748H33.738ZM0 30.6421V31.6421H774.322V30.6421V29.6421H0V30.6421ZM0 55.3306H1V30.6421H0H-1V55.3306H0ZM774.322 55.3306V54.3306H0V55.3306V56.3306H774.322V55.3306ZM774.322 30.6421H773.322V55.3306H774.322H775.322V30.6421H774.322Z",mask:"url(#path-1-outside-1_3_20)"})),_.createElement("defs",null,_.createElement("clipPath",{id:"clip0_3_20"},_.createElement("rect",{width:468,height:55.3307,fill:"currentColor"})))),c8e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),vU="https://persistent.oaistatic.com/sandwich/26e83b2ac5b9e29e1.webp",bU="https://persistent.oaistatic.com/sandwich/2cf24dba5fb0a30e.webp",d8e="https://persistent.oaistatic.com/atlas/public/ChatGPT_Atlas.dmg";function u8e(){lF(),U.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Download Clicked","chatgpt_web_aura_announcement_banner_download_clicked"),Ee.count(Ae.ATLAS,"chatgpt_web_aura_announcement_banner_download_clicked")}const Uv=468,Vv=520,Wtt=t=>{"use forget";const e=H.c(11),{shouldShowDisclaimer:n,clientThreadId:s}=t,o=G(),[a,i]=_.useState(!1);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{i(!0),lF(),U.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Dismissed","chatgpt_web_aura_announcement_banner_dismissed"),Ee.count(Ae.ATLAS,"chatgpt_web_aura_announcement_banner_dismissed")},e[0]=l):l=e[0];const c=l,{data:d,isLoading:u}=wo(en.BrowserReferenceWebHistoryInChat),m=d!==void 0;let f;e[1]!==o?(f=A3(o),e[1]=o,e[2]=f):f=e[2];const{setAuraAnnouncementBannerState:p}=f;let g,h;if(e[3]!==m||e[4]!==u||e[5]!==p?(g=()=>{u||p(m?"not-shown":"shown")},h=[m,u,p],e[3]=m,e[4]=u,e[5]=p,e[6]=g,e[7]=h):(g=e[6],h=e[7]),_.useEffect(g,h),s8e("(max-height: 660px)")||a||m||u)return null;let y;return e[8]!==s||e[9]!==n?(y=r.jsx(m8e,{shouldShowDisclaimer:n,onDismiss:c,clientThreadId:s,className:"fixed"}),e[8]=s,e[9]=n,e[10]=y):y=e[10],y};function m8e(t){"use forget";const e=H.c(31),{shouldShowDisclaimer:n,onDismiss:s,className:o,clientThreadId:a}=t,i=ue(L9),l=ue(g8e),[c,d]=_.useState(0);let u,m;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const F=new Image;F.src=vU,F.onload=()=>d(p8e)},m=[],e[0]=u,e[1]=m):(u=e[0],m=e[1]),_.useEffect(u,m);let f,p;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{const F=new Image;F.src=bU,F.onload=()=>d(f8e)},p=[],e[2]=f,e[3]=p):(f=e[2],p=e[3]),_.useEffect(f,p);const g=c>=2;let h,x;if(e[4]!==g?(h=()=>{g&&(U.logEventWithStatsig("ChatGPT Web Aura Announcement Banner Shown","chatgpt_web_aura_announcement_banner_shown"),Ee.count(Ae.ATLAS,"chatgpt_aura_announcement_banner_shown"),iMe())},x=[g],e[4]=g,e[5]=h,e[6]=x):(h=e[5],x=e[6]),_.useEffect(h,x),!g)return null;let y,b,v;e[7]===Symbol.for("react.memo_cache_sentinel")?(y={opacity:0,y:"100%"},b={opacity:1,y:0},v={opacity:0,y:"100%"},e[7]=y,e[8]=b,e[9]=v):(y=e[7],b=e[8],v=e[9]);const S=i?0:.75;let C;e[10]!==i?(C=i?void 0:[.33,0,.05,1],e[10]=i,e[11]=C):C=e[11];let k;e[12]!==S||e[13]!==C?(k={duration:S,ease:C},e[12]=S,e[13]=C,e[14]=k):k=e[14];const M=k;let T;e[15]!==o?(T=W("pointer-events-none start-1/2 bottom-0 z-[70] -translate-x-1/2",o),e[15]=o,e[16]=T):T=e[16];const E=l?Vv:Uv;let A;e[17]!==E?(A={minWidth:E},e[17]=E,e[18]=A):A=e[18];let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(_8e,{className:"col-span-full row-span-full justify-self-center"}),e[19]=N):N=e[19];let R;e[20]!==s?(R=r.jsxs("div",{className:"grid w-full grid-cols-1 grid-rows-1 overflow-hidden",children:[N,r.jsx(h8e,{onDismiss:s,className:"col-span-full row-span-full self-end justify-self-center"})]}),e[20]=s,e[21]=R):R=e[21];let O;e[22]!==a||e[23]!==n?(O=n&&r.jsx("div",{className:W("text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center text-center text-xs whitespace-nowrap [view-transition-name:var(--vt-disclaimer)] md:px-[60px]"),children:r.jsx(U5e,{clientThreadId:a})}),e[22]=a,e[23]=n,e[24]=O):O=e[24];let D;return e[25]!==M||e[26]!==T||e[27]!==A||e[28]!==R||e[29]!==O?(D=r.jsx(dn,{children:r.jsxs(Xe.div,{initial:y,animate:b,exit:v,transition:M,className:T,style:A,children:[R,O]})}),e[25]=M,e[26]=T,e[27]=A,e[28]=R,e[29]=O,e[30]=D):D=e[30],D}function f8e(t){return t+1}function p8e(t){return t+1}function g8e(){return Uh()}const h8e=t=>{"use forget";const e=H.c(25),{onDismiss:n,className:s}=t,o=Zo(),a=J(),i=ue(v8e);let l;e[0]!==s?(l=W("border-token-border-heavy grid grid-cols-1 grid-rows-[auto_1fr_24px]","bg-token-bg-primary/60","rounded-ss-xl rounded-se-xl border","[mask-image:linear-gradient(to_bottom,black_80%,transparent_100%)]","[mask-size:100%_100%] [mask-repeat:no-repeat]","pointer-events-auto relative z-10",s),e[0]=s,e[1]=l):l=e[1];const c=i?Vv:Uv;let d;e[2]!==c?(d={boxShadow:"0px 4.1px 24px rgba(0, 0, 0, 0.08)",width:c},e[2]=c,e[3]=d):d=e[3];const u=o?"white":"var(--border-heavy)",m=i?Vv-2:Uv-2;let f;e[4]!==u||e[5]!==m?(f=r.jsx(l8e,{"aria-hidden":"true",className:"pointer-events-none col-span-full col-start-1 row-span-1 row-start-1 w-full text-[var(--bg-primary)]",style:{"--tab-color":u,width:m}}),e[4]=u,e[5]=m,e[6]=f):f=e[6];let p;e[7]!==s?(p=W("text-token-text-tertiary hover:text-token-text-secondary flex h-9 w-9 cursor-pointer items-center justify-center bg-transparent",s),e[7]=s,e[8]=p):p=e[8];let g;e[9]!==a?(g=a.formatMessage(_t.close),e[9]=a,e[10]=g):g=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(c8e,{className:"icon-sm"}),e[11]=h):h=e[11];let x;e[12]!==n||e[13]!==p||e[14]!==g?(x=r.jsx("div",{className:"absolute end-0 top-0",children:r.jsx("button",{"data-testid":"close-button",onClick:n,className:p,"aria-label":g,children:h})}),e[12]=n,e[13]=p,e[14]=g,e[15]=x):x=e[15];let y;e[16]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("div",{className:"bg-token-bg-primary col-span-full col-start-1 row-span-2 row-start-2 -mt-1"}),e[16]=y):y=e[16];let b;e[17]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(x8e,{}),e[17]=b):b=e[17];let v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=r.jsx("h2",{className:"text-token-text-primary text-sm font-medium",children:r.jsx(P,w({},Px.atlasBannerTitleVariantOne))}),e[18]=v):v=e[18];let S;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsxs("div",{className:"col-span-full col-start-1 row-start-2 -mt-2 flex flex-1 items-center gap-5 px-5 pb-5",children:[b,r.jsxs("div",{className:"flex max-w-[340px] flex-col gap-0.5",children:[v,r.jsx("p",{className:"text-token-text-secondary text-xs",children:r.jsx(P,w({},Px.atlasBannerBodyVariantOne))})]}),r.jsx(y8e,{ctaLabel:Px.atlasBannerCtaVariantOne.defaultMessage})]}),e[19]=S):S=e[19];let C;return e[20]!==l||e[21]!==x||e[22]!==d||e[23]!==f?(C=r.jsxs("div",{className:l,style:d,children:[f,x,y,S]}),e[20]=l,e[21]=x,e[22]=d,e[23]=f,e[24]=C):C=e[24],C};function _8e(t){"use forget";const e=H.c(4),{className:n}=t;let s;e[0]!==n?(s=W("pointer-events-none z-0 aspect-[752/244] h-[244px] opacity-50",n),e[0]=n,e[1]=s):s=e[1];let o;return e[2]!==s?(o=r.jsx("img",{alt:"","aria-hidden":"true",src:bU,className:s}),e[2]=s,e[3]=o):o=e[3],o}function x8e(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("img",{alt:"","aria-hidden":"true",src:vU,className:"pointer-events-none size-10 self-start"}),t[0]=e):e=t[0],e}function y8e(t){"use forget";const e=H.c(2),{ctaLabel:n}=t;let s;return e[0]!==n?(s=r.jsx("a",{href:d8e,onClick:u8e,className:"btn btn-secondary min-h-9 rounded-full px-3 text-sm",children:n}),e[0]=n,e[1]=s):s=e[1],s}const Px=be({atlasBannerTitleVariantOne:{id:"Zr7mYe",defaultMessage:"Try Atlas - ChatGPTs new browser"},atlasBannerBodyVariantOne:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantTwo:{id:"TMWFFD",defaultMessage:"Try Atlas - a browser powered by ChatGPT"},atlasBannerBodyVariantTwo:{id:"jYcAxk",defaultMessage:"Bring ChatGPT with you across the web for instant answers, smarter suggestions, and help with tasks."},atlasBannerTitleVariantThree:{id:"D5LkgH",defaultMessage:"ChatGPT Atlas - a smarter web browser"},atlasBannerBodyVariantThree:{id:"iwqNw3",defaultMessage:"Take ChatGPT with you across the web for instant answers, smarter suggestions, and your own personal agent."},atlasBannerCtaVariantOne:{id:"IupvSa",defaultMessage:"Download"},atlasBannerCtaVariantTwo:{id:"58Al3e",defaultMessage:"Try now"}});function v8e(){return Uh()}function ztt(){const t=G(),e=cs(t),n=ue(it.wantsAttachUserFile$),s=J(),o=Ut(),a=Ci();_.useEffect(()=>{if(!e||!n)return;it.wantsAttachUserFile$.set(!1);const i=it.attachUserFileRequest;if(it.attachUserFileRequest=void 0,!!i)try{const l=new Uint8Array(i.bytes),c=new File([l],i.name,{type:i.mimeType}),d=ol(c),u=(c.type||i.mimeType).startsWith("image/"),m=u?vo.Multimodal:vo.Retrieval;ar.uploadFile(a,d,c,m,u?[i.mimeType]:[],s,o)}catch(l){Gs.error("failed to attach file",{error:l})}},[e,n,s,o,a])}function qtt(){const t=Sn(),e=vn(un);_.useEffect(()=>{if(!t||!e)return;const n=a=>{var m,f;const i=a.target;if(!i)return;const l=i.closest("a");if(!l||l.closest("[data-desktop-skip-link-handler]"))return;const c=l.getAttribute("href");if(!c)return;const d=(m=l.getAttribute("target"))!=null?m:"",u=$C(c,document.baseURI);u&&(eq(a)||(a.preventDefault(),(f=HC())==null||f.handleLink(u.href,d)))};document.addEventListener("click",n,{capture:!0});const s=window.open,o=(a,i,l)=>{var u;const c=typeof a=="string"?a:a==null?void 0:a.toString();if(!c)return s.call(window,a,i,l);const d=$C(c,document.baseURI);return d?((u=HC())==null||u.handleLink(d.href,i!=null?i:""),null):s.call(window,a,i,l)};return window.open=o,()=>{document.removeEventListener("click",n,{capture:!0}),window.open=s}},[t,e])}function b8e(t){return t.width!==void 0&&t.height!==void 0}function S8e(t,e){var i;const n=(i=e==null?void 0:e.filter(b8e))!=null?i:[];if(n.length===0)return{content_type:dt.Text,parts:[t]};const s=n.map(l=>{var c,d;return{content_type:Sa.ImageAssetPointer,asset_pointer:fy((c=l.id)!=null?c:""),size_bytes:(d=l.size)!=null?d:0,width:l.width,height:l.height}}),o=t,a=[...s,o];return{content_type:dt.MultimodalText,parts:a}}function Ytt(t,e){"use forget";const n=H.c(21),s=G();let o;n[0]!==s?(o=()=>[cs(s),un(s)],n[0]=s,n[1]=o):o=n[1];const[a,i]=ue(o),l=ue(it.wantsRequestCompletion$),c=ue(it.sidebarUrlTrayOpen$);let d;n[2]!==s?(d=Fh(s),n[2]=s,n[3]=d):d=n[3];const u=d;let m;n[4]!==u||n[5]!==t||n[6]!==s||n[7]!==a||n[8]!==e||n[9]!==c||n[10]!==l?(m=()=>{if(!a||!l)return;it.wantsRequestCompletion$.set(!1);const p=it.requestCompletion;if(!p)return;const g=QS({namespace:sf.CompletionRequest,opts:{debug:!1}});g.reset();const h=function(S){S&&bd(ht(s,t),S)},x=function(S){if(!S)return;const{prepareState:C,lastPrepareTimestamp:k,conduitToken:M}=S;qe(t,T=>{T.prepareState=C,T.lastPrepareTimestamp=k,T.conduitToken=M!=null?M:null})},y=async function(S,C,k,M,T){var $,Y,Z,Q;const E=($=it.tabContext)==null?void 0:$[0],A=c&&u,N=S8e(S,it.attachments),R=w(w(w(w({},C.length>0&&{system_hints:C}),((Y=it.attachments)==null?void 0:Y.length)&&{attachments:it.attachments}),await Lh(A?E:void 0,(Z=it.promptOrigin)!=null?Z:"unknown","user",C)),M!==void 0&&{n7jupd_local_safe_mode:M}),O=us(N,R),D=A?await tq(E,(Q=it.promptOrigin)!=null?Q:"unknown",C,t):void 0,F={kind:Tt.PrimaryAssistant},V=w({conversationMode:F},C.length>0&&{systemHints:C});return{promptMessage:O,prependMessages:D&&D.length>0?D:void 0,requestedModelId:k!==""?k:void 0,completionMetadata:V,eventSource:"url",conduitToken:T}},b=function(){it.requestCompletion=void 0,it.attachments=void 0,it.prepareConversationDetails=void 0,it.whisperContent=void 0,it.tabContext=void 0,it.promptOrigin=void 0};h(p.modelSlug),x(it.prepareConversationDetails),(async()=>{var S;const v=await y(p.prompt,p.systemHints,p.modelSlug,p.n7jupdLocalSafeMode,(S=it.prepareConversationDetails)==null?void 0:S.conduitToken);v.profiler=g,b(),e(v)})()},n[4]=u,n[5]=t,n[6]=s,n[7]=a,n[8]=e,n[9]=c,n[10]=l,n[11]=m):m=n[11];let f;n[12]!==u||n[13]!==t||n[14]!==s||n[15]!==a||n[16]!==i||n[17]!==e||n[18]!==c||n[19]!==l?(f=[s,a,l,t,e,c,u,i],n[12]=u,n[13]=t,n[14]=s,n[15]=a,n[16]=i,n[17]=e,n[18]=c,n[19]=l,n[20]=f):f=n[20],_.useEffect(m,f)}function Ztt(t){"use forget";const e=H.c(31),n=G();let s;e[0]!==n?(s=cs(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=ls(),i=at(),l=ue(t.serverId$),c=xt(),d=ue(it.wantsModelSlug$),u=ue(it.selectedConversationId$),m=ue(it.wantsNewConversation$),f=ue(it.newConversationGizmoId$),p=pP();let g;e[2]!==a.pathname||e[3]!==i?(g=T=>{Ti(i,{replace:a.pathname==="/",config:T})},e[2]=a.pathname,e[3]=i,e[4]=g):g=e[4];const h=ya(g);let x,y;e[5]!==o||e[6]!==f||e[7]!==h||e[8]!==m?(x=()=>{if(!o||!m)return;it.wantsNewConversation$.set(!1),h(f?{urlGizmoId:f}:void 0)},y=[o,m,f,h],e[5]=o,e[6]=f,e[7]=h,e[8]=m,e[9]=x,e[10]=y):(x=e[9],y=e[10]),_.useEffect(x,y);let b;e[11]!==o||e[12]!==p?(b=()=>{!o||!p||it.selectedConversationId$.set(void 0)},e[11]=o,e[12]=p,e[13]=b):b=e[13];let v;e[14]!==o||e[15]!==p||e[16]!==h?(v=[o,p,h],e[14]=o,e[15]=p,e[16]=h,e[17]=v):v=e[17],_.useEffect(b,v);let S,C;e[18]!==o||e[19]!==i||e[20]!==c||e[21]!==u||e[22]!==l?(S=()=>{o&&u&&u!==l&&M2(i,c,u)},C=[o,u,i,c,l],e[18]=o,e[19]=i,e[20]=c,e[21]=u,e[22]=l,e[23]=S,e[24]=C):(S=e[23],C=e[24]),_.useEffect(S,C);let k,M;e[25]!==t||e[26]!==n||e[27]!==o||e[28]!==d?(k=()=>{if(!o||!d)return;it.wantsModelSlug$.set(void 0),xe(n,"1333611684")||jb(n,d),bd(t,d)},M=[o,d,t,n],e[25]=t,e[26]=n,e[27]=o,e[28]=d,e[29]=k,e[30]=M):(k=e[29],M=e[30]),_.useEffect(k,M)}const C8e=Qe("contentOnly"),SU=Qe(void 0),w8e=24;function k8e({className:t}){return r.jsx("div",{className:W("pointer-events-none fixed inset-x-0 z-21","border-b-thin hires:top-[calc(var(--header-height)-.5px)] top-[calc(var(--header-height)-1px)] border-(--bento-border-color)",t)})}function Ktt(){const t=ue(()=>C8e());return t==="none"?null:r.jsxs(r.Fragment,{children:[r.jsx(k8e,{}),r.jsx("div",{className:W($R("bento"),HR,"pointer-events-none fixed inset-y-0 start-1/2 z-99 -translate-x-1/2 border-s border-e border-(--bento-border-color)","hires:[border-inline-width:0.5px] [border-inline-width:1px]",t==="contentOnly"&&"mt-(--header-height)"),style:{width:"min(100vw, calc(min(var(--thread-content-max-width), 100cqw - (var(--thread-content-margin) * 2)) + ".concat(2*w8e,"px))")}})]})}function M8e(t){"use forget";var A;const e=H.c(32),{action:n,ChatsIcon:s,FileBlankIcon:o,hintIcons:a,onItemClick:i,starter:l,index:c,hint:d}=t;let u,m,f,p=!1;e:switch(n.action_type){case"chat":{u=n.title,m=n.message,f=(A=n.system_hint)!=null?A:void 0,p=f==="agent";break e}case"navigation":u=n.title,m=n.subtitle||n.url}let g;e[0]!==s||e[1]!==a?(g=function(R){"use forget";const{hint:O}=R;if(O){const D=a==null?void 0:a[O];if(D){const F=D;return r.jsx(F,{className:"block h-4 w-4 text-token-text-primary","aria-hidden":!0})}}return r.jsx(s,{className:"block h-4 w-4 text-token-text-primary"})},e[0]=s,e[1]=a,e[2]=g):g=e[2];const h=g;if(!u)return null;let x;e[3]!==d||e[4]!==c||e[5]!==i||e[6]!==l?(x=N=>i(N,l,c,d),e[3]=d,e[4]=c,e[5]=i,e[6]=l,e[7]=x):x=e[7];let y;e[8]!==h||e[9]!==o||e[10]!==n.action_type||e[11]!==n.system_hint?(y=r.jsx("div",{className:"mt-[2px] shrink-0 self-start","aria-hidden":!0,children:n.action_type==="chat"?r.jsx(h,{hint:n.system_hint}):r.jsx(o,{className:"text-token-text-primary block h-4 w-4"})}),e[8]=h,e[9]=o,e[10]=n.action_type,e[11]=n.system_hint,e[12]=y):y=e[12];let b;e[13]===Symbol.for("react.memo_cache_sentinel")?(b=W("min-w-0 flex-1 overflow-hidden [mask-image:linear-gradient(to_right,black_85%,transparent_100%)] [-webkit-mask-image:linear-gradient(to_right,black_85%,transparent_100%)]"),e[13]=b):b=e[13];let v;e[14]!==u?(v=r.jsx("div",{className:"text-token-text-primary text-sm leading-5 whitespace-nowrap",children:u}),e[14]=u,e[15]=v):v=e[15];let S;e[16]!==p?(S=p&&r.jsx("span",{className:"ms-1 inline-flex shrink-0 items-center rounded-full px-1.5 py-px text-xs",style:{color:"var(--colors-fills-accented-fill-a-prominent, #007AFD)",background:"var(--colors-fills-accented-fill-a-subtle, rgba(0, 122, 253, 0.10))"},children:r.jsx(P,{id:"4ufBv1",defaultMessage:"NEW"})}),e[16]=p,e[17]=S):S=e[17];let C;e[18]!==v||e[19]!==S?(C=r.jsxs("div",{className:"flex items-center gap-2",children:[v,S]}),e[18]=v,e[19]=S,e[20]=C):C=e[20];let k;e[21]!==m?(k=m?r.jsx("div",{className:"text-token-text-secondary mt-1 text-sm whitespace-nowrap",children:m}):null,e[21]=m,e[22]=k):k=e[22];let M;e[23]!==C||e[24]!==k?(M=r.jsx("div",{className:"min-w-0 flex-1",children:r.jsx("div",{className:"flex min-w-0 items-start gap-2",children:r.jsxs("div",{className:b,children:[C,k]})})}),e[23]=C,e[24]=k,e[25]=M):M=e[25];let T;e[26]!==y||e[27]!==M?(T=r.jsxs("div",{className:"flex items-start gap-2 overflow-hidden",children:[y,M]}),e[26]=y,e[27]=M,e[28]=T):T=e[28];let E;return e[29]!==T||e[30]!==x?(E=r.jsx("li",{className:"w-full",children:r.jsx("button",{type:"button",onClick:x,className:"relative w-full rounded-xl py-3 ps-3.5 pe-3 text-start transition-colors hover:bg-black/5 dark:hover:bg-white/5",children:T})}),e[29]=T,e[30]=x,e[31]=E):E=e[31],E}const CU={agent:()=>I(()=>import("./hso6u8eab07t04qb.js").then(t=>t._),__vite__mapDeps([42,1])),tatertot:()=>I(()=>Promise.resolve().then(()=>H1),void 0),search:()=>I(()=>Promise.resolve().then(()=>Pr),void 0),picture_v2:()=>I(()=>Promise.resolve().then(()=>$l),void 0),reason:()=>I(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([41,1])),canvas:()=>I(()=>import("./pdp94tw1ktf1pj0a.js").then(t=>t._),__vite__mapDeps([40,1])),research:()=>I(()=>import("./nrby27vmpob112wj.js").then(t=>t._),__vite__mapDeps([38,1]))},T8e=Promise.all([I(()=>import("./mpv78j7w75btco0v.js").then(t=>t._),__vite__mapDeps([46,1])),I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1]))]).then(([t,e])=>({ChatsIcon:t.default,FileBlankIcon:e.default})),Au=new Map,Nx=new Map;function E8e(t){var n;const e=new Set;for(const s of t){if(s.action_type!=="chat")continue;const o=(n=s.system_hint)!=null?n:void 0;o&&(Au.has(o)||CU[o]&&e.add(o))}return Array.from(e)}async function A8e(t){if(t.length===0)return{};await Promise.all(t.map(n=>{if(Au.has(n))return Promise.resolve();const s=CU[n];if(!s)return Promise.resolve();let o=Nx.get(n);return o||(o=s().then(a=>{Au.set(n,a.default)}).catch(()=>{Au.delete(n)}).finally(()=>{Nx.delete(n)}),Nx.set(n,o)),o}));const e=t.map(n=>{const s=Au.get(n);return s?[n,s]:null}).filter(Boolean);return Object.fromEntries(e)}function I8e(t,e){const[n,s]=_.useState(null),[o,a]=_.useState({}),[i,l]=_.useState(t),[c,d]=_.useState(e);return _.useEffect(()=>{const u=E8e(t);if(n&&u.length===0){l(t),d(e);return}let m=!1;async function f(){const[p,g]=await Promise.all([n?Promise.resolve(n):T8e,A8e(u)]);m||(s(p),Object.keys(g).length>0&&a(h=>w(w({},h),g)),l(t),d(e))}return f(),()=>{m=!0}},[n,t,e]),{icons:n,hintIcons:o,items:i,suggestions:c}}function j8e(t){"use forget";const e=H.c(13),{items:n,suggestions:s,onItemClick:o}=t,{icons:a,hintIcons:i,items:l,suggestions:c}=I8e(n,s);if(!a)return null;let d;if(e[0]!==i||e[1]!==a||e[2]!==o||e[3]!==l||e[4]!==c){let m;e[6]!==i||e[7]!==a||e[8]!==o||e[9]!==c?(m=(f,p)=>{var x,y;const g=c[p];if(!g)return null;const h=f.action_type==="chat"&&(x=f.system_hint)!=null?x:null;return r.jsx(M8e,{action:f,ChatsIcon:a.ChatsIcon,FileBlankIcon:a.FileBlankIcon,hintIcons:i,onItemClick:o,starter:g,index:p,hint:h},(y=f.id)!=null?y:f.title)},e[6]=i,e[7]=a,e[8]=o,e[9]=c,e[10]=m):m=e[10],d=l.map(m),e[0]=i,e[1]=a,e[2]=o,e[3]=l,e[4]=c,e[5]=d}else d=e[5];let u;return e[11]!==d?(u=r.jsx("ul",{className:"flex w-full flex-col gap-2",children:d}),e[11]=d,e[12]=u):u=e[12],u}class P8e{static async getOnPageSuggestions({source:e="kaur1br5_chat",current_page:n}){return await pe.safePost("/kaur1br5/suggestions",{requestBody:{source:e,current_page:n}})}}const wU=300*1e3,kU=1800*1e3,N8e=xs(t=>{const e=ds(t,"2712016364"),n=e.get("staleTimeMs",wU),s=e.get("gcTimeMs",kU);return{staleTime:n,gcTime:s}}),R8e=(t,e,n,s)=>w({queryKey:["kaur1br5","kaur1br5Suggestions",n!=null?n:"anon",t],enabled:!!t&&!!e,staleTime:wU,gcTime:kU,refetchOnWindowFocus:!1,queryFn:async()=>{if(!t||!e)throw new Error("Missing url or title for on-page suggestions request.");return await P8e.getOnPageSuggestions({source:"kaur1br5_chat",current_page:{url:t,title:e}})}},s!=null?s:{});function L8e(t,e,n){"use forget";var l;const s=H.c(8),o=G();let a,i;if(s[0]!==o||s[1]!==n||s[2]!==e||s[3]!==t){const c=ut(o),d=(l=c==null?void 0:c.id)!=null?l:void 0,{staleTime:u,gcTime:m}=N8e(o);let f;s[6]!==o?(f=xe(o,"3830740688"),s[6]=o,s[7]=f):f=s[7];const p=f;a=lt,i=R8e(t,e,d,{enabled:!!(t&&e&&!n&&p),staleTime:u,gcTime:m}),s[0]=o,s[1]=n,s[2]=e,s[3]=t,s[4]=a,s[5]=i}else a=s[4],i=s[5];return a(i)}function O8e(t,e,n){U.logEventWithStatsig("kaur1br5: Suggested Action Displayed","chatgpt_suggested_action_displayed",MU(t,e,n))}function D8e(t,e,n){U.logEventWithStatsig("kaur1br5: Suggested Action Selected","chatgpt_suggested_action_selected",MU(t,e,n))}function MU(t,e,n){var o;const s={location:n.location,impression_id:n.impression_id,suggestion_index:e,suggestion_id:(o=t.id)!=null?o:null,suggestion_type:t.action_type};return n.page_classification_domain&&(s.page_classification_domain=n.page_classification_domain),n.page_classification_type&&(s.page_classification_type=n.page_classification_type),t.action_type==="chat"&&t.system_hint&&(s.system_hint=t.system_hint),s}const iT="default_agent_suggestion",F8e=[{reason:"Default suggestion",action_type:"chat",id:_s(),title:"Summarize",message:"Summarize this content"},{reason:"Default suggestion",action_type:"chat",id:_s(),title:"Learn more",message:"Find related information and links to this content",system_hint:"search"},{reason:"Default suggestion",action_type:"chat",id:_s(),title:"What can I do here?",message:"Suggest useful actions for this content"}];function B8e(t){var s,o;let e="";switch(t.action_type){case"chat":e=t.message;break;case"navigation":e=t.title;break}const n=t.action_type==="chat"&&t.system_hint?e2(String(t.system_hint)):void 0;return{type:ke.Starter,title:(s=t.title)!=null?s:"",body:"",prompt:String(e!=null?e:""),id:(o=t.id)!=null?o:void 0,data:w({},n?{system_hint:n}:{})}}function U8e(){"use no forget";var $,Y,Z;const t=G(),e=ue(it.context$),n=e==null?void 0:e.url,s=e==null?void 0:e.title,o=($=e==null?void 0:e.blocked)!=null?$:!1,a=ue(()=>nq(t)),i=xe(t,"292680291"),l=o||a||!i,{data:c,isLoading:d}=L8e(n,s,l),u=Gl(),m=_r.useStore(),{activeSystemHintType:f,activeConnectorSystemTypes:p}=_r.useState(Q=>({activeSystemHintType:Q.activeSystemHintType,activeConnectorSystemTypes:Q.activeConnectorSystemTypes})),{store:g}=Ar(),h=_.useRef(void 0),[x,y]=_.useState(null);_.useEffect(()=>{let Q=!1;async function q(){if(e&&e.url&&e.title){const X=await Lh(e,ske,"user");Q||y(X)}}return q(),()=>{Q=!0}},[e]),_.useEffect(()=>{if(l){h.current=void 0;return}c&&(h.current=c)},[c,l]);const b=!e||!e.url||!e.title,v=l?void 0:c!=null?c:h.current,C=!(v!==void 0)&&(d||b)||!x||l,k=v==null?void 0:v.actions,M=_.useMemo(()=>{if(l)return[];const Q=k!=null?k:[],q=3,X=new Set;f&&X.add(f);for(const ae of p)X.add(ae);const oe=X.size>0,se=ae=>{if(!oe)return!0;if(ae.action_type!=="chat"||!ae.system_hint)return!1;const ce=e2(ae.system_hint);return ce?X.has(ce):!1},de=Q.filter(ae=>oe&&ae.id===iT?!1:se(ae));if(oe)return de.slice(0,q);const ie=Q.slice(0,q);return ie.length>0?ie:F8e.slice(0,q)},[p,f,l,k]),T=_.useMemo(()=>M.map(Q=>{var oe;const q=B8e(Q),X=w(w({},(oe=q.data)!=null?oe:{}),x!=null&&x.kaur1br5?{kaur1br5:x.kaur1br5}:{});return B(w({},q),{data:X})}),[M,x]),E=_.useMemo(()=>M.map((Q,q)=>{var X,oe;return"".concat((oe=(X=Q.id)!=null?X:Q.title)!=null?oe:"","-").concat(q)}).join("|"),[M]),A=_.useRef(_s());_.useEffect(()=>{A.current=_s()},[E]);const N=(Y=v==null?void 0:v.id)!=null?Y:A.current,R=_.useMemo(()=>{var Q,q;return{location:"sidebar",impression_id:N,page_classification_domain:(Q=v==null?void 0:v.page_classification)==null?void 0:Q.domain,page_classification_type:(q=v==null?void 0:v.page_classification)==null?void 0:q.page_type}},[v,N]),O=_.useRef(null);_.useEffect(()=>{C||M.length===0||O.current!==N&&(O.current=N!=null?N:null,M.forEach((Q,q)=>{O8e(Q,q,R)}))},[R,N,C,M]);const{systemHints:D}=Ko(),F=(Z=ut(t))==null?void 0:Z.isWorkspaceAccount(),V=(Q,q,X,oe)=>{var se;if(M[X]&&D8e(M[X],X,R),m.setActiveSystemHint(oe,D,{locked:!1},F),((se=q.data)==null?void 0:se.system_hint)==="agent"){const de=g.getSharedProps();if(de!=null&&de.composerController){const ie=Et(de.composerController);if(q.id===iT)return;bo(ie,q.prompt)}return}u(Q,q,T,X)};return{shouldShowSuggestions:!C&&M.length>0,items:M,suggestions:T,handleItemClick:V}}const V8e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.wd),__vite__mapDeps([29,1,30])).then(t=>t.OpenaiLogo));function G8e(){return r.jsx("div",{className:"flex h-full items-center justify-center",children:r.jsx(V8e,{className:"h-11 w-11 opacity-40"})})}function Qtt(){"use forget";const t=H.c(5),{shouldShowSuggestions:e,items:n,suggestions:s,handleItemClick:o}=U8e();if(!e){let i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(G8e,{}),t[0]=i):i=t[0],i}let a;return t[1]!==o||t[2]!==n||t[3]!==s?(a=r.jsx("div",{className:"mt-auto w-full ps-2.5 pe-3 pt-4 pb-3",children:r.jsx(j8e,{items:n,suggestions:s,onItemClick:o})}),t[1]=o,t[2]=n,t[3]=s,t[4]=a):a=t[4],a}const qd=t=>xe(t,"1424158285"),Yd=t=>ds(t,"1535193150"),Jtt=t=>{const e=Yd(t);return qd(t)&&e.get("journal_homepage_url_icon_enabled",!1)},Xtt=t=>{const e=Yd(t);return qd(t)&&e.get("show_web_page_file_refs",!1)},ent=t=>{const e=Yd(t);return qd(t)&&!e.get("show_turn_search_sources",!0)},tnt=t=>{const e=Yd(t);return qd(t)?e.get("file_ref_type_order",[]):[]},nnt=t=>{const e=Yd(t);return!!(qd(t)&&e.get("render_web_results_like_files",!1))},snt=t=>{const e=Yd(t);return qd(t)?e.get("custom_thread_classes",""):""},TU=1e3*60*60;let Rx;function $8e(){(Rx===void 0||Date.now()-Rx>TU)&&(Lv.prewarmRealtimeVoice(),Rx=Date.now())}function H8e(t){if(pt(t)&&xe(t,"422449809")&&Q1(t)){let e;const n=()=>{$8e(),e=window.setTimeout(()=>{n()},TU)};return n(),()=>window.clearTimeout(e)}}const W8e=kb(me.lastUserMessage);function z8e(t,e){const n=ht(t,e),s=It(()=>{const i=Pc(n);return i?i.filter(l=>l.role===Ze.User).length:0}),o=It(()=>{var c;const i=W8e(n);if(!i)return!1;const l=(c=i.metadata)==null?void 0:c.system_hints;return l!=null&&l.length?l.some(d=>d!=null&&d!==Ie.Search):!1});let a;return jl(()=>{var d,u,m;if(!Cr(t)){a=void 0;return}if(!Na(e)){a=void 0;return}const i=n.serverId$();if(!i){a=void 0;return}(a==null?void 0:a.conversationId)!==i&&(a=void 0);const l=s(),c=o();if(l>0&&c){if((a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){const p=i,g=(d=Ou)==null?void 0:d.getHost();g?g.cancelConversationArchive(p):ri.then(h=>{h.getHost().cancelConversationArchive(p)})}else(a==null?void 0:a.status)!=="cancelled"||a.conversationId;a={conversationId:i,status:"cancelled"};return}if(l===1){if((a==null?void 0:a.status)==="enqueued")return;a={conversationId:i,status:"enqueued"};const f=i,p=(u=Ou)==null?void 0:u.getHost();p?p.enqueueConversationArchive(f):ri.then(g=>{g.getHost().enqueueConversationArchive(f)});return}if(l>1&&(a==null?void 0:a.status)==="enqueued"&&a.conversationId===i){a={conversationId:i,status:"cancelled"};const f=i,p=(m=Ou)==null?void 0:m.getHost();p?p.cancelConversationArchive(f):ri.then(g=>{g.getHost().cancelConversationArchive(f)})}})}function q8e(t){return io({queryKey:["conversation",t,"stream-status"],queryFn:async()=>t?await pe.safeGet("/conversation/{conversation_id}/stream_status",{parameters:{path:{conversation_id:t}}}):null})}function Y8e(t,e){return Em(t,()=>q8e(e))}function Z8e(t,e){const n=ht(t,e),s=It(()=>{const o=n.serverId$();return o==null?null:Y8e(t,o)()});return yh(()=>{var c;const o=G9(n),a=s(),i=n.serverId$();return i==null||o||((c=a==null?void 0:a.data)==null?void 0:c.status)!=="IS_STREAMING"?!1:Fu.get(i)!=null},()=>{if(!Ve(t,"2489999880").get("is_resume_over_reloads_enabled",!1))return;const o=gi(hn(n.serverId$)),a=gi(Fu.get(o));coe({ctx:t,conversation:n,completionType:Xa.Continue,serverThreadId:o,token:a})})}function ont(t,e){const n=[H8e(t),z8e(t,e),Z8e(t,e)];return()=>{n.forEach(s=>s==null?void 0:s())}}const K8e=j(()=>I(()=>import("./b3nbyz21c52nzclw.js").then(t=>t._),__vite__mapDeps([456,1])),{loading:t=>L(t)});function ant({clientThreadId:t}){const e=xt(),n=Xn(t),s=Ue(t,me.getGizmoId),o=async()=>{n&&(await pe.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n}},requestBody:{is_archived:!1},intercomEventOnError:"fetch-error:conversation:edit"}),e.invalidateQueries(l1({clientThreadId:t})),qe(n,a=>{a.isArchived=!1}),ro(e,s))};return r.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[r.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:r.jsx(P,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),r.jsx("div",{children:r.jsx(he,{disabled:!n,onClick:o,icon:K8e,children:r.jsx(P,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const rnt=_d(()=>({marginBottom$:Qe(null),height$:Qe(null)})),Q8e=j(()=>I(()=>import("./ceivmd4pm4umbvdn.js").then(t=>t._),__vite__mapDeps([139,1])),{loading:t=>L(t)}),J8e=j(()=>I(()=>Promise.resolve().then(()=>cf),void 0),{loading:t=>L(t)}),X8e=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),eNe=j(()=>I(()=>import("./mri7dbc9l2sw15zb.js").then(t=>t._),__vite__mapDeps([457,1])),{loading:t=>L(t)}),tNe=j(()=>I(()=>import("./n3koeaekxk6giq83.js").then(t=>t._),__vite__mapDeps([458,1])),{loading:t=>L(t)}),nNe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),sNe=j(()=>I(()=>import("./dzlsnt42nnmwuxsc.js").then(t=>t._),__vite__mapDeps([136,1])),{loading:t=>L(t)}),oNe=j(()=>I(()=>import("./h2i1yqha5tvddfdm.js"),__vite__mapDeps([459,1,29,30,460,120])));function int({selectedDomain:t,verifiedDomains:e,domains:n,onChangeDomain:s}){const[o,a]=_.useState(!1),i=e.length>0,l=G(),c=ut(l),d=c==null?void 0:c.id,u=c==null?void 0:c.isEnterprisey(),{mutateAsync:m}=SY(d);return r.jsxs("div",{className:"font-normal",children:[r.jsxs(K.Root,{children:[r.jsx(T9,{children:r.jsxs("span",{className:"flex items-center gap-2 py-2",children:[t!=null?t:r.jsx(P,w({},Gv.selectADomain)),r.jsx(sNe,{className:"icon"})]})}),r.jsx(K.Portal,{children:r.jsxs(K.Content,{children:[r.jsx(K.RadioGroup,{value:t,onValueChange:f=>{f!==t&&s(f)},children:e.map(({id:f,hostname:p})=>r.jsx(K.RadioItem,{value:p,children:r.jsxs("div",{className:"flex flex-row",children:[r.jsx("span",{children:p}),r.jsx("span",{onClick:()=>{m({domainId:f}),s("")},children:r.jsx(Q8e,{className:"icon-sm fixed end-4"})})]})},f))}),i&&r.jsx(K.Separator,{}),r.jsx(K.Item,{onClick:()=>{a(!0)},icon:J8e,children:r.jsx(P,w({},Gv.addDomain))})]})})]}),d&&!u&&r.jsx(oNe,{domains:n,isOpen:o,onClose:()=>a(!1),workspaceId:d,showUnverifiedDomains:!0,onVerifyDomain:f=>{s(f.hostname)}})]})}function aNe(){const t=xt();return Bt({mutationFn:({verifierType:e})=>Am.unverifySocialAuth(e),onSuccess:()=>{t.refetchQueries({queryKey:["builderProfile"]})}})}function rNe({socialData:t}){const{type:e,display_name:n,verified_data:s}=t,o=e==="linkedin"?eNe:e==="github"?tNe:null;return o?r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[o({className:"icon"}),r.jsx("span",{children:n})]}),(s==null?void 0:s.link_to)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:s.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:r.jsx(X8e,{className:"icon-sm"})})]}):null}function lnt({socialData:t,icon:e}){const{id:n,type:s,display_name:o,verified:a,verified_data:i}=t,[l,c]=_.useState(!1),d=aNe();return r.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[r.jsxs("div",{className:W("flex items-center space-x-2"),children:[r.jsx(e,{className:"icon-sm"}),r.jsx("span",{children:o}),a&&(i==null?void 0:i.username)&&r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:i.link_to,className:"text-token-text-tertiary text-sm hover:cursor-pointer",children:i==null?void 0:i.username})]}),a?r.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{d.mutate({verifierType:s})},children:d.isPending?r.jsx(Ws,{}):r.jsx(nNe,{className:"icon-sm text-token-text-tertiary"})}):r.jsx(he,{size:"small",color:"secondary",loading:l,onClick:async()=>{c(!0),await sq({id:n},"#settings/".concat(Bn.Account)),c(!1)},children:r.jsx(P,w({},Gv.verify))})]})}const Gv=be({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}}),iNe=j(()=>I(()=>import("./biezqtzsomegvlsv.js").then(t=>t._),__vite__mapDeps([21,1])),{loading:t=>L(t)}),lNe=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),EU=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),cNe=j(()=>I(()=>import("./mri7dbc9l2sw15zb.js").then(t=>t._),__vite__mapDeps([457,1])),{loading:t=>L(t)}),dNe=j(()=>I(()=>import("./n3koeaekxk6giq83.js").then(t=>t._),__vite__mapDeps([458,1])),{loading:t=>L(t)});var _6;const uNe=ct.div(_6||(_6=rt(["text-sm text-token-text-tertiary"]))),mNe="community builder";function fNe(t){const[e,n]=_.useState(t),s=_.useRef(null),o=(a,i)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{n(a),s.current=null},i)};return _.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),[e,o]}function pNe(t){return"gizmo"in t}function lT({gizmo:t,builderName:e,builderUrl:n,className:s,socials:o,hideLink:a=!1}){const i=G(),l=xe(i,"2256850471");let c,d;t&&pNe(t)?(c=t.gizmo.author.display_name,d=t.gizmo.author.link_to):(c=e,d=n),(c===""||c==null)&&(c=mNe);const u=o==null?void 0:o.filter(f=>f.verified),m=r.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[d&&r.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[r.jsxs("div",{className:"text-token-text-primary flex flex-row items-center space-x-2",children:[r.jsx(EU,{className:"icon"}),r.jsx("span",{children:r.jsx(P,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),r.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:d,className:"text-token-text-tertiary hover:cursor-pointer",children:r.jsx(lNe,{className:"icon-sm"})})]}),l&&(u==null?void 0:u.map((f,p)=>f.verified?r.jsx(rNe,{socialData:f},p):null)),r.jsxs("div",{className:"text-token-text-tertiary text-xs",children:[(d||u&&u.length>0)&&r.jsx("hr",{className:"border-token-border-default my-2"}),r.jsx(P,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return r.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[r.jsx(uNe,{className:s,children:r.jsx(P,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:c}})}),!a&&r.jsx(gNe,{socials:o,website:d,children:m})]})}function gNe({website:t,socials:e,children:n}){const[s,o]=fNe(!1);let a=[];t&&a.push(r.jsx(EU,{className:"icon-xs text-token-text-secondary"})),e&&e.forEach(l=>{l.verified&&(l.type==="linkedin"?a.push(r.jsx(cNe,{className:"icon-xs text-token-text-secondary"})):l.type==="github"&&a.push(r.jsx(dNe,{className:"icon-xs text-token-text-secondary"})))});const i=a.length-2;return a=a.slice(0,2),i>0&&a.push(r.jsxs("span",{className:"text-token-text-secondary text-xs font-semibold",children:["+",i]},"overflow")),r.jsx(Dl,{open:s,onOpenChange:l=>o(l,0),children:r.jsxs("div",{onPointerLeave:()=>o(!1,300),children:[r.jsx(br,{asChild:!0,children:r.jsx("div",{onPointerEnter:()=>o(!0,0),className:"cursor-pointer",children:a.length>0?r.jsx("div",{className:"bg-token-main-surface-secondary flex items-center gap-1 rounded-xl px-2 py-1",children:a}):r.jsx(iNe,{className:"icon-xs text-token-text-secondary"})})}),r.jsx(Fl,{children:r.jsx(Bl,{side:"top",sideOffset:8,align:"center",className:"bg-token-main-surface-primary z-10 rounded-lg p-4 drop-shadow-md",children:r.jsx("div",{onPointerEnter:()=>o(!0,0),children:n})})})]})})}const hNe=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)}),_Ne=j(()=>I(()=>import("./dkkqsrmgpmz14chv.js").then(t=>t._),__vite__mapDeps([405,1])),{loading:t=>L(t)}),xNe=j(()=>I(()=>import("./eyao241335injypy.js"),__vite__mapDeps([461,1,29,30,368,369,367,365,339])).then(t=>t.SnorlaxSplashScreen)),cnt=({conversation:t,currentModelId:e,onRequestCompletion:n,gizmoId:s})=>{const o=G(),{data:a}=Pa(s),i=Tl(o,s),l=w9();return a==null?null:i?r.jsx(xNe,{conversation:t,gizmoId:s,currentModelId:e,onRequestCompletion:n}):r.jsx(yNe,{gizmo:a,showStarterPrompts:!0,disableStarterPrompts:l,clientThreadId:t.id,currentModelId:e})};function yNe({gizmo:t,hideOwner:e=!1,children:n,className:s,avatarClassName:o,showStarterPrompts:a=!1,disableStarterPrompts:i=!1,clientThreadId:l,currentModelId:c}){return t==null?null:r.jsx(r.Fragment,{children:r.jsxs("div",{className:W("text-token-text-primary flex h-full flex-col items-center justify-center","screen-arch:min-h-[calc(100dvh-var(--thread-leading-height)-var(--thread-trailing-height)-12px)]",s),children:[r.jsx(vNe,{gizmo:t,avatarClassName:o}),r.jsx(SNe,{gizmo:t,hideOwner:e,showStarterPrompts:a,disableStarterPrompts:i,clientThreadId:l,currentModelId:c}),n]})})}function vNe({gizmo:t,avatarClassName:e}){var s;const n=!!(t!=null&&oq(t)&&((s=t==null?void 0:t.gizmo.tags)!=null&&s.includes(qp.FirstParty)));return r.jsx("div",{className:"relative",children:r.jsx(W1,{isFirstParty:n||!t,src:t!=null&&yc(t)?t.profilePictureUrl:t==null?void 0:t.gizmo.display.profile_picture_url,className:W("mb-3 h-12 w-12",e)})})}function bNe({gizmo:t,disabled:e}){const n=Mv(t),s=Gl(),o=Io();if(n==null||n.length===0)return null;const a=n.slice(0,o?2:4);return r.jsx(wNe,{starterPrompts:a,onSelectStarterPrompt:s,disabled:e})}function SNe({gizmo:t,hideOwner:e,showStarterPrompts:n,disableStarterPrompts:s,clientThreadId:o,currentModelId:a}){var y;const i=G(),l=ue(()=>IA(i,{isGizmo:!0})),{data:c,isLoading:d}=ue(()=>NA(i)),u=t!=null&&yc(t)?t.name:t==null?void 0:t.gizmo.display.name,m=t!=null&&yc(t)?t.description:t==null?void 0:t.gizmo.display.description,f=c==null?void 0:c.model_override,p=t!=null&&yc(t)?t.defaultModel:t==null?void 0:t.gizmo.default_model,g=p?f!=null&&f[p]?l.models.get(f==null?void 0:f[p]):l.models.get(p):null,h=(y=ut(i))==null?void 0:y.hasPaidFeatures(),x=_.useCallback(()=>{if(!o||!g)return;U.logEvent("GPTs: Landing Preferred Model Switch",{from:a,to:g.id}),We.logEvent("chatgpt_gpts_landing_preferred_model_switch",g.id,{from:String(a!=null?a:""),to:g.id}),xe(i,"1333611684")||jb(i,g.id),bd(ht(i,o),g.id)},[o,g,a,i]);return r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"text-center text-2xl font-semibold",children:u}),!e&&r.jsx("div",{className:"text-token-text-tertiary flex items-center gap-1",children:r.jsx(r.Fragment,{children:t&&yc(t)?r.jsx(lT,{gizmo:t}):r.jsx(lT,{gizmo:t,socials:t.gizmo.author.display_socials})})}),!d&&h&&g&&(a&&a!==g.id?r.jsxs("button",{onClick:x,className:"btn btn-blue btn-small flex items-center gap-1",children:[r.jsx(_Ne,{className:"icon-sm"}),r.jsx(P,{id:"6uu9eh",defaultMessage:"Switch to {modelTitle} (creator's recommended model)",values:{modelTitle:"".concat(g.title)}})]}):r.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 text-xs",children:[r.jsx(hNe,{style:{color:"gray",width:16,height:16}}),r.jsx(P,{id:"mcxm8w",defaultMessage:"Using the creator's recommended model: {modelTitle}",values:{modelTitle:"".concat(g.title)}})]})),m&&r.jsx("div",{className:"text-token-text-primary max-w-md text-center text-sm font-normal",children:m}),n&&r.jsx(bNe,{gizmo:t,disabled:s})]})}const CNe=/\s/;function wNe({starterPrompts:t,onSelectStarterPrompt:e,disabled:n,cssMobileDisplayLimit:s,marginOverride:o}){let a=t.map((i,l)=>{var u,m;let c=(u=i.oneliner)!=null?u:i.title;c===""&&(c=i.body);const d=CNe.test(c);return r.jsxs("button",{className:W(s!==void 0&&l>=s&&"max-sm:hidden","border-token-border-default shadow-xxs enabled:hover:bg-token-main-surface-secondary relative flex w-40 flex-col gap-2 rounded-2xl border px-3 pt-3 pb-4 text-start align-top text-[15px] transition disabled:cursor-not-allowed"),disabled:n,onClick:f=>e(f,i,t,l),children:[r.jsx(zY,{category:i.category}),r.jsx("div",{className:W("line-clamp-3 max-w-full text-balance text-gray-600 dark:text-gray-500",d?"break-word":"break-all"),children:c})]},(m=i.id)!=null?m:l)});if(a.length>2){const i=Math.floor(a.length/2);a=[a.slice(0,i),a.slice(i)].map((l,c)=>r.jsx("div",{className:"flex max-w-3xl flex-wrap items-stretch justify-center gap-4",children:l},c))}return r.jsx("div",{className:W("mx-3 flex max-w-3xl flex-wrap items-stretch justify-center gap-4",o!=null?o:"mt-12"),children:a})}function kNe(t){var n,s,o,a;const e=me.getTree(t).findNode(i=>{var l;return((l=i.message.metadata)==null?void 0:l.greenwich)!==void 0},me.getCurrentLeafId(t));return[(s=(n=e==null?void 0:e.message.metadata)==null?void 0:n.greenwich)==null?void 0:s.text,(a=(o=e==null?void 0:e.message.metadata)==null?void 0:o.greenwich)==null?void 0:a.link]}function dnt({clientThreadId:t}){const[e,n]=Ue(t,kNe);return!e||!n?null:r.jsx("div",{className:"flex w-full items-center justify-center p-2 text-center text-xs",children:r.jsx("a",{href:n,target:"_blank",rel:"noreferrer",className:"hover:text-token-text-primary text-token-text-tertiary hover:underline",children:e})})}function unt(t){"use forget";const e=H.c(7),n=ls(),[,s]=zs();let o;e[0]!==n.state||e[1]!==s?(o=c=>{s(d=>(c?d.set(WC,c):d.delete(WC),d),{replace:!0,state:n.state})},e[0]=n.state,e[1]=s,e[2]=o):o=e[2];const a=ya(o);let i,l;e[3]!==t||e[4]!==a?(i=()=>Mo(()=>{if(G9(t)){const c=wn(t);if(ea(t).groups.some(u=>u.modelIds.includes(c.id)))return c.id}},a),l=[t,a],e[3]=t,e[4]=a,e[5]=i,e[6]=l):(i=e[5],l=e[6]),_.useEffect(i,l)}function mnt(){const t=qZ(Zc.NoAuthNewChat),e=vm();return t&&!e?r.jsx(MNe,{onClose:()=>{yn.closeModal(Zc.NoAuthNewChat)}}):null}function MNe({onClose:t}){const e=G(),n=at(),s=i=>{i.preventDefault(),Kt(e,{fallbackScreenHint:"signup",callback:l=>{We.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),U.logSignUpButtonClicked({location:"New chat modal",provider:l},Ct.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Ja(e)})},o=i=>{i.preventDefault(),Kt(e,{fallbackScreenHint:"login",callback:l=>{We.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),U.logLogInButtonClicked({location:"New chat modal",provider:l},Ct.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Ja(e)})},a=()=>{We.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),U.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Ti(n),t()};return _.useEffect(()=>{We.logEvent("chatgpt_new_chat_modal_shown"),U.logEvent("New Chat Modal Shown")},[]),r.jsx(Pt,{testId:"modal-no-auth-new-chat",isOpen:!0,type:"success",onClose:t,noPadding:!0,size:"custom",className:"max-w-sm",children:r.jsxs("div",{className:"flex flex-col justify-center p-6",children:[r.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[r.jsx("div",{}),r.jsx("div",{className:"text-xl font-medium",children:r.jsx(P,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(fn,{onClick:t})})]}),r.jsx("p",{className:"text-token-text-secondary mb-6 text-center",children:r.jsx(P,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:s,children:i}),login:i=>r.jsx("a",{href:"#",className:"text-token-text-primary font-medium",onClick:o,children:i})}})}),r.jsx(he,{className:"mb-3",color:"primary",size:"large",onClick:a,children:r.jsx(P,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r.jsx(he,{size:"large",onClick:()=>{Kt(e,{fallbackScreenHint:"login",callback:i=>{U.logLogInButtonClicked({location:"New chat modal",provider:i},Ct.ACCESS_FLOW_ENTRY_POINT_NEW_CHAT_MODAL)},skipLoginModal:!Ja(e)})},color:"secondary",children:r.jsx(P,w({},_t.logInButtonText))})]})})}const TNe=j(()=>I(()=>import("./fkxibn5xlry0itzs.js").then(t=>t._),__vite__mapDeps([462,1])),{loading:t=>L(t)}),ENe=j(()=>I(()=>import("./mfw23qkpoldespd9.js").then(t=>t._),__vite__mapDeps([207,1])),{loading:t=>L(t)}),ANe=j(()=>I(()=>import("./kn7epy984tqokc8q.js").then(t=>t._),__vite__mapDeps([140,1])),{loading:t=>L(t)}),INe=j(()=>I(()=>import("./fsmgof058qqyu9y1.js").then(t=>t._),__vite__mapDeps([338,1])),{loading:t=>L(t)}),jNe=j(()=>I(()=>import("./e5a6ih8pvtg5hkvc.js").then(t=>t._),__vite__mapDeps([463,1])),{loading:t=>L(t)}),PNe=j(()=>I(()=>import("./mjnk1x5y7ytu1o7k.js").then(t=>t._),__vite__mapDeps([17,1])),{loading:t=>L(t)}),NNe=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),AU={spreadsheets:TNe,presentations:jNe,actions:INe,deep_research:PNe,suggested:ENe};function fnt({clientThreadId:t}){const{isOdysseyMode:e}=S3(t),n=DNe(e),{keywords:s}=RD({clientThreadId:t});return!e||!n?null:r.jsx(RNe,{groups:n,mentionKeywords:s})}function RNe({groups:t,mentionKeywords:e}){const[n,s]=_.useState(null),o=wr(),[a,i]=_.useState(null),[l,c]=_.useState("suggested"),d=v=>{c(v),i(null)},u=_.useMemo(()=>{var S;const v=t.find(C=>C.category.name===l);return(S=v==null?void 0:v.prompts)!=null?S:[]},[t,l]);_.useEffect(()=>{u&&a!=null&&bo(Et(o),u[a].prompt_string)},[o,u,a]),_.useEffect(()=>{e&&e.length>0&&_9(e,Et(o))},[o,e]);const[m,f]=_.useState(()=>hn(()=>gl(o)));_.useEffect(()=>jl(()=>{gl(o)&&f(!0)}),[o]);const p=ya(()=>{const v=a==null?0:Math.min(a+1,u.length-1);return i(v),!0}),g=ya(()=>{const v=a===0||a==null?null:a-1;return i(v),!0}),h=u.length>0;_.useEffect(()=>{if(!(!m||!h))return C9(Et(o),{ArrowDown:p,ArrowUp:g})},[m,h,o,p,g]),_.useEffect(()=>{const v=()=>{f(!1),i(null)};return ml(Et(o).dom,{click:v,input:v})},[o]);const x=_.useRef(null),[y,b]=_.useState(void 0);return En(()=>{x.current&&b(x.current.offsetWidth)},[l]),r.jsx(T0e,{horizontalPadding:"standard",horizontalMargin:"none",verticalMargin:"none",verticalPadding:"none",overflowY:"auto",children:r.jsx(jr,{className:"h-full overflow-y-hidden",children:r.jsx(Xe.div,{className:"flex size-full flex-col",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:r.jsxs("div",{className:"mt-5 flex flex-col items-center overflow-y-auto",children:[r.jsx("div",{className:"py-2",ref:x,children:r.jsx("div",{className:"flex flex-row flex-nowrap gap-2 overflow-x-auto",children:t.map(v=>r.jsx(LNe,{category:v.category.name,displayName:v.category_display_name,selected:l===v.category.name,onSelect:()=>d(v.category.name)},v.category.name))})}),r.jsx("div",{className:"overflow-y-auto",children:r.jsx(Xe.ul,{className:"mt-1 flex flex-col",style:y?{width:y}:{},children:u.map((v,S)=>r.jsx(ONe,{prompt:v,rowIdx:S,selected:a===S,onSelect:()=>{U.logEvent("Agent Suggested Prompt Selected",{prompt_title:v.title,prompt_category:v.categories[0].name}),i(S),Eo(Et(o))},hoveredPromptIndex:n,setHoveredPromptIndex:s,totalRows:u.length},"".concat(l,"-").concat(S)))})})]})})})})}function LNe({category:t,displayName:e,selected:n,onSelect:s}){const o=AU[t],a=n?"text-token-text-primary":"text-token-text-secondary",i=n?"text-token-icon-primary":"text-token-icon-secondary";return r.jsx(he,{color:"secondary",onClick:s,icon:()=>r.jsx(o,{className:i}),className:W("border-token-bg-tertiary",n&&"bg-token-bg-tertiary","font-normal",a),children:e})}function ONe({prompt:t,rowIdx:e,selected:n,onSelect:s,hoveredPromptIndex:o,setHoveredPromptIndex:a,totalRows:i}){const l=_.useRef(null);_.useEffect(()=>{var u;n&&((u=l.current)==null||u.scrollIntoView({behavior:"auto"}))},[n]);function c(){const u=FNe(t),m=u?AU[u]:NNe;return r.jsx(m,{className:"text-token-icon-secondary size-5"})}const d=o===e||o===e+1;return r.jsxs(Xe.li,{ref:l,initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:e*.03},exit:{opacity:0,translateY:4},onMouseEnter:()=>a(e),onMouseLeave:()=>a(null),children:[r.jsxs("button",{className:W("hover:bg-token-bg-tertiary flex w-full flex-row items-center rounded-xl px-2 py-4 text-start"),onClick:s,type:"button",children:[r.jsx("div",{className:"flex flex-col items-center justify-center p-1",children:c()}),r.jsx("div",{className:"text-token-text-secondary flex-1 overflow-hidden pe-2 text-sm text-ellipsis whitespace-nowrap",children:t.title}),t.example_url?r.jsx("div",{className:"flex flex-col items-center justify-center pe-1",onClick:u=>{u.stopPropagation(),U.logEvent("Agent Suggested Prompt Example Clicked",{prompt_title:t.title,prompt_category:t.categories[0].name}),t.example_url&&(window.location.href=t.example_url)},children:r.jsx(ANe,{className:"text-token-icon-tertiary size-6.5 shrink-0"})}):null]}),e<i-1&&!d&&r.jsx("div",{className:"bg-token-bg-tertiary mx-4 mt-[-1px] h-[1px]"})]})}function DNe(t){var n;return(n=lt({queryKey:["odyssey_suggested_prompts_all"],queryFn:async()=>await pe.safeGet("/n7jupd_suggested_prompts_all"),enabled:t}).data)==null?void 0:n.prompt_groups}function FNe(t){const e=t.categories;if(e.length!==0)return e[0].name}const BNe=t=>{"use forget";var b;const e=H.c(23);let n,s,o,a,i;e[0]!==t?(b=t,{open:i,containerClassName:s,onDismiss:o,onShow:a}=b,n=Me(b,["open","containerClassName","onDismiss","onShow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=i):(n=e[1],s=e[2],o=e[3],a=e[4],i=e[5]);const l=i===void 0?!0:i,c=J(),[d,u]=_.useState(l);let m,f;if(e[6]!==d||e[7]!==a?(m=()=>{d&&(a==null||a())},f=[d,a],e[6]=d,e[7]=a,e[8]=m,e[9]=f):(m=e[8],f=e[9]),_.useEffect(m,f),!d)return null;let p;e[10]!==s?(p=W("pointer-events-none fixed start-1/2 bottom-8 z-50 w-full -translate-x-1/2 px-4",s),e[10]=s,e[11]=p):p=e[11];let g;e[12]!==c?(g=c.formatMessage({id:"b675aO",defaultMessage:"Banner"}),e[12]=c,e[13]=g):g=e[13];let h;e[14]!==o?(h=()=>{o==null||o(),u(!1)},e[14]=o,e[15]=h):h=e[15];let x;e[16]!==n||e[17]!==h?(x=r.jsx("div",{className:"pointer-events-auto mx-auto w-full max-w-[768px]",children:r.jsx(pm,B(w({},n),{onDismiss:h}))}),e[16]=n,e[17]=h,e[18]=x):x=e[18];let y;return e[19]!==p||e[20]!==g||e[21]!==x?(y=r.jsx("div",{className:p,"aria-live":"polite",role:"region","aria-label":g,children:x}),e[19]=p,e[20]=g,e[21]=x,e[22]=y):y=e[22],y},UNe=t=>{"use forget";const e=H.c(7),{children:n}=t,s=Array.isArray(n)?n[0]:n,o=Array.isArray(n)?n[1]:null;let a;e[0]!==s?(a=r.jsx("div",{className:"border-token-bg-secondary bg-token-bg-primary z-10 -translate-y-[6px] rotate-[-5deg] rounded-[7px] border-[1px] [box-shadow:0_2px_8px_0_rgba(0,0,0,0.05)]",children:r.jsx("div",{className:"flex h-[28px] w-[28px] items-center justify-center overflow-hidden rounded-[7px] p-[2px]",children:r.jsx("div",{className:"flex h-full w-full items-center justify-center [&_img]:max-h-full [&_img]:max-w-full [&_img]:object-contain [&_img]:object-center [&_svg]:max-h-full [&_svg]:max-w-full [&_svg]:object-contain [&_svg]:object-center",children:s})})}),e[0]=s,e[1]=a):a=e[1];let i;e[2]!==o?(i=r.jsx("div",{className:"border-token-bg-secondary bg-token-bg-primary z-20 -ms-[10px] translate-y-[6px] rotate-[5deg] rounded-[7px] border-[1px] [box-shadow:0_2px_8px_0_rgba(0,0,0,0.05)]",children:r.jsx("div",{className:"flex h-[28px] w-[28px] items-center justify-center overflow-hidden rounded-[7px] p-[2px]",children:r.jsx("div",{className:"flex h-full w-full items-center justify-center [&_img]:max-h-full [&_img]:max-w-full [&_img]:object-contain [&_img]:object-center [&_svg]:max-h-full [&_svg]:max-w-full [&_svg]:object-contain [&_svg]:object-center",children:o})})}),e[2]=o,e[3]=i):i=e[3];let l;return e[4]!==a||e[5]!==i?(l=r.jsxs("div",{className:"flex items-center",children:[a,i]}),e[4]=a,e[5]=i,e[6]=l):l=e[6],l};function VNe(t){const e=G(),{data:n,isLoading:s}=lt({queryKey:["workspace_connector_stats",t],queryFn:()=>pe.safeGet("/aip/workspace/connector-stats"),enabled:!!t&&aq(e)}),o=_.useMemo(()=>{var c,d,u;const i=new Map,l=(c=n==null?void 0:n.connector_stats)!=null?c:[];for(const m of l){const f=Number((d=m.unique_user_cnt)!=null?d:0);Number.isFinite(f)&&i.set(m.connector_id,((u=i.get(m.connector_id))!=null?u:0)+f)}return i},[n]),a=_.useMemo(()=>{const i=Array.from(o.entries()).map(([l,c])=>({connectorId:l,totalCount:c}));return i.sort((l,c)=>c.totalCount-l.totalCount),i},[o]);return{totalsByConnectorId:o,topSorted:a,isLoading:s}}const GNe=j(()=>I(()=>import("./igq4g5h0kvd74hab.js").then(t=>t._),__vite__mapDeps([24,1])),{loading:t=>L(t)}),$Ne=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),HNe=j(()=>I(()=>import("./e9gtc6k4kfmwzcn1.js"),__vite__mapDeps([464,1,29,30])).then(t=>t.ConnectorsOnboardingModal));function WNe({skip:t=!1}){const e=G(),n=o2(e),s=$9(e),o=rq(e),[a,i]=zs(),[l,c]=_.useState(!1);_.useEffect(()=>{a.get("force_show_external_nux")==="true"&&(c(!0),i(k=>(k.delete("force_show_external_nux"),k)))},[a,i]);const d=mt.getItem(Le.ConnectorsExternalNuxBannerDismissed)===!0,u=!t&&n&&!o&&s==="external"&&!d,{connectorLinks:m,isLoading:f}=wd({skip:!u,fetchValidLinksOnly:!0}),{availableConnectors:p,isLoading:g}=H9({skip:!u}),h=xh(e),{connectionInstanceData:x,isLoading:y}=Mm({skip:h.length===0||!u}),b=_.useMemo(()=>{const k=new Set(h),M=x==null?void 0:x.connection_statuses.some(T=>k.has(T.user_connection_details.connection_type));return p.filter(T=>T.status!=="DISABLED_BY_ADMIN").length>0||M},[p,h,x]),v=_.useMemo(()=>{var k,M;if(!u||f||g)return!1;for(const T of p)if(((k=m.get(T.id))!=null?k:[]).length===0)return!0;if(h.length>0&&!y){const T=(M=x==null?void 0:x.connection_statuses)!=null?M:[],E=new Set(["partially_activated","activated","activating"]);for(const A of h){const N=T.find(R=>R.user_connection_details.connection_type===A);if(!N||!E.has(N.user_connection_details.activation_status))return!0}}return!1},[u,f,g,p,m,h,y,x]);return{shouldShow:l||u&&b&&v,isLoading:u&&(f||g||y)}}function pnt(t){"use forget";var Z,Q,q,X,oe,se,de,ie,ae,ce,ye;const e=H.c(39),{clientThreadId:n}=t,s=G(),o=J(),a=wr(),i=qs(),l=_n();let c;e[0]!==l?(c=l==null?void 0:l.getWorkspaceId(),e[0]=l,e[1]=c):c=e[1];const d=c,u=(Z=l==null?void 0:l.name)!=null?Z:"",{platformConnectors:m}=Cd(!0);let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f={},e[2]=f):f=e[2];const{shouldShow:p,isLoading:g}=WNe(f),h=p&&!g,{topSorted:x,isLoading:y}=VNe(h?d:void 0),b=YNe;let v;e[3]!==n||e[4]!==a||e[5]!==i?(v=()=>{b(),i("glaux",{analyticsMetadata:{clientThreadId:n}}),setTimeout(()=>{Eo(Et(a))},100),U.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})},e[3]=n,e[4]=a,e[5]=i,e[6]=v):v=e[6];const S=v;if(!h||y)return null;let C;e[7]!==m||e[8]!==((Q=x[0])==null?void 0:Q.connectorId)?(C=m.get((X=(q=x[0])==null?void 0:q.connectorId)!=null?X:""),e[7]=m,e[8]=(oe=x[0])==null?void 0:oe.connectorId,e[9]=C):C=e[9];const k=C;let M;e[10]!==m||e[11]!==((se=x[1])==null?void 0:se.connectorId)?(M=m.get((ie=(de=x[1])==null?void 0:de.connectorId)!=null?ie:""),e[10]=m,e[11]=(ae=x[1])==null?void 0:ae.connectorId,e[12]=M):M=e[12];const T=M,E=(ye=(ce=x[0])==null?void 0:ce.totalCount)!=null?ye:0;let A;e[13]!==o||e[14]!==E?(A=E<5?o.formatMessage({id:"hyzDPW",defaultMessage:"Get started with company knowledge"}):o.formatMessage({id:"f7CtQQ",defaultMessage:"{count, plural, one {Join # teammate using company knowledge} other {Join # teammates using company knowledge}}"},{count:E}),e[13]=o,e[14]=E,e[15]=A):A=e[15];const N=A;let R;e[16]!==k?(R=k?r.jsx(Og,{connector:k,size:"large"}):r.jsx($Ne,{className:"icon"}),e[16]=k,e[17]=R):R=e[17];let O;e[18]!==T?(O=T?r.jsx(Og,{connector:T,size:"large"}):r.jsx(GNe,{className:"icon"}),e[18]=T,e[19]=O):O=e[19];let D;e[20]!==R||e[21]!==O?(D=r.jsxs(UNe,{children:[R,O]}),e[20]=R,e[21]=O,e[22]=D):D=e[22];let F;e[23]!==o||e[24]!==u?(F=o.formatMessage({id:"XrxX7J",defaultMessage:"Ask ChatGPT anything about {name}. Get answers specific to your work, so you can plan, make decisions, and move faster."},{name:u}),e[23]=o,e[24]=u,e[25]=F):F=e[25];let V;e[26]!==o?(V=o.formatMessage({id:"/U3ta8",defaultMessage:"Get started"}),e[26]=o,e[27]=V):V=e[27];let z;e[28]!==s||e[29]!==S?(z=()=>{U.logEventWithStatsig("ChatGPT Connectors External NUX Banner CTA Clicked","chatgpt_connectors_external_nux_banner_cta_clicked"),gt(s,HNe,{onContinue:S}),mt.setItem(Le.ConnectorsExternalNuxBannerDismissed,!0)},e[28]=s,e[29]=S,e[30]=z):z=e[30];let $;e[31]!==V||e[32]!==z?($={primaryAction:{text:V,onClick:z}},e[31]=V,e[32]=z,e[33]=$):$=e[33];let Y;return e[34]!==F||e[35]!==$||e[36]!==D||e[37]!==N?(Y=r.jsx(BNe,{onShow:qNe,onDismiss:zNe,icon:D,title:N,description:F,actions:$}),e[34]=F,e[35]=$,e[36]=D,e[37]=N,e[38]=Y):Y=e[38],Y}function zNe(){U.logEventWithStatsig("ChatGPT Connectors External NUX Banner Dismissed","chatgpt_connectors_external_nux_banner_dismissed"),mt.setItem(Le.ConnectorsExternalNuxBannerDismissed,!0)}function qNe(){U.logEventWithStatsig("ChatGPT Connectors External NUX Banner Shown","chatgpt_connectors_external_nux_banner_shown")}function YNe(){mt.setItem(Le.HasClickedCompanyKnowledgePill,new Date().toISOString())}class ZNe{constructor(e){ne(this,"config");ne(this,"localStorageKey");this.config=e,this.localStorageKey=e.localStorageKey}getState(){const e=mt.getItem(this.localStorageKey)||{lastShown:null,showCount:0,shownTimestamps:[]};return Array.isArray(e.shownTimestamps)||(e.shownTimestamps=[]),e}setState(e){mt.setItem(this.localStorageKey,e)}getShownTimes(){return this.getState().showCount}shouldShow(){const e=this.getState(),n=Date.now();if(this.config.termination.maxShows!==void 0&&e.showCount>=this.config.termination.maxShows||this.config.termination.customCondition&&this.config.termination.customCondition())return!1;const s=this.config.schedule.maxShowsPerInterval;if(s!==void 0){const o=n-this.config.schedule.intervalMs;if((e.shownTimestamps||[]).filter(i=>i>=o).length>=s)return!1}else if(e.lastShown!=null&&n-e.lastShown<this.config.schedule.intervalMs)return!1;return!0}recordShown(){const e=this.getState(),n=Date.now();let s=Array.isArray(e.shownTimestamps)?e.shownTimestamps:[];const o=n-this.config.schedule.intervalMs;s=s.filter(a=>a>=o),s.push(n),this.setState({lastShown:n,showCount:e.showCount+1,shownTimestamps:s})}reset(){mt.setItem(this.localStorageKey,{lastShown:null,showCount:0,shownTimestamps:[]})}}const Lx={benefit:["Wayleadr","Carrot Fertility","Spring Health","commuter benefits"],competitor:["Gemini","Anthropic","Glean","Microsoft"],project:["Pulse","Sora","Codex","Agent","GPT-5","Agentic Commerce","Instant Checkout","Stargate","ChatGPT Browser"]},Ox=t=>t[Math.floor(Math.random()*t.length)],bs={benefit:Ox(Lx.benefit),competitor:Ox(Lx.competitor),project:Ox(Lx.project)},cT={};function KNe({intl:t,workspaceId:e}){var i;const n=[{title:t.formatMessage({id:"R1bKA9",defaultMessage:"How do I grant a free pro account to a family member?"}),prompt:t.formatMessage({id:"VsWDsD",defaultMessage:"How do I grant a free pro account to a family member?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"eJLPsa",defaultMessage:"What's the latest on {project}?"},{project:bs.project}),prompt:t.formatMessage({id:"7xLmVr",defaultMessage:"What's the latest on {project}?"},{project:bs.project}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"aF4wgE",defaultMessage:"Which features are launching soon?"}),prompt:t.formatMessage({id:"EGKvT7",defaultMessage:"Which features are launching soon?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"nYk7Ko",defaultMessage:"When is the next tender?"}),prompt:t.formatMessage({id:"3Z0Svh",defaultMessage:"When is the next tender?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"CzCex8",defaultMessage:"What is the current value of a PPU?"}),prompt:t.formatMessage({id:"e9Ph3f",defaultMessage:"What is the current value of a PPU?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"BfYY0d",defaultMessage:"What are some interesting metrics from recent launches?"}),prompt:t.formatMessage({id:"Kaw3Me",defaultMessage:"What are some interesting metrics from recent launches?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"wsrf20",defaultMessage:"How do I submit an IT request?"}),prompt:t.formatMessage({id:"l6VIj4",defaultMessage:"How do I submit an IT request?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"FGt4Fo",defaultMessage:"How does {project} work?"},{project:bs.project}),prompt:t.formatMessage({id:"LIS5LI",defaultMessage:"How does {project} work?"},{project:bs.project}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"TOpKN4",defaultMessage:"Explain the key differences between GPT-5 and 4o"}),prompt:t.formatMessage({id:"aAQTq4",defaultMessage:"Explain the key differences between GPT-5 and 4o"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"Y+4ats",defaultMessage:"Whats our expense policy for meals while traveling?"}),prompt:t.formatMessage({id:"Jp2Zh9",defaultMessage:"Whats our expense policy for meals while traveling?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"jBE/OD",defaultMessage:"Summarize the last all hands"}),prompt:t.formatMessage({id:"Z1P0Y+",defaultMessage:"Summarize the last all hands"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"uhL6IS",defaultMessage:"Summarize what we shipped this quarter."}),prompt:t.formatMessage({id:"BGjhUV",defaultMessage:"Summarize what we shipped this quarter."}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"NhUAIF",defaultMessage:"How do we sell customers against {competitor}?"},{competitor:bs.competitor}),prompt:t.formatMessage({id:"ijlHte",defaultMessage:"How do we sell customers against {competitor}?"},{competitor:bs.competitor}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"mAFdy/",defaultMessage:"Where are we losing deals to {competitor}?"},{competitor:bs.competitor}),prompt:t.formatMessage({id:"5WVsZS",defaultMessage:"Where are we losing deals to {competitor}?"},{competitor:bs.competitor}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"eNsGGl",defaultMessage:"Whats the product roadmap for {project}?"},{project:bs.project}),prompt:t.formatMessage({id:"orsri8",defaultMessage:"Whats the product roadmap for {project}?"},{project:bs.project}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"+Qy6Ej",defaultMessage:"Summarize the history of {project}"},{project:bs.project}),prompt:t.formatMessage({id:"7zMjXe",defaultMessage:"Summarize the history of {project}"},{project:bs.project}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"3j00b2",defaultMessage:"What are the most exciting new things were shipping in Q4?"}),prompt:t.formatMessage({id:"a4T0Ow",defaultMessage:"What are the most exciting new things were shipping in Q4?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"mAcfCU",defaultMessage:"How can I sign up for {benefit}?"},{benefit:bs.benefit}),prompt:t.formatMessage({id:"Wp6z7b",defaultMessage:"How can I sign up for {benefit}?"},{benefit:bs.benefit}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"sOKokL",defaultMessage:"How does parking work at Mission Bay?"}),prompt:t.formatMessage({id:"yFlMI4",defaultMessage:"How does parking work at Mission Bay?"}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"VPft7T",defaultMessage:"Can I learn more about {benefit}?"},{benefit:bs.benefit}),prompt:t.formatMessage({id:"FsBOcE",defaultMessage:"Can I learn more about {benefit}?"},{benefit:bs.benefit}),type:ke.Starter,body:"",theme:et.Glaux},{title:t.formatMessage({id:"1FI+7f",defaultMessage:"Summarize learnings from the latest user research studies"}),prompt:t.formatMessage({id:"3xhfap",defaultMessage:"Summarize learnings from the latest user research studies"}),type:ke.Starter,body:"",theme:et.Glaux}];if(e!=="f7f33107-5fb9-4ee1-8922-3eae76b5b5a0")return[];const s=(i=t.locale)!=null?i:"default",o=cT[s];if(o)return o;const a=n.slice().sort(()=>Math.random()-.5).slice(0,4);return cT[s]=a,a}const Dx=j(()=>I(()=>import("./gmvm3a44s5px1mmy.js").then(t=>t._),__vite__mapDeps([279,1])),{loading:t=>L(t)}),Fx=j(()=>I(()=>import("./nybp4ord8gyv67lt.js").then(t=>t._),__vite__mapDeps([280,1])),{loading:t=>L(t)}),Bx=j(()=>I(()=>import("./srab5nufkcaxuad9.js").then(t=>t._),__vite__mapDeps([465,1])),{loading:t=>L(t)}),Bi=j(()=>I(()=>import("./dr0tvd8qnw5fl2kx.js").then(t=>t._),__vite__mapDeps([466,1])),{loading:t=>L(t)}),Ux=j(()=>I(()=>import("./hszplc0bkj6ysztt.js").then(t=>t._),__vite__mapDeps([283,1])),{loading:t=>L(t)}),cc=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),QNe=j(()=>I(()=>import("./g7blak97rvihtacv.js").then(t=>t._),__vite__mapDeps([285,1])),{loading:t=>L(t)}),dc=j(()=>I(()=>import("./d3y46a2mpr2sbz7s.js").then(t=>t._),__vite__mapDeps([27,1])),{loading:t=>L(t)}),JNe=j(()=>I(()=>import("./oz2w8uv2a0ics46w.js").then(t=>t._),__vite__mapDeps([287,1])),{loading:t=>L(t)}),Vx=j(()=>I(()=>import("./du2nevxu1vmhk9y6.js").then(t=>t._),__vite__mapDeps([288,1])),{loading:t=>L(t)});function XNe(){"use forget";const t=H.c(110),e=J(),n=W9();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={includeAutoConnectors:!0},t[0]=s):s=t[0];const{availableConnectors:o,isLoading:a}=ih(s);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i={includeAutoConnectors:!0},t[1]=i):i=t[1];const{connectedTypes:l,isLoading:c}=Mb(i),{isLoading:d,internalKnowledgeConfigs:u}=iq();let m;t[2]!==u||t[3]!==n?(m=n&&(u==null?void 0:u.some(uRe)),t[2]=u,t[3]=n,t[4]=m):m=t[4];const f=!!m;let p;t[5]!==u||t[6]!==n?(p=n&&(u==null?void 0:u.some(dRe)),t[5]=u,t[6]=n,t[7]=p):p=t[7];const g=!!p,h=ss(),x=cRe,y=iRe,b=aRe,v=oRe;let S;t[8]!==e?(S=e.formatMessage({id:"9jtvbx",defaultMessage:"Describe and suggest improvements to my email style"}),t[8]=e,t[9]=S):S=t[9];let C;t[10]!==e?(C=e.formatMessage({id:"PjZmLV",defaultMessage:"Describe and suggest improvements to my email style"}),t[10]=e,t[11]=C):C=t[11];let k;t[12]===Symbol.for("react.memo_cache_sentinel")?(k={connectors:{[bt.GMAIL_CONNECTOR]:dc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Bi}},t[12]=k):k=t[12];let M;t[13]!==S||t[14]!==C?(M={type:ke.Starter,title:S,prompt:C,theme:et.Slurm,data:k,body:""},t[13]=S,t[14]=C,t[15]=M):M=t[15];let T;t[16]!==e?(T=e.formatMessage({id:"gmFv/2",defaultMessage:"Summarize my unread emails"}),t[16]=e,t[17]=T):T=t[17];let E;t[18]!==e?(E=e.formatMessage({id:"/lt8RC",defaultMessage:"Summarize my unread emails"}),t[18]=e,t[19]=E):E=t[19];let A;t[20]===Symbol.for("react.memo_cache_sentinel")?(A={connectors:{[bt.GMAIL_CONNECTOR]:dc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Bi}},t[20]=A):A=t[20];let N;t[21]!==T||t[22]!==E?(N={type:ke.Starter,title:T,prompt:E,theme:et.Slurm,data:A,body:""},t[21]=T,t[22]=E,t[23]=N):N=t[23];let R;t[24]!==e?(R=e.formatMessage({id:"rMKyX2",defaultMessage:"Give me an overview of a project or customer"}),t[24]=e,t[25]=R):R=t[25];let O;t[26]!==e?(O=e.formatMessage({id:"5hS/7U",defaultMessage:"Give me an overview of a project or customer"}),t[26]=e,t[27]=O):O=t[27];let D;t[28]===Symbol.for("react.memo_cache_sentinel")?(D={connectors:{[bt.GDRIVE_ACTION_CONNECTOR]:cc,[bt.GMAIL_CONNECTOR]:dc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Bi,[bt.HUBSPOT_CONNECTOR]:Ux,[bt.DROPBOX_CONNECTOR]:Vx,[bt.NOTION_CONNECTOR]:Dx,[bt.SHAREPOINT_CONNECTOR]:Bx,[bt.TEAMS_CONNECTOR]:Fx},syncConnectors:{[$i.gdrive_sync_connector]:cc}},t[28]=D):D=t[28];let F;t[29]!==R||t[30]!==O?(F={type:ke.Starter,title:R,prompt:O,theme:et.Slurm,data:D,body:""},t[29]=R,t[30]=O,t[31]=F):F=t[31];let V;t[32]!==e?(V=e.formatMessage({id:"c9CBw8",defaultMessage:"Find me the top three most relevant documents on a project"}),t[32]=e,t[33]=V):V=t[33];let z;t[34]!==e?(z=e.formatMessage({id:"NYPKci",defaultMessage:"Find me the top three most relevant documents on a project"}),t[34]=e,t[35]=z):z=t[35];let $;t[36]===Symbol.for("react.memo_cache_sentinel")?($={connectors:{[bt.GDRIVE_ACTION_CONNECTOR]:cc,[bt.GMAIL_CONNECTOR]:dc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Bi,[bt.HUBSPOT_CONNECTOR]:Ux,[bt.DROPBOX_CONNECTOR]:Vx,[bt.NOTION_CONNECTOR]:Dx,[bt.SHAREPOINT_CONNECTOR]:Bx,[bt.TEAMS_CONNECTOR]:Fx},syncConnectors:{[$i.gdrive_sync_connector]:cc}},t[36]=$):$=t[36];let Y;t[37]!==V||t[38]!==z?(Y={type:ke.Starter,title:V,prompt:z,theme:et.Slurm,data:$,body:""},t[37]=V,t[38]=z,t[39]=Y):Y=t[39];let Z;t[40]!==e?(Z=e.formatMessage({id:"bh3D+B",defaultMessage:"Review my most recent PR"}),t[40]=e,t[41]=Z):Z=t[41];let Q;t[42]!==e?(Q=e.formatMessage({id:"MQvW9m",defaultMessage:"Review my most recent PR"}),t[42]=e,t[43]=Q):Q=t[43];let q;t[44]===Symbol.for("react.memo_cache_sentinel")?(q={connectors:{[bt.GITHUB_CONNECTOR]:JNe}},t[44]=q):q=t[44];let X;t[45]!==Z||t[46]!==Q?(X={type:ke.Starter,title:Z,prompt:Q,theme:et.Slurm,data:q,body:""},t[45]=Z,t[46]=Q,t[47]=X):X=t[47];let oe;t[48]!==e?(oe=e.formatMessage({id:"eb79eJ",defaultMessage:"What changed in the projects that Im working on"}),t[48]=e,t[49]=oe):oe=t[49];let se;t[50]!==e?(se=e.formatMessage({id:"Q+eKmx",defaultMessage:"What changed in the projects that Im working on"}),t[50]=e,t[51]=se):se=t[51];let de;t[52]===Symbol.for("react.memo_cache_sentinel")?(de={connectors:{[bt.GDRIVE_ACTION_CONNECTOR]:cc,[bt.GMAIL_CONNECTOR]:dc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Bi,[bt.HUBSPOT_CONNECTOR]:Ux,[bt.DROPBOX_CONNECTOR]:Vx,[bt.NOTION_CONNECTOR]:Dx,[bt.SHAREPOINT_CONNECTOR]:Bx,[bt.TEAMS_CONNECTOR]:Fx},syncConnectors:{[$i.gdrive_sync_connector]:cc}},t[52]=de):de=t[52];let ie;t[53]!==oe||t[54]!==se?(ie={type:ke.Starter,title:oe,prompt:se,theme:et.Slurm,data:de,body:""},t[53]=oe,t[54]=se,t[55]=ie):ie=t[55];let ae;t[56]!==e?(ae=e.formatMessage({id:"BZuK5N",defaultMessage:"Find all emails about a project or customer"}),t[56]=e,t[57]=ae):ae=t[57];let ce;t[58]!==e?(ce=e.formatMessage({id:"S/AOrO",defaultMessage:"Find all emails about a project or customer"}),t[58]=e,t[59]=ce):ce=t[59];let ye;t[60]===Symbol.for("react.memo_cache_sentinel")?(ye={connectors:{[bt.GMAIL_CONNECTOR]:dc,[bt.OUTLOOK_EMAIL_CONNECTOR]:Bi}},t[60]=ye):ye=t[60];let fe;t[61]!==ae||t[62]!==ce?(fe={type:ke.Starter,title:ae,prompt:ce,theme:et.Slurm,data:ye,body:""},t[61]=ae,t[62]=ce,t[63]=fe):fe=t[63];let Ce;t[64]!==e?(Ce=e.formatMessage({id:"DtUTpV",defaultMessage:"Brief me on this weeks meetings"}),t[64]=e,t[65]=Ce):Ce=t[65];let ee;t[66]!==e?(ee=e.formatMessage({id:"NoHU2S",defaultMessage:"Brief me on this weeks meetings"}),t[66]=e,t[67]=ee):ee=t[67];let te;t[68]===Symbol.for("react.memo_cache_sentinel")?(te={connectors:{[bt.GOOGLE_CONTACTS_CONNECTOR]:QNe,[bt.OUTLOOK_CALENDAR_CONNECTOR]:Bi}},t[68]=te):te=t[68];let le;t[69]!==Ce||t[70]!==ee?(le={type:ke.Starter,title:Ce,prompt:ee,theme:et.Slurm,data:te,body:""},t[69]=Ce,t[70]=ee,t[71]=le):le=t[71];let re;t[72]!==N||t[73]!==F||t[74]!==Y||t[75]!==X||t[76]!==ie||t[77]!==fe||t[78]!==le||t[79]!==M?(re=[M,N,F,Y,X,ie,fe,le],t[72]=N,t[73]=F,t[74]=Y,t[75]=X,t[76]=ie,t[77]=fe,t[78]=le,t[79]=M,t[80]=re):re=t[80];const ve=re,_e=a||c||d;if(_e){let je;t[81]===Symbol.for("react.memo_cache_sentinel")?(je=[],t[81]=je):je=t[81];let Te;return t[82]!==_e?(Te={prompts:je,isLoading:_e},t[82]=_e,t[83]=Te):Te=t[83],Te}if(h===Ie.Slurm){let je,Te,Fe;if(t[84]!==ve||t[85]!==l||t[86]!==g||t[87]!==_e){Fe=Symbol.for("react.early_return_sentinel");e:{if(je=ve.filter(Se=>{const{connectors:Re,syncConnectors:tt}=x(Se),Ke=Object.keys(Re).some(ot=>[...l].some(Lt=>Lt===ot)),nt=!!tt[$i.gdrive_sync_connector];return Ke||nt&&g}),je.length<3){let Se;t[91]===Symbol.for("react.memo_cache_sentinel")?(Se=[],t[91]=Se):Se=t[91];let Re;t[92]!==_e?(Re={prompts:Se,isLoading:_e},t[92]=_e,t[93]=Re):Re=t[93],Fe=Re;break e}je.sort(sRe),Te=je.slice(0,4).map(Se=>{const{connectors:Re,syncConnectors:tt}=x(Se),Ke=b(Re,tt,{mode:"connected",connectedTypes:new Set([...l]),hasGdriveSync:g});return B(w({},Se),{trailing:y(Ke)})})}t[84]=ve,t[85]=l,t[86]=g,t[87]=_e,t[88]=je,t[89]=Te,t[90]=Fe}else je=t[88],Te=t[89],Fe=t[90];if(Fe!==Symbol.for("react.early_return_sentinel"))return Fe;je=Te;let Ge;return t[94]!==_e||t[95]!==je?(Ge={prompts:je,isLoading:_e},t[94]=_e,t[95]=je,t[96]=Ge):Ge=t[96],Ge}let we,De,ge;if(t[97]!==ve||t[98]!==o||t[99]!==f||t[100]!==_e){ge=Symbol.for("react.early_return_sentinel");e:{if(we=ve.filter(je=>{const{connectors:Te,syncConnectors:Fe}=x(je),Ge=new Set(o.map(nRe)),Se=Object.keys(Te).some(tt=>Ge.has(tt)),Re=!!Fe[$i.gdrive_sync_connector];return Se||Re&&f}),we.length<3){let je;t[104]===Symbol.for("react.memo_cache_sentinel")?(je=[],t[104]=je):je=t[104];let Te;t[105]!==_e?(Te={prompts:je,isLoading:_e},t[105]=_e,t[106]=Te):Te=t[106],ge=Te;break e}we.sort(tRe),De=we.slice(0,4).map((je,Te)=>{var tt;const Fe="#settings/".concat(Bn.Connectors,"?referrer=").concat(zc.SuggestedPrompts),{connectors:Ge,syncConnectors:Se}=x(je),Re=b(Ge,Se,{mode:"available",availableTypes:new Set(o.map(eRe)),hasGdriveSync:f});return B(w({},je),{theme:et.ContextualAnswersNUX,trailing:y(Re),data:{link:Fe,id:(tt=je.data)==null?void 0:tt.id,position:Te.toString()},onSelectOverride:v})})}t[97]=ve,t[98]=o,t[99]=f,t[100]=_e,t[101]=we,t[102]=De,t[103]=ge}else we=t[101],De=t[102],ge=t[103];if(ge!==Symbol.for("react.early_return_sentinel"))return ge;we=De;let Ne;return t[107]!==_e||t[108]!==we?(Ne={prompts:we,isLoading:_e},t[107]=_e,t[108]=we,t[109]=Ne):Ne=t[109],Ne}function eRe(t){return t.type}function tRe(){return Math.random()-.5}function nRe(t){return t.type}function sRe(){return Math.random()-.5}function oRe(t,e){var n,s;if(e.type===ke.Starter&&(e.theme===et.ContextualAnswersNUX||e.theme===et.Slurm)){const{data:o}=e,{link:a}=o;window.location.hash=a+"&suggestedPromptsText=".concat(encodeURIComponent(e.prompt)),U.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_selected","chatgpt_contextual_answers_recommended_prompt_selected",{prompt_id:(n=e.data)==null?void 0:n.id,prompt_position:(s=e.data)==null?void 0:s.position}),t.preventDefault();return}}function aRe(t,e,n){const s=[],o=!!(e!=null&&e[$i.gdrive_sync_connector]);o&&n.hasGdriveSync&&s.push(e[$i.gdrive_sync_connector]);const a=i=>n.mode==="connected"?n.connectedTypes.has(i):n.availableTypes.has(i);for(const i of Object.keys(t))o&&n.hasGdriveSync&&i===bt.GDRIVE_ACTION_CONNECTOR||a(i)&&s.push(t[i]);return s.sort(rRe),s}function rRe(){return Math.random()-.5}function iRe(t){return r.jsx("div",{className:"flex flex-1 items-center justify-end gap-1",children:t.filter(Boolean).slice(0,3).map(lRe)})}function lRe(t,e){return r.jsx("div",{className:"flex h-4 w-4 shrink-0 items-center justify-center rounded-full",children:r.jsx(t,{className:"h-full w-full"})},e)}function cRe(t){var n,s,o;const e=(n=t.data)!=null?n:{};return{connectors:(s=e.connectors)!=null?s:{},syncConnectors:(o=e.syncConnectors)!=null?o:{}}}function dRe(t){return["partially_activated","activated"].includes(t.user_connection_details.activation_status)}function uRe(t){return t.user_connection_details.auth_status==="not_connected"}const IU=()=>{"use forget";const t=H.c(9),e=G();let n;t[0]!==e?(n=o2(e),t[0]=e,t[1]=n):n=t[1];const s=n,{availableConnectors:o}=H9(),a=xh(e),i=!a.length;let l;t[2]!==i?(l={skip:i},t[2]=i,t[3]=l):l=t[3];const{connectionInstanceData:c,isLoading:d}=Mm(l),{systemHints:u,isLoading:m}=Ko();let f;t[4]!==u?(f=u==null?void 0:u.some(mRe),t[4]=u,t[5]=f):f=t[5];const p=f;c==null||c.connection_statuses;let g;e:{if(o.filter(fRe).length>0){g=!0;break e}const v=new Set(a);if(c!=null&&c.connection_statuses.some(S=>v.has(S.user_connection_details.connection_type))){g=!0;break e}g=!1}const x=s&&p&&g,y=d||m;let b;return t[6]!==x||t[7]!==y?(b={available:x,isLoading:y},t[6]=x,t[7]=y,t[8]=b):b=t[8],b};function mRe(t){return t.systemHint==="glaux"}function fRe(t){return t.status!=="DISABLED_BY_ADMIN"}async function pRe(t,e=4){if(e<1)return[];try{const n=iC(t),s=xRe(t);return(await pe.safeGet("/templated_prompts/suggestions",{parameters:{query:{limit:e,mode:s,bypass_cache:n.get("bypass_cache",!1)}}})).suggestions.filter(a=>typeof a.prompt=="string"&&a.prompt.length>0).slice(0,e).map(a=>{var i;return{type:ke.Templated,title:(i=a.description)!=null?i:"Dynamic Prompt",body:a.prompt,prompt:a.prompt,id:a.id,oneliner:a.name,theme:et.TemplatedPrompts,source:"CURATED"}})}catch(n){return[]}}function gRe(t,e){"use forget";const n=H.c(9),s=G();let o;n[0]!==t?(o=["dynamic-prompt-suggestions",t],n[0]=t,n[1]=o):o=n[1];let a;n[2]!==s||n[3]!==t?(a=()=>pRe(s,t),n[2]=s,n[3]=t,n[4]=a):a=n[4];let i;return n[5]!==e||n[6]!==o||n[7]!==a?(i={queryKey:o,enabled:e,staleTime:3e5,queryFn:a},n[5]=e,n[6]=o,n[7]=a,n[8]=i):i=n[8],lt(i)}const hRe=()=>{const t=G(),e=_n(),{available:n,isLoading:s}=IU();return!!(e!=null&&e.isWorkspacePlan())&&!n&&!s&&_Re(t)},iC=t=>Co(t,"2538364663");function _Re(t){return iC(t).get("enabled",!1)}function xRe(t){const n=iC(t).get("mode","static");return n==="dynamic"||n==="static"?n:"static"}const dT=j(()=>I(()=>import("./ko9i87h17rh10t5i.js").then(t=>t._),__vite__mapDeps([467,1])),{loading:t=>L(t)}),yRe=j(()=>I(()=>import("./mqkppnsks40c5l5b.js").then(t=>t._),__vite__mapDeps([272,1])),{loading:t=>L(t)}),vRe=j(()=>I(()=>import("./lbr5dcyofn0xux3u.js").then(t=>t._),__vite__mapDeps([273,1])),{loading:t=>L(t)}),bRe=j(()=>I(()=>import("./jqab1cg1m48dccx8.js").then(t=>t._),__vite__mapDeps([23,1])),{loading:t=>L(t)}),SRe=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),jU=4,CRe=7,wRe=5,kRe=3600*1e3,MRe=async({text:t,numCompletions:e,isUnauthenticated:n,isThreadUsingSearchMode:s=!1,autocompleteMode:o,activeSystemHintType:a})=>{try{return(n?await pe.safePost("/conversation/experimental/generate_autocompletions_anon",{requestBody:{input_text:t,num_completions:e,in_search_mode:s,system_hint:a!=null?a:void 0},authOption:qt.Anonymous}):await pe.safePost("/conversation/experimental/generate_autocompletions",{requestBody:{input_text:t,num_completions:e,in_search_mode:s,system_hint:a!=null?a:void 0}})).completions.map(l=>({id:_s(),type:ke.Autocomplete,title:l.slice(0,t.length),body:l.slice(t.length),oneliner:l,prompt:l,source:o}))}catch(i){return[]}},$v=(t,e=!1)=>Ve(t,pt(t)?"4093727931":"312855442",{disableExposureLog:!e}),TRe=({clientThreadId:t,composerController:e,isGizmoThread:n,isNewThread:s,isProjectThread:o})=>{const[a,i]=zs(),l=a.get("forceShowNuxCASuggestion")==="true",c=G(),d=ss(),{autocompletions$:u}=j3(e),m=3,f=d===Ie.Search,{bingTrendingSuggestions:p,chatgptTrendingSuggestions:g,imageGenTrendingSuggestions:h,fetchBingTrendingSuggestions:x,fetchChatgptTrendingSuggestions:y}=ARe(),b=_.useRef({bing:0,chatgpt:{time:0,imageGen:!1}}),v=_.useRef(!1),[S,C]=_.useState(!1),k=Bh(Se=>Se.files),M=k.length>0,T=_.useMemo(()=>k.some(Se=>{var tt,Ke,nt,ot;return((ot=(nt=(tt=Se.fileSpec)==null?void 0:tt.mimeType)!=null?nt:(Ke=Se.file)==null?void 0:Ke.type)!=null?ot:"").toLowerCase().startsWith("image/")}),[k]),E=AF(),A=ue(()=>Dh(e)),N=s&&!n&&!o&&E()&&Ve(c,"4031588851",{disableExposureLog:!0}).get("personalized_prompts_enabled",!1),{data:R}=lt(B(w({},TF(jU*2,null)),{enabled:N})),O=_.useMemo(()=>{var tt;return((tt=R==null?void 0:R.items)!=null?tt:[]).filter(Ke=>Ke.category==="personalized").map(Ke=>({type:ke.Starter,id:Ke.id,title:Ke.title,body:Ke.description,prompt:Ke.prompt,oneliner:Ke.oneliner,category:Ke.category,theme:Ke.theme,emoji:Ke.emoji}))},[R]);_.useEffect(()=>ml(Et(e).dom,{click:()=>C(!0)}),[e]);const{isUnauthenticated:D}=Un(),F=_.useCallback(Se=>{const Re=_c(e);return Re&&Gx(Se).startsWith(Re.toLocaleLowerCase())},[e]),V=_.useCallback(Se=>{const Re=_c(e),tt=Se.title+Se.body;return F(Se)?B(w({},Se),{title:Re,body:tt.slice(Re.length)}):B(w({},Se),{title:tt,body:""})},[e,F]),z=_.useCallback((Se=!1)=>{u.set(Re=>!Re.some(F)&&Re.length>0?[]:Se?Re:Re.map(V))},[F,V,u]),$=J(),Y=hRe(),{data:Z}=gRe(4,Y),Q=_.useMemo(()=>({[et.Canvas]:[{type:ke.Starter,title:$.formatMessage({id:"GMvniX",defaultMessage:"Help me write a birthday message for a friend"}),prompt:$.formatMessage({id:"JInqHw",defaultMessage:"Help me write a birthday message for a friend"}),body:"",theme:et.Canvas},{type:ke.Starter,title:$.formatMessage({id:"Xwp6O+",defaultMessage:"Help me write a short story"}),prompt:$.formatMessage({id:"e2j3PL",defaultMessage:"Help me write a short story set in a post-apocalyptic Tokyo, focused on a character whos discovering a long-lost secret"}),body:"",theme:et.Canvas},{type:ke.Starter,title:$.formatMessage({id:"ARQf7p",defaultMessage:"Help me write a basic outline for an essay"}),prompt:$.formatMessage({id:"K0WcGA",defaultMessage:"Help me write a basic outline for an essay"}),body:"",theme:et.Canvas},{type:ke.Starter,title:$.formatMessage({id:"z+JwEj",defaultMessage:"Create a business plan outline"}),prompt:$.formatMessage({id:"4c/Ux5",defaultMessage:"Create a detailed outline for a business plan for a new app that connects local artists with buyers. Include sections for market analysis, monetization, and user acquisition"}),body:"",theme:et.Canvas}],[et.Image]:[{type:ke.Starter,title:$.formatMessage({id:"noA7wB",defaultMessage:"Design a modern logo"}),prompt:$.formatMessage({id:"k53BuX",defaultMessage:"Create a modern, minimalist logo for a tech startup called Nexora. It should use bold typography and a sleek geometric icon, suitable for both light and dark backgrounds"}),body:"",theme:et.Image},{type:ke.Starter,title:$.formatMessage({id:"akHy6z",defaultMessage:"Create an invite for my birthday"}),prompt:$.formatMessage({id:"BXf15G",defaultMessage:"Please create an invite for my birthday to send to my friends. Itll be an outdoor barbeque with music and delicious food with my closest friends and family"}),body:"",theme:et.Image},{type:ke.Starter,title:$.formatMessage({id:"57SKj2",defaultMessage:"Create a cartoon illustration of my pet"}),prompt:$.formatMessage({id:"EtCE7V",defaultMessage:"Please create an illustration of my pet in 2D animation style. Its taking a nap in its favorite spot by the fire"}),body:"",theme:et.Image},{type:ke.Starter,title:$.formatMessage({id:"s5iqKS",defaultMessage:"Create a Renaissance-style painting"}),prompt:$.formatMessage({id:"mEPKGA",defaultMessage:"Please create a Renaissance-style painting of a Mars rover. Use techniques like chiaroscuro and a warm color palette"}),body:"",theme:et.Image}],[et.ContextualAnswers]:[{type:ke.Starter,title:$.formatMessage({id:"VJy602",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),prompt:$.formatMessage({id:"BADBWZ",defaultMessage:"Summarize my top projects this quarter and key outcomes across all of them."}),icon:r.jsx(bRe,{className:"h-full w-full"}),body:"",theme:et.ContextualAnswers},{type:ke.Starter,title:$.formatMessage({id:"CXhrsc",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),prompt:$.formatMessage({id:"WPQR3a",defaultMessage:"Get me up to speed on the past 2 weeks of project updates."}),icon:r.jsx(yRe,{className:"h-full w-full"}),body:"",theme:et.ContextualAnswers},{type:ke.Starter,title:$.formatMessage({id:"7QVCTa",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),prompt:$.formatMessage({id:"tvB7JD",defaultMessage:"Find the revenue projection for Q3 and the most profitable projects."}),icon:r.jsx(vRe,{className:"h-full w-full"}),body:"",theme:et.ContextualAnswers},{type:ke.Starter,title:$.formatMessage({id:"Rny+bg",defaultMessage:"What is our company's current policy on work from home?"}),prompt:$.formatMessage({id:"P0W1ks",defaultMessage:"What is our company's current policy on work from home?"}),icon:r.jsx(SRe,{className:"h-full w-full"}),body:"",theme:et.ContextualAnswers}]}),[$]),q=_n(),oe=wd().connectorLinks.size>0,{availableConnectors:se,isLoading:de}=ih(),{prompts:ie,isLoading:ae}=XNe(),ce=se.length>0&&!oe,ye=pt(c),fe=ce?Ve(c,"1704943789").get("onboarding_state","control")==="suggested_prompts":!1,Ce=_.useMemo(()=>new ZNe({localStorageKey:Le.CARecommendedPromptsUpsell,schedule:{intervalMs:1440*60*1e3,maxShowsPerInterval:3},termination:{maxShows:9}}),[]);_.useEffect(()=>{if((!ce||!fe||d!=null||!Ce.shouldShow())&&!l||de||ae||q==null)return;const Se=[...ie];u.set(Re=>Re.length>0?Re:(v.current||(Ce.recordShown(),U.logEventWithStatsig("chatgpt_contextual_answers_recommended_prompt_shown","chatgpt_contextual_answers_recommended_prompt_shown",{prompts:Se.map(tt=>{var Ke;return(Ke=tt.data)==null?void 0:Ke.id}).join(","),shown_times:Ce.getShownTimes().toString()}),v.current=!0),Se))},[ie,de,ae,ce,fe,d,Ce,l,q,u]);const ee=$v(c,!1),te=$v(c,!0),le=ff(c,!0),re=jF();_.useEffect(()=>Mo(()=>gl(e),Se=>{var tt;const Re=()=>{u.set(Ke=>Ke.filter(nt=>nt.theme!==et.Search&&nt.theme!==et.ChatGPTTrending&&nt.theme!==et.ImageGenTrending&&nt.theme!==et.Image&&nt.theme!==et.Slurm&&nt.theme!==et.Tatertot&&nt.theme!==et.ContextualAnswersNUX&&nt.theme!==et.Glaux))};if(Se&&s&&!n&&!o||l)if(f)u.set(p.length>0?p:[]),b.current.bing===0&&(b.current.bing=Date.now(),x());else if(!d&&(A||S)&&E()&&le.get("homepage_prompt_style","chips")==="autocomplete"){if(le.get("personalized_prompts_enabled",!1)&&O.length>0){const Ke=ot=>{var Ht,nn,sn,on,kn,an;const Lt=(sn=(nn=(Ht=ot.oneliner)!=null?Ht:ot.body)!=null?nn:ot.prompt)!=null?sn:ot.title;if(!Lt)return null;const vt=Lt;return B(w({},ot),{type:ke.Autocomplete,title:(on=ot.title)!=null?on:vt,body:(an=(kn=ot.body)!=null?kn:ot.oneliner)!=null?an:"",autocompletionChunks:MF(_c(e),vt)})},nt=O.slice(0,m).map(Ke).filter(Boolean);u.set(nt)}else if(S&&!N){const Ke=G4e(re,u(),4,3);u.set(Ke.map(nt=>B(w({},nt),{body:""})))}}else if(!d&&ee.get("enable_data",!1)){u.set(()=>S&&T&&h.length>0&&te.get("enable_image_gen_trending",!1)?h:S&&!T&&g.length>0&&te.get("enable_chatgpt_trending",!1)?g:[]);const Ke=Date.now(),nt=b.current.chatgpt;(nt.time===0||Ke-nt.time>kRe||nt.imageGen!==T)&&(b.current.chatgpt={time:Ke,imageGen:T},y(T))}else if(Y&&Z&&Z.length>0)u.set(Z);else if(d===Ie.PictureV2){const Ke=kF($);u.set(Ke)}else if(d===Ie.Tatertot)u.set(v2($,ye));else if(d===Ie.Slurm)Ve(c,"1704943789").get("post_connection_connector_button",!1)&&ie.length>0&&!ae&&u.set(ie);else if(Tm(d))u.set(KNe({intl:$,workspaceId:(tt=q==null?void 0:q.getWorkspaceId())!=null?tt:""}));else{if(u().length>0&&u()[0].theme===et.ContextualAnswersNUX)return;if(u().length===0)return;Re()}else Re()},{fireImmediately:!0}),[e,x,y,ee,te,f,u,p,g,h,d,S,$,t,s,n,o,Q,a,i,l,M,T,ye,re,O,le,ie,ae,c,E,A,q,N,Z,Y]),_.useEffect(()=>jl(()=>{if(gl(e)){const Se=u().filter(Re=>Re.type!==ke.Autocomplete);Se.length>0&&fj(Se,t)}}),[e,u,t]);const ve=jRe(f),_e=Ve(c,"4031588851"),we=_e.get("autocomplete_min_char",4),De=_e.get("autocomplete_fetch_interval",200),ge=_.useRef(null),Ne=_.useCallback(yr(async Se=>{if(!ERe(e,we)){u.set([]);return}const Re=_c(e);if(!(ge.current&&ge.current.length>we&&Re.startsWith(ge.current)))try{const tt=(await MRe({text:Re,numCompletions:Se,isUnauthenticated:D,isThreadUsingSearchMode:f,autocompleteMode:ve,activeSystemHintType:d})).filter(F).map(V);u.set(Ke=>{const nt=Ke.filter(F),ot=tt.filter(Lt=>{const vt=Gx(Lt);return!nt.some(Ht=>{const nn=Gx(Ht);if(vt===nn)return!0;const sn=new RegExp("[\\p{P}\\p{S}]$","u"),on=vt.replace(sn,""),kn=nn.replace(sn,"");return on===nn||vt===kn||on===kn})}).slice(0,m-nt.length);return[...nt,...ot]})}catch(tt){}},ve==="BING"?150:De),[e,ve,V,De,d]),je=_.useCallback(()=>{z();const Se=m-u().filter(F).length;Se>0&&Ne(Se)},[Ne,z,u,F]),Te=_.useMemo(()=>ve==="HARDCODED"?z:je,[ve,je,z]),Fe=_.useCallback(()=>{Te()},[Te]),Ge=_.useCallback(()=>{z(!0),_c(e).indexOf("\n")>0&&u.set([])},[e,u,z]);_.useEffect(()=>ml(Et(e).dom,{input:Fe}),[e,Fe]),_.useEffect(()=>Mo(()=>Oh(e),Ge),[e,Ge])};function ERe(t,e){var s;const n=Et(t).state.doc;return n.childCount===1&&((s=n.firstChild)==null?void 0:s.isTextblock)===!0&&n.content.size>=e&&n.content.size<=80}const ARe=()=>{const[t,e]=_.useState([]),[n,s]=_.useState([]),[o,a]=_.useState([]),i=Yo(),l=G(),c=$v(l,!1),d=c.get("num_mobile_results",wRe),u=c.get("num_desktop_results",CRe),m=c.get("item_label","PROMPT"),f=_.useCallback(async()=>{const h=(await pe.safePost("/conversation/experimental/generate_trending_suggestions",{requestBody:{num_items:jU},authOption:qt.SendIfAvailable})).suggestions.map((x,y)=>({type:ke.Trending,title:uT(x),body:"",icon:r.jsx(dT,{className:"h-full w-full"}),prompt:uT(x),id:"search-trending-".concat(y),theme:et.Search}));return e(h),h},[]),p=_.useCallback(async g=>{const x=((await pe.safeGet("/trending/chatgpt",{parameters:{query:w({num_items:i?u:d},g?{tags:["image_gen"]}:{})},authOption:qt.SendIfAvailable})).topics||[]).map((y,b)=>{var T,E,A,N,R;const v=(T=y.suggested_prompts)!=null?T:[],S=v.length>0?v[Math.floor(Math.random()*v.length)]:void 0,C=(E=S==null?void 0:S.short_prompt)!=null?E:"",k=(N=(A=y.short_title)!=null?A:y.title)!=null?N:"",M=(R=S==null?void 0:S.prompt)!=null?R:Array.isArray(y.prompts)&&y.prompts.length>0?y.prompts[Math.floor(Math.random()*y.prompts.length)]:k;return{type:ke.Trending,title:m==="TITLE"?k:C,body:"",icon:r.jsx(dT,{className:"h-full w-full"}),prompt:M,id:"chatgpt-trending-".concat(b),theme:g?et.ImageGenTrending:et.ChatGPTTrending}});return g?a(x):s(x),x},[i,d,u,m]);return{bingTrendingSuggestions:t,chatgptTrendingSuggestions:n,imageGenTrendingSuggestions:o,fetchBingTrendingSuggestions:f,fetchChatgptTrendingSuggestions:p}};function uT(t){return t.split(" ").map(Rp).join(" ")}const Gx=t=>"".concat(t.title).concat(t.body).toLocaleLowerCase();function IRe(){const t=G(),n=Ve(t,"4031588851",{disableExposureLog:!0}).get("autocomplete_qualified_start_date","2099-09-13T00:00:00Z"),s=pn();return!!s&&s.created*1e3>=new Date(n).getTime()}function jRe(t){const{isUnauthenticated:e}=Un(),n=G(),s=xe(n,"1468311859"),o=xe(n,"2053937752"),a=xe(n,"3664702598"),i=xe(n,"471233253"),l=Ve(n,"4031588851"),c=Ve(n,"3533083032"),d=IRe(),u=!e&&s||e&&o,m=(!e&&a||e&&i)&&d;let f="HARDCODED";{const p=e?c:l;if(t){const g=p.get("search_autocomplete_mode","");u&&g&&(f=g)}else m&&(f=p.get("autocomplete_mode","HARDCODED"))}return f}const gnt=({clientThreadId:t,isGizmoThread:e,isNewThread:n,isProjectThread:s})=>{const o=wr();return TRe({clientThreadId:t,composerController:o,isGizmoThread:e,isNewThread:n,isProjectThread:s}),null};function hnt(t){"use forget";const e=H.c(6),n=G();let s;e[0]!==n?(s=Nr(n),e[0]=n,e[1]=s):s=e[1];const o=s;let a,i;e[2]!==t||e[3]!==o?(a=()=>Mo(()=>o.isFeedbackModalOpen$()&&o.shouldAutoSendCompletion$(),l=>{if(!l)return;o.shouldAutoSendCompletion$.set(!1);const c=o.autoSendCompletion;setTimeout(()=>{var d;c&&c.targetedReply&&t({eventSource:"mouse",promptMessage:us(c.userMessage,{targeted_reply:(d=c.targetedReply)!=null?d:void 0}),appendMessages:[Mh(c.targetedReply)]})},250)},{fireImmediately:!0}),i=[o,t],e[2]=t,e[3]=o,e[4]=a,e[5]=i):(a=e[4],i=e[5]),_.useEffect(a,i)}const _nt=()=>{"use forget";const t=H.c(3),e=Xo();let n,s;t[0]!==e?(n=()=>{if(e)return Mo(()=>{var l;const o=Ea(e);if(!o||lq(e))return;const a=(l=Wo(Pc(e)))==null?void 0:l.messages.find(PRe),i="messageId"in o&&cq(e,c=>c.id===o.messageId)==null;return[a,i]},o=>{if(!o)return;const[a,i]=o,l=Ea(e);if((Zt(l,"searchSources")||Zt(l,"retrievalResults"))&&a&&l.messageId!==a.id){const c=Pc(e).length-1,d=a.id,m=jh(a).some(NRe)?{type:"retrievalResults",turnIndex:c,messageId:d}:{type:"searchSources",turnIndex:c,messageId:d,scrollToHeader:Zt(l,"searchSources")?l.scrollToHeader:void 0};NS(e,m)}else i&&!Zt(l,"entity")&&M1(e)},{equals:Cm})},s=[e],t[0]=e,t[1]=n,t[2]=s):(n=t[1],s=t[2]),_.useEffect(n,s)};function PRe(t){return t.status!=="in_progress"&&jh(t).length>0}function NRe(t){return t.type==="file"||t.type==="file_navlist"}const PU="ChatGPT";function RRe(t,e){const[n]=Ue(t,s=>{var o;return[(o=s==null?void 0:s.title)!=null?o:null]});return _.useMemo(()=>LRe(t,n,e),[t,e,n])}function LRe(t,e,n){const s=Na(t);return n&&n.kind===Tt.GizmoInteraction&&n.gizmo?s?"ChatGPT - ".concat(n.gizmo.gizmo.display.name):e&&"".concat(n.gizmo.gizmo.display.name," - ").concat(e):e||PU}function xnt(t){const e=G();_.useEffect(()=>bh(e).addAction({key:"prev-message",group:On.Chat,keyboardBinding:[ze.Shift,ze.ArrowUp],actionMessageDescriptor:He({id:"N8H1CM",defaultMessage:"Previous message"}),action:n=>mT(n,"up"),enabled:!t},{key:"next-message",group:On.Chat,keyboardBinding:[ze.Shift,ze.ArrowDown],actionMessageDescriptor:He({id:"d69Yjj",defaultMessage:"Next message"}),action:n=>mT(n,"down"),enabled:!t}),[e,t])}function mT(t,e){if(t.target instanceof HTMLDivElement&&t.target.isContentEditable&&t.target.textContent)return!1;const n=[...document.querySelectorAll("article[data-turn=assistant]")];let s;if(document.activeElement instanceof HTMLElement&&n.includes(document.activeElement)&&fT(document.activeElement))s=n.indexOf(document.activeElement)+(e==="down"?1:-1);else{const o=n.findIndex(ORe);if(o===-1)return!1;s=e==="down"?o+1:fT(n[o])?o-1:o}if(s===-1||s>=n.length)return!1;n[s].focus({preventScroll:!0}),n[s].scrollIntoView({behavior:"smooth",block:"start"})}function ORe(t){const e=t.getBoundingClientRect();return e.bottom>NU()&&e.top<window.innerHeight}function fT(t){const e=t.getBoundingClientRect();return e.top>=NU()&&e.top<window.innerHeight}function NU(){return Math.min(200,Math.max(70,window.innerHeight*.2))}const ynt=j(()=>I(()=>import("./gkuehqsbo5y71nbh.js"),__vite__mapDeps([468,1,29,30,368,369,367,365,339,461,247,33])).then(t=>t.ProjectHomePage)),DRe=j(()=>I(()=>import("./3j20em1lilnrpdcm.js").then(t=>t._),__vite__mapDeps([376,1])),{loading:t=>L(t)}),FRe=j(()=>I(()=>import("./c1l8fjfcsh4r8b9b.js").then(t=>t._),__vite__mapDeps([469,1])),{loading:t=>L(t)});function e_({domain:t,url:e,title:n,thumbnail_url:s,description:o,pub_date:a,subscript:i,theme:l="default",thumbnailOverlay:c,ThumbnailErrorIcon:d=DRe,descriptionClassName:u="line-clamp-2"}){const m=J(),f=_.useRef(!1),[p,g]=_.useState("loading"),[h,x]=_.useState("loading");return _.useEffect(()=>{setTimeout(()=>{x(y=>y==="loading"?"error":y)},5e3)},[]),r.jsxs(ao,{href:e,target:"_self",className:W("hover:bg-token-interactive-bg-secondary-hover thread-sm:px-4 flex w-full justify-between gap-6 rounded-xl px-2 py-2.5",!o&&"min-h-[96px]"),draggable:!1,onMouseDown:()=>f.current=!1,onMouseMove:()=>f.current=!0,onClick:y=>f.current?(f.current=!1,y.preventDefault()):null,children:[r.jsxs("div",{className:"flex flex-col overflow-hidden",children:[l==="default"&&r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:W("border-token-border-light border-thin relative h-[28px] w-[28px] shrink-0 self-center overflow-hidden rounded-lg p-1.25",h==="loading"&&"loading-results-shimmer"),children:[r.jsx("div",{className:W("absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat opacity-30 dark:opacity-20",h==="loaded"&&"blur-md",h==="error"&&"bg-token-bg-tertiary"),children:r.jsx(Ts,{url:e,size:256,minSize:32,containerClassName:W(h!=="loaded"&&"hidden"),className:"h-10 w-10"})}),r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[r.jsx(Ts,{url:e,size:128,minSize:32,containerClassName:W("overflow-hidden rounded-md",h!=="loaded"&&"hidden"),className:"icon-sm h-4 w-4",onLoad:()=>x("loaded"),onError:()=>x("error")}),h==="error"&&r.jsx(FRe,{className:"icon-md text-token-text-tertiary"})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"line-clamp-1 text-sm [overflow-wrap:anywhere] select-text",children:t}),r.jsx("span",{className:"text-token-text-secondary mt-0.5 line-clamp-1 align-top text-xs [overflow-wrap:anywhere] select-text",children:BRe(e)})]})]}),n&&r.jsx("span",{className:W("mt-2.5 text-base font-medium [overflow-wrap:anywhere] text-[var(--interactive-label-accent-default)] select-text",l==="default"&&"line-clamp-2",l==="sub-result"&&"line-clamp-1"),children:n}),(o!=null?o:a)&&r.jsxs("div",{className:W("text-token-text-secondary mt-1 line-clamp-2 w-full text-sm font-normal [overflow-wrap:anywhere] select-text",u),children:[r.jsx("span",{className:"text-token-text-tertiary",children:a&&r.jsxs(r.Fragment,{children:[QF(m,new Date(a)),o&&r.jsxs(r.Fragment,{children:[r.jsx(_M,{}),"",r.jsx(_M,{})]})]})}),o]}),i&&r.jsx("div",{className:"text-token-text-tertiary mt-1 line-clamp-1 text-sm select-text",children:i})]}),s&&l==="default"&&r.jsx("div",{className:"self-center",children:r.jsxs("div",{className:"relative ms-auto block aspect-video min-h-[144px] w-[222px] min-w-0 overflow-hidden rounded-xl",children:[s&&r.jsx("img",{src:s,alt:"",className:W("absolute inset-0 h-full w-full object-cover opacity-0",p==="loaded"&&"opacity-100"),loading:"lazy",onLoad:()=>g("loaded"),onError:()=>g("error")}),r.jsx("div",{className:W("loading-results-shimmer absolute inset-0",{hidden:p!=="loading"})}),r.jsx("div",{className:W("bg-token-bg-secondary absolute inset-0 flex items-center justify-center",{hidden:p!=="error"}),children:r.jsx(d,{className:"icon-2xl opacity-15"})}),c]})})]})}function BRe(t){let e;try{e=decodeURIComponent(t)}catch(o){console.warn("Unable to decode URL",{url:t,error:o}),e=t}const n=e.replace(/\/$/,"");return n.match("youtube.com/watch")?n:n.replace(/\?.*$/,"")}function URe(t){return t.find(e=>{var n;return!!((n=e.metadata)!=null&&n.crisis_helpline_message)})}function VRe(t){"use forget";const e=H.c(11),{message:n,className:s}=t,o=n.metadata.crisis_helpline_message;let a;e[0]!==s?(a=W("shadow-short flex flex-col rounded-lg p-4",s),e[0]=s,e[1]=a):a=e[1];let i;e[2]===Symbol.for("react.memo_cache_sentinel")?(i={a:$Re},e[2]=i):i=e[2];let l;e[3]!==o.text?(l=r.jsx(Hs,{className:"text-sm",componentOverrides:i,children:o.text}),e[3]=o.text,e[4]=l):l=e[4];let c;e[5]!==o.links?(c=o.links.length>0&&r.jsx("div",{className:"flex flex-col gap-2",children:o.links.map(GRe)}),e[5]=o.links,e[6]=c):c=e[6];let d;return e[7]!==a||e[8]!==l||e[9]!==c?(d=r.jsxs("div",{className:a,children:[l,c]}),e[7]=a,e[8]=l,e[9]=c,e[10]=d):d=e[10],d}function GRe(t){return r.jsx("div",{className:"rounded-lg bg-[var(--bg-quaternary)] py-1",children:r.jsx(e_,{url:t.url,domain:t.domain,title:t.title,description:t.description})},t.url)}function $Re(t){const o=t,{node:e,children:n}=o,s=Me(o,["node","children"]);return r.jsx("a",B(w({},s),{target:"_blank",rel:"noreferrer",className:"underline hover:no-underline [&&]:text-black [&&]:underline [&&]:hover:text-black dark:[&&]:text-white dark:[&&]:hover:text-white",children:n}))}var wt=(t=>(t.Chat="chat",t.Search="search",t.Images="images",t.Videos="videos",t.News="news",t))(wt||{});const pT="chat";function HRe(t){var e;return t&&(e=Object.values(wt).find(n=>n===t))!=null?e:pT}function t_(){"use forget";const t=H.c(8),[e,n]=zs();let s;if(t[0]!==e){const c=e.get(ly);s=HRe(c),t[0]=e,t[1]=s}else s=t[1];const o=s;let a;t[2]!==o||t[3]!==n?(a=c=>{const{tabType:d,options:u,extraQueryParams:m}=c,f=u===void 0?{}:u;o!==d&&n(p=>{const g=m!=null?m:new URLSearchParams,h=new URLSearchParams([...g,...p]);return h.set(ly,d),h},f)},t[2]=o,t[3]=n,t[4]=a):a=t[4];const i=a;let l;return t[5]!==i||t[6]!==o?(l=[o,i],t[5]=i,t[6]=o,t[7]=l):l=t[7],l}function vnt(t){"use forget";const e=H.c(11),n=G();let s;e[0]!==n?(s=cs(n),e[0]=n,e[1]=s):s=e[1];const o=s,a=ue(it.wantsInitialTab$),[,i]=t_();let l;e[2]!==o||e[3]!==i||e[4]!==a?(l=()=>{o&&a&&a!=="chat"&&(i({tabType:a,options:{replace:!0}}),it.wantsInitialTab$.set(void 0))},e[2]=o,e[3]=i,e[4]=a,e[5]=l):l=e[5];let c;e[6]!==t||e[7]!==o||e[8]!==i||e[9]!==a?(c=[a,i,o,t],e[6]=t,e[7]=o,e[8]=i,e[9]=a,e[10]=c):c=e[10],_.useEffect(l,c)}function bnt(t){switch(t){case"answer":return"chat";case"web":return"search";case"images":return"images";case"videos":return"videos"}}const RU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.07715 11.7168C9.31399 11.1993 10.4531 11.1663 11.6777 11.6191L11.9238 11.7168L12.042 11.7812C12.2973 11.9555 12.4042 12.2906 12.2803 12.5869C12.1562 12.8832 11.8424 13.0421 11.5391 12.9824L11.4102 12.9434L11.2266 12.8711C10.3144 12.5309 9.5197 12.5548 8.59082 12.9434C8.25208 13.0851 7.86156 12.9256 7.71973 12.5869C7.57799 12.2481 7.73836 11.8586 8.07715 11.7168Z"}),_.createElement("path",{d:"M7.08301 7.08301C7.77326 7.08301 8.33284 7.64279 8.33301 8.33301C8.33301 9.02336 7.77336 9.58301 7.08301 9.58301C6.39282 9.58281 5.83301 9.02324 5.83301 8.33301C5.83317 7.64291 6.39292 7.08321 7.08301 7.08301Z"}),_.createElement("path",{d:"M12.917 7.08301C13.6071 7.08321 14.1668 7.64291 14.167 8.33301C14.167 9.02324 13.6072 9.58281 12.917 9.58301C12.2266 9.58301 11.667 9.02336 11.667 8.33301C11.6672 7.64279 12.2267 7.08301 12.917 7.08301Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.83496C10.3673 1.83496 10.665 2.13273 10.665 2.5V3.08496H13.084C13.7728 3.08496 14.3302 3.08432 14.7803 3.12109C15.2379 3.15854 15.644 3.23788 16.0205 3.42969L16.2383 3.55176C16.7341 3.85586 17.1378 4.29237 17.4033 4.81348L17.4707 4.95605C17.6149 5.29226 17.6792 5.65318 17.7119 6.05371C17.7392 6.38721 17.7442 6.7793 17.7461 7.24023C18.2408 7.48486 18.5819 7.99377 18.582 8.58301V9.83301C18.582 10.4249 18.2375 10.9351 17.7393 11.1787C17.7316 11.6246 17.7183 12.0205 17.6895 12.374C17.6368 13.018 17.5355 13.5674 17.3213 14.0664L17.2217 14.2773C16.7875 15.1292 16.1108 15.8317 15.2793 16.2979L15.1104 16.3887C14.5555 16.6713 13.9436 16.7963 13.208 16.8564C12.4799 16.9159 11.5726 16.915 10.417 16.915H9.58398C8.42845 16.915 7.52104 16.9159 6.79297 16.8564C6.14901 16.8038 5.59958 16.7015 5.10059 16.4873L4.88965 16.3887C3.98077 15.9255 3.24152 15.1862 2.77832 14.2773C2.49553 13.7223 2.37068 13.1099 2.31055 12.374C2.28166 12.0205 2.26719 11.6247 2.25977 11.1787C1.76193 10.935 1.41797 10.4246 1.41797 9.83301V8.58301C1.41809 7.99377 1.75916 7.48486 2.25391 7.24023C2.25555 6.77929 2.26084 6.38722 2.28809 6.05371C2.3255 5.59593 2.40488 5.19008 2.59668 4.81348C2.90012 4.21801 3.38499 3.7331 3.98047 3.42969C4.357 3.23799 4.76303 3.1585 5.2207 3.12109C5.67088 3.08434 6.22809 3.08496 6.91699 3.08496H9.33496V2.5C9.33496 2.13273 9.63273 1.83496 10 1.83496ZM6.91699 4.41504C6.20618 4.41504 5.71257 4.41596 5.3291 4.44727C4.95363 4.47795 4.74196 4.5348 4.58398 4.61523C4.23879 4.79113 3.95815 5.07182 3.78223 5.41699C3.70172 5.575 3.64496 5.78642 3.61426 6.16211C3.58292 6.54563 3.58203 7.03896 3.58203 7.75V9.58301C3.58203 10.7606 3.58269 11.6042 3.63672 12.2656C3.69012 12.9192 3.79255 13.3366 3.96387 13.6729C4.29959 14.3317 4.83531 14.8674 5.49414 15.2031L5.62402 15.2646C5.93806 15.3997 6.32958 15.4836 6.90137 15.5303C7.56272 15.5843 8.40657 15.585 9.58398 15.585H10.417C11.5946 15.585 12.4382 15.5843 13.0996 15.5303C13.753 15.4769 14.1706 15.3744 14.5068 15.2031L14.748 15.0684C15.2964 14.7319 15.7434 14.2493 16.0371 13.6729L16.0977 13.543C16.2328 13.2289 16.3175 12.8377 16.3643 12.2656C16.4183 11.6042 16.4189 10.7606 16.4189 9.58301V7.75C16.4189 7.03898 16.4181 6.54562 16.3867 6.16211C16.3637 5.88018 16.3259 5.69064 16.2744 5.54688L16.2188 5.41699C16.0648 5.11489 15.8304 4.86186 15.543 4.68555L15.417 4.61523C15.2591 4.53477 15.0472 4.47798 14.6719 4.44727C14.2885 4.41594 13.7947 4.41504 13.084 4.41504H6.91699Z"})),WRe=Object.freeze(Object.defineProperty({__proto__:null,default:RU},Symbol.toStringTag,{value:"Module"})),LU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.0013 7.33331C16.0013 6.62228 16.0014 6.12894 15.9701 5.74542C15.947 5.46347 15.9092 5.27396 15.8578 5.13019L15.8021 5.00031C15.6482 4.6982 15.4137 4.44517 15.1263 4.26886L14.9994 4.19855C14.8414 4.11809 14.6298 4.06127 14.2542 4.03058C13.8708 3.99926 13.3772 3.99835 12.6663 3.99835H7.33334C6.6223 3.99835 6.12897 3.99924 5.74545 4.03058C5.46359 4.05361 5.27396 4.09047 5.13021 4.14191L5.00033 4.19855C4.69807 4.35257 4.4452 4.58669 4.26888 4.87433L4.19857 5.00031C4.11806 5.15831 4.0613 5.36972 4.0306 5.74542C3.99927 6.12894 3.99838 6.62228 3.99838 7.33331V11.7269L5.01791 10.7083L5.19466 10.5482C6.11049 9.80104 7.46204 9.85459 8.31576 10.7083L13.6038 15.9964C13.8549 15.9923 14.0676 15.9853 14.2542 15.97C14.6296 15.9394 14.8414 15.8824 14.9994 15.8021L15.1263 15.7308C15.4137 15.5545 15.6482 15.3014 15.8021 14.9993L15.8578 14.8694C15.9092 14.7257 15.947 14.536 15.9701 14.2542C16.0014 13.8707 16.0013 13.3772 16.0013 12.6663V7.33331ZM7.37533 11.6487C7.00855 11.282 6.42794 11.2593 6.03451 11.5804L5.95834 11.6487L4.00228 13.6048C4.00643 13.8555 4.01538 14.0678 4.0306 14.2542C4.06129 14.6298 4.11811 14.8413 4.19857 14.9993L4.26888 15.1263C4.44519 15.4137 4.69822 15.6481 5.00033 15.8021L5.13021 15.8577C5.27398 15.9092 5.46349 15.947 5.74545 15.97C6.12896 16.0014 6.6223 16.0013 7.33334 16.0013H11.7269L7.37533 11.6487ZM13.0853 7.91632C13.0851 7.36327 12.6364 6.91535 12.0833 6.91535C11.5302 6.91535 11.0816 7.36327 11.0814 7.91632C11.0814 8.46953 11.5301 8.91827 12.0833 8.91827C12.6365 8.91827 13.0853 8.46953 13.0853 7.91632ZM14.4154 7.91632C14.4154 9.20407 13.3711 10.2484 12.0833 10.2484C10.7956 10.2484 9.75131 9.20407 9.75131 7.91632C9.75148 6.62873 10.7957 5.58527 12.0833 5.58527C13.371 5.58527 14.4152 6.62873 14.4154 7.91632ZM17.3314 12.6663C17.3314 13.3553 17.332 13.9124 17.2953 14.3626C17.2625 14.7636 17.1975 15.1247 17.0531 15.4612L16.9867 15.6038C16.7212 16.1248 16.3173 16.5605 15.8216 16.8646L15.6038 16.9866C15.2271 17.1786 14.8206 17.2578 14.3626 17.2952C13.9124 17.332 13.3554 17.3314 12.6663 17.3314H7.33334C6.64425 17.3314 6.08729 17.332 5.63705 17.2952C5.23636 17.2625 4.87571 17.1973 4.53939 17.053L4.39681 16.9866C3.87569 16.7211 3.43919 16.3174 3.13509 15.8216L3.01302 15.6038C2.82105 15.2271 2.74185 14.8206 2.70443 14.3626C2.66766 13.9124 2.6683 13.3553 2.6683 12.6663V7.33331C2.6683 6.64422 2.66764 6.08727 2.70443 5.63702C2.74184 5.17923 2.82122 4.77341 3.01302 4.39679L3.13509 4.17804C3.43919 3.68233 3.87578 3.27848 4.39681 3.013L4.53939 2.9466C4.87568 2.80236 5.2364 2.73715 5.63705 2.70441C6.08729 2.66762 6.64424 2.66827 7.33334 2.66827H12.6663C13.3553 2.66827 13.9124 2.66764 14.3626 2.70441C14.8206 2.74183 15.2271 2.82103 15.6038 3.013L15.8216 3.13507C16.3174 3.43917 16.7211 3.87567 16.9867 4.39679L17.0531 4.53937C17.1973 4.87569 17.2625 5.23634 17.2953 5.63702C17.332 6.08727 17.3314 6.64422 17.3314 7.33331V12.6663Z"})),OU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M14.165 12.668C14.532 12.6682 14.8299 12.966 14.8301 13.333C14.8301 13.7001 14.5321 13.9978 14.165 13.998H5.83203C5.46476 13.998 5.16699 13.7003 5.16699 13.333C5.16717 12.9659 5.46487 12.668 5.83203 12.668H14.165Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.79981 6.00195C9.16705 6.00198 9.46484 6.29974 9.46484 6.66699V10C9.46467 10.3671 9.16695 10.665 8.79981 10.665H5.83301C5.46596 10.6649 5.16814 10.367 5.16797 10V6.66699C5.16797 6.29981 5.46585 6.00209 5.83301 6.00195H8.79981ZM6.49805 9.33496H8.13477V7.33203H6.49805V9.33496Z"}),_.createElement("path",{d:"M14.166 9.33496C14.5332 9.33496 14.8309 9.63288 14.8311 10C14.8309 10.3671 14.5332 10.665 14.166 10.665H11.7998C11.4328 10.6649 11.1349 10.367 11.1348 10C11.1349 9.63296 11.4328 9.33509 11.7998 9.33496H14.166Z"}),_.createElement("path",{d:"M14.166 6.00195C14.5333 6.00195 14.8311 6.29972 14.8311 6.66699C14.8309 7.03412 14.5332 7.33203 14.166 7.33203H11.7998C11.4328 7.3319 11.1349 7.03403 11.1348 6.66699C11.1348 6.29981 11.4326 6.00209 11.7998 6.00195H14.166Z"}),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5 2.66797C14.1891 2.66797 14.7461 2.66732 15.1963 2.7041C15.654 2.74151 16.0599 2.82094 16.4365 3.0127C17.032 3.31609 17.5169 3.80107 17.8203 4.39649C18.0121 4.77301 18.0915 5.17906 18.1289 5.63672C18.1657 6.08689 18.165 6.64406 18.165 7.33301V12.666C18.165 13.3548 18.1656 13.9122 18.1289 14.3623C18.0915 14.8202 18.0122 15.2268 17.8203 15.6035C17.5169 16.199 17.032 16.6829 16.4365 16.9863C16.0599 17.1782 15.6541 17.2575 15.1963 17.2949C14.746 17.3317 14.1891 17.3311 13.5 17.3311H6.5C5.81091 17.3311 5.25395 17.3317 4.80371 17.2949C4.34589 17.2575 3.94011 17.1782 3.56348 16.9863C2.96804 16.6829 2.48311 16.1989 2.17969 15.6035C1.98781 15.2268 1.90851 14.8202 1.87109 14.3623C1.83435 13.9122 1.83496 13.3548 1.83496 12.666V7.33301C1.83496 6.64407 1.83431 6.08689 1.87109 5.63672C1.90852 5.17906 1.98793 4.77301 2.17969 4.39649C2.48314 3.80107 2.96803 3.31609 3.56348 3.0127C3.94006 2.82094 4.34597 2.74151 4.80371 2.7041C5.25395 2.66732 5.81092 2.66797 6.5 2.66797H13.5ZM6.5 3.99805C5.78898 3.99805 5.29563 3.99894 4.91211 4.03027C4.53651 4.06097 4.32499 4.11777 4.16699 4.19824C3.82183 4.37412 3.54117 4.65487 3.36524 5C3.28475 5.15796 3.22797 5.36961 3.19727 5.74512C3.16594 6.12858 3.16504 6.62214 3.16504 7.33301V12.666C3.16504 13.3767 3.16598 13.8705 3.19727 14.2539C3.22794 14.6293 3.28485 14.8411 3.36524 14.999C3.54114 15.3443 3.82178 15.6258 4.16699 15.8018C4.32498 15.8822 4.53656 15.939 4.91211 15.9697C5.29563 16.0011 5.78896 16.001 6.5 16.001H13.5C14.211 16.001 14.7044 16.0011 15.0879 15.9697C15.4634 15.939 15.675 15.8822 15.833 15.8018C16.1782 15.6258 16.4589 15.3443 16.6348 14.999C16.7152 14.8411 16.7721 14.6293 16.8027 14.2539C16.834 13.8705 16.835 13.3767 16.835 12.666V7.33301C16.835 6.62214 16.8341 6.12858 16.8027 5.74512C16.772 5.36961 16.7153 5.15796 16.6348 5C16.4588 4.65487 16.1782 4.37412 15.833 4.19824C15.675 4.11777 15.4635 4.06097 15.0879 4.03027C14.7044 3.99894 14.211 3.99805 13.5 3.99805H6.5Z"})),DU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M10 2.125C14.3492 2.125 17.875 5.65076 17.875 10C17.875 14.3492 14.3492 17.875 10 17.875C5.65076 17.875 2.125 14.3492 2.125 10C2.125 5.65076 5.65076 2.125 10 2.125ZM7.88672 10.625C7.94334 12.3161 8.22547 13.8134 8.63965 14.9053C8.87263 15.5194 9.1351 15.9733 9.39453 16.2627C9.65437 16.5524 9.86039 16.625 10 16.625C10.1396 16.625 10.3456 16.5524 10.6055 16.2627C10.8649 15.9733 11.1274 15.5194 11.3604 14.9053C11.7745 13.8134 12.0567 12.3161 12.1133 10.625H7.88672ZM3.40527 10.625C3.65313 13.2734 5.45957 15.4667 7.89844 16.2822C7.7409 15.997 7.5977 15.6834 7.4707 15.3486C6.99415 14.0923 6.69362 12.439 6.63672 10.625H3.40527ZM13.3633 10.625C13.3064 12.439 13.0059 14.0923 12.5293 15.3486C12.4022 15.6836 12.2582 15.9969 12.1006 16.2822C14.5399 15.467 16.3468 13.2737 16.5947 10.625H13.3633ZM12.1006 3.7168C12.2584 4.00235 12.4021 4.31613 12.5293 4.65137C13.0059 5.90775 13.3064 7.56102 13.3633 9.375H16.5947C16.3468 6.72615 14.54 4.53199 12.1006 3.7168ZM10 3.375C9.86039 3.375 9.65437 3.44756 9.39453 3.7373C9.1351 4.02672 8.87263 4.48057 8.63965 5.09473C8.22547 6.18664 7.94334 7.68388 7.88672 9.375H12.1133C12.0567 7.68388 11.7745 6.18664 11.3604 5.09473C11.1274 4.48057 10.8649 4.02672 10.6055 3.7373C10.3456 3.44756 10.1396 3.375 10 3.375ZM7.89844 3.7168C5.45942 4.53222 3.65314 6.72647 3.40527 9.375H6.63672C6.69362 7.56102 6.99415 5.90775 7.4707 4.65137C7.59781 4.31629 7.74073 4.00224 7.89844 3.7168Z"})),FU=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2998 2.6709C13.318 2.66997 13.3361 2.67031 13.3545 2.6709C13.739 2.67372 14.0728 2.68047 14.3623 2.7041C14.8202 2.74151 15.2268 2.82085 15.6035 3.0127L15.8213 3.13477C16.317 3.4388 16.7208 3.87553 16.9863 4.39649L17.0527 4.53906C17.197 4.87528 17.2622 5.23618 17.2949 5.63672C17.3317 6.08689 17.3311 6.64407 17.3311 7.33301V12.666C17.3311 13.3549 17.3317 13.9121 17.2949 14.3623C17.2622 14.7632 17.1971 15.1245 17.0527 15.4609L16.9863 15.6035C16.6829 16.1988 16.1988 16.6829 15.6035 16.9863C15.2268 17.1783 14.8203 17.2575 14.3623 17.2949C13.9121 17.3317 13.3549 17.3311 12.666 17.3311H7.33301C6.64403 17.3311 6.08691 17.3317 5.63672 17.2949C5.23614 17.2622 4.87531 17.197 4.53906 17.0527L4.39649 16.9863C3.87551 16.7208 3.4388 16.317 3.13477 15.8213L3.0127 15.6035C2.82086 15.2269 2.74151 14.8202 2.7041 14.3623C2.66736 13.9122 2.66797 13.3548 2.66797 12.666V7.33301C2.66797 6.64407 2.66732 6.08689 2.7041 5.63672C2.74152 5.17906 2.82093 4.77301 3.0127 4.39649C3.31613 3.80105 3.80103 3.31611 4.39649 3.0127C4.77304 2.82092 5.17902 2.74152 5.63672 2.7041C6.08691 2.66732 6.64403 2.66797 7.33301 2.66797H12.666C12.891 2.66797 13.1021 2.66971 13.2998 2.6709ZM3.99805 8.16504V12.666C3.99805 13.3767 3.99899 13.8705 4.03027 14.2539C4.06094 14.6292 4.11789 14.8411 4.19824 14.999L4.26856 15.126C4.4448 15.4133 4.69804 15.6478 5 15.8018L5.12988 15.8574C5.27361 15.9089 5.46331 15.9467 5.74512 15.9697C6.12859 16.0011 6.6221 16.001 7.33301 16.001H12.666C13.3767 16.001 13.8705 16.001 14.2539 15.9697C14.6292 15.9391 14.8411 15.8821 14.999 15.8018C15.3443 15.6258 15.6258 15.3443 15.8018 14.999L15.8574 14.8691C15.9088 14.7254 15.9467 14.5355 15.9697 14.2539C16.001 13.8705 16.001 13.3767 16.001 12.666V8.16504H3.99805ZM12.6484 6.83496H15.999C15.9976 6.38034 15.9932 6.03187 15.9697 5.74512C15.9467 5.46336 15.9089 5.2736 15.8574 5.12988L15.8018 5C15.6478 4.69805 15.4133 4.44479 15.126 4.26856L14.999 4.19824C14.8411 4.11788 14.6292 4.06094 14.2539 4.03027C14.1122 4.01871 13.9555 4.01257 13.7783 4.00781L12.6484 6.83496ZM7.33301 3.99805C6.6221 3.99805 6.12859 3.99894 5.74512 4.03027C5.36955 4.06098 5.15798 4.11775 5 4.19824C4.65484 4.37414 4.37416 4.65485 4.19824 5C4.11776 5.15796 4.06098 5.36961 4.03027 5.74512C4.00685 6.03186 4.00272 6.38034 4.00098 6.83496H6.21582L7.35059 3.99805H7.33301ZM7.64844 6.83496H11.2158L12.3506 3.99805H8.7832L7.64844 6.83496Z"}));function gf(t){switch(t){case wt.Search:return DU;case wt.Images:return LU;case wt.Videos:return FU;case wt.News:return OU;case wt.Chat:return null}}function ad({IconComponent:t=RU,children:e}){return r.jsxs("div",{className:"flex min-h-[160px] flex-col items-center justify-center gap-3",children:[r.jsx(t,{className:"icon-xl text-token-text-tertiary"}),r.jsx("div",{className:"text-token-text-tertiary text-center",children:e})]})}function BU({className:t,direction:e="horizontal",isMasked:n=!0,children:s,style:o}){return n?r.jsx("div",{className:W(e==="horizontal"?"[mask-image:linear-gradient(to_right,black_calc(100%_-_2rem),transparent_100%)]":"[mask-image:linear-gradient(to_bottom,black_calc(100%_-_2rem),transparent_100%)]","[mask-size:100%_100%]","[mask-repeat:no-repeat]",t),style:o,children:s}):r.jsx("div",{className:t,style:o,children:s})}function zRe({navlink:t,linkTarget:e="_self"}){var d;const n=G(),s=ue(()=>Cr(n)),o=_.useRef(null),a=_.useRef(null),[i,l]=_.useState(!1);En(()=>{if(!o.current||!a.current)return;const u=o.current.getBoundingClientRect().width-16-8-24,m=a.current.getBoundingClientRect().width>u;l(m)},[]);const c=r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-token-text-secondary",children:t.domain}),t.snippet&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-token-text-tertiary",children:"  "}),r.jsx("span",{className:"text-token-text-tertiary",children:t.title})]})]});return r.jsx(XF,{favicon:r.jsx(Ts,{url:t.url,size:32,minSize:16,applySizeToImg:!1,showLoadingAnimation:!0,className:"h-4 w-4 shrink-0 rounded-full border-1 border-gray-200"}),heading:t.title,title:null,quoteHeading:null,quoteText:null,snippet:(d=t.snippet)!=null?d:null,isContentBlocked:!1,theme:"white",children:r.jsxs(ao,{ref:o,href:t.url,target:e,className:W(s?"hover:bg-token-bg-tertiary bg-(--bg-quaternary)":"bg-token-bg-tertiary hover:bg-token-bg-secondary","h-full max-w-[284px] rounded-lg px-3","flex w-full items-center gap-2 select-none"),children:[r.jsx(Ts,{url:t.url,size:32,minSize:16,applySizeToImg:!1,className:"h-4 w-4 shrink-0 rounded-full",showLoadingAnimation:!0}),r.jsx(BU,{isMasked:i,className:"overflow-hidden text-sm whitespace-nowrap",children:c}),r.jsx("div",{ref:a,className:"pointer-events-none absolute text-sm opacity-0",children:c})]})})}var ua=(t=>(t[t.Classifier=0]="Classifier",t[t.Conversation=1]="Conversation",t[t.ShortQuery=2]="ShortQuery",t))(ua||{});function qRe(t){switch(t){case 0:return"navlinks_shown_cl";case 1:return"navlinks_shown_co";case 2:return"navlinks_shown_sq"}}function YRe(t,e,n,s,o){var u,m;if(!n)return;const a=t,i=e,l=n.getStartTime();if(n.logTimingOnce("navlinks_shown",{overrideDurationMs:a-l}),o!==void 0){const f=qRe(o);n.logTimingOnce(f,{overrideDurationMs:a-l}),Ee.count(Ae.DEFAULT,"navlinks_show_decision_counter",[{key:"source",value:f}])}if(!s)return;let c=0;s.requestedTimeUnixEpochMs!==void 0&&(c=i-(s==null?void 0:s.requestedTimeUnixEpochMs)-(a-l),n.logTimingOnce("navlinks_before_js",{overrideDurationMs:c}),n.logTimingOnce("navlinks_shown_total",{overrideDurationMs:i-(s==null?void 0:s.requestedTimeUnixEpochMs)}));const d=o===ua.Classifier;if(s.lastStartFetch!==void 0&&s.firstStartFetch!==void 0&&s.firstNavlinkFetched!==void 0){const f=Math.max(d&&s.firstClassifierFetched!==void 0?s.firstClassifierFetched-s.lastStartFetch:0,0);let p=Math.max(Math.min(s.lastStartFetch-s.firstStartFetch,s.firstNavlinkFetched-s.firstStartFetch),0);o===ua.Conversation&&(p=0),n.logTimingOnce("navlinks_typeahead_savings",{overrideDurationMs:p}),n.logTimingOnce("navlinks_typeahead_savings_adj",{overrideDurationMs:Math.max(p-f,0)})}if(s.firstRoundtripTime!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_roundtrip_latency",{overrideDurationMs:s.firstRoundtripTime-s.firstStartFetch}),s.firstNavlinkFetched!==void 0&&s.firstStartFetch!==void 0&&n.logTimingOnce("navlinks_first_fetch_latency",{overrideDurationMs:s.firstNavlinkFetched-s.firstStartFetch}),s.firstClassifierFetched!==void 0&&s.lastStartFetch!==void 0&&n.logTimingOnce("navlinks_classifier_latency",{overrideDurationMs:s.firstClassifierFetched-s.lastStartFetch}),s.requestedTimeUnixEpochMs){const f=Math.max((u=s.firstNavlinksFetchedTS)!=null?u:0,d&&(m=s.firstClassifierFetchedTS)!=null?m:0,s.requestedTimeUnixEpochMs);let p=i-f;o===ua.Conversation&&(p=c),n.logTimingOnce("navlinks_wait_for_ui",{overrideDurationMs:p})}}const gT=new Set,$x=new Map;function ZRe({content:t,clientThreadId:e,navlinksShowDecisionSource:n,analytics:s,query:o}){const a=G(),{navlinks:i}=t.widgets,{profiler:l,isRequestActive:c}=UR({namespace:sf.SuperWidget,clientThreadId:e}),d=_.useRef(!1),u=z9(a),m=ue(()=>un(a)),f=u&&i&&i.length>0;if(f&&o!=null){const p="".concat(e,"_").concat(o);$x.has(p)||$x.set(p,{perf:performance.now(),unix:Date.now()})}return _.useEffect(()=>{if(f&&l&&c&&!d.current&&o!=null){const p="".concat(e,"_").concat(o),g=$x.get(p);!gT.has(p)&&g&&(gT.add(p),d.current=!0,YRe(g.perf,g.unix,l,s,n))}},[f,l,c,n,s,o,e]),f?r.jsx("div",{className:m?"-mx-[var(--thread-content-margin)]":"-mx-6",children:r.jsx(XEe,{items:i,getItemKey:p=>p.url,onRenderItem:p=>r.jsx(zRe,{navlink:p}),itemClassName:"h-full border-none",className:"h-10"})}):null}function KRe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}function QRe({content:t}){const e=G();if(!t.widgets.news_tab_enabled)return null;if(!xe(e,"3024830181"))return r.jsx(ad,{children:"Work in progress"});const{news:n}=t.widgets;if(!n||n.length===0){const o=gf(wt.News);return r.jsx(ad,{IconComponent:o,children:r.jsx(P,{id:"sM5f1q",defaultMessage:"No news results found"})})}const s=KRe(n);return r.jsx("div",{className:"thread-sm:-mx-4 flex flex-col",children:s.map((o,a)=>r.jsx(JRe,{news:o},a))})}const JRe=_.memo(function({news:e}){const n=e[0],s=e.slice(1);return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(hT,{news:n},n.url),r.jsx("div",{className:"ms-4 flex flex-col gap-1",children:s.map(o=>r.jsx(hT,{news:o,showDomain:!1},o.url))})]})});function hT({news:t,showDomain:e=!0}){const n=J(),s=_.useMemo(()=>{const o=t.pub_date?new Date(t.pub_date).getTime()/1e3:null;return dq(n,o)},[n,t.pub_date]);return r.jsx(e_,{url:t.url,domain:t.domain,title:t.title,description:t.snippet,theme:e?"default":"sub-result",subscript:s,thumbnail_url:t.thumbnail_url})}const XRe=j(()=>I(()=>Promise.resolve().then(()=>WRe),void 0),{loading:t=>L(t)}),eLe=j(()=>I(()=>import("./l5kfsysq1i5mongk.js").then(t=>t._),__vite__mapDeps([470,1])),{loading:t=>L(t)});function tLe({content:t,turnIndex:e}){const n=G();if(!xe(n,"3024830181"))return r.jsx(ad,{children:"Work in progress"});const{videos:s}=t.widgets;if(!s||s.length===0){const o=gf(wt.Videos);return r.jsx(ad,{IconComponent:o,children:r.jsx(P,{id:"YgdAWv",defaultMessage:"No videos found"})})}return r.jsx("div",{className:"flex flex-col",children:r.jsx("div",{className:"thread-sm:-mx-4 -mx-2 flex flex-col gap-1",children:s.map(o=>r.jsx(_.Fragment,{children:r.jsx(nLe,{video:o,turnIndex:e})},o.url))})})}function nLe({video:t}){return r.jsx(e_,{url:t.url,domain:t.domain,title:t.title,description:t.description,pub_date:t.pub_date,thumbnail_url:t.thumbnail_url,thumbnailOverlay:t.duration&&r.jsxs("div",{className:"absolute start-1.5 bottom-1.5 inline-flex items-center gap-1.5 rounded-full border-[0.5px] border-white/20 bg-black/20 bg-clip-padding px-1 py-1 text-sm font-normal text-white backdrop-blur-2xl",children:[r.jsx(eLe,{className:"size-4"}),r.jsx("span",{className:"pe-1.5",children:sLe(t.duration)})]}),ThumbnailErrorIcon:XRe})}function sLe(t){const e=t.split(":");if(e.length===0)return t;const n=e[0],s=/^(\d+)$/.test(n)?String(Number(n)):n;return e[0]=s,e.join(":")}const _T=2048;function oLe(t,e){const n=encodeURIComponent(t),s=(()=>{switch(e){case wt.Search:return"https://www.google.com/search?q=";case wt.Images:return"https://www.google.com/search?udm=2&q=";case wt.Videos:return"https://www.google.com/search?udm=7&q=";case wt.News:return"https://www.google.com/search?tbm=nws&q=";default:throw new Error("Unsupported tab type: ".concat(e))}})(),o=s+n;if(o.length<=_T)return o;const a=Math.max(0,_T-s.length);let i=n.slice(0,a);if(/%%?$/.test(i))for(;i.endsWith("%");)i=i.slice(0,-1);return/%[0-9A-Fa-f]$/.test(i)&&(i=i.slice(0,-1)),s+i}var UU=(t=>(t.Turn="turn",t.ImagesTab="images_tab",t.ProductDetails="product_details",t.SuperWidget="super_widget",t.ImageGroup="image_group",t))(UU||{});class n_ extends El()(()=>({currentImage:void 0})){setCurrentImage(e){this.setState({currentImage:e})}static useCurrentImage(){return this.useState(e=>e.currentImage)}}function Snt(t){"use forget";const e=H.c(8),{clientThreadId:n,children:s}=t,[o]=_.useState(aLe);let a;e[0]!==o?(a=()=>{o.setCurrentImage(void 0)},e[0]=o,e[1]=a):a=e[1];let i;e[2]!==n||e[3]!==o?(i=[n,o],e[2]=n,e[3]=o,e[4]=i):i=e[4],_.useEffect(a,i);let l;return e[5]!==s||e[6]!==o?(l=r.jsx(n_.Provider,{store:o,children:s}),e[5]=s,e[6]=o,e[7]=l):l=e[7],l}function aLe(){return new n_}const xT=180,Hx=8,rLe=130;function iLe(t){"use forget";const e=H.c(27),{content:n,turnIndex:s}=t,{images:o}=n.widgets,a=_.useRef(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],e[0]=i):i=e[0];const[l,c]=_.useState(i);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=new Set,e[1]=d):d=e[1];const[u,m]=_.useState(d);let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=M=>m(T=>{const E=new Set(T);return E.add(M),E}),e[2]=f):f=e[2];const p=f;let g;if(e[3]!==u||e[4]!==o){let M;e[6]!==u?(M=T=>!u.has(T.content_url),e[6]=u,e[7]=M):M=e[7],g=o.filter(M),e[3]=u,e[4]=o,e[5]=g}else g=e[5];const h=g;let x;e[8]!==h?(x=()=>{if(!a.current)return;const M=a.current.getBoundingClientRect().width,T=[];let E=[],A=0;h.forEach((N,R)=>{const{width:O,height:D}=N.content_size,V=(D?O/D:1)*xT,z=M-A;let $=Math.min(V,z);const Y=z-$;let Z=Y<=0;Y>0&&Y<rLe&&($=$+Y,Z=!0),E.push({img:N,displayWidth:$}),A=A+($+Hx),Z?(T.push(E),E=[],A=0):R===h.length-1&&T.push(E)}),c(T)},e[8]=h,e[9]=x):x=e[9];const y=x;let b;e[10]!==h?(b=[h],e[10]=h,e[11]=b):b=e[11],En(y,b);let v;e[12]!==y?(v=()=>{if(!a.current)return;const M=new ResizeObserver(y);return M.observe(a.current),()=>M.disconnect()},e[12]=y,e[13]=v):v=e[13];let S;if(e[14]!==h?(S=[h],e[14]=h,e[15]=S):S=e[15],En(v,S),!h||h.length===0){let M;e[16]===Symbol.for("react.memo_cache_sentinel")?(M=gf(wt.Images),e[16]=M):M=e[16];const T=M;let E;return e[17]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx(ad,{IconComponent:T,children:r.jsx(P,{id:"jtAYXl",defaultMessage:"No images found"})}),e[17]=E):E=e[17],E}let C;if(e[18]!==l||e[19]!==s||e[20]!==h){let M;e[22]!==s||e[23]!==h?(M=(T,E)=>r.jsx("div",{className:"flex",style:{gap:Hx,marginBottom:Hx},children:T.map(A=>{const{img:N,displayWidth:R}=A;return r.jsx("div",{className:"object-cover",style:{width:R,height:xT},children:r.jsx(mLe,{image:N,allImages:h,turnIndex:s,onError:()=>p(N.content_url)})},N.url)})},E),e[22]=s,e[23]=h,e[24]=M):M=e[24],C=l.map(M),e[18]=l,e[19]=s,e[20]=h,e[21]=C}else C=e[21];let k;return e[25]!==C?(k=r.jsx("div",{ref:a,className:"w-full",children:C}),e[25]=C,e[26]=k):k=e[26],k}var x6;const lLe=ct.div(x6||(x6=rt(["\n  pointer-events-none absolute inset-0 z-10 bg-gradient-to-t\n  from-black/70 via-black/20 to-transparent\n  opacity-0 transition-opacity duration-200\n  group-hover:opacity-100 group-focus-visible:opacity-100\n  select-none flex flex-col justify-end\n"])));var y6;const cLe=ct.div(y6||(y6=rt(["\n  flex items-center gap-2 text-xs text-white/90 text-clip whitespace-nowrap\n"])));var v6;const dLe=ct.div(v6||(v6=rt(["\n  text-start text-sm font-medium text-white text-clip whitespace-nowrap\n"])));function uLe({image:t}){const[e,n]=_.useState(!1);return r.jsx(lLe,{children:r.jsxs(BU,{className:"flex flex-col gap-1 px-2.5 pb-2.5",children:[r.jsxs(cLe,{children:[r.jsx(Ts,{url:t.content_url,className:"icon-sm",containerClassName:W("bg-token-bg-primary rounded-sm overflow-hidden",!e&&"loading-results-shimmer"),size:32,minSize:16,applySizeToImg:!0,onLoad:()=>n(!0)}),r.jsx("span",{className:"text-clip whitespace-nowrap",children:t.domain})]}),r.jsx(dLe,{children:t.title})]})})}function mLe({image:t,allImages:e,turnIndex:n,onError:s}){const[o,a]=_.useState(!1),i=n_.useStore();return r.jsxs("button",{className:"border-token-border-light group relative block h-full w-full overflow-hidden rounded-lg border",disabled:!o,onClick:()=>{i.setCurrentImage({image:t,source:UU.SuperWidget,imageResults:e,analyticsMetadata:{turnIndex:n}})},children:[r.jsx("div",{className:W("bg-token-bg-tertiary absolute inset-0 transition-opacity duration-300",o?"pointer-events-none opacity-0":"animate-pulse opacity-100")}),r.jsx("img",{src:t.content_url,alt:t.title,onLoad:()=>a(!0),onError:s,className:W("block h-full w-full transform-gpu object-cover object-[0%_25%] transition-transform duration-300 hover:scale-103",o?"opacity-100":"opacity-0"),width:t.content_size.width,height:t.content_size.height}),o&&r.jsx(uLe,{image:t})]})}const fLe=j(()=>I(()=>import("./fqz8sozslskhjbvs.js").then(t=>t._),__vite__mapDeps([359,1])),{loading:t=>L(t)});function pLe({href:t}){return r.jsxs(ao,{target:"_self",href:t,className:"flex items-center gap-2 text-sm text-[var(--interactive-label-accent-default)] select-none hover:text-(--super-widget-link-color-hover)",style:{"--super-widget-link-color-hover":"oklch(from var(--interactive-label-accent-default) calc(l - 0.2) clamp(0, calc(c + 0.03), 1.0) h)"},children:[r.jsx(P,w({},gLe.googleIt)),r.jsx(fLe,{})]})}const gLe=be({googleIt:{id:"ZOaw3K",defaultMessage:"Google"}}),hLe=new Set(["lynx","cache"]),Hv=new Set(["ocelot","caracal"]),yT=10,_Le=2,xLe=t=>{var n;return t.source&&Hv.has(t.source)?!0:((n=t.sources)!=null?n:[]).some(s=>Hv.has(s))};function Op(t,e,n=!1){var l,c,d;const s=w({},e),o=[],a=[],i=[];for(const u of t){let m=!1;for(let f=0;f<1+((c=(l=u.sources)==null?void 0:l.length)!=null?c:0);f++){const p=f===0?u.source:(d=u.sources)==null?void 0:d[f-1],g=p!=="fast"?p:"cache",h=g!==void 0?[g]:[];if(g!==void 0&&hLe.has(g)&&h.push("fast"),g!==void 0&&Hv.has(g)&&h.push("high-quality"),!h.some(x=>s[x]!==void 0&&s[x]<=0)){h.forEach(x=>{s[x]!==void 0&&s[x]--}),o.push(u),m=!0;break}}m||(xLe(u)?a:i).push(u)}if(n&&o.length<yT){const u=yT-o.length,m=new Set(o.map(g=>g.url)),f=(g,h)=>{let x=0;for(const y of g){if(x>=h)break;m.has(y.url)||(o.push(y),m.add(y.url),x++)}return x},p=f(a,u);p<u&&f(i,u-p)}return o}const VU=xs(t=>{const n=ds(t,"3205212221").get("max_navlinks",void 0);let s;if(n&&typeof n=="object"&&!Array.isArray(n)){s={};for(const[o,a]of Object.entries(n))typeof a=="number"&&(s[o]=a)}return(!s||Object.keys(s).length===0)&&(s={fast:_Le}),s});function GU({content:t,descriptionClassName:e}){const{navlinks:n,navlinks_ready:s}=t.widgets,o=G(),a=_.useMemo(()=>VU(o),[o]),i=n&&n.length>0?Ji([],Op(n,a,s),!1):[];if(i.length===0){const c=gf(wt.Search);return r.jsx(ad,{IconComponent:c,children:r.jsx(P,{id:"dOHukr",defaultMessage:"No links found"})})}const l=SLe(i);return r.jsx("div",{className:"thread-sm:-mx-4 -mx-2 flex flex-col",children:l.map((c,d)=>r.jsx(yLe,{navlinks:c,descriptionClassName:e},d))})}function yLe({navlinks:t,descriptionClassName:e}){const n=t[0],s=t.slice(1);return r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx(vLe,{mainNavlink:n,descriptionClassName:e}),r.jsx("div",{className:"ms-4 flex flex-col gap-1",children:s.map(o=>r.jsx(bLe,{navlink:o,descriptionClassName:e},o.url))})]})}function vLe({mainNavlink:t,descriptionClassName:e}){return r.jsx(e_,{url:t.url,domain:t.domain,title:t.title,description:t.snippet,descriptionClassName:e})}function bLe({navlink:t,descriptionClassName:e}){const n=_.useRef(!1);return r.jsx(ao,{href:t.url,target:"_self",className:"hover:bg-token-interactive-bg-secondary-hover ms-2.5 flex flex-col rounded-xl px-4 py-2.5",draggable:!1,onMouseDown:()=>n.current=!1,onMouseMove:()=>n.current=!0,onClick:s=>n.current?(n.current=!1,s.preventDefault()):null,children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"mb-1 truncate text-base font-medium text-[var(--interactive-label-accent-default)]",children:t.title}),t.snippet&&r.jsx("div",{className:W("text-token-text-secondary mb-1 truncate text-sm font-normal",e),children:t.snippet})]})},t.url)}function SLe(t){return Object.values(t.reduce((e,n)=>{const s=n.domain;return e[s]||(e[s]=[]),e[s].push(n),e},{}))}const CLe=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M16.5353 9.60012C16.5353 8.7943 16.5288 8.52666 16.4591 8.2925C16.3916 8.06583 16.2807 7.85414 16.1329 7.66945C15.9803 7.47876 15.7645 7.32044 15.1027 6.86086L11.9025 4.63918C11.0356 4.03721 10.7407 3.84522 10.4415 3.77102C10.1518 3.69926 9.84844 3.69926 9.55871 3.77102C9.25946 3.84517 8.96491 4.037 8.09777 4.63918L4.89758 6.86086C4.23585 7.32039 4.01991 7.4788 3.8673 7.66945C3.71959 7.85412 3.60858 8.06585 3.54113 8.2925C3.47147 8.52666 3.46496 8.79429 3.46496 9.60012V13.9995C3.46496 14.4772 3.46549 14.796 3.48547 15.0405C3.50481 15.2773 3.53924 15.3857 3.57433 15.4546C3.67034 15.643 3.82343 15.7961 4.01183 15.8921C4.0807 15.9272 4.18923 15.9616 4.4259 15.981C4.67046 16.001 4.98923 16.0015 5.46691 16.0015H7.25207V13.1245C7.25231 11.6069 8.48241 10.3765 10.0001 10.3765C11.5178 10.3766 12.7479 11.6069 12.7482 13.1245V16.0015H14.5333C15.011 16.0015 15.3298 16.001 15.5743 15.981C15.8109 15.9616 15.9195 15.9272 15.9884 15.8921C16.1767 15.7961 16.3299 15.643 16.4259 15.4546C16.461 15.3857 16.4954 15.2772 16.5148 15.0405C16.5347 14.796 16.5353 14.4772 16.5353 13.9995V9.60012ZM17.8653 13.9995C17.8653 14.4553 17.8654 14.8377 17.84 15.1489C17.8139 15.4677 17.7578 15.7707 17.6114 16.0581C17.3879 16.4969 17.0306 16.8541 16.5919 17.0777C16.3044 17.2241 16.0016 17.2811 15.6827 17.3071C15.3715 17.3326 14.9891 17.3316 14.5333 17.3316H12.0831C11.7159 17.3315 11.4181 17.0337 11.4181 16.6665V13.1245C11.4178 12.3415 10.7832 11.7067 10.0001 11.7066C9.21694 11.7066 8.58142 12.3414 8.58117 13.1245V16.6665C8.58117 17.0338 8.2834 17.3316 7.91613 17.3316H5.46691C5.01118 17.3316 4.62878 17.3326 4.3175 17.3071C3.99865 17.2811 3.69579 17.2241 3.40832 17.0777C2.96959 16.8541 2.61233 16.4969 2.38879 16.0581C2.24243 15.7707 2.18633 15.4678 2.16027 15.1489C2.13484 14.8377 2.13488 14.4553 2.13488 13.9995V9.60012C2.13488 8.87504 2.12885 8.37705 2.26672 7.91359C2.38301 7.52267 2.57352 7.15791 2.82824 6.83938C3.13027 6.46179 3.54324 6.18263 4.13879 5.76906L7.33898 3.54641C8.11664 3.00637 8.645 2.62722 9.23937 2.48C9.73901 2.3563 10.2612 2.35626 10.7609 2.48C11.3552 2.62722 11.8836 3.00639 12.6612 3.54641L15.8614 5.76906C16.4569 6.18257 16.87 6.46182 17.172 6.83938C17.4267 7.15789 17.6172 7.52271 17.7335 7.91359C17.8714 8.37703 17.8654 8.87507 17.8653 9.60012V13.9995Z"}));function wLe(){return r.jsx(Xe.div,{layoutId:"super-widget-underline",className:"absolute start-0 end-0 bottom-0 h-0.5 bg-black dark:bg-white",transition:{type:"spring",duration:.3,bounce:.12}})}function kLe(s){var o=s,{selected:t,label:e}=o,n=Me(o,["selected","label"]);const a=W(t?"text-token-text-primary":"text-token-text-tertiary hover:text-token-text-secondary",n.className);return r.jsx(kt,{label:e,className:a,children:r.jsx("button",B(w({},n),{className:"h-full w-full"}))})}function MLe({selectedTab:t,selectTab:e,className:n,textClassName:s,showNewsTab:o=!0}){const a=[{key:wt.Chat,label:r.jsx(P,w({},uu.homeTab)),icon:r.jsx(CLe,{className:"justify-self-center"})},{key:wt.Search,label:r.jsx(P,w({},uu.searchTab)),icon:r.jsx(DU,{className:"justify-self-center"})},{key:wt.Images,label:r.jsx(P,w({},uu.imagesTab)),icon:r.jsx(LU,{className:"justify-self-center"})},{key:wt.Videos,label:r.jsx(P,w({},uu.videosTab)),icon:r.jsx(FU,{className:"justify-self-center"})}];return o&&a.push({key:wt.News,label:r.jsx(P,w({},uu.newsTab)),icon:r.jsx(OU,{className:"justify-self-center"})}),r.jsx(q9,{id:"super-widget-tabs",children:r.jsx("div",{className:W("flex h-full gap-0.5",n),children:a.map(({key:i,label:l,icon:c})=>r.jsxs(kLe,{label:l,className:W("relative flex-1 sm:w-(--tab-width) sm:flex-none",t===i?"font-medium":"font-normal",s),selected:t===i,style:{fontSize:"0.9375rem"},onClick:d=>{e(i),d.currentTarget.scrollIntoView({behavior:"smooth"})},children:[c,t===i&&r.jsx(wLe,{})]},i))})})}const uu=be({homeTab:{id:"mYiOeg",defaultMessage:"Home"},searchTab:{id:"GjXttB",defaultMessage:"Search"},imagesTab:{id:"ZY9oIP",defaultMessage:"Images"},videosTab:{id:"C8mH8+",defaultMessage:"Videos"},newsTab:{id:"2QYAL1",defaultMessage:"News"}});function TLe({queryText:t,tabType:e,searchIt:n}){const s=gf(e);return r.jsxs("div",{className:"flex w-full items-center text-start text-sm",children:[r.jsxs("span",{className:"text-token-text-tertiary flex max-w-[var(--user-chat-width,70%)] min-w-0 items-center",children:[r.jsx(s,{className:"me-2.5 h-4 w-4 shrink-0"}),r.jsx(P,B(w({},ELe(e)),{values:{prefix:o=>r.jsx("span",{className:"shrink-0",children:o}),query:r.jsx("span",{className:"min-w-0 flex-initial truncate",children:t}),trailingQuote:o=>r.jsx("span",{"aria-hidden":"true",className:"shrink-0",children:o})}}))]}),r.jsx("span",{className:"ms-auto flex-shrink-0",children:n})]})}function ELe(t){switch(t){case wt.Images:return lp.imageResultsFor;case wt.Videos:return lp.videoResultsFor;case wt.News:return lp.newsResultsFor;case wt.Search:default:return lp.searchResultsFor}}const lp=be({searchResultsFor:{id:"xeT484",defaultMessage:"<prefix>Search results for </prefix>{query}<trailingQuote></trailingQuote>"},imageResultsFor:{id:"OsLjmT",defaultMessage:"<prefix>Image results for </prefix>{query}<trailingQuote></trailingQuote>"},videoResultsFor:{id:"Egf3CB",defaultMessage:"<prefix>Video results for </prefix>{query}<trailingQuote></trailingQuote>"},newsResultsFor:{id:"MtgcpS",defaultMessage:"<prefix>News results for </prefix>{query}<trailingQuote></trailingQuote>"}});function lC(t,e,n){var s,o,a;return t===0?e[0]?ko(e[0]):null:(a=(o=(s=n[t])==null?void 0:s.widgets)==null?void 0:o.query)!=null?a:ko(e[t])}function cp(t,e,n){var s,o,a,i,l;return((a=(o=(s=t==null?void 0:t.widgets)==null?void 0:s[n])==null?void 0:o.length)!=null?a:0)>0||((l=(i=e==null?void 0:e[n])==null?void 0:i.length)!=null?l:0)>0?0:e&&Zj(e,n)?1:2}function ALe(t,e,n,s,o){const a=s[t],i=lC(t,n,s),l=i?o[i]:void 0;switch(e){case wt.Search:return cp(a,l,"navlinks");case wt.Images:return cp(a,l,"images");case wt.Videos:return cp(a,l,"videos");case wt.News:return cp(a,l,"news");default:return 2}}function ILe(t,e,n,s,o){var d,u,m,f,p,g;const a={content_type:dt.SuperWidget,widgets:w({},(u=(d=n[t])==null?void 0:d.widgets)!=null?u:{navlinks:[],images:[],videos:[],news:[],news_tab_enabled:!0})},i=lC(t,o,n),l=i?s[i]:void 0;l&&(l.navlinks.length>0&&(a.widgets.navlinks=l.navlinks,a.widgets.navlinks_ready=((f=(m=l.fetchingStatus)==null?void 0:m.navlinks)==null?void 0:f.status)===ir.DONE||((g=(p=n[t])==null?void 0:p.widgets)==null?void 0:g.navlinks_ready)===!0),l.images.length>0&&(a.widgets.images=l.images),l.videos.length>0&&(a.widgets.videos=l.videos),l.news.length>0&&(a.widgets.news=l.news));let c=!1;switch(e){case wt.Search:c=a.widgets.navlinks.length>0?!1:Nf(i,"navlinks");break;case wt.Images:c=a.widgets.images.length>0?!1:Nf(i,"images");break;case wt.Videos:c=a.widgets.videos.length>0?!1:Nf(i,"videos");break;case wt.News:c=a.widgets.news.length>0?!1:Nf(i,"news");break;case wt.Chat:break}return[a,c]}function Cnt(){const t=G(),e=cs(t),n=vn(un),s=Wm(),o=iP();return e&&!n&&!s&&!o}function $U(){const t=G(),e=ue(()=>SU());return typeof e=="boolean"?e:ds(t,"694761886").get("news_tab_enabled",!0)}function jLe({className:t,textClassName:e}){const n=G(),[s,o]=t_(),a=$U(),i=_r.useStore(),l=qs(),c=ue(()=>Y9(n));_.useEffect(()=>{!a&&s===wt.News&&o({tabType:wt.Chat})},[a,o,s]);function d(u){if(o({tabType:u}),u!==wt.Chat){const m=i.getActiveSystemHintType();m&&m!==Ie.Search&&l(null)}}return c?r.jsx(MLe,{selectedTab:s,selectTab:d,className:t,textClassName:e,showNewsTab:a}):null}const PLe={[wt.Chat]:()=>null,[wt.Search]:GU,[wt.Images]:iLe,[wt.Videos]:tLe,[wt.News]:QRe};function NLe({userMessages:t,superWidgetMessageContents:e,tab:n,scrollToMessageId:s,isNewsTabEnabled:o}){"use no forget";const a=_.useRef({});function i(u,m="smooth"){const f=a.current[u];f&&f.scrollIntoView({behavior:m,block:"start"})}_.useEffect(()=>{requestAnimationFrame(()=>{if(t.length>0){const u=t[t.length-1];u&&i(u.id,"instant")}})},[]),_.useEffect(()=>{setTimeout(()=>{s&&i(s)},50)},[s]);const l=ei(u=>u.entries);if(n===wt.News&&!o)return null;const c=PLe[n],d=t.map((u,m)=>ALe(m,n,t,e,l));return r.jsx("div",{className:"thread-sm:px-2 flex w-full flex-col gap-4 px-4 pt-2",children:SL(t.length,u=>{if(d[u]!==0&&u!==t.length-1)return null;const m=lC(u,t,e),f=u>0&&d[u-1]===0,p=URe([t[u]]);return r.jsxs("div",{className:"w-full",children:[f&&r.jsx("hr",{className:"border-heavy w-full pb-3.5"}),r.jsxs("div",{className:W("mb-4 flex scroll-mt-6 flex-col gap-4 text-base",f&&"mt-2.5"),ref:g=>{a.current[t[u].id]=g},children:[r.jsx(RLe,{queryText:m,tab:n}),p&&r.jsx(VRe,{message:p}),!p&&r.jsx(che,{message:t[u]})]}),(()=>{var y,b;const[g,h]=ILe(u,n,e,l,t),x=(u===0||((b=(y=e[u])==null?void 0:y.widgets)==null?void 0:b.query)!==void 0)&&!h;return g&&x?r.jsx(c,{content:g,turnIndex:u}):r.jsx("div",{className:"min-h-[calc(100dvh_-_var(--header-height)_".concat(p?"+_330":"-_120","px)]"),children:d[u]!==2&&r.jsx("div",{className:"result-streaming pulse",children:r.jsx("span",{})})})})()]},u)})})}function RLe(t){"use forget";const e=H.c(9),{queryText:n,tab:s}=t;if(!n)return null;let o;e[0]!==n||e[1]!==s?(o=oLe(n,s),e[0]=n,e[1]=s,e[2]=o):o=e[2];let a;e[3]!==o?(a=r.jsx(pLe,{href:o}),e[3]=o,e[4]=a):a=e[4];let i;return e[5]!==n||e[6]!==a||e[7]!==s?(i=r.jsx(TLe,{queryText:n,tabType:s,searchIt:a}),e[5]=n,e[6]=a,e[7]=s,e[8]=i):i=e[8],i}function wnt(t){"use forget";var A,N,R,O,D,F;const e=H.c(36),{clientThreadId:n,children:s}=t,o=G(),a=$U(),[i,l]=t_(),[c,d,u]=Ue(n,OLe),m=d[d.length-1],f=(N=(A=m==null?void 0:m.content)==null?void 0:A.widgets)==null?void 0:N.news_tab_enabled;let p,g;e[0]!==f?(p=()=>{SU.set(typeof f=="boolean"?f:void 0)},g=[f],e[0]=f,e[1]=p,e[2]=g):(p=e[1],g=e[2]),_.useEffect(p,g);let h,x;e[3]!==a||e[4]!==l||e[5]!==i?(h=()=>{!a&&i===wt.News&&l({tabType:wt.Chat})},x=[a,l,i],e[3]=a,e[4]=l,e[5]=i,e[6]=h,e[7]=x):(h=e[6],x=e[7]),_.useEffect(h,x);let y;e[8]!==o||e[9]!==a||e[10]!==((O=(R=m==null?void 0:m.content)==null?void 0:R.widgets)==null?void 0:O.query)||e[11]!==i||e[12]!==c[0]?(y=()=>{var Z,Q,q,X,oe;const V=c[0],z=V?ko(V):null,$=(q=(Q=(Z=m==null?void 0:m.content)==null?void 0:Z.widgets)==null?void 0:Q.query)!=null?q:"",Y=((oe=(X=$==null?void 0:$.trim())==null?void 0:X.length)!=null?oe:0)>0?$:z;Y&&(i==="search"?yu(o,Y,"navlinks"):i==="images"?yu(o,Y,"images"):i==="videos"?yu(o,Y,"videos"):i==="news"&&a&&yu(o,Y,"news"))},e[8]=o,e[9]=a,e[10]=(F=(D=m==null?void 0:m.content)==null?void 0:D.widgets)==null?void 0:F.query,e[11]=i,e[12]=c[0],e[13]=y):y=e[13];let b;e[14]!==o||e[15]!==a||e[16]!==m||e[17]!==i||e[18]!==c?(b=[o,i,c,a,m],e[14]=o,e[15]=a,e[16]=m,e[17]=i,e[18]=c,e[19]=b):b=e[19],_.useEffect(y,b);let v;if(e[20]!==o?(v=()=>Y9(o),e[20]=o,e[21]=v):v=e[21],!ue(v))return s;const C=i===wt.Chat?"block":"hidden";let k;e[22]!==s||e[23]!==C?(k=r.jsx("div",{id:"mini-chat-content",className:C,children:s}),e[22]=s,e[23]=C,e[24]=k):k=e[24];let M;e[25]!==a||e[26]!==u||e[27]!==i||e[28]!==d||e[29]!==c?(M=i!==wt.Chat&&(i!==wt.News||a)&&r.jsx(NLe,{userMessages:c,superWidgetMessageContents:d.map(LLe),tab:i,scrollToMessageId:u,isNewsTabEnabled:a},i),e[25]=a,e[26]=u,e[27]=i,e[28]=d,e[29]=c,e[30]=M):M=e[30];let T;e[31]!==M?(T=r.jsx(jr,{children:M}),e[31]=M,e[32]=T):T=e[32];let E;return e[33]!==T||e[34]!==k?(E=r.jsxs("div",{children:[k,T]}),e[33]=T,e[34]=k,e[35]=E):E=e[35],E}function LLe(t){return t.content}function OLe(t){return[me.getUserMessages(t).filter(DLe),me.getSuperWidgetMessages(t),t==null?void 0:t.scrollToMessageId]}function DLe(t){var e;return!((e=t.metadata)!=null&&e.is_visually_hidden_from_conversation)}const knt=()=>{"use forget";const t=H.c(2),e=G();let n;return t[0]!==e?(n=()=>Uh()&&Ih()&&Co(e,"43324078").get("enabled",!1),t[0]=e,t[1]=n):n=t[1],ue(n)};class ai extends El()(n=>n){constructor(){super(...arguments);ne(this,"startReplay",n=>{this.setState(()=>({isReplayEnabled:!0,finalMessageId:n}))});ne(this,"endReplay",()=>{this.setState(()=>({isPlaying:!1,isReplayEnabled:!1,finalMessageId:null}))});ne(this,"setIsReplayEnabled",n=>{this.setState(s=>B(w({},s),{isReplayEnabled:n}))});ne(this,"toggleIsPlaying",()=>{this.setState(n=>B(w({},n),{isPlaying:!n.isPlaying}))});ne(this,"setPlaying",n=>{this.setState(s=>B(w({},s),{isPlaying:n}))});ne(this,"setSpeed",n=>{this.setState(s=>B(w({},s),{playbackSpeed:n}))})}}ne(ai,"getFinalMessageId",({finalMessageId:n})=>n),ne(ai,"isReplayInProgress",(n,s)=>n.isReplayEnabled&&n.finalMessageId!==s);function Mnt({children:t,clientThreadId:e}){const n=Ue(e,u=>!!(u!=null&&u.tree.getBranchFromLeaf(u.currentLeafId).some(m=>{var f;return(f=m.message.metadata)==null?void 0:f.n7jupd_message}))),s=Ue(e,u=>u==null?void 0:u.currentLeafId),o=!!s,l=xS()&&n&&!!s,c=l?s:null,[d]=_.useState(()=>new ai({finalMessageId:c,isReplayEnabled:l,isPlaying:!1,playbackSpeed:1}));return _.useEffect(()=>{o&&l&&d.setState({isReplayEnabled:l,finalMessageId:c})},[o]),r.jsx(ai.Provider,{store:d,children:t})}function Tnt(t){return qo(t).getExperiment("3438591328").get("use_scroll_v3",!1)}const FLe=j(()=>I(()=>import("./eqmr3ssx7mhy67lm.js").then(t=>t._),__vite__mapDeps([471,1])),{loading:t=>L(t)}),BLe=j(()=>I(()=>import("./od3rnm4927scb9m9.js").then(t=>t._),__vite__mapDeps([407,1])),{loading:t=>L(t)}),ULe=({onClick:t})=>{const e=J();return r.jsx("div",{className:W("sticky top-6 z-10 flex h-0 items-start justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-top])]/thread:scale-50","group-[:not([data-scroll-from-top])]/thread:opacity-0","group-[:not([data-scroll-from-top])]/thread:pointer-events-none","group-[:not([data-scroll-from-top])]/thread:duration-100","group-[:not([data-scroll-from-top])]/thread:delay-0"),children:r.jsx(HU,{label:e.formatMessage({id:"dZQBu/",defaultMessage:"Scroll to beginning"}),onClick:t,children:r.jsx(FLe,{className:"icon text-token-text-primary min-w-8"})})})},VLe=({streamingState:t,onClick:e})=>{const n=J();return r.jsx("div",{className:W("sticky bottom-[calc(var(--composer-overlap-px)+--spacing(6))] z-10 flex h-0 items-end justify-center motion-safe:transition-all motion-safe:delay-300 motion-safe:duration-300","group-[:not([data-scroll-from-end])]/thread:scale-50","group-[:not([data-scroll-from-end])]/thread:opacity-0","group-[:not([data-scroll-from-end])]/thread:pointer-events-none","group-[:not([data-scroll-from-end])]/thread:duration-100","group-[:not([data-scroll-from-end])]/thread:delay-0"),children:r.jsx(HU,{label:n.formatMessage({id:"JDdG2F",defaultMessage:"Scroll to end"}),onClick:e,contentKey:t,children:r.jsxs("div",{className:"absolute end-0 flex items-center pe-1 text-nowrap",children:[t==="streaming"?r.jsx("span",{className:"loading-shimmer-pure-text ps-2.5",children:r.jsx(P,{id:"lMu1TV",defaultMessage:"Responding"})}):t==="unseen"?r.jsx("span",{className:"ps-2.5",children:r.jsx(P,{id:"mX2yAS",defaultMessage:"Done"})}):null,r.jsx(BLe,{className:"icon text-token-text-primary min-w-6"})]})})})},HU=({children:t,label:e,onClick:n,contentKey:s})=>{const o=_.useRef(null),a=_.useCallback(()=>{const i=o.current,l=i==null?void 0:i.firstElementChild;l&&(i.style.width="".concat(l.clientWidth,"px"))},[]);return _.useEffect(()=>{s!=null&&a()},[a,s]),r.jsx("button",{tabIndex:-1,onClick:n,"aria-label":e,onTransitionEnd:a,className:W("absolute flex h-8 min-w-8 cursor-pointer items-center justify-end overflow-hidden rounded-full outline-hidden select-none","motion-safe:transition-width motion-safe:duration-300","btn-secondary box-content shadow-sm sm:shadow-md dark:shadow-none!"),ref:o,children:t})},GLe="_threadRoot_1y3t0_1",$Le="_threadGutter_1y3t0_22",HLe={threadRoot:GLe,threadGutter:$Le},Ent=n=>{var s=n,{clientThreadId:t}=s,e=Me(s,["clientThreadId"]);const o=m_e(),[a,i,l]=Ue(t,m=>{var f,p;return[me.isMessageTurnEnded(m),me.getRequestId(m),(p=(f=me.getConversationLastTurn(m))==null?void 0:f.messages.some(g=>o.has(g.id)))!=null?p:!1]}),d=Jo(i)&&!a||l,u=r.jsx(WLe,w({isStreaming:d},e));return e.initScrolledToEnd?r.jsx(kd,{children:r.jsxs(_.Suspense,{fallback:null,children:[r.jsx(sJ,{}),u]})}):u},WLe=({allowScrollToEnd:t,allowScrollToTop:e,children:n,initScrolledToEnd:s,isStreaming:o,threadFooterRef:a,threadRootRef:i})=>{const l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),u=_.useRef(null),[m]=vn(x=>[Cr(x)]),[f,p]=_.useState("seen");En(()=>{const x=l.current;!s||!x||(x.scrollTop=x.scrollHeight,requestAnimationFrame(()=>{x.scrollTop=x.scrollHeight,requestAnimationFrame(()=>{x.scrollTop=x.scrollHeight})}))},[]),uf(()=>{const x=i.current,y=a.current,b=l.current,v=d.current,S=c.current;if(!x||!b||!v||!S)return;const C=vT(v,{root:b,threshold:0},E=>{yn.setIsConversationScrolledFromTop(!E.isIntersecting),sr(x,"data-scroll-from-top",!E.isIntersecting)}),k=Array.from({length:101},(E,A)=>A/100),M=vT(S,{root:b,threshold:k,rootMargin:"1px"},E=>{qLe(b,S),!E.isIntersecting&&WU(u)?Wx(x,b):sr(x,"data-scroll-from-end",!E.isIntersecting)}),T=y&&KLe(y,E=>{x.style.setProperty("--thread-footer-height","".concat(E,"px"))});return()=>{C==null||C(),M==null||M(),T==null||T()}}),_.useEffect(()=>{const x=i.current,y=c.current,b=l.current;!t||!x||!y||!b||(sr(x,"data-stream-active",o),o&&Wx(x,b),p(o?"streaming":D9(x,"data-scroll-from-end")?"unseen":"seen"),o||ZLe(u))},[o]);const g=_.useCallback(()=>{const x=i.current,y=l.current;!x||!y||zLe(x,y)},[i]),h=_.useCallback(()=>{We.logEvent("chatgpt_thread_scroll_to_bottom");const x=i.current,y=l.current,b=c.current;!x||!y||!b||(Wx(x,y),o?YLe(x,u):p("seen"))},[o,i]);return r.jsxs("div",{className:W("@container h-full overflow-y-auto [scrollbar-gutter:stable_both-edges] group-data-stream-active/thread:[overflow-anchor:none]",!m&&"thread-xl:pt-(--header-height)"),ref:l,children:[e&&r.jsx(ULe,{onClick:g}),r.jsx("div",{ref:d,className:"pointer-events-none w-px"}),n,r.jsx("div",{ref:c,className:W("pointer-events-none w-px",HLe.threadGutter,"min-h-[max(var(--gutter-min-height,0px),var(--gutter-remaining-height,0px))] md:[--gutter-min-height:2.25rem]","group-data-stream-active/thread:h-(--thread-end-gutter-active-height)")}),t&&r.jsx(VLe,{streamingState:f,onClick:h})]})};function zLe(t,e){sr(t,"data-scroll-from-top",!1),e==null||e.scrollTo({top:0,behavior:"smooth"})}function Wx(t,e){sr(t,"data-scroll-from-end",!1),e==null||e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}function qLe(t,e){const n=t.getBoundingClientRect().bottom-e.getBoundingClientRect().top;n>0?e.style.setProperty("--gutter-remaining-height","".concat(n,"px")):e.style.removeProperty("--gutter-remaining-height")}function WU(t){return t.current!=null}function YLe(t,e){if(!WU(e)&&t){const n=()=>{e.current=null,t.removeEventListener("wheel",n),t.removeEventListener("pointerdown",n)};e.current=n,t.addEventListener("wheel",n,{passive:!0}),t.addEventListener("pointerdown",n)}}function ZLe(t){var e;(e=t.current)==null||e.call(t)}function vT(t,e,n){const s=new IntersectionObserver(o=>{n(o[o.length-1])},e);return s.observe(t),()=>s.disconnect()}function KLe(t,e){const n=()=>e(t.getBoundingClientRect().height);n();const s=new ResizeObserver(n);return s.observe(t),()=>s.disconnect()}function QLe({id:t,name:e,checked:n,onChange:s=rs}){return r.jsx("input",{className:"sr-only",checked:n,id:t,name:e,type:"checkbox",readOnly:!0,onChange:s})}function Ant(t){"use forget";const e=H.c(8),{gizmo:n}=t;let s;e[0]!==n?(s=n?bP(n.tools):!1,e[0]=n,e[1]=s):s=e[1];const o=s;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsxs("h1",{className:"text-[28px] leading-[34px] font-normal tracking-[0.38px]","data-testid":"temporary-chat-label",children:[r.jsx(QLe,{id:"temporary-chat-checkbox",name:"temporary-chat-checkbox",checked:!0}),r.jsx(P,w({},Ic.temporaryChat))]}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx(XLe,{}),e[3]=i):i=e[3];let l;e[4]!==o?(l=o&&r.jsx("div",{className:"mt-3",children:r.jsx(P,B(w({},Ic.temporaryChatDescriptionGptActions),{values:{link:JLe}}))}),e[4]=o,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a,r.jsxs("div",{className:"text-token-text-secondary dark:text-token-text-tertiary max-w-[24rem] text-center text-base leading-[24px] font-normal tracking-[-0.32px] text-balance",children:[i,l]})]}),e[6]=l,e[7]=c):c=e[7],c}function JLe(t){return r.jsx("a",{href:"https://help.openai.com/en/articles/8914046-temporary-chat-faq",target:"_blank",className:"underline",rel:"noreferrer",children:t})}function XLe(){"use forget";const t=H.c(2),e=G(),n=ut(e),s=n==null?void 0:n.isWorkspaceAccount(),o=Bm(),a=s?o?Ic.temporaryChatBizMemoryAvailable:Ic.temporaryChatBizMemoryUnavailable:o?Ic.temporaryChatDescriptionMemoryAvailable:Ic.temporaryChatDescriptionMemoryUnavailable;let i;return t[0]!==a?(i=r.jsx(P,w({},a)),t[0]=a,t[1]=i):i=t[1],i}const Ic=be({temporaryChat:{id:"GizmoLanding.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatBizMemoryAvailable:{id:"otDmKh",defaultMessage:"Memory is disabled for this chat, and it wont appear in your history."},temporaryChatBizMemoryUnavailable:{id:"fQmbtG",defaultMessage:"This chat won't appear your conversation history."},temporaryChatDescriptionMemoryAvailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryAvailable",defaultMessage:"This chat won't appear in history, use or update ChatGPT's memory, or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionMemoryUnavailable:{id:"GizmoLanding.temporaryChatDescriptionMemoryUnavailable",defaultMessage:"This chat won't appear in history or be used to train our models. For safety purposes, we may keep a copy of this chat for up to 30 days."},temporaryChatDescriptionGptActions:{id:"GizmoLanding.temporaryChatDescriptionGptActions",defaultMessage:"Any data shared with a third party through GPT actions are subject to the third party's privacy policy. <link>Learn more</link>"}});function eOe(t){"use forget";const e=H.c(5),{safetyLimited:n}=t,s=G(),o=p1(),a=at();if(n){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(P,{id:"5QWLgm",defaultMessage:"<heading>We've limited access to this content for safety reasons.</heading>This type of information may be used to benefit or to harm people. We are continuously refining our work in this area, and you can read more about our approach in our <blogLink>blog post</blogLink> and <modelSpecLink>Model Spec</modelSpecLink>.",values:{heading:oOe,blogLink:sOe,modelSpecLink:nOe}}),e[0]=l):l=e[0],l}let i;return e[1]!==s||e[2]!==a||e[3]!==o?(i=r.jsx(P,{id:"4vDLZ8",defaultMessage:"This chat may violate our <contentPolicyLink>usage policies</contentPolicyLink> and has been closed. <startNewChatLink>Start a new chat</startNewChatLink>.",values:{contentPolicyLink:tOe,startNewChatLink:l=>cs(s)?r.jsx("button",{type:"button",onClick:()=>{Ti(a,{replace:location.pathname==="/"})},className:"underline hover:no-underline",children:l}):r.jsx(Aa,{to:"/",state:o,onClick:c=>{Y8(s,c,{location:"Content violation"})},className:"underline hover:no-underline",children:l})}}),e[1]=s,e[2]=a,e[3]=o,e[4]=i):i=e[4],i}function tOe(t){return r.jsx("a",{href:"https://openai.com/policies/usage-policies",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function nOe(t){return r.jsx("a",{href:"https://openai.com/index/introducing-the-model-spec/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function sOe(t){return r.jsx("a",{href:"https://openai.com/index/preparing-for-future-ai-capabilities-in-biology/",target:"_blank",rel:"noreferrer",className:"underline hover:no-underline",children:t})}function oOe(t){return r.jsx("h4",{className:"text-base font-bold",children:t})}function Int({safetyLimited:t}){return r.jsx("div",{className:"flex flex-col items-center justify-center gap-4 pt-8",children:r.jsx(jr,{children:r.jsx($S,{type:"danger",className:"mb-2 w-fit self-start",children:r.jsx(eOe,{safetyLimited:t})})})})}const aOe=j(()=>I(()=>import("./da9ysnvw39tlmcb1.js").then(t=>t._),__vite__mapDeps([472,1])),{loading:t=>L(t)});function rOe(t,e){var s;const n=(s=t!=null?t:e)!=null?s:0;return W(t!=null&&t!=e&&"opacity-50 dark:opacity-60",n>4?"text-brand-purple":n>3?"text-green-500":n>2?"text-yellow-500":n>1?"text-orange-500":"text-red-500")}function iOe(t){switch(t){case 1:return Fs.hoverRating1;case 2:return Fs.hoverRating2;case 3:return Fs.hoverRating3;case 4:return Fs.hoverRating4;case 5:return Fs.hoverRating5}}function lOe(t){return lt({queryFn:async()=>Am.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:t!=null})}const cC=({rating:t,onRating:e,className:n})=>{const[s,o]=_.useState(),a=J();return r.jsx("div",{className:W("flex flex-row",n),children:[1,2,3,4,5].map(i=>{var u;const l=r.jsx(aOe,{className:W("icon-2xl cursor-pointer",((u=s!=null?s:t)!=null?u:0)>=i?rOe(s,t):"text-token-main-surface-tertiary")}),c=iOe(s!=null?s:0),d=c&&a.formatMessage(c);return r.jsx("div",{onClick:()=>{e(i)},onMouseEnter:()=>{o(i)},onMouseLeave:()=>{o(void 0)},className:"p-1",children:c?r.jsx(kt,{label:d,side:"top",children:l}):l},i)})})},cOe=({gizmo:t,onClose:e})=>{var y,b,v;const n=pn(),s=J(),o=Ut(),[a,i]=_.useState(""),[l,c]=_.useState(!1),[d,u]=_.useState(),m=lOe(t.gizmo.id),f=Z9(t.gizmo.id),p=d===((y=m.data)==null?void 0:y.rating);_.useEffect(()=>{m.data!=null&&d==null&&u(m.data.rating)},[m.data,d]),_.useEffect(()=>{U.logEvent("Show Rating Modal",{gizmo_id:t.gizmo.id})},[t.gizmo.id]);const g=m.data!=null,h=!((b=t.gizmo.tags)!=null&&b.includes(qp.FirstParty))&&t.gizmo.author.will_receive_support_emails,x=(v=t.gizmo.tags)==null?void 0:v.includes(qp.Workspace);return r.jsx(Pt,{testId:"modal-gizmo-review",type:"success",title:r.jsxs("div",{children:[r.jsx(P,w({},Fs.title)),r.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[g?r.jsx(P,w({},Fs.subtitleChange)):r.jsx(P,w({},Fs.subtitle)),r.jsx(kt,{label:s.formatMessage(x?Fs.subtitleTooltipPrivate:Fs.subtitleTooltip),className:"ms-1 flex cursor-pointer items-center ps-1",children:r.jsx("div",{className:"icon-xs border-token-text-tertiary text-token-text-tertiary flex items-center justify-center rounded-full border text-[8px] font-bold",children:"i"})})]})]}),isOpen:!0,onClose:e,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:r.jsxs("div",{className:"flex grow flex-col space-y-8",children:[r.jsx(cC,{rating:d,onRating:u,className:"mx-auto flex flex-row items-center"}),h&&r.jsxs("div",{children:[r.jsx(pU,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:s.formatMessage(Fs.messagePlaceholder),value:a,rows:1,onChange:S=>i(S.target.value)}),r.jsxs("div",{className:W("flex flex-row items-center space-x-2 self-start",a.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[r.jsx("input",{type:"checkbox",className:"rounded-sm",checked:l,onChange:S=>c(S.target.checked)}),n&&r.jsx("span",{className:"text-sm",children:r.jsx(P,B(w({},Fs.includeFrom),{values:{email:r.jsx("strong",{children:n.email})}}))})]})]}),r.jsx(he,{color:"primary",disabled:p,onClick:async()=>{if(d==null){o.warning("Please select a rating");return}U.logEvent("Submit Rating Modal",{gizmo_id:t.gizmo.id,rating:d}),await f.mutateAsync({rating:d,message:a.length>0?a:void 0,includeFrom:a.length>0?l:void 0}),o.success(s.formatMessage(Fs.successToast),{duration:3}),e()},children:r.jsx(P,w({},Fs.submit))})]})})},Fs=be({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},subtitleTooltipPrivate:{id:"GizmoReviewModal.subtitleTooltipPrivate",defaultMessage:"Stars are anonymous and will only be visible to your workspace"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}}),dOe=Object.freeze(Object.defineProperty({__proto__:null,GizmoReviewSelectRating:cC,default:cOe},Symbol.toStringTag,{value:"Module"}));var b6;const bT=ct.div(b6||(b6=rt(["m-8 flex flex-col items-center"])));function ST(t){return r.jsx(Xe.div,w({initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0,transition:{duration:.5,ease:"easeIn"}}},t))}function jnt({clientThreadId:t}){const e=Ue(t,o=>o==null?void 0:o.promptGptRating),n=e==null?void 0:e.gizmoId,{data:s}=Pa(n);return n==null||s==null||!RA(s)?null:r.jsx(uOe,{gizmoId:n})}function uOe({gizmoId:t}){const[e,n]=_.useState(!1),[s,o]=_.useState(!1),a=Z9(t),i=async c=>{n(!0),setTimeout(()=>{o(!0)},5e3),U.logEvent("Submit Inline Rating",{gizmo_id:t,rating:c}),await a.mutateAsync({rating:c})},l=async()=>{o(!0),U.logEvent("Dismiss Inline Rating",{gizmo_id:t}),await a.mutateAsync({})};return _.useEffect(()=>{s||U.logEvent("Show Inline Rating",{gizmo_id:t})},[s,t]),s?null:e?r.jsx(bT,{children:r.jsxs(ST,{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"border-token-border-heavy rounded-lg border p-4",children:r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(P,{id:"gizmo.inlineReview.reviewLeft",defaultMessage:"Feedback sent"}),r.jsx(fn,{onClick:()=>{o(!0)}})]})}),r.jsx("div",{className:"text-token-text-tertiary text-xs",children:r.jsx(P,{id:"gizmo.inlineReview.reviewLeftSubtext",defaultMessage:'To update your rating, click "Send Feedback" in the GPT Menu'})})]})}):r.jsx(bT,{children:r.jsxs(ST,{className:"border-token-border-heavy flex flex-col items-center gap-4 rounded-lg border p-4",children:[r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx(P,{id:"gizmo.inlineReview.prompt",defaultMessage:"How would you rate this GPT so far?"}),r.jsx(fn,{onClick:l})]}),r.jsx(cC,{rating:void 0,onRating:i})]})})}const dC=Qe({},{name:"voiceTaskStatus",equals:()=>!1}),Vc=Qe([]),uC=(t,e)=>{dC.set(n=>{const s=n[t],o=typeof e=="function"?e(s):e;return o===void 0?delete n[t]:n[t]=o,n})},Pnt=()=>ue(()=>{const e=Vc()[0];if(e)return dC()[e.id]==="pending"?e:void 0}),Nnt=t=>{let e=!1;return uC(t,n=>n==="pending"?(e=!0,"running"):n),e},Rnt=t=>{const e=hn(()=>Vc());e.find(s=>t===s.id)&&(uC(t,"complete"),Vc.set(e.filter(s=>s.id!==t)))},Lnt=t=>{const e=_s(),n={id:e,command:t,timestamp:Date.now()};return jd(()=>{Vc.set([...Vc(),n]),yi.debug("Current voice queue",Vc()),uC(e,"pending")}),yh(()=>dC()[e]==="complete")},mOe='defaults write com.google.Chrome NewTabPageLocation "'.concat(atob("aHR0cHM6Ly93d3cuY2hhdGdwdC5jb20vbmV3LXRhYi1wYWdl"),'"'),zU="defaults delete com.google.Chrome NewTabPageLocation 2>/dev/null || true",Wv=({content:t})=>{const[e,n]=_.useState(!1),s=Ut(),o=J();return r.jsxs("div",{className:"bg-token-bg-tertiary relative min-w-0 rounded-sm",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[r.jsx("div",{className:"overflow-x-auto px-2 py-1",children:r.jsx("code",{className:"block min-w-0 whitespace-nowrap",children:t})}),e&&r.jsx(he,{color:"secondary",className:"absolute! sticky end-1 top-1/2 -translate-y-1/2",size:"small",onClick:async()=>{try{await navigator.clipboard.writeText(t),s.success(o.formatMessage({id:"laoJM9",defaultMessage:"Command copied to clipboard"}))}catch(a){}},children:r.jsx(P,{id:"fmeSBG",defaultMessage:"Copy"})})]})},mC=()=>r.jsxs("div",{className:"bg-token-bg-secondary w-full flex-none animate-pulse rounded-md p-3",children:[r.jsx("div",{className:"mb-3 h-32 w-full rounded-md bg-gray-200"}),r.jsx("div",{className:"mb-2 h-4 w-3/4 rounded bg-gray-200"}),r.jsx("div",{className:"h-3 w-2/3 rounded bg-gray-200"})]}),Ont=()=>mt.getItem(Le.HomeDiscoveryDismissed)?null:r.jsx(jr,{children:r.jsxs($S,{isDismissible:!0,className:"w-full",onDismiss:()=>mt.setItem(Le.HomeDiscoveryDismissed,!0),children:[r.jsx(P,{id:"ool//w",tagName:"p",defaultMessage:"Thanks for finding this page. You can set the default chrome new tab to this page by:"}),r.jsx(Wv,{content:mOe}),r.jsx(P,{id:"8+SRpS",tagName:"p",defaultMessage:"You can revert by:"}),r.jsx(Wv,{content:zU})]})});function fOe({limit:t=3}={}){const{data:e,isLoading:n,isError:s}=uq({cutId:"popular_in_my_workspace",limit:t});return{gizmos:_.useMemo(()=>{var i;return((i=e==null?void 0:e.pages)!=null?i:[]).flatMap(l=>{var c;return(c=l.list)!=null?c:[]}).flatMap(l=>{var c;return(c=l.items)!=null?c:[]}).flatMap(l=>l.resource)},[e]),isLoading:n,isError:s}}function pOe(){const{gizmos:t,isLoading:e,isError:n}=fOe();return n?null:r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:r.jsx(P,{id:"/XUia9",defaultMessage:"Trending GPTs"})}),e&&r.jsx(r.Fragment,{children:Array.from({length:3}).map((s,o)=>r.jsx(mC,{},o))}),t.map(s=>r.jsx(gOe,{gizmo:s},s.gizmo.id))]})}function gOe({gizmo:t}){var l;const e=G(),n=at(),s=t.gizmo.display.name,o=t.gizmo.display.description,a=(l=t.gizmo.display.profile_picture_url)!=null?l:void 0,i=()=>{const c=km(e,t);n(c)};return r.jsx("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:i,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(W1,{src:a,isFirstParty:!1,className:"h-10 w-10 shrink-0 rounded-md border border-gray-200 dark:border-gray-700"}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("h3",{className:"mb-0.5 line-clamp-1 text-sm font-medium",children:s}),o&&r.jsx("p",{className:"text-token-text-secondary line-clamp-2 text-xs",children:o})]})]})})}const hOe=j(()=>I(()=>import("./f2hykrvh1au16wwb.js"),__vite__mapDeps([473,1,29,30])).then(t=>t.ItemDisplayModal));function qU(){"use forget";var l,c,d,u;const t=H.c(8);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["mixed-feed"],queryFn:xOe},t[0]=e):e=t[0];const n=lt(e);let s;t[1]!==((l=n.data)==null?void 0:l.items)?(s=(d=(c=n.data)==null?void 0:c.items)!=null?d:[],t[1]=(u=n.data)==null?void 0:u.items,t[2]=s):s=t[2];let o;t[3]!==s?(o=s.filter(_Oe),t[3]=s,t[4]=o):o=t[4];const a=o;let i;return t[5]!==a||t[6]!==n?(i=B(w({},n),{items:a}),t[5]=a,t[6]=n,t[7]=i):i=t[7],i}function _Oe(t){return t.content_type!=="survey"&&t.content_type!=="card_set"&&t.content_type!=="footer"}function xOe(){return pe.safeGet("/feed/mixed")}function Dnt(){"use forget";const t=H.c(3);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(COe,{})}),t[0]=e):e=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(yOe,{})}),t[1]=n):n=t[1];let s;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsxs("div",{className:"flex w-full justify-center gap-4",children:[e,n,r.jsx("div",{className:"bg-token-bg-tertiary max-h-84 w-68 overflow-y-auto rounded-lg p-2",children:r.jsx(pOe,{})})]}),t[2]=s):s=t[2],s}function yOe(){"use forget";const t=H.c(13),{items:e,isLoading:n,isError:s}=qU();let o,a,i,l;if(t[0]!==s||t[1]!==n||t[2]!==e){l=Symbol.for("react.early_return_sentinel");e:{const d=e.filter(SOe);if(s){l=null;break e}o="flex flex-col gap-3 pe-1",t[7]!==n?(a=n&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(bOe)}),t[7]=n,t[8]=a):a=t[8],i=d.map(vOe)}t[0]=s,t[1]=n,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=l}else o=t[3],a=t[4],i=t[5],l=t[6];if(l!==Symbol.for("react.early_return_sentinel"))return l;let c;return t[9]!==o||t[10]!==a||t[11]!==i?(c=r.jsxs("div",{className:o,children:[a,i]}),t[9]=o,t[10]=a,t[11]=i,t[12]=c):c=t[12],c}function vOe(t,e){return r.jsx("div",{children:r.jsx(YU,{item:t})},"".concat(t.content_type,"-").concat(e))}function bOe(t,e){return r.jsx(mC,{},e)}function SOe(t){var e,n;return t.content_type==="card"&&(((e=t.title)==null?void 0:e.toLowerCase().includes("inbox"))||((n=t.title)==null?void 0:n.toLowerCase().includes("calendar")))}function COe(){"use forget";const t=H.c(7),{items:e,isLoading:n,isError:s}=qU();if(s)return null;let o;t[0]!==n?(o=n&&r.jsx(r.Fragment,{children:Array.from({length:4}).map(kOe)}),t[0]=n,t[1]=o):o=t[1];let a;t[2]!==e?(a=e.map(wOe),t[2]=e,t[3]=a):a=t[3];let i;return t[4]!==o||t[5]!==a?(i=r.jsxs("div",{className:"flex flex-col gap-3 pe-1",children:[o,a]}),t[4]=o,t[5]=a,t[6]=i):i=t[6],i}function wOe(t,e){return r.jsx("div",{children:r.jsx(YU,{item:t})},"".concat(t.content_type,"-").concat(e))}function kOe(t,e){return r.jsx(mC,{},e)}const YU=t=>{"use forget";var l,c;const e=H.c(37),{item:n}=t,s=J();let o;e[0]!==s?(o=s.formatMessage(CT.newsImageAlt),e[0]=s,e[1]=o):o=e[1];const a=o,i=G();switch(n.content_type){case"card":{const d=(l=n.image)==null?void 0:l.url,u=(c=n.image)==null?void 0:c.fallback_url,m=n.title,f=n.preview_markdown_text;let p;e[2]!==i||e[3]!==a||e[4]!==n?(p=()=>gt(i,hOe,{selectedCard:n,fallbackAltText:a}),e[2]=i,e[3]=a,e[4]=n,e[5]=p):p=e[5];let g;e[6]!==u||e[7]!==d||e[8]!==s||e[9]!==m?(g=d&&r.jsx("img",{src:d,onError:b=>{u&&b.target.src!==u&&(b.target.src=u)},alt:m!=null?m:s.formatMessage(CT.newsImageAlt),className:"mb-3 h-32 w-full rounded-md object-cover"}),e[6]=u,e[7]=d,e[8]=s,e[9]=m,e[10]=g):g=e[10];let h;e[11]!==m?(h=m&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:m}),e[11]=m,e[12]=h):h=e[12];let x;e[13]!==f?(x=f&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:f}),e[13]=f,e[14]=x):x=e[14];let y;return e[15]!==p||e[16]!==g||e[17]!==h||e[18]!==x?(y=r.jsxs("article",{className:"bg-token-bg-secondary w-full flex-none cursor-pointer rounded-md p-3 shadow-sm",onClick:p,children:[g,h,x]}),e[15]=p,e[16]=g,e[17]=h,e[18]=x,e[19]=y):y=e[19],y}case"header_with_date":{let d;e[20]!==n.date?(d=n.date!=null?new Date(Number(n.date)*1e3):null,e[20]=n.date,e[21]=d):d=e[21];const u=d,m=n.body;let f;e[22]!==u?(f=u&&r.jsx("h3",{className:"mb-0.5 line-clamp-2 text-sm font-medium",children:r.jsx(XV,{value:u,month:"long",day:"numeric"})}),e[22]=u,e[23]=f):f=e[23];let p;e[24]!==m?(p=m&&r.jsx("p",{className:"text-token-text-secondary text-xs",children:m}),e[24]=m,e[25]=p):p=e[25];let g;return e[26]!==f||e[27]!==p?(g=r.jsxs("div",{children:[f,p]}),e[26]=f,e[27]=p,e[28]=g):g=e[28],g}case"commentary":{const d=n.title,u=n.body;let m;e[29]!==d?(m=d&&r.jsx("h3",{className:"mb-1 line-clamp-2 text-sm font-medium",children:d}),e[29]=d,e[30]=m):m=e[30];let f;e[31]!==u?(f=u&&r.jsx("p",{className:"text-token-text-secondary line-clamp-3 text-xs",children:u}),e[31]=u,e[32]=f):f=e[32];let p;return e[33]!==m||e[34]!==f?(p=r.jsxs("div",{children:[m,f]}),e[33]=m,e[34]=f,e[35]=p):p=e[35],p}case"divider":{let d;return e[36]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx("div",{className:"border-token-border-muted my-1 border-t"}),e[36]=d):d=e[36],d}default:return null}},CT=be({newsImageAlt:{id:"+EPy7B",defaultMessage:"News image"}}),MOe=j(()=>I(()=>Promise.resolve().then(()=>cf),void 0),{loading:t=>L(t)}),TOe=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),EOe=j(()=>I(()=>import("./b0k25fupgmbv7hs2.js").then(t=>t._),__vite__mapDeps([474,1])),{loading:t=>L(t)}),wT=j(()=>I(()=>import("./f75y3r4bqi9ww2e3.js"),__vite__mapDeps([475,1,29,30])).then(t=>t.AddShortcutModal)),AOe=t=>Array.isArray(t)?t.map(e=>typeof e=="object"&&e!=null?{name:String(e.name),url:String(e.url)}:null).filter(e=>e!=null):[];function Fnt(){"use forget";var S;const t=H.c(31),e=G(),n=J();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=AOe((S=mt.getItem(Le.ShortcutLinks))!=null?S:[]),t[0]=s):s=t[0];const[o,a]=_.useState(s);let i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=C=>{a(C),mt.setItem(Le.ShortcutLinks,C)},t[1]=i):i=t[1];const l=i;let c;t[2]!==e||t[3]!==n||t[4]!==o?(c=C=>{gt(e,wT,{title:n.formatMessage($u.editShortcut),defaultName:o[C].name,defaultUrl:o[C].url,onSave:(k,M)=>{l(o.map((T,E)=>E===C?{name:k,url:M}:T))}})},t[2]=e,t[3]=n,t[4]=o,t[5]=c):c=t[5];const d=c;let u;t[6]!==o?(u=C=>{l(o.filter((k,M)=>M!==C))},t[6]=o,t[7]=u):u=t[7];const m=u;let f;if(t[8]!==d||t[9]!==m||t[10]!==o){let C;t[12]!==d||t[13]!==m?(C=(k,M)=>r.jsx(kT,{onClick:()=>window.location.href=k.url,img:r.jsx("img",{src:"https://www.google.com/s2/favicons?domain=".concat(k.url,"&sz=64"),alt:k.name,className:"h-6 w-6"}),name:k.name,showMenu:!0,onEdit:()=>d(M),onRemove:()=>m(M)},k.name),t[12]=d,t[13]=m,t[14]=C):C=t[14],f=o.map(C),t[8]=d,t[9]=m,t[10]=o,t[11]=f}else f=t[11];let p;t[15]!==e||t[16]!==n||t[17]!==o?(p=()=>gt(e,wT,{title:n.formatMessage($u.addShortcut),onSave:(C,k)=>{l([...o,{name:C,url:k}])}}),t[15]=e,t[16]=n,t[17]=o,t[18]=p):p=t[18];let g;t[19]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(MOe,{className:"h-6 w-6"}),t[19]=g):g=t[19];let h;t[20]!==n?(h=n.formatMessage($u.addShortcut),t[20]=n,t[21]=h):h=t[21];let x;t[22]!==p||t[23]!==h?(x=r.jsx(kT,{onClick:p,img:g,name:h}),t[22]=p,t[23]=h,t[24]=x):x=t[24];let y;t[25]===Symbol.for("react.memo_cache_sentinel")?(y=r.jsx("div",{className:"absolute! end-0 top-0 translate-x-full rtl:-translate-x-full",children:r.jsx(IOe,{})}),t[25]=y):y=t[25];let b;t[26]!==x?(b=r.jsxs("div",{className:"relative",children:[x,y]}),t[26]=x,t[27]=b):b=t[27];let v;return t[28]!==b||t[29]!==f?(v=r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"flex flex-wrap justify-center",children:[f,b]})}),t[28]=b,t[29]=f,t[30]=v):v=t[30],v}const IOe=()=>{"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx(C3,{triggerIcon:TOe,side:"right",sideOffset:4,children:r.jsxs("div",{className:"text-sm",children:[r.jsx(P,{id:"RUf4sV",tagName:"p",defaultMessage:"You can revert to chrome original by:"}),r.jsx(Wv,{content:zU})]})}),t[0]=e):e=t[0],e},kT=({onClick:t,img:e,name:n,showMenu:s,onEdit:o,onRemove:a})=>{const i=J();return r.jsxs(he,{color:"ghost",className:"group relative rounded-sm",onClick:t,children:[s&&o&&a&&r.jsxs(K.Root,{children:[r.jsx(K.Trigger,{asChild:!0,onClick:l=>{l.stopPropagation()},children:r.jsx(jOe,{})}),r.jsx(K.Portal,{children:r.jsxs(K.Content,{size:"auto",children:[r.jsx(K.Item,{onClick:l=>{l.stopPropagation(),o()},label:i.formatMessage($u.edit)}),r.jsx(K.Item,{onClick:l=>{l.stopPropagation(),a()},label:i.formatMessage($u.remove)})]})})]}),r.jsxs("div",{className:"flex flex-col items-center gap-3 py-3",children:[r.jsx("div",{className:"bg-token-bg-secondary mx-3 rounded-full p-3",children:e}),r.jsx("span",{className:"text-xs text-gray-700",children:n})]})]})},jOe=n=>{var s=n,{ref:t}=s,e=Me(s,["ref"]);return r.jsx(he,B(w({ref:t},e),{as:"button",onClick:o=>{var a;return(a=e.onClick)==null?void 0:a.call(e,o)},icon:EOe,color:"ghost",className:"absolute! end-0 top-0 opacity-0 transition-opacity group-hover:opacity-100",size:"small"}))},$u=be({addShortcut:{id:"TK0jxS",defaultMessage:"Add shortcut"},editShortcut:{id:"OLI43T",defaultMessage:"Edit shortcut"},edit:{id:"PUtE2c",defaultMessage:"Edit"},remove:{id:"lCYLCS",defaultMessage:"Remove"}}),POe=j(()=>I(()=>import("./cbq186c7y6011gk6.js").then(t=>t._),__vite__mapDeps([476,1])),{loading:t=>L(t)}),NOe=j(()=>I(()=>import("./e9gtc6k4kfmwzcn1.js"),__vite__mapDeps([464,1,29,30])).then(t=>t.ConnectorsOnboardingModal)),MT=j(()=>I(()=>import("./gdbkrtxajxy6ul7n.js"),__vite__mapDeps([477,1,29,30])).then(t=>t.GlauxNuxModal));function Bnt({clientThreadId:t}){var N;const e=G(),n=J(),s=wr(),o=ss(),a=qs(),[i,l]=zs(),c=$9(e),d=_n(),u=(N=d==null?void 0:d.name)!=null?N:"",{connectedTypes:m,isLoading:f}=vA(),p=xh(e),{connectionInstanceData:g,isLoading:h}=Mm({skip:!p.length}),x=_.useMemo(()=>{if(h||f)return!1;const R=g==null?void 0:g.connection_statuses.some(O=>["partially_activated","activated","activating"].includes(O.user_connection_details.activation_status));return m.size>0||R},[g==null?void 0:g.connection_statuses,h,f,m]),y=mt.getItem(Le.HasClickedCompanyKnowledgePill),b=_.useCallback(()=>{mt.setItem(Le.HasClickedCompanyKnowledgePill,new Date().toISOString())},[]),{systemHints:v}=Ko(),S=v==null?void 0:v.some(R=>R.systemHint==="glaux"),{auraAnnouncementBannerState$:C}=A3(e),k=ue(C),{available:M}=IU(),T=_.useMemo(()=>M&&o==null,[M,o]),E=_.useCallback(()=>{b();const R=mt.getItem("oai/apps/connectors/glauxOnboarding"),O=()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),setTimeout(()=>{Eo(Et(s))},100),U.logEventWithStatsig("ChatGPT Connectors Connector Pill Enabled","chatgpt_connectors_connector_pill_enabled",{type:"glaux"})};if(c==="restricted"&&R||!c){O();return}c==="restricted"?gt(e,MT,{onContinue:O}):c==="external"&&(x?O():gt(e,NOe,{onContinue:O}))},[e,t,a,s,c,b,x]);_.useEffect(()=>{S&&i.get("glaux-onboarding")==="true"&&(gt(e,MT,{onContinue:()=>{a("glaux",{analyticsMetadata:{clientThreadId:t}}),Eo(Et(s))}}),l(O=>(O.delete("glaux-onboarding"),O)))},[S,i,l,e,t,a,s]);const A=({onClick:R,Icon:O,label:D,tooltip:F})=>{const V=r.jsx(he,{className:"py-2",color:"secondary",onClick:R,size:"medium",children:r.jsx("div",{className:"flex gap-2",children:r.jsxs(r.Fragment,{children:[O,D]})})});return r.jsx("div",{className:"mx-1.5 mt-11 flex justify-center max-md:hidden",children:F?r.jsx(kt,{label:F,children:V}):V})};return T?r.jsx(A,{onClick:E,Icon:r.jsx(POe,{className:"icon"}),label:r.jsxs(r.Fragment,{children:[r.jsx(P,{id:"hQnVn1",defaultMessage:"Company knowledge"}),y||k==="not-shown"?r.jsx("span",{className:"inline-flex shrink-0 items-center rounded-full bg-[rgba(2,133,255,0.15)] px-1.5 py-px text-xs font-semibold text-[#0285FF]",children:r.jsx(P,{id:"MggA74",defaultMessage:"NEW"})}):null]}),tooltip:n.formatMessage({id:"yctCVq",defaultMessage:"Search {name}'s knowledge"},{name:u})}):null}function ROe(t){return t!=null&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.tagName==="SELECT"||!!t.getAttribute("contenteditable"))}function Unt(t){"use forget";const e=H.c(3);let n,s;e[0]!==t?(n=()=>{const o=Et(t).dom.ownerDocument,a=o.defaultView;if(!a)return;const i=l=>{l.code!=="Space"&&(!l.metaKey||l.key==="v")&&!ROe(o.activeElement)&&Eo(Et(t))};return a.addEventListener("keypress",i),()=>{a.removeEventListener("keypress",i)}},s=[t],e[0]=t,e[1]=n,e[2]=s):(n=e[1],s=e[2]),_.useEffect(n,s)}const LOe=j(()=>I(()=>import("./j2tk9qhizy0n5zaq.js").then(t=>t._),__vite__mapDeps([402,1])),{loading:t=>L(t)}),rd=t=>{"use forget";var k;const e=H.c(31);let n,s,o,a;e[0]!==t?(k=t,{className:o,fallbackSrc:n,shadow:a}=k,s=Me(k,["className","fallbackSrc","shadow"]),e[0]=t,e[1]=n,e[2]=s,e[3]=o,e[4]=a):(n=e[1],s=e[2],o=e[3],a=e[4]);const i=o===void 0?"":o,l=a===void 0?!1:a,c=J();let d;e[5]!==n||e[6]!==s.src?(d=()=>s.src?"primary":n?"fallback":"error",e[5]=n,e[6]=s.src,e[7]=d):d=e[7];const[u,m]=_.useState(d);let f,p;e[8]!==n||e[9]!==s.src?(f=()=>{const M=s.src?"primary":n?"fallback":"error";m(T=>T===M?T:M)},p=[s.src,n],e[8]=n,e[9]=s.src,e[10]=f,e[11]=p):(f=e[10],p=e[11]),_.useEffect(f,p);const g=u==="primary"?s.src:n!=null?n:void 0,h=l&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let x;e[12]!==i||e[13]!==h?(x=W("rounded-2xl object-cover",h,i),e[12]=i,e[13]=h,e[14]=x):x=e[14];const y=x;if(!g||u==="error"){let M;return e[15]!==y||e[16]!==s.onClick||e[17]!==l?(M=r.jsx(OOe,{onClick:s.onClick,className:y,shadow:l}),e[15]=y,e[16]=s.onClick,e[17]=l,e[18]=M):M=e[18],M}let b;e[19]!==c?(b=c.formatMessage({id:"syAyIZ",defaultMessage:"Image attachment"}),e[19]=c,e[20]=b):b=e[20];let v;e[21]===Symbol.for("react.memo_cache_sentinel")?(v=M=>{const{currentTarget:T}=M;(T.naturalWidth<30||T.naturalHeight<30)&&m("error")},e[21]=v):v=e[21];let S;e[22]!==n||e[23]!==u?(S=M=>{const{currentTarget:T}=M;u==="primary"&&n&&T.src!==n?m("fallback"):m("error")},e[22]=n,e[23]=u,e[24]=S):S=e[24];let C;return e[25]!==y||e[26]!==s||e[27]!==g||e[28]!==S||e[29]!==b?(C=r.jsx("img",B(w({},s),{alt:b,loading:"eager",src:g,className:y,onLoad:v,onError:S})),e[25]=y,e[26]=s,e[27]=g,e[28]=S,e[29]=b,e[30]=C):C=e[30],C},OOe=t=>{"use forget";const e=H.c(7),{className:n,shadow:s,onClick:o}=t,a=s&&"shadow-[0_8px_30px_0_rgba(0,0,0,0.05)]";let i;e[0]!==n||e[1]!==a?(i=W("border-token-[#0285FF17] flex items-center justify-center rounded-2xl border bg-[#DFEFFF] object-cover p-2",a,n),e[0]=n,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(LOe,{className:"text-token-text-accent aspect-square h-1/3 w-1/3"}),e[3]=l):l=e[3];let c;return e[4]!==o||e[5]!==i?(c=r.jsx("div",{onClick:o,className:i,children:l}),e[4]=o,e[5]=i,e[6]=c):c=e[6],c},DOe=70,TT="radial-gradient(circle at center, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 99%)",ZU=t=>{"use forget";var c,d;const e=H.c(5),{images:n}=t,o=ue(mq)?28:21,a=o>n.length&&((c=n.at(0))==null?void 0:c.url)===((d=n.at(-1))==null?void 0:d.url)?o-1:o;let i;e[0]!==a?(i=Array.from({length:a}),e[0]=a,e[1]=i):i=e[1];let l;if(e[2]!==n||e[3]!==i){const u=i.map((m,f)=>n[f%n.length]);l=r.jsx(FOe,{images:u,imageSize:80}),e[2]=n,e[3]=i,e[4]=l}else l=e[4];return l},FOe=t=>{"use forget";const e=H.c(12),{images:n,imageSize:s}=t;let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=W("flex h-45 w-full max-w-170 items-center justify-center transition-opacity duration-200 ease-in-out"),e[0]=o):o=e[0];let a,i,l;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={maskImage:TT,WebkitMaskImage:TT,maskRepeat:"no-repeat",WebkitMaskRepeat:"no-repeat"},i=W("absolute start-1/2 top-0 aspect-square w-[190%] -translate-x-1/2 animate-spin"),l={animationDuration:"".concat(DOe,"s")},e[1]=a,e[2]=i,e[3]=l):(a=e[1],i=e[2],l=e[3]);let c;if(e[4]!==s||e[5]!==n){let u;e[7]!==s||e[8]!==n.length?(u=(m,f)=>{const p=f/n.length*360;return r.jsx("div",{className:"absolute inset-0 origin-center",style:{transform:"rotate(".concat(p,"deg)"),transformOrigin:"center"},children:r.jsx("div",{className:"absolute start-1/2 top-0 -translate-x-1/2",children:r.jsx("div",{style:{width:"".concat(s,"px"),height:"".concat(s,"px")},children:r.jsx(rd,{src:m==null?void 0:m.url,fallbackSrc:m==null?void 0:m.fallback_url,className:"h-full w-full rounded-xl",shadow:!0})})})},"".concat(f,"-").concat(m==null?void 0:m.url))},e[7]=s,e[8]=n.length,e[9]=u):u=e[9],c=n.map(u),e[4]=s,e[5]=n,e[6]=c}else c=e[6];let d;return e[10]!==c?(d=r.jsx("div",{className:o,children:r.jsx("div",{className:"relative h-full w-full",style:a,children:r.jsx("div",{className:i,style:l,children:c})})}),e[10]=c,e[11]=d):d=e[11],d},zv=t=>{"use forget";const e=H.c(13),{firstRef:n,secondRef:s,firstSide:o,secondSide:a,threshold:i,absolute:l}=t,c=i===void 0?200:i,d=l===void 0?!0:l,[u,m]=_.useState(!1);let f;e[0]!==d||e[1]!==n||e[2]!==o||e[3]!==s||e[4]!==a||e[5]!==c?(f=()=>{const g=n.current,h=s.current;if(!g||!h){m(!1);return}const x=()=>{const v=g.getBoundingClientRect(),S=h.getBoundingClientRect(),C=v[o]-S[a];m(d?Math.abs(C)<=c:C<=c)};let y=null;const b=()=>{y!=null&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{y=null,x()})};return window.addEventListener("resize",b,{passive:!0}),x(),()=>{y!=null&&cancelAnimationFrame(y),window.removeEventListener("resize",b),window.removeEventListener("orientationchange",b)}},e[0]=d,e[1]=n,e[2]=o,e[3]=s,e[4]=a,e[5]=c,e[6]=f):f=e[6];let p;return e[7]!==n||e[8]!==o||e[9]!==s||e[10]!==a||e[11]!==c?(p=[n,s,o,a,c],e[7]=n,e[8]=o,e[9]=s,e[10]=a,e[11]=c,e[12]=p):p=e[12],En(f,p),u},KU=In(()=>Sm(Le.HasSeenPulseOnboarding,()=>!1));function Vnt(){"use forget";var F,V;const t=H.c(37),e=G();let n;t[0]!==e?(n=()=>D3(e),t[0]=e,t[1]=n):n=t[1];const{data:s}=ue(n);let o,a;t[2]!==e?(o=()=>{z1.prefetch(e)},a=[e],t[2]=e,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a);let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[5]=i):i=t[5],_.useEffect(UOe,i);let l;t[6]!==(s==null?void 0:s.onboarding_config)?(l=(F=s==null?void 0:s.onboarding_config)!=null?F:{},t[6]=s==null?void 0:s.onboarding_config,t[7]=l):l=t[7];const{image_urls:c,name:d}=l,u=BOe,m=_.useRef(null),f=_.useRef(null);let p;t[8]===Symbol.for("react.memo_cache_sentinel")?(p={firstRef:f,secondRef:m,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},t[8]=p):p=t[8];const g=zv(p);let h;t[9]!==e?(h=()=>{KU.set(e,!0),Vs(e).logEventWithStatsig("(Web) FYP Onboarding Completed","chatgpt_web_fyp_onboarding_completed")},t[9]=e,t[10]=h):h=t[10];const x=h,y=g&&"sticky top-0";let b;t[11]!==y?(b=W("relative flex h-45 w-full items-center justify-center",y),t[11]=y,t[12]=b):b=t[12];let v;t[13]!==c?(v=(V=c==null?void 0:c.map(aj))!=null?V:[],t[13]=c,t[14]=v):v=t[14];let S;t[15]!==v?(S=r.jsx(ZU,{images:v}),t[15]=v,t[16]=S):S=t[16];let C;t[17]!==S||t[18]!==b?(C=r.jsx("div",{className:b,ref:f,children:S}),t[17]=S,t[18]=b,t[19]=C):C=t[19];let k;t[20]!==d?(k=r.jsx("div",{className:"text-xl font-medium",children:r.jsx(P,B(w({},dp.greeting),{values:{name:d}}))}),t[20]=d,t[21]=k):k=t[21];let M;t[22]===Symbol.for("react.memo_cache_sentinel")?(M=r.jsx("div",{className:"whitespace-pre-line",children:r.jsx(P,w({},dp.onboardingExplanation))}),t[22]=M):M=t[22];let T;t[23]!==k?(T=r.jsxs("div",{className:"flex flex-col gap-4",children:[k,M]}),t[23]=k,t[24]=T):T=t[24];let E;t[25]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx(P,w({},dp.next)),t[25]=E):E=t[25];let A;t[26]!==x?(A=r.jsx(he,{size:"large",className:"w-1/2",onClick:x,children:E}),t[26]=x,t[27]=A):A=t[27];let N;t[28]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx("span",{className:"text-token-text-tertiary px-2 text-sm font-medium",children:r.jsx(P,B(w({},dp.learnMore),{values:{link:u}}))}),t[28]=N):N=t[28];let R;t[29]!==A?(R=r.jsxs("div",{className:"flex w-full flex-col gap-2",children:[A,N]}),t[29]=A,t[30]=R):R=t[30];let O;t[31]!==T||t[32]!==R?(O=r.jsxs("div",{className:"flex w-full flex-col justify-start gap-6 text-xl font-medium",children:[T,R]}),t[31]=T,t[32]=R,t[33]=O):O=t[33];let D;return t[34]!==C||t[35]!==O?(D=r.jsxs("div",{className:"relative mx-auto mb-30 flex w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-hidden px-4 py-6",children:[C,O]}),t[34]=C,t[35]=O,t[36]=D):D=t[36],D}function BOe(t){return r.jsx(ao,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",target:"_blank",rel:"noreferrer",className:"text-token-text-secondary underline",children:t})}function UOe(){Ee.count(Ae.PULSE,"chatgpt_web_fyp_onboarding_shown")}const dp=be({greeting:{id:"SqSmpy",defaultMessage:"Hi, {name}"},onboardingExplanation:{id:"SbZL/F",defaultMessage:"I'm here to surface what's helpful to you once a day, every day. You decide what shows up  if you tell me what to focus on, I'll curate it for you tomorrow."},learnMore:{id:"Chvn9N",defaultMessage:"<link>Learn more</link> about how Pulse works"},next:{id:"U2jFjI",defaultMessage:"Next"}}),VOe=In(t=>It(()=>{var s,o,a;const e=D3(t),n=(a=(o=(s=e==null?void 0:e.data)==null?void 0:s.onboarding_config)==null?void 0:o.image_urls)!=null?a:[];return new Set(n)})),GOe=()=>{"use forget";const t=H.c(2),e=G();let n;t[0]!==e?(n=()=>jl(()=>{KU(e)||VOe(e).forEach($Oe)}),t[0]=e,t[1]=n):n=t[1],_.useEffect(n)};function $Oe(t){const e=new Image;e.src=t}const HOe=j(()=>I(()=>import("./jyroje0qaxw6h3z1.js").then(t=>t._),__vite__mapDeps([309,1])),{loading:t=>L(t)}),WOe=be({defaultTitle:{id:"pulse.entrypoint.defaultTitle",defaultMessage:"Today's pulse"},seenCaption:{id:"pulse.entrypoint.seenCaption",defaultMessage:"You're all caught up for today."}}),Gnt=t=>{"use forget";const e=H.c(8),{pulseId:n,caption:s,previewImages:o,onClick:a}=t,i=G();GOe();let l;e[0]!==s||e[1]!==i||e[2]!==a||e[3]!==o||e[4]!==n?(l=n&&r.jsx(Xe.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.1,ease:"easeInOut"},className:"mt-10 max-md:hidden",children:r.jsx(jr,{className:"flex justify-center px-10",children:r.jsx(zOe,{previewImages:o,title:r.jsx(P,w({},WOe.defaultTitle)),caption:s,onClick:()=>{a(),Vs(i).logEventWithStatsig("(Web) FYP Entrypoint Tapped","chatgpt_web_fyp_entrypoint_tapped"),Ee.count(Ae.PULSE,"chatgpt_web_fyp_entrypoint_tapped")}})})}),e[0]=s,e[1]=i,e[2]=a,e[3]=o,e[4]=n,e[5]=l):l=e[5];let c;return e[6]!==l?(c=r.jsx(dn,{children:l}),e[6]=l,e[7]=c):c=e[7],c};function zOe(t){"use forget";const e=H.c(19),{onClick:n,previewImages:s,title:o,caption:a}=t,i=G();let l,c;e[0]!==i?(l=()=>{Vs(i).logEventWithStatsig("(Web) FYP Entrypoint Shown","chatgpt_web_fyp_entrypoint_shown"),Ee.count(Ae.PULSE,"chatgpt_web_fyp_entrypoint_shown")},c=[i],e[0]=i,e[1]=l,e[2]=c):(l=e[1],c=e[2]),_.useEffect(l,c);let d;e[3]!==s?(d=r.jsx(qOe,{previewImages:s}),e[3]=s,e[4]=d):d=e[4];let u;e[5]!==o?(u=r.jsx("div",{className:"text-sm font-semibold",children:o}),e[5]=o,e[6]=u):u=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=r.jsx(HOe,{className:"h-4 w-4 flex-shrink-0"}),e[7]=m):m=e[7];let f;e[8]!==u?(f=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-1",children:[u,m]}),e[8]=u,e[9]=f):f=e[9];let p;e[10]!==d||e[11]!==f?(p=r.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[d,f]}),e[10]=d,e[11]=f,e[12]=p):p=e[12];let g;e[13]!==a?(g=r.jsx("div",{className:"text-token-text-tertiary group-hover:text-token-text-secondary min-w-0 flex-shrink truncate text-sm whitespace-nowrap transition-colors",children:a}),e[13]=a,e[14]=g):g=e[14];let h;return e[15]!==n||e[16]!==p||e[17]!==g?(h=r.jsxs("div",{className:"group hover:bg-token-bg-tertiary inline-flex cursor-pointer items-center gap-2 overflow-hidden rounded-full px-4 py-2",onClick:n,children:[p,g]}),e[15]=n,e[16]=p,e[17]=g,e[18]=h):h=e[18],h}function qOe({previewImages:t}){var e,n,s,o;return r.jsxs("div",{className:"relative h-7 w-7",children:[r.jsx(rd,{src:(e=t[0])==null?void 0:e.url,fallbackSrc:(n=t[0])==null?void 0:n.fallback_url,className:"absolute aspect-square h-7 w-7 translate-x-2 rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:translate-x-2.5 group-hover:rotate-[3deg]"}),r.jsx(rd,{src:(s=t[1])==null?void 0:s.url,fallbackSrc:(o=t[1])==null?void 0:o.fallback_url,className:"absolute aspect-square h-7 w-7 -rotate-[6.5deg] rounded-sm object-cover shadow-md transition-transform duration-200 ease-out group-hover:-translate-x-1 group-hover:-rotate-[10deg]"})]})}function YOe({currentIndex:t,numEntries:e,onChange:n,onMouseDown:s,onMouseUp:o}){return r.jsx("div",{className:"w-full",children:r.jsxs(H3,{className:"relative m-2 flex w-full items-center",min:0,max:e,step:1,value:[t],onValueChange:a=>{n(a[0]),s()},onValueCommit:()=>{o()},children:[r.jsx(W3,{className:"bg-token-text-quaternary relative h-[9px] grow rounded-full",children:r.jsx(_B,{className:"bg-token-text-primary absolute h-full rounded-full"})}),r.jsx(z3,{className:"bg-token-bg-primary border-token-bg-secondary block h-[15px] w-[15px] cursor-pointer rounded-full border focus:outline-none"})]})})}const ZOe=j(()=>I(()=>import("./m360psfv67etw60z.js").then(t=>t._),__vite__mapDeps([478,1])),{loading:t=>L(t)}),KOe=j(()=>I(()=>import("./2uk20wu2pu1737un.js").then(t=>t._),__vite__mapDeps([479,1])),{loading:t=>L(t)}),QOe=j(()=>I(()=>import("./j7q6dd79tspx35h1.js").then(t=>t._),__vite__mapDeps([480,1])),{loading:t=>L(t)}),JOe=j(()=>I(()=>import("./mdgmhl7nsma70wnx.js").then(t=>t._),__vite__mapDeps([126,1])),{loading:t=>L(t)}),XOe=j(()=>I(()=>import("./o16x9m1k4d29ak42.js").then(t=>t._),__vite__mapDeps([361,1])),{loading:t=>L(t)});j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)});function eDe(t,e){const n=[];if(!e)return n;let s=t.getNodeIfExists(e);for(;s;)n.push(s.message),s=t.getNodeIfExists(s.parentId);return n.reverse()}const tDe=400,nDe=4e3,sDe=3e3,oDe=2e3;function aDe(t,e){const n=t.author.name,s=t.recipient;return n!=null&&n.startsWith("browser")||s!=null&&s.startsWith("browser")?nDe/e:Cf(n,724319625)||Cf(s,724319625)?sDe/e:Cf(n,3405121681)||Cf(s,3405121681)?oDe/e:tDe/e}const QU="inline-block min-h-[unset]",ET=W(QU,"p-0 h-fit py-1 px-4");function $nt({clientThreadId:t}){var A;const e=at(),n=ai.useState(N=>N.finalMessageId),s=ai.useStore(),o=ai.useState(N=>N.isPlaying),a=ai.useState(N=>N.playbackSpeed),i=s.setPlaying,l=s.endReplay,c=_.useRef(!1),d=_.useCallback(N=>{i(N),c.current=N},[i]),u=_.useCallback(()=>{i(!1)},[i]),m=_.useCallback(()=>{i(c.current)},[i]);_.useCallback(()=>{if(!n)throw Error("Missing finalMessageId");qe(t,N=>{N.currentLeafId=n}),l()},[l,n,t]),_.useEffect(()=>()=>{n&&qe(t,N=>{N.currentLeafId=n})},[n,t]);const f=Ue(t,N=>N==null?void 0:N.tree),p=_.useMemo(()=>f?eDe(f,n).filter(O=>!(O.author.role==="root"||O.author.role==="system"||O.author.role==="assistant"&&O.recipient!=="all"||O.author.name&&xr(111655449,O.author.name))):[],[f,n]),g=((A=p==null?void 0:p.length)!=null?A:1)-1,h=G(),x=!pt(h),y=_.useCallback(()=>{d(!1),S(g)},[d,g]),b=_.useMemo(()=>{var z,$,Y;const N=p.findLastIndex(Z=>Z.author.role==Ze.User),R=p[N],O=N===-1?p:p.slice(N),D=O.findLast(Z=>{var Q;return Z.channel==="final"&&((Q=Z.metadata)==null?void 0:Q.n7jupd_summary)})||O.findLast(Z=>{var Q;return(Q=Z.metadata)==null?void 0:Q.n7jupd_summary}),F=($=(z=R.metadata)==null?void 0:z.system_hints)!=null?$:[],V=(Y=D==null?void 0:D.metadata)==null?void 0:Y.n7jupd_summary;return V?{systemHints:F,summarizedPrompt:V}:null},[p]),[v,S]=_.useState(1);_.useEffect(()=>{const N=p==null?void 0:p[v].id;N&&qe(t,R=>{R.currentLeafId=N})},[v,p,t]);const C=g===v;_.useEffect(()=>{C&&d(!1)},[C,d]);const k=s.toggleIsPlaying,M=_.useCallback(()=>{C&&!o&&S(1),k()},[C,o,k]);_.useEffect(()=>{if(!o||v>=g)return;const N=aDe(p[v],a),R=setTimeout(()=>{S(O=>O+1)},N);return()=>clearTimeout(R)},[o,a,v,p,g]),_.useEffect(()=>(d(!0),()=>d(!1)),[d]);const T=_.useCallback(()=>{d(!0),S(1)},[d]);return r.jsxs("div",{className:"shadow-long bg-token-main-surface-primary flex w-full items-center gap-2 rounded-[20px] p-4",children:[r.jsx(he,{icon:C?XOe:o?QOe:KOe,onClick:C?T:M,className:W(QU,"border-none p-2"),color:"secondary"}),r.jsx("div",{className:"flex flex-1 flex-col items-center justify-center pe-6",children:r.jsx(YOe,{onChange:S,numEntries:g,currentIndex:v,onMouseDown:u,onMouseUp:m})}),r.jsxs("div",{className:"flex max-w-[200px] items-center justify-center",children:[C&&r.jsxs(r.Fragment,{children:[!1,!x&&!!b&&r.jsx(he,{icon:JOe,onClick:()=>{const N=new URLSearchParams({prompt:b.summarizedPrompt});for(const R of b.systemHints)N.append(t2,R);Ti(e,{params:N})},className:ET,children:r.jsx("span",{className:"truncate",children:r.jsx(P,{id:"if6xD7",defaultMessage:"Try this prompt"})})})]}),!C&&r.jsx(r.Fragment,{children:r.jsx(he,{icon:ZOe,onClick:y,className:ET,color:"secondary",children:r.jsx(P,{id:"Cxho9p",defaultMessage:"Skip"})})})]})]})}const Hnt=()=>r.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 -z-10 h-24",children:r.jsx(jr,{children:r.jsx("div",{className:"relative -mx-8 h-24 [mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)] [mask-composite:intersect] backdrop-blur-2xl [-webkit-mask-composite:source-in] [-webkit-mask-image:linear-gradient(to_right,transparent_0%,black_20%,black_80%,transparent_100%),linear-gradient(to_top,black_0%,black_75%,transparent_100%)]"})})}),rDe=j(()=>I(()=>import("./o84nb2862ibyoi1c.js").then(t=>t._),__vite__mapDeps([331,1])),{loading:t=>L(t)}),Wnt=t=>{"use forget";const e=H.c(22),{clientThreadId:n,bottom:s,pinnedWidgetType:o,onClick:a}=t;let i;e[0]!==n?(i=()=>me.getBranch(ft(n)),e[0]=n,e[1]=i):i=e[1];const[l]=_.useState(i);let c;e[2]!==l||e[3]!==o?(c=b=>{var v,S,C;return[(C=(S=(v=me.getBranch(b))==null?void 0:v.slice(l.length).findLast(k=>{const{message:M}=k,{metadata:T}=M;return(T==null?void 0:T.chatgpt_sdk)&&$1(T.chatgpt_sdk)===o}))==null?void 0:S.message.metadata)==null?void 0:C.tool_invoking_message]},e[2]=l,e[3]=o,e[4]=c):c=e[4];const[d]=Ue(n,c);let u;e[5]!==s?(u={bottom:s},e[5]=s,e[6]=u):u=e[6];let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m={viewTransitionName:"var(--vt-composer)"},e[7]=m):m=e[7];let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx(td,{sizeOverride:28,className:"text-token-border-default ms-2 flex-shrink-0 animate-spin",thickness:.08333333333333333,backgroundStrokeClassName:W("stroke-[rgba(0,0,0,0)]"),percentage:33.333333333333336}),e[8]=f):f=e[8];let p;e[9]!==d?(p=d!=null?d:r.jsx(P,{id:"z6ez+H",defaultMessage:"Thinking"}),e[9]=d,e[10]=p):p=e[10];let g;e[11]!==p?(g=r.jsx("span",{className:"loading-shimmer truncate px-4",children:p}),e[11]=p,e[12]=g):g=e[12];let h;e[13]!==n?(h=r.jsx(he,{icon:rDe,size:"medium",className:"aspect-square p-0",onClick:b=>{b.stopPropagation(),e1(n)}}),e[13]=n,e[14]=h):h=e[14];let x;e[15]!==a||e[16]!==g||e[17]!==h?(x=r.jsxs("div",{role:"button",onClick:a,className:"bg-token-bg-primary shadow-short pointer-events-auto mx-auto flex h-12 w-full max-w-md cursor-pointer items-center justify-between gap-2 rounded-full px-1.5 dark:bg-[#303030]",style:m,children:[f,g,h]}),e[15]=a,e[16]=g,e[17]=h,e[18]=x):x=e[18];let y;return e[19]!==u||e[20]!==x?(y=r.jsx(jr,{className:"fixed start-0 end-0 bottom-0 z-[100] py-1",style:u,children:x}),e[19]=u,e[20]=x,e[21]=y):y=e[21],y},iDe="_main_vose0_1",znt={main:iDe};function lDe(t,e=Sd){const n=_.useRef(void 0);return s=>{const o=t(s);return e(n.current,o)?n.current:n.current=o}}function JU(t){if(t&&t.messages.length>0){const e=t.messages[0].create_time;if(e)return new Date(e*1e3)}return null}function Kg(t,e){return!t||!e?!1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function qnt(t){const e=Ue(t,lDe(c=>me.getConversationTurns(c).map(u=>{const m=JU(u),f=KTe(u,u.messages);return{turnDate:m,isRenderable:f}}))),n=Xh(t),s=(n==null?void 0:n.value)===Yt.UNREAD&&n.source===ns.SERVER,[o,a]=_.useState(null),{results:i,lastRenderableTurnIndex:l}=_.useMemo(()=>{const c=new Array(e.length).fill(void 0),d=new Date;let u=null;for(const g of e){const h=g.turnDate;h&&(!u||h<u)&&(u=h)}let m=null,f=!0,p=null;for(let g=0;g<e.length;g++){const h=e[g];if(h.isRenderable){p=g;const x=h.turnDate;f?(f=!1,u&&!Kg(u,d)&&(c[g]=0)):m&&!Kg(x,m)&&(c[g]=0),m=x}}return{results:c,lastRenderableTurnIndex:p}},[e]);return _.useEffect(()=>{s&&l!=null&&l!==o&&a(l)},[s,l,o]),_.useMemo(()=>{const c=[...i];return s&&l!=null?c[l]=1:!s&&o!=null&&(c[o]=1),d=>c[d]},[i,s,l,o])}function cDe(t,e){const n=JU(e);if(n){const s=new Date,o=new Date;o.setDate(s.getDate()-1);let a;if(Kg(n,s))a=t.formatMessage({id:"ConversationTurn.todayHeader",defaultMessage:"Today"});else if(Kg(n,o))a=t.formatMessage({id:"ConversationTurn.yesterdayHeader",defaultMessage:"Yesterday"});else{const i=s.getFullYear(),l=n.getFullYear();i===l?a=t.formatDate(n,{month:"short",day:"numeric"}):a=t.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}return a}else return null}const Ynt=t=>{"use forget";const e=H.c(12),{turn:n,dateHeaderType:s}=t,o=G(),a=J();if(s===void 0||!xe(o,"1847911009"))return null;let i;e[0]!==a||e[1]!==n?(i=cDe(a,n),e[0]=a,e[1]=n,e[2]=i):i=e[2];const l=i;if(!l)return null;if(s===1){let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx("div",{className:"me-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[3]=u):u=e[3];let m;e[4]!==l?(m=r.jsx("span",{className:"text-sm leading-5 font-normal text-[#0088FF]",children:l}),e[4]=l,e[5]=m):m=e[5];let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=r.jsx("div",{className:"ms-1 flex-1 border-t border-[#B3DBFF] opacity-50 dark:border-[#0088FF]"}),e[6]=f):f=e[6];let p;return e[7]!==m?(p=r.jsxs("div",{className:"mx-auto my-4 flex h-[20px] w-full items-center md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",children:[u,m,f]}),e[7]=m,e[8]=p):p=e[8],p}let c;e[9]===Symbol.for("react.memo_cache_sentinel")?(c={height:"20px"},e[9]=c):c=e[9];let d;return e[10]!==l?(d=r.jsx("div",{className:"my-4 flex justify-center",style:c,children:r.jsx("span",{className:"text-token-text-secondary text-sm leading-5 font-normal",children:l})}),e[10]=l,e[11]=d):d=e[11],d},Znt=({role:t,gizmo:e})=>{const n=J();function s(){switch(t){case Ze.User:return n.formatMessage({id:"3DStaP",defaultMessage:"You said:"});case Ze.Assistant:return e?n.formatMessage({id:"ptfwNc",defaultMessage:"{author} said:"},{author:e.gizmo.display.name}):n.formatMessage({id:"LDIn6l",defaultMessage:"ChatGPT said:"});default:return""}}const o=t===Ze.Assistant?"h6":"h5";return r.jsx(o,{className:"sr-only",children:s()})},dDe=j(()=>I(()=>import("./bci083mws0hai8bl.js").then(t=>t._),__vite__mapDeps([186,1])),{loading:t=>L(t)}),uDe=j(()=>I(()=>import("./c8g7bbhygzmjvepl.js").then(t=>t._),__vite__mapDeps([481,1])),{loading:t=>L(t)}),mDe="https://help.openai.com/en/articles/8400625-voice-mode-faq";function fDe({onSubmit:t}){const e=gd(),n=x2(),s=(n==null?void 0:n[en.TrainingAllowed])===!0||(n==null?void 0:n[en.VoiceTrainingAllowed])===!0;_.useEffect(()=>{U.logEventWithStatsig("Audio Paragen: Opt-In Shown","chatgpt_audio_paragen_opt_in_shown")},[]);const o=_.useCallback(async()=>{U.logEventWithStatsig("Audio Paragen: Opt-In Accepted","chatgpt_audio_paragen_opt_in_accepted"),await Promise.all([e.mutateAsync({setting:en.TrainingAllowed,value:!0}),e.mutateAsync({setting:en.VoiceTrainingAllowed,value:!0})]),t()},[e,t]);return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("section",{children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(P,w({},Ha.header))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(P,w({},Ha.subheader))})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(uDe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(P,w({},Ha.privacyHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(P,w({},Ha.privacyDescription))})]})]}),r.jsxs("section",{className:"flex gap-3 align-top",children:[r.jsx(dDe,{className:"h-5 w-5 shrink-0"}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("p",{children:r.jsx(P,w({},Ha.controlHeader))}),r.jsx("p",{className:"text-token-text-secondary",children:r.jsx(P,B(w({},Ha.controlDescription),{values:{learnMoreTextAndLink:r.jsx(ao,{href:mDe,target:"_blank",className:"underline underline-offset-2",children:r.jsx(P,w({},Ha.controlLearnMoreLink))})}}))})]})]}),r.jsxs("section",{className:"flex justify-center gap-2",children:[r.jsx(he,{size:"medium",onClick:()=>{U.logEventWithStatsig("Audio Paragen: Opt-In Actively Declined","chatgpt_audio_paragen_opt_in_actively_declined"),t()},color:"primary-inverse",className:"flex-1",children:r.jsx(P,w({},Ha.buttonNotNow))}),r.jsx(he,{size:"medium",onClick:()=>o(),disabled:s,className:"flex-1",children:r.jsx(P,w({},Ha.buttonEnableDataSharing))})]})]})}const Ha=be({header:{id:"AudioParagenOptIn.header",defaultMessage:"Thank you for making Voice Mode better!"},subheader:{id:"AudioParagenOptIn.subheader",defaultMessage:"Use voice chats to improve our models?"},privacyHeader:{id:"AudioParagenOptIn.privacyHeader",defaultMessage:"Taking steps to protect privacy"},privacyDescription:{id:"AudioParagenOptIn.privacyDescription",defaultMessage:"To improve our models, our team may review your audio. We take steps to reduce the amount of personal information used to train our models."},controlHeader:{id:"AudioParagenOptIn.controlHeader",defaultMessage:"Youre in control"},controlDescription:{id:"AudioParagenOptIn.controlDescription",defaultMessage:"You can stop sharing any time in settings. {learnMoreTextAndLink} about how to disable training on other content from voice mode."},controlLearnMoreLink:{id:"VoiceTrainingModal.controlLearnMoreLink",defaultMessage:"Learn more"},buttonNotNow:{id:"AudioParagenOptIn.buttonNotNow",defaultMessage:"Not now"},buttonEnableDataSharing:{id:"AudioParagenOptIn.buttonEnableDataSharing",defaultMessage:"Enable data sharing"}}),pDe=j(()=>I(()=>import("./bzgf4ifuffcltugf.js").then(t=>t._),__vite__mapDeps([383,1])),{loading:t=>L(t)}),gDe=j(()=>I(()=>import("./j7q6dd79tspx35h1.js").then(t=>t._),__vite__mapDeps([480,1])),{loading:t=>L(t)}),hDe=j(()=>I(()=>import("./f3ayl2xqr3q5cwjf.js").then(t=>t._),__vite__mapDeps([482,1])),{loading:t=>L(t)}),_De=j(()=>I(()=>import("./kwxtgizebk06tny0.js").then(t=>t._),__vite__mapDeps([483,1])),{loading:t=>L(t)});function xDe({player:t,isPlaying:e,onPlay:n,onPause:s,onRewind:o,onForward:a}){const i=e&&!t,[l,c]=_.useState(0),[d,u]=_.useState(0);_.useEffect(()=>{t==null||t.on("ended",s);const g=h=>{c(h.seconds),u(h.totalSeconds)};return t==null||t.on("timeupdate",g),()=>{t==null||t.off("ended",s),t==null||t.off("timeupdate",g)}},[s,c,u,t]),_.useEffect(()=>{e||t==null||t.pause()},[e,t]);function m(){l>=d-.2&&(t==null||t.reset()),t==null||t.play(),n()}function f(){t==null||t.seek(-5),o==null||o()}function p(){t==null||t.seek(5),a==null||a()}return r.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[r.jsx("button",{className:"ms-auto disabled:opacity-50",onClick:f,disabled:l<=.05,children:r.jsx(_De,{className:"size-6"})}),r.jsx("button",{className:W("rounded-full p-4 transition-all duration-200",e?"bg-token-bg-secondary":"bg-token-bg-tertiary"),onClick:e?()=>s(!0):m,children:i?r.jsx(Ws,{className:"m-3 size-6 opacity-50"}):e?r.jsx(gDe,{className:"size-10"}):r.jsx(pDe,{className:"size-10"})}),r.jsx("button",{className:"me-auto disabled:opacity-50",onClick:p,disabled:l>=d-.05,children:r.jsx(hDe,{className:"size-6"})})]})}function yDe({paragen:t,onSelect:e}){const n=od(i=>i.playingId===t.id),s=od(i=>i.selectedId),{playParagen:o,pauseParagen:a}=X1();return r.jsxs("div",{className:W("flex flex-1 flex-col gap-4 rounded-2xl border p-4 [transition:opacity_500ms_ease-out,border-color_200ms_ease-in-out,background-color_200ms_ease-in-out]",{"bg-token-interactive-bg-tertiary-hover border-token-border-heavy":n,"bg-token-interactive-bg-tertiary-press border-token-border-focus border-1":s===t.id,"opacity-40":s&&s!==t.id}),children:[r.jsx(xDe,{player:t.player,isPlaying:n,onPlay:()=>o(t.id),onPause:i=>a(t.id,i),onRewind:()=>{U.logEventWithStatsig("Audio Paragen: Rewind","chatgpt_audio_paragen_rewind",{paragen_id:t.id})},onForward:()=>{U.logEventWithStatsig("Audio Paragen: Forward","chatgpt_audio_paragen_forward",{paragen_id:t.id})}}),r.jsx(he,{size:"medium",onClick:()=>e(t.id),children:r.jsx(P,w({},Dp.paragenOptionButton))})]})}function vDe({selectedId:t,onSelect:e,onMount:n}){const s=od(o=>o.paragens);return uf(()=>{n(s.length)}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(P,w({},Dp.feedbackDescription))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(P,w({},Dp.feedbackHeader))})]}),r.jsx("div",{className:"flex flex-row gap-4 md:justify-center",children:s.map(o=>r.jsx(yDe,{paragen:o,onSelect:e},o.id))}),r.jsx(he,{className:W("self-center transition-opacity duration-300",{"opacity-40":t!=null&&t!==qg}),size:"medium",color:"ghost",onClick:()=>e(qg),children:r.jsx(P,w({},Dp.paragenOptionBothBad))})]})}const Dp=be({feedbackHeader:{id:"audioParagen.feedbackHeader",defaultMessage:"Help improve voice mode in your region"},feedbackDescription:{id:"audioParagen.feedbackDescription",defaultMessage:"Which audio response do you prefer?"},paragenOptionButton:{id:"audioParagen.paragenOptionButton",defaultMessage:"I prefer this audio"},paragenOptionBothBad:{id:"audioParagen.paragenOptionBothBad",defaultMessage:"Both are bad"}}),XU=1500,Knt={aboutUserMessage:void 0,aboutModelMessage:void 0,nameUserMessage:void 0,roleUserMessage:void 0,traitsModelMessage:void 0,otherUserMessage:void 0,disabledTools:void 0,enabled:void 0,personalityTypeMessage:void 0},Qnt=["engineeringStudent","gastroenterologist","sourdoughBaker","interiorDesigner","daycareManager","familyLawAttorney","excelWizard","level10Mage","pharmaSales","freelanceCopywriter","weddingPhotographer","catHerder","cdlDriver","thirdGradeTeacher"],Jnt={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-8,transition:{duration:.2}}};function Xnt(t){var e,n,s,o,a,i;return{personalityTypeMessage:(e=t==null?void 0:t.personalityTypeMessage)!=null?e:"",nameUserMessage:(n=t==null?void 0:t.nameUserMessage)!=null?n:"",roleUserMessage:(s=t==null?void 0:t.roleUserMessage)!=null?s:"",traitsModelMessage:(o=t==null?void 0:t.traitsModelMessage)!=null?o:"",otherUserMessage:(a=t==null?void 0:t.otherUserMessage)!=null?a:"",disabledTools:(i=t==null?void 0:t.disabledTools)!=null?i:[],enabled:t==null?void 0:t.enabled}}function est({userContextData:t,updates:e,localUserContext:n,setLocalUserContext:s}){var h;const{aboutUserMessage:o="",aboutModelMessage:a="",personalityTypeMessage:i="",nameUserMessage:l="",roleUserMessage:c="",traitsModelMessage:d="",otherUserMessage:u="",disabledTools:m=[],enabled:f}=t!=null?t:{},p=(h=n.enabled)!=null?h:!!f,g=(x,y,b)=>x!==void 0?x:y!=null?y:b;s(x=>B(w(w({},x),e),{aboutUserMessage:g(e.aboutUserMessage,x.aboutUserMessage,o),personalityTypeMessage:g(e.personalityTypeMessage,x.personalityTypeMessage,i),aboutModelMessage:g(e.aboutModelMessage,x.aboutModelMessage,a),nameUserMessage:g(e.nameUserMessage,x.nameUserMessage,l),roleUserMessage:g(e.roleUserMessage,x.roleUserMessage,c),traitsModelMessage:g(e.traitsModelMessage,x.traitsModelMessage,d),otherUserMessage:g(e.otherUserMessage,x.otherUserMessage,u),enabled:g(e.enabled,x.enabled,p),disabledTools:g(e.disabledTools,x.disabledTools,m)}))}const bDe=(t,e=XU)=>t.length>e,mu=be({traitsReset:{id:"userContextModal.traitsReset",defaultMessage:"Refresh traits"},tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},profileSubtitle:{id:"userContextModal.profileSubtitle",defaultMessage:"Introduce yourself to get better, more personalized responses"},profileSubtitleTooltip:{id:"userContextModal.profileSubtitleTooltip",defaultMessage:"ChatGPT will use the information you provide to tailor its responses to you. <link>Learn more</link> about how we use your data.",link:"https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt"},customizeName:{id:"userContextModal.customizeName",defaultMessage:"What should ChatGPT call you?"},customizeNamePlaceholder:{id:"userContextModal.customizeNamePlaceholder",defaultMessage:"Nickname"},occupationInputTitle:{id:"userContextModal.occupationInputTitle",defaultMessage:"Occupation"},moreDetailsInputTitle:{id:"userContextModal.moreDetailsInputTitle",defaultMessage:"More about you"},customizeRole:{id:"userContextModal.customizeRole",defaultMessage:"What do you do?"},customizeRolePlaceholder:{id:"userContextModal.customizeRolePlaceholder",defaultMessage:"Engineer, student, etc."},customizePersonality:{id:"userContextModal.customizePersonality",defaultMessage:"What personality should ChatGPT have?"},customizeTraits:{id:"userContextModal.customizeTraits",defaultMessage:"What traits should ChatGPT have?"},customizeTraitsPlaceholder:{id:"userContextModal.customizeTraitsPlaceholder",defaultMessage:"Describe or select traits"},customInstructionsPlaceholder:{id:"userContextModal.customInstructionsPlaceholder",defaultMessage:"Additional behavior, style, and tone preferences"},customizeOther:{id:"userContextModal.customizeOther",defaultMessage:"Anything else ChatGPT should know about you?"},customizeOtherPlaceholder:{id:"userContextModal.customizeOtherPlaceholder",defaultMessage:"Interests, values, or preferences to keep in mind"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they're used to help ChatGPT provide better responses."},traitsTooltipTitle:{id:"userContextModal.traitsTooltipTitle",defaultMessage:"You can tune ChatGPT's behavior by..."},traitsTooltipBodyItem1:{id:"userContextModal.traitsTooltipBodyItem1",defaultMessage:"Use a formal, professional tone."},traitsTooltipBodyItem2:{id:"userContextModal.traitsTooltipBodyItem2",defaultMessage:"Be casual and chatty."},traitsTooltipBodyItem3:{id:"userContextModal.traitsTooltipBodyItem3",defaultMessage:"Be opinionated. If a question could have multiple answers, try to give only the best one."},otherTooltipTitle:{id:"userContextModal.otherTooltipTitle",defaultMessage:"You can share things like..."},otherTooltipBodyItem1:{id:"userContextModal.otherTooltipBodyItem1",defaultMessage:"I love hiking and jazz."},otherTooltipBodyItem2:{id:"userContextModal.otherTooltipBodyItem2",defaultMessage:"I'm vegetarian."},otherTooltipBodyItem3:{id:"userContextModal.otherTooltipBodyItem3",defaultMessage:"I'm trying to learn French."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink>  your input will aid our research in this area."},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALLE"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"},advanced:{id:"userContextModal.advanced",defaultMessage:"Advanced"},advancedOpen:{id:"userContextModal.advancedOpen",defaultMessage:"Open advanced settings"},advancedClose:{id:"userContextModal.advancedClose",defaultMessage:"Close advanced settings"},customizeTitle:{id:"personalizationSettings.customizeTitle",defaultMessage:"Personalization"},aboutYouSectionTitle:{id:"personalizationSettings.aboutYouSectionTitle",defaultMessage:"About you"},memoryTitle:{id:"personalizationSettings.memoryTitle",defaultMessage:"Memory"},toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Reference saved memories"},exampleDescription:{id:"settingsModal.exampleDescription",defaultMessage:"Let ChatGPT save and use memories when responding."},manageMemoriesLink:{id:"settingsModal.manageMemoriesLink",defaultMessage:"Manage memories"},manageButton:{id:"settingsModal.manageMemoriesLink.button",defaultMessage:"Manage"},upgradeButton:{id:"settingsModal.upgradeButtonLink.button",defaultMessage:"Upgrade"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},enablePersonalizationRowLabel:{id:"personalizationSettings.enablePersonalizationRowLabel",defaultMessage:"Enable customization"},enablePersonalizationRowDescription:{id:"personalizationSettings.enablePersonalizationRowDescription",defaultMessage:"Customize how ChatGPT responds to you. {learnMoreLink}",values:{learnMoreLink:r.jsx(ao,{href:"https://help.openai.com/en/articles/8096356-chatgpt-custom-instructions-faq",className:"underline",children:r.jsx(P,{id:"dyoG1M",defaultMessage:"Learn more"})})}},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage memories"},RecordModeTitle:{id:"personalizationSettings.recordModeTitle",defaultMessage:"Record mode"},recordModeToggleLabel:{id:"personalizationSettings.recordModeToggleLabel",defaultMessage:"Reference record history"},recordModeDescription:{id:"personalizationSettings.recordModeDescription",defaultMessage:"Let ChatGPT reference all previous recording transcripts and notes when responding."},pulseSettingTitle:{id:"personalizationSettings.pulseSettingTitle",defaultMessage:"Pulse"},pulseReferenceMemoriesToggleLabel:{id:"personalizationSettings.pulseReferenceMemoriesToggleLabel",defaultMessage:"Reference Memory in suggestions"},pulseReferenceMemoriesDescription:{id:"personalizationSettings.pulseReferenceMemoriesDescription",defaultMessage:'Let ChatGPT use memories proactively in suggestions. Turning this off will disable "Pulse". {learnMoreLink}',values:{learnMoreLink:r.jsx(ao,{href:"https://help.openai.com/en/articles/12293630-chatgpt-pulse",className:"underline",children:r.jsx(P,{id:"lFx4tz",defaultMessage:"Learn more"})})}},pulseEntrypointToggleLabel:{id:"personalizationSettings.pulseEntrypointToggleLabel",defaultMessage:'Show "Pulse" in new chats'},settingsPersonalitySelectionRowTitle:{id:"personalizationSettings.settingsPersonalitySelectionRowTitle",defaultMessage:"Base style and tone"},settingsPersonalitySelectionRowDescription:{id:"personalizationSettings.settingsPersonalitySelectionRowDescription",defaultMessage:"Set the style and tone ChatGPT uses when responding."}}),tst=be({engineeringStudent:{id:"userContextModal.rolePlaceholder.engineeringStudent",defaultMessage:"Engineering student at University of Waterloo"},gastroenterologist:{id:"userContextModal.rolePlaceholder.gastroenterologist",defaultMessage:"Gastroenterologist"},sourdoughBaker:{id:"userContextModal.rolePlaceholder.sourdoughBaker",defaultMessage:"Small-batch home sourdough baker"},interiorDesigner:{id:"userContextModal.rolePlaceholder.interiorDesigner",defaultMessage:"Interior designer"},daycareManager:{id:"userContextModal.rolePlaceholder.daycareManager",defaultMessage:"Home daycare manager"},familyLawAttorney:{id:"userContextModal.rolePlaceholder.familyLawAttorney",defaultMessage:"Family law attorney"},excelWizard:{id:"userContextModal.rolePlaceholder.excelWizard",defaultMessage:"Excel wizard"},level10Mage:{id:"userContextModal.rolePlaceholder.level10Mage",defaultMessage:"Level 10 mage"},pharmaSales:{id:"userContextModal.rolePlaceholder.pharmaSales",defaultMessage:"Pharma sales"},freelanceCopywriter:{id:"userContextModal.rolePlaceholder.freelanceCopywriter",defaultMessage:"Freelance copywriter"},weddingPhotographer:{id:"userContextModal.rolePlaceholder.weddingPhotographer",defaultMessage:"Wedding photographer"},catHerder:{id:"userContextModal.rolePlaceholder.catHerder",defaultMessage:"Professional cat herder"},cdlDriver:{id:"userContextModal.rolePlaceholder.cdlDriver",defaultMessage:"CDL driver"},thirdGradeTeacher:{id:"userContextModal.rolePlaceholder.thirdGradeTeacher",defaultMessage:"Third-grade teacher"}}),SDe=j(()=>I(()=>import("./kaxn2bizrxslkpa3.js").then(t=>t._),__vite__mapDeps([18,1])),{loading:t=>L(t)}),CDe=j(()=>I(()=>import("./ozne4j3oo0wdlmeq.js").then(t=>t._),__vite__mapDeps([484,1])),{loading:t=>L(t)}),wDe=({disabled:t,onChange:e,onSubmit:n,placeholder:s,value:o,name:a,tip:i,hasModError:l,className:c,size:d="md",showCharacterCount:u=!0,autoHighlight:m=!1,isNewCustomInstructionsUIEnabled:f=!1,maxLength:p=XU,dynamicHeight:g=!1})=>{var O;const h=J(),x=_.useRef(null);_.useEffect(()=>{m&&x.current&&requestAnimationFrame(()=>{var D;(D=x.current)==null||D.select(),yn.setAutoHighlightNicknameInput(!1)})},[m]),_.useEffect(()=>{if(!g||!x.current)return;const D=x.current,F=()=>{D.style.height="auto",D.style.height=Math.min(D.scrollHeight+2,120)+"px"};return F(),D.addEventListener("input",F),()=>{D.removeEventListener("input",F)}},[g,o]);const y=ue(U9),b=ue(fq),v=!y,[S,C]=_.useState(!1),[k,M]=_.useState(v),T=!v&&S&&!k,E=v&&!k,A=bDe(o,p),N=D=>{D.nativeEvent.isComposing||!t&&D.key==="Enter"&&D.metaKey&&!D.shiftKey&&!D.nativeEvent.isComposing&&(D.preventDefault(),n())},R=_.useRef(null);return r.jsxs(r.Fragment,{children:[i&&r.jsx(Pt,{testId:"modal-user-context-tip",isOpen:E,type:"success",size:"custom",className:"max-w-lg",title:h.formatMessage(mu.tipsHeader),showCloseButton:!0,onClose:()=>{M(!0)},children:i}),r.jsxs(Dl,{open:T,children:[r.jsxs("div",{className:c,ref:R,children:[r.jsx(br,{asChild:!0,children:r.jsx("textarea",{ref:x,className:W("bg-token-main-surface-primary w-full resize-none focus:ring-transparent",{"rounded-sm p-4":d!=="sm"&&!f,"rounded-lg border text-sm":d==="sm"||f,"border-orange-400 focus:border-orange-400":l,"border-red-500 focus:border-red-500":A&&!l,"focus-token-border-heavy border-token-border-default":!A&&!l,"opacity-30":t,"placeholder:text-gray-400":d==="sm"||f,"placeholder:text-gray-300":!f,"overflow-y-auto":g}),name:a,disabled:t,placeholder:s,onKeyDown:N,rows:d==="sm"?1:y&&!b?6:5,value:o,onChange:e,onBlur:()=>{C(!1)},onFocus:()=>{C(!0)},style:{maxHeight:g?"120px":void 0,verticalAlign:"top"}})}),r.jsx("div",{className:W("flex items-center justify-between px-1 text-xs tabular-nums",A?"text-red-600":"text-token-text-tertiary"),children:l?r.jsx("div",{className:"visible mt-2 text-start text-xs text-orange-400",children:r.jsx(P,B(w({},mu.modApiVoilation),{values:{policyLink:D=>r.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:D}),feedbackLink:D=>r.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:D})}}))}):r.jsxs(r.Fragment,{children:[u&&r.jsx("div",{children:"".concat(o.length,"/").concat(p)}),i&&r.jsx("button",{className:"flex items-center gap-1",onClick:()=>{var D;(D=x.current)==null||D.focus(),M(!k)},tabIndex:-1,children:r.jsx(dn,{initial:!1,children:S&&r.jsx(Xe.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:k?r.jsxs(r.Fragment,{children:[r.jsx(P,w({},mu.showTips)),r.jsx(SDe,{className:"icon-xs"})]}):r.jsxs(r.Fragment,{children:[r.jsx(P,w({},mu.hideTips)),r.jsx(CDe,{className:"icon-xs"})]})},"show-hide")})})]})})]}),i&&r.jsx(Fl,{container:(O=R.current)==null?void 0:O.ownerDocument.body,children:r.jsx(Bl,{side:"right",align:"start",sideOffset:12,className:"popover animate-slideLeftAndFade border-token-border-default bg-token-main-surface-primary text-token-text-primary relative z-50 max-w-[220px] rounded-xl border p-4 text-sm shadow-[0px_4px_14px_rgba(0,0,0,0.06)] select-none xl:max-w-xs",onOpenAutoFocus:D=>{D.preventDefault()},onCloseAutoFocus:D=>{D.preventDefault()},children:r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("strong",{children:r.jsx(P,w({},mu.tipsHeader))}),i]})})})]})]})};function kDe({children:t,className:e,footer:n,title:s}){return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:W("flex flex-col gap-2",e),children:[r.jsx("div",{className:"text-body-small-emphasized [font-weight:500]",children:s}),t]}),n]})}const MDe=j(()=>I(()=>Promise.resolve().then(()=>cf),void 0),{loading:t=>L(t)}),TDe=j(()=>I(()=>import("./c8sj5q0wb2w4qlno.js").then(t=>t._),__vite__mapDeps([45,1])),{loading:t=>L(t)}),ho=be({formResponseSound:{id:"audioParagen.formResponseSound",defaultMessage:"Clearer sound"},formResponseAccent:{id:"audioParagen.formResponseAccent",defaultMessage:"Better accent"},formResponseMoreExpressive:{id:"audioParagen.formResponseMoreExpressive",defaultMessage:"More expressive"},formResponseNotExpressive:{id:"audioParagen.formResponseNotExpressive",defaultMessage:"Not expressive"},formResponseDistortedAudio:{id:"audioParagen.formResponseDistortedAudio",defaultMessage:"Distorted audio"},formResponsePoorAccent:{id:"audioParagen.formResponsePoorAccent",defaultMessage:"Poor accent"},formThankYou:{id:"audioParagen.formThankYou",defaultMessage:"Thank you for making Voice Mode better!"},formWhyChoose:{id:"audioParagen.formWhyChoose",defaultMessage:"Why did you choose your response?"},formOptionalFeedback:{id:"audioParagen.formOptionalFeedback",defaultMessage:"Other feedback (Optional)"},formOptionalFeedbackPlaceholder:{id:"audioParagen.formOptionalFeedbackPlaceholder",defaultMessage:"Anything you'd like to share?"},formBack:{id:"audioParagen.formBack",defaultMessage:"Back"},formSubmit:{id:"audioParagen.formSubmit",defaultMessage:"Submit"}}),AT={clearer_sound:ho.formResponseSound,better_accent:ho.formResponseAccent,more_expressive:ho.formResponseMoreExpressive,not_expressive:ho.formResponseNotExpressive,distorted_audio:ho.formResponseDistortedAudio,poor_accent:ho.formResponsePoorAccent};function EDe({option:t,reviews:e,onSelect:n}){const s=t in AT?AT[t]:null;if(!s)return null;const o=e.includes(t);return r.jsx(he,{icon:o?TDe:MDe,color:o?"primary":"secondary",className:"py-2 ps-2 pe-3 text-xs font-normal",onClick:()=>n(t),children:r.jsx(P,w({},s))})}function ADe({reviewOptions:t,feedback:e,selectedReviewOptions:n,onReviewOptionsChanged:s,onOptionalFeedbackChanged:o,onBack:a,onSubmit:i}){const l=_.useRef(null),c=J();_.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[]);function d(m){n.includes(m)?s(n.filter(f=>f!==m)):s([...n,m])}function u(m){o(m.target.value)}return r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"gap flex flex-col",children:[r.jsx("p",{className:"text-token-text-primary text-lg font-semibold",children:r.jsx(P,w({},ho.formThankYou))}),r.jsx("p",{className:"text-token-text-secondary text-base",children:r.jsx(P,w({},ho.formWhyChoose))})]}),r.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:t.map(m=>r.jsx(EDe,{option:m,reviews:n,onSelect:d},m))}),r.jsx(kDe,{title:r.jsx("div",{className:"flex items-center gap-1",children:r.jsx(P,w({},ho.formOptionalFeedback))}),children:r.jsx(wDe,{disabled:!1,onChange:u,onSubmit:rs,value:e,name:"audio_paragen_optional_feedback",placeholder:c.formatMessage(ho.formOptionalFeedbackPlaceholder),showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0,size:"md"})}),r.jsxs("div",{className:"flex flex-row gap-2 self-end",children:[r.jsx(he,{color:"ghost",onClick:a,children:r.jsx(P,w({},ho.formBack))}),r.jsx(he,{onClick:i,children:r.jsx(P,w({},ho.formSubmit))})]})]})}const IDe=["clearer_sound","better_accent","more_expressive"],jDe=["not_expressive","distorted_audio","poor_accent"];function nst({lastUserMessageId:t,setIsDismissed:e}){const[n,s]=_.useState("options"),[o,a]=_.useState([]),[i,l]=_.useState(""),c=_.useRef(null),d=_.useRef(!1),{markAsViewed:u}=$e(Ye.hasSeenAudioParagenPrompt),m=od(k=>k.selectedId),{data:f}=wo(en.TrainingAllowed),{data:p}=wo(en.VoiceTrainingAllowed),{selectParagen:g,submitParagenResults:h,setShouldShowThankYouTooltip:x}=X1();function y(){g(null),a([]),s("options")}function b(k){c.current&&window.clearTimeout(c.current),g(k),c.current=window.setTimeout(()=>{s("review")},1e3)}function v(){e(!0),GAe(t),x(!0)}function S(){if(h(t,o,i),!f||!p){s("opt-in");return}v()}const C=_.useCallback(k=>{d.current||(d.current=!0,U.logEventWithStatsig("Audio Paragen: View","chatgpt_audio_paragen_view",{count:k}))},[]);return r.jsx(Xe.div,{className:"relative max-w-[548px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.5,delay:.75}},exit:{opacity:0},children:r.jsxs(q9,{children:[r.jsx(Xe.div,{layout:"size",className:"shadow-xxs overflow-hidden rounded-2xl border p-6 text-sm focus:outline-hidden",children:r.jsx(dn,{mode:"wait",initial:!1,children:r.jsx(Xe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},exit:{opacity:0},children:n==="options"?r.jsx(vDe,{selectedId:m,onSelect:b,onMount:C}):n==="review"?r.jsx(ADe,{reviewOptions:m!==qg?IDe:jDe,feedback:i,selectedReviewOptions:o,onReviewOptionsChanged:a,onOptionalFeedbackChanged:l,onBack:y,onSubmit:S}):n==="opt-in"?r.jsx(fDe,{onSubmit:v}):null},n)})}),r.jsx(fn,{className:"absolute end-6 top-6",onClick:()=>{U.logEventWithStatsig("Audio Paragen: Dismissed Modal","chatgpt_audio_paragen_dismissed_modal"),u(),e(!0)}})]})})}function PDe(t,e){var a;if(!t)return!1;if(e)return!0;const s=["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124","gpt-4o-gdrive-1124-citation","gpt-4o-gdrive-0212","gpt-4o-gdrive-0314","o1_ca_0226","o3_mini_ca_0226"].includes(t.id),o=!!((a=t.product_features.contextual_answers)!=null&&a.is_eligible_for_contextual_answers);return s||o}function eV(t){const e=G(),n=W9(),s=mh(t!=null?t:null,e);return n&&PDe(t,s)}function NDe(t,e){const n=eV(t!=null?t:null),s=G(),o=pq(s);return!n||!o?!1:o===gq.DOGFOODING?!!e:!0}const RDe=j(()=>I(()=>import("./ooz2slmm8agf6bjp.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>L(t)});function LDe(t,e,n,s){if(e)return t?n&&n!==s?"/g/".concat(t,"/shared/c/").concat(e,"?project_id=").concat(t,"&owner_user_id=").concat(n):"/g/".concat(t,"/c/").concat(e):"/c/".concat(e)}function sst({clientThreadId:t,turn:e,isFinalTurn:n}){return Ue(t,o=>!n&&e.messages.some(a=>(o==null?void 0:o.continuingSharedConversationLastMessageId)===a.id))?r.jsx("div",{className:"mx-auto mt-8 -mb-2 flex justify-center pb-2",children:r.jsxs("p",{className:"flex items-center text-xs text-gray-500",children:[r.jsx(RDe,{className:"icon-xs me-2"}),r.jsx(P,{id:"threadLayout.sharedConversationPrivateDisclaimer",defaultMessage:"Messages beyond this point are only visible to you"})]})}):null}function ost({clientThreadId:t,turn:e}){var u,m,f,p,g,h,x,y;const n=jt(t),s=G(),o=ut(s),a=(m=(u=e.messages.find(b=>{var v;return(v=b.metadata)==null?void 0:v.branching_from_conversation_title}))==null?void 0:u.metadata)==null?void 0:m.branching_from_conversation_title,i=(p=(f=e.messages.find(b=>{var v;return(v=b.metadata)==null?void 0:v.branching_from_conversation_id}))==null?void 0:f.metadata)==null?void 0:p.branching_from_conversation_id,l=(h=(g=e.messages.find(b=>{var v;return(v=b.metadata)==null?void 0:v.branching_from_conversation_owner}))==null?void 0:g.metadata)==null?void 0:h.branching_from_conversation_owner,c=(y=(x=e.messages.find(b=>{var v;return(v=b.metadata)==null?void 0:v.gizmo_id}))==null?void 0:x.metadata)==null?void 0:y.gizmo_id,d=LDe(c,i,l,o==null?void 0:o.normalizedAccountUserId);return a?r.jsx(jr,{children:r.jsxs("div",{className:"mx-auto mt-8 flex w-full items-center justify-center",children:[r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"}),r.jsx("p",{className:"mx-3 shrink text-xs whitespace-nowrap text-gray-500",children:r.jsx(P,{id:"threadLayout.branchConversationDisclaimer",defaultMessage:"Branched from {conversationTitle}",values:{conversationTitle:(n||l)&&d?r.jsx(rh,{className:"font-semibold",href:d,children:a}):r.jsx("span",{className:"font-semibold",children:a})}})}),r.jsx("div",{className:"h-px flex-1 bg-gray-200 dark:bg-gray-700","aria-hidden":"true"})]})}):null}const ODe="bg-token-main-surface-primary text-token-text-primary",DDe="openai",IT=["bg-blue-300 text-white"];function FDe(t){var e;return IT[((e=t==null?void 0:t.charCodeAt(0))!=null?e:0)%IT.length]}const up=({children:t})=>r.jsx("div",{className:"pt-0",children:r.jsx("div",{className:W(_.isValidElement(t)&&t.type===Zp?"gizmo-bot-avatar":"gizmo-shadow-stroke","flex h-8 w-8 items-center justify-center overflow-hidden rounded-full"),children:t})});function ast(t){var f;const{messages:e,isUserTurn:n,avatarClassName:s,gizmo:o}=t,a=e[0],i=(f=a==null?void 0:a.metadata)==null?void 0:f.shared_conversation_id,l=i!=null,c=pn(),{gizmoEditorData:d,mode:u}=Kb();let m=r.jsx(up,{children:r.jsx(Zp,{className:s!=null?s:ODe,iconName:DDe})});return o?m=r.jsx(up,{children:r.jsx(FTe,{gizmoId:o.gizmo.id,className:"h-full w-full"})}):d!=null&&u==="test"&&(m=r.jsx(W1,{isFirstParty:!1,src:d.profilePictureUrl,className:"h-8 w-8 first:pt-[3px]"})),r.jsx("div",{children:n?l?r.jsx(up,{children:r.jsx(Zp,{className:FDe(i),iconName:"user"})}):r.jsx(up,{children:r.jsx(_y,{user:c})}):m})}const BDe=Nt(()=>({displayingSideBySideFeedback:!1})),fC=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M7.45996 14.375C7.45996 13.3616 6.63844 12.54 5.625 12.54C4.61156 12.54 3.79004 13.3616 3.79004 14.375C3.79004 15.3884 4.61156 16.21 5.625 16.21C6.63844 16.21 7.45996 15.3884 7.45996 14.375ZM16.21 14.375C16.21 13.3616 15.3884 12.54 14.375 12.54C13.3616 12.54 12.54 13.3616 12.54 14.375C12.54 15.3884 13.3616 16.21 14.375 16.21C15.3884 16.21 16.21 15.3884 16.21 14.375ZM7.45996 5.625C7.45996 4.61156 6.63844 3.79004 5.625 3.79004C4.61156 3.79004 3.79004 4.61156 3.79004 5.625C3.79004 6.63844 4.61156 7.45996 5.625 7.45996C6.63844 7.45996 7.45996 6.63844 7.45996 5.625ZM16.21 5.625C16.21 4.61156 15.3884 3.79004 14.375 3.79004C13.3616 3.79004 12.54 4.61156 12.54 5.625C12.54 6.63844 13.3616 7.45996 14.375 7.45996C15.3884 7.45996 16.21 6.63844 16.21 5.625ZM17.54 14.375C17.54 16.123 16.123 17.54 14.375 17.54C12.627 17.54 11.21 16.123 11.21 14.375C11.21 12.627 12.627 11.21 14.375 11.21C16.123 11.21 17.54 12.627 17.54 14.375ZM8.79004 5.625C8.79004 7.37298 7.37298 8.79004 5.625 8.79004C3.87702 8.79004 2.45996 7.37298 2.45996 5.625C2.45996 3.87702 3.87702 2.45996 5.625 2.45996C7.37298 2.45996 8.79004 3.87702 8.79004 5.625ZM17.54 5.625C17.54 7.37298 16.123 8.79004 14.375 8.79004C13.7416 8.79004 13.153 8.60173 12.6582 8.28125L8.28125 12.6582C8.60173 13.153 8.79004 13.7416 8.79004 14.375C8.79004 16.123 7.37298 17.54 5.625 17.54C3.87702 17.54 2.45996 16.123 2.45996 14.375C2.45996 12.627 3.87702 11.21 5.625 11.21C6.25794 11.21 6.84623 11.3977 7.34082 11.7178L11.7178 7.34082C11.3977 6.84623 11.21 6.25794 11.21 5.625C11.21 3.87702 12.627 2.45996 14.375 2.45996C16.123 2.45996 17.54 3.87702 17.54 5.625Z"})),hf=Object.freeze(Object.defineProperty({__proto__:null,default:fC},Symbol.toStringTag,{value:"Module"})),UDe=j(()=>I(()=>Promise.resolve().then(()=>nC),void 0),{loading:t=>L(t)}),VDe=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),GDe=j(()=>I(()=>import("./cbq186c7y6011gk6.js").then(t=>t._),__vite__mapDeps([476,1])),{loading:t=>L(t)}),jT=j(()=>I(()=>import("./nvq9tj7793nseqek.js").then(t=>t._),__vite__mapDeps([485,1])),{loading:t=>L(t)}),$De=j(()=>I(()=>import("./htbwawyw7ysxilu7.js").then(t=>t._),__vite__mapDeps([275,1])),{loading:t=>L(t)}),HDe=j(()=>I(()=>import("./nvaqdt3y30npjcvs.js").then(t=>t._),__vite__mapDeps([276,1])),{loading:t=>L(t)}),WDe=j(()=>I(()=>import("./fdkwc23ton7ihjd6.js").then(t=>t._),__vite__mapDeps([277,1])),{loading:t=>L(t)}),zDe=j(()=>I(()=>import("./ghu42c4s93zulelp.js").then(t=>t._),__vite__mapDeps([486,1])),{loading:t=>L(t)}),PT=j(()=>I(()=>import("./igq4g5h0kvd74hab.js").then(t=>t._),__vite__mapDeps([24,1])),{loading:t=>L(t)}),NT=j(()=>I(()=>import("./i5ul706mvzl44ckw.js").then(t=>t._),__vite__mapDeps([487,1])),{loading:t=>L(t)}),qDe=j(()=>I(()=>import("./no9gq0vcq6wwuw16.js").then(t=>t._),__vite__mapDeps([488,1])),{loading:t=>L(t)}),RT=j(()=>I(()=>import("./gmvm3a44s5px1mmy.js").then(t=>t._),__vite__mapDeps([279,1])),{loading:t=>L(t)}),LT=j(()=>I(()=>import("./kpucc6kjx38gmgn0.js").then(t=>t._),__vite__mapDeps([281,1])),{loading:t=>L(t)}),YDe=j(()=>I(()=>import("./n5fd4985ipltjznc.js").then(t=>t._),__vite__mapDeps([353,1])),{loading:t=>L(t)}),ZDe=j(()=>I(()=>import("./feinpytms1ktgvew.js").then(t=>t._),__vite__mapDeps([489,1])),{loading:t=>L(t)}),KDe=j(()=>I(()=>import("./gkchj3gt2d9zqfx9.js").then(t=>t._),__vite__mapDeps([490,1])),{loading:t=>L(t)}),QDe=j(()=>I(()=>import("./ca33yvtckkoksjrq.js").then(t=>t._),__vite__mapDeps([282,1])),{loading:t=>L(t)}),OT=j(()=>I(()=>import("./hszplc0bkj6ysztt.js").then(t=>t._),__vite__mapDeps([283,1])),{loading:t=>L(t)}),JDe=j(()=>I(()=>import("./jj35k2l0yxs98vlp.js").then(t=>t._),__vite__mapDeps([284,1])),{loading:t=>L(t)}),XDe=j(()=>I(()=>import("./o39b1dsvjygcu6em.js").then(t=>t._),__vite__mapDeps([491,1])),{loading:t=>L(t)}),DT=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)}),eFe=j(()=>I(()=>import("./d3y46a2mpr2sbz7s.js").then(t=>t._),__vite__mapDeps([27,1])),{loading:t=>L(t)}),tFe=j(()=>I(()=>import("./eksnz7unqn6y0zbq.js").then(t=>t._),__vite__mapDeps([286,1])),{loading:t=>L(t)}),nFe=j(()=>I(()=>import("./oz2w8uv2a0ics46w.js").then(t=>t._),__vite__mapDeps([287,1])),{loading:t=>L(t)}),sFe=j(()=>I(()=>import("./ohx0iiiymbe8tpfk.js").then(t=>t._),__vite__mapDeps([492,1])),{loading:t=>L(t)}),oFe=j(()=>I(()=>import("./kbowh9zd5zxac3v2.js").then(t=>t._),__vite__mapDeps([493,1])),{loading:t=>L(t)}),aFe=j(()=>I(()=>import("./d2ojcu4ayxxwx05r.js").then(t=>t._),__vite__mapDeps([494,1])),{loading:t=>L(t)}),FT=j(()=>I(()=>import("./du2nevxu1vmhk9y6.js").then(t=>t._),__vite__mapDeps([288,1])),{loading:t=>L(t)}),rFe=j(()=>I(()=>import("./foxtdwhog9l3iocy.js").then(t=>t._),__vite__mapDeps([354,1])),{loading:t=>L(t)}),iFe=j(()=>I(()=>import("./jl3h9zo6ij9nwubd.js").then(t=>t._),__vite__mapDeps([289,1])),{loading:t=>L(t)}),BT=j(()=>I(()=>import("./ivu8omwsepspweze.js").then(t=>t._),__vite__mapDeps([291,1])),{loading:t=>L(t)}),lFe=j(()=>I(()=>import("./gxl97nh5abz8zsuj.js").then(t=>t._),__vite__mapDeps([495,1])),{loading:t=>L(t)}),cFe=j(()=>I(()=>import("./eyp3kz606u6ff1xy.js").then(t=>t._),__vite__mapDeps([292,1])),{loading:t=>L(t)}),dFe=j(()=>I(()=>import("./myvdm65kegx88luy.js").then(t=>t._),__vite__mapDeps([293,1])),{loading:t=>L(t)}),uFe=j(()=>I(()=>import("./pdnyr73t8ws12mes.js").then(t=>t._),__vite__mapDeps([294,1])),{loading:t=>L(t)});function mFe({messages:t,isRequestActive:e,isLastMessageInTurn:n,isRetrieval:s,isUsingGizmo:o,isUsingProject:a}){var x,y;const i=sV({messages:t}),l=fFe(t),c=l.filter(b=>SFe(b,!1)&&!CFe(b)),d=(x=c[c.length-1])!=null?x:void 0,u=J();if(wFe(t).some(({content:b})=>b.content_type===dt.SystemError))return null;let m=eo.Running;const f=c.filter(b=>b.type===zt.Search).length,p={count:c.length-f,domain:d?K9((y=s_(d))!=null?y:""):void 0,query:d?tV(d):void 0};let g=s?o?a?u.formatMessage(Gt.searchingProjectFiles):u.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):u.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):u.formatMessage({id:"message.tools.browse.running",defaultMessage:"Searching the web"});return t.some(qse)?(m=eo.Stopped,g=s?o?u.formatMessage({id:"browsingMessage.searchingKnowledgeStopped",defaultMessage:"Stopped searching knowledge"}):u.formatMessage({id:"browsingMessage.retrievalStopped",defaultMessage:"Stopped reading documents"}):u.formatMessage({id:"message.tools.browse.stopped",defaultMessage:"Search stopped"})):!n||!e?l.length>0&&l.every(b=>b.didError)?(m=eo.Error,g=s?o?u.formatMessage({id:"browsingMessage.searchingKnowledgeFailed",defaultMessage:"Error searching knowledge"}):u.formatMessage({id:"browsingMessage.retrievalFailed",defaultMessage:"Error reading documents"}):u.formatMessage({id:"message.tools.browse.failed",defaultMessage:"Search failed"})):(m=eo.Finished,g=s?null:p.count===0?u.formatMessage({id:"message.tools.browse.started",defaultMessage:"Searching the web..."}):u.formatMessage({id:"message.tools.browse.finished",defaultMessage:"Searched {count, plural, =0 {0 sites} one {# site} other {# sites}}"},p)):i.length>0?g=oV({contextualAnswerSources:i,intl:u}):c.length>0&&(g=vFe(u,p,s,o,c[c.length-1])),(c.length>0||s&&n)&&m!==eo.Error?r.jsx(Qy,{highlightedCommand:g,showWorkUserSetting:!1,status:m,children:c.length===0?null:r.jsx(pFe,{commands:c})}):r.jsx(kFe,{$isError:m===eo.Error,children:g})}function UT(t){var e,n,s;return((e=t.metadata)==null?void 0:e.command)==="quote"||((n=t.metadata)==null?void 0:n.command)==="quote_full"||((s=t.metadata)==null?void 0:s.command)==="quote_lines"}function fFe(t){return t.map((e,n)=>{if(e.author.role!==Ze.Tool||n>0&&UT(e)&&UT(t[n-1]))return null;const s=e.metadata;if(!s)return null;const{command:o,status:a}=s;return o?{type:o,status:a,didError:e.content.content_type===dt.SystemError,message:e}:null}).filter(Ob)}function pFe({commands:t}){const e=J();return r.jsx("div",{className:"divide-token-border-default border-token-border-default mb-4 divide-y rounded-xl border text-sm",children:r.jsx(dn,{initial:!1,children:t.map((n,s)=>{const o=_Fe(n);if(o==null)return null;const{icon:a,url:i,title:l,externalLink:c}=o,d=i?K9(i):void 0,u=l?typeof l=="string"?l:e.formatMessage(l):null,m=i&&r3(i);return r.jsx(Xe.div,{initial:"collapsed",animate:"open",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},children:r.jsxs(gFe,{url:c!=null?c:i,className:W("flex items-start gap-3 px-4 py-3",l?"text-token-text-secondary":"text-token-text-primary",s===0&&"rounded-t-xl",s===t.length-1&&"rounded-b-xl"),children:[a?r.jsx(a,{className:"icon-sm text-token-text-secondary mt-0.5 shrink-0"}):i?r.jsx(Ts,{url:i,className:"mt-1"}):null,r.jsxs("div",{children:[u&&r.jsxs("div",{className:"text-token-text-primary line-clamp-1",children:[m&&"".concat(m,"  "),u]}),r.jsx("div",{children:d})]})]})},s)})})})}function gFe({url:t,children:e,className:n}){return t?r.jsxs("a",{href:t,target:"_blank",className:W(n,"group hover:bg-token-main-surface-secondary relative"),rel:"noreferrer",children:[e,r.jsx("div",{className:"from-token-main-surface-secondary invisible absolute end-3 bg-linear-to-l to-transparent ps-4 group-hover:visible",children:r.jsx(VDe,{className:"icon text-token-text-secondary"})})]}):r.jsx("div",{className:n,children:e})}function hFe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.title:null}function tV(t){var e,n;return(n=(e=t.message.metadata)==null?void 0:e.args)==null?void 0:n[0]}function _Fe(t){var e,n,s;switch(t.type){case zt.Search:{const o=(e=t.message.metadata)==null?void 0:e.search_engine;if(o&&o!==_q.Bing)return null;const a=tV(t);return{icon:UDe,url:((n=t.message.metadata)==null?void 0:n.message_source)==="apple"?null:"bing.com",externalLink:yFe(t),title:a?"".concat(a,""):He({id:"message.tools.browse.querying",defaultMessage:"Querying"})}}case zt.Click:case zt.MultiClick:case zt.Lookup:case zt.OpenUrl:case zt.Open:case zt.Quote:case zt.QuoteFull:case zt.QuoteLines:case zt.Scroll:return{url:s_(t),title:(s=hFe(t))!=null?s:void 0};case zt.Spinner:case zt.Back:return null}}function xFe(t){const e=new URLSearchParams({query:t.query});return"".concat(gr,"/bing/redirect?").concat(e.toString())}function yFe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n.args)==null?void 0:s[0];return e===void 0?null:xFe({query:e})}function vFe(t,e,n,s,o){switch(o==null?void 0:o.type){case zt.Click:case zt.MultiClick:case zt.Lookup:case zt.OpenUrl:case zt.Quote:case zt.QuoteFull:case zt.QuoteLines:case zt.Scroll:case zt.Open:case zt.Back:return t.formatMessage({id:"message.tools.browse.reading",defaultMessage:"Browsing {domain}"},e);case zt.Search:case void 0:return n?s?t.formatMessage({id:"browsingMessage.searchingKnowledge",defaultMessage:"Searching my knowledge"}):t.formatMessage({id:"browsingMessage.startingRetrieval",defaultMessage:"Reading documents"}):t.formatMessage({id:"message.tools.browse.searching",defaultMessage:'Searching "{query}"'},e);case zt.Spinner:return null}}function bFe(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type==="file"?e.name:null}function SFe(t,e){switch(t.type){case zt.Search:return!0;case zt.Click:case zt.Lookup:case zt.MultiClick:case zt.OpenUrl:case zt.Quote:case zt.QuoteFull:case zt.QuoteLines:return e?bFe(t)!=null:s_(t)!=null;case zt.Open:case zt.Back:case zt.Scroll:case zt.Spinner:return!1}}function CFe(t){var e;return((e=t.message.metadata)==null?void 0:e.message_source)==="apple"}function s_(t){var n,s;const e=(s=(n=t.message.metadata)==null?void 0:n._cite_metadata)==null?void 0:s.metadata_list[0];return e!=null&&e.type!=="file"?e.url:null}function wFe(t){return t.filter(e=>e.author.role===Ze.Tool)}var S6;const kFe=ct.p(S6||(S6=rt(["first:mt-0 my-1.5 h-8 flex items-center ltr:me-auto rtl:ms-auto empty:hidden\n",""])),({$isError:t})=>t?"text-token-text-error":"text-token-text-secondary"),pC={aha_sync_connector:"Aha!",asana_sync_connector:"Asana",azure_devops_sync_connector:"Azure DevOps",basecamp_sync_connector:"Basecamp",google_drive:"Google Drive",sharepoint:"SharePoint",slack:"Slack",github:"GitHub",clickup_sync_connector:"ClickUp",dropbox_sync_connector:"Dropbox",box_sync_connector:"Box",linear_sync_connector:"Linear",intercom_sync_connector:"Intercom",notion_sync_connector:"Notion",confluence_sync_connector:"Confluence",jira_sync_connector:"Jira",jira_servicemanagement_sync_connector:"Jira Service",hubspot_sync_connector:"HubSpot",salesforce_sync_connector:"Salesforce",freshdesk_sync_connector:"Freshdesk",freshservice_sync_connector:"Freshservice",front_sync_connector:"Front",gitlab_sync_connector:"GitLab Issues",gorgias_sync_connector:"Gorgias",helpscout_sync_connector:"Help Scout",ironclad_sync_connector:"Ironclad",pipedrive_sync_connector:"Pipedrive",salesforce_service_cloud_sync_connector:"Salesforce Service Cloud",shortcut_sync_connector:"Shortcut",teamwork_sync_connector:"Teamwork.com",zendesk_sync_connector:"Zendesk",zoho_sync_connector:"Zoho",zoho_desk_sync_connector:"Zoho Desk",slurm_sharepoint:"SharePoint",slurm_linear:"Linear",slurm_box:"Box",slurm_dropbox:"Dropbox",slurm_gmail:"Gmail",slurm_google_drive:"Google Drive",slurm_notion:"Notion",slurm_hubspot:"HubSpot"},nV={aha_sync_connector:uFe,asana_sync_connector:dFe,azure_devops_sync_connector:cFe,basecamp_sync_connector:lFe,google_drive:DT,sharepoint:PT,slack:WDe,github:nFe,clickup_sync_connector:iFe,dropbox_sync_connector:FT,box_sync_connector:BT,linear_sync_connector:LT,intercom_sync_connector:QDe,notion_sync_connector:RT,confluence_sync_connector:rFe,jira_sync_connector:YDe,jira_servicemanagement_sync_connector:ZDe,hubspot_sync_connector:OT,salesforce_sync_connector:NT,freshdesk_sync_connector:aFe,freshservice_sync_connector:oFe,front_sync_connector:sFe,gitlab_sync_connector:tFe,gorgias_sync_connector:XDe,helpscout_sync_connector:JDe,ironclad_sync_connector:KDe,pipedrive_sync_connector:qDe,salesforce_service_cloud_sync_connector:NT,shortcut_sync_connector:zDe,teamwork_sync_connector:HDe,zendesk_sync_connector:$De,zoho_sync_connector:jT,zoho_desk_sync_connector:jT,slurm_sharepoint:PT,slurm_linear:LT,slurm_box:BT,slurm_dropbox:FT,slurm_gmail:eFe,slurm_google_drive:DT,slurm_notion:RT,slurm_hubspot:OT},sV=({messages:t})=>[...t.filter(hq).reduce((s,o)=>{var a,i;return(i=(a=o.metadata)==null?void 0:a.retrieval_search_sources)==null||i.forEach(l=>{(l.product_type==="contextual_answers"||l.product_type==="slurm")&&l.source_name in pC&&s.add(l.source_name)}),s},new Set)],oV=({contextualAnswerSources:t,intl:e})=>{const n=t.map(a=>{var i;return(i=pC[a])!=null?i:a}).filter(Boolean),s=t.map(a=>{var l;const i=(l=nV[a])!=null?l:GDe;return r.jsx(i,{className:"icon-sm"},a)}).filter(Boolean),o=t.length===1?e.formatMessage({id:"Jzt2om",defaultMessage:"Reading {source}"},{source:n[0]}):t.length===2?e.formatMessage({id:"wTM7gR",defaultMessage:"Reading {source1} and {source2}"},{source1:n[0],source2:n[1]}):e.formatMessage({id:"xnwjH1",defaultMessage:"Reading {source1}, {source2} and more"},{source1:n[0],source2:n[1]});return t.length>0?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex items-center gap-1",children:s}),o]}):void 0},rst=Object.freeze(Object.defineProperty({__proto__:null,BrowsingMessage:mFe,CA_SOURCE_TO_ICON_MAP:nV,CA_SOURCE_TO_TEXT_MAP:pC,getCASources:sV,getContextualAnswerDisplayText:oV,getVisitedUrl:s_},Symbol.toStringTag,{value:"Module"})),MFe=j(()=>I(()=>Promise.resolve().then(()=>hf),void 0),{loading:t=>L(t)}),TFe=/^(\d+)([^]*)([^]+)?$/,EFe=["Citation Marker","Content Snippet","Content source","File created at","File last modified at","Mclick Target","Title"];function ist(t){const e=[];if(!t||typeof t!="object")return null;if(!Object.hasOwn(t,"results"))return null;const n=t.results;if(!Array.isArray(n))return null;const s=n.map(VT);for(const a of s){if(a==null)return null;e.push(a)}let o;if(Object.hasOwn(t,"debug_info")){const a=t.debug_info;if(!a||typeof a!="object"||!Object.hasOwn(a,"retrieval_results")||!Array.isArray(a.retrieval_results))return null;const i=a.retrieval_results;o={retrieval_results:[]};for(const l of i){if(!l||typeof l!="object"||typeof l.query!="string"||!Array.isArray(l.results))return null;const c=l.query,d=l.results.map(VT),u=[];for(const m of d){if(!m)return null;u.push(m)}o.retrieval_results.push({query:c,results:u})}}return{results:e,debug_info:o}}function VT(t){const e={};if(!t||typeof t!="object")return null;for(const[n,s]of Object.entries(t))n==="score"&&typeof s=="number"?e.score=s:["document_id","content","title","created_at","updated_at","file_created_at","file_modified_at","document_chunk_id","cloud_doc_url","document_source"].includes(n)&&(s==null||typeof s=="string")&&(e[n]=s!=null?s:void 0);return e.document_id==null||e.content==null?null:B(w({},e),{document_id:e.document_id,content:e.content})}function AFe(t){var i;if(!t.startsWith("# "))return null;const e=t.slice(2),n=TFe.exec(e);if(!n||n.length<3)return null;const s=parseInt(n[1],10),o=n[2],a=((i=n[3])==null?void 0:i.slice(1))||void 0;return{resultNum:s,title:o,documentId:a}}function aV(t,e){var i,l;const n=[];let s=null,o="";const a=t.split("\n");a.length>0&&a[a.length-1].startsWith("Visible: ")&&(o=(i=a.pop())!=null?i:"");for(const c of a){const d=c.trim(),u=AFe(d);if(u){const{resultNum:m,documentId:f,title:p}=u;s&&n.push(s),s={resultNum:m,title:(l=p||f)!=null?l:"",documentId:f,contents:"",metadata:{}}}else if(s)if(s.contents)s.contents+="\n".concat(c);else{let m=!1;for(const f of EFe){const p="".concat(f,":");if(d.startsWith(p)){s.metadata[f]=d.slice(p.length),m=!0;break}}m||(s.contents=c)}}if(s&&n.push(s),e)for(let c=0;c<n.length;c++)n[c].metadata.cloud_doc_url?n[c].cloudDocUrl=String(n[c].metadata.cloud_doc_url):c<e.length&&(n[c].cloudDocUrl=e[c]);return{visibilityLine:o,chunks:n}}function lst(t){const e=t.content;switch(e.content_type){case dt.Text:return e.parts.join();case dt.ExecutionOutput:case dt.SystemError:case dt.Code:case dt.SystemMessage:case dt.TetherQuote:case dt.TetherBrowsingCode:return e.text;case dt.TetherBrowsingDisplay:return e.result;case dt.SonicWebpage:return e.text;case dt.UserEditableContext:case dt.ModelEditableContext:case dt.Error:return null;case dt.MultimodalText:return GT(e.parts);case dt.SystemContent:case dt.DeveloperContent:return e.instructions==null?null:typeof e.instructions=="string"?e.instructions:GT(e.instructions);case dt.StructuredThoughts:case dt.ReasoningRecap:return null;case dt.ComputerOutput:return null;case dt.SuperWidget:return null;case dt.CitableCodeOutput:return e.output_str}}function GT(t){return t.filter(e=>typeof e=="string").join()}function cst(t){var s;const e=t.trim().split("/").filter(o=>o.length>0);if(!e.length)return null;const n=e[0].trim();return n?{connectorName:n==="uploaded_files:"?"uploaded files":n,Icon:(s=FS(n))!=null?s:MFe}:null}const rV=j(()=>I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1])),{loading:t=>L(t)}),IFe=250,jFe=700;function dst(t){"use forget";var ce,ye,fe,Ce,ee,te;const e=H.c(53),{handleShowRetrievalResults:n,clientThreadId:s,turnIndex:o,className:a,responseComplete:i}=t,l=G();let c;e[0]!==o?(c=le=>me.getConversationTurnAtIndex(le,o).messages,e[0]=o,e[1]=c):c=e[1];const d=Ue(s,c);let u;e[2]!==s||e[3]!==l?(u=()=>wn(ht(l,s)),e[2]=s,e[3]=l,e[4]=u):u=e[4];const m=ue(u),f=eV(m);let p;e[5]!==s||e[6]!==i||e[7]!==o?(p={clientThreadId:s,turnIndex:o,responseComplete:i},e[5]=s,e[6]=i,e[7]=o,e[8]=p):p=e[8];const g=p;let h;e[9]===Symbol.for("react.memo_cache_sentinel")?(h=function(re){var _e;const ve=new Map;for(const we of re){const De=((_e=we.name)!=null?_e:"").trim().toLowerCase();ve.set(De,we)}return ve.size<3?re:Array.from(ve.values())},e[9]=h):h=e[9];const x=h;let y;e:{if(!f){let re;e[10]===Symbol.for("react.memo_cache_sentinel")?(re=[],e[10]=re):re=e[10],y=re;break e}let le;if(e[11]!==d){const re=new Map,ve=new Set;for(const _e of d)if(_e.author.role===Ze.Tool&&_e.author.name==="api_tool.call_tool"&&_e.content.content_type===dt.MultimodalText&&((ce=_e.metadata)==null?void 0:ce.api_tool_type)==="glaux"){const we=(ye=_e.metadata)==null?void 0:ye.citation_metadata,De=we==null?void 0:we.id;if(!we||!De||!we.url)continue;re.set(De,{id:De,name:we.title,cloud_doc_url:we.url})}else if(B3(_e)){const we=aV(_e.content.result),De=(Ce=(fe=_e.metadata)==null?void 0:fe.cloud_doc_urls)!=null?Ce:[];we.chunks.forEach((ge,Ne)=>{if(!ge.documentId||ve.has(ge.documentId))return;let je;if(ge.metadata.cloud_doc_url)je=ge.metadata.cloud_doc_url.toString();else if(Ne<De.length)je=De[Ne];else if(ge.documentId.endsWith("--google")){const Fe=ge.documentId.split("--")[1];je="https://drive.google.com/file/d/".concat(Fe)}if(!je)return;ve.add(ge.documentId);const Te={id:ge.documentId,name:ge.title,cloud_doc_url:je};re.set(Te.id,Te)})}le=Array.from(re.values()).filter(OFe),e[11]=d,e[12]=le}else le=e[12];y=le}const b=y;let v;if(e[13]!==b){v=new Set;for(const le of b){const re=Ai((ee=le.cloud_doc_url)!=null?ee:"");v.add((te=re==null?void 0:re.Icon)!=null?te:le.cloud_doc_url?fC:rV)}e[13]=b,e[14]=v}else v=e[14];let S;e[15]!==v?(S=Array.from(v).slice(0,3),e[15]=v,e[16]=S):S=e[16];const C=S,k=_.useRef(!1);let M;e[17]!==g||e[18]!==b.length?(M=()=>{k.current||b.length>0&&(k.current=!0,U.logEvent("File Sources Carousel Shown",g))},e[17]=g,e[18]=b.length,e[19]=M):M=e[19];let T;e[20]!==g||e[21]!==b?(T=[b,g],e[20]=g,e[21]=b,e[22]=T):T=e[22],_.useEffect(M,T);let E;e[23]!==b?(E=x(b),e[23]=b,e[24]=E):E=e[24];const A=E,[N,R]=_.useState(0),[O,D]=_.useState(!1);let F;e[25]===Symbol.for("react.memo_cache_sentinel")?(F=[],e[25]=F):F=e[25];const V=_.useRef(F);let z;e[26]!==A?(z=A.map(LFe).join("|"),e[26]=A,e[27]=z):z=e[27];const $=z;let Y;e[28]!==A.length||e[29]!==b.length?(Y=()=>{V.current.forEach(RFe),V.current=[];const le=Math.min(1,A.length);if(A.length===0){_.startTransition(()=>{D(!1),R(0)});return}_.startTransition(()=>{D(!1),R(le)});const re=Math.min(3,A.length);for(let ve=le;ve<re;ve=ve+1,ve){const _e=window.setTimeout(()=>{R(we=>Math.max(we,ve+1))},IFe*ve);V.current.push(_e)}if(b.length>3){const ve=window.setTimeout(()=>D(!0),jFe);V.current.push(ve)}return()=>{V.current.forEach(NFe),V.current=[]}},e[28]=A.length,e[29]=b.length,e[30]=Y):Y=e[30];let Z;e[31]!==$||e[32]!==A.length||e[33]!==b.length?(Z=[$,A.length,b.length],e[31]=$,e[32]=A.length,e[33]=b.length,e[34]=Z):Z=e[34],_.useEffect(Y,Z);const Q=Math.min(N,A.length),q=O&&b.length>3;if(b.length===0)return null;let X;e[35]!==a?(X=W("flex w-full flex-row gap-2",a),e[35]=a,e[36]=X):X=e[36];let oe;e[37]===Symbol.for("react.memo_cache_sentinel")?(oe=W("flex w-full flex-1 transform-gpu flex-row justify-start gap-2"),e[37]=oe):oe=e[37];let se;e[38]!==A||e[39]!==Q?(se=A.slice(0,Q).map(PFe),e[38]=A,e[39]=Q,e[40]=se):se=e[40];let de;e[41]!==g||e[42]!==n||e[43]!==C||e[44]!==b.length||e[45]!==q?(de=q&&r.jsx(FFe,{overflowIcons:C,count:b.length,onClick:()=>{U.logEvent("File Sources Carousel Clicked",g),n()}}),e[41]=g,e[42]=n,e[43]=C,e[44]=b.length,e[45]=q,e[46]=de):de=e[46];let ie;e[47]!==se||e[48]!==de?(ie=r.jsxs("div",{className:oe,children:[se,de]}),e[47]=se,e[48]=de,e[49]=ie):ie=e[49];let ae;return e[50]!==X||e[51]!==ie?(ae=r.jsx("div",{className:X,children:ie}),e[50]=X,e[51]=ie,e[52]=ae):ae=e[52],ae}function PFe(t){return r.jsx(DFe,{item:t},t.id)}function NFe(t){return window.clearTimeout(t)}function RFe(t){return window.clearTimeout(t)}function LFe(t){return t.id}function OFe(t){return!!t.cloud_doc_url}const DFe=_.memo(function(e){"use forget";var C,k,M;const n=H.c(22),{item:s}=e;if(!s)return null;const o=(C=s.cloud_doc_url)!=null?C:"";let a;n[0]!==o?(a=Ai(o),n[0]=o,n[1]=a):a=n[1];const i=a,l=(k=i==null?void 0:i.Icon)!=null?k:s.cloud_doc_url?fC:rV;let c,d,u,m;n[2]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:0,x:6},d={opacity:1,x:0},u={type:"spring",stiffness:180,damping:26,mass:.8},m={willChange:"transform, opacity"},n[2]=c,n[3]=d,n[4]=u,n[5]=m):(c=n[2],d=n[3],u=n[4],m=n[5]);const f=s.cloud_doc_url;let p;n[6]===Symbol.for("react.memo_cache_sentinel")?(p=W("block h-[64px] min-w-0 flex-1 basis-0","relative flex flex-col gap-1 rounded-2xl px-4 py-3","border-token-border-default border","bg-token-bg-primary","hover:bg-token-bg-tertiary cursor-pointer"),n[6]=p):p=n[6];let g;n[7]!==l?(g=l?r.jsx(l,{className:"icon-sm"}):null,n[7]=l,n[8]=g):g=n[8];const h=(M=s.cloud_doc_url)!=null?M:"";let x;n[9]!==h?(x=DS(h),n[9]=h,n[10]=x):x=n[10];let y;n[11]!==x?(y=r.jsx("div",{className:"text-token-text-secondary line-clamp-1 text-xs",children:x}),n[11]=x,n[12]=y):y=n[12];let b;n[13]!==y||n[14]!==g?(b=r.jsxs("div",{className:"flex items-center gap-1",children:[g,y]}),n[13]=y,n[14]=g,n[15]=b):b=n[15];let v;n[16]!==s.name?(v=r.jsx("div",{className:"text-token-text-primary line-clamp-1 truncate text-sm",children:s.name}),n[16]=s.name,n[17]=v):v=n[17];let S;return n[18]!==s.cloud_doc_url||n[19]!==b||n[20]!==v?(S=r.jsxs(Xe.a,{initial:c,animate:d,transition:u,style:m,href:f,target:"_blank",rel:"noreferrer",className:p,children:[b,v]}),n[18]=s.cloud_doc_url,n[19]=b,n[20]=v,n[21]=S):S=n[21],S}),FFe=_.memo(function(e){"use forget";const n=H.c(15),{overflowIcons:s,count:o,onClick:a}=e;let i,l,c,d;n[0]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:0,x:6},l={opacity:1,x:0},c={type:"spring",stiffness:180,damping:26,mass:.8},d={willChange:"transform, opacity"},n[0]=i,n[1]=l,n[2]=c,n[3]=d):(i=n[0],l=n[1],c=n[2],d=n[3]);let u;n[4]===Symbol.for("react.memo_cache_sentinel")?(u=Array.from({length:3}),n[4]=u):u=n[4];let m;n[5]!==s?(m=r.jsx("div",{className:"flex flex-row gap-1",children:u.map((h,x)=>{const y=s[x];return r.jsx("div",{children:y?r.jsx(y,{className:"icon-sm"}):r.jsx("div",{className:"icon-sm rounded-full object-cover"})},x)})}),n[5]=s,n[6]=m):m=n[6];let f;n[7]!==o?(f=r.jsx("div",{className:"text-token-text-primary text-start text-sm",children:r.jsx(P,{id:"aQJYKd",defaultMessage:"{count} {count, plural, one {source} other {sources}}",values:{count:o}})}),n[7]=o,n[8]=f):f=n[8];let p;n[9]!==m||n[10]!==f?(p=r.jsxs("div",{className:"flex h-full flex-col justify-between",children:[m,f]}),n[9]=m,n[10]=f,n[11]=p):p=n[11];let g;return n[12]!==a||n[13]!==p?(g=r.jsx(Xe.button,{initial:i,animate:l,transition:c,style:d,className:"bg-token-bg-primary hover:bg-token-bg-tertiary border-token-border-default flex h-[64px] min-w-[110px] shrink-0 flex-col justify-between rounded-2xl border px-4 py-3",onClick:a,children:p}),n[12]=a,n[13]=p,n[14]=g):g=n[14],g}),$T=j(()=>I(()=>Promise.resolve().then(()=>hf),void 0),{loading:t=>L(t)});function ust({handleShowRetrievalResults:t,clientThreadId:e,turnIndex:n,responseComplete:s=!1}){const o=G(),a=Zle(),[i,l]=Ue(e,p=>[me.getTurnContentReferences(p,n),me.getConversationTurnAtIndex(p,n).messages]),c=_.useMemo(()=>({turnIndex:n,clientThreadId:e,responseComplete:s}),[e,s,n]),d=_.useRef(!1);_.useEffect(()=>{d.current||(d.current=!0,U.logEvent("File Sources Footer Shown",c))},[c]);const u=_.useCallback(()=>{U.logEvent("File Sources Footer Clicked",c),t()},[t,c]),m=_.useMemo(()=>{var b,v,S;const p=new Set,g=[];function h(C){!C||p.has(C)||(p.add(C),g.push(C))}if(i.forEach(C=>{var k,M;C.type==="file"?h((M=C.cloud_doc_url)!=null?M:(k=C.extra)==null?void 0:k.cloud_doc_url):C.type==="file_navlist"&&C.items.forEach(T=>{h(T.cloud_doc_url)})}),s){for(const C of l)if(B3(C)){const k=aV(C.content.result),M=(v=(b=C.metadata)==null?void 0:b.cloud_doc_urls)!=null?v:[],T=k.chunks;for(let E=0;E<T.length;E++){const A=T[E];if(!A.documentId)continue;if(E<M.length){h(M[E]);continue}const N=A.documentId.endsWith("--google")?A.documentId.split("--")[1]:void 0,R=(S=A.metadata.cloud_doc_url)!=null?S:N?"https://drive.google.com/file/d/".concat(N):void 0;h(R==null?void 0:R.toString())}break}}const x=xe(o,"1424158285")||a,y=new Set;for(let C=0;C<g.length;C++){const k=g[C],M=Ai(k);if(M)y.add(M.Icon);else if(x&&k.length>0){const T=({className:E})=>r.jsx(Ts,{url:k,className:W(E,"object-cover"),size:32,minSize:20,fallback:r.jsx($T,{className:E})});y.add(T)}else y.add($T);if(y.size>=3)break}return y},[l,i,s,o,a]),f=vn(un);return m.size===0&&!s||f?null:r.jsx("div",{className:"relative h-[60px]",children:r.jsx(Xe.div,{className:"absolute h-[60px]",initial:{opacity:0},animate:{opacity:1},children:r.jsxs("button",{className:W("not-prose group/footnote border-token-border-default bg-token-main-surface-primary hover:bg-token-main-surface-secondary mt-3 mb-2 flex w-fit items-center gap-1.5 rounded-xl border py-2","ps-3 pe-2.5"),onClick:u,children:[m.size>0&&r.jsx("div",{className:"flex flex-row-reverse gap-1",children:Array.from(m).reverse().map((p,g)=>r.jsx(Xe.div,{className:W("border-token-main-surface-primary bg-token-main-surface-primary flex items-center overflow-hidden","group-hover/footnote:border-token-main-surface-secondary","relative"),initial:{opacity:0},animate:{opacity:1},children:r.jsx(p,{className:"icon-sm"})},g))}),r.jsx("div",{className:"text-token-text-secondary flex items-center gap-0.5 text-xs font-semibold",children:r.jsx(P,{id:"/48IOP",defaultMessage:"Sources"})})]})})})}var C6;const mst=ct.header(C6||(C6=rt(["draggable no-draggable-children sticky top-0 p-2 touch:p-2.5 flex items-center justify-between z-20 h-header-height bg-token-main-surface-primary"]))),fst=128;function pst(t){var l;const i=t,{tooltip:e,className:n,testId:s}=i,o=Me(i,["tooltip","className","testId"]),a=r.jsx(he,B(w({color:(l=t.color)!=null?l:"secondary",size:"medium"},o),{className:n,"data-testid":s}));return e!=null?r.jsx(kt,{label:e,children:a}):a}function gst({label:t,disabled:e=!1,tooltipText:n,value:s}){const o=_.useId();return r.jsx("div",{className:W("flex items-center gap-2",e?"opacity-50":""),children:r.jsx(kt,{disabled:n==null,label:n,side:"right",triggerAs:null,children:r.jsxs("label",{htmlFor:o,className:"flex cursor-pointer items-center gap-1",children:[r.jsx(MS,{id:o,value:s,disabled:e,className:"me-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:r.jsx(TS,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),t]})})})}function hst(t){return r.jsx(yp,B(w({},t),{className:W("rounded-sm! checked:border-black! checked:bg-black! dark:border-gray-600 dark:bg-gray-700",t.className)}))}const _st=({gizmo:t})=>r.jsx("div",{className:"text-token-text-tertiary pointer-events-none text-sm select-none","aria-hidden":!0,inert:!0,children:t.gizmo.display.name}),BFe=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),xst=({message:t,clientThreadId:e,isUserTurn:n})=>{var i,l,c,d;const s=Ue(e,u=>{var m,f;return t&&((m=t.metadata)==null?void 0:m.async_task_id)&&me.hasContinuedFromAsyncTask(u,t==null?void 0:t.id,(f=t==null?void 0:t.metadata)==null?void 0:f.async_task_id)});if(!t||!(s||n&&((i=t.metadata)!=null&&i.async_task_title)))return null;const o=(l=t.metadata)==null?void 0:l.async_task_original_message_id,a=()=>{o&&(qe(e,u=>{u.scrollToMessageId=o}),requestAnimationFrame(()=>{qe(e,u=>{u.scrollToMessageId=void 0})}))};return r.jsx(f1e,{icon:r.jsx(BFe,{className:"h-4 w-4"}),label:(d=(c=t.metadata)==null?void 0:c.async_task_title)!=null?d:"",as:"button",onClick:a,isUserTurn:n})},UFe=({icons:t,size:e,stackOrder:n="bottom"})=>r.jsx("div",{className:"flex items-center",children:t.map((s,o)=>r.jsx("div",{className:"border-token-border-default box-content rounded-full border border-1 bg-white",style:{marginInlineStart:o===0?0:-e/2,zIndex:n==="bottom"?t.length-o:void 0,width:e,height:e,padding:e/4-1},children:s},o))}),VFe=j(()=>I(()=>import("./igq4g5h0kvd74hab.js").then(t=>t._),__vite__mapDeps([24,1])),{loading:t=>L(t)}),GFe=j(()=>I(()=>import("./oz2w8uv2a0ics46w.js").then(t=>t._),__vite__mapDeps([287,1])),{loading:t=>L(t)}),$Fe=j(()=>I(()=>import("./du2nevxu1vmhk9y6.js").then(t=>t._),__vite__mapDeps([288,1])),{loading:t=>L(t)}),HFe=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),HT=j(()=>I(()=>import("./gdj7aa3kvh4x8qzj.js").then(t=>t._),__vite__mapDeps([25,1])),{loading:t=>L(t)});function yst({clientThreadId:t,connectorToUpsell:e,analyticsMetadata:n}){const s=G(),o=cs(s),a=nf.useIsEnabled(t)&&!o,i=_n(),l=!!(i!=null&&i.isAdminOfAccount()||i!=null&&i.isOwnerOfAccount()),c=!!(i!=null&&i.isPersonalAccount()),d=l&&!c,u=()=>{d&&e===Ft.GDRIVE?window.location.href="/admin/ca":e==="general"?window.location.hash="#settings/".concat(Bn.Connectors):window.location.hash="#settings/".concat(Bn.Connectors,"?connector=").concat(fr[e===Ft.GDRIVE?bt.GDRIVE_ACTION_CONNECTOR:bt.SHAREPOINT_CONNECTOR],"&add-connector-link=true&referrer=").concat(zc.ConversationFollowup)};let m;if(e==="general")m=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(UFe,{size:16,icons:[r.jsx(HT,{width:16,height:16},"gdrive"),r.jsx($Fe,{width:16,height:16},"dropbox"),r.jsx(GFe,{width:16,height:16},"github")]}),r.jsx("div",{children:r.jsx(P,{id:"k3bYdS",defaultMessage:"<b>Connect apps</b> to find answers, summarize info, and get things done",values:{b:f=>r.jsx("span",{className:"font-medium",children:f})}})})]});else{const f=e===Ft.GDRIVE?HT:VFe;m=r.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center gap-2 pe-2 text-start text-sm",children:[r.jsx(f,{className:"icon-sm inline"}),r.jsx("div",{children:r.jsx(P,{id:"m1IPsN",defaultMessage:"<b>Connect {app}</b> to ask questions about all your files",values:{b:p=>r.jsx("span",{className:"font-medium",children:p}),app:e===Ft.GDRIVE?"Google Drive":"SharePoint"}})})]})}return a?r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:r.jsx(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:0*.03},exit:{opacity:0,translateY:4},children:r.jsxs(Xe.button,{whileHover:"hover",className:W("bg-primary hover:bg-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:f=>{u(),U.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",B(w({},An(n)),{action:"click",connectorToUpsell:e}))},onMouseEnter:()=>{U.logEventWithStatsig("chatgpt_message_followup_connector_upsell_action","chatgpt_message_followup_connector_upsell_action",B(w({},An(n)),{action:"hover",connectorToUpsell:e}))},children:[r.jsx(Xe.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(HFe,{className:"text-token-text-secondary icon"})}),m]})})})]}):null}const WFe=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),zFe=4;function iV({followups:t,analyticsMetadata:e}){const n=_.useRef(!1),s=Gl();_.useEffect(()=>{n.current||(n.current=!0,t.forEach((a,i)=>{U.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",B(w({},An(e)),{action:"show",position:(i+1).toString(),followup_text:yo(a)}))}))},[t,e]);const o=t.slice(0,zFe);return r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex w-full flex-col",children:o.map((a,i,l)=>r.jsx(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},transition:{delay:i*.03},exit:{opacity:0,translateY:4},children:r.jsx(qFe,{followUp:a,onSelectingSuggestedReply:s,analyticsMetadata:e,position:i,visibleFollowups:l})},i))})}var w6;const lV=ct.div(w6||(w6=rt(["\n  h-[1px] opacity-45\n  ","\n"])),({$isSelected:t})=>t?"mx-2 bg-token-main-surface-secondary":"bg-token-border-default");function qFe({followUp:t,onSelectingSuggestedReply:e,analyticsMetadata:n,position:s,visibleFollowups:o}){const a=l=>{e(l,t,o,s),U.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",B(w({},An(n)),{action:"click",position:(s+1).toString(),followup_text:yo(t)}))},i=()=>{U.logEventWithStatsig("chatgpt_message_followup_action","chatgpt_message_followup_action",B(w({},An(n)),{action:"hover",position:(s+1).toString(),followup_text:yo(t)}))};return r.jsxs(Xe.button,{whileHover:"hover",className:W("bg-token-main-surface-primary hover:bg-token-main-surface-secondary flex w-full cursor-pointer items-start justify-start gap-2 rounded-lg px-0 py-3 text-start"),onClick:a,onMouseEnter:i,children:[r.jsx(Xe.div,{className:"flex items-center justify-center pt-0.25 opacity-70",variants:{hover:{x:4}},initial:{x:0},transition:{duration:.1},children:r.jsx(WFe,{className:"text-token-text-secondary icon"})}),r.jsx("div",{className:"text-token-text-secondary pe-2 text-start text-sm",children:yo(t)})]})}const YFe=()=>r.jsx(Q9,{size:"lg",lines:3,width:35,widthVariance:10,className:"w-full"}),ZFe=19,KFe=4,QFe=8,JFe=2,XFe=m=>{var f=m,{as:t="div",logo:e,size:n="default",label:s,isBadge:o,isNew:a,isLauncher:i,isSelected:l=!1,tooltip:c,className:d}=f,u=Me(f,["as","logo","size","label","isBadge","isNew","isLauncher","isSelected","tooltip","className"]);const p=J(),g=n==="large"?ZFe:QFe,h=n==="large"?KFe:JFe,x=r.jsx("div",{className:W("w-".concat(g," h-").concat(g," flex aspect-square items-center justify-center rounded-full border p-").concat(h),"border-transparent bg-white","dark:bg-token-main-surface-secondary"),children:r.jsx("div",{className:W("transition-[transform_--shadow-color] duration-[0.24s]",i&&!l&&"drop-shadow-[0_6px_4px_var(--shadow-color)] [--shadow-color:transparent] group-hover/app-icon:motion-safe:scale-[1.025] group-hover/app-icon:motion-safe:[--shadow-color:rgba(0,0,0,0.1)]"),children:e})}),y=t;return r.jsxs(y,B(w(w({className:W("group/app-icon can-hover:active:scale-[0.98] flex flex-col items-center gap-3 transition-transform duration-100 w-".concat(g),o?"scale-[0.9]":"",i?"cursor-pointer":"cursor-default","opacity-80 group-hover:opacity-100",d),onClick:async b=>{var v;b.persist(),await Promise.race([new Promise(S=>{b.target.addEventListener("transitionend",()=>{S()},{once:!0})}),new Promise(S=>{setTimeout(()=>S(),200)})]),(v=u.onClick)==null||v.call(u,b)}},t==="button"?{type:"button"}:{}),u),{children:[r.jsxs("div",{className:W("relative rounded-full transition-[transform_--shadow-color] duration-[0.24s]",o&&"border-token-border-default border",i&&"dark:border-token-border-default scale-[0.9] border border-black/[0.12] shadow-none group-hover/app-icon:motion-safe:shadow-[0px_4px_12px_rgba(0,0,0,0.08)]",i&&"group-hover/app-icon:motion-safe:scale-[0.91]"),children:[!i&&x,i&&r.jsx(kt,{label:c,side:"top",children:x}),a&&r.jsx("div",{className:"text-token-text-primary absolute -start-1 -top-1 z-10 rounded-full bg-blue-500 px-1.5 py-1 text-[10px] font-bold uppercase",children:p.formatMessage({id:"kEZrwC",defaultMessage:"New"})})]}),s&&r.jsx("div",{className:W("text-token-text-secondary text-center text-[12px] leading-[17px]",l&&"text-blue-400",!i&&"w-20"),children:s})]}))},eBe=j(()=>I(()=>import("./eu4d2sy2duibeikv.js").then(t=>t._),__vite__mapDeps([218,1])),{loading:t=>L(t)}),tBe=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),nBe=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),sBe=t=>{var n;return(n={[Ie.Search]:"Web Search",[Ie.Research]:"Research",[Ie.PictureV2]:"Draw Image",[Ie.Think]:"Think Harder"}[t])!=null?n:"Title"},qv=(t,e,n,s,o)=>{U.logEventWithStatsig("Capabilities Suggestion Action","chatgpt_capabilities_suggestion_action",B(w({},An(n)),{categoryId:e.categoryId,suggestionId:e.id,position:s,action:t,numSuggestions:String(o)}))},oBe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{qv("show",s,e,o+1,t.length)}))},[t,e])},cV=({suggestions:t,analyticsMetadata:e,style:n="default"})=>{const s=Gl();return oBe(t,e),r.jsx(r.Fragment,{children:t.map((o,a)=>r.jsxs(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:a*.03},className:W("w-full flex-1",n==="compact"&&"flex-col"),children:[n==="compact"&&a>0&&r.jsx(lV,{$isSelected:!1}),r.jsx(aBe,{suggestion:o,onSelectingSuggestedReply:s,position:a+1,numSuggestions:t.length,analyticsMetadata:e,style:n})]},o.prompt))})},aBe=({suggestion:t,onSelectingSuggestedReply:e,analyticsMetadata:n,position:s,numSuggestions:o,style:a="default"})=>{const{setThreadSystemHintMode:i}=na(),l=G(),c=ut(l),d=at();return r.jsx(Xe.button,{onClick:u=>{if(qv("click",t,n,s,o),t.categoryId===Ie.Research)if(c!=null&&c.isFree()){gn(d,"Suggested Capabilities Upsell");return}else i(t.categoryId,!0,n);e(u,t,[],0)},onMouseEnter:()=>{qv("hover",t,n,s,o)},className:W("hover:bg-token-main-surface-secondary flex w-full flex-1 items-start rounded-xl text-start transition-colors duration-300 ease-in-out",a==="default"&&"gap-4 p-2"),children:a==="compact"?r.jsx(rBe,{suggestion:t}):r.jsx(iBe,{suggestion:t})})},rBe=({suggestion:t})=>{var s;const{systemHints:e}=Ko(),n=_.useMemo(()=>t.categoryId==="ask"||e==null?void 0:e.find(o=>o.systemHint===t.categoryId),[e,t.categoryId]);return r.jsxs("div",{className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-5deg] group-hover:opacity-100",children:t.categoryId==="ask"?r.jsx(nBe,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"}):r.jsx(Yu,{svgString:(s=n==null?void 0:n.logo)!=null?s:"",className:"text-token-text-secondary icon group-hover:text-token-interactive-label-accent-default"})}),r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:yo(t)})]})},iBe=({suggestion:{categoryId:t,imageUrl:e,description:n,title:s,ctaLabel:o,prompt:a}})=>{var c;const{systemHints:i}=Ko(),l=_.useMemo(()=>t==="ask"||i==null?void 0:i.find(d=>d.systemHint===t),[i,t]);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"border-token-border-default bg-primary relative h-16 w-14 flex-shrink-0 rounded-lg border drop-shadow-xs transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:rotate-[-2deg]",children:[t===Ie.PictureV2?r.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-lg bg-cover",style:{backgroundImage:"url(".concat(e,")")},children:r.jsx(eBe,{className:"icon-xl mb-2 text-white"})}):r.jsxs("div",{className:"flex flex-col gap-1.5 p-2",children:[r.jsx("div",{className:"text-token-text-primary text-[5px] leading-tight font-semibold tracking-tighter",children:s!=null?s:sBe(t)}),r.jsx("div",{className:"flex flex-col gap-0.5",children:Array.from({length:10}).map((d,u)=>r.jsx("div",{className:"bg-token-border-heavy h-[1px] w-full rounded-full"},u))})]}),r.jsx("div",{className:"absolute -end-2 -bottom-2",children:r.jsx(XFe,{isBadge:!0,className:"opacity-100",logo:r.jsx(Yu,{svgString:(c=l==null?void 0:l.logo)!=null?c:"",className:"icon"})})})]}),r.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[r.jsx("div",{className:"text-token-text-primary flex-grow",children:n!=null?n:a}),o&&r.jsxs("div",{className:"text-token-text-secondary flex items-center font-medium",children:[o,r.jsx(Xe.div,{variants:{hover:{x:2}},initial:{x:0},transition:{duration:.1},children:r.jsx(tBe,{className:"icon-sm"})})]})]})]})},gC=t=>{var e,n,s,o,a,i;return{id:t.id,prompt:t.prompt,title:(e=t.title)!=null?e:void 0,description:(n=t.description)!=null?n:void 0,categoryId:(s=t.system_hint)!=null?s:t.category_id,type:ke.Capabilities,imageUrl:(o=t.image_url)!=null?o:void 0,ctaLabel:(a=t.cta_label)!=null?a:void 0,modelOverride:(i=t.model_override)!=null?i:void 0}},lBe=({categoryId:t,shouldFetch:e,serverThreadId:n,lastMessageId:s})=>{var c;const{data:o,isLoading:a,error:i}=lt({queryKey:["capability_suggestions",t,s],queryFn:()=>{if(!n||!s)throw new Error("Server thread ID and last user message ID are required");return pe.safePost("/conversation/experimental/suggest_capabilities",{requestBody:{conversation_id:n,message_id:s,system_hint:t,category_id:t}})},enabled:e&&!!n&&!!s});return{suggestions:(c=o==null?void 0:o.suggestions.map(gC))!=null?c:[],isLoading:a,error:i}},Yv=(t,e,n,s)=>{U.logEventWithStatsig("Capabilities Tab Action","chatgpt_capabilities_tab_action",B(w({},An(n)),{tabId:e,position:s,action:t}))},cBe=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{Yv("show",s.value,e,o+1)}))},[t,e])},dBe=({clientThreadId:t,categorySuggestions:e,lastMessageId:n,analyticsMetadata:s,style:o="default"})=>{const a=e.map(({category_id:c,title:d,suggestions:u})=>{var m;return{value:c,message:d,suggestions:(m=u==null?void 0:u.map(gC))!=null?m:[]}}),[i,l]=_.useState(a[0].value);return cBe(a,s),r.jsxs(xq,{value:i,onValueChange:l,orientation:"horizontal",className:"flex w-full flex-col",children:[r.jsx(yq,{className:"border-token-border-default relative flex w-full flex-row gap-6 border-b",children:a.map((c,d)=>r.jsx(mBe,{value:c.value,message:c.message,isActive:i===c.value,analyticsMetadata:s,position:d+1},c.value))}),a.map(c=>r.jsx(vq,{value:c.value,children:r.jsx(uBe,{initialSuggestions:c.suggestions,clientThreadId:t,categoryId:c.value,isActive:i===c.value,lastMessageId:n,analyticsMetadata:s,style:o})},c.value))]})},uBe=({initialSuggestions:t,clientThreadId:e,categoryId:n,isActive:s,lastMessageId:o,analyticsMetadata:a,style:i="default"})=>{const l=jt(e),c=s&&t.length===0,{suggestions:d,isLoading:u}=lBe({categoryId:n,shouldFetch:c,serverThreadId:l,lastMessageId:o}),m=c?d:t;return n==="ask"?u?r.jsx(YFe,{}):r.jsx(iV,{followups:m.map(f=>({type:ke.Reply,text:f.prompt})),analyticsMetadata:a}):r.jsx("div",{className:"flex w-full flex-col gap-y-4 py-3 md:flex-row md:gap-x-4",children:u?r.jsxs(r.Fragment,{children:[r.jsx(WT,{}),r.jsx(WT,{})]}):r.jsx(cV,{suggestions:m,analyticsMetadata:a,style:i})})},mBe=({value:t,message:e,isActive:n,analyticsMetadata:s,position:o})=>r.jsxs(bq,{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-active:text-token-text-primary relative flex min-w-10 justify-center py-4 text-sm font-medium",value:t,onClick:()=>{Yv("click",t,s,o)},onMouseEnter:()=>{Yv("hover",t,s,o)},children:[r.jsx("div",{className:"truncate",children:e}),r.jsx(dn,{children:n&&r.jsx(Xe.div,{layoutId:"tab-underline",className:"bg-token-text-primary absolute start-0 end-0 bottom-0 h-0.5",transition:{type:"spring",stiffness:500,damping:30}})})]}),WT=()=>r.jsxs("div",{className:"flex flex-1 items-center gap-4 rounded-xl p-2",children:[r.jsx("div",{className:"bg-token-sidebar-surface-secondary dark:bg-token-border-default h-16 w-14 flex-shrink-0 rounded-lg"}),r.jsx("div",{className:"w-full flex-grow",children:r.jsx(Q9,{lines:3,size:"sm"})})]}),fBe=({clientThreadId:t,categorySuggestions:e,lastMessageId:n,analyticsMetadata:s})=>{if(!e||e.length===0)return null;const o=e.length===1,a=e[0],i=a.suggestions.length>0?a.suggestions:void 0;return o&&i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-1 text-sm font-semibold",children:r.jsx(P,{id:"3UFIQc",defaultMessage:"Follow up"})}),r.jsx(cV,{suggestions:i.map(gC),analyticsMetadata:s,style:a.style})]}):r.jsx(dBe,{clientThreadId:t,categorySuggestions:e!=null?e:[],lastMessageId:n,analyticsMetadata:s})};function pBe(t=!1){const e=G(),n=Ve(e,"3692302894"),s={getCapabilitySuggestionsEnabled:Ec({layer:n,paramName:"capability_suggestions",defaultValue:!1}),getPrefetchCapabilitySuggestions:Ec({layer:n,paramName:"prefetch_capability_suggestions",defaultValue:!1})};return{capabilitySuggestionsEnabled:!t&&s.getCapabilitySuggestionsEnabled(),prefetchCapabilitySuggestions:!t&&s.getPrefetchCapabilitySuggestions()}}j(()=>I(()=>import("./mo3vn6pamotgno2w.js"),__vite__mapDeps([299,1])),{loading:t=>L(t)});j(()=>I(()=>import("./ggcep01jaih29s37.js"),__vite__mapDeps([496,1])),{loading:t=>L(t)});j(()=>I(()=>import("./laww2sl42347dzof.js"),__vite__mapDeps([497,1])),{loading:t=>L(t)});const gBe=j(()=>I(()=>import("./fsmgof058qqyu9y1.js").then(t=>t._),__vite__mapDeps([338,1])),{loading:t=>L(t)}),mp=j(()=>I(()=>import("./otyqbgm5k20lfbwp.js").then(t=>t._),__vite__mapDeps([295,1])),{loading:t=>L(t)}),hBe=(t,e,n,s,o)=>{U.logEventWithStatsig("Agent Suggestion Action","chatgpt_agent_suggestion_action",B(w({},An(n)),{capability:e.capability,position:s,action:t,numSuggestions:o}))},_Be=(t,e)=>{const n=_.useRef(!1);_.useEffect(()=>{n.current||(n.current=!0,t.forEach((s,o)=>{hBe("show",s,e,o+1,t.length)}))},[t,e])},xBe=({agentSuggestions:t,analyticsMetadata:e})=>(_Be(t,e),r.jsx(r.Fragment,{children:t.map((n,s)=>r.jsxs(Xe.div,{initial:{opacity:0,translateY:4},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:4},transition:{delay:s*.03},className:W("w-full flex-1","flex-col"),children:[s>0&&r.jsx(lV,{$isSelected:!1}),r.jsx(yBe,{agentSuggestion:n,analyticsMetadata:e})]},n.prompt))})),yBe=t=>{"use forget";const e=H.c(14),{agentSuggestion:n}=t,s=wr();let o;e[0]!==n.capability?(o=vBe(n.capability),e[0]=n.capability,e[1]=o):o=e[1];const a=o,i=qs();let l;e[2]!==n.prompt||e[3]!==s||e[4]!==i?(l=()=>{const f=Et(s);f.focus(),bo(f,n.prompt),i(Ie.Agent)},e[2]=n.prompt,e[3]=s,e[4]=i,e[5]=l):l=e[5];const c=l;let d;e[6]!==a?(d=r.jsx("div",{className:"flex items-center justify-center opacity-70 transition-all duration-100 ease-in-out group-hover:scale-[1.02] group-hover:opacity-100",children:r.jsx(a,{className:"text-token-text-secondary group-hover:text-token-text-primary icon"})}),e[6]=a,e[7]=d):d=e[7];let u;e[8]!==n.title?(u=r.jsx("div",{className:"text-token-text-secondary group-hover:text-token-text-primary flex items-center pe-2 text-start text-sm",children:n.title}),e[8]=n.title,e[9]=u):u=e[9];let m;return e[10]!==c||e[11]!==d||e[12]!==u?(m=r.jsxs("div",{onClick:c,className:"bg-primary hover:bg-tertiary group flex w-full cursor-pointer items-center justify-start gap-2 rounded-lg px-2 py-3 text-start transition-colors duration-300 ease-in-out",children:[d,u]}),e[10]=c,e[11]=d,e[12]=u,e[13]=m):m=e[13],m},zT={action:gBe,research:mp,spreadsheet:mp,presentation:mp,default:mp},vBe=t=>{var e;return(e=zT[t])!=null?e:zT.default};function vst({clientThreadId:t,followups:e,categorySuggestions:n,actionSuggestions:s,lastMessageId:o,analyticsMetadata:a,isTatertotFollowupsEnabled:i}){const l=G(),c=cs(l),d=nf.useIsEnabled(t)&&!c,{capabilitySuggestionsEnabled:u}=pBe(i),m=n&&n.length>0;return s&&s.length>0?r.jsx(xBe,{agentSuggestions:s,analyticsMetadata:a}):r.jsx(r.Fragment,{children:d&&(u?m&&r.jsx(fBe,{clientThreadId:t,lastMessageId:o,categorySuggestions:n,analyticsMetadata:a}):e.length>0&&r.jsx(bBe,{followups:e,analyticsMetadata:a}))})}function bBe({followups:t,analyticsMetadata:e}){return r.jsxs("div",{className:"group",children:[r.jsx("hr",{className:"bg-token-bg-tertiary mt-5 mb-5 opacity-70"}),r.jsx(iV,{followups:t,analyticsMetadata:e})]})}class dV extends El()(()=>({selectedIndex:0})){setSelectedIndex(e){this.setState({selectedIndex:e})}static useSelectedIndex(){return this.useState(e=>e.selectedIndex)}}function bst(t){"use forget";const e=H.c(2),{children:n}=t;let s;return e[0]!==n?(s=r.jsx(dV.Provider,{store:SBe,children:n}),e[0]=n,e[1]=s):s=e[1],s}function SBe(){return new dV}const Sst=t=>jD(t).some(e=>{var n;return!!((n=e.metadata)!=null&&n.chatgpt_sdk)});function CBe({thread:t,leafId:e}){return t?me.findNode(t,n=>{var s,o;return((s=n.message.author.name)==null?void 0:s.startsWith("".concat(di,".")))===!0||((o=n.message.recipient)==null?void 0:o.startsWith("".concat(di,".")))===!0},e!=null?e:me.getCurrentLeafId(t))!=null:!1}function uV(t,e){return CBe({thread:t,leafId:e})}const id=({icon:t,label:e,iconClassName:n,className:s,size:o="med",onClick:a,onSelect:i,onBeforeClick:l,selected:c=!1,disabled:d=!1,asMenuItem:u=!1,style:m,testId:f,trailing:p})=>{const g=u?K.Item:"button";return r.jsx(kt,{label:e,disabled:!e||u,triggerAs:null,children:r.jsx(g,{className:W(!u&&"text-token-text-secondary hover:bg-token-bg-secondary rounded-lg",!u&&c&&"bg-token-bg-tertiary",s),"aria-label":e,"aria-pressed":c,onClick:a,onSelect:i,onPointerEnter:l,onTouchStart:l,onFocus:l,disabled:d,style:m,"data-testid":f,label:u?e:void 0,icon:u?t:void 0,trailing:u?p:void 0,children:typeof t=="function"&&!u&&r.jsx("span",{className:W("flex items-center justify-center","touch:w-10 h-8 w-8"),children:r.jsx(t,{className:n!=null?n:o==="small"?"icon-sm":"icon"})})})})};async function wBe(t,e,n,{unprocessed:s=!1}={}){var c;const o=[],a=[],i={},l=new Map;for(const d of t.messages){if(fV(d)){const u=(c=d.metadata)==null?void 0:c.content_references,m=ko(d,{shouldGetTextFromContentReferences:!1,shouldGetVisibleText:!0});if(s)o.push(m);else{const{messageTextToClipboardContent:f}=await I(async()=>{const{messageTextToClipboardContent:g}=await import("./gvo1fqf7h2313x3d.js").then(h=>h.j);return{messageTextToClipboardContent:g}},__vite__mapDeps([48,29,1,30,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63])),p=f(m,u);p["text/plain"]&&o.push(p["text/plain"]),p["text/html"]&&a.push(p["text/html"])}if(!s&&u)for(const f of u)f.type==="file"&&kBe(f)&&!l.has(f.id)&&l.set(f.id,f)}if(Sq(d)){const u=pr.getImageAssetPointers(d);if(u.length>0){const m=u[0];try{const f=jt(n),{url:p}=await Wd.fetch(e,{asset:m,conversationId:f!=null?f:void 0}),h=await(await fetch(p)).blob();["image/png","image/jpeg","image/webp"].includes(h.type)&&(i[h.type]=h)}catch(f){return Promise.reject()}}}}if(!s&&l.size>0){const d=Array.from(l.values()),u=d.map(MBe).filter(f=>!!f);if(u.length>0){const f=u.map((p,g)=>"".concat(g+1,". ").concat(p));o.push(["Medical References:",...f].join("\n"))}const m=d.map(TBe).filter(f=>!!f);m.length>0&&a.push("<section><p><strong>Medical References</strong></p><ol>".concat(m.join(""),"</ol></section>"))}return o.length>0&&(i["text/plain"]=o.join("\n\n")),a.length>0&&(i["text/html"]=a.join("\n\n")),i}function kBe(t){const e=t.medical_file_reference;return e!=null&&["journal_name","authors_display","publication_year","doi","journal_homepage_url"].some(n=>{const s=e==null?void 0:e[n];return s!=null&&String(s).trim()!==""&&String(s).toLowerCase()!=="none"})}function MBe(t){const e=mV(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:a,url:i}=e,l=[];n&&l.push(n);const c=[];return s&&c.push(s),o&&c.push(o),c.length>0&&l.push(c.join(", ")),a&&l.push("DOI: ".concat(a)),i&&l.push("URL: ".concat(i)),l.join("  ")}function TBe(t){const e=mV(t);if(!e)return null;const{journalName:n,authorsDisplay:s,publicationYear:o,doi:a,url:i}=e,l=[];if(n&&l.push("<span>".concat(fu(n),"</span>")),s||o){const c=[];s&&c.push("<em>".concat(fu(s),"</em>")),o&&c.push("<span>".concat(fu(o),"</span>")),l.push(c.join(" "))}return a&&l.push("<span>DOI: ".concat(fu(a),"</span>")),i&&l.push("<span>URL: ".concat(fu(i),"</span>")),l.length===0?null:"<li>".concat(l.join("<br/>"),"</li>")}function mV(t){var n,s,o,a,i,l,c;const e=t.medical_file_reference;return!e||!e.journal_name&&!e.authors_display&&!e.publication_year&&!((n=e.doi)!=null?n:t.id)?null:{journalName:(s=e.journal_name)!=null?s:void 0,authorsDisplay:(o=e.authors_display)!=null?o:void 0,publicationYear:(a=e.publication_year)!=null?a:void 0,doi:(l=(i=e.doi)!=null?i:t.id)!=null?l:void 0,url:(c=t.cloud_doc_url)!=null?c:void 0}}function fu(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function fV(t){var e,n;return!((e=t.clientMetadata)!=null&&e.err)&&(t.author.role===Ze.Assistant||t.author.role===Ze.User)&&(t.author.role===Ze.User||t.recipient==="all")&&!((n=t.metadata)!=null&&n.reasoning_status)}const EBe=j(()=>I(()=>import("./pdp94tw1ktf1pj0a.js").then(t=>t._),__vite__mapDeps([40,1])),{loading:t=>L(t)}),ABe=({turn:t,clientThreadId:e})=>{const n=hO(e),s=J();function o(){Ll.logButtonClick(h1.EDIT_IN_CANVAS_MESSAGE);const a=IBe(t);n({textdocType:lr.DOCUMENT,content:a,createSource:mm.MESSAGE})}return r.jsx(id,{icon:EBe,onClick:o,label:s.formatMessage({id:"EditInCanvas.tooltip",defaultMessage:"Edit in canvas"}),asMenuItem:!0})};function IBe(t){return t.messages.filter(e=>fV(e)&&e.author.role===Ze.Assistant).map(e=>ko(e,{shouldGetTextFromContentReferences:!0,shouldGetVisibleText:!1})).filter(Boolean).join("\n\n")}const jBe=j(()=>I(()=>import("./bd0h74jwf5k75ln3.js").then(t=>t._),__vite__mapDeps([498,1])),{loading:t=>L(t)});function PBe({clientThreadId:t,lastMessage:e,asMenuItem:n}){const[s,o]=_.useState(!1),a=J(),i=_.useCallback(()=>{const c=jt(t);if(!c)return;o(!0);const d="/branch/".concat(c,"/").concat(e.id);window.open(d,"_blank","noreferrer")},[t,e.id]),l=s?qT.loading:qT.branch;return r.jsx(id,{icon:s?Ws:jBe,label:a.formatMessage(l),onClick:i,disabled:s,asMenuItem:n,onSelect:c=>{c.preventDefault()}})}const qT=be({branch:{id:"BranchTurnActionButton.branch",defaultMessage:"Branch in new chat"},loading:{id:"BranchTurnActionButton.loading",defaultMessage:"Loading"}}),NBe=j(()=>I(()=>import("./cr5h05bhk5js9k9c.js").then(t=>t._),__vite__mapDeps([190,1])),{loading:t=>L(t)}),RBe=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)}),LBe=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)}),pV=j(()=>I(()=>import("./clxmfjmtyojr2by1.js"),__vite__mapDeps([499,1,29,30])).then(t=>t.VoicePlayButton));function Cst(t){"use forget";const e=H.c(25),{showPlayButton:n,showCanvasButton:s,showJujutsuButton:o,showBranchButton:a,canShowScheduleButton:i,clientThreadId:l,messages:c,lastMessage:d,imageGenMessageId:u,turn:m,turnIndex:f,requestId:p,parentPromptId:g,showReportMessageButton:h,onReportMessage:x}=t,y=G(),b=J();let v;e[0]!==b?(v=b.formatMessage({id:"e/27r7",defaultMessage:"More actions"}),e[0]=b,e[1]=v):v=e[1];const S=v;if(!pt(y)||!(a&&!!d||n&&!!d||s||i||h||!1))return null;let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k=r.jsx(RBe,{className:"icon"}),e[2]=k):k=e[2];let M;e[3]!==S?(M=r.jsx("button",{className:"text-token-text-secondary hover:bg-token-bg-secondary touch:w-10 flex h-8 w-8 items-center justify-center rounded-lg",onMouseOver:OBe,"aria-label":S,children:k}),e[3]=S,e[4]=M):M=e[4];let T;e[5]!==i||e[6]!==l||e[7]!==u||e[8]!==d||e[9]!==c||e[10]!==x||e[11]!==g||e[12]!==p||e[13]!==a||e[14]!==s||e[15]!==o||e[16]!==n||e[17]!==h||e[18]!==m||e[19]!==f?(T=r.jsx(DBe,{showPlayButton:n,showCanvasButton:s,showJujutsuButton:o,showBranchButton:a,canShowScheduleButton:i,clientThreadId:l,messages:c,lastMessage:d,imageGenMessageId:u,turn:m,turnIndex:f,requestId:p,parentPromptId:g,showReportMessageButton:h,onReportMessage:x}),e[5]=i,e[6]=l,e[7]=u,e[8]=d,e[9]=c,e[10]=x,e[11]=g,e[12]=p,e[13]=a,e[14]=s,e[15]=o,e[16]=n,e[17]=h,e[18]=m,e[19]=f,e[20]=T):T=e[20];let E;return e[21]!==S||e[22]!==M||e[23]!==T?(E=r.jsx(Si,{triggerButton:M,size:"auto",contentAlign:"start",alignOffset:-7,side:"top",sideOffset:4,tooltip:S,children:T}),e[21]=S,e[22]=M,e[23]=T,e[24]=E):E=e[24],E}function OBe(){pV.prefetch()}function DBe(t){"use forget";const e=H.c(29),{showPlayButton:n,showCanvasButton:s,showBranchButton:o,canShowScheduleButton:a,clientThreadId:i,lastMessage:l,turn:c,requestId:d,showReportMessageButton:u,onReportMessage:m}=t,f=J();let p;e[0]!==i||e[1]!==l||e[2]!==o?(p=o&&l&&r.jsx(PBe,{clientThreadId:i,lastMessage:l,asMenuItem:!0}),e[0]=i,e[1]=l,e[2]=o,e[3]=p):p=e[3];let g;e[4]!==i||e[5]!==l||e[6]!==n?(g=n&&l&&r.jsx(pV,{conversationId:i,message:l,asMenuItem:!0}),e[4]=i,e[5]=l,e[6]=n,e[7]=g):g=e[7];let h;e[8]!==i||e[9]!==s||e[10]!==c?(h=s&&r.jsx(ABe,{clientThreadId:i,turn:c}),e[8]=i,e[9]=s,e[10]=c,e[11]=h):h=e[11];let x;e[12]!==a||e[13]!==f?(x=a&&r.jsx(fS,{children:S=>{const{openScheduleModal:C,isScheduled:k,isSchedulable:M}=S;return!k&&M?r.jsx(id,{icon:LBe,label:f.formatMessage({id:"l12ujd",defaultMessage:"Schedule"}),onClick:C,asMenuItem:!0}):null}}),e[12]=a,e[13]=f,e[14]=x):x=e[14];let y;e[15]!==f||e[16]!==m||e[17]!==u?(y=u&&m&&r.jsx(id,{icon:NBe,label:f.formatMessage({id:"ConversationTurn.reportMessageMenuItem",defaultMessage:"Report message"}),asMenuItem:!0,onSelect:()=>m()}),e[15]=f,e[16]=m,e[17]=u,e[18]=y):y=e[18];let b;e[19]!==l||e[20]!==d?(b=!1,e[19]=l,e[20]=d,e[21]=b):b=e[21];let v;return e[22]!==p||e[23]!==g||e[24]!==h||e[25]!==x||e[26]!==y||e[27]!==b?(v=r.jsxs(r.Fragment,{children:[p,g,h,x,y,b]}),e[22]=p,e[23]=g,e[24]=h,e[25]=x,e[26]=y,e[27]=b,e[28]=v):v=e[28],v}const FBe=j(()=>I(()=>import("./jyroje0qaxw6h3z1.js").then(t=>t._),__vite__mapDeps([309,1])),{loading:t=>L(t)}),BBe=j(()=>I(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([134,1])),{loading:t=>L(t)}),UBe=j(()=>I(()=>import("./frf0wu8ouyfyu06j.js").then(t=>t._),__vite__mapDeps([500,1])),{loading:t=>L(t)}),VBe=j(()=>I(()=>import("./f87olchknhsp1yyk.js").then(t=>t._),__vite__mapDeps([135,1])),{loading:t=>L(t)});function wst({currentPage:t,length:e,onChangeIndex:n}){const s=a=>{n(ES(t+a,0,e-1))},o=J();return r.jsxs("div",{className:W("text-token-text-secondary flex items-center justify-center"),children:[r.jsx("button",{onClick:()=>s(-1),disabled:t===0,className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent","aria-label":o.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:r.jsx(UBe,{className:"icon"})}),r.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:"".concat(t+1,"/").concat(e)}),r.jsx("button",{onClick:()=>s(1),disabled:t===e-1,"aria-label":o.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"hover:bg-token-main-surface-secondary touch:w-[32px] flex h-[30px] w-[24px] items-center justify-center rounded-md disabled:opacity-50 disabled:hover:bg-transparent",children:r.jsx(FBe,{className:"icon"})})]})}function kst({currentPage:t,onChangeIndex:e,length:n}){const s=o=>{e(ES(t+o,0,n-1))};return n===0?null:r.jsxs(GBe,{children:[r.jsx(YT,{onClick:()=>s(-1),disabled:t===0,children:r.jsx(VBe,{className:"icon-sm"})}),r.jsx($Be,{children:"".concat(t+1,"/").concat(n)}),r.jsx(YT,{onClick:()=>s(1),disabled:t===n-1,children:r.jsx(BBe,{className:"icon-sm"})})]})}var k6;const GBe=ct.div(k6||(k6=rt(["text-sm inline-flex border rounded-full border-token-border-medium overflow-hidden"])));var M6;const YT=ct.button(M6||(M6=rt(["text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary"])));var T6;const $Be=ct.span(T6||(T6=rt(["text-token-text-tertiary px-2 flex items-center font-mono tracking-widest py-1.5"])));function gV(t=!1){const e=iS(Rs.WorkspaceShareLinks),n=G(),s=Ve(n,"2382399797",{disableExposureLog:t}),o=Cq();return _.useCallback(()=>e&&!o&&s.get("is_enabled",!1),[o,s,e])}function HBe(t){return Ve(t,"3243846918").get("enable_message_slice",!1)}function Mst(t){const e=Es(),n=gV(),s=G(),{imageGenMessages:o,canvasMessage:a,gizmoMessage:i,hasErrorInTurn:l,isIncomplete:c}=_.useMemo(()=>{const m=[];let f,p,g=!1,h=!1;return t.forEach(x=>{var b,v;o1(x)&&m.push(x),dR(x)&&(f=x),(b=x.metadata)!=null&&b.gizmo_id&&(p=x);const y=(v=x.clientMetadata)==null?void 0:v.errType;y!=null&&y!=="info"&&(g=!0),wq(x)&&(h=!0)}),{imageGenMessages:m,canvasMessage:f,gizmoMessage:p,hasErrorInTurn:g,isIncomplete:h}},[t]),d=!e&&!i&&o.length>0&&o.every(m=>m.status==="finished_successfully")&&n(),u=!e&&o.length===0&&!a&&!i&&HBe(s);return{enableImageGenPostSharing:d,enableMessageSliceSharing:u,imageGenMessages:o,canvasMessage:a,hasErrorInTurn:l,isIncomplete:c}}function hV(t=!1){const e=Es(),n=gV(t);return _.useMemo(()=>!e&&n(),[e,n])}const WBe=j(()=>I(()=>import("./jgvrewhnjcf398o6.js").then(t=>t._),__vite__mapDeps([378,1])),{loading:t=>L(t)}),zBe=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),qBe=j(()=>I(()=>import("./l907avfvlrp6ls67.js").then(t=>t._),__vite__mapDeps([142,1])),{loading:t=>L(t)}),hC=({modelSwitcherDeny:t,value:e,label:n,subtitle:s,icon:o,onMouseEnter:a,onMouseLeave:i,onSelect:l,messageModelSlug:c,shouldShowUpsell:d=!1,className:u,includeRegenerate:m=!1,clientThreadId:f,isContextualRetryMenu:p})=>{const g=G(),h=ut(g),x=vS({clientThreadId:f}),y=U8({modelSlug:e,modelSwitcherDenialsBySlug:x}),b=!y&&!d,v=at(),S=C=>{var k;if(!d){l==null||l(C);return}U.logEvent("Account Pay: Open Payment from Message Model Picker"),U.logRateLimitGetPlusButtonClicked({type:Im.RATE_LIMIT,location:"message_model_switcher_dropdown",plan_type:(k=h==null?void 0:h.planType)!=null?k:"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:!1}),gn(v,"Message model switcher dropdown")};return r.jsx(kt,{label:t&&r.jsx(B8,{modelSwitcherDeny:t}),children:r.jsx(K.Item,{onSelect:S,onMouseEnter:()=>y&&(a==null?void 0:a()),onMouseLeave:()=>y&&(i==null?void 0:i()),disabled:b,className:u!=null?u:p?void 0:"radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed radix-disabled:hover:bg-transparent",icon:p?o:void 0,trailing:p&&d?r.jsx(ZT,{}):void 0,label:p?n:void 0,secondary:p?s:void 0,children:!p&&r.jsxs("span",{className:"flex w-full items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex w-full items-center gap-3",children:[o||null,r.jsxs("div",{children:[r.jsx("div",{children:n}),r.jsx("div",{className:W({"text-token-text-secondary text-sm":!b},{"text-token-text-quaternary text-sm":b}),children:s})]})]}),d?r.jsx(ZT,{}):r.jsx(YBe,{messageModelSlug:c,modelSwitcherDeny:t,optionModelSlug:e,includeRegenerate:m})]})})})},YBe=({modelSwitcherDeny:t,includeRegenerate:e=!0})=>{let n=null;if(t)switch(t.reason){case Im.RATE_LIMIT:n=qBe;break;default:n=zBe;break}return t?r.jsx(n,{className:"icon"}):!!e&&r.jsx(WBe,{className:"icon text-token-text-tertiary hidden"})};function ZT(){const t=G();return r.jsx(he,{color:"secondary",size:"small",children:r.jsx(P,w({},Dm(t)))})}const Tst=3600*24*30;function ZBe(t){var e;return((e=t.author.metadata)==null?void 0:e.real_author)===Sb.ToolWeb}function Est(t,e){returnwindow.location.origin+"/search/evals/permalink/".concat(t,"/").concat(e)}function Ast(t){return Th(t.flatMap(e=>e.type==="image_v2"?e.images:[]))}function Ist(t){const e={};return t.forEach(n=>{var s,o,a,i,l,c,d;if(n.type==="grouped_webpages")n.items.forEach(u=>{var f,p;if(!u.url)return;const m=e[u.url];m?"attribution_segments"in u&&"attribution_segments"in m&&(e[u.url]=B(w({},m),{attribution_segments:[...(f=m.attribution_segments)!=null?f:[],...(p=u.attribution_segments)!=null?p:[]]})):e[u.url]=w({},u)});else if(n.type==="webpage"||n.type==="webpage_extended")n.url&&(e[n.url]||(e[n.url]=n));else if(n.type==="image_inline"){const u=(o=n.clicked_from_url)!=null?o:(s=n.asset_pointer_links)==null?void 0:s[0];if(u){const m={type:"image_inline",url:u,title:(a=n.clicked_from_title)!=null?a:"Screenshot",snippet:"",attribution:"screenshot",asset_pointer_links:n.asset_pointer_links,clicked_from_url:n.clicked_from_url,clicked_from_title:n.clicked_from_title};e[u]=m}}else if(n.type==="file"){const u="file://".concat(n.source,"/").concat(n.id),m=(i=n.name)!=null?i:n.id,f=(c=(l=n.snippet)!=null?l:n.text)!=null?c:"",p=(d=n.source)!=null?d:"file";e[u]||(e[u]=B(w({},n),{title:m,url:u,snippet:f,attribution:p}))}else"cite_map"in n&&Object.values(n.cite_map).forEach(u=>{u&&u.url&&(e[u.url]||(e[u.url]=u))})}),Object.values(e)}const KBe=j(()=>I(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([41,1])),{loading:t=>L(t)}),QBe=j(()=>I(()=>Promise.resolve().then(()=>Pr),void 0),{loading:t=>L(t)}),JBe=j(()=>I(()=>import("./nr1vc1815n1t71bd.js").then(t=>t._),__vite__mapDeps([501,1])),{loading:t=>L(t)}),_C="rounded-lg radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed",xC=W("icon-sm","order-10 ms-auto text-token-text-tertiary icon");function _V(t,e){const{modelSwitcherDeny:n,subscriptionLevel:s}=t;return!!n&&n.reason===Im.RATE_LIMIT&&s===gy.PLUS&&!e}function XBe({messageModelEnabledTools:t,message:e,intl:n}){const s=t.includes(Ie.Search),o=ZBe(e);return[{key:"use-search",extraStreamParams:{forceUseSearch:!0},label:n.formatMessage({id:"eTV6j1",defaultMessage:"Search the web"}),icon:QBe,condition:s&&!o,eventName:"chatgpt_regenerate_with_search_button_clicked"},{key:"use-no-search",extraStreamParams:{forceUseSearch:!1},label:n.formatMessage({id:"k/SdXa",defaultMessage:"Don't search the web"}),icon:JBe,condition:s&&o,eventName:"chatgpt_regenerate_without_search_button_clicked"}]}function eUe({clientThreadId:t,message:e,intl:n}){const s=me.isReasoningResponseMessage(ft(t),e.id);return[{key:"use-reason",extraStreamParams:{forceUseReason:!0},label:n.formatMessage({id:"4VX35n",defaultMessage:"Think longer"}),icon:KBe,condition:!s,eventName:"chatgpt_regenerate_with_reason_button_clicked"}]}const tUe=j(()=>I(()=>import("./jgvrewhnjcf398o6.js").then(t=>t._),__vite__mapDeps([378,1])),{loading:t=>L(t)});function zx(t){"use forget";var y;const e=H.c(24),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,showContextualRetry:i,hasPlusFeatures:l,subcategory:c,messageModelSlug:d}=t;let u,m;e[0]!==a?(y=a,{value:m}=y,u=Me(y,["value"]),e[0]=a,e[1]=u,e[2]=m):(u=e[1],m=e[2]);let f;e[3]!==n||e[4]!==s||e[5]!==o||e[6]!==m?(f=b=>{We.logEvent("chatgpt_regenerate_switch_model_button_clicked",m,w({requestedModelId:m},An({clientThreadId:n,messageId:s}))),o({sourceEvent:b,requestedModelId:m})},e[3]=n,e[4]=s,e[5]=o,e[6]=m,e[7]=f):f=e[7];let p;e[8]!==l||e[9]!==a?(p=_V(a,l),e[8]=l,e[9]=a,e[10]=p):p=e[10];const g=i?void 0:_C;let h;e[11]!==i||e[12]!==c?(h=!i&&!c?r.jsx("span",{className:xC}):void 0,e[11]=i,e[12]=c,e[13]=h):h=e[13];let x;return e[14]!==n||e[15]!==d||e[16]!==u||e[17]!==i||e[18]!==f||e[19]!==p||e[20]!==g||e[21]!==h||e[22]!==m?(x=r.jsx(hC,B(w({value:m,onSelect:f,messageModelSlug:d,shouldShowUpsell:p,className:g},u),{icon:h,clientThreadId:n,isContextualRetryMenu:i})),e[14]=n,e[15]=d,e[16]=u,e[17]=i,e[18]=f,e[19]=p,e[20]=g,e[21]=h,e[22]=m,e[23]=x):x=e[23],x}function xV(t){"use forget";const e=H.c(21),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,showContextualRetry:i,messageModelSlug:l,parentPrompt:c}=t,d=J(),u=G(),m=a.value;let f;e[0]!==n||e[1]!==u||e[2]!==s||e[3]!==a.value||e[4]!==o||e[5]!==(c==null?void 0:c.id)?(f=v=>{var S;U.logEventWithStatsig("chatgpt_regenerate_try_again_button_clicked","chatgpt_regenerate_try_again_button_clicked",w({requestedModelId:a.value},An({clientThreadId:n,messageId:s}))),xe(u,"3247947701")&&iU({retry_option:"try_again",parent_prompt_id:(S=c==null?void 0:c.id)!=null?S:""},jt(n),a.value),o({sourceEvent:v,requestedModelId:a.value})},e[0]=n,e[1]=u,e[2]=s,e[3]=a.value,e[4]=o,e[5]=c==null?void 0:c.id,e[6]=f):f=e[6];const p=i?void 0:_C;let g;e[7]!==d?(g=d.formatMessage({id:"VbsBGW",defaultMessage:"Try again"}),e[7]=d,e[8]=g):g=e[8];const h=!i&&a.label,x=i?"icon":xC;let y;e[9]!==x?(y=r.jsx(tUe,{className:x}),e[9]=x,e[10]=y):y=e[10];let b;return e[11]!==n||e[12]!==l||e[13]!==a||e[14]!==i||e[15]!==f||e[16]!==p||e[17]!==g||e[18]!==h||e[19]!==y?(b=r.jsx(hC,B(w({onSelect:f,messageModelSlug:l,className:p},a),{label:g,subtitle:h,icon:y,clientThreadId:n,isContextualRetryMenu:i,includeRegenerate:!0}),m),e[11]=n,e[12]=l,e[13]=a,e[14]=i,e[15]=f,e[16]=p,e[17]=g,e[18]=h,e[19]=y,e[20]=b):b=e[20],b}function KT(t){"use forget";const e=H.c(15),{clientThreadId:n,messageId:s,onModelSelect:o,modelRetryOption:a,systemHintRetryOptions:i,showContextualRetry:l,messageModelSlug:c}=t;let d;if(e[0]!==n||e[1]!==s||e[2]!==c||e[3]!==a||e[4]!==o||e[5]!==l||e[6]!==i){let u;e[8]!==n||e[9]!==s||e[10]!==c||e[11]!==a||e[12]!==o||e[13]!==l?(u=m=>{const f=m.icon;return r.jsx(hC,B(w({onSelect:p=>{U.logEventWithStatsig(m.eventName,m.eventName,w({requestedModelId:a.value},An({clientThreadId:n,messageId:s}))),o({sourceEvent:p,requestedModelId:a.value,extraStreamParams:m.extraStreamParams})},messageModelSlug:c,className:l?void 0:_C},a),{label:m.label,subtitle:"",icon:r.jsx(f,{className:l?"icon":xC}),clientThreadId:n,isContextualRetryMenu:l}),m.key)},e[8]=n,e[9]=s,e[10]=c,e[11]=a,e[12]=o,e[13]=l,e[14]=u):u=e[14],d=i.filter(nUe).map(u),e[0]=n,e[1]=s,e[2]=c,e[3]=a,e[4]=o,e[5]=l,e[6]=i,e[7]=d}else d=e[7];return d}function nUe(t){return t.condition}const sUe=j(()=>I(()=>import("./g8rditsarfiblili.js").then(t=>t._),__vite__mapDeps([502,1])),{loading:t=>L(t)}),oUe=j(()=>I(()=>Promise.resolve().then(()=>q6e),void 0),{loading:t=>L(t)}),aUe=j(()=>I(()=>import("./kcu5x5iyzqj0di3k.js").then(t=>t._),__vite__mapDeps([503,1])),{loading:t=>L(t)}),QT="freeform_feedback",JT=be({retryWithFeedback:{id:"HW5O9Q",defaultMessage:"Ask to change response"},makeLonger:{id:"s7cVzc",defaultMessage:"Add details"},makeShorter:{id:"uWyhEy",defaultMessage:"More concise"}}),rUe=()=>[{key:"make_longer",messageKey:"makeLonger",prompt:"Please make this response longer and more detailed.",icon:r.jsx(aUe,{})},{key:"make_shorter",messageKey:"makeShorter",prompt:"Please make this response more concise and brief.",icon:r.jsx(sUe,{})}];function iUe({message:t,canRegenerateResponse:e,onModelSelect:n,clientThreadId:s,retryOption:o,contentRef:a,parentPrompt:i}){var b;const l=J(),c=G(),[d,u]=_.useState(""),m=_.useRef(null),f=ds(c,"3586972587").get("prompt",""),p=rUe(),g=(b=t.metadata)==null?void 0:b.model_slug;_.useEffect(()=>{requestAnimationFrame(()=>{var v;(v=m.current)==null||v.focus()})},[]),_.useEffect(()=>{const v=a==null?void 0:a.current;if(!v)return;function S(C){m.current&&document.activeElement!==m.current&&(A9(C)||C.key==="Enter"||C.ctrlKey||C.metaKey||C.key.length!==1&&!I9(C)||(C.stopPropagation(),m.current.focus()))}return v.addEventListener("keydown",S),()=>{v.removeEventListener("keydown",S)}},[]);const h=_.useCallback((v,S,C,k,M)=>{var E;xe(M,"3247947701")&&iU({retry_option:k,parent_prompt_id:(E=i==null?void 0:i.id)!=null?E:"",freeform_feedback:k===QT?S:void 0},jt(s),g);const T="".concat(v).concat(S);n({sourceEvent:C,requestedModelId:g||"",appendMessages:[us(T,{is_visually_hidden_from_conversation:!0,is_contextual_retry_user_message:!0})]})},[n,g,s,i==null?void 0:i.id]),x=v=>{d.trim()&&(h(f,d.trim(),v,QT,c),u(""))},y=(v,S)=>{const C="".concat(v.prompt);h(f,C,S,v.key,c)};return e?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"relative",children:[r.jsx(K.InputItem,{selectAllOnFocus:!1,ref:m,value:d,onChange:v=>u(v.target.value),placeholder:l.formatMessage(JT.retryWithFeedback),onSubmit:x,border:!1,className:"min-w-[210px] ps-2.5 pe-9",name:"contextual-retry-dropdown-input"}),r.jsx("div",{className:"absolute end-4 top-1/2 flex -translate-y-1/2 items-center justify-center",children:r.jsx("button",{className:"icon composer-submit-btn",disabled:d.trim()==="",onClick:x,"aria-label":l.formatMessage({defaultMessage:"Submit",id:"aria.submit"}),"data-in-menu":a2(!0),children:r.jsx(oUe,{className:"icon-xs"})})})]}),r.jsx(K.Separator,{}),!!o&&r.jsx(xV,{clientThreadId:s,messageId:t.id,onModelSelect:n,modelRetryOption:o,messageModelSlug:g,parentPrompt:i,showContextualRetry:!0}),p.map(v=>r.jsx(K.Item,{onSelect:S=>y(v,S),label:l.formatMessage(JT[v.messageKey]),icon:v.icon},v.key))]}):null}const lUe=({clientThreadId:t,message:e})=>{var f,p,g,h,x,y,b,v;const n=G(),s=ht(n,t),o=ue(()=>ea(s)),a=vS({clientThreadId:t}),i=[];for(const S of(f=o.categories)!=null?f:[]){if(vce(S))continue;const{defaultModel:C,label:k,tagline:M,subscriptionLevel:T,subcategory:E}=S,A=(g=(p=a[C])==null?void 0:p.regenerate)==null?void 0:g[0];i.push({label:k,value:C,subtitle:M,modelSwitcherDeny:A,subscriptionLevel:T,subcategory:E})}const l=(h=e.metadata)==null?void 0:h.model_slug,c=JA(o,l),d=(c==null?void 0:c.enabledTools)||[],u=ue(()=>wn(s));let m;return c&&l?m={label:c==null?void 0:c.title,value:l,subtitle:c==null?void 0:c.description,subscriptionLevel:gy.FREE,modelSwitcherDeny:l?(y=(x=a[l])==null?void 0:x.regenerate)==null?void 0:y[0]:void 0}:u&&(m={label:u.title,value:u.id,subtitle:u.description,subscriptionLevel:gy.FREE,modelSwitcherDeny:(v=(b=a[u.id])==null?void 0:b.regenerate)==null?void 0:v[0]}),{modelOptions:i,messageModelConfig:c,messageModelEnabledTools:d,defaultModelSlug:J9(o),modelPickerVersion:o.modelPickerVersion,fallbackModelOption:m}};var qx,XT;function cUe(){if(XT)return qx;XT=1;var t=kq(),e=t(function(n,s,o){n[o?0:1].push(s)},function(){return[[],[]]});return qx=e,qx}var dUe=cUe();const uUe=Wn(dUe),eE=j(()=>I(()=>import("./ddurw41ljhd63sp4.js").then(t=>t._),__vite__mapDeps([504,1])),{loading:t=>L(t)}),mUe=j(()=>I(()=>import("./jgvrewhnjcf398o6.js").then(t=>t._),__vite__mapDeps([378,1])),{loading:t=>L(t)}),fUe=j(()=>I(()=>import("./gsas8pb1acnf7jnd.js").then(t=>t._),__vite__mapDeps([137,1])),{loading:t=>L(t)}),pUe=j(()=>I(()=>import("./frf0wu8ouyfyu06j.js").then(t=>t._),__vite__mapDeps([500,1])),{loading:t=>L(t)}),gUe=j(()=>I(()=>Promise.resolve().then(()=>Rr),void 0),{loading:t=>L(t)});function hUe(t){"use forget";var es,Ot,At,Ls,Da,Fa;const e=H.c(78),{className:n,clientThreadId:s,message:o,onModelSelect:a,canRegenerateResponse:i,parentPrompt:l,size:c}=t,d=c===void 0?"med":c,[u,m]=_.useState(!1),f=G(),p=(es=o.metadata)==null?void 0:es.model_slug,g=o.id,h=J(),x=ut(f),y=x==null?void 0:x.planType,b=_.useRef(null),v=_.useRef(null);ki();const[S,C]=_.useState(!1);let k;e[0]!==f?(k=xe(f,"1327278438"),e[0]=f,e[1]=k):k=e[1];const M=k;xe(f,"880513586");let T;e[2]!==s||e[3]!==o?(T={clientThreadId:s,message:o},e[2]=s,e[3]=o,e[4]=T):T=e[4];const{modelOptions:E,messageModelConfig:A,messageModelEnabledTools:N,defaultModelSlug:R,modelPickerVersion:O,fallbackModelOption:D}=lUe(T);let F;if(e[5]!==p||e[6]!==E){let xn;e[8]!==p?(xn=Dr=>Dr.value===p,e[8]=p,e[9]=xn):xn=e[9],F=E.find(xn),e[5]=p,e[6]=E,e[7]=F}else F=e[7];const V=F;let z;if(e[10]!==(R==null?void 0:R.id)||e[11]!==E){let xn;e[13]!==(R==null?void 0:R.id)?(xn=Dr=>Dr.value===(R==null?void 0:R.id),e[13]=R==null?void 0:R.id,e[14]=xn):xn=e[14],z=E.find(xn),e[10]=R==null?void 0:R.id,e[11]=E,e[12]=z}else z=e[12];const $=z,Y=O===2;let Z;e[15]!==s||e[16]!==g||e[17]!==p||e[18]!==E||e[19]!==a||e[20]!==M||e[21]!==Y?(Z=r.jsx(_Ue,{clientThreadId:s,messageId:g,onModelSelect:a,messageModelSlug:p,modelOptions:E,showContextualRetry:M,isModelPickerV2:Y}),e[15]=s,e[16]=g,e[17]=p,e[18]=E,e[19]=a,e[20]=M,e[21]=Y,e[22]=Z):Z=e[22];const Q=Z,q=V!=null?V:D;let X;e[23]===Symbol.for("react.memo_cache_sentinel")?(X=xn=>{xn||setTimeout(()=>{b.current&&b.current.blur()},10)},e[23]=X):X=e[23];const oe=X;let se,de;e[24]!==u?(de=()=>{oe(u)},se=[u],e[24]=u,e[25]=se,e[26]=de):(se=e[25],de=e[26]),_.useEffect(de,se);let ie,ae;e[27]!==u?(ie=()=>{u||C(!1)},ae=[u],e[27]=u,e[28]=ie,e[29]=ae):(ie=e[28],ae=e[29]),_.useEffect(ie,ae);const ce=Ue(s,uV);let ye;e[30]!==s?(ye={clientThreadId:s},e[30]=s,e[31]=ye):ye=e[31];const fe=cO(ye),Ce=_.useRef(fe);let ee,te;e[32]!==fe?(ee=()=>{Ce.current=fe},te=[fe],e[32]=fe,e[33]=ee,e[34]=te):(ee=e[33],te=e[34]),_.useEffect(ee,te);const le=oR();if(ce)return null;const re=(Ot=o.metadata)==null?void 0:Ot.model_slug,ve=XBe({messageModelEnabledTools:N,message:o,intl:h});let _e;e[35]!==s||e[36]!==h||e[37]!==o?(_e=eUe({clientThreadId:s,message:o,intl:h}),e[35]=s,e[36]=h,e[37]=o,e[38]=_e):_e=e[38];const we=_e;if(!i)return null;const De=(At=o.metadata)==null?void 0:At.show_safety_switch_ui,ge=K;let Ne;e[39]!==M?(Ne=xn=>{m(xn),oe(xn),xn&&M&&U.logEventWithStatsig("Contextual Retry Dropdown Menu Opened","chatgpt_contextual_retry_dropdown_opened")},e[39]=M,e[40]=Ne):Ne=e[40];let je,Te;e[41]!==(A==null?void 0:A.title)||e[42]!==re||e[43]!==De?(je=De?r.jsx(P,B(w({},uc.modelUsedDescription),{values:{modelName:(Ls=A==null?void 0:A.title)!=null?Ls:re}})):r.jsx(P,{id:"gW2N97",defaultMessage:"Try again..."}),Te=De?null:r.jsx(P,{id:"yAiiEg",defaultMessage:"Used {modelName}",values:{modelName:(Da=A==null?void 0:A.title)!=null?Da:re}}),e[41]=A==null?void 0:A.title,e[42]=re,e[43]=De,e[44]=je,e[45]=Te):(je=e[44],Te=e[45]);let Fe;e[46]!==n?(Fe=W("cursor-pointer",n),e[46]=n,e[47]=Fe):Fe=e[47];let Ge;e[48]!==h?(Ge=h.formatMessage({id:"42qUcL",defaultMessage:"Switch model"}),e[48]=h,e[49]=Ge):Ge=e[49];let Se;e[50]!==De||e[51]!==d?(Se=De?r.jsx(fUe,{color:"var(--tag-blue)",className:d==="small"?"icon-sm":"icon"}):r.jsx(mUe,{className:d==="small"?"icon-sm":"icon"}),e[50]=De,e[51]=d,e[52]=Se):Se=e[52];let Re;e[53]!==M?(Re=!M&&r.jsx(gUe,{className:"icon-sm"}),e[53]=M,e[54]=Re):Re=e[54];let tt;e[55]!==Se||e[56]!==Re?(tt=r.jsxs("div",{className:"flex items-center",children:[Se,Re]}),e[55]=Se,e[56]=Re,e[57]=tt):tt=e[57];let Ke;e[58]!==Fe||e[59]!==Ge||e[60]!==tt?(Ke=r.jsx(K.BasicTrigger,{ref:b,className:Fe,"aria-label":Ge,children:tt}),e[58]=Fe,e[59]=Ge,e[60]=tt,e[61]=Ke):Ke=e[61];let nt;e[62]!==je||e[63]!==Te||e[64]!==Ke?(nt=r.jsx(kt,{label:je,secondaryLabel:Te,children:Ke}),e[62]=je,e[63]=Te,e[64]=Ke,e[65]=nt):nt=e[65];const ot=K,Lt=K,vt="top",Ht=4,nn=-10,sn="start",on="auto",kn=S?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(pUe,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:xn=>{xn.preventDefault(),C(!1)},children:r.jsx(P,w({},uc.back))}),r.jsx(K.Separator,{}),Q]}):r.jsxs(r.Fragment,{children:[M&&r.jsx(iUe,{message:o,canRegenerateResponse:i,onModelSelect:a,clientThreadId:s,retryOption:q,contentRef:v,parentPrompt:l}),!M&&r.jsxs(r.Fragment,{children:[r.jsx(K.Label,{children:r.jsx(P,{id:"bFLh5u",defaultMessage:"Switch model"})}),Q]}),q&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),!M&&r.jsx(xV,{clientThreadId:s,messageId:g,messageModelSlug:p,onModelSelect:a,modelRetryOption:q,showContextualRetry:!1,parentPrompt:l}),r.jsx(KT,{clientThreadId:s,messageId:g,onModelSelect:a,modelRetryOption:q,systemHintRetryOptions:[...ve],showContextualRetry:M,messageModelSlug:p})]}),!!$&&M&&(y===Je.FREE||y===Je.GO)&&r.jsx(KT,{clientThreadId:s,messageId:g,onModelSelect:a,modelRetryOption:$,systemHintRetryOptions:we,messageModelSlug:p,showContextualRetry:!0}),M&&y&&Mq(y)&&y!==Je.GO&&!De&&r.jsxs(K.Sub,{children:[!le&&r.jsxs(r.Fragment,{children:[r.jsx(K.SubMenuTrigger,{icon:eE,children:r.jsx(P,w({},uc.switchModel))}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{children:Q})})]}),le&&r.jsx(K.SubMenuTrigger,{icon:eE,onClick:xn=>{xn.preventDefault(),C(!0)},children:r.jsx(P,w({},uc.switchModel))})]}),De&&r.jsxs(r.Fragment,{children:[r.jsx(K.Separator,{}),r.jsxs("div",{className:"px-4 py-2",children:[r.jsx("div",{className:"text-sm",children:r.jsx(P,B(w({},uc.modelUsedDescription),{values:{modelName:(Fa=A==null?void 0:A.title)!=null?Fa:re}}))}),r.jsx("div",{className:"text-token-text-tertiary max-w-64 py-1 text-xs",children:r.jsx(P,B(w({},uc.safetySwitchWarning),{values:{learnMoreLink:r.jsx("a",{href:"https://help.openai.com/en/articles/12454167",target:"_blank",className:"text-token-text-accent hover:text-token-text-accent/80 underline",rel:"noreferrer",children:r.jsx(P,{id:"dyuBaD",defaultMessage:"Learn more"})})}}))})]})]})]});let an;e[66]!==Lt.Content||e[67]!==kn?(an=r.jsx(Lt.Content,{side:vt,sideOffset:Ht,alignOffset:nn,align:sn,size:on,ref:v,children:kn}),e[66]=Lt.Content,e[67]=kn,e[68]=an):an=e[68];let jn;e[69]!==ot.Portal||e[70]!==an?(jn=r.jsx(ot.Portal,{children:an}),e[69]=ot.Portal,e[70]=an,e[71]=jn):jn=e[71];let Pn;return e[72]!==u||e[73]!==ge.Root||e[74]!==Ne||e[75]!==nt||e[76]!==jn?(Pn=r.jsxs(ge.Root,{open:u,onOpenChange:Ne,children:[nt,jn]}),e[72]=u,e[73]=ge.Root,e[74]=Ne,e[75]=nt,e[76]=jn,e[77]=Pn):Pn=e[77],Pn}function _Ue(t){"use forget";const e=H.c(49),{clientThreadId:n,messageId:s,messageModelSlug:o,onModelSelect:a,modelOptions:i,showContextualRetry:l,isModelPickerV2:c}=t,{data:d}=bl(),u=d===void 0?null:d;let m;e[0]!==u?(m=u&&oh(u),e[0]=u,e[1]=m):m=e[1];const f=m;let p;e[2]!==i?(p=uUe(i,xUe),e[2]=i,e[3]=p):p=e[3];const[g,h]=p;let x;e[4]!==f||e[5]!==i?(x=()=>{const A=i.some(N=>_V(N,f));U.logEvent("Conversation Open Message Model Selector",{has_get_plus_button:A,is_new_regen_dropdown:!0})},e[4]=f,e[5]=i,e[6]=x):x=e[6];const y=_.useEffectEvent(x);let b;e[7]!==y?(b=()=>{y()},e[7]=y,e[8]=b):b=e[8];let v;e[9]===Symbol.for("react.memo_cache_sentinel")?(v=[],e[9]=v):v=e[9],_.useEffect(b,v);let S;e[10]!==g?(S=new Map,g.forEach(A=>{var R;const N=A.subcategory;N&&(S.has(N)||S.set(N,[]),(R=S.get(N))==null||R.push(A))}),e[10]=g,e[11]=S):S=e[11];const C=S;let k;if(e[12]!==n||e[13]!==f||e[14]!==s||e[15]!==o||e[16]!==a||e[17]!==l||e[18]!==h){let A;e[20]!==n||e[21]!==f||e[22]!==s||e[23]!==o||e[24]!==a||e[25]!==l?(A=N=>r.jsx(zx,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:N,showContextualRetry:l,hasPlusFeatures:f,messageModelSlug:o},N.value),e[20]=n,e[21]=f,e[22]=s,e[23]=o,e[24]=a,e[25]=l,e[26]=A):A=e[26],k=h.map(A),e[12]=n,e[13]=f,e[14]=s,e[15]=o,e[16]=a,e[17]=l,e[18]=h,e[19]=k}else k=e[19];let M;e[27]!==n||e[28]!==f||e[29]!==c||e[30]!==s||e[31]!==o||e[32]!==a||e[33]!==C||e[34]!==l?(M=c&&[...C.entries()].map(A=>{const[N,R]=A;return R.map(O=>r.jsx(zx,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:O,showContextualRetry:l,hasPlusFeatures:f,messageModelSlug:o,subcategory:N},N+"-"+O.value))}),e[27]=n,e[28]=f,e[29]=c,e[30]=s,e[31]=o,e[32]=a,e[33]=C,e[34]=l,e[35]=M):M=e[35];let T;e[36]!==n||e[37]!==f||e[38]!==c||e[39]!==s||e[40]!==o||e[41]!==a||e[42]!==C||e[43]!==l?(T=!c&&[...C.entries()].map(A=>{const[N,R]=A;return r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{children:r.jsx("div",{className:"flex grow justify-between gap-2 overflow-hidden",children:N})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{className:"min-w-fit",children:R.map(O=>r.jsx(zx,{clientThreadId:n,messageId:s,onModelSelect:a,modelRetryOption:O,showContextualRetry:l,hasPlusFeatures:f,messageModelSlug:o,subcategory:N},N+"-"+O.value))})})]},N)}),e[36]=n,e[37]=f,e[38]=c,e[39]=s,e[40]=o,e[41]=a,e[42]=C,e[43]=l,e[44]=T):T=e[44];let E;return e[45]!==k||e[46]!==M||e[47]!==T?(E=r.jsxs(r.Fragment,{children:[k,M,T]}),e[45]=k,e[46]=M,e[47]=T,e[48]=E):E=e[48],E}function xUe(t){return t.subcategory}const jst=_.memo(hUe),uc=be({switchModel:{id:"RegenerateWithModelDropdown.switchModel",defaultMessage:"Switch model"},back:{id:"RegenerateWithModelDropdown.back",defaultMessage:"Back"},modelUsedDescription:{id:"RegenerateWithModelDropdown.modelUsedDescription",defaultMessage:"Used {modelName}"},safetySwitchWarning:{id:"RegenerateWithModelDropdown.safetySwitchWarning",defaultMessage:"ChatGPT routes some sensitive conversations to models that handle these topics with extra care. {learnMoreLink}"}});function yC(t){returnwindow.location.origin+"/s/".concat(t)}const Hu=be({copyLink:{id:"postSharingModal.copyLink",defaultMessage:"Copy link"},linkCopied:{id:"postSharingModal.linkCopied",defaultMessage:"Link copied!"},failedToGenerateShareLink:{id:"postSharingModal.failedToGenerateShareLink",defaultMessage:"Failed to generate share link"},fromChatGPT:{id:"postSharingModal.fromChatGPT",defaultMessage:"From ChatGPT"},contentUnavailable:{id:"postSharingModal.contentUnavailable",defaultMessage:"Content Unavailable"},unavailableReasonGeneral:{id:"postSharingModal.unavailableReasonGeneral",defaultMessage:"This share link is not available because it doesnt exist or you dont have access to it."},unavailableReasonWorkspace:{id:"postSharingModal.unavailableReasonWorkspace",defaultMessage:"This content was shared from a workspace you dont have access to. Ask the owner to invite you if youd like to view it."},ok:{id:"postSharingModal.ok",defaultMessage:"OK"},shareLinkVisibleToWorkspaceOnly:{id:"postSharingModal.shareLinkVisibleToWorkspaceOnly",defaultMessage:"The share links are visible to workspace members only."},download:{id:"postSharingModal.download",defaultMessage:"Download"},downloadPdfButtonMenu:{id:"postSharingModal.download-pdf-button.menu",defaultMessage:"PDF Document (.pdf)"},downloadDocxButtonMenu:{id:"postSharingModal.download-docx-button.menu",defaultMessage:"Microsoft Word Document (.docx)"},downloadPptxButtonMenu:{id:"postSharingModal.download-pptx-button.menu",defaultMessage:"Microsoft PowerPoint Document (.pptx)"},downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},imageLicenseDisclaimer:{id:"postSharingModal.imageLicenseDisclaimer",defaultMessage:"Only share images you have a license to use. <link>Learn{nbsp}more</link>"},screenshotDisclaimer:{id:"postSharingModal.screenshotDisclaimer",defaultMessage:"Screenshots may contain sensitive information."}}),o_=j(()=>I(()=>import("./ngzddsuq9p60x7qe.js"),__vite__mapDeps([505,1,29,30,249,76,114,115])).then(t=>t.PostSharingModal)),ld=j(()=>I(()=>import("./dyr84rl26v62d8gl.js"),__vite__mapDeps([506,1,29,30])).then(t=>t.MobilePostPreview));function yUe(t){const e=Ml(t,n=>pr.getImageAssetPointers(n).length>0);return e?pr.getImageAssetPointers(e)[0]:null}async function vUe(t,e,n){return To(e.asset_pointer)?(await yTe(t,[e],null,void 0,n))[0]:null}const bUe=async(t,e,n)=>{var i;const s=()=>me.findNode(ft(e),({message:l})=>l.id===n||!!pr.getImageAssetPointers(l).find(c=>c.asset_pointer===t));let o=s();if(!(o!=null&&o.message)&&(await ka(e),o=s(),!(o!=null&&o.message)))return null;const a=jt(e);return{postText:(i=o.message.metadata)==null?void 0:i.image_gen_title,imageAssetPointer:yUe([o.message]),serverThreadId:a}};async function SUe(t,e,n,s){const o=To(e.asset_pointer);if(!o)return null;const a=await pe.safePost("/share/post",{requestBody:{post_text:n,attachments_to_create:[{kind:"image_share",file_id:o,conversation_id:t,width:s==null?void 0:s.width,height:s==null?void 0:s.height}]}});return yC(a.post.id)}async function CUe(t,e,n){const s=await pe.safePost("/share/post",{requestBody:{post_text:n,attachments_to_create:[{kind:"message_slice",conversation_id:t,message_ids:e}]}});return yC(s.post.id)}async function a_({postText:t,postTitle:e,clientThreadId:n,generateShareLinkFn:s,renderPreviewFn:o,usePostText:a,useShareLink:i,useShareTitle:l}){if(!jt(n))return!1;try{const d=await s();return d?(o&&o(),await navigator.share({text:a?t:void 0,url:i?d:void 0,title:l?e:void 0}),!0):!1}catch(d){return!1}}async function wUe(t,e,n,s,o,a,i=!1){const l=await bUe(t,e,n);if(!(l!=null&&l.imageAssetPointer)||!(l!=null&&l.serverThreadId))return;const{postText:c,imageAssetPointer:d,serverThreadId:u}=l,m=await vUe(s,d,u);if(!m)return;const f=()=>SUe(u,d,c,m);if(a&&xe(o,"1138231213")){const p=Ve(o,"2382399797");if(await a_({clientThreadId:e,postText:c,generateShareLinkFn:f,usePostText:p.get("navigator_share_text",!1),useShareLink:p.get("navigator_share_link",!1)}))return}gt(o,o_,{postSharingData:{clientThreadId:e,postText:c,generateShareLinkFn:f,coverImageUrl:m==null?void 0:m.url}})}async function kUe(t,e,n,s,o,a=!1){const i=jt(t);if(!i)return;const l=()=>CUe(i,e,o);if(s&&xe(n,"1138231213")){await a_({clientThreadId:t,generateShareLinkFn:l,renderPreviewFn:()=>{gt(n,ld,{clientThreadId:t,coverImageUrl:void 0,messageSliceIds:e})},useShareLink:!0,useShareTitle:!0,postTitle:o}),Cs(n,ld);return}gt(n,o_,{postSharingData:{clientThreadId:t,generateShareLinkFn:l,postText:o,messageSliceIds:e,messageSliceAttachment:void 0}})}const Yx=async(t,e,n,s)=>{if(!jt(e))return;const a=async()=>{const i=await pe.safePost("/share/post",{requestBody:{attachments_to_create:[{kind:"odyssey_artifact",file_id:t.fileId,message_id:t.messageId,conversation_id:t.serverThreadId}]}});return yC(i.post.id)};if(s&&xe(n,"1138231213")){const i=await a_({clientThreadId:e,generateShareLinkFn:a,renderPreviewFn:()=>{gt(n,ld,{clientThreadId:e,generateShareLinkFn:a,coverImageUrl:void 0,messageSliceIds:void 0,odysseyShareIntent:t})},useShareLink:!0,useShareTitle:!1});if(Cs(n,ld),i)return}gt(n,o_,{postSharingData:{clientThreadId:e,generateShareLinkFn:a,odysseyShareIntent:t,messageSliceIds:void 0}})};async function MUe({ctx:t,serverThreadId:e,existingShareLinkUrl:n}){var d,u,m;if(!t)return!1;const s=Tb(e);let o=ft(s);if(o||(await ka(s),o=ft(s)),!o)return!1;const a=me.getConversationTurns(o).flatMap(f=>f.messages.map(p=>p.id)).filter(f=>!!f);if(a.length===0)return!1;const i=!sb();((d=me.getCurrentNode(o))==null?void 0:d.message.id)||await ka(s);const c=()=>Promise.resolve(n!=null?n:null);return i&&xe(t,"1138231213")?(await a_({clientThreadId:s,postTitle:(u=o.title)!=null?u:void 0,generateShareLinkFn:c,renderPreviewFn:()=>{gt(t,ld,{clientThreadId:s,coverImageUrl:void 0,messageSliceIds:a})},useShareLink:!0,useShareTitle:!0}),Cs(t,ld),!0):(gt(t,o_,{postSharingData:{clientThreadId:s,generateShareLinkFn:c,postText:(m=o.title)!=null?m:void 0,messageSliceIds:a,messageSliceAttachment:void 0}}),!0)}function yV(t){const{assetPointer:e=null,clientThreadId:n,imageGenMessageId:s,messageSliceIds:o,odysseyShareIntent:a,parentPromptId:i}=t,l=!1,c=xt(),d=G(),u=Io(),m=Ue(n,f=>f==null?void 0:f.title);return _.useEffect(()=>{I(()=>Promise.resolve().then(()=>APe),void 0)},[]),_.useCallback(async()=>{if(s)await wUe(e,n,s,c,d,u,l);else if(o){const p=i!=null&&Ve(d,"1547743984").get("is_message_prompt_enabled",!1)&&i?[i,...o.filter(g=>g!==i)]:o;await kUe(n,p,d,u,m!=null?m:void 0,l)}else a&&await(Yx==null?void 0:Yx(a,n,d,u))},[e,n,s,o,m,c,u,l,a,i,d])}function vV(t){const e=J();switch(t){case"general":return e.formatMessage(Hu.unavailableReasonGeneral);case"workspace":return e.formatMessage(Hu.unavailableReasonWorkspace);default:return e.formatMessage(Hu.unavailableReasonGeneral)}}function TUe({onClose:t,reason:e}){const n=J(),s=at(),o=()=>{t(),s("/")},a=vV(e);return r.jsx(Pt,{testId:"modal-post-sharing-error",isOpen:!0,type:"danger",textCenter:!0,title:n.formatMessage(Hu.contentUnavailable),description:a,onClose:o,footerContent:r.jsx(he,{size:"large",color:"primary",className:"w-full",onClick:o,children:n.formatMessage(Hu.ok)})})}const Pst=Object.freeze(Object.defineProperty({__proto__:null,PostSharingErrorModal:TUe,openConversationPostSharingModal:MUe,useOpenPostSharingModal:yV,usePostSharingErrorMessage:vV},Symbol.toStringTag,{value:"Module"}));function Nst(t,e){var f,p,g,h;const[n,s,o]=Ue(t,x=>[me.getIsNewConversation(x),me.getRequestId(x),uV(x)]),a=Jo(s),i=BDe(),{isUnauthenticated:l}=Un(),c=((f=e==null?void 0:e.metadata)==null?void 0:f.b1de6e2_s)||((p=e==null?void 0:e.metadata)==null?void 0:p.b1de6e2_rm),d=!!((g=e==null?void 0:e.metadata)!=null&&g.n7jupd_message),u=!!((h=e==null?void 0:e.metadata)!=null&&h.image_gen_async);return!n&&!a&&!i.displayingSideBySideFeedback&&!l&&!o&&!d&&!u&&!c}function EUe({audioAssetPointer:t,conversationId:e}){const n=xt(),[s,o]=_.useState(!1),a=_.useRef(!0),[i,l]=_.useState(void 0),c=_.useRef(null),d=Gb(),u=$b(g=>g.isPlaying&&g.sourceUrl===i),m=_.useCallback(()=>{const g=my();if(g)c.current?c.current.then(()=>{g.stop(),c.current=null}):g.stop();else return},[]);_.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),_.useEffect(()=>()=>{l9().isPlaying&&m()},[m]);const f=_.useCallback(async()=>{if(!d||!a.current)return;o(!0);const{url:g}=await Wd.fetch(n,{asset:t,conversationId:e});o(!1),l(g),d.changeSource(g),c.current=d.play()},[t,e,d,n]);return{togglePlayback:_.useCallback(()=>{if(d)u?m():($t.messagePlayback.click(),f());else return},[u,f,d,m]),isPlaying:u,isLoading:s}}const bV=_.createContext({isLoading:!1,isPlaying:!1,togglePlayback:()=>{throw new Error("Invalid usage outside of VoicePlaybackContext")},mode:"readAloud"});function AUe({children:t,audioAssetPointer:e,conversationId:n}){const{isLoading:s,isPlaying:o,togglePlayback:a}=EUe({audioAssetPointer:e,conversationId:n});return r.jsx(bV.Provider,{value:_.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:a,mode:"audioAsset"}),[s,o,a]),children:t})}function IUe({children:t,conversationId:e,messageId:n}){const{isLoading:s,isPlaying:o,togglePlayback:a}=R2e({conversationId:e,messageId:n});return r.jsx(bV.Provider,{value:_.useMemo(()=>({isLoading:s,isPlaying:o,togglePlayback:a,mode:"readAloud"}),[s,o,a]),children:t})}function Rst({children:t,enable:e,lastMessage:n,serverThreadId:s}){if(!e||!n||!s)return t;const o=pr.getAudioAssetPointers(n)[0];return o?r.jsx(AUe,{conversationId:s,audioAssetPointer:o,children:t}):r.jsx(IUe,{conversationId:s,messageId:n.id,children:t})}const jUe=j(()=>I(()=>import("./ozne4j3oo0wdlmeq.js").then(t=>t._),__vite__mapDeps([484,1])),{loading:t=>L(t)}),Lst=t=>{"use forget";const e=H.c(10),{onShowHidden:n}=t,s=J();let o;e[0]!==s?(o=s.formatMessage({id:"NaTncQ",defaultMessage:"Library menu"}),e[0]=s,e[1]=o):o=e[1];let a;e[2]!==o?(a=r.jsx(Z8,{"aria-label":o}),e[2]=o,e[3]=a):a=e[3];let i;e[4]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jUe,{className:"h-4 w-4"}),r.jsx(P,{id:"H788Jv",defaultMessage:"Show hidden images"})]}),e[4]=i):i=e[4];let l;e[5]!==n?(l=r.jsx(K.Item,{onClick:n,children:i}),e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==a||e[8]!==l?(c=r.jsx(Si,{triggerButton:a,contentAlign:"end",children:l}),e[7]=a,e[8]=l,e[9]=c):c=e[9],c};function PUe({className:t,children:e,position:n="center",size:s,removePopoverStyling:o=!1,shadow:a="normal"}){const i=Tq(),l=J(),c=Math.random()*40-20;return _.useEffect(()=>{i.start({x:0,y:0,rotate:0,opacity:1,transition:{type:"spring",duration:.6,bounce:.15}})},[i]),r.jsx(Xe.div,{initial:{x:0,y:"100%",rotate:0,opacity:1},animate:i,exit:{x:0,y:"100%",rotate:c,opacity:1},transition:{type:"spring",duration:.6,bounce:.15},className:W("z-50 h-full w-full overflow-y-auto",s!=="fullscreen"&&"grid grid-cols-[10px_1fr_10px]",s!=="fullscreen"&&n==="center"&&"grid-rows-[minmax(10px,1fr)_auto_minmax(10px,1fr)] md:grid-rows-[minmax(20px,1fr)_auto_minmax(20px,1fr)]",s!=="fullscreen"&&n==="bottom"&&"grid-rows-[minmax(10px,1fr)_auto_10px] md:grid-rows-[minmax(20px,1fr)_auto_20px]"),children:r.jsx(dd,{className:W(!o&&"popover","bg-token-sidebar-surface relative start-1/2 col-auto col-start-2 row-auto row-start-2 h-full w-full min-w-0 gap-4 p-4 text-start ltr:-translate-x-1/2 rtl:translate-x-1/2 dark:bg-[#171717]",s!=="fullscreen"&&"rounded-[36px]",a==="normal"&&"shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(0,0,0,0.2)] dark:shadow-[0_32px_48px_rgba(0,0,0,0.175),_0_0_1px_rgba(255,255,255,0.4)]",t),"aria-description":l.formatMessage({id:"slide-up-modal.share-sheet.description",defaultMessage:"Share sheet"}),"aria-describedby":"",children:e})})}function NUe({isOpen:t,onClose:e,children:n,shouldIgnoreClickOutside:s=!1,className:o}){var a;return r.jsx(Sl,{open:t,onOpenChange:i=>{s||i===!1&&e(!1)},children:r.jsx(Cl,{container:(a=F9())==null?void 0:a.document.body,children:r.jsx("div",{className:W("absolute inset-0",o),children:n})})})}function RUe({className:t,children:e,showBackground:n=!0}){const s=Zo(),o=n?s?"rgba(0, 0, 0, 0.8)":"rgba(249,249,249,0.8)":"rgba(0, 0, 0, 0)";return r.jsx(xm,{asChild:!0,children:r.jsx(Xe.div,{initial:{backdropFilter:"blur(0px)",backgroundColor:s?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},animate:{backdropFilter:n?"blur(4px)":"blur(0px)",backgroundColor:o},exit:{backdropFilter:"blur(0px)",backgroundColor:s?"rgba(0, 0, 0, 0)":"rgba(255, 255, 255, 0)"},className:W("fixed inset-0 z-50",t),children:e})})}function LUe({title:t,description:e,icon:n,type:s}){return r.jsxs("div",{className:"flex max-w-full min-w-0 items-center",children:[r.jsx(DUe,{icon:n,type:s}),r.jsxs("div",{className:"flex max-w-full min-w-0 grow flex-col gap-1",children:[t!=null&&r.jsx(eb,{className:"text-token-text-primary text-3xl leading-6 font-semibold tracking-tight max-sm:text-xl",children:t}),e!=null&&r.jsx(tb,{className:"text-token-text-tertiary text-sm",children:e})]})]})}function OUe({title:t,accessory:e,description:n,withSeparator:s=!0,icon:o,type:a,closeButton:i,textCenter:l}){return!t&&!n?null:r.jsxs(FUe,{$hasSeparator:s,children:[r.jsx("div",{className:W("flex max-w-full",l&&"flex-1 justify-center text-center"),children:r.jsx(LUe,{title:t,description:n,icon:o,type:a})}),r.jsxs("div",{className:"flex items-center gap-5",children:[e,i!=null&&r.jsx(ud,{asChild:!0,className:"sm:mt-0",children:i})]})]})}const DUe=({type:t,icon:e})=>e==null?null:r.jsx("div",{className:W("me-4 flex h-12 w-12 shrink-0 items-center justify-center rounded-full sm:h-10 sm:w-10",t==="danger"&&"bg-red-100",t==="warning"&&"bg-yellow-100",t==="success"&&"bg-green-100"),children:r.jsx(e,{className:W("icon-lg",t==="danger"&&"text-red-600",t==="warning"&&"text-yellow-700",t==="success"&&"text-green-700"),"aria-hidden":"true"})});var E6;const FUe=ct.div(E6||(E6=rt(["px-4 pb-2 sm:p-6 flex items-center justify-between ",""])),({$hasSeparator:t})=>t&&"border-b border-black/10 dark:border-white/10"),Zx={Root:NUe,Overlay:RUe,Content:PUe,Header:OUe},BUe=j(()=>I(()=>import("./j4nmkdkymh0gf9lt.js").then(t=>t._),__vite__mapDeps([176,1])),{loading:t=>L(t)});function UUe(t){"use forget";const e=H.c(47),{prompt:n,mode:s,onClose:o,onTryIt:a}=t,i=s===void 0?"sharer":s,l=J(),c=xt(),d=Ut(),[u,m]=_.useState(null),[f,p]=_.useState(!0);let g;e[0]!==l||e[1]!==d?(g=()=>{d.danger(l.formatMessage({id:"O6MPEA",defaultMessage:"Failed to create sharing link"}))},e[0]=l,e[1]=d,e[2]=g):g=e[2];let h;e[3]!==c?(h=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1})},e[3]=c,e[4]=h):h=e[4];let x;e[5]!==g||e[6]!==h?(x={share:!0,onError:g,onSuccess:h},e[5]=g,e[6]=h,e[7]=x):x=e[7];const{mutateAsync:y,isPending:b}=Eq(x);let v;e[8]!==l||e[9]!==u||e[10]!==d?(v=async()=>{if(u)try{await Ta("".concat(window.location.origin,"/?share_prompt=").concat(u)),d.success(l.formatMessage({id:"WpnjbL",defaultMessage:"Link copied to clipboard"}))}catch(V){d.danger(l.formatMessage({id:"gCy731",defaultMessage:"Failed to copy link"}))}},e[8]=l,e[9]=u,e[10]=d,e[11]=v):v=e[11];const S=v;let C;e[12]!==l||e[13]!==d?(C=()=>{d.danger(l.formatMessage({id:"xdHQb2",defaultMessage:"Failed to add to My library"}))},e[12]=l,e[13]=d,e[14]=C):C=e[14];let k;e[15]!==l||e[16]!==c||e[17]!==d?(k=()=>{c.invalidateQueries({queryKey:["prompt-templates"],exact:!1}),d.success(l.formatMessage({id:"b4SFiB",defaultMessage:"Success"}))},e[15]=l,e[16]=c,e[17]=d,e[18]=k):k=e[18];let M;e[19]!==C||e[20]!==k?(M={onError:C,onSuccess:k},e[19]=C,e[20]=k,e[21]=M):M=e[21];const{mutateAsync:T}=Aq(M);let E;e[22]!==n||e[23]!==T?(E=async()=>{n&&await T({promptId:String(n.id),relationship:"subscribed"})},e[22]=n,e[23]=T,e[24]=E):E=e[24];const A=E;let N,R;if(e[25]!==y||e[26]!==i||e[27]!==n||e[28]!==u||e[29]!==f?(N=()=>{f&&!u&&n&&i==="sharer"&&y(n.id).then(V=>{var $,Y,Z,Q,q,X;const{shared_id:z}=V;m(z),U.logEventWithStatsig("chatgpt_web_prompt_shared","chatgpt_web_prompt_shared",{hint:($=n.system_hint)!=null?$:"none",hasSources:((Z=(Y=n.sources)==null?void 0:Y.length)!=null?Z:0)>0,sources:((Q=n.sources)!=null?Q:[]).join(","),sourceCount:(X=(q=n.sources)==null?void 0:q.length)!=null?X:0})})},R=[f,u,n,y,i],e[25]=y,e[26]=i,e[27]=n,e[28]=u,e[29]=f,e[30]=N,e[31]=R):(N=e[30],R=e[31]),_.useEffect(N,R),!n){let V;return e[32]===Symbol.for("react.memo_cache_sentinel")?(V=r.jsx(Ws,{}),e[32]=V):V=e[32],V}let O;e[33]!==o?(O=()=>o(!1),e[33]=o,e[34]=O):O=e[34];let D;e[35]!==b||e[36]!==i||e[37]!==S||e[38]!==A||e[39]!==a||e[40]!==n||e[41]!==u||e[42]!==f?(D=f&&r.jsx(Zx.Root,{isOpen:!0,onClose:()=>{p(!1)},className:"max-w-[640px]",children:r.jsx(Zx.Overlay,{showBackground:!0,children:r.jsx(Zx.Content,{size:"normal",position:"center",className:"flex max-w-[640px] flex-col p-6 focus:outline-hidden",removePopoverStyling:!1,shadow:"normal",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"border-token-border-secondary flex gap-2 border-b-1 pb-4",children:[r.jsxs("div",{className:"flex flex-1 flex-col gap-2",children:[r.jsx("div",{className:"text-token-text-primary text-3xl font-bold max-sm:text-xl",children:n.name}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:n.description})]}),r.jsx(fn,{onClick:()=>p(!1),className:"end-0 top-0 z-10 px-1.5 text-black/70 ring-0! outline-0! hover:bg-black/5! focus:ring-0! focus:ring-offset-0! focus:outline-0! active:bg-black/10!"})]}),r.jsxs("div",{className:"outline-token-border-light relative flex w-full flex-col justify-center gap-2 overflow-hidden rounded-xl shadow-sm outline outline-1",children:[r.jsx("div",{className:"text-token-text-primary p-4 pb-20 text-sm",children:n.prompt}),r.jsx("div",{className:"from-token-bg-primary absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent"}),r.jsx("div",{className:"absolute end-5 bottom-5 z-10 inline-flex flex-shrink-0 items-end justify-end",children:r.jsx(gU,{className:"inline h-4 w-24 text-end"})})]}),r.jsx("div",{className:"flex flex-row justify-center gap-4",children:i==="sharer"?r.jsxs("button",{disabled:b||!u,onClick:()=>{S==null||S()},className:"relative flex flex-col gap-y-4 disabled:opacity-50 max-sm:gap-y-2",children:[r.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full shadow-lg max-sm:h-12 max-sm:w-12 max-sm:shadow-md dark:shadow-md",children:r.jsx("div",{className:"pointer-events-none flex h-8 w-8 items-center justify-center max-sm:h-6 max-sm:w-6",children:b||!u?r.jsx(Ws,{className:"h-4 w-4"}):r.jsx(BUe,{})})}),r.jsx("div",{className:"w-full text-center text-xs",children:r.jsx(P,{id:"DFXg8z",defaultMessage:"Copy link"})})]}):r.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[r.jsx(he,{color:"secondary",disabled:n.relationship!==null,onClick:()=>{A()},children:n.relationship==null?r.jsx(P,{id:"nfx0dD",defaultMessage:"Save to library"}):r.jsx(P,{id:"3Fx9p6",defaultMessage:"Already saved"})}),r.jsx(he,{onClick:()=>{var V,z,$,Y,Z,Q;p(!1),U.logEventWithStatsig("chatgpt_web_prompt_used","chatgpt_web_prompt_used",{referer:"shared",hint:(V=n.system_hint)!=null?V:"none",sources:((z=n.sources)!=null?z:[]).join(","),hasSources:((Y=($=n.sources)==null?void 0:$.length)!=null?Y:0)>0,sourceCount:(Q=(Z=n.sources)==null?void 0:Z.length)!=null?Q:0}),a==null||a(n)},children:r.jsx(P,{id:"D+lWJu",defaultMessage:"Try it out"})})]})}),r.jsx("div",{className:"text-token-text-tertiary text-center text-sm sm:mt-2",children:r.jsx(P,{id:"I8F6LL",defaultMessage:"The share links are visible to workspace members only."})})]})})})}),e[35]=b,e[36]=i,e[37]=S,e[38]=A,e[39]=a,e[40]=n,e[41]=u,e[42]=f,e[43]=D):D=e[43];let F;return e[44]!==O||e[45]!==D?(F=r.jsx(dn,{onExitComplete:O,children:D}),e[44]=O,e[45]=D,e[46]=F):F=e[46],F}const VUe=Object.freeze(Object.defineProperty({__proto__:null,PromptSharingModal:UUe},Symbol.toStringTag,{value:"Module"})),GUe={$type:"protobuf_analytics_events.v1.CopyTurnToClipboard"},Ost={$type:"protobuf_analytics_events.v1.ChatgptVoiceSession"},Dst=async(t,e,n,s,o,a="mouse",i)=>{var v,S;const l=me.getConversationTurns(ft(e)),c=l[n];if(!c)return Promise.reject();const d=c.role===Ze.User?c.userContinuationRootTurnId:void 0,u=d!=null?l.filter(C=>C.role===Ze.User&&C.userContinuationRootTurnId===d):[c],m=(v=u[0])!=null?v:c,f=u.length>1?B(w({},m),{messages:u.flatMap(C=>C.messages)}):c,{messages:p}=f,g=o,h=((S=p[0])==null?void 0:S.author.role)===Ze.User,x=g.metaKey||g.altKey,y=await wBe(f,i,e,{unprocessed:x||h});await Ta(y,s,o);const b=jt(e);b&&(T1(t,{messageId:p[0].id,type:"copy",serverThreadId:b,selectedText:ko(p[0]),source:a,location:"message",contentType:"text"}),U.logStructuredEvent(GUe,{conversationId:b,messageId:p[0].id}))};async function Fst(t,e,n){try{await t()}catch(s){e(s)}finally{n()}}const $Ue=j(()=>I(()=>import("./bgxcag65uz54fc39.js").then(t=>t._),__vite__mapDeps([44,1])),{loading:t=>L(t)});function Bst({onAnticipateEdit:t,onEnterEdit:e}){const n=J();return r.jsx(id,{label:n.formatMessage({id:"gG9rea",defaultMessage:"Edit message"}),icon:$Ue,onClick:e,onBeforeClick:t})}function Ust({message:t,clientThreadId:e,turnIndex:n,referenceMessageId:s,responseComplete:o}){var p,g;const a=G(),i=ht(a,e),l=rf("n7jupdSources"),c=Pm(),d=(p=t==null?void 0:t.metadata)==null?void 0:p.async_task_id,u=t&&((g=t.metadata)==null?void 0:g.open_tabs)&&t.metadata.open_tabs.length>0,m=(()=>{var y,b,v;if(!t)return[];const h=(y=t.metadata)!=null?y:{},x=[...(b=h.content_references)!=null?b:[],...Object.values((v=h.content_references_by_file)!=null?v:{}).flat()];return x.length===0?[]:x.flatMap(S=>{var C,k,M,T;switch(S.type){case"webpage":case"webpage_extended":return S.url?[S.url]:[];case"grouped_webpages":return(k=(C=S.items)==null?void 0:C.map(E=>E.url).filter(Boolean))!=null?k:[];case"file":return S.cloud_doc_url?[S.cloud_doc_url]:[];case"image_inline":{const E=(T=S.clicked_from_url)!=null?T:(M=S.asset_pointer_links)==null?void 0:M[0];return E?[E]:[]}default:return[]}})})();_.useEffect(()=>{if(d)return Zn.retainTaskStream(d),()=>{Zn.releaseTaskStream(d)}},[d]);const f=_.useCallback(()=>{HN(i,{type:"n7jupdSources",turnIndex:n||1,messageId:s},l)},[i,l,n,s]);return!o||m.length===0||u?null:r.jsx(rO,{sourcesUrls:m,onClick:()=>{f()},className:W("mt-0! mb-0!",c&&"cursor-default")})}const Vst=({clientThreadId:t})=>{const e=jt(t),n=Ue(t,s=>me.findNode(s,o=>{var a;return!!((a=o.message.metadata)!=null&&a.visited_risky_domain)}));return _.useEffect(()=>{if(!e||!n)return;const s=setInterval(()=>{document.visibilityState==="visible"&&pe.safePost("/conversation/{conversation_id}/agent/notify_viewing",{parameters:{path:{conversation_id:e}}})},1e3);return()=>clearInterval(s)},[e,n]),null},HUe="Continue",Gst=({clientThreadId:t,messages:e})=>{const n=G(),s=ht(n,t),o=_.useMemo(()=>e.some(d=>{var u;return((u=d.metadata)==null?void 0:u.stop_reason)===Iq.RiskyDomainNotWatching}),[e]),a=gbe(s.id),{selectedSources:i}=Ra(s.id),[l,c]=_.useState(!1);return r.jsx(Pt,{testId:"modal-watch-mode-stopped",isOpen:o&&!l,type:"success",size:"normal",onClose:rs,className:"p-1",title:r.jsx("div",{className:"font-semibold",children:r.jsx(P,{id:"8FmSDC",defaultMessage:"Task paused while you were away"})}),primaryButton:r.jsx(he,{onClick:()=>{Er({conversation:s,eventSource:"mouse",promptMessage:us(HUe,w({system_hints:[is]},i&&{selected_sources:hi(i)})),completionMetadata:{systemHints:[is],conversationMode:{kind:Tt.PrimaryAssistant}}})},children:r.jsx(P,{id:"4rrYz9",defaultMessage:"Resume"})}),secondaryButton:r.jsx(he,{color:"secondary",onClick:()=>c(!0),children:r.jsx(P,{id:"yg+V5e",defaultMessage:"Stay paused"})}),children:r.jsx(P,{id:"Wdb/cy",defaultMessage:"ChatGPT is working with {riskyDomain}, which contains sensitive data. To resume, keep your browser's tab open and monitor actions.",values:{riskyDomain:r.jsx("span",{className:"font-medium",children:a})}})})},WUe=4,$st=t=>{"use forget";const e=H.c(17),{clientThreadId:n,query:s,className:o,state:a}=t,[,i]=t_(),{showNavlinksWidget:l,showLongList:c,navlinksOptimistic:d,navlinksReady:u,imagesOptimistic:m,videosOptimistic:f,newsOptimistic:p,showReason:g,analytics:h}=a;if(!l)return null;let x;e[0]!==o?(x=W("mb-8",o),e[0]=o,e[1]=x):x=e[1];let y;e[2]!==h||e[3]!==n||e[4]!==m||e[5]!==i||e[6]!==d||e[7]!==u||e[8]!==p||e[9]!==s||e[10]!==c||e[11]!==g||e[12]!==f?(y=c?r.jsxs(r.Fragment,{children:[r.jsx(GU,{content:{content_type:dt.SuperWidget,widgets:{navlinks:d.slice(0,WUe),images:m,videos:f,news:p,navlinks_ready:u}},descriptionClassName:"line-clamp-1"}),r.jsxs("div",{className:"thread-sm:-mx-4 -mx-2",children:[r.jsx("div",{className:"mt-3 mb-6 flex w-full items-center justify-between px-4",children:r.jsx("button",{type:"button",onClick:()=>i({tabType:wt.Search}),className:"text-token-text-primary text-sm hover:underline",children:r.jsx(P,{id:"navlinks.showAllSearchResults",defaultMessage:"Show all search results"})})}),r.jsx("hr",{className:"mx-4"})]})]}):r.jsx(ZRe,{content:{content_type:dt.SuperWidget,widgets:{navlinks:d,images:m,videos:f,news:p}},clientThreadId:n,navlinksShowDecisionSource:g,analytics:h,query:s}),e[2]=h,e[3]=n,e[4]=m,e[5]=i,e[6]=d,e[7]=u,e[8]=p,e[9]=s,e[10]=c,e[11]=g,e[12]=f,e[13]=y):y=e[13];let b;return e[14]!==x||e[15]!==y?(b=r.jsx("div",{id:"navlinks-content",className:x,children:y}),e[14]=x,e[15]=y,e[16]=b):b=e[16],b};function zUe(t){return t.split(new RegExp("[^\\p{L}\\p{N}]+","u")).filter(Boolean).length}const qUe=xs(t=>ds(t,"3205212221").get("numWords",3));function YUe(t){return qUe(t)}function Hst({clientThreadId:t,threadContent:e,query:n,triggeredSearch:s,messageGroups:o,allMessages:a}){"use no forget";var Y,Z,Q,q,X,oe,se,de,ie,ae,ce,ye;const i=G(),l=YUe(i),c=zUe(n!=null?n:""),d=noe(n!=null?n:""),u=c>0&&c<=l&&!d.isNoForceSearch&&d.navlinks.length>0,m=d.isNavlinkIntent===!0||!!((Y=e==null?void 0:e.widgets)!=null&&Y.is_navlinks_emphasize),f=_.useMemo(()=>VU(i),[i]),[p,g]=_.useState(Op(Ji([],(Z=e==null?void 0:e.widgets)!=null&&Z.navlinks&&e.widgets.navlinks.length>0?e.widgets.navlinks:d.navlinks,!0),f)),[h,x]=_.useState((Q=e==null?void 0:e.widgets)!=null&&Q.images&&e.widgets.images.length>0?e.widgets.images:d.images),[y,b]=_.useState((q=e==null?void 0:e.widgets)!=null&&q.videos&&e.widgets.videos.length>0?e.widgets.videos:d.videos),[v,S]=_.useState((X=e==null?void 0:e.widgets)!=null&&X.news&&e.widgets.news.length>0?e.widgets.news:d.news),[C,k]=_.useState({show:!d.isForceHide&&(u||d.isSearchLikely===!0||m||s),showReason:u?ua.ShortQuery:d.isSearchLikely===!0?ua.Classifier:s?ua.Conversation:void 0}),M=_.useRef({navlinks:(oe=e==null?void 0:e.widgets)!=null&&oe.navlinks&&e.widgets.navlinks.length>0?"thread":d.navlinks.length>0?"prefetched":null,images:(se=e==null?void 0:e.widgets)!=null&&se.images&&e.widgets.images.length>0?"thread":d.images.length>0?"prefetched":null,videos:(de=e==null?void 0:e.widgets)!=null&&de.videos&&e.widgets.videos.length>0?"thread":d.videos.length>0?"prefetched":null,news:(ie=e==null?void 0:e.widgets)!=null&&ie.news&&e.widgets.news.length>0?"thread":d.news.length>0?"prefetched":null}),T=M.current.navlinks==="prefetched"?((ce=(ae=d.fetchingStatus)==null?void 0:ae.navlinks)==null?void 0:ce.status)===ir.DONE:((ye=e==null?void 0:e.widgets)==null?void 0:ye.navlinks_ready)===!0,E=p.length>0?p:Op(d.navlinks,f),A=h.length>0?h:d.images,N=y.length>0?y:d.videos,R=v.length>0?v:d.news,O=!d.isForceHide&&(C.show||d.isSearchLikely===!0||m||s),D=(fe,Ce)=>{const ee=Op(Ji(p,fe,!0),f,Ce);g(ee)};_.useEffect(()=>{var ee,te,le,re,ve,_e;if(!d)return;function fe({prefetchedData:we,threadData:De,sourceType:ge,setData:Ne,isFinalPrefetched:je,isFinalThread:Te}){const Fe=M.current[ge];function Ge(Se){return Array.isArray(Se)&&Se.length>0}Ge(De)&&(!Fe||Fe==="thread")?(M.current[ge]="thread",Ne(De,Te)):Ge(we)&&(!Fe||Fe==="prefetched")&&(M.current[ge]="prefetched",Ne(we,je))}fe({prefetchedData:d.navlinks,threadData:(ee=e==null?void 0:e.widgets)==null?void 0:ee.navlinks,sourceType:"navlinks",setData:D,isFinalPrefetched:((le=(te=d.fetchingStatus)==null?void 0:te.navlinks)==null?void 0:le.status)===ir.DONE,isFinalThread:((re=e==null?void 0:e.widgets)==null?void 0:re.navlinks_ready)===!0}),fe({prefetchedData:d.images,threadData:(ve=e==null?void 0:e.widgets)==null?void 0:ve.images,sourceType:"images",setData:x}),fe({prefetchedData:d.videos,threadData:(_e=e==null?void 0:e.widgets)==null?void 0:_e.videos,sourceType:"videos",setData:b}),fe({prefetchedData:d.news,threadData:e==null?void 0:e.widgets.news,sourceType:"news",setData:S}),(d.isSearchLikely||s||u)&&!C.show&&!d.isForceHide&&k({show:!0,showReason:u?ua.ShortQuery:d.isSearchLikely?ua.Classifier:ua.Conversation})},[d,e,s,u]);const F=O&&E.length>0,V=RRe(t,void 0),z=V!==PU?V:null,$=_.useMemo(()=>ZUe(s,o,a),[s,o,a]);return{showNavlinksWidget:F,showLongList:m,showReason:C.showReason,navlinksOptimistic:E,navlinksReady:T,imagesOptimistic:A,videosOptimistic:N,newsOptimistic:R,analytics:d.analytics,title:z,header:$}}function ZUe(t,e,n){const s=n.findLast(d=>zC(d).length>0),o=zC(s);let a=!1,i,l=-1;for(let d=0;d<e.length;d++)if(e[d].type===or.SearchGPTQuery){l=d,a=!0;break}if(a)for(let d=e.length-1;d>l;d--){const u=e[d];if(u.type===or.Text||u.type===or.CoTSearchTool){i=u.messages[0];break}}return{showSearchGPTQuery:t&&a&&(!i||!Bb(i)),nextMessage:i,searchResultGroups:o}}const KUe=j(()=>I(()=>import("./mtsfsh7z74bmo6ig.js").then(t=>t._),__vite__mapDeps([507,1])),{loading:t=>L(t)}),QUe=j(()=>I(()=>import("./f2itj05whsmn3kgs.js").then(t=>t._),__vite__mapDeps([508,1])),{loading:t=>L(t)}),JUe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),tE=[1,2,3,4,10,20,30],XUe=1,eVe=["g-67e595af0a408191b84ee532fca12cd1","g-67ec3b78892481918c89067962526695","g-67ec3b4988f8819184c5454e18f5e84b","g-67ec3ad40750819181ccffa6a6f050d5","g-67edaaa3d3a081918205d0c470f00a32","g-67edab030ac881918ce8fa5c75a8e1b3","g-67edab2fc0f48191881a20ac98fedf6f","g-67edab4a24fc8191b975acaa8da2dcef"];function SV({clientThreadId:t,isInline:e=!1}){var Q;const n=G(),s=ht(n,t),o=$o(va.isBusinessWorkspace),a=jq(n),i=_.useRef(!1),l=Xn(t),[c,d,u,m]=Ue(t,q=>[q==null?void 0:q.mode,me.getRequestId(q),me.getConversationLastTurn(q),me.getConversationTurns(q).filter(X=>X.role===Ze.Assistant).length]),f=ue(()=>{var q;return((q=Mi(s))==null?void 0:q.value)===Yt.STREAMING}),{isUnauthenticated:p}=Un(),g=_.useMemo(()=>{if(!l)return-1;const q=Pq(l);return q()>XUe?-1:tE[Math.floor(q()*tE.length)]},[l]),h=Jo(d),x=((Q=Xh(t))==null?void 0:Q.value)===Yt.STREAMING,y=f||h||x,b=function(){return Math.random()<.9?"default":"personality_v1"},[v,S]=_.useState(null),[C,k]=_.useState(!1),[M,T]=_.useState(!1),[E,A]=_.useState(!1),[N,R]=_.useState(b),O=(q,X,oe)=>{var de;const se=(de=u==null?void 0:u.messages[0])==null?void 0:de.id;S(q),R(X),F(se,q,X,oe)},D=(u==null?void 0:u.role)===Ze.Assistant,F=_.useMemo(()=>yr((q,X,oe,se)=>{l&&q&&(o&&a?eIe({rating:sC(X),shown_at_assistant_turn:g,prompt:oe},l,q):o||pe.safePost("/conversation/{conversation_id}/rating",{parameters:{path:{conversation_id:l}},requestBody:{message_id:q,rating:X,shown_at_assistant_turn:g,prompt:oe,popup_ui_message:se},authOption:qt.SendIfAvailable})),U.logEvent("Conversation Rating Submitted",{rating:X,showAtAssistantTurn:g,conversationId:l,prompt:oe,popupUiMessage:se}),k(!0),setTimeout(()=>{T(!0)},1500)},2e3),[o,a,l,g]),V=cs(n),z=J(),$=_.useMemo(()=>N==="personality_v1"?z.formatMessage({id:"rating.instructions.personality_v1",defaultMessage:"Do you like this personality?"}):e?"Is this helpful so far?":"Is this conversation helpful so far?",[z,N,e]),Y=m!==g||y||!D||!!o&&!a||(c==null?void 0:c.kind)!==Tt.PrimaryAssistant&&(c==null?void 0:c.kind)!==Tt.FlyingCircusCustomization&&(c==null?void 0:c.gizmo_id)!==void 0&&!eVe.includes(c==null?void 0:c.gizmo_id)||E||p||V;_.useEffect(()=>{!Y&&!i.current&&(U.logEvent("Conversation Rating Shown",{showAtAssistantTurn:g,conversationId:l}),i.current=!0)},[Y]);const Z=yd();return E||!Z.forceShowConvoRating&&Y?null:r.jsxs(r.Fragment,{children:[r.jsx(dn,{children:C&&!M&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:r.jsx(nE,{$padded:!0,$fullRounded:e,children:r.jsx("span",{className:"text-token-text-tertiary text-sm",children:r.jsx(P,{id:"rating.thanks",defaultMessage:"Thanks for your feedback!"})})})},"submitted")}),!C&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.1},children:r.jsxs(nE,{$padded:!1,$fullRounded:e,children:[r.jsxs("div",{className:"text-token-text-secondary flex items-center justify-center gap-4 px-4 py-2.5 text-sm whitespace-nowrap",children:[r.jsx("span",{children:$}),r.jsxs("div",{className:"flex items-center gap-5",children:[r.jsx(Kx,{$selected:v==="thumbsUp",onClick:()=>O("thumbsUp",N,$),children:r.jsx(KUe,{className:"icon"})}),r.jsx(Kx,{$selected:v==="thumbsDown",onClick:()=>O("thumbsDown",N,$),children:r.jsx(QUe,{className:"icon"})})]})]}),!e&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-token-main-surface-tertiary w-px flex-1 self-stretch"}),r.jsx(Kx,{className:"p-3",$selected:!1,onClick:()=>A(!0),children:r.jsx(JUe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})})]})]})},"rating")]})}var A6;const Kx=ct.button(A6||(A6=rt(["\n  ","\n  hover:text-token-text-primary\n"])),t=>t.$selected?"text-token-text-primary":"text-token-text-secondary");var I6;const nE=ct.div(I6||(I6=rt(["inline-flex border border-gray-100 dark:border-gray-700\n","\n","\n"])),t=>t.$padded&&"py-2.5 px-4",t=>t.$fullRounded?"rounded-full":"rounded-xl"),tVe=j(()=>I(()=>import("./s6zt7e1362fzrink.js"),__vite__mapDeps([509,1,29,30])));function CV({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}){var u,m;const s=G(),o=ut(s),a=(u=o==null?void 0:o.isWorkspacePlan())!=null?u:!1,i=Ue(t,f=>{const p=me.getConversationTurns(f);let g=0;for(let h=p.length-1;h>=0;h--){const x=p[h];if(x.messages.some(y=>{var b;return(b=y.metadata)==null?void 0:b.is_indepth_feedback}))return!0;if(x.messages.some(y=>y.author.role===Ze.Assistant)&&g++,g>=3)break}return!1}),l=Xn(t),c=wa(f=>f.voiceFeedbackThread),d=l===c;return i?"none":d&&l&&!a?"voice":(m=n.clientMetadata)!=null&&m.rating&&e?"inline":"conversation"}function Wst({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n,allGroupedMessages:s,currentModelId:o}){const a=G(),i=Il(),l=xe(a,"294957382"),c=CV({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}),d=Xn(t),{voiceName:u}=O1();if(c==="none")return null;let m=null;if(c==="voice"&&d&&!i)$t.feedbackShown.success({voice:u}),m=r.jsx("div",{className:"text-center",children:r.jsx(s9e,{serverThreadId:d})});else if(c==="inline")m=r.jsx(tVe,{clientThreadId:t,conversationMessage:n,allGroupedMessages:s,currentModelId:o});else if(c==="conversation"){if(l)return null;m=r.jsx("div",{className:"text-center",children:r.jsx(SV,{clientThreadId:t})})}return r.jsx("div",{className:"mt-3 w-full empty:hidden",children:m})}function zst({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n}){const s=G(),o=xe(s,"294957382");return CV({clientThreadId:t,canShowInlineMessageFeedback:e,messageForRating:n})!=="conversation"||!o?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grow"}),r.jsx(SV,{clientThreadId:t,isInline:!0})]})}const nVe=j(()=>I(()=>import("./ftif1cjhtov9wlz9.js"),__vite__mapDeps([510,1,29,30,511,452,74])).then(t=>t.CAFeedbackModal));function qst({clientThreadId:t,currentModelConfig:e}){const n=G(),s=Nq(t),o=NDe(e,s),a=$o(va.isBusinessWorkspace),i=ue(()=>wn(ht(n,t))),l=mh(i,n);return{onChangeRating:_.useCallback(({nodeId:d,messageId:u,rating:m})=>{var h,x;const f=jt(t);m&&U.logEvent("Rated Result",{id:u,threadId:f,rating:m,model:e==null?void 0:e.id});const p=me.getTree(ft(t)),g=p.getNodeByIdOrMessageId(d);if(f!==void 0&&(a&&xe(n,"4147309512")?m&&X7e({rating:sC(m)},f,u):a||(m?pe.safePost("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:f,rating:m},authOption:qt.SendIfAvailable}):pe.safeDelete("/conversation/message_feedback",{requestBody:{message_id:u,conversation_id:f},authOption:qt.SendIfAvailable}))),qe(t,y=>{ln.updateTree(y,b=>{b.updateNodeMetadata(d,{rating:m!=null?m:void 0})})}),m&&(o||l)){gt(n,nVe,{citations:(x=(h=g.message.metadata)==null?void 0:h.citations)!=null?x:[],rating:m,conversationId:f!=null?f:"",messageId:u,conversationTree:p,nodeId:d,isGlaux:l});return}},[n,t,e==null?void 0:e.id,a,o,l])}}function Yst(t){const{isCompletionRequestInProgress:e,isUserTurn:n,message:s}=t,o=J(),a=_.useRef(e);_.useEffect(()=>{if(!e)return;let i;wf.setLiveRegionAssertive(o.formatMessage({id:"0LFLpz",defaultMessage:"ChatGPT is generating a response..."}));const l=o.formatMessage({id:"uqqkLX",defaultMessage:"ChatGPT is still generating a response..."}),c=5e3;function d(){wf.setLiveRegionAssertive(""),i=window.setTimeout(()=>{wf.setLiveRegionAssertive(l),i=window.setTimeout(()=>d(),c)},1e3)}return i=window.setTimeout(d,c),()=>{window.clearTimeout(i)}},[e,o]),_.useEffect(()=>{var d,u,m;if(e||n||!s||!a.current){a.current=e;return}const{content:i}=s,l=(i.content_type===dt.Text,i),c=o.formatMessage({id:"lZ4dVJ",defaultMessage:"ChatGPT says: {message}"},{message:(m=(u=(d=l==null?void 0:l.parts)==null?void 0:d.join)==null?void 0:u.call(d,"\n"))!=null?m:""});wf.setLiveRegionAssertive(c),a.current=!1},[n,e,o,s])}var Qx,sE;function sVe(){if(sE)return Qx;sE=1;function t(e,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(!n(e[s],s,e))return!1;return!0}return Qx=t,Qx}var Jx,oE;function oVe(){if(oE)return Jx;oE=1;var t=eA();function e(n,s){var o=!0;return t(n,function(a,i,l){return o=!!s(a,i,l),o}),o}return Jx=e,Jx}var Xx,aE;function aVe(){if(aE)return Xx;aE=1;var t=sVe(),e=oVe(),n=hb(),s=uh(),o=a1();function a(i,l,c){var d=s(i)?t:e;return c&&o(i,l,c)&&(l=void 0),d(i,n(l,3))}return Xx=a,Xx}var rVe=aVe();const Zst=Wn(rVe);var ey,rE;function iVe(){if(rE)return ey;rE=1;function t(e){return e&&e.length?e[0]:void 0}return ey=t,ey}var ty,iE;function lVe(){return iE||(iE=1,ty=iVe()),ty}var cVe=lVe();const Kst=Wn(cVe);function dVe(t){return t.nodeType===Node.ELEMENT_NODE}function wV(t){var e;if(dVe(t)){if(["THEAD","TR","TD","TH"].includes(t.nodeName.toUpperCase())){let n=t.parentNode;for(;n&&n.nodeName!=="TABLE";)n=n.parentNode;if(!n){Gs.debug("Found table element without a parent <table>");const s=document.createElement("table");(e=t.parentNode)==null||e.insertBefore(s,t),s.appendChild(t)}}t.attributes&&[...t.attributes].forEach(n=>{["style"].includes(n.name)&&t.removeAttribute(n.name)})}t.childNodes.forEach(wV)}function uVe(t){t.childNodes.forEach(wV)}function mVe(t){var o;const e=t.currentTarget.ownerDocument,n=e.defaultView;t.preventDefault();const s=n==null?void 0:n.getSelection();if(s&&s.rangeCount>0){const i=s.getRangeAt(0).cloneContents();uVe(i),i.querySelectorAll("script, [class*='select-none']").forEach(u=>{u.remove()});const l=e.createElement("div");l.appendChild(i),e.body.appendChild(l);const c=l.innerHTML;let d=l.innerText;d!=null&&d.trim()||(d=(o=l.textContent)!=null?o:""),d=d.replace(/\u00a0/g," "),e.body.removeChild(l),t.clipboardData.setData("text/html",c),t.clipboardData.setData("text/plain",d)}}function lE(t){return t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement}function fVe(t){const e=t.nativeEvent;if(typeof e.composedPath=="function"){for(const n of e.composedPath())if(lE(n))return!0}return lE(t.target)}const Qst=t=>{"use forget";const e=H.c(4),n=G(),s=Es();let o;return e[0]!==t||e[1]!==n||e[2]!==s?(o=a=>{var u,m;fVe(a)||mVe(a);const{currentTarget:i}=a,l=(u=i.closest("[data-message-id]"))==null?void 0:u.getAttribute("data-message-id"),c=(m=document.getSelection())==null?void 0:m.toString(),d=jt(t);!l||!c||!d||s||T1(n,{source:"keyboard",type:"copy",messageId:l,serverThreadId:d,selectedText:c,location:"selection",contentType:"text"})},e[0]=t,e[1]=n,e[2]=s,e[3]=o):o=e[3],o},kV=_.createContext(!1);function Jst(){return _.useContext(kV)}function Xst({children:t}){return r.jsx(kV.Provider,{value:!0,children:t})}const pVe=j(()=>I(()=>import("./frf0wu8ouyfyu06j.js").then(t=>t._),__vite__mapDeps([500,1])),{loading:t=>L(t)});function gVe(t){"use forget";var E,A,N,R,O,D;const e=H.c(39),{conversation:n,isRootVisible:s,isPanelVisible:o,onOpenPanel:a,onClosePanel:i,backMessage:l}=t;let c;e[0]!==n?(c=()=>wn(n),e[0]=n,e[1]=c):c=e[1];const d=ue(c);let u;e[2]!==n?(u=()=>ea(n),e[2]=n,e[3]=u):u=e[3];const m=ue(u),f=bS(),p=CS(n,f,!1);let g;e[4]!==n.ctx?(g=xe(n.ctx,"2899079967"),e[4]=n.ctx,e[5]=g):g=e[5];const h=g;let x;e:{if(!h||!d||!m){let oe;e[6]===Symbol.for("react.memo_cache_sentinel")?(oe={primaryModelLabel:null,secondaryModelLabel:null},e[6]=oe):oe=e[6],x=oe;break e}let F;e[7]!==d.id||e[8]!==m?(F=um(d.id,m),e[7]=d.id,e[8]=m,e[9]=F):F=e[9];const{selectedCategory:V,fullModelLabel:z}=F;let $;if(e[10]!==d.id||e[11]!==m.categories||e[12]!==V){let oe;e[14]!==d.id||e[15]!==V?(oe=se=>{const{categoryId:de,defaultModel:ie,supportedModels:ae}=se;return de===V||ie===d.id||(ae==null?void 0:ae.includes(d.id))},e[14]=d.id,e[15]=V,e[16]=oe):oe=e[16],$=m.categories.find(oe),e[10]=d.id,e[11]=m.categories,e[12]=V,e[13]=$}else $=e[13];const Y=$,Z=(N=(A=(E=m.title)!=null?E:Y==null?void 0:Y.label)!=null?A:d.title)!=null?N:d.id,Q=(D=(O=(R=Y==null?void 0:Y.label)!=null?R:z)!=null?O:d.title)!=null?D:d.id,q=Q&&Q!==Z?Q:null;let X;e[17]!==Z||e[18]!==q?(X={primaryModelLabel:Z,secondaryModelLabel:q},e[17]=Z,e[18]=q,e[19]=X):X=e[19],x=X}const{primaryModelLabel:y,secondaryModelLabel:b}=x;let v,S;e[20]!==o||e[21]!==h||e[22]!==i?(v=()=>{!h&&o&&i()},S=[h,o,i],e[20]=o,e[21]=h,e[22]=i,e[23]=v,e[24]=S):(v=e[23],S=e[24]),_.useEffect(v,S);const C=s&&h&&y;let k;e[25]!==a||e[26]!==y||e[27]!==b||e[28]!==C?(k=C?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{fillContainer:!0,onSelect:F=>{F.preventDefault(),a()},subMenu:!0,children:r.jsxs("div",{className:"flex w-full items-baseline gap-2 text-sm",children:[r.jsx("span",{className:"text-token-text-primary",children:y}),b?r.jsx("span",{className:"text-token-text-tertiary",children:b}):null]})}),r.jsx(K.Separator,{})]}):null,e[25]=a,e[26]=y,e[27]=b,e[28]=C,e[29]=k):k=e[29];let M;e[30]!==l||e[31]!==p||e[32]!==o||e[33]!==h||e[34]!==i?(M=o&&h?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(pVe,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:F=>{F.preventDefault(),i()},fillContainer:!0,children:r.jsx(P,w({},l))}),r.jsx(K.Separator,{}),r.jsx(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(SS,{sections:p})})]}):null,e[30]=l,e[31]=p,e[32]=o,e[33]=h,e[34]=i,e[35]=M):M=e[35];let T;return e[36]!==k||e[37]!==M?(T=r.jsxs(r.Fragment,{children:[k,M]}),e[36]=k,e[37]=M,e[38]=T):T=e[38],T}function cE(t){"use forget";const e=H.c(31),{activeId:n,hideOverflowMenu:s,onSelect:o}=t,{conversations:a,hasNextPage:i,fetchNextPage:l,isLoading:c,isFetchingNextPage:d,refetch:u}=k2();let m,f;e[0]!==u?(m=()=>{u()},f=[u],e[0]=u,e[1]=m,e[2]=f):(m=e[1],f=e[2]),_.useEffect(m,f);let p;e[3]!==l||e[4]!==i?(p=k=>{if(k==null)return;const M=new IntersectionObserver(T=>{T[0].isIntersecting&&i&&l()});return M.observe(k),()=>{M.disconnect()}},e[3]=l,e[4]=i,e[5]=p):p=e[5];const g=p;let h;if(e[6]!==n||e[7]!==a){let k;e[9]!==n?(k=M=>M.id!==n,e[9]=n,e[10]=k):k=e[10],h=a.filter(k),e[6]=n,e[7]=a,e[8]=h}else h=e[8];const x=h;let y;e[11]!==g||e[12]!==c?(y=c?hVe:g,e[11]=g,e[12]=c,e[13]=y):y=e[13];let b;e[14]!==n||e[15]!==i||e[16]!==s||e[17]!==x||e[18]!==o||e[19]!==y?(b=r.jsx(rU,{activeId:n,hasNextPage:i,items:x,infiniteScrollTriggerElementRef:y,hideOverflowMenu:s,onSelect:o}),e[14]=n,e[15]=i,e[16]=s,e[17]=x,e[18]=o,e[19]=y,e[20]=b):b=e[20];let v;e[21]!==c||e[22]!==x.length?(v=x.length===0&&!c&&r.jsx("div",{className:"px-4 py-2 text-sm text-gray-500",children:r.jsx(P,w({},_Ve.noConversations))}),e[21]=c,e[22]=x.length,e[23]=v):v=e[23];let S;e[24]!==d||e[25]!==c?(S=(c||d)&&r.jsxs("div",{children:[r.jsx(So,{}),r.jsx(So,{}),r.jsx(So,{})]}),e[24]=d,e[25]=c,e[26]=S):S=e[26];let C;return e[27]!==b||e[28]!==v||e[29]!==S?(C=r.jsxs(r.Fragment,{children:[b,v,S]}),e[27]=b,e[28]=v,e[29]=S,e[30]=C):C=e[30],C}function hVe(){}const _Ve=be({noConversations:{id:"SidebarHistory.noConversations",defaultMessage:"No previous chats"}}),xVe=j(()=>I(()=>Promise.resolve().then(()=>pf),void 0),{loading:t=>L(t)}),Gc=be({projects:{id:"SidebarHeader.projects",defaultMessage:"Projects"},noProjects:{id:"SidebarHeader.noProjects",defaultMessage:"No projects yet"},noProjectChats:{id:"SidebarHeader.noProjectChats",defaultMessage:"No chats in this project"},startProjectChat:{id:"SidebarHeader.startProjectChat",defaultMessage:"Start a new chat in this project"}}),yVe=20;function vVe(){"use forget";const t=H.c(9),{snorlaxes:e,isLoading:n,refetch:s}=gS();let o;t[0]!==e?(o=e!=null?e:[],t[0]=e,t[1]=o):o=t[1];let a;t[2]!==o?(a=o.slice(0,om),t[2]=o,t[3]=a):a=t[3];const i=a,l=i.length>0;let c;return t[4]!==n||t[5]!==i||t[6]!==s||t[7]!==l?(c={projects:i,areProjectsLoading:n,hasProjects:l,refetchProjects:s},t[4]=n,t[5]=i,t[6]=s,t[7]=l,t[8]=c):c=t[8],c}function MV(t){"use forget";const e=H.c(3),n=G();let s;return e[0]!==n||e[1]!==t?(s=()=>{var d,u,m,f;if(!t)return"";const o=t.gizmo,a=o.gizmo.id,i=(u=(d=o.gizmo.display.name)==null?void 0:d.trim())!=null?u:a,l=_S(n,a);if(l.isSkeleton$()){const p=(m=A8(n,o))==null?void 0:m.trim();return p&&p.length>0?p:i}const c=(f=l.title$())==null?void 0:f.trim();return c&&c.length>0?c:i},e[0]=n,e[1]=t,e[2]=s):s=e[2],ue(s)}function Zv(t){"use forget";const e=H.c(2),{project:n}=t,s=MV(n);let o;return e[0]!==s?(o=r.jsx("span",{className:"text-token-text-primary truncate text-sm",children:s}),e[0]=s,e[1]=o):o=e[1],o}function bVe(t){"use forget";const e=H.c(19),{projects:n,hasProjects:s,serverThreadId:o,onClose:a,onStartProjectChat:i,startProjectChatLabel:l,onOpenProjects:c}=t;if(!s)return null;let d;e[0]!==c?(d=g=>{g&&(c==null||c())},e[0]=c,e[1]=d):d=e[1];let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=r.jsx(K.SubMenuTrigger,{fillContainer:!0,children:r.jsx(P,w({},Gc.projects))}),e[2]=u):u=e[2];let m;if(e[3]!==a||e[4]!==i||e[5]!==n||e[6]!==o||e[7]!==l){let g;e[9]!==a||e[10]!==i||e[11]!==o||e[12]!==l?(g=h=>{const x=h.gizmo.gizmo.id;return r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{fillContainer:!0,children:r.jsx("span",{className:"flex w-full items-center justify-between gap-2",children:r.jsx(Zv,{project:h})})}),r.jsx(K.Portal,{children:r.jsx(K.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsxs(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[r.jsx(K.Item,{fillContainer:!0,className:"mb-1 ps-1",onSelect:SVe,trailing:r.jsx(Rh,{"aria-label":l,onPointerDown:y=>{i(y,x)},onClick:y=>{i(y,x)},icon:xVe}),children:r.jsx(Zv,{project:h})}),r.jsx(K.Separator,{}),r.jsx(TV,{project:h,serverThreadId:o,onSelectConversation:a})]})})})]},x)},e[9]=a,e[10]=i,e[11]=o,e[12]=l,e[13]=g):g=e[13],m=n.map(g),e[3]=a,e[4]=i,e[5]=n,e[6]=o,e[7]=l,e[8]=m}else m=e[8];let f;e[14]!==m?(f=r.jsx(K.Portal,{children:r.jsx(K.SubContent,{className:"max-h-[50dvh] w-72 overflow-y-auto",children:r.jsx(K.Group,{separator:!1,children:m})})}),e[14]=m,e[15]=f):f=e[15];let p;return e[16]!==d||e[17]!==f?(p=r.jsxs(K.Sub,{onOpenChange:d,children:[u,f]}),e[16]=d,e[17]=f,e[18]=p):p=e[18],p}function SVe(t){t.preventDefault()}function CVe(t){"use forget";const e=H.c(9),{projects:n,areProjectsLoading:s,onSelectProject:o}=t;if(s&&n.length===0){let l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs(r.Fragment,{children:[r.jsx(So,{}),r.jsx(So,{})]}),e[0]=l):l=e[0],l}if(n.length===0){let l;return e[1]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(P,w({},Gc.noProjects))}),e[1]=l):l=e[1],l}let a;if(e[2]!==o||e[3]!==n){let l;e[5]!==o?(l=c=>{const d=c.gizmo.gizmo.id;return r.jsx(K.Item,{fillContainer:!0,onSelect:u=>{u.preventDefault(),o(d)},subMenu:!0,children:r.jsx(Zv,{project:c})},d)},e[5]=o,e[6]=l):l=e[6],a=n.map(l),e[2]=o,e[3]=n,e[4]=a}else a=e[4];let i;return e[7]!==a?(i=r.jsx(r.Fragment,{children:a}),e[7]=a,e[8]=i):i=e[8],i}function wVe(t){"use forget";const e=H.c(4),{project:n,serverThreadId:s,onSelectConversation:o}=t;if(!n)return null;let a;return e[0]!==o||e[1]!==n||e[2]!==s?(a=r.jsx(TV,{project:n,serverThreadId:s,onSelectConversation:o}),e[0]=o,e[1]=n,e[2]=s,e[3]=a):a=e[3],a}function TV(t){"use forget";const e=H.c(18),{project:n,serverThreadId:s,onSelectConversation:o}=t,a=n.gizmo.gizmo.id,{items:i,isLoading:l,refetch:c}=kle(a);let d;e[0]!==c?(d=()=>{c()},e[0]=c,e[1]=d):d=e[1];let u;e[2]!==a||e[3]!==c?(u=[a,c],e[2]=a,e[3]=c,e[4]=u):u=e[4],_.useEffect(d,u);let m,f;if(e[5]!==l||e[6]!==i||e[7]!==o||e[8]!==s){f=Symbol.for("react.early_return_sentinel");e:{const g=i.slice(0,yVe);if(l&&g.length===0){let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsxs(r.Fragment,{children:[r.jsx(So,{}),r.jsx(So,{})]}),e[11]=x):x=e[11],f=x;break e}if(!l&&g.length===0){let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x=r.jsx("div",{className:"text-token-text-secondary px-4 py-2 text-sm",children:r.jsx(P,w({},Gc.noProjectChats))}),e[12]=x):x=e[12],f=x;break e}let h;e[13]!==o||e[14]!==s?(h=x=>r.jsx(G1,{className:"ps-2",conversation:x,hideOverflowMenu:!0,isActive:x.id===s,onSelect:o},x.id),e[13]=o,e[14]=s,e[15]=h):h=e[15],m=g.map(h)}e[5]=l,e[6]=i,e[7]=o,e[8]=s,e[9]=m,e[10]=f}else m=e[9],f=e[10];if(f!==Symbol.for("react.early_return_sentinel"))return f;let p;return e[16]!==m?(p=r.jsx(r.Fragment,{children:m}),e[16]=m,e[17]=p):p=e[17],p}const kVe=j(()=>I(()=>Promise.resolve().then(()=>pf),void 0),{loading:t=>L(t)}),ny=j(()=>I(()=>import("./frf0wu8ouyfyu06j.js").then(t=>t._),__vite__mapDeps([500,1])),{loading:t=>L(t)});function MVe(t){"use forget";var le;const e=H.c(67),{serverThreadId:n,isAuth:s,isNarrowSidebar:o,isRootMenuVisible:a,onActiveStateChange:i,onClose:l,backMessage:c,switchChatMessage:d}=t,u=G(),m=J(),{projects:f,areProjectsLoading:p,hasProjects:g,refetchProjects:h}=vVe(),[x,y]=_.useState("root"),[b,v]=_.useState(null);let S;e[0]!==u?(S=xe(u,"2617254603"),e[0]=u,e[1]=S):S=e[1];const C=S;let k;e:{if(!b){k=null;break e}let re;e[2]!==b||e[3]!==f?(re=(le=f.find(ve=>{const{gizmo:_e}=ve;return _e.gizmo.id===b}))!=null?le:null,e[2]=b,e[3]=f,e[4]=re):re=e[4],k=re}const M=k;let T=x;!o&&T!=="root"&&(T="root"),!C&&(T==="projectsList"||T==="projectChats")&&(T=o?"history":"root"),!g&&(T==="projectsList"||T==="projectChats")&&(T="history"),T==="projectChats"&&!M&&(T="projectsList");const E=T,A=E==="projectChats"?M:null,N=MV(A);let R;e[5]!==m?(R=m.formatMessage(Gc.startProjectChat),e[5]=m,e[6]=R):R=e[6];const O=R;let D;e[7]!==o||e[8]!==l?(D=(re,ve)=>{re.preventDefault(),re.stopPropagation(),it.newConversationGizmoId$.set(ve),it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0),o&&(v(null),y("root")),l()},e[7]=o,e[8]=l,e[9]=D):D=e[9];const F=D;let V,z;e[10]!==a||e[11]!==h?(V=()=>{a&&h()},z=[a,h],e[10]=a,e[11]=h,e[12]=V,e[13]=z):(V=e[12],z=e[13]),_.useEffect(V,z);let $,Y;e[14]!==h||e[15]!==E?($=()=>{E==="projectsList"&&h()},Y=[E,h],e[14]=h,e[15]=E,e[16]=$,e[17]=Y):($=e[16],Y=e[17]),_.useEffect($,Y);let Z,Q;if(e[18]!==i||e[19]!==E?(Q=()=>{i(E!=="root")},Z=[i,E],e[18]=i,e[19]=E,e[20]=Z,e[21]=Q):(Z=e[20],Q=e[21]),_.useEffect(Q,Z),!s)return null;let q;e[22]!==F||e[23]!==g||e[24]!==o||e[25]!==C||e[26]!==a||e[27]!==l||e[28]!==f||e[29]!==h||e[30]!==E||e[31]!==n||e[32]!==O||e[33]!==d?(q=()=>!a||E!=="root"?null:r.jsxs(r.Fragment,{children:[r.jsxs(K.Sub,{children:[r.jsx(K.SubMenuTrigger,{fillContainer:!0,onClick:re=>{o&&(re.preventDefault(),y("history"))},children:r.jsx(P,w({},d))}),o?null:r.jsx(K.Portal,{children:r.jsxs(K.SubContent,{"data-desktop-skip-link-handler":!0,className:"max-h-[50dvh] w-72 overflow-y-auto",children:[C&&g?r.jsx(bVe,{projects:f,hasProjects:g,serverThreadId:n,onClose:l,onStartProjectChat:(re,ve)=>F(re,ve),startProjectChatLabel:O,onOpenProjects:h}):null,r.jsx(cE,{activeId:n,hideOverflowMenu:!0,onSelect:l})]})})]}),r.jsx(K.Separator,{})]}),e[22]=F,e[23]=g,e[24]=o,e[25]=C,e[26]=a,e[27]=l,e[28]=f,e[29]=h,e[30]=E,e[31]=n,e[32]=O,e[33]=d,e[34]=q):q=e[34];const X=q;let oe;e[35]!==c||e[36]!==g||e[37]!==C||e[38]!==l||e[39]!==E||e[40]!==n?(oe=()=>E!=="history"?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(ny,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:re=>{re.preventDefault(),y("root")},fillContainer:!0,children:r.jsx(P,w({},c))}),r.jsx(K.Separator,{}),r.jsxs(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:[C&&g?r.jsx(K.Item,{fillContainer:!0,onSelect:re=>{re.preventDefault(),v(null),y("projectsList")},subMenu:!0,children:r.jsx(P,w({},Gc.projects))}):null,r.jsx(cE,{activeId:n,hideOverflowMenu:!0,onSelect:()=>{y("root"),l()}})]})]}),e[35]=c,e[36]=g,e[37]=C,e[38]=l,e[39]=E,e[40]=n,e[41]=oe):oe=e[41];const se=oe;let de;e[42]!==p||e[43]!==f||e[44]!==E?(de=()=>E!=="projectsList"?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(ny,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:re=>{re.preventDefault(),y("history")},fillContainer:!0,children:r.jsx(P,w({},Gc.projects))}),r.jsx(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(CVe,{projects:f,areProjectsLoading:p,onSelectProject:re=>{v(re),y("projectChats")}})})]}),e[42]=p,e[43]=f,e[44]=E,e[45]=de):de=e[45];const ie=de;let ae;e[46]!==A||e[47]!==N||e[48]!==F||e[49]!==l||e[50]!==E||e[51]!==n||e[52]!==O?(ae=()=>E!=="projectChats"||!A?null:r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:r.jsx(ny,{className:"h-4 w-4"}),color:"default",className:"mb-1 ps-1",onClick:re=>{re.preventDefault(),y("projectsList")},fillContainer:!0,trailing:r.jsx(Rh,{"aria-label":O,onPointerUp:re=>F(re,A.gizmo.gizmo.id),onClick:re=>F(re,A.gizmo.gizmo.id),icon:kVe}),children:N}),r.jsx(K.Separator,{}),r.jsx(K.Group,{"data-desktop-skip-link-handler":!0,className:"-mb-1.5 max-h-[50dvh] w-70 overflow-y-auto pb-1.5",separator:!1,children:r.jsx(wVe,{project:A,serverThreadId:n,onSelectConversation:()=>{y("root"),v(null),l()}})})]}),e[46]=A,e[47]=N,e[48]=F,e[49]=l,e[50]=E,e[51]=n,e[52]=O,e[53]=ae):ae=e[53];const ce=ae;let ye;e[54]!==X?(ye=X(),e[54]=X,e[55]=ye):ye=e[55];let fe;e[56]!==se?(fe=se(),e[56]=se,e[57]=fe):fe=e[57];let Ce;e[58]!==ie?(Ce=ie(),e[58]=ie,e[59]=Ce):Ce=e[59];let ee;e[60]!==ce?(ee=ce(),e[60]=ce,e[61]=ee):ee=e[61];let te;return e[62]!==ye||e[63]!==fe||e[64]!==Ce||e[65]!==ee?(te=r.jsxs(r.Fragment,{children:[ye,fe,Ce,ee]}),e[62]=ye,e[63]=fe,e[64]=Ce,e[65]=ee,e[66]=te):te=e[66],te}const TVe=j(()=>I(()=>import("./ceivmd4pm4umbvdn.js").then(t=>t._),__vite__mapDeps([139,1])),{loading:t=>L(t)}),EVe=j(()=>I(()=>import("./e6eptpe9toj61kmv.js").then(t=>t._),__vite__mapDeps([129,1])),{loading:t=>L(t)}),AVe=j(()=>I(()=>Promise.resolve().then(()=>pf),void 0),{loading:t=>L(t)});j(()=>I(()=>import("./iqoo5whnx14dvo9x.js").then(t=>t._),__vite__mapDeps([512,1])),{loading:t=>L(t)});const IVe=j(()=>I(()=>import("./abwq3htfqpekhs38.js"),__vite__mapDeps([175,1,29,30])).then(t=>t.DeleteConversationConfirmationModalContainer));j(()=>I(()=>import("./d8877bxkmz2am6pw.js"),__vite__mapDeps([239,1,29,30])).then(t=>t.default));function jVe(t){"use forget";const e=H.c(29),{clientThreadId:n,onClose:s}=t,o=G(),a=Xn(n),i=X9();let l;e[0]!==n||e[1]!==o?(l=ht(o,n),e[0]=n,e[1]=o,e[2]=l):l=e[2];const c=l;let d;e[3]!==o?(d=pt(o),e[3]=o,e[4]=d):d=e[4];const u=d;let m;e[5]!==i?(m=()=>{i==null||i.openInNewTab()},e[5]=i,e[6]=m):m=e[6];const f=m,p=oR(),[g,h]=_.useState(!1),[x,y]=_.useState(!1),b=!g&&!x;let v,S;e[7]===Symbol.for("react.memo_cache_sentinel")?(v=()=>h(!0),S=()=>h(!1),e[7]=v,e[8]=S):(v=e[7],S=e[8]);let C;e[9]!==c||e[10]!==g||e[11]!==b?(C=r.jsx(gVe,{conversation:c,isRootVisible:b,isPanelVisible:g,onOpenPanel:v,onClosePanel:S,backMessage:mc.back}),e[9]=c,e[10]=g,e[11]=b,e[12]=C):C=e[12];let k;e[13]!==u||e[14]!==p||e[15]!==b||e[16]!==s||e[17]!==a?(k=r.jsx(MVe,{serverThreadId:a,isAuth:u,isNarrowSidebar:p,isRootMenuVisible:b,onActiveStateChange:y,onClose:s,backMessage:mc.back,switchChatMessage:mc.switchChat}),e[13]=u,e[14]=p,e[15]=b,e[16]=s,e[17]=a,e[18]=k):k=e[18];let M;e[19]!==o||e[20]!==f||e[21]!==b||e[22]!==s||e[23]!==a?(M=b?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:AVe,onClick:()=>{it.newConversationGizmoId$.set(void 0),it.wantsNewConversation$.set(!0),it.selectedConversationId$.set(void 0),s()},fillContainer:!0,children:r.jsx(P,w({},mc.newChat))}),a?r.jsxs(r.Fragment,{children:[r.jsx(K.Item,{icon:EVe,onClick:f,fillContainer:!0,children:r.jsx(P,w({},mc.openChatInTab))}),r.jsx(K.Item,{icon:TVe,color:"danger",onClick:()=>{a&&(gt(o,IVe,{serverThreadId:a,isActiveConversation:!0}),s())},fillContainer:!0,children:r.jsx(P,w({},mc.deleteChat))})]}):null,null]}):null,e[19]=o,e[20]=f,e[21]=b,e[22]=s,e[23]=a,e[24]=M):M=e[24];let T;return e[25]!==C||e[26]!==k||e[27]!==M?(T=r.jsxs(r.Fragment,{children:[C,k,M]}),e[25]=C,e[26]=k,e[27]=M,e[28]=T):T=e[28],T}const mc=be({switchChat:{id:"SidebarHeader.switchChat",defaultMessage:"Switch Chat"},newChat:{id:"SidebarHeader.newChat",defaultMessage:"New Chat"},openChatInTab:{id:"SidebarHeader.openChatInTab",defaultMessage:"Open Chat in Tab"},deleteChat:{id:"SidebarHeader.deleteChat",defaultMessage:"Delete Chat"},openFeedbackModal:{id:"SidebarHeader.openFeedbackModal",defaultMessage:"Share Feedback"},back:{id:"SidebarHeader.back",defaultMessage:"Back"}}),PVe=j(()=>I(()=>import("./khzlteyrl3j9opbq.js").then(t=>t._),__vite__mapDeps([513,1])),{loading:t=>L(t)}),NVe=j(()=>I(()=>import("./eirsr72354ogpfn5.js").then(t=>t._),__vite__mapDeps([514,1])),{loading:t=>L(t)});var j6;const dE=ct.button(j6||(j6=rt(["\n  hover:bg-token-interactive-bg-secondary-hover\n  focus-visible:bg-token-interactive-bg-secondary-hover\n  radix-state-open:bg-token-interactive-bg-secondary-hover\n  flex h-[34px] w-[34px] items-center justify-center rounded-[8px]\n  focus-visible:outline-0\n"])));function eot(t){"use forget";const e=H.c(24),{clientThreadId:n}=t,s=G(),o=J(),[a,i]=_.useState(!1),l=X9();let c;e[0]!==s?(c=z9(s),e[0]=s,e[1]=c):c=e[1];const d=c;let u;e[2]!==l?(u=()=>{l==null||l.becomeMainPage()},e[2]=l,e[3]=u):u=e[3];const m=u;let f;e[4]!==m||e[5]!==o||e[6]!==d?(f=d&&r.jsx(kt,{triggerAs:null,label:r.jsx(P,w({},fp.expandSidebar)),children:r.jsx(dE,{"aria-label":o.formatMessage(fp.expandSidebar),onClick:m,children:r.jsx(NVe,{className:"icon -scale-x-100"})})}),e[4]=m,e[5]=o,e[6]=d,e[7]=f):f=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=r.jsx(P,w({},fp.openChatMenu)),e[8]=p):p=e[8];let g;e[9]!==o?(g=o.formatMessage(fp.openChatMenu),e[9]=o,e[10]=g):g=e[10];let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h=r.jsx(PVe,{className:"icon -scale-x-100"}),e[11]=h):h=e[11];let x;e[12]!==g?(x=r.jsx(kt,{triggerAs:null,label:p,children:r.jsx(K.BasicTrigger,{asChild:!0,children:r.jsx(dE,{"aria-label":g,children:h})})}),e[12]=g,e[13]=x):x=e[13];let y;e[14]===Symbol.for("react.memo_cache_sentinel")?(y=()=>i(!1),e[14]=y):y=e[14];let b;e[15]!==n?(b=r.jsx(K.Portal,{children:r.jsx(K.Content,{children:r.jsx(jVe,{clientThreadId:n,onClose:y})})}),e[15]=n,e[16]=b):b=e[16];let v;e[17]!==a||e[18]!==x||e[19]!==b?(v=r.jsx("div",{className:"ms-auto",children:r.jsxs(K.Root,{open:a,onOpenChange:i,children:[x,b]})}),e[17]=a,e[18]=x,e[19]=b,e[20]=v):v=e[20];let S;return e[21]!==v||e[22]!==f?(S=r.jsxs("div",{className:"flex w-full items-center justify-between",children:[f,v]}),e[21]=v,e[22]=f,e[23]=S):S=e[23],S}const fp=be({expandSidebar:{id:"SidebarHeader.expandSidebar",defaultMessage:"Back to ChatGPT"},openChatMenu:{id:"SidebarHeader.openChatMenu",defaultMessage:"Open chat menu"}});function tot({className:t,threadHeaderDropdown:e,conversationActions:n,superWidgetTabs:s}){const o=G(),i=!(vm()&&!pt(o)),l=s!=null?s:r.jsx(jLe,{textClassName:"text-sm"});return r.jsx(RVe,{className:t,conversationActions:n,threadHeaderDropdown:i&&e,superWidgetTabs:l})}function RVe(t){"use forget";const e=H.c(17),{className:n,conversationActions:s,threadHeaderDropdown:o,superWidgetTabs:a}=t,i=_.useRef(null),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null);let u,m;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{const v=i.current,S=l.current,C=c.current,k=d.current;if(!v||!S||!C||!k)return;const M=()=>{const E=v.getBoundingClientRect().width,A=C.getBoundingClientRect().width,N=S.getBoundingClientRect(),R=.5*(E-A),O=N.right>R;C.style.justifySelf=O?"start":"center"},T=new ResizeObserver(M);return T.observe(v,{box:"border-box"}),T.observe(S,{box:"border-box"}),T.observe(C,{box:"border-box"}),M(),()=>{T.disconnect()}},m=[],e[0]=u,e[1]=m):(u=e[0],m=e[1]),En(u,m);let f;e[2]!==n?(f=W("h-header-height w-full px-2 sm:grid sm:grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] sm:px-0",n),e[2]=n,e[3]=f):f=e[3];let p;e[4]!==o?(p=r.jsx("div",{className:"z-10 col-start-1 row-start-1 hidden self-center justify-self-start pe-2 md:flex",ref:l,children:o}),e[4]=o,e[5]=p):p=e[5];let g,h;e[6]===Symbol.for("react.memo_cache_sentinel")?(g=r.jsx(jr,{className:"col-span-3 col-start-1 row-start-1 w-full",children:r.jsx("div",{className:"w-full",ref:d})}),h=W("no-scrollbar col-start-2 row-start-1 -mb-px h-full w-full min-w-0 overflow-x-auto overflow-y-hidden"),e[6]=g,e[7]=h):(g=e[6],h=e[7]);let x;e[8]!==a?(x=r.jsx("div",{className:h,ref:c,children:a}),e[8]=a,e[9]=x):x=e[9];let y;e[10]!==s?(y=r.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible md:flex",children:s}),e[10]=s,e[11]=y):y=e[11];let b;return e[12]!==f||e[13]!==p||e[14]!==x||e[15]!==y?(b=r.jsxs("div",{className:f,ref:i,children:[p,g,x,y]}),e[12]=f,e[13]=p,e[14]=x,e[15]=y,e[16]=b):b=e[16],b}const uE=j(()=>I(()=>import("./e216z3zqjas1rma2.js").then(t=>t._),__vite__mapDeps([300,1])),{loading:t=>L(t)}),Kv=j(()=>I(()=>Promise.resolve().then(()=>JS),void 0),{loading:t=>L(t)}),mE=j(()=>I(()=>import("./nlf69pu4xn6tl2q3.js").then(t=>t._),__vite__mapDeps([515,1])),{loading:t=>L(t)}),EV=Ye.TemporaryChatOnboarding;function not(){const t=Es(),{eligible:e}=$e(EV);return e&&t}function pu({icon:t,title:e,description:n}){return r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"mt-1 h-5 w-5 shrink-0",children:t}),r.jsxs("div",{className:"ms-4",children:[r.jsx("div",{className:"text-lg font-semibold",children:e}),r.jsx("p",{className:"text-token-text-secondary mt-1 text-sm",children:n})]})]})}function sot({onClose:t}){const[e,n]=_.useState(!0),s=G(),o=ut(s),a=J(),{markAsViewed:i}=$e(EV),l=Bm(),c=_.useCallback(()=>{i(),n(!1),t==null||t()},[i,t]);return o!=null&&o.isWorkspaceAccount()?r.jsx(Pt,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:rs,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(ms.title),primaryButton:r.jsx(so.Button,{onClick:c,title:a.formatMessage(ms.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(pu,{icon:r.jsx(Kv,{className:"h-full w-full"}),title:a.formatMessage(ms.bulletTitle1),description:a.formatMessage({id:"nSGhxr",defaultMessage:"Temporary chats won't appear in your history."})}),r.jsx(pu,{icon:l?r.jsx(uE,{className:"h-full w-full"}):r.jsx(mE,{className:"h-full w-full"}),title:a.formatMessage(l?ms.bulletTitle2MemoryAvailable:ms.bulletTitle2MemoryUnavailable),description:a.formatMessage(l?ms.bulletDescription2MemoryAvailable:ms.bulletDescription2MemoryUnavailable)})]})}):r.jsx(Pt,{testId:"modal-temporary-chat-onboarding",isOpen:e,onClose:rs,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(ms.title),primaryButton:r.jsx(so.Button,{onClick:c,title:a.formatMessage(ms.continue),color:"primary"}),children:r.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[r.jsx(pu,{icon:r.jsx(Kv,{className:"h-full w-full"}),title:a.formatMessage(ms.bulletTitle1),description:a.formatMessage(ms.bulletDescription1)}),r.jsx(pu,{icon:r.jsx(Rq,{className:"h-full w-full"}),title:a.formatMessage(ms.bulletTitle3),description:a.formatMessage(ms.bulletDescription3)}),r.jsx(pu,{icon:l?r.jsx(uE,{className:"h-full w-full"}):r.jsx(mE,{className:"h-full w-full"}),title:a.formatMessage(l?ms.bulletTitle2MemoryAvailable:ms.bulletTitle2MemoryUnavailable),description:a.formatMessage(l?ms.bulletDescription2MemoryAvailable:ms.bulletDescription2MemoryUnavailable)})]})})}const ms=be({title:{id:"TemporaryChatOnboardingModal.title",defaultMessage:"Temporary Chat"},bulletTitle1:{Icon:r.jsx(Kv,{className:"h-full w-full"}),id:"TemporaryChatOnboardingModal.bulletTitle1",defaultMessage:"Not in history"},bulletDescription1:{id:"TemporaryChatOnboardingModal.bulletDescription1.1",defaultMessage:"Temporary chats won't appear in your history. For safety purposes, we may keep a copy of your chat for up to 30 days."},bulletTitle2MemoryAvailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryAvailable",defaultMessage:"Memory off"},bulletDescription2MemoryAvailable:{id:"rmWwWN",defaultMessage:"While in a temporary chat, ChatGPT won't use or update its memory. Custom instructions will still be followed if you have them enabled."},bulletTitle2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletTitle2MemoryUnavailable",defaultMessage:"Follows Custom Instructions"},bulletDescription2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletDescription2MemoryUnavailable",defaultMessage:"Custom Instructions will still be followed if you have them enabled."},bulletTitle3:{id:"TemporaryChatOnboardingModal.bulletTitle3",defaultMessage:"No model training"},bulletDescription3:{id:"TemporaryChatOnboardingModal.bulletDescription3",defaultMessage:"Temporary chats won't be used to improve our models."},continue:{id:"TemporaryChatOnboardingModal.continue",defaultMessage:"Continue"}}),AV=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M8.11523 3.19409C9.15589 2.15344 10.844 2.15363 11.8848 3.19409L16.8057 8.11499C17.8462 9.15575 17.8463 10.8438 16.8057 11.8845L11.8848 16.8054C10.8441 17.8461 9.156 17.846 8.11523 16.8054L3.19434 11.8845C2.15387 10.8438 2.15369 9.15564 3.19434 8.11499L8.11523 3.19409ZM7.96582 7.49976C7.78889 7.49965 7.6396 7.63263 7.61914 7.80835C7.49243 8.90693 6.87202 9.52734 5.77344 9.65405C5.59772 9.67451 5.46474 9.8238 5.46484 10.0007C5.46517 10.1777 5.59859 10.3264 5.77441 10.3464C6.85731 10.4691 7.52042 11.0831 7.61816 12.1824C7.63414 12.3623 7.78525 12.4999 7.96582 12.4998C8.14634 12.4994 8.29693 12.3613 8.3125 12.1814C8.40645 11.0979 9.06302 10.4414 10.1465 10.3474C10.3264 10.3318 10.4645 10.1813 10.4648 10.0007C10.465 9.82016 10.3273 9.66905 10.1475 9.65308C9.04822 9.55533 8.4342 8.89222 8.31152 7.80933C8.29153 7.6335 8.14276 7.50008 7.96582 7.49976Z",fill:"#5856D6"})),oot=Object.freeze(Object.defineProperty({__proto__:null,default:AV},Symbol.toStringTag,{value:"Module"})),r_=t=>_.createElement("svg",w({width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},t),_.createElement("path",{d:"M17.665 10C17.665 10.6877 17.1785 11.2454 16.5488 11.3945L16.4219 11.4189C14.7098 11.6665 13.6129 12.1305 12.877 12.8623C12.1414 13.5938 11.6742 14.6843 11.4238 16.3887C11.3197 17.0973 10.7182 17.665 9.96484 17.665C9.27085 17.665 8.68836 17.1772 8.53613 16.5215C8.12392 14.7459 7.6623 13.619 6.95703 12.8652C6.31314 12.1772 5.39414 11.7268 3.88672 11.4688L3.57715 11.4199C2.88869 11.319 2.33496 10.734 2.33496 10C2.33496 9.26603 2.88869 8.681 3.57715 8.58008L3.88672 8.53125C5.39414 8.27321 6.31314 7.82277 6.95703 7.13477C7.6623 6.38104 8.12392 5.25413 8.53613 3.47852L8.56934 3.35742C8.76133 2.76356 9.31424 2.33496 9.96484 2.33496C10.7182 2.33497 11.3197 2.9027 11.4238 3.61133L11.5283 4.22266C11.7954 5.58295 12.2334 6.49773 12.877 7.1377C13.6129 7.86952 14.7098 8.33351 16.4219 8.58105C17.1119 8.68101 17.665 9.26667 17.665 10Z"})),vC=Object.freeze(Object.defineProperty({__proto__:null,default:r_},Symbol.toStringTag,{value:"Module"})),LVe=j(()=>I(()=>import("./6h7aompsg2q7gg0f.js").then(t=>t._),__vite__mapDeps([516,1])),{loading:t=>L(t)});var IV=(t=>(t.GENERIC="generic",t.GENERIC_FREE_TRIAL="generic_free_trial",t.GO="go",t.PLUS="plus",t))(IV||{});const sy="thread_header_upgrade_pill_dismissed_event",OVe=1440*60*1e3;function DVe(t){if(typeof t=="number"&&Number.isFinite(t))return t;if(typeof t=="string"){const e=Number(t);return Number.isFinite(e)?e:null}return null}function aot({clientThreadId:t,fromHeader:e}){var S,C,k,M,T,E;const n=G(),s=K8(),{enableThreadHeaderUpgradePill:o}=Sde(),a=Na(t),i=Ue(t,A=>me.hasUserMessage(A)),l=s2(),c=((S=l==null?void 0:l.call_to_action)==null?void 0:S.includes(Wt.GET_PLUS))||((C=l==null?void 0:l.call_to_action)==null?void 0:C.includes(Wt.UPGRADE_TO_GO))||((k=l==null?void 0:l.call_to_action)==null?void 0:k.includes(Wt.GET_BUSINESS_TRIAL))||((M=l==null?void 0:l.call_to_action)==null?void 0:M.includes(Wt.GET_GO_TRIAL))||((T=l==null?void 0:l.call_to_action)==null?void 0:T.includes(Wt.GET_PLUS_TRIAL))||((E=l==null?void 0:l.call_to_action)==null?void 0:E.includes(Wt.GET_PRO)),d=a&&!i,[u,m]=_.useState(null),f=Xn(t),p=u!==null;_.useEffect(()=>{if(typeof window>"u")return;const A=DVe(mt.getItem(Le.ThreadHeaderUpgradePillDismissals));A!=null&&Date.now()-A<OVe?m(A):A!=null&&mt.setItem(Le.ThreadHeaderUpgradePillDismissals,null);const N=R=>{const O=R.detail;(O===t||f&&O===f)&&m(Date.now())};return window.addEventListener(sy,N),()=>{window.removeEventListener(sy,N)}},[t,f]);const g=s&&o&&!c,h=g&&d,y=fMe()&&Ve(n,dF,{disableExposureLog:!0}).get(mMe,!1);let b=!1;!y&&e&&g&&t&&(b=Ve(n,"684023316").get("show_persistent_generic_upsell",!1));const v=_.useCallback(()=>{const A=f!=null?f:t,N=Date.now();if(mt.setItem(Le.ThreadHeaderUpgradePillDismissals,N),m(N),typeof window<"u"){const R=new Set([A]);f&&f!==t&&R.add(t);for(const O of R)window.dispatchEvent(new CustomEvent(sy,{detail:O}))}},[t,f]);return{shouldShow:!y&&(h||b&&!p),showCloseButton:!0,handleClose:v}}function rot(t){"use forget";var T;const e=H.c(16),{clientThreadId:n,onClose:s,showCloseButton:o}=t,a=o===void 0?!0:o,i=G(),l=_n(),{eligible:c}=WK(),{eligible:d}=qK(),{eligible:u}=zK();let m;e[0]!==n?(m=Na(n),e[0]=n,e[1]=m):m=e[1];const f=m,p=Ue(n,BVe),g=a&&(!f||p),h=ue(FVe),x=c||d||u,y=Zh(),{isLoading:b}=wo(en.Sunshine),{data:v,isLoading:S}=Vm(void 0,!1,y),C=y&&((T=v==null?void 0:v.memoryFullPct)!=null?T:0)>=100;if(!l||S&&(b||C))return null;let M;if(x)M="generic_free_trial";else if(h)Xp(i)?M="go":M="plus";else if(Xp(i))M="go";else{const A=Ve(i,"497415788").get("upgrade_pill_type","plus");if(HVe(A))M=A;else return null}switch(M){case"generic":{let E;return e[2]!==s||e[3]!==g?(E=r.jsx(GVe,{onClose:s,showCloseButton:g}),e[2]=s,e[3]=g,e[4]=E):E=e[4],E}case"generic_free_trial":{let E;return e[5]!==s||e[6]!==g?(E=r.jsx($Ve,{onClose:s,showCloseButton:g}),e[5]=s,e[6]=g,e[7]=E):E=e[7],E}case"plus":{let E;return e[8]!==h||e[9]!==s||e[10]!==g?(E=r.jsx(UVe,{isMobileWeb:h,onClose:s,showCloseButton:g}),e[8]=h,e[9]=s,e[10]=g,e[11]=E):E=e[11],E}case"go":{let E;return e[12]!==h||e[13]!==s||e[14]!==g?(E=r.jsx(VVe,{isMobileWeb:h,onClose:s,showCloseButton:g}),e[12]=h,e[13]=s,e[14]=g,e[15]=E):E=e[15],E}}}function FVe(){return X6()}function BVe(t){return me.hasUserMessage(t)}function UVe(t){"use forget";const e=H.c(13),{isMobileWeb:n,onClose:s,showCloseButton:o}=t,a=at(),i=G();let l;e[0]!==a?(l=()=>{gn(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(r_,{className:"icon-sm"}),e[2]=d):d=e[2];let u;e[3]!==i||e[4]!==n?(u=WVe(i,n),e[3]=i,e[4]=n,e[5]=u):u=e[5];let m;e[6]!==u?(m=r.jsx(P,w({},u)),e[6]=u,e[7]=m):m=e[7];let f;return e[8]!==c||e[9]!==s||e[10]!==o||e[11]!==m?(f=r.jsxs(i_,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:o,type:"plus",children:[d,m]}),e[8]=c,e[9]=s,e[10]=o,e[11]=m,e[12]=f):f=e[12],f}function VVe(t){"use forget";const e=H.c(13),{isMobileWeb:n,onClose:s,showCloseButton:o}=t,a=at(),i=G();let l;e[0]!==a?(l=()=>{gn(a,"thread_header_get_plus_pill")},e[0]=a,e[1]=l):l=e[1];const c=l;let d;e[2]===Symbol.for("react.memo_cache_sentinel")?(d=r.jsx(AV,{className:"icon-sm"}),e[2]=d):d=e[2];let u;e[3]!==i||e[4]!==n?(u=zVe(i,n),e[3]=i,e[4]=n,e[5]=u):u=e[5];let m;e[6]!==u?(m=r.jsx(P,w({},u)),e[6]=u,e[7]=m):m=e[7];let f;return e[8]!==c||e[9]!==s||e[10]!==o||e[11]!==m?(f=r.jsxs(i_,{onClick:c,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:s,showCloseButton:o,type:"go",children:[d,m]}),e[8]=c,e[9]=s,e[10]=o,e[11]=m,e[12]=f):f=e[12],f}function GVe(t){"use forget";const e=H.c(8),{onClose:n,showCloseButton:s}=t,o=at();let a;e[0]!==o?(a=()=>{gn(o,"thread_header_generic_upgrade_pill_button")},e[0]=o,e[1]=a):a=e[1];const i=a;let l,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(r_,{className:"icon-sm"}),c=r.jsx(P,w({},_t.upgrade)),e[2]=l,e[3]=c):(l=e[2],c=e[3]);let d;return e[4]!==i||e[5]!==n||e[6]!==s?(d=r.jsxs(i_,{onClick:i,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:s,type:"generic",children:[l,c]}),e[4]=i,e[5]=n,e[6]=s,e[7]=d):d=e[7],d}function $Ve(t){"use forget";const e=H.c(8),{onClose:n,showCloseButton:s}=t,o=at();let a;e[0]!==o?(a=()=>{gn(o,"thread_header_generic_free_trial_upgrade_pill_button")},e[0]=o,e[1]=a):a=e[1];const i=a;let l,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsx(r_,{className:"icon-sm"}),c=r.jsx(P,w({},_t.upgradeForFree)),e[2]=l,e[3]=c):(l=e[2],c=e[3]);let d;return e[4]!==i||e[5]!==n||e[6]!==s?(d=r.jsxs(i_,{onClick:i,className:"bg-[#F1F1FB] text-[#5D5BD0] hover:bg-[#E4E4F6] dark:bg-[#373669] dark:text-[#DCDBF6] dark:hover:bg-[#414071]",onClose:n,showCloseButton:s,type:"generic_free_trial",children:[l,c]}),e[4]=i,e[5]=n,e[6]=s,e[7]=d):d=e[7],d}function i_(t){"use forget";const e=H.c(30),{children:n,className:s,onClick:o,onClose:a,showCloseButton:i,type:l}=t,c=J(),[d,u]=_.useState(!1),m=i?"py-2 pe-2":"py-2";let f;e[0]!==s||e[1]!==m?(f=W("inline-flex items-center gap-1 rounded-full text-sm font-medium",m,s),e[0]=s,e[1]=m,e[2]=f):f=e[2];const p=f,g=i?"pe-0":"pe-3";let h;e[3]!==g?(h=W("flex items-center gap-1 bg-transparent ps-2.5 text-current focus:outline-none",g),e[3]=g,e[4]=h):h=e[4];const x=h;let y,b;e[5]!==l?(y=()=>{U.logEventWithStatsig("Thread Header Upgrade Pill Button Shown","chatgpt_thread_header_upgrade_pill_button_shown",{type:l})},b=[l],e[5]=l,e[6]=y,e[7]=b):(y=e[6],b=e[7]),_.useEffect(y,b);let v;e[8]!==o||e[9]!==l?(v=()=>{U.logEventWithStatsig("Thread Header Upgrade Pill Button Clicked","chatgpt_thread_header_upgrade_pill_button_clicked",{type:l}),o==null||o()},e[8]=o,e[9]=l,e[10]=v):v=e[10];const S=v;let C;e[11]!==a||e[12]!==l?(C=()=>{U.logEventWithStatsig("Thread Header Upgrade Pill Button Dismissed","chatgpt_thread_header_upgrade_pill_button_dismissed",{type:l}),a()},e[11]=a,e[12]=l,e[13]=C):C=e[13];const k=C;let M,T;e[14]!==i?(T=()=>{if(!i){u(!1);return}if(typeof window>"u"){u(!0);return}const R=window.requestAnimationFrame(()=>{u(!0)});return()=>{window.cancelAnimationFrame(R)}},M=[i],e[14]=i,e[15]=M,e[16]=T):(M=e[15],T=e[16]),_.useEffect(T,M);let E;e[17]!==n||e[18]!==x||e[19]!==S?(E=r.jsx("button",{type:"button",onClick:S,className:x,children:n}),e[17]=n,e[18]=x,e[19]=S,e[20]=E):E=e[20];let A;e[21]!==k||e[22]!==c||e[23]!==d||e[24]!==i?(A=i?r.jsx("button",{type:"button",onClick:k,className:W("ms-0 flex h-4 w-4 items-center justify-center rounded-full text-[black] hover:bg-[#E4E4F6] dark:text-[white] dark:hover:bg-[#414071]","transform transition-all duration-200 ease-out",d?"pointer-events-auto visible translate-x-0 opacity-100":"pointer-events-none invisible -translate-x-1 opacity-0"),"aria-label":c.formatMessage(_t.dismissUpgradeReminder),tabIndex:d?0:-1,children:r.jsx(LVe,{height:20,width:20,color:"text-token-text-primary"})}):null,e[21]=k,e[22]=c,e[23]=d,e[24]=i,e[25]=A):A=e[25];let N;return e[26]!==p||e[27]!==E||e[28]!==A?(N=r.jsxs("div",{className:p,children:[E,A]}),e[26]=p,e[27]=E,e[28]=A,e[29]=N):N=e[29],N}function HVe(t){return Object.values(IV).includes(t)}function WVe(t,e){const n=Ve(t,"497415788");return e&&n.get("should_show_upgrade_cta_mobile_web",!1)?_t.upgrade:_t.getPlus}function zVe(t,e){const n=Ve(t,"497415788");return e&&n.get("should_show_upgrade_cta_mobile_web",!1)?_t.upgrade:_t.upgradeToGo}var P6;const qVe=ct.button(P6||(P6=rt(["group flex cursor-pointer justify-center items-center gap-1 rounded-lg min-h-9 touch:min-h-10 px-2.5 text-lg hover:bg-token-surface-hover focus-visible:bg-token-surface-hover font-normal whitespace-nowrap focus-visible:outline-none"]))),YVe=t=>{"use forget";const e=H.c(4),{headerTextClassName:n}=t,s=n!=null?n:"px-2.5 text-lg";let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=r.jsx(P,{id:"mhGPZ6",defaultMessage:"ChatGPT"}),e[0]=o):o=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("span",{className:"text-token-text-tertiary ms-1",children:r.jsx(P,{id:"0GIpXd",defaultMessage:"Voice"})}),e[1]=a):a=e[1];let i;return e[2]!==s?(i=r.jsxs("div",{className:s,children:[o,a]}),e[2]=s,e[3]=i):i=e[3],i};function ZVe(t,e){var s;const n=e.categories.find(({defaultModel:o,supportedModels:a})=>o===t||(a==null?void 0:a.includes(t)));return(s=n==null?void 0:n.renderHeaderType)!=null?s:hy.SHORT_LABEL}function KVe(t,e){const n=e.groups.find(({modelIds:s})=>s.includes(t));return(n==null?void 0:n.group)!=null}const QVe=j(()=>I(()=>import("./iwl9ls3posey4bk1.js"),__vite__mapDeps([517,1,29,30])).then(t=>t.GizmoModelPicker)),JVe=t=>{"use forget";const e=H.c(2),{conversation:n,shouldShowFinchSection:s,preferredModelId:o}=t,a=bS(),i=CS(n,a,s,void 0,o);let l;return e[0]!==i?(l=r.jsx(SS,{sections:i}),e[0]=i,e[1]=l):l=e[1],l};function XVe({conversation:t,preferredModelId:e,headerTextClassName:n,chevronClassName:s}){var E;const o=G(),a=J();_r.useStoreWithInit({});const i=ss(),l=Tm(i),c=fl(i),d=Ch(),u=ut(o),m=wa(A=>A.shouldShowThreadModelPickerDot),f=Lq((E=Oq(o))==null?void 0:E.user,u),p=ue(()=>wn(t).id),g=ue(()=>ea(t)),{modelLabel:h}=um(l?null:p,g),x=l?hy.SHORT_LABEL:ZVe(p,g),b=!!pt(o)&&!(u!=null&&u.isFree())||f,v=_.useMemo(()=>!pt(o)||!bce(o,u,d,g)?!1:(wce()&&!m&&yn.setThreadModelPickerAlertDot(!0),!0),[o,u,g,d,m]);if(Il())return r.jsx(YVe,{headerTextClassName:n});if(c)return r.jsx("div",{className:W("text-token-text-primary px-3",n!=null?n:"text-lg"),children:c0});b&&(_a.markStart("ThreadModelSelector"),h!=null&&_a.markRendered("ThreadModelSelector"));const C=x===hy.TITLE?r.jsx(r.Fragment,{children:h}):r.jsxs(r.Fragment,{children:[c0," ",r.jsx("span",{className:"text-token-text-tertiary",children:h})]}),k=r.jsx("div",{className:n,children:b&&h!=null?C:c0}),M=!l&&KVe(p,g),T=r.jsxs(qVe,{style:{viewTransitionName:"var(--vt-thread-model-switcher)"},"aria-label":h?a.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:h}):a.formatMessage({id:"/D1dJC",defaultMessage:"Model selector"}),children:[M?r.jsx(kt,{label:p,side:"right",children:k}):k,r.jsx(U3,{className:W(s!=null?s:"icon-sm","text-token-text-tertiary")}),m&&r.jsx(rP,{color:"blue",className:"ms-1"})]});return g===void 0?T:r.jsx(Si,{alignOffset:-4,size:"small",triggerButton:T,onOpenChange:A=>{U.logEvent("Toggle Model Switcher",{isOpen:A}),We.logEvent("toggle_model_switcher",null,{isOpen:String(A)})},testId:"model-switcher-dropdown",children:r.jsx(JVe,{conversation:t,shouldShowFinchSection:v,preferredModelId:e})})}function iot(t){"use forget";var d;const e=H.c(12),{conversation:n,textClassName:s,chevronClassName:o}=t,a=G();let i;e[0]!==n?(i=()=>hh(n),e[0]=n,e[1]=i):i=e[1];const l=ue(i),{data:c}=Pa(l);if(l==null||Tl(a,l)){const u=(d=c==null?void 0:c.gizmo.default_model)!=null?d:void 0;let m;return e[2]!==o||e[3]!==n||e[4]!==u||e[5]!==s?(m=r.jsx(XVe,{conversation:n,preferredModelId:u,headerTextClassName:s,chevronClassName:o}),e[2]=o,e[3]=n,e[4]=u,e[5]=s,e[6]=m):m=e[6],m}else{let u;return e[7]!==o||e[8]!==n||e[9]!==l||e[10]!==s?(u=r.jsx(QVe,{gizmoId:l,conversation:n,textClassName:s,chevronClassName:o}),e[7]=o,e[8]=n,e[9]=l,e[10]=s,e[11]=u):u=e[11],u}}const eGe=t=>{const e=[];let n=null;const s=c=>{pe.safePost("/feed/interactions",{requestBody:{events:c}})},o=()=>{if(!n)return;const{cardId:c,openTimestamp:d}=n,u=(Date.now()-d)/1e3;e.push({type:"read_expanded",card_id:c,dwell_time_seconds:u,timestamp:new Date().toISOString()}),Vs(t).logEventWithStatsig("(Web) FYP Card Closed","chatgpt_web_fyp_card_closed",{card_id:c,dwell_time_seconds:u}),n=null};return{trackCardOpen:c=>{(n==null?void 0:n.cardId)!==c&&(n&&o(),n={cardId:c,openTimestamp:Date.now()},Vs(t).logEventWithStatsig("(Web) FYP Card Opened","chatgpt_web_fyp_card_opened",{card_id:c}),Ee.count(Ae.PULSE,"chatgpt_web_fyp_card_opened"))},trackCardClose:o,trackCardImpression:c=>{e.push({type:"impression",card_id:c,dwell_time_seconds:0,timestamp:new Date().toISOString()}),Vs(t).logEventWithStatsig("(Web) FYP Card Viewed","chatgpt_web_fyp_card_viewed",{card_id:c}),Ee.count(Ae.PULSE,"chatgpt_web_fyp_card_viewed")},trackAndFlushInteractions:()=>{e.length!==0&&(s(e),e.length=0)}}},tGe=xs(t=>eGe(t)),nGe=3e3,sGe=()=>{"use forget";const t=H.c(9),e=G();let n;t[0]!==e?(n=tGe(e),t[0]=e,t[1]=n):n=t[1];const s=n;Fb(s.trackAndFlushInteractions,nGe);let o,a;t[2]!==s.trackAndFlushInteractions?(o=()=>{const l=ml(window,{pagehide:s.trackAndFlushInteractions,beforeunload:s.trackAndFlushInteractions,visibilitychange:s.trackAndFlushInteractions});return()=>{l()}},a=[s.trackAndFlushInteractions],t[2]=s.trackAndFlushInteractions,t[3]=o,t[4]=a):(o=t[3],a=t[4]),_.useEffect(o,a);let i;return t[5]!==s.trackCardClose||t[6]!==s.trackCardImpression||t[7]!==s.trackCardOpen?(i={trackCardOpen:s.trackCardOpen,trackCardClose:s.trackCardClose,trackCardImpression:s.trackCardImpression},t[5]=s.trackCardClose,t[6]=s.trackCardImpression,t[7]=s.trackCardOpen,t[8]=i):i=t[8],i},oGe=j(()=>I(()=>import("./hz39tsbsdm5qfpb0.js"),__vite__mapDeps([518,1,519,29,30,368,369,367,365,339,520,452,74,521,451,412,413,414,522,523,524,525,461])).then(t=>t.PulseCardConversationModal));function jV(){"use forget";const t=H.c(17),e=G();let n;t[0]!==e?(n=Nr(e),t[0]=e,t[1]=n):n=t[1];const s=n,{trackCardOpen:o,trackCardClose:a}=sGe();let i;t[2]!==s||t[3]!==a?(i=()=>{ba(()=>{s.isCardModalOpen$.set(!1),s.cardModalState$.set(VF)}),a()},t[2]=s,t[3]=a,t[4]=i):i=t[4];const l=i;let c;t[5]!==e||t[6]!==l||t[7]!==s||t[8]!==o?(c=p=>{o(p),ba(()=>{s.isCardModalOpen$.set(!0),s.cardModalState$.set({activeCardId:p})}),gt(e,oGe,{onClose:l})},t[5]=e,t[6]=l,t[7]=s,t[8]=o,t[9]=c):c=t[9];const d=c;let u;t[10]!==s||t[11]!==o?(u=p=>{s.cardModalState$.set({activeCardId:p}),o(p)},t[10]=s,t[11]=o,t[12]=u):u=t[12];const m=u;let f;return t[13]!==l||t[14]!==d||t[15]!==m?(f={openModal:d,setActiveCardId:m,closeModal:l},t[13]=l,t[14]=d,t[15]=m,t[16]=f):f=t[16],f}const aGe=In(t=>It(()=>{var n;const e=(n=z1(t).data)==null?void 0:n.items;if(e){const{activeCardId:s}=Nr(t).cardModalState$();if(s)return Hte(e,s)}}));function lot(t){"use forget";const e=H.c(9),{show:n}=t,s=G(),{setActiveCardId:o}=jV();let a;e[0]!==s?(a=()=>aGe(s),e[0]=s,e[1]=a):a=e[1];const i=ue(a);let l;e[2]!==s||e[3]!==i||e[4]!==o||e[5]!==n?(l=n&&i&&r.jsx(rGe,{onClick:()=>{Vs(s).logEventWithStatsig("(Web) FYP Next Card Pill Tapped","chatgpt_web_fyp_next_card_pill_tapped",{card_id:i.id}),o(i.id)},image:i.image,title:i.title}),e[2]=s,e[3]=i,e[4]=o,e[5]=n,e[6]=l):l=e[6];let c;return e[7]!==l?(c=r.jsx(dn,{children:l}),e[7]=l,e[8]=c):c=e[8],c}const rGe=t=>{"use forget";const e=H.c(13),{image:n,title:s,onClick:o}=t;let a,i,l,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:0},i={opacity:1},l={opacity:0},c={duration:.15,ease:"easeInOut"},e[0]=a,e[1]=i,e[2]=l,e[3]=c):(a=e[0],i=e[1],l=e[2],c=e[3]);const d=n==null?void 0:n.url,u=n==null?void 0:n.fallback_url;let m;e[4]!==d||e[5]!==u?(m=r.jsx(rd,{src:d,fallbackSrc:u,className:"h-6 w-6 rounded-sm"}),e[4]=d,e[5]=u,e[6]=m):m=e[6];let f;e[7]!==s?(f=r.jsx("div",{className:"text-sm",children:s}),e[7]=s,e[8]=f):f=e[8];let p;return e[9]!==o||e[10]!==m||e[11]!==f?(p=r.jsxs(Xe.button,{initial:a,animate:i,exit:l,transition:c,className:"border-token-border-heavy bg-token-bg-elevated-primary absolute end-1/2 bottom-[calc(var(--composer-overlap-px)+--spacing(6))] flex translate-x-1/2 items-center justify-center gap-2 rounded-4xl border bg-clip-padding px-4 py-2 shadow-[0_4px_16px_0_rgba(0,0,0,0.05)]",onClick:o,children:[m,f]}),e[9]=o,e[10]=m,e[11]=f,e[12]=p):p=e[12],p},PV=j(()=>I(()=>import("./lvme5c5hzbidy3v7.js"),__vite__mapDeps([526,1,29,30,523,524,525,461,368,369,367,365,339,414,413,74,519,520,452,521,451,412,522])).then(t=>t.PulseFeedbackConversationModal)),NV=t=>{const e=Nr(t);ba(()=>{e.isFeedbackModalOpen$.set(!1),e.feedbackModalState$.set(UF),e.populatePrompt$.set(void 0)})};function Qv(t){Nr(t).isFeedbackModalOpen$.set(!0),gt(t,PV,{onClose:()=>{NV(t)}})}function cot(t){NV(t),Cs(t,PV)}const iGe=j(()=>I(()=>import("./mtsfsh7z74bmo6ig.js").then(t=>t._),__vite__mapDeps([507,1])),{loading:t=>L(t)}),lGe=j(()=>I(()=>import("./ntuoxtu7ohytvwjv.js").then(t=>t._),__vite__mapDeps([527,1])),{loading:t=>L(t)}),cGe=j(()=>I(()=>import("./f2itj05whsmn3kgs.js").then(t=>t._),__vite__mapDeps([508,1])),{loading:t=>L(t)}),dGe=j(()=>I(()=>import("./kkginmfs5ty8sze2.js").then(t=>t._),__vite__mapDeps([528,1])),{loading:t=>L(t)}),uGe=j(()=>I(()=>import("./ef28lc1b3o54kec9.js").then(t=>t._),__vite__mapDeps([185,1])),{loading:t=>L(t)}),mGe=j(()=>I(()=>import("./dm9rysukg8j76j38.js").then(t=>t._),__vite__mapDeps([529,1])),{loading:t=>L(t)}),fGe=j(()=>I(()=>import("./eh8svzo9pdq7gt5c.js").then(t=>t._),__vite__mapDeps([530,1])),{loading:t=>L(t)});function pGe({cardId:t}){const e=G(),n=J(),{mutate:s}=VTe(t),{mutate:o}=GTe(t),{closeModal:a}=jV(),{data:i}=$F(t),l=Nr(e),c=(i==null?void 0:i.reaction)==="like",d=(i==null?void 0:i.reaction)==="dislike",u=i==null?void 0:i.conversation_id,m=u?jt(u):void 0,f=h=>{h==="remove"?Vs(e).logEventWithStatsig("(Web) FYP Card Reaction Undone","chatgpt_web_fyp_card_reaction_undo",{card_id:t}):Vs(e).logEventWithStatsig("(Web) FYP Card Reaction Added","chatgpt_web_fyp_card_reaction",{card_id:t,reaction:h})},p=h=>{h==="save"?Vs(e).logEventWithStatsig("(Web) FYP Card Saved","chatgpt_web_fyp_card_saved",{card_id:t}):Vs(e).logEventWithStatsig("(Web) FYP Card Saved Undone","chatgpt_web_fyp_card_saved_undo",{card_id:t})},g=[{key:"upvote",icon:c?lGe:iGe,label:n.formatMessage({id:"wN6PjH",defaultMessage:"Like"}),onClick:()=>{const h=c?"remove":"like";s(h),f(h)}},{key:"downvote",icon:d?dGe:cGe,label:n.formatMessage({id:"FMxx3D",defaultMessage:"Dislike"}),onClick:()=>{const h=d?"remove":"dislike";s(h),f(h)}},{key:"share",icon:uGe,label:n.formatMessage({id:"BNIqUa",defaultMessage:"Share"}),disabled:!m,onClick:()=>{Vs(e).logEventWithStatsig("(Web) FYP Card Shared","chatgpt_web_fyp_card_shared",{card_id:t}),m&&yn.openSharingModal(m)}},{key:"save",icon:i!=null&&i.is_saved?fGe:mGe,label:n.formatMessage({id:"Fy5DRu",defaultMessage:"Save"}),onClick:()=>{const h=i!=null&&i.is_saved?"unsave":"save";o(h),p(h),m&&Qo(e).invalidateQueries({queryKey:w2().queryKey})},additionalText:i!=null&&i.is_saved?n.formatMessage({id:"5bP9LT",defaultMessage:"Saved as chat"}):void 0}];return r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"text-token-text-secondary flex",children:g.map(h=>r.jsxs("div",{className:"flex items-center gap-0.5",children:[r.jsx(id,{icon:h.icon,label:h.label,disabled:h.disabled,onClick:x=>{x.stopPropagation(),h.onClick()}},h.key),h.additionalText&&r.jsx("span",{className:"text-token-text-secondary text-sm",children:h.additionalText})]},h.key))}),r.jsx("div",{className:W(!d&&"invisible"),"aria-hidden":!d,children:r.jsx(gGe,{onClick:h=>{ba(()=>{l.feedbackModalState$.set({type:tl.FeedbackOnCard,cardId:t}),l.populatePrompt$.set({type:"cardReply",cardId:t}),Qv(e),a()}),h.stopPropagation()}})})]})}const gGe=t=>{"use forget";const e=H.c(3),{onClick:n}=t;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=r.jsx(P,{id:"xh3p31",defaultMessage:"Share your thoughts"}),e[0]=s):s=e[0];let o;return e[1]!==n?(o=r.jsx(he,{onClick:n,color:"secondary",children:s}),e[1]=n,e[2]=o):o=e[2],o};function dot({imageSrc:t,fallbackSrc:e,title:n,cardId:s}){return r.jsxs("div",{className:"flex flex-col gap-6 pb-4",children:[r.jsx("div",{className:"relative aspect-[2/1] overflow-hidden rounded-2xl",children:r.jsx(rd,{src:t,fallbackSrc:e,className:"h-full w-full object-cover"})}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-3xl",children:n}),s&&r.jsx(pGe,{cardId:s})]})]})}const fE=j(()=>I(()=>import("./pdp94tw1ktf1pj0a.js").then(t=>t._),__vite__mapDeps([40,1])),{loading:t=>L(t)}),hGe=t=>{"use forget";const e=H.c(21),{question:n,suggestions:s}=t,o=G();let a,i,l,c,d;if(e[0]!==o||e[1]!==n||e[2]!==s){const p=Nr(o);let g;e[8]!==s?(g=s.every(_Ge),e[8]=s,e[9]=g):g=e[9],i=g,a=(h,x,y)=>{const b=y===void 0?!1:y;Vs(o).logEventWithStatsig("(Web) FYP Feed Survey Tapped","chatgpt_web_fyp_feed_survey_tapped",{isAutoSend:b}),b?ba(()=>{p.feedbackModalState$.set({type:tl.FeedbackConversation}),p.autoSendCompletion={userMessage:$w(h),targetedReply:x!=null?x:null},p.shouldAutoSendCompletion$.set(!0),Qv(o)}):ba(()=>{p.populatePrompt$.set({type:"surveyReply",userMessage:$w(h),targetedReply:x!=null?x:null}),Qv(o)})},d="flex w-full flex-col gap-4 py-4",l="grid grid-cols-2 gap-4",c=s.map((h,x)=>{const{text:y,is_auto_send:b,prompt:v}=h;return r.jsx(he,{icon:b?null:fE,color:"secondary",contentWrapperClassName:"justify-start px-2 py-3 gap-4",iconClassName:"text-token-text-secondary",onClick:()=>a(v!=null?v:y,n!=null?n:null,b),children:y},x)}),e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=i,e[5]=l,e[6]=c,e[7]=d}else a=e[3],i=e[4],l=e[5],c=e[6],d=e[7];let u;e[10]!==a||e[11]!==i||e[12]!==n?(u=!i&&r.jsx(he,{icon:fE,color:"secondary",className:"text-token-text-secondary",contentWrapperClassName:"justify-start px-2 gap-4",onClick:()=>a("",n!=null?n:null),children:r.jsx(P,{id:"FKKl/d",defaultMessage:"Share anything..."})}),e[10]=a,e[11]=i,e[12]=n,e[13]=u):u=e[13];let m;e[14]!==l||e[15]!==c||e[16]!==u?(m=r.jsxs("div",{className:l,children:[c,u]}),e[14]=l,e[15]=c,e[16]=u,e[17]=m):m=e[17];let f;return e[18]!==d||e[19]!==m?(f=r.jsx("div",{className:d,children:m}),e[18]=d,e[19]=m,e[20]=f):f=e[20],f};function _Ge(t){return t.is_auto_send}const uot=()=>{"use forget";var c,d,u,m,f,p,g,h,x,y,b,v,S,C,k,M,T,E,A,N,R,O,D,F,V;const t=H.c(13),e=G();let n;t[0]!==e?(n=()=>Nr(e).feedbackModalState$(),t[0]=e,t[1]=n):n=t[1];const s=ue(n);let o;t[2]!==e?(o=()=>z1(e),t[2]=e,t[3]=o):o=t[3];const{data:a}=ue(o);let i;t[4]!==s.cardId||t[5]!==s.type||t[6]!==((c=a==null?void 0:a.feedback)==null?void 0:c.suggestions)||t[7]!==((d=a==null?void 0:a.onboarding)==null?void 0:d.image_urls)||t[8]!==((f=(m=(u=a==null?void 0:a.survey)==null?void 0:u.survey_config)==null?void 0:m.overlay_content)==null?void 0:f.body)||t[9]!==((h=(g=(p=a==null?void 0:a.survey)==null?void 0:p.survey_config)==null?void 0:g.overlay_content)==null?void 0:h.title)?(i=(s.type===tl.FeedbackPreview||s.type===tl.FeedbackOnCard)&&r.jsxs(Xe.div,{className:"bg-token-bg-primary absolute start-0 top-0 z-10 h-full w-full",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},children:[s.type===tl.FeedbackPreview&&r.jsx(xGe,{title:(b=(y=(x=a==null?void 0:a.survey)==null?void 0:x.survey_config)==null?void 0:y.overlay_content)==null?void 0:b.title,body:(C=(S=(v=a==null?void 0:a.survey)==null?void 0:v.survey_config)==null?void 0:S.overlay_content)==null?void 0:C.body,suggestions:(k=a==null?void 0:a.feedback)==null?void 0:k.suggestions,images:(T=(M=a==null?void 0:a.onboarding)==null?void 0:M.image_urls)==null?void 0:T.map(aj)}),s.type===tl.FeedbackOnCard&&r.jsx(yGe,{cardId:s.cardId})]}),t[4]=s.cardId,t[5]=s.type,t[6]=(E=a==null?void 0:a.feedback)==null?void 0:E.suggestions,t[7]=(A=a==null?void 0:a.onboarding)==null?void 0:A.image_urls,t[8]=(O=(R=(N=a==null?void 0:a.survey)==null?void 0:N.survey_config)==null?void 0:R.overlay_content)==null?void 0:O.body,t[9]=(V=(F=(D=a==null?void 0:a.survey)==null?void 0:D.survey_config)==null?void 0:F.overlay_content)==null?void 0:V.title,t[10]=i):i=t[10];let l;return t[11]!==i?(l=r.jsx(dn,{mode:"wait",children:i}),t[11]=i,t[12]=l):l=t[12],l},xGe=t=>{"use forget";const e=H.c(30),{title:n,body:s,suggestions:o,images:a}=t,i=G();let l;e[0]!==i?(l=!1,e[0]=i,e[1]=l):l=e[1];const c=l,d=_.useRef(null),u=_.useRef(null),m=_.useRef(null);let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f={firstRef:u,secondRef:d,firstSide:"top",secondSide:"top",threshold:50,absolute:!1},e[2]=f):f=e[2];const p=zv(f);let g;e[3]===Symbol.for("react.memo_cache_sentinel")?(g={firstRef:m,secondRef:u,firstSide:"top",secondSide:"bottom",threshold:30,absolute:!1},e[3]=g):g=e[3];const h=zv(g),x=p&&"sticky top-0",y=h&&"opacity-10 transition-opacity duration-300";let b;e[4]!==x||e[5]!==y?(b=W("flex h-45 w-full items-center justify-center",x,y),e[4]=x,e[5]=y,e[6]=b):b=e[6];let v;e[7]!==a?(v=a!=null?a:[],e[7]=a,e[8]=v):v=e[8];let S;e[9]!==v?(S=r.jsx(ZU,{images:v}),e[9]=v,e[10]=S):S=e[10];let C;e[11]!==b||e[12]!==S?(C=r.jsx("div",{className:b,ref:u,children:S}),e[11]=b,e[12]=S,e[13]=C):C=e[13];let k;e[14]!==n?(k=n&&r.jsx("div",{className:"text-xl font-medium",children:n}),e[14]=n,e[15]=k):k=e[15];let M;e[16]!==s?(M=s&&r.jsx("div",{className:"text-token-text-secondary whitespace-pre-line",children:s}),e[16]=s,e[17]=M):M=e[17];let T;e[18]!==o?(T=o&&r.jsx(hGe,{suggestions:o.map(vGe)}),e[18]=o,e[19]=T):T=e[19];let E;e[20]!==c?(E=!1,e[20]=c,e[21]=E):E=e[21];let A;e[22]!==k||e[23]!==M||e[24]!==T||e[25]!==E?(A=r.jsxs("div",{className:"z-10 flex w-full flex-col gap-4 pb-16",ref:m,children:[k,M,T,E]}),e[22]=k,e[23]=M,e[24]=T,e[25]=E,e[26]=A):A=e[26];let N;return e[27]!==A||e[28]!==C?(N=r.jsxs("div",{className:"relative mx-auto flex h-full w-full max-w-170 flex-1 flex-col items-center justify-center gap-8 overflow-visible px-4 py-6",ref:d,children:[C,A]}),e[27]=A,e[28]=C,e[29]=N):N=e[29],N},yGe=t=>{"use forget";var d,u;const e=H.c(6),{cardId:n}=t,{data:s}=$F(n);if(!s)return null;const o=(d=s.image)==null?void 0:d.url,a=(u=s.image)==null?void 0:u.fallback_url;let i;e[0]!==o||e[1]!==a?(i=r.jsx(rd,{src:o,fallbackSrc:a,className:"h-32 w-32",shadow:!0}),e[0]=o,e[1]=a,e[2]=i):i=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=r.jsxs("div",{className:"flex w-full flex-col items-center gap-4",children:[r.jsx("div",{className:"text-xl font-medium",children:r.jsx(P,{id:"TXCx5u",defaultMessage:"Share what you're thinking"})}),r.jsx("div",{children:r.jsx(P,{id:"bZrGT3",defaultMessage:"Every bit of feedback shapes what shows up next."})})]}),e[3]=l):l=e[3];let c;return e[4]!==i?(c=r.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-8",children:[i,l]}),e[4]=i,e[5]=c):c=e[5],c};function vGe(t){return{text:t,prompt:t,is_auto_send:!1}}function mot({isSharedConversation:t,clientThreadId:e}){const n=G(),s=xe(n,"2287071194"),o=_.useRef(!1),{clearAllSystemHintModeTriggers:a,setThreadSystemHintMode:i}=na(),c=Ue(e,u=>me.getLastMessageSystemHints(u)).includes(Ie.Tatertot),d=s&&t&&cb(n)&&c;_.useEffect(()=>{!d||o.current||(a(),i(Ie.Tatertot,!0,{clientThreadId:e}),o.current=!0)},[d,o,e,a,i,c])}const pp="m",bGe=2e3,SGe="skip_instant_query",CGe="client_reported_search_source",wGe=["gpt-5","gpt-4o","gpt-4-1-mini"];function fot(t){var A;const{clientThreadId:e,handleRequestCompletion:n}=t,s=G(),o=ht(s,e),a=_.useRef(!1),i=_.useRef(null),l=ue(()=>ea(o)),c=nf.useIsEnabled(e),{isLoading:d,data:u}=bl(),m=Ue(e,me.hasUserMessage),f=W6(u),[p,g]=zs(),h=Ut(),{systemHints:x}=Ko(),y=p.get(Kd),b=p.get(qC)==="ipl";_.useEffect(()=>{E(!0),a.current=!1,i.current=null},[y]);const v=_.useCallback(({content:N,attachments:R},O,D)=>{const F=Um(),V=R.length>0?{attachments:R}:{};V.system_hints=O.systemHints,Object.keys(F).length>0&&(V.__internal={search_settings:F});const{extraStreamParams:z}=I1(O.systemHints?O.systemHints:[],{enableMessageFollowups:c});n({promptMessage:us(N,V,b?{real_author:Sb.IPL}:void 0),requestedModelId:D,eventSource:"url",completionMetadata:O,extraStreamParams:z})},[n,c,b]),S=(A=t9(()=>window.location.pathname))!=null?A:null,C=Dq(),k=!d&&S!=null,M=Vb(),[T,E]=_.useState(!0);return _.useEffect(()=>{var ae,ce,ye,fe,Ce,ee,te;if(!T||a.current)return;const N=(ae=ft(e))==null?void 0:ae.mode;if(!k||N==null||(p.has(t2)||p.has(Fq))&&x==null)return;if(!MGe(S)||kGe(S)&&C===void 0||jt(e)!=null){E(!1);return}const O=(()=>{try{return Object.fromEntries(new URLSearchParams(location.hash.slice(1)).entries())}catch(le){return{}}})(),D=w(w({},Object.fromEntries(p)),O),{[Kd]:F,[pp]:V,model:z,[SGe]:$,[CGe]:Y}=D,Z=(ce=typeof F=="string"?F:null)!=null?ce:typeof V=="string"?V:null,Q=Object.values(Xu).includes(Y)?Y:void 0;if(!Z||!Z.trim()){E(!1);return}else i.current=Date.now();const q=V6(p,{availableHints:x});a.current=!0;const X=q.find(fl),oe=ND(z!=null?z:null,X);let se=M.secFetchSite==="none"||((ye=document.referrer)==null?void 0:ye.startsWith("https://openai.com/"))||((fe=document.referrer)==null?void 0:fe.startsWith("https://pay.openai.com/"));if(oe&&(se=!1),Sn()&&(se=!1),!se){g(le=>{const re=new URLSearchParams(le);return re.delete(Kd),re.delete(pp),re.delete(qC),re.append("prompt",Z),re}),E(!1),Oe.addAction("pageload-completion.disallowed",{secFetchSite:M.secFetchSite,referrer:document.referrer});return}const de=q.includes(Ie.Search);let ie=J9(l);if(de&&l){const le=wGe.map(re=>l.models.get(re)).find(re=>{var ve;return(ve=re==null?void 0:re.enabledTools)==null?void 0:ve.includes(sl.Search)});if(le)ie=le;else if(!((Ce=ie==null?void 0:ie.enabledTools)!=null&&Ce.includes(sl.Search))){for(const re of l.models.values())if((ee=re.enabledTools)!=null&&ee.includes(sl.Search)){ie=re;break}}}((te=t.prefetchSearchThreadIdPromise)!=null?te:Promise.resolve(null)).then(le=>{var ve;g(_e=>{const we=new URLSearchParams(_e);return we.delete(Kd),we.delete(pp),we.delete("skip_instant_query"),ie&&we.append("model",ie.id),we});const re=Q!=null?Q:de?Xu.URL_SEARCH_HINT:void 0;v({content:Z,attachments:[]},{conversationMode:N,source:$?void 0:"instant-query",systemHints:q,prefetchIds:le!=null?[le]:void 0,searchSource:re},(ve=ie==null?void 0:ie.id)!=null?ve:void 0),le!=null&&Oe.addFirstTiming("createCompletion.prefetchSearch")})},[d,k,S,l,f,v,T,e,C,M.secFetchSite,h,t.prefetchSearchThreadIdPromise,p,g,x]),T&&(t.prefetchSearchThreadIdPromise!=null||p.has(Kd)||p.has(pp)?!0:i.current?m||Date.now()-i.current>bGe?(i.current=null,E(!1),!1):!0:!1)}function kGe(t){return RV(t)}function RV(t){return t==null?!1:/^\/g\/[\w-]+$/.test(t)}function MGe(t){return t==null?!1:t==="/"||RV(t)}const TGe="webrtc-cert-db",EGe=1,cd="certs",pE="ecdsa-p256:v1",AGe={name:"ECDSA",namedCurve:"P-256",expires:365*24*60*60*1e3};function IGe(){return new Promise((t,e)=>{const n=indexedDB.open(TGe,EGe);n.onupgradeneeded=()=>{const s=n.result;s.objectStoreNames.contains(cd)||s.createObjectStore(cd)},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)})}function jGe(t,e){return new Promise((n,s)=>{const a=t.transaction(cd,"readonly").objectStore(cd).get(e);a.onsuccess=()=>n(a.result),a.onerror=()=>s(a.error)})}function PGe(t,e,n){return new Promise((s,o)=>{const i=t.transaction(cd,"readwrite").objectStore(cd).put(n,e);i.onsuccess=()=>s(),i.onerror=()=>o(i.error)})}function LV(t){const e=Date.now();return t.expires<=e}async function NGe(){try{"storage"in navigator&&"persist"in navigator.storage&&await navigator.storage.persist()}catch(t){$t.certificateLocalDb.saveFailed(t)}}async function gE(t){const e=await RTCPeerConnection.generateCertificate(t);return $t.certificateLocalDb.generated(),e}async function RGe(t={}){const{generationParams:e=AGe,disablePersistence:n=!1}=t;if(!n&&"indexedDB"in window)try{await NGe();const s=await IGe(),o=await jGe(s,pE);if(o&&!LV(o))return $t.certificateLocalDb.hit(),o;const a=await gE(e);return PGe(s,pE,a).catch(i=>{$t.certificateLocalDb.saveFailed(i)}),a}catch(s){$t.certificateLocalDb.loadFailed(s)}return gE(e)}let Iu,Ka;const Qg=Qe(!0);function hE(t,e){RGe({generationParams:{name:"ECDSA",namedCurve:"P-256"}}).then(n=>{Ka=n}).catch(n=>{t.current||(t.current=!0,$t.certificateCache.unsupported(n))}).finally(()=>{e.current=!1})}function _E(){try{Iu=OV.createPeerConnection("cache"),Qg.set(!1)}catch(t){$t.peerConnectionCache.unsupported(t)}}const pot=()=>{const t=G(),e=_.useRef(!1),n=_.useRef(!1),s=pt(t),o=ue(Qg),a=xe(t,"1863841549"),i=xe(t,"2777663391");return _.useEffect(()=>{s&&(a&&!e.current&&Ka===void 0?(e.current=!0,YC(t,"defer-pc")?Yp.postTask(()=>hE(n,e)):hE(n,e)):a||$t.certificateCache.disabled())},[t,a,s]),_.useEffect(()=>{s&&i&&o&&(YC(t,"defer-pc")?Yp.postTask(()=>_E()):_E())},[t,i,o,s]),null};function LGe(t){return!(!t||t.signalingState==="closed"||t.connectionState!=="new"||t.iceConnectionState!=="new")}const OV={createPeerConnection:t=>(Ka&&LV(Ka)&&($t.certificateCache.expired({expires:Ka.expires}),Ka=void 0),Ka===void 0?($t.certificateCache.miss({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle"})):($t.certificateCache.hit({reason:t}),new RTCPeerConnection({bundlePolicy:"max-bundle",certificates:[Ka]}))),getFreshPeerConnection:t=>{try{return LGe(Iu)?($t.peerConnectionCache.hit(),Iu):($t.peerConnectionCache.miss(),OV.createPeerConnection(t))}finally{Qg.set(!0),Iu=void 0}},resetAll:()=>{Iu=void 0,Ka=void 0,Qg.set(!0)}},got=()=>{const t=G(),e=Q1(t);return _.useEffect(()=>{r2.set(e?"transceiver":"livekit")},[e]),null};function OGe(t){const e=G();return ue(()=>wn(ht(e,t)).id)}async function DGe(){try{return(await navigator.permissions.query({name:"microphone"})).state}catch(t){return yi.info("Failed to check microphone permission state",t),"unknown"}}const gp=Qe(void 0),FGe=1e3*60*9,BGe=Qe([]),UGe=Qe([]),hot=Qe(void 0),xE=Qe([]);function VGe(t,e){return t.includes(e)?t:[...t,e]}function GGe(t,e){return t.includes(e)?t.filter(n=>n!==e):t}function Jg(...t){yi.debug("[Status Cache]",...t)}function $Ge(t){const e=ds(t,"2943229081");return{"require-voice-used-recently":e.get("require-voice-used-recently",!1),"voice-used-within-past-days":e.get("voice-used-within-past-days",7),"enable-cache-for-gpts":e.get("enable-cache-for-gpts",!1),"enable-cache-for-new-users":e.get("enable-cache-for-new-users",!1),"new-user-within-past-days":e.get("new-user-within-past-days",7),"voice-status-cache-ttl-ms":e.get("voice-status-cache-ttl-ms",FGe),"enable-cache-if-mic-granted":e.get("enable-cache-if-mic-granted",!1)}}function HGe(t,e){var l;const n=t["enable-cache-for-new-users"],s=t["new-user-within-past-days"];if(!n)return!1;const o=((l=e==null?void 0:e.created)!=null?l:0)*1e3,a=Date.now()-o;return Math.floor(a/(1e3*60*60*24))<s}function WGe(t,e){const n=t["require-voice-used-recently"],s=t["voice-used-within-past-days"],o=s*24*60*60*1e3;if(e&&!n)return Jg("User using transceiver and recency not required, prefetch OK"),!0;const a=mt.getItem(Le.VoiceLastUsed),i=a?new Date(a):null,l=i?i.getTime()>Date.now()-o:!1;return Jg("User ".concat(l?"passes":"fails"," recency requirement, prefetch ").concat(l?"OK":"SKIP"),{voiceUsedWithinDays:s,lastUsedVoiceDate:i}),l}const _ot=({conversationId:t})=>{var T;const e=G(),{voiceName:n}=O1(),s=Xn(t),o=OAe(),a=_.useRef(!1),i=sd(E=>E.isVoiceModeActive),l=Sh(),c=(T=OGe(t))!=null?T:Bq,d=Q1(e),u=_.useMemo(()=>$Ge(e),[e]),m=pn(),f=u["voice-status-cache-ttl-ms"],p=xe(e,"2209667701"),g=pt(e),h=Ue(s,E=>!!(E&&E.isLoading===!1))||Na(t),x=_.useMemo(()=>{const E=u["enable-cache-for-gpts"],A=WGe(u,d),N=HGe(u,m),R=!!l,O=[];return O.push(!p&&"gate-disabled"),!A&&!N&&(O.push("not-voice-used-recently"),O.push("fails-new-user-requirement")),O.push(!E&&R&&"is-custom-gpt"),O.push(!g&&"logged-out"),O.filter(D=>typeof D=="string")},[l,d,u,m,p,g]),[y,b]=_.useState([]);_.useEffect(()=>{const E=u["enable-cache-if-mic-granted"];g&&p&&E?DGe().then(A=>{b(A==="granted"?N=>VGe(N,"mic-granted"):N=>GGe(N,"mic-granted"))}):b(A=>A.length>0?[]:A)},[u,p,g]);const v=_.useMemo(()=>({conversation_id:s!=null?s:null,requested_voice_mode:"advanced",gizmo_id:l!=null?l:null,voice:n!=null?n:null,requested_default_model:c}),[s,n,l,c]),[S,C]=_.useState(!0),k=_.useRef(void 0),M=_.useRef(void 0);return _.useEffect(()=>{C(!0)},[v]),_.useEffect(()=>{if(!h)return;BGe.set(x),UGe.set(y),Jg("Eligibility snapshot",{eligibleReasons:y,ineligibleReasons:x}),x.length>0&&y.length===0&&gp.set(void 0);const E=x.length===0||y.length>0,A=!i&&E&&S,N=a.current;!A||N||(a.current=!0,Jg("Prefetching voice status"),o(v,"voice-status-cache").then(R=>{xE.set([]);const{chatreq:O}=R;gp.set(B(w({},R),{proofOfWorkPromise:new Promise((D,F)=>{O?vr.getEnforcementToken(O).then(D).catch(F):D(null)})})),k.current=Date.now(),C(!1),clearTimeout(M.current),M.current=setTimeout(()=>{var F;const D=(F=k.current)!=null?F:0;Date.now()-D>=f&&(gp.set(void 0),C(!0),Uq().then(V=>{Oe.addAction("voice-status-cache-stale",{conversationId:v.conversation_id,protocol:V,ttlMs:f})}))},f)}).catch(R=>{var O;R.code==="conversation_not_found"?Oe.addAction("voice-status-cache-conversation-not-found",{conversationId:v.conversation_id}):Oe.addError(new Error("Voice status cache failed"),R),xE.set([(O=R.code)!=null?O:"unknown error"]),gp.set(void 0)}).finally(()=>{a.current=!1}))},[o,v,x,y,i,S,f,h]),_.useEffect(()=>()=>{clearTimeout(M.current)},[]),null};function xot(){const t=G(),e=xe(t,"733205176"),n=xe(t,"2017435557"),s=e||n;_.useEffect(()=>{if(!s)return;const o=a=>{var m,f,p,g,h;const i=a.payload.conversation_id,l=a.payload.update_content,c=a.payload.update_type;if(c==="refetch-conversation"){ka(i,{skipIfExisting:!1});return}if(c==="async-task-update-message"){const x=l.message;if(!x)return;qe(i,y=>{ln.updateTree(y,b=>{b.updateNodeMessage(x.id,x)})}),x.status==="finished_successfully"&&((m=x.metadata)!=null&&m.async_task_id)&&Zn.setTaskCompleted(x.metadata.async_task_id,x)}const d=ht(t,i);if(FV(d).set(Date.now()),c==="add-messages"){let x=l.messages;if(!(x!=null&&x.length))return;const y=x.filter(v=>{var S;return(S=v.metadata)==null?void 0:S.async_completion_id});if(y.length>0){for(const v of y)(f=v.metadata)!=null&&f.async_completion_id&&Zn.setTaskCompleted((p=v.metadata)==null?void 0:p.async_completion_id,v);$p(t)&&(qe(i,v=>{ln.setShouldRefetchConvoOnFinalize(v,!0)}),x=x.filter(v=>{var S;return!((S=v.metadata)!=null&&S.async_completion_id)}))}DV(d).set(v=>[...v,...x])}if(c==="async-task-start"&&Zn.setTask(l.async_task_id,{originalConversationId:i,taskId:l.async_task_id,title:l.title,prompt:l.prompt,status:Ms.CREATED,createdAt:l.created_at,updatedAt:l.created_at,originalConversationUserMessageId:l.original_conversation_user_message_id}),c==="async-task-completed"){const x=l.message;if(!x)return;(g=x.metadata)!=null&&g.async_completion_id&&Zn.setTaskCompleted((h=x.metadata)==null?void 0:h.async_completion_id,x),qe(i,y=>{$p(t)?ln.setShouldRefetchConvoOnFinalize(y,!0):ln.updateTree(y,(b,v)=>{if(b.getNodeIfExists(x.id))b.updateNodeMessage(x.id,x);else return b.addMessageNode(v,x),x.id})})}if(c==="title-update"){const x=l.title;if(!x)return;s1(t,i,x,bm.Server)}if(c==="set-conversation-async-status"&&"conversation_async_status"in l){const x=l.conversation_async_status,y=x?{value:x,source:ns.SERVER}:null;Ps(i,y);const b=Tb(i);b!==i&&Ps(b,y)}if(c==="moderation-response")try{const x=l.moderation_event,y=Mj(x);if((y==null?void 0:y.type)!=="moderation")throw new Error("Expected moderation type but got ".concat(y==null?void 0:y.type));PI(y,i)}catch(x){}};return e7.on("conversation-update",o)},[t,s])}const zGe=Object.freeze([]),oy=10*1e3,qGe=200*1e3,DV=_d(()=>Qe([])),FV=_d(()=>Qe(null));function yot(t){"use forget";var ae;const e=H.c(48),n=G(),s=ue(t.serverId$),a=((ae=Xh(s))==null?void 0:ae.value)===Yt.REALTIME;let i;e[0]!==n?(i=ce=>{var fe,Ce,ee;const ye=(fe=me.getCurrentNode(ce))==null?void 0:fe.message;return[ye!=null?lwe(ye):0,ye!=null?fv(ye,n):0,ye!=null?b3(ye,n):null,ye!=null?"".concat(ye.id,":").concat(ye.create_time):null,ye!=null?(Ce=ye.author)==null?void 0:Ce.role:null,ye!=null?ye.channel:null,(ee=me.lastUserMessage(ce))==null?void 0:ee.id]},e[0]=n,e[1]=i):i=e[1];const[l,c,d,u,m,f,p]=Ue(s,i);let g;e[2]!==t?(g=()=>t?FV(t)():null,e[2]=t,e[3]=g):g=e[3];const h=ue(g),x=d!=null?d*60*1e3:qGe,[y,b]=_.useState(!1),[v,S]=_.useState(!1),[C,k]=_.useState(!1),M=_.useRef(null);let T;e[4]!==s?(T=()=>{if(b(!1),!s)return;const ce=setTimeout(()=>{S(!0)},oy);return()=>{clearTimeout(ce),S(!1)}},e[4]=s,e[5]=T):T=e[5];let E;e[6]!==p||e[7]!==s?(E=[s,p],e[6]=p,e[7]=s,e[8]=E):E=e[8],_.useEffect(T,E);let A;e[9]!==a||e[10]!==x||e[11]!==l||e[12]!==s?(A=()=>{if(s==null||!a||!l){k(!1);return}k(!1);let ce=null;const ye=window.setTimeout(()=>{k(!0),Ee.count(Ae.DEFAULT,"chatgpt_web_websocket_timeout_reached"),ce=window.setTimeout(()=>{k(!1),Ee.count(Ae.DEFAULT,"chatgpt_web_websocket_timeout_max_duration")},x)},l);return()=>{window.clearTimeout(ye),ce&&window.clearTimeout(ce)}},e[9]=a,e[10]=x,e[11]=l,e[12]=s,e[13]=A):A=e[13];let N;e[14]!==a||e[15]!==h||e[16]!==x||e[17]!==l||e[18]!==s?(N=[s,a,l,h,x],e[14]=a,e[15]=h,e[16]=x,e[17]=l,e[18]=s,e[19]=N):N=e[19],_.useEffect(A,N);const R=s!==void 0&&s!=null&&a&&(y&&v||C),O=_.useRef(0);let D;e[20]!==t?(D=()=>t?DV(t)():zGe,e[20]=t,e[21]=D):D=e[21];const F=ue(D),V=c&&c>0?c:oy,z=C?V:oy,$=s!=null?s:"missing";let Y;e[22]!==$?(Y=l1({clientThreadId:$,alwaysForceUpdate:!0}),e[22]=$,e[23]=Y):Y=e[23];let Z;e[24]!==R||e[25]!==z||e[26]!==Y?(Z=B(w({},Y),{enabled:R,refetchInterval:z,staleTime:z}),e[24]=R,e[25]=z,e[26]=Y,e[27]=Z):Z=e[27];const{data:Q}=lt(Z);let q,X;e[28]!==Q?(q=()=>{Q&&b(!1)},X=[Q],e[28]=Q,e[29]=q,e[30]=X):(q=e[29],X=e[30]),_.useEffect(q,X);let oe;e[31]!==m||e[32]!==f||e[33]!==u||e[34]!==s||e[35]!==C?(oe=()=>{if(!s){M.current=null;return}C&&m==="assistant"&&f==="final"&&u&&u!==M.current&&(U.logEventWithStatsig("chatgpt_web_polled_for_final_assistant_message","chatgpt_web_polled_for_final_assistant_message",{conversationId:s}),Ee.count(Ae.DEFAULT,"chatgpt_web_polled_for_final_assistant_message")),M.current=u},e[31]=m,e[32]=f,e[33]=u,e[34]=s,e[35]=C,e[36]=oe):oe=e[36];let se;e[37]!==V||e[38]!==m||e[39]!==f||e[40]!==u||e[41]!==s||e[42]!==C?(se=[u,m,f,C,s,V],e[37]=V,e[38]=m,e[39]=f,e[40]=u,e[41]=s,e[42]=C,e[43]=se):se=e[43],_.useEffect(oe,se);let de,ie;e[44]!==F||e[45]!==s?(de=()=>{if(!F.length||!s)return;const ce=F.slice(O.current);ce.length&&qe(s,ye=>{ln.updateTree(ye,(fe,Ce)=>{let ee=Ce;if(ce.forEach(te=>{var ve,_e;O.current=O.current+1;const le=uo(te),re=(ve=le.metadata)==null?void 0:ve.parent_id;if(re)if(fe.getNodeIfExists(le.id)){const we=fe.getNodeByIdOrMessageId(le.id);if(we.message.create_time&&le.create_time&&we.message.create_time>le.create_time)return;if(we.parentId!==re){if(!fe.getNodeIfExists(re)){b(!0);return}fe.moveNode(re,we.id),ee=fe.getLeafFromNodeAvoidingPlaceholders(we.id).id;const ge=fe.getNodeByIdOrMessageId(re).children.map(Ne=>fe.getNodeIfExists(Ne)).filter(Ne=>(Ne==null?void 0:Ne.id)!==we.id).find(ZGe);ge&&(fe.moveNode(ee,ge.id),ee=fe.getLeafFromNodeAvoidingPlaceholders(ge.id).id)}fe.updateNodeMessage(le.id,le)}else if(fe.getNodeIfExists(re)){const we=fe.getNodeByIdOrMessageId(re);(_e=we.message.clientMetadata)!=null&&_e.isOptimistic&&we.children.forEach(ge=>{var je;const Ne=fe.getNodeIfExists(ge);(je=Ne==null?void 0:Ne.message.clientMetadata)!=null&&je.isPlaceholder&&fe.deleteNode(Ne.id)}),ee=fe.addMessageNode(re,le);const De=we.children.map(ge=>fe.getNodeIfExists(ge)).find(YGe);De&&(fe.moveNode(ee,De.id),ee=fe.getLeafFromNodeAvoidingPlaceholders(De.id).id)}else b(!0);else return}),ee!==Ce)return ee})})},ie=[F,s],e[44]=F,e[45]=s,e[46]=de,e[47]=ie):(de=e[46],ie=e[47]),_.useEffect(de,ie)}function YGe(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function ZGe(t){var e;return(e=t==null?void 0:t.message.clientMetadata)==null?void 0:e.isOptimistic}function vot(){const t=G();_.useEffect(()=>{const e=n=>{const s=n.payload.conversation_id,o=n.payload.update_content,a=n.payload.update_type;if(a==="chime-start-task"){const i=o.task_id,l=o.initiating_message_id;qe(s,c=>{c&&(c.asyncTurns||(c.asyncTurns={}),c.asyncTurns[i]?(c.asyncTurns[i].status="streaming_cot_messages",c.asyncTurns[i].initiatingMessageId=l):c.asyncTurns[i]={turnId:i,messages:{},title:o.title,status:"streaming_cot_messages",initiatingMessageId:l})})}if(a==="chime-update-title"){const i=o.task_id,l=o.title;qe(s,c=>{var u;if(!c)return;const d=(u=c.asyncTurns)==null?void 0:u[i];d&&(d.title=l)})}if(a==="chime-cot-message-add"||a==="chime-final-message-add"){const i=o.task_id,l=o.message;qe(s,c=>{var u;if(!c)return;const d=(u=c.asyncTurns)==null?void 0:u[i];d&&(d.status="streaming_cot_messages",d.messages[l.id]=l,a==="chime-final-message-add"&&(d.status="streaming_final_message",c.tree.getNodeIfExists(l.id)?ln.updateTree(c,f=>{l.metadata||(l.metadata={}),f.updateNodeMessage(l.id,l)}):ln.appendMessage(c,l),l.status==="finished_successfully"&&(d.status="done")))})}};return e7.on("conversation-update",e)},[t])}function bot({children:t}){let e;return _.Children.forEach(t,n=>{if(_.isValidElement(n)&&n.type==="title"){const s=_.Children.toArray(n.props.children)[0];typeof s=="string"&&(e=s)}}),_.useEffect(()=>{if(e!=null){const n=document.title;return document.title=e,()=>{document.title=n}}},[e]),null}const Sot=j(()=>I(()=>import("./eol79s9yacok2dwq.js"),__vite__mapDeps([531,1,29,30,532,33,424,421,117,425,426,67])).then(t=>t.LegacyPersonalityOnboarding));j(()=>I(()=>import("./n1bc4nh6f8gygv9r.js"),__vite__mapDeps([533,1,532,29,30,33,424,421,117,425,426,67])).then(t=>t.NewUserPersonalityOnboarding));var BV=(t=>(t[t.ADAVisualization=0]="ADAVisualization",t[t.Image=1]="Image",t))(BV||{});function KGe(t){return Co(t,"398474797").get("enabled",!1)}const QGe=_.createContext({model:"gpt-4o"}),bC=()=>_.useContext(QGe);function Cot({pointer:t,conversationId:e,messageId:n,source:s,imageIndex:o}){var a,i,l,c,d,u,m;return{imageUrl:t&&"url"in t?t.url:void 0,conversationId:e,messageId:n,generationId:(l=(i=(a=t==null?void 0:t.metadata)==null?void 0:a.generation)==null?void 0:i.gen_id)!=null?l:void 0,parentGenerationId:(u=(d=(c=t==null?void 0:t.metadata)==null?void 0:c.generation)==null?void 0:d.parent_gen_id)!=null?u:void 0,fileId:To((m=t==null?void 0:t.asset_pointer)!=null?m:""),model:"gpt-4o",source:s,imageIndex:o}}class Ss{}ne(Ss,"imageRated",({liked:e,analyticsContext:n})=>{const s=e?"like":"dislike",o=e?"true":"false";We.logEvent("chatgpt_dalle_image_rating",s,w({liked:o},n)),U.logEvent("chatgpt_dalle_image_rating",w({liked:e},n)),We.logEvent("chatgpt_image_rating",s,w({liked:o},n)),U.logEvent("chatgpt_image_rating",w({liked:e},n));var a="thumbs_down";e&&(a="thumbs_up"),n.conversationId&&n.messageId&&n.generationId&&($r("imagegen_rating",n.conversationId,n.messageId,n.generationId,{imagegen_rating:{rating:a}}),pe.safePost("/conversation/message_feedback",{requestBody:{message_id:n.messageId,conversation_id:n.conversationId,rating:e?"thumbsUp":"thumbsDown"},authOption:qt.SendIfAvailable}))}),ne(Ss,"imageShared",({analyticsContext:e,source:n})=>{U.logEventWithStatsig("Share Post: Share Button Clicked","chatgpt_post_share_button_clicked",w({source:n},e)),e.conversationId&&e.messageId&&e.generationId&&$r("image_share",e.conversationId,e.messageId,e.generationId)}),ne(Ss,"paragenImageRated",({liked:e,analyticsContext:n})=>{const s=e?"like":"dislike";We.logEvent("chatgpt_imagegen_image_paragen_rating",void 0,{liked:s,hasParent:n.parentGenerationId?"true":"false"}),U.logEvent("chatgpt_imagegen_image_paragen_rating",w({liked:e},n));var o="thumbs_down";e&&(o="thumbs_up"),n.conversationId&&n.messageId&&n.generationId&&$r("imagegen_image_paragen_rating",n.conversationId,n.messageId,n.generationId,{imagegen_image_paragen_rating:{rating:o}})}),ne(Ss,"paragenDownload",({analyticsContext:e})=>{We.logEvent("chatgpt_imagegen_image_paragen_download",void 0,{hasParent:e.parentGenerationId?"true":"false"}),U.logEvent("chatgpt_imagegen_image_paragen_download",e),e.conversationId&&e.messageId&&e.generationId&&$r("imagegen_image_paragen_download",e.conversationId,e.messageId,e.generationId)}),ne(Ss,"renderingComplete",({analyticsContext:e})=>{We.logEvent("chatgpt_imagegen_image_rendering_complete",void 0,{hasParent:e.parentGenerationId?"true":"false"}),U.logEvent("chatgpt_imagegen_image_rendering_complete",e)}),ne(Ss,"editorClick",({sourceOperation:e,analyticsContext:n})=>{We.logEvent("chatgpt_dalle_image_view_full",null,w({sourceOperation:e},n)),U.logEvent("chatgpt_dalle_image_view_full",w({sourceOperation:e},n)),We.logEvent("chatgpt_image_view_full",null,w({sourceOperation:e},n)),U.logEvent("chatgpt_image_view_full",w({sourceOperation:e},n)),n.conversationId&&n.messageId&&n.generationId&&$r("image_view_full",n.conversationId,n.messageId,n.generationId)}),ne(Ss,"inpaintStarted",({analyticsContext:e})=>{We.logEvent("chatgpt_dalle_inpaint_click","click",e),U.logEvent("chatgpt_dalle_inpaint_click",e),We.logEvent("chatgpt_image_inpaint_click",void 0,e),U.logEvent("chatgpt_image_inpaint_click",e)}),ne(Ss,"inpaintClick",({analyticsContext:e})=>{We.logEvent("chatgpt_imagegen_inpaint_click",null,e),U.logEvent("chatgpt_imagegen_inpaint_click",e)}),ne(Ss,"zoom",({zoomType:e,analyticsContext:n})=>{We.logEvent(e==="in"?"chatgpt_image_view_full_zoom_in":"chatgpt_image_view_full_zoom_out",null,{hasParent:n.parentGenerationId?"true":"false"}),U.logEvent(e==="in"?"chatgpt_image_view_full_zoom_in":"chatgpt_image_view_full_zoom_out",B(w({},n),{startMs:performance.now()})),n.conversationId&&n.messageId&&n.generationId&&$r(e==="in"?"image_view_full_zoom_in":"image_view_full_zoom_out",n.conversationId,n.messageId,n.generationId)}),ne(Ss,"download",({analyticsContext:e})=>{We.logEvent("chatgpt_dalle_image_download","click",e),U.logEvent("chatgpt_dalle_image_download",e),We.logEvent("chatgpt_image_download",void 0,e),U.logEvent("chatgpt_image_download",e),e.conversationId&&e.messageId&&e.generationId&&$r("image_download",e.conversationId,e.messageId,e.generationId)}),ne(Ss,"generationSuccess",({analyticsContext:e,durationMs:n})=>{We.logEvent("chatgpt_imagegen_generation_success",n?Math.round(n):void 0),U.logEvent("chatgpt_imagegen_generation_success",B(w({},e),{duration_ms:n}))}),ne(Ss,"generationFailure",({analyticsContext:e,errorReason:n})=>{const s=n?{errorReason:n}:void 0;We.logEvent("chatgpt_imagegen_generation_failure",void 0,s),U.logEvent("chatgpt_imagegen_generation_failure",B(w({},e),{errorReason:n}))});const JGe=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)}),XGe=5,e$e="Default";function t$e(t){const e={};return t.forEach(n=>{var o;const s=(o=n.group)!=null?o:e$e;e[s]||(e[s]=[]),e[s].push(n)}),e}function n$e({tagOptions:t,onSubmit:e,onMoreClicked:n,onCancel:s,maxInlineTags:o=XGe,modalOnly:a=!1,modalTitle:i,multiple:l,children:c,allowEmptySubmit:d=!1}){const u=J(),m=G(),f=ut(m),p=f==null?void 0:f.planType,g=p===Je.FREE||p===Je.GO||p===Je.PLUS||p===Je.PRO,[h,x]=_.useState(a?"modal":"inline"),[y,b]=_.useState([]),[v,S]=_.useState(void 0),C=Y=>y.some(Z=>Z.value===Y),{eligible:k,markAsViewed:M}=$e(Ye.hasSeenInlineFeedbackCustomInstrMessage),T=k?4e3:1500,[E,A]=_.useState(!1),N=at(),R=_.useCallback(Y=>{e(Y),x("submitted");const Z=["Too chatty or casual","Don't like the style"];A(Y.tags.some(Q=>Z.includes(Q.value))),setTimeout(()=>{x("closed"),k&&E&&M()},T)},[e,T,k,M,E]),O=_.useMemo(()=>yr(R,500),[R]),D=Y=>{let Z=[];return l?Z=C(Y.value)?y.filter(Q=>Q!==Y):[...y,Y]:Z=[Y],b(Z),Z},F=Y=>{R({event:Y,tags:y,textFeedback:v,tagChoices:V,source:"modal"})},V=t.map(Y=>Y.value),z=t$e(t),$=Object.keys(z);return r.jsxs(r.Fragment,{children:[!a&&r.jsx(dn,{children:h!=="closed"&&r.jsxs(Xe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[h==="submitted"&&r.jsx(Xe.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:r.jsx("div",{className:"border-token-border-default inline-flex rounded-lg border p-4",children:r.jsx("div",{className:"text-sm",children:k&&E?r.jsx(r.Fragment,{children:r.jsx(P,{id:"ConversationTurnInlineMessageFeedback.customInstructions",defaultMessage:"Thanks! If ChatGPT's style isn't quite right, you can also <link>customize its responses</link>.",values:{link:Y=>r.jsx("span",{onClick:()=>{N("#settings/".concat(Bn.Personalization)),We.logEvent("chatgpt_user_context_inline_feedback_message_clicked"),U.logEvent("User Context Inline Feedback Message Clicked")},className:"text-token-text-primary cursor-pointer font-semibold",children:Y})}})}):r.jsx(P,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(h)&&r.jsxs("div",{className:"border-token-border-default relative mt-2 flex w-full flex-col gap-3 rounded-lg border p-4",children:[r.jsx("button",{className:"absolute end-4 top-4 text-sm font-bold",onClick:()=>{x("closed"),O.cancel(),s==null||s()},children:r.jsx(JGe,{className:"icon text-token-text-secondary hover:text-token-text-primary"})}),r.jsx("div",{className:"text-token-text-secondary text-sm",children:r.jsx(P,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.slice(0,o).map(Y=>r.jsx(ay,{"aria-pressed":C(Y.value),"aria-selected":C(Y.value),$selected:C(Y.value),onClick:Z=>{const Q=D(Y);O({event:Z,tags:Q,tagChoices:V,source:"inline"})},children:Y.label},Y.value)),r.jsx(ay,{onClick:()=>{n==null||n(),O.cancel(),x("modal")},children:r.jsx(P,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),h==="modal"&&r.jsxs(Pt,{type:"success",testId:"modal-inline-feedback",isOpen:!0,className:"max-w-xl",size:"custom",title:i!=null?i:r.jsx(P,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{b([]),x(a?"closed":"inline"),a&&(s==null||s())},showCloseButton:!0,primaryButton:r.jsx(he,{color:"primary",disabled:y.length===0&&!v&&!d,onClick:F,children:r.jsx(P,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[r.jsx("div",{className:"flex flex-col gap-6",children:$.map(Y=>r.jsxs("div",{children:[$.length>1&&r.jsx("div",{className:"mb-3 text-sm font-semibold",children:Y}),r.jsx("div",{className:"flex flex-wrap gap-3",children:z[Y].map(Z=>r.jsx(ay,{$selected:C(Z.value),onClick:()=>D(Z),children:Z.label},Z.value))},Y)]},Y))}),r.jsx(sm,{ariaLabel:u.formatMessage({id:"Z3Ja/T",defaultMessage:"Additional feedback"}),name:"feedback",type:"text",className:"mt-6",placeholder:u.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:v!=null?v:"",onChange:Y=>S(Y.target.value),onPressEnter:(Y,Z)=>F(Z)}),g&&r.jsx("div",{className:"bg-token-main-surface-secondary text-token-text-secondary mt-4 rounded-lg p-3 text-xs",children:r.jsx(P,{id:"n8n3KW",defaultMessage:"Submitting feedback will include this full conversation to help improve ChatGPT, even if 'Improve the model for everyone' is turned off. <link>Learn more</link>",values:{link:Y=>r.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",rel:"noopener noreferrer",className:"text-token-text-secondary underline",children:Y})}})}),c]})]})}var N6;const ay=ct.button(N6||(N6=rt(["\n  rounded-lg border border-token-border-default px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary\n  ","\n"])),({$selected:t})=>t&&"bg-token-text-primary! text-token-main-surface-primary!");function s$e({messageId:t,serverThreadId:e,rating:n,onClose:s}){const o=J(),a=Object.entries(Vq).map(([l,c])=>({label:o.formatMessage(c),value:l})),i=async l=>{var d;const c=a.map(u=>u.value);try{await pe.safePost("/conversation/message_feedback",{requestBody:{message_id:t,conversation_id:e,rating:"thumbsDown",text:(d=l.textFeedback)!=null?d:void 0,tags:l.tags.map(u=>u.value),tag_choices:c},authOption:qt.SendIfAvailable})}catch(u){Oe.addError("Failed to submit ".concat(n," image generation feedback: ").concat(u))}s()};return r.jsx("div",{onClick:l=>l.stopPropagation(),children:r.jsx(n$e,{tagOptions:a,modalOnly:!0,multiple:!0,onSubmit:i})})}const o$e=j(()=>I(()=>import("./mbhfxri3syrb9rbq.js").then(t=>t._),__vite__mapDeps([301,1])),{loading:t=>L(t)}),a$e=j(()=>I(()=>import("./nju52ppu7cxhyzrm.js").then(t=>t._),__vite__mapDeps([141,1])),{loading:t=>L(t)}),r$e=({onOpenChange:t,onDownload:e,triggerClassName:n,iconClassName:s,dropdownClassName:o})=>{const a=J(),i=_.useCallback(()=>{e==null||e()},[e]);return r.jsxs(K.Root,{onOpenChange:t,children:[r.jsx(K.Trigger,{"aria-label":a.formatMessage({id:"imagegen.watermark.dropdownName",defaultMessage:"More Download options"}),className:n,tabIndex:0,children:r.jsx(a$e,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.20))"},className:s})}),r.jsx(K.Portal,{children:r.jsx(K.Content,{className:o,side:"bottom",align:"end",children:r.jsx(K.Item,{className:"py-2",children:r.jsxs("button",{type:"button",onClick:i,className:"row text-token-text-primary flex items-center gap-2",children:[r.jsx(o$e,{}),r.jsxs("div",{className:"ms-2 flex flex-col items-start",children:[r.jsx("span",{className:"font-semibold",children:r.jsx(P,{id:"imagegen.watermark.dropdownLabel",defaultMessage:"Save image"})}),r.jsx("span",{className:"text-token-text-secondary",children:r.jsx(P,{id:"imagegen.watermark.dropdownSecondaryLabel",defaultMessage:"without watermark"})})]})]})})})})]})},i$e=j(()=>I(()=>import("./mtsfsh7z74bmo6ig.js").then(t=>t._),__vite__mapDeps([507,1])),{loading:t=>L(t)}),l$e=j(()=>I(()=>import("./ntuoxtu7ohytvwjv.js").then(t=>t._),__vite__mapDeps([527,1])),{loading:t=>L(t)}),c$e=j(()=>I(()=>import("./f2itj05whsmn3kgs.js").then(t=>t._),__vite__mapDeps([508,1])),{loading:t=>L(t)}),d$e=j(()=>I(()=>import("./kkginmfs5ty8sze2.js").then(t=>t._),__vite__mapDeps([528,1])),{loading:t=>L(t)}),u$e=j(()=>I(()=>import("./ef28lc1b3o54kec9.js").then(t=>t._),__vite__mapDeps([185,1])),{loading:t=>L(t)}),m$e=j(()=>I(()=>import("./mbhfxri3syrb9rbq.js").then(t=>t._),__vite__mapDeps([301,1])),{loading:t=>L(t)});function yE({rightAlign:t=!1,bottomAlign:e=!1,fullWidth:n=!1,justifyBetween:s=!1,alwaysVisible:o=!1,children:a}){const i=_.useRef(null),l=_.useRef(!1),c=bC(),d=hV(),u=_.useCallback(()=>{d&&(l.current||(U.logEvent("Share Post: Share Button Shown",w({source:"image_gen_action_overlay"},c)),l.current=!0))},[c,d]),m=_.useCallback(f=>{f.propertyName==="opacity"&&u()},[u]);return _.useEffect(()=>{o&&u()},[o,u]),r.jsxs("div",{ref:i,onTransitionEnd:m,className:W("absolute z-2 transition-opacity duration-75 ease-out",o?"opacity-100":"opacity-0 group-hover/imagegen-image:opacity-100 group-focus/imagegen-image:opacity-100 focus-within:opacity-100",t?"end-0":"start-0",e?"bottom-0":"top-0",n&&"w-full"),children:[r.jsx("div",{className:W(e?"bg-linear-to-b":"bg-linear-to-t","from-transparent to-black/30","h-20 w-full")}),r.jsx("div",{className:W("absolute inset-0 flex p-1",e?"items-end":"items-start",t?"justify-end":"justify-start",s&&"justify-between"),children:a})]})}function ju({icon:t,children:e,disabled:n,onClick:s,ariaLabel:o,selected:a=!1}){return r.jsxs("button",{"aria-pressed":a,className:W("hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md","z-11 flex h-10 items-center justify-center gap-1 rounded-xl text-sm font-medium text-white",e==null?"w-10":"px-2"),onClick:s,disabled:n,"aria-label":o,children:[r.jsx(t,{style:{filter:"drop-shadow(0px 2px 4px rgba(0, 0, 0, 0.15))"},className:"icon fill-current"}),e]})}function Fp(t){return e=>{e.stopPropagation(),t()}}const f$e=({imageAssetPointer:t,imageUrl:e,messageId:n,clientThreadId:s,serverThreadId:o,shouldShowOverflow:a=!1,showRatingButtons:i=!0})=>{const l=G(),c=KGe(l),d=J(),[u,m]=_.useState(!1),[f,p]=_.useState(null),g=bC(),h=M=>{f==null&&(Ss.imageRated({liked:M,analyticsContext:g}),p(M),M||m(!0))},x=_.useCallback(()=>fPe(d),[d]),y=A1(),b=iP(),v=(b==null?void 0:b.type)===BV.Image&&b.image.asset_pointer===t,[S,C]=_.useState(!1),k=_.useCallback(()=>{t&&(tT({url:t,fileName:x()}),Ss.download({analyticsContext:g}))},[t,x,g]);return r.jsxs(r.Fragment,{children:[y?!v&&r.jsx(yE,{rightAlign:!0,fullWidth:!0,children:r.jsx(ju,{icon:rPe,ariaLabel:d.formatMessage(Pu.expand)})}):r.jsx(r.Fragment,{children:r.jsx(yE,{bottomAlign:!0,rightAlign:!0,fullWidth:!0,alwaysVisible:S,children:r.jsxs("div",{className:"flex w-full items-center justify-between",children:[r.jsxs("div",{className:"flex",children:[i&&f!==!1&&r.jsx(kt,{label:d.formatMessage({id:"U99PVw",defaultMessage:"Like"}),delayDuration:300,children:r.jsx(ju,{icon:f===!0?l$e:i$e,selected:f===!0,onClick:Fp(()=>h(!0)),ariaLabel:d.formatMessage(Pu.thumbsUp),disabled:f===!0})}),i&&f!==!0&&r.jsx(kt,{label:d.formatMessage({id:"ncGqTt",defaultMessage:"Dislike"}),delayDuration:300,children:r.jsx(ju,{icon:f===!1?d$e:c$e,selected:f===!1,onClick:Fp(()=>h(!1)),ariaLabel:d.formatMessage(Pu.thumbsDown),disabled:f===!1})}),e&&r.jsx(kt,{label:d.formatMessage({id:"0EYire",defaultMessage:"Download"}),children:r.jsx(ju,{icon:m$e,ariaLabel:d.formatMessage(Pu.download),onClick:Fp(()=>{tT({url:e,fileName:x()}),Ss.download({analyticsContext:g})})})}),c&&a&&r.jsx(r$e,{onOpenChange:C,onDownload:k,triggerClassName:"z-11 flex h-10 w-10 items-center justify-center rounded-xl bg-transparent hover:bg-token-icon-surface/10 focus:bg-token-icon-surface/10 focus-visible:bg-token-icon-surface/10",iconClassName:"icon-lg fill-transparent text-white",dropdownClassName:"z-11 min-w-fit origin-top-end text-token-text-primary"})]}),r.jsx("div",{className:"flex",children:r.jsx(p$e,{clientThreadId:s,messageId:n})})]})})}),u&&r.jsx(s$e,{messageId:n,serverThreadId:o!=null?o:"",rating:f,onClose:()=>m(!1)})]})};function p$e({clientThreadId:t,messageId:e}){const[n,s]=_.useState(!1),o=J(),a=hV(),i=Ab(),l=yV({clientThreadId:t,imageGenMessageId:e}),c=bC();return!a||i?null:r.jsx(ju,{icon:n?Ws:u$e,disabled:n,onClick:Fp(async()=>{s(!0);try{await l()}finally{s(!1)}Ss.imageShared({analyticsContext:c,source:"image_gen_action_overlay"})}),ariaLabel:o.formatMessage(Pu.share),children:r.jsx(P,{id:"imageGenActionOverlay.shareButton",defaultMessage:"Share"})})}const Pu=be({thumbsUp:{id:"imageGenActionOverlay.thumbsUp",defaultMessage:"Like this image"},thumbsDown:{id:"imageGenActionOverlay.thumbsDown",defaultMessage:"Dislike this image"},inpaint:{id:"imageGenActionOverlay.inpaint",defaultMessage:"Enter inpainting mode"},download:{id:"imageGenActionOverlay.download",defaultMessage:"Download this image"},expand:{id:"imageGenActionOverlay.expand",defaultMessage:"Expand this image"},share:{id:"imageGenActionOverlay.share",defaultMessage:"Share this image"}}),g$e="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzNiIKICBoZWlnaHQ9IjM2IgogIHZpZXdCb3g9IjAgMCAzNiAzNiIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80NjY1XzIzMzApIj4KICAgIDxyZWN0IHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgZmlsbD0id2hpdGUiIC8+CiAgICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9IiMxRTFFMUUiIC8+CiAgICA8cmVjdCB4PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSJibGFjayIgLz4KICAgIDxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjMUUxRTFFIiAvPgogICAgPHJlY3QgeT0iMTgiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgZmlsbD0iYmxhY2siIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF80NjY1XzIzMzAiPgogICAgICA8cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo=",h$e="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIzNiIKICBoZWlnaHQ9IjM2IgogIHZpZXdCb3g9IjAgMCAzNiAzNiIKICBmaWxsPSJub25lIgogIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF80NjY1XzIzMTkpIj4KICAgIDxyZWN0IHdpZHRoPSIzNiIgaGVpZ2h0PSIzNiIgZmlsbD0id2hpdGUiIC8+CiAgICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIGZpbGw9IiNFRkVGRjAiIC8+CiAgICA8cmVjdCB4PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSJ3aGl0ZSIgLz4KICAgIDxyZWN0IHg9IjE4IiB5PSIxOCIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiBmaWxsPSIjRUZFRkYwIiAvPgogICAgPHJlY3QgeT0iMTgiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgZmlsbD0id2hpdGUiIC8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMF80NjY1XzIzMTkiPgogICAgICA8cmVjdCB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIGZpbGw9IndoaXRlIiAvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo=",_$e=()=>{"use forget";const t=H.c(2),e=Zo(),n="url(".concat(e?g$e:h$e,")");let s;return t[0]!==n?(s=r.jsx("div",{className:"absolute inset-0 z-0 w-full overflow-hidden opacity-0 group-hover:opacity-100 group-focus:opacity-100",children:r.jsx("div",{className:"absolute inset-0 bg-auto bg-repeat",style:{backgroundImage:n}})}),t[0]=n,t[1]=s):s=t[1],s},x$e=j(()=>I(()=>import("./gr73ffwzttzymtep.js").then(t=>t._),__vite__mapDeps([406,1])),{loading:t=>L(t)}),y$e=({src:t,thumbnail:e,alt:n,height:s,width:o,isLoaded:a,onLoad:i,onError:l})=>{"use no forget";const c=J(),[d,u]=_.useState(!1);return n!=null||(n=c.formatMessage({id:"xoI74H",defaultMessage:"ChatGPT generated image."})),r.jsxs(r.Fragment,{children:[r.jsx("img",{loading:"lazy",decoding:"async",className:W("absolute inset-0 z-0 aspect-square object-cover transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",!a&&"opacity-0"),onLoad:()=>{i()},onError:()=>{l(),i()},alt:n,src:t,width:o,height:s}),e&&e!==t&&r.jsx("img",{loading:"lazy",decoding:"async",alt:n,src:e,className:W("absolute inset-0 z-1 h-full w-full object-cover blur-sm transition-opacity delay-100 duration-300 ease-[cubic-bezier(.24,.1,.42,.91)]",d&&!a?"opacity-100":"opacity-0"),onLoad:()=>u(!0),width:o,height:s}),a&&r.jsx(_$e,{})]})},v$e=t=>!("isPlaceholder"in t)||!t.isPlaceholder,vE=t=>{"use forget";const e=H.c(21),[n,s]=_.useState(!1),[o,a]=_.useState(!1),{index:i,onClick:l}=t;let c;e[0]!==t?(c=v$e(t),e[0]=t,e[1]=c):c=e[1];const d=!c;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=W("group/imagegen-image bg-tertiary relative z-0 flex aspect-square items-center justify-center overflow-clip text-xs"),e[2]=u):u=e[2];let m;e[3]!==i||e[4]!==l||e[5]!==d?(m=()=>{d||l==null||l(i)},e[3]=i,e[4]=l,e[5]=d,e[6]=m):m=e[6];const f=d?void 0:"button",p=d?!0:void 0;let g;e[7]!==n||e[8]!==d||e[9]!==t?(g=d?r.jsx("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:r.jsx("div",{className:"bg-token-bg-tertiary h-full w-full animate-pulse"})}):r.jsxs(r.Fragment,{children:[!n&&r.jsx("div",{className:"bg-token-bg-tertiary absolute inset-0 z-0 animate-pulse"}),r.jsx(y$e,B(w({},t),{isLoaded:n,onLoad:()=>s(!0),onError:()=>a(!0)}))]}),e[7]=n,e[8]=d,e[9]=t,e[10]=g):g=e[10];let h;e[11]!==o||e[12]!==d?(h=o&&!d&&r.jsx(x$e,{className:"text-token-text-tertiary absolute z-0 h-12 w-12 text-red-500"}),e[11]=o,e[12]=d,e[13]=h):h=e[13];let x;return e[14]!==t.children||e[15]!==m||e[16]!==f||e[17]!==p||e[18]!==g||e[19]!==h?(x=r.jsxs("div",{className:u,onClick:m,role:f,"aria-hidden":p,children:[g,h,t.children]}),e[14]=t.children,e[15]=m,e[16]=f,e[17]=p,e[18]=g,e[19]=h,e[20]=x):x=e[20],x},b$e=({onScrollToEnd:t})=>{const e=_.useRef(null);return _.useEffect(()=>{if(!e.current)return;const n=new IntersectionObserver(s=>{s[0].isIntersecting&&t()});return n.observe(e.current),()=>n.disconnect()},[t]),r.jsx("div",{className:"absolute",ref:e})},S$e=["recent","images","bootstrap"],UV=10,VV=25,C$e=20,w$e=(t,e)=>({queryKey:["recent","images",t,e],initialPageParam:null,staleTime:120*1e3,queryFn:({pageParam:n})=>{const s=We.checkGate("1057463568"),o=s?"/my/recent/v2/image_gen":"/my/recent/image_gen",a=n==null?t?UV:VV:C$e,i=w({limit:a,after:n},s?{retrieve_archived:e||void 0}:{include_archived:e||void 0});return pe.safeGet(o,{parameters:{query:i}})},getNextPageParam:({cursor:n})=>n}),GV=()=>({queryKey:S$e,refetchOnMount:"always",enabled:()=>!0,queryFn:()=>pe.safeGet("/images/bootstrap",{})}),wot=t=>t.fetchQuery(GV()),kot=()=>{"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=GV(),t[0]=e):e=t[0],lt(e)};function bE({queryClient:t,includeArchived:e,isMobile:n,imageId:s,operation:o}){t.setQueryData(["recent","images",n,e],a=>a&&B(w({},a),{pages:a.pages.map(i=>{let l=i.items.map(c=>c.id===s?B(w({},c),{is_archived:o==="archive"}):c);return o==="archive"&&!e&&(l=l.filter(c=>c.id!==s)),B(w({},i),{items:l})})}))}const k$e=()=>{"use forget";const t=H.c(7),e=G(),n=!Yo();let s;t[0]!==e?(s=Qo(e),t[0]=e,t[1]=s):s=t[1];const o=s;let a;t[2]!==n||t[3]!==o?(a={mutationFn:T$e,onMutate:async c=>{const{imageId:d,operation:u}=c;await Promise.all([o.cancelQueries({queryKey:["recent","images",n,!1]}),o.cancelQueries({queryKey:["recent","images",n,!0]})]);const m=o.getQueryData(["recent","images",n,!1]),f=o.getQueryData(["recent","images",n,!0]);return bE({queryClient:o,includeArchived:!1,isMobile:n,imageId:d,operation:u}),bE({queryClient:o,includeArchived:!0,isMobile:n,imageId:d,operation:u}),{recentImagesUnarchived:m,recentImagesArchived:f}},onError:(c,d,u)=>{const{recentImagesUnarchived:m,recentImagesArchived:f}=u!=null?u:{};o.setQueryData(["recent","images",n,!1],m),o.setQueryData(["recent","images",n,!0],f)},onSuccess:(c,d)=>{const{operation:u}=d;u==="unarchive"&&o.invalidateQueries({queryKey:["recent","images",n,!1]})}},t[2]=n,t[3]=o,t[4]=a):a=t[4];const i=Bt(a);let l;return t[5]!==i?(l={archiveMutation:i},t[5]=i,t[6]=l):l=t[6],l},M$e=(t,e)=>{"use forget";var b;const n=H.c(13),s=t===void 0?!1:t,o=e===void 0?"all":e,a=!Yo(),i=s||o!=="unarchived";let l;n[0]!==a||n[1]!==i?(l=w$e(a,i),n[0]=a,n[1]=i,n[2]=l):l=n[2];const c=l,{data:d,refetch:u,fetchNextPage:m,hasNextPage:f,isLoading:p,isFetchingNextPage:g}=vi(c);let h;if(n[3]!==(d==null?void 0:d.pages)||n[4]!==o){e:{const v=(b=d==null?void 0:d.pages.flatMap(E$e).map(A$e))!=null?b:[];if(o==="archived"){h=v.filter(I$e);break e}if(o==="unarchived"){h=v.filter(j$e);break e}h=v}n[3]=d==null?void 0:d.pages,n[4]=o,n[5]=h}else h=n[5];const x=h;let y;return n[6]!==m||n[7]!==f||n[8]!==x||n[9]!==g||n[10]!==p||n[11]!==u?(y={refetch:u,images:x,isLoading:p,isFetchingNextPage:g,hasNextPage:f,fetchNextPage:m},n[6]=m,n[7]=f,n[8]=x,n[9]=g,n[10]=p,n[11]=u,n[12]=y):y=n[12],y};function T$e(t){const{imageId:e,operation:n}=t;return pe.safePatch("/my/image/{gen_id}/".concat(n),{parameters:{path:{gen_id:e}}})}function E$e(t){return t.items}function A$e(t){var e,n,s,o,a,i,l,c;return B(w({},t),{archived:(e=t.is_archived)!=null?e:!1,id:t.id,messageId:(n=t.message_id)!=null?n:null,transformationId:(s=t.transformation_id)!=null?s:null,assetPointer:(o=t.asset_pointer)!=null?o:null,createdAt:t.created_at?new Date(t.created_at*1e3):void 0,conversationId:(a=t.conversation_id)!=null?a:void 0,thumbnail:(c=(l=(i=t.encodings)==null?void 0:i.thumbnail)==null?void 0:l.path)!=null?c:null})}function I$e(t){return t.archived}function j$e(t){return!t.archived}const P$e=j(()=>I(()=>import("./kaxn2bizrxslkpa3.js").then(t=>t._),__vite__mapDeps([18,1])),{loading:t=>L(t)}),N$e=j(()=>I(()=>import("./ijwos19b21syb4e3.js"),__vite__mapDeps([534,1,29,30,535,536,522,367,365,339,368,369])).then(t=>t.ImageGenLibraryLightboxNew)),R$e=t=>{"use forget";var T;const e=H.c(32),{conversation:n,hasMoreImages:s,count:o,images:a,includeArchived:i,isHiddenView:l,onUnhide:c,isFetchingMore:d,onScrollToEnd:u}=t,m=l===void 0?!1:l,f=G(),p=J(),h=!Yo()?UV:VV,x=d?Math.max(o!=null?o:0,h):s?Math.max((o!=null?o:0)-((T=a.length)!=null?T:0),0):0;let y;e[0]!==n||e[1]!==f||e[2]!==i||e[3]!==m?(y=E=>{U.logEventWithStatsig("chatgpt_web_image_library_lightbox_opened","chatgpt_web_image_library_lightbox_opened");const A=hn(()=>wn(n).id);gt(f,N$e,{initialIndex:E,includeArchived:i,visibilityFilter:m?"archived":"unarchived",clientThreadId:n.id,currentModelId:A})},e[0]=n,e[1]=f,e[2]=i,e[3]=m,e[4]=y):y=e[4];const b=y;let v;if(e[5]!==a||e[6]!==p||e[7]!==m||e[8]!==u||e[9]!==c||e[10]!==b||e[11]!==x){let E;e[13]!==a.length||e[14]!==p||e[15]!==m||e[16]!==u||e[17]!==c||e[18]!==b?(E=(N,R)=>{const{id:O,url:D,thumbnail:F,width:V,height:z,title:$,assetPointer:Y,conversationId:Z,messageId:Q}=N,q=$===void 0?null:$;return r.jsxs(vE,{index:R,src:hs(F!=null?F:D),onClick:()=>b(R),thumbnail:hs(F),width:V,height:z,alt:q,children:[!m&&Z!=null&&Q!=null&&r.jsx(f$e,{imageAssetPointer:Y!=null?Y:void 0,imageUrl:D!=null?D:void 0,clientThreadId:Z,serverThreadId:Z,messageId:Q,showRatingButtons:!1}),m&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pointer-events-none absolute inset-0 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:r.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 bg-linear-to-b from-transparent to-black/30"})}),r.jsx("div",{className:"absolute end-1 bottom-1 z-20 opacity-0 transition-opacity group-hover/imagegen-image:opacity-100",children:r.jsxs("button",{className:"z-11 flex h-10 items-center gap-1 rounded-xl px-2 text-sm font-medium text-white hover:bg-white/15 hover:backdrop-blur-md focus:bg-white/15 focus:backdrop-blur-md",onClick:X=>{X.stopPropagation(),c==null||c(O)},"aria-label":p.formatMessage({id:"fjXWf2",defaultMessage:"Unhide image"}),children:[r.jsx(P$e,{className:"h-4 w-4"}),r.jsx("span",{className:"max-md:hidden",children:r.jsx(P,{id:"wEyKC9",defaultMessage:"Unhide"})})]})})]}),R===a.length-1&&r.jsx(b$e,{onScrollToEnd:u})]},O)},e[13]=a.length,e[14]=p,e[15]=m,e[16]=u,e[17]=c,e[18]=b,e[19]=E):E=e[19];let A;e[20]!==a.length?(A=(N,R)=>{const O=a.length+R;return r.jsx(vE,{index:O,isPlaceholder:!0},O)},e[20]=a.length,e[21]=A):A=e[21],v=a.map(E).concat(new Array(x).fill(null).map(A)),e[5]=a,e[6]=p,e[7]=m,e[8]=u,e[9]=c,e[10]=b,e[11]=x,e[12]=v}else v=e[12];let S;e[22]!==v?(S=r.jsx("div",{className:"grid min-h-60 w-full grid-cols-2 gap-1 max-md:gap-0.5 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-6",children:v}),e[22]=v,e[23]=S):S=e[23];let C;e[24]!==s||e[25]!==d?(C=s&&d&&r.jsx(Ws,{}),e[24]=s,e[25]=d,e[26]=C):C=e[26];let k;e[27]!==C?(k=r.jsx("div",{className:"flex h-8 items-center justify-center",children:C}),e[27]=C,e[28]=k):k=e[28];let M;return e[29]!==S||e[30]!==k?(M=r.jsxs("div",{className:"w-full",children:[S,k]}),e[29]=S,e[30]=k,e[31]=M):M=e[31],M};j(()=>I(()=>import("./ceivmd4pm4umbvdn.js").then(t=>t._),__vite__mapDeps([139,1])),{loading:t=>L(t)});j(()=>I(()=>import("./kaxn2bizrxslkpa3.js").then(t=>t._),__vite__mapDeps([18,1])),{loading:t=>L(t)});const L$e=j(()=>I(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([29,1,30])),{loading:t=>L(t)});function Mot(t){"use forget";const e=H.c(38),{conversation:n,onClose:s}=t,{images:o,hasNextPage:a,fetchNextPage:i,isFetchingNextPage:l,isLoading:c}=M$e(!0,"archived"),{archiveMutation:d}=k$e(),[u,m]=_.useState(!1),f=J();let p;e[0]!==d?(p=async F=>{await Promise.all(F.map(V=>d.mutateAsync({imageId:V,operation:"unarchive"})))},e[0]=d,e[1]=p):p=e[1];const g=p;let h;e[2]!==g||e[3]!==o?(h=async()=>{o.length&&(m(!0),await g(o.map(O$e)),m(!1))},e[2]=g,e[3]=o,e[4]=h):h=e[4];const x=h;let y;e[5]!==f?(y=f.formatMessage({id:"awwvCt",defaultMessage:"Close"}),e[5]=f,e[6]=y):y=e[6];let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=r.jsx(L$e,{className:"h-5 w-5"}),e[7]=b):b=e[7];let v;e[8]!==s||e[9]!==y?(v=r.jsx("button",{type:"button","aria-label":y,onClick:s,className:"flex items-center justify-center p-1",children:b}),e[8]=s,e[9]=y,e[10]=v):v=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=r.jsx("h1",{className:"px-2 text-lg font-normal select-none [text-box-trim:trim-both]",children:r.jsx(P,{id:"pvfc+c",defaultMessage:"Hidden"})}),e[11]=S):S=e[11];let C;e[12]!==v?(C=r.jsxs("div",{className:"flex items-center gap-1",children:[v,S]}),e[12]=v,e[13]=C):C=e[13];let k;e[14]!==x?(k=!1,e[14]=x,e[15]=k):k=e[15];let M;e[16]!==C||e[17]!==k?(M=r.jsxs("header",{"data-landing-page-load-target":!0,className:"h-header-height bg-token-bg-primary sticky top-0 z-20 flex w-full items-center justify-between px-3 py-3",children:[C,k]}),e[16]=C,e[17]=k,e[18]=M):M=e[18];let T;e[19]!==g?(T=F=>g([F]),e[19]=g,e[20]=T):T=e[20];const E=a!=null?a:!1,A=l||c;let N;e[21]!==n||e[22]!==i||e[23]!==o||e[24]!==T||e[25]!==E||e[26]!==A?(N=r.jsx(R$e,{conversation:n,images:o,count:o.length,includeArchived:!0,isHiddenView:!0,onUnhide:T,hasMoreImages:E,isFetchingMore:A,onScrollToEnd:i}),e[21]=n,e[22]=i,e[23]=o,e[24]=T,e[25]=E,e[26]=A,e[27]=N):N=e[27];let R;e[28]!==u||e[29]!==o.length||e[30]!==c?(R=o.length===0&&!u&&!c&&r.jsx("p",{className:"text-token-text-secondary py-8 text-center",children:r.jsx(P,{id:"BdZGOW",defaultMessage:"No hidden images"})}),e[28]=u,e[29]=o.length,e[30]=c,e[31]=R):R=e[31];let O;e[32]!==N||e[33]!==R?(O=r.jsxs("div",{className:"w-full max-w-[1800px]",children:[N,R]}),e[32]=N,e[33]=R,e[34]=O):O=e[34];let D;return e[35]!==O||e[36]!==M?(D=r.jsxs("div",{className:"max-md:bg-token-bg-primary flex w-full flex-col items-center max-md:fixed max-md:inset-0 max-md:z-50 max-md:overflow-y-auto",children:[M,O]}),e[35]=O,e[36]=M,e[37]=D):D=e[37],D}function O$e(t){return t.id}let gu=null;function D$e(){return gu||(gu=document.createElement("div"),gu.setAttribute("portal-container",""),document.body.append(gu)),gu||null}function Tot(t){const{children:e}=t,n=D$e();return n&&L6.createPortal(e,n)}const Eot=t=>{"use forget";const e=H.c(6),{borderless:n}=t,s=!n&&"border";let o;e[0]!==s?(o=W("flex h-full w-full flex-col items-center justify-center gap-2 rounded-xl p-8",s),e[0]=s,e[1]=o):o=e[1];let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=r.jsx("div",{className:"text-token-text-secondary -mt-[100px] text-xl",children:r.jsx(P,{id:"D9mM+/",defaultMessage:"Visualize anything, find it here"})}),e[2]=a):a=e[2];let i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=r.jsx("div",{className:"text-token-text-tertiary text-center text-base text-balance",children:r.jsx(P,{id:"fnxt50",defaultMessage:"Ask ChatGPT to turn any idea into an image, diagram, or visual."})}),e[3]=i):i=e[3];let l;return e[4]!==o?(l=r.jsxs("div",{className:o,children:[a,i]}),e[4]=o,e[5]=l):l=e[5],l},SE="chatgpt_library_last_tab";function Aot(t,e){var i;const[n]=zs(),s=ls(),o=at(),a=(i=n.get("tab"))!=null?i:"images";_.useEffect(()=>{if(!e)return;const l=n.get("tab");if(!(!!l&&t.includes(l)))try{if(typeof window<"u"){const d=window.localStorage.getItem(SE),u=d&&t.includes(d)?d:"images",m=new URLSearchParams(s.search);m.set("tab",u),o({pathname:s.pathname,search:m.toString(),hash:s.hash},{replace:!0})}}catch(d){}},[e,a,t,o,s,n]),_.useEffect(()=>{if(e)try{typeof window<"u"&&t.includes(a)&&window.localStorage.setItem(SE,a)}catch(l){}},[e,a,t])}function Iot(t){"use forget";const e=H.c(2);if(TD(t)&&t){let s;return e[0]!==t?(s=r.jsx(MD,{threadId:t}),e[0]=t,e[1]=s):s=e[1],s}return null}function jot(t){"use forget";const e=H.c(7),{clientThreadId:n}=t;let s,o;e[0]!==n?(s=()=>{yn.closeSharingModal(),qe(n,F$e)},o=[n],e[0]=n,e[1]=s,e[2]=o):(s=e[1],o=e[2]),_.useEffect(s,o);const a=xt();let i,l;e[3]!==a||e[4]!==n?(i=()=>(hr.retainThread(n),()=>{setTimeout(()=>{a.invalidateQueries(l1({clientThreadId:n}))},0),hr.releaseThread(n)}),l=[n,a],e[3]=a,e[4]=n,e[5]=i,e[6]=l):(i=e[5],l=e[6]),_.useEffect(i,l)}function F$e(t){t.scrollToMessageId="finalAgentTurn"}function Pot(t){"use forget";const e=H.c(3),n=Sh();let s;e[0]!==n?(s=n?{kind:Tt.GizmoInteraction,gizmo_id:n}:{kind:Tt.PrimaryAssistant},e[0]=n,e[1]=s):s=e[1];const o=s;let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a={shouldScrollToBottom:!0},e[2]=a):a=e[2],Z2e(t,o,a)}function Not({clientThreadId:t}){return n_.useCurrentImage()?r.jsx(B$e,{clientThreadId:t}):null}const B$e=j(()=>I(()=>import("./f2nizyutacfhjly3.js"),__vite__mapDeps([537,1,29,30,409,50,536,538])).then(t=>t.ImageLightbox));function Rot(){const t=ZC(n=>n.liveRegionAssertive),e=ZC(n=>n.liveRegionPolite);return r.jsxs(r.Fragment,{children:[r.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",id:"live-region-assertive",children:t}),r.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"live-region-polite",children:e})]})}function Lot(t){"use forget";var S;const e=H.c(26),{clientThreadId:n}=t,s=G(),o=ls(),a=at(),[i,l]=Ue(n,U$e),c=Xn(n);let d;e[0]!==l?(d=l!=null&&$s(l),e[0]=l,e[1]=d):d=e[1];const u=d,{data:m}=Gq(u?l:void 0),f=m==null?void 0:m.gizmo;let p;e[2]!==s?(p=(S=ut(s))==null?void 0:S.normalizedAccountUserId,e[2]=s,e[3]=p):p=e[3];const g=p;let h;e[4]!==o.pathname?(h=o.pathname.includes("/shared/"),e[4]=o.pathname,e[5]=h):h=e[5];const x=h;let y;e[6]!==g||e[7]!==x||e[8]!==u||e[9]!==o.pathname||e[10]!==o.search||e[11]!==a||e[12]!==f||e[13]!==c||e[14]!==i?(y=()=>{if(!u||x||!c||!f||(i==null?void 0:i.id)==null||g==null||i.id===g)return;const C=pa(c,{project:f,ownerUserId:i.id,accountUserId:g}),k="".concat(o.pathname).concat(o.search);C!==k&&a(C,{replace:!0})},e[6]=g,e[7]=x,e[8]=u,e[9]=o.pathname,e[10]=o.search,e[11]=a,e[12]=f,e[13]=c,e[14]=i,e[15]=y):y=e[15];const b=i==null?void 0:i.id;let v;return e[16]!==g||e[17]!==x||e[18]!==u||e[19]!==o.pathname||e[20]!==o.search||e[21]!==a||e[22]!==f||e[23]!==c||e[24]!==b?(v=[g,x,u,o.pathname,o.search,a,f,c,b],e[16]=g,e[17]=x,e[18]=u,e[19]=o.pathname,e[20]=o.search,e[21]=a,e[22]=f,e[23]=c,e[24]=b,e[25]=v):v=e[25],_.useEffect(y,v),null}function U$e(t){return[t==null?void 0:t.sharedProjectConversationOwner,me.getGizmoId(t)]}function Oot(){"use forget";const t=H.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=r.jsx("a",{"data-skip-to-content":"",className:"bg-token-main-surface-primary fixed start-1/2 top-1 z-50 mx-auto w-fit -translate-x-1/2 translate-y-[-100lvh] rounded-full px-3 py-2 focus-visible:translate-y-0",href:"#main",children:r.jsx(P,{id:"thread.skipToContent",defaultMessage:"Skip to content"})}),t[0]=e):e=t[0],e}function Dot(){"use forget";const t=H.c(6),e=G();let n;t[0]!==e?(n=pt(e),t[0]=e,t[1]=n):n=t[1];const s=n;let o,a;t[2]!==e||t[3]!==s?(o=()=>{if(!s)return;const i=Qn.getCookie(Jn.AuthSessionLoggingId);if(i==null)return;const{flowType:l,connectionType:c}=V$e(e);U.logStructuredEvent($q,{authSessionLoggingId:i,flowType:l,connectionType:c}),Qn.deleteCookie(Jn.AuthSessionLoggingId)},a=[s,e],t[2]=e,t[3]=s,t[4]=o,t[5]=a):(o=t[4],a=t[5]),_.useEffect(o,a)}function V$e(t){const{isSignup:e,connectionType:n}=t7(t);return{flowType:e?KC.ACCESS_FLOW_TYPE_SIGNUP:KC.ACCESS_FLOW_TYPE_LOGIN,connectionType:G$e(n)}}function G$e(t){switch(t){case Ql.Google:return Ni.ACCESS_FLOW_CONNECTION_TYPE_GOOGLE;case Ql.Password:return Ni.ACCESS_FLOW_CONNECTION_TYPE_PASSWORD;case Ql.Apple:return Ni.ACCESS_FLOW_CONNECTION_TYPE_APPLE;case Ql.Microsoft:return Ni.ACCESS_FLOW_CONNECTION_TYPE_MICROSOFT;case Ql.Samlp:return Ni.ACCESS_FLOW_CONNECTION_TYPE_SAMLP;case Ql.Oidc:return Ni.ACCESS_FLOW_CONNECTION_TYPE_OIDC;default:return Ni.ACCESS_FLOW_CONNECTION_TYPE_UNSPECIFIED}}function Fot(){"use forget";const t=H.c(12),e=G();let n;t[0]!==e?(n=pt(e),t[0]=e,t[1]=n):n=t[1];const s=n,o=pn(),{accountInfo:a}=$$e();let i;t[2]!==(a==null?void 0:a.isOptedOut)||t[3]!==e||t[4]!==s||t[5]!==o?(i=()=>{var u;if(!o||!s)return;if(!o.email&&!o.phone_number){Oe.addError(new Error("User should have either email or phone number, but none are present: ".concat(JSON.stringify(o))));return}if(a!=null&&a.isOptedOut)return;const c=o.email?{email:o.email}:{phoneNumber:(u=o.phone_number)!=null?u:""},d={user:B(w({name:o.name},c),{picture:o.picture,connectionType:t7(e).connectionType,timestamp:Date.now()}),isOptedOut:!1};$V(d)},t[2]=a==null?void 0:a.isOptedOut,t[3]=e,t[4]=s,t[5]=o,t[6]=i):i=t[6];let l;t[7]!==a||t[8]!==e||t[9]!==s||t[10]!==o?(l=[o,s,a,e],t[7]=a,t[8]=e,t[9]=s,t[10]=o,t[11]=l):l=t[11],_.useEffect(i,l)}function $$e(){"use no forget";const[t,e]=_.useState(()=>Qn.getCookie(Jn.AccountInfo)),n=_.useMemo(()=>{if(!t)return null;try{return JSON.parse(t)}catch(o){return null}},[t]),s=_.useCallback(()=>{n&&(n.isOptedOut=!0,n.user=void 0,$V(n),e(void 0))},[n]);return{accountInfo:n,removeAccount:s}}function $V(t){Qn.setCookie(Jn.AccountInfo,JSON.stringify(t),{maxAge:720*60*60})}function Bot(t,e,n){var a;if(((a=t.getQueryState(e))==null?void 0:a.status)==="success")return n(),()=>{};const s=Hq(e),o=t.getQueryCache().subscribe(i=>{i.query.queryHash===s&&i.query.state.status==="success"&&(n(),o())});return o}export{qKe as $,Rye as A,Kp as B,cl as C,MR as D,Ir as E,WZe as F,_Ke as G,VZe as H,OHe as I,xKe as J,KKe as K,er as L,gKe as M,wKe as N,TKe as O,_a as P,EKe as Q,LHe as R,C1 as S,XZe as T,_y as U,nHe as V,hKe as W,RKe as X,QKe as Y,HKe as Z,Fet as _,Z2e as a,TIe as a$,ZKe as a0,JKe as a1,PKe as a2,NKe as a3,jKe as a4,IKe as a5,AKe as a6,pZe as a7,YKe as a8,fZe as a9,Aet as aA,VYe as aB,ze as aC,On as aD,Gtt as aE,e3 as aF,UX as aG,mn as aH,ES as aI,hHe as aJ,gHe as aK,EPe as aL,Vze as aM,Uze as aN,Gze as aO,yn as aP,Zc as aQ,gn as aR,$e as aS,Ye as aT,HXe as aU,Htt as aV,Rtt as aW,Ntt as aX,Ltt as aY,iX as aZ,Rp as a_,pye as aa,$S as ab,rbe as ac,Tye as ad,Ta as ae,Hqe as af,E8 as ag,kp as ah,Gt as ai,Swe as aj,Rqe as ak,kle as al,dwe as am,SP as an,Qj as ao,_S as ap,IQe as aq,O8 as ar,Gle as as,jQe as at,Det as au,FQe as av,DQe as aw,Let as ax,jr as ay,T0e as az,hP as b,Yn as b$,MIe as b0,yS as b1,MHe as b2,kHe as b3,_7 as b4,yY as b5,xY as b6,vY as b7,zZe as b8,THe as b9,Nqe as bA,mle as bB,eze as bC,Uqe as bD,Gqe as bE,T8 as bF,Rs as bG,stt as bH,KD as bI,ZD as bJ,dN as bK,gxe as bL,Hk as bM,cst as bN,eo as bO,Qy as bP,Ai as bQ,qse as bR,Qse as bS,p1e as bT,Ts as bU,Ra as bV,FP as bW,Sst as bX,hi as bY,uhe as bZ,Hs as b_,Og as ba,jYe as bb,IXe as bc,F8 as bd,Tst as be,ki as bf,Vm as bg,HI as bh,WI as bi,lS as bj,W1 as bk,xqe as bl,OQe as bm,N2 as bn,Fm as bo,$$e as bp,eP as bq,$We as br,Nd as bs,BWe as bt,OZe as bu,pO as bv,Wd as bw,pU as bx,Oqe as by,Dqe as bz,rqe as c,n7 as c$,GKe as c0,VKe as c1,UKe as c2,vbe as c3,sV as c4,x1 as c5,v1 as c6,qm as c7,y1 as c8,c4 as c9,hM as cA,Eze as cB,Mze as cC,YZ as cD,oF as cE,DGe as cF,VNe as cG,oXe as cH,Dt as cI,Fke as cJ,ni as cK,Jc as cL,Nze as cM,Pze as cN,jze as cO,Ize as cP,goe as cQ,X2 as cR,Mi as cS,Ti as cT,dm as cU,Lc as cV,Bs as cW,Lnt as cX,PR as cY,nPe as cZ,BV as c_,AX as ca,M1 as cb,Cje as cc,KS as cd,r3 as ce,ive as cf,k5 as cg,FKe as ch,n_ as ci,MN as cj,hve as ck,Ist as cl,Zle as cm,qd as cn,Xtt as co,tnt as cp,TZe as cq,eV as cr,aV as cs,kXe as ct,MXe as cu,xS as cv,Jtt as cw,fC as cx,Kbe as cy,cv as cz,dtt as d,pZ as d$,Yle as d0,gV as d1,k$e as d2,A7e as d3,M$e as d4,Er as d5,g1 as d6,tT as d7,yHe as d8,OL as d9,_Je as dA,hYe as dB,Cue as dC,pJe as dD,xv as dE,Xt as dF,q5e as dG,x0 as dH,gYe as dI,pYe as dJ,ro as dK,gJe as dL,Bm as dM,w_ as dN,jtt as dO,oPe as dP,aPe as dQ,s$e as dR,fPe as dS,Ss as dT,Cot as dU,rg as dV,rj as dW,um as dX,Lqe as dY,Est as dZ,o7 as d_,SY as da,X7e as db,n$e as dc,sC as dd,Snt as de,Not as df,bV as dg,id as dh,qZ as di,dI as dj,eWe as dk,wK as dl,vK as dm,zqe as dn,Ume as dp,A7 as dq,vy as dr,yZ as ds,MS as dt,TS as du,Aqe as dv,_le as dw,Qde as dx,mqe as dy,fre as dz,Y2e as e,Mpe as e$,ps as e0,IHe as e1,jHe as e2,JHe as e3,FHe as e4,DHe as e5,BHe as e6,QHe as e7,UHe as e8,zYe as e9,tqe as eA,Qqe as eB,AS as eC,AYe as eD,TZ as eE,Sde as eF,RYe as eG,wue as eH,k1 as eI,K8 as eJ,wYe as eK,CN as eL,TYe as eM,i1 as eN,jZe as eO,LYe as eP,Rce as eQ,qj as eR,YYe as eS,f1e as eT,tZe as eU,rZe as eV,EZe as eW,SZe as eX,che as eY,PZe as eZ,NZe as e_,LZe as ea,qYe as eb,she as ec,W5 as ed,wpe as ee,xde as ef,zle as eg,uqe as eh,cqe as ei,GYe as ej,HZe as ek,dqe as el,lqe as em,yde as en,Z8 as eo,GZe as ep,wWe as eq,NWe as er,ZZ as es,Yme as et,Y8 as eu,Xqe as ev,Sue as ew,PHe as ex,eqe as ey,DYe as ez,rze as f,HJe as f$,uZe as f0,iZe as f1,MZe as f2,CZe as f3,wZe as f4,sZe as f5,mZe as f6,AZe as f7,GS as f8,KYe as f9,Tot as fA,I7e as fB,aot as fC,Aot as fD,rot as fE,iot as fF,Dtt as fG,Vtt as fH,_et as fI,zwe as fJ,Sot as fK,itt as fL,Utt as fM,jot as fN,Pot as fO,qqe as fP,Iot as fQ,xot as fR,Ftt as fS,Btt as fT,Ea as fU,Hm as fV,gtt as fW,mtt as fX,vtt as fY,Ctt as fZ,t6e as f_,QYe as fa,JYe as fb,kg as fc,lr as fd,mm as fe,H8 as ff,JZe as fg,Rg as fh,QZe as fi,B5 as fj,LKe as fk,Kqe as fl,cQe as fm,AQe as fn,V1 as fo,twe as fp,_D as fq,bD as fr,Pce as fs,r1 as ft,bQe as fu,GO as fv,kot as fw,Mot as fx,Eot as fy,R$e as fz,l1 as g,Qm as g$,jJ as g0,Mfe as g1,nQe as g2,sQe as g3,to as g4,Jm as g5,iS as g6,hst as g7,lT as g8,yNe as g9,bTe as gA,OTe as gB,y6e as gC,FMe as gD,jMe as gE,GMe as gF,HMe as gG,qMe as gH,il as gI,wet as gJ,Hl as gK,sd as gL,Z1 as gM,Aze as gN,II as gO,qK as gP,MYe as gQ,E3 as gR,fYe as gS,gI as gT,WWe as gU,cO as gV,Yh as gW,Vd as gX,C3 as gY,S3 as gZ,Xh as g_,pce as ga,pWe as gb,Fbe as gc,wbe as gd,w2 as ge,Ak as gf,qP as gg,Qle as gh,k2 as gi,Tv as gj,CR as gk,A1 as gl,DKe as gm,hR as gn,wR as go,UZe as gp,BZe as gq,pbe as gr,FZe as gs,c2e as gt,e1 as gu,pc as gv,gve as gw,Iie as gx,gqe as gy,sze as gz,ka as h,ofe as h$,vqe as h0,fS as h1,ole as h2,hg as h3,uS as h4,Um as h5,I1 as h6,bR as h7,_U as h8,Hu as h9,pQe as hA,gQe as hB,Lst as hC,jXe as hD,zMe as hE,UUe as hF,Mst as hG,dV as hH,nze as hI,Cst as hJ,uV as hK,wst as hL,Dst as hM,Rst as hN,Bst as hO,Nst as hP,yV as hQ,Fst as hR,jst as hS,A4e as hT,DS as hU,lZe as hV,nnt as hW,Zze as hX,tve as hY,bot as hZ,NHe as h_,Zx as ha,_Xe as hb,cot as hc,Vs as hd,Nr as he,hXe as hf,tl as hg,RZe as hh,xZ as hi,yC as hj,Tx as hk,sHe as hl,oHe as hm,YK as hn,xQe as ho,_Qe as hp,hQe as hq,fQe as hr,mQe as hs,kM as ht,uQe as hu,RSe as hv,LSe as hw,dQe as hx,yQe as hy,vQe as hz,cae as i,Oze as i$,Dl as i0,h7 as i1,qY as i2,pst as i3,mst as i4,Lie as i5,hqe as i6,pS as i7,CP as i8,yje as i9,NS as iA,tze as iB,ZJ as iC,Fqe as iD,y7e as iE,_R as iF,ui as iG,fqe as iH,Ble as iI,Za as iJ,Kze as iK,Ptt as iL,rd as iM,jV as iN,Qv as iO,z1 as iP,U2 as iQ,MUe as iR,TI as iS,a7 as iT,HWe as iU,Bze as iV,Eoe as iW,$ze as iX,Hze as iY,tWe as iZ,zze as i_,_re as ia,JJe as ib,zY as ic,oP as id,qr as ie,rv as ig,td as ih,m_e as ii,gTe as ij,DF as ik,iP as il,rPe as im,pTe as io,kKe as ip,Ms as iq,Vye as ir,oee as is,ta as it,hl as iu,SKe as iv,YX as iw,Ave as ix,Sve as iy,ZX as iz,vHe as j,im as j$,AQ as j0,MQ as j1,xQ as j2,ZK as j3,wQ as j4,joe as j5,VWe as j6,eQ as j7,kWe as j8,rWe as j9,uWe as jA,Fze as jB,CWe as jC,cWe as jD,Wh as jE,FYe as jF,UYe as jG,Ohe as jH,tPe as jI,pP as jJ,Dje as jK,ptt as jL,htt as jM,utt as jN,ftt as jO,ytt as jP,btt as jQ,_tt as jR,xtt as jS,Stt as jT,wtt as jU,Cze as jV,Fot as jW,Dot as jX,Lot as jY,ltt as jZ,XI as j_,dWe as ja,SWe as jb,Dze as jc,LWe as jd,DWe as je,AWe as jf,Tze as jg,eS as jh,RWe as ji,PWe as jj,mWe as jk,Lze as jl,EWe as jm,TWe as jn,MWe as jo,jWe as jp,IWe as jq,EHe as jr,Wze as js,aWe as jt,GWe as ju,zWe as jv,nWe as jw,iWe as jx,OWe as jy,FWe as jz,bHe as k,Tnt as k$,vr as k0,wot as k1,Oot as k2,Rot as k3,ctt as k4,W5e as k5,dYe as k6,uYe as k7,lYe as k8,cYe as k9,Zr as kA,Gu as kB,l_e as kC,sf as kD,ij as kE,nj as kF,L2 as kG,J1e as kH,QS as kI,UU as kJ,$9e as kK,QB as kL,JB as kM,yTe as kN,lf as kO,hTe as kP,xTe as kQ,Att as kR,SL as kS,Fy as kT,Itt as kU,Ott as kV,Zh as kW,ast as kX,$R as kY,BDe as kZ,HR as k_,wa as ka,mYe as kb,xYe as kc,_Ye as kd,yYe as ke,e4 as kf,a1 as kg,ube as kh,gU as ki,hJe as kj,kst as kk,fZ as kl,ay as km,lst as kn,ist as ko,Vae as kp,nV as kq,vKe as kr,$Qe as ks,Zqe as kt,Nee as ku,Tse as kv,ike as kw,UXe as kx,bp as ky,Gi as kz,uHe as l,lot as l$,ent as l0,pBe as l1,V1e as l2,NDe as l3,qst as l4,ai as l5,pKe as l6,Hst as l7,Yst as l8,qJe as l9,VRe as lA,CKe as lB,zst as lC,Vst as lD,Gst as lE,Wst as lF,nst as lG,yst as lH,vst as lI,sst as lJ,ost as lK,knt as lL,fst as lM,dee as lN,Qst as lO,s7e as lP,Ar as lQ,t_ as lR,bg as lS,wt as lT,Cnt as lU,wnt as lV,$F as lW,mot as lX,qnt as lY,uot as lZ,dot as l_,Kst as la,Zst as lb,kze as lc,het as ld,pet as le,Yet as lf,KTe as lg,bXe as lh,HN as li,SXe as lj,CXe as lk,ke as ll,URe as lm,P1e as ln,bst as lo,Ynt as lp,Znt as lq,ZYe as lr,_st as ls,$st as lt,dst as lu,xst as lv,ust as lw,Ust as lx,MQe as ly,TQe as lz,yp as m,Epe as m$,Sje as m0,B2 as m1,LJe as m2,am as m3,uKe as m4,hxe as m5,Vqe as m6,Bqe as m7,Vu as m8,pqe as m9,iet as mA,K3 as mB,qVe as mC,nr as mD,Dv as mE,Rze as mF,TCe as mG,Ja as mH,xre as mI,Qr as mJ,uie as mK,pie as mL,aHe as mM,iHe as mN,lHe as mO,VXe as mP,Jh as mQ,Do as mR,Mqe as mS,p7 as mT,Jet as mU,Ule as mV,kqe as mW,ks as mX,gst as mY,tj as mZ,Gxe as m_,dle as ma,Eve as mb,TD as mc,oze as md,MKe as me,KX as mf,wfe as mg,hje as mh,br as mi,wve as mj,dve as mk,wBe as ml,wze as mm,jF as mn,fj as mo,Pwe as mp,Ast as mq,HS as mr,Wqe as ms,R8 as mt,$P as mu,t5 as mv,I4e as mw,U5e as mx,$tt as my,JIe as mz,Mee as n,Fle as n$,Zp as n0,bqe as n1,Dm as n2,vCe as n3,Ll as n4,h1 as n5,bbe as n6,ML as n7,xi as n8,L1 as n9,znt as nA,zB as nB,Xst as nC,j9e as nD,rnt as nE,Hnt as nF,Wnt as nG,Unt as nH,qWe as nI,Int as nJ,jnt as nK,$nt as nL,yi as nM,XJe as nN,Y4e as nO,Bnt as nP,Gnt as nQ,aj as nR,ske as nS,Gte as nT,D3 as nU,lze as nV,QJe as nW,Ont as nX,Fnt as nY,Dnt as nZ,Dle as n_,Gd as na,$ae as nb,Fge as nc,rf as nd,nqe as ne,ov as nf,jL as ng,qn as nh,St as ni,Tae as nj,PQe as nk,oS as nl,pM as nm,iqe as nn,lP as no,rHe as np,fI as nq,nbe as nr,mhe as ns,V4e as nt,IAe as nu,fXe as nv,pXe as nw,Ant as nx,j3 as ny,IF as nz,sm as o,Ul as o$,not as o0,tot as o1,eot as o2,sot as o3,p1 as o4,snt as o5,ont as o6,fWe as o7,uee as o8,RRe as o9,got as oA,pot as oB,ynt as oC,cnt as oD,yot as oE,vot as oF,qtt as oG,Ztt as oH,_nt as oI,unt as oJ,Ent as oK,sJ as oL,pGe as oM,hGe as oN,xXe as oO,gXe as oP,KU as oQ,Vnt as oR,cze as oS,sGe as oT,$te as oU,RHe as oV,pC as oW,bfe as oX,v1e as oY,gM as oZ,E1e as o_,Ytt as oa,ztt as ob,vnt as oc,hnt as od,xnt as oe,fot as of,N4e as og,WNe as oh,MJe as oi,kJe as oj,TJe as ok,A3 as ol,get as om,Mnt as on,ece as oo,dnt as op,Qtt as oq,Ktt as or,ant as os,fnt as ot,gnt as ou,pnt as ov,Wtt as ow,HLe as ox,mnt as oy,_ot as oz,Rl as p,IYe as p$,$be as p0,tM as p1,bze as p2,hbe as p3,Sze as p4,Bve as p5,fKe as p6,Jye as p7,yKe as p8,bKe as p9,xJe as pA,SJe as pB,zJe as pC,BJe as pD,VJe as pE,GJe as pF,CJe as pG,EJe as pH,AJe as pI,wJe as pJ,lJe as pK,sJe as pL,nXe as pM,DZe as pN,ZQe as pO,n_e as pP,aJe as pQ,oJe as pR,PJe as pS,NJe as pT,jJe as pU,mJe as pV,cJe as pW,Nl as pX,sXe as pY,uJe as pZ,dJe as p_,qX as pa,Od as pb,GL as pc,sve as pd,pve as pe,kQe as pf,CQe as pg,SQe as ph,AHe as pi,OYe as pj,G4e as pk,eXe as pl,KJe as pm,Gl as pn,qq as po,dze as pp,uze as pq,Jt as pr,tJe as ps,RJe as pt,vJe as pu,TN as pv,IJe as pw,bJe as px,eMe as py,yJe as pz,Fl as q,mze as q$,Pqe as q0,sEe as q1,zF as q2,iXe as q3,na as q4,TXe as q5,EXe as q6,NTe as q7,MEe as q8,xD as q9,RQe as qA,a7e as qB,Cet as qC,bet as qD,m7e as qE,OXe as qF,i7e as qG,Eet as qH,r7e as qI,jet as qJ,WQe as qK,HQe as qL,GQe as qM,nf as qN,yXe as qO,X5e as qP,Qie as qQ,KQe as qR,tXe as qS,lee as qT,wXe as qU,pke as qV,KZe as qW,nZe as qX,pze as qY,HF as qZ,vXe as q_,NXe as qa,PXe as qb,BP as qc,yqe as qd,qXe as qe,$Xe as qf,WXe as qg,GXe as qh,_qe as qi,FXe as qj,ND as qk,YXe as ql,Hie as qm,F3 as qn,LQe as qo,u7e as qp,vet as qq,yet as qr,c7e as qs,KXe as qt,DXe as qu,BXe as qv,l7e as qw,ZXe as qx,Iet as qy,xet as qz,tQe as r,XXe as r$,df as r0,zTe as r1,UQe as r2,VQe as r3,lXe as r4,t5e as r5,Hd as r6,rXe as r7,XQe as r8,eJe as r9,ZJe as rA,JQe as rB,cXe as rC,Ret as rD,C2 as rE,BQe as rF,Pet as rG,kR as rH,Net as rI,wHe as rJ,fHe as rK,mHe as rL,pHe as rM,CHe as rN,SHe as rO,_He as rP,xHe as rQ,_We as rR,DAe as rS,Tet as rT,hot as rU,UGe as rV,BGe as rW,xE as rX,LJ as rY,LB as rZ,JXe as r_,$2 as ra,_c as rb,gze as rc,ine as rd,mXe as re,WKe as rf,zKe as rg,PF as rh,qQe as ri,YQe as rj,mi as rk,KCe as rl,LCe as rm,LXe as rn,aXe as ro,HYe as rp,WYe as rq,EQe as rr,QQe as rs,RXe as rt,uXe as ru,dXe as rv,hke as rw,zQe as rx,Ive as ry,fze as rz,dl as s,ule as s$,eet as s0,tet as s1,cet as s2,rn as s3,Ost as s4,RAe as s5,net as s6,O1 as s7,U9e as s8,uet as s9,nSe as sA,fIe as sB,Xet as sC,ttt as sD,ett as sE,w7e as sF,gF as sG,w1 as sH,D8 as sI,L7e as sJ,rce as sK,O7e as sL,R7e as sM,$Ye as sN,uf as sO,Wte as sP,Zt as sQ,att as sR,ott as sS,rtt as sT,ntt as sU,Eqe as sV,Ihe as sW,uUe as sX,jqe as sY,Cqe as sZ,bP as s_,met as sa,Met as sb,E9e as sc,DO as sd,lQe as se,aQe as sf,Oet as sg,A8 as sh,Get as si,La as sj,Uet as sk,Vet as sl,$qe as sm,c0 as sn,$et as so,gS as sp,om as sq,qet as sr,zet as ss,Wet as st,Het as su,IS as sv,fme as sw,Bet as sx,Ket as sy,BYe as sz,Bl as t,hI as t$,wqe as t0,Sqe as t1,Hce as t2,SS as t3,Tqe as t4,Iqe as t5,WJe as t6,gx as t7,w4e as t8,$Je as t9,Gk as tA,aue as tB,oue as tC,mue as tD,nYe as tE,GHe as tF,$He as tG,Be as tH,tYe as tI,rYe as tJ,Vt as tK,lWe as tL,wZ as tM,zHe as tN,HHe as tO,CYe as tP,WHe as tQ,Zue as tR,YHe as tS,Ya as tT,iYe as tU,HK as tV,Om as tW,KHe as tX,cU as tY,qIe as tZ,KIe as t_,i4 as ta,gWe as tb,hWe as tc,wI as td,UWe as te,Fg as tf,bnt as tg,ei as th,ake as ti,rke as tj,Z$e as tk,rP as tl,Poe as tm,IN as tn,kfe as to,OI as tp,DI as tq,Ebe as tr,iSe as ts,eYe as tt,vg as tu,tue as tv,aYe as tw,Gy as tx,sYe as ty,lue as tz,fP as u,PB as u$,oQ as u0,ize as u1,j2 as u2,Wy as u3,bC as u4,g$e as u5,h$e as u6,KGe as u7,QGe as u8,la as u9,Ao as uA,T1 as uB,fJe as uC,vae as uD,_M as uE,Ec as uF,PYe as uG,NYe as uH,Y$e as uI,Xq as uJ,eHe as uK,aY as uL,q1 as uM,AXe as uN,HX as uO,rQe as uP,fet as uQ,OV as uR,D9e as uS,M4 as uT,set as uU,MB as uV,wB as uW,jB as uX,EB as uY,Lv as uZ,det as u_,f$e as ua,ll as ub,uX as uc,fX as ud,RI as ue,YZe as uf,Mxe as ug,zK as uh,mme as ui,qHe as uj,Xp as uk,bZ as ul,VHe as um,WK as un,mI as uo,$K as up,CZ as uq,C_ as ur,Hh as us,$h as ut,Qve as uu,$k as uv,oYe as uw,Use as ux,FIe as uy,OIe as uz,sS as v,IJ as v$,TB as v0,kB as v1,bAe as v2,NB as v3,RB as v4,vAe as v5,IB as v6,AB as v7,O9e as v8,oet as v9,mo as vA,kxe as vB,gZe as vC,tr as vD,xZe as vE,yZe as vF,XYe as vG,hZe as vH,_Ze as vI,qy as vJ,xl as vK,cKe as vL,Gae as vM,Iye as vN,vZe as vO,aqe as vP,eQe as vQ,bZe as vR,oqe as vS,eZe as vT,mR as vU,aR as vV,Ape as vW,Mae as vX,sqe as vY,JWe as vZ,XHe as v_,UB as va,M2 as vb,PAe as vc,AAe as vd,ret as ve,OAe as vf,F9e as vg,EAe as vh,gp as vi,aze as vj,MAe as vk,tg as vl,Kh as vm,J$e as vn,X$e as vo,tHe as vp,K$e as vq,Q$e as vr,KZ as vs,ZZe as vt,Us as vu,dKe as vv,di as vw,L2e as vx,c3 as vy,mKe as vz,qR as w,IR as w$,Ld as w0,KWe as w1,QWe as w2,XWe as w3,ZWe as w4,YWe as w5,TO as w6,ket as w7,nJe as w8,Yqe as w9,OGe as wA,l9e as wB,HAe as wC,WAe as wD,aet as wE,rve as wF,fM as wG,BKe as wH,rfe as wI,H3 as wJ,W3 as wK,_B as wL,z3 as wM,gbe as wN,fO as wO,lv as wP,gO as wQ,OKe as wR,y1e as wS,nre as wT,qZe as wU,XKe as wV,Xze as wW,Jze as wX,Qze as wY,IZe as wZ,c1e as w_,Eye as wa,Zet as wb,Owe as wc,Jst as wd,NQe as we,ioe as wf,UZ as wg,$Z as wh,ow as wi,GZ as wj,VZ as wk,DZ as wl,FZ as wm,BZ as wn,zXe as wo,cHe as wp,aZe as wq,oZe as wr,wQe as ws,dHe as wt,BB as wu,Oy as wv,Ps as ww,Pnt as wx,Nnt as wy,Rnt as wz,Dn as x,bWe as x$,yae as x0,$Ke as x1,kZe as x2,qze as x3,Yze as x4,aKe as x5,uk as x6,Afe as x7,Ife as x8,gj as x9,p2 as xA,iJe as xB,QD as xC,kZ as xD,zm as xE,EYe as xF,y4e as xG,x4e as xH,_4e as xI,DJe as xJ,OJe as xK,UJe as xL,oWe as xM,sWe as xN,LP as xO,int as xP,lnt as xQ,EX as xR,kYe as xS,FJe as xT,bB as xU,mu as xV,x2 as xW,yWe as xX,iQ as xY,xWe as xZ,vWe as x_,hze as xa,vze as xb,xze as xc,Qs as xd,Sse as xe,yj as xf,Iy as xg,yze as xh,Kw as xi,ose as xj,_ze as xk,Jne as xl,Zw as xm,Yw as xn,Ane as xo,vl as xp,ZO as xq,Vl as xr,D1 as xs,Mtt as xt,Ttt as xu,Ett as xv,ktt as xw,E0e as xx,Zn as xy,ZHe as xz,rR as y,$1e as y$,Knt as y0,yP as y1,Xnt as y2,bDe as y3,XU as y4,F2 as y5,Qnt as y6,vYe as y7,est as y8,SYe as y9,Rr as yA,JS as yB,$Ze as yC,H1 as yD,Qet as yE,tB as yF,iQe as yG,Eu as yH,Yxe as yI,tKe as yJ,nKe as yK,rKe as yL,iKe as yM,lKe as yN,eKe as yO,GUe as yP,hO as yQ,XEe as yR,yu as yS,mg as yT,Zj as yU,pje as yV,UR as yW,Kve as yX,dZe as yY,cZe as yZ,ug as y_,bYe as ya,kDe as yb,wDe as yc,Jnt as yd,tst as ye,QXe as yf,r4 as yg,N5e as yh,Jqe as yi,rJe as yj,CB as yk,vC as yl,oQe as ym,q6e as yn,nC as yo,WRe as yp,cf as yq,TEe as yr,L9e as ys,$l as yt,oot as yu,Pr as yv,V3 as yw,hf as yx,pf as yy,pSe as yz,uO as z,sKe as z0,oKe as z1,G7 as z2,YJe as z3,Bot as z4,U0 as z5,eJ as z6,vde as z7,WMe as z8,nEe as z9,rst as za,Pst as zb};
//# sourceMappingURL=j0yo6uv6652vva62.js.map

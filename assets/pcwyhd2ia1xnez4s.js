import{r as E,j as b,e as G,f as W}from"./i8clt0mfz495j7ii.js";import{u as j,h as w,cH as A,ff as D,cS as z,ne as R,z as X,c4 as y,bO as F}from"./ghewn7l2ynbm32fm.js";import{S as L,aW as k,aX as B,aY as N}from"./j0yo6uv6652vva62.js";const Q=W({reportConversationTitle:{id:"gizmo.report.conversationModal.title",defaultMessage:"Report a conversation"},reportMessageTitle:{id:"gizmo.report.messageModal.title",defaultMessage:"Report a message"}});function U(l,t,c,s){var a,p,g;const r=X(l),o=t&&y(t)?t:null,n=s!=null&&s.projectId&&y(s.projectId)?s.projectId:null,e=(a=o!=null?o:n)!=null?a:null,i=(p=c!=null?c:s==null?void 0:s.conversationOwnerId)!=null?p:null,u=e!=null?(g=i!=null?i:r==null?void 0:r.normalizedAccountUserId)!=null?g:null:i;return{resolvedProjectId:e,resolvedConversationOwnerId:u}}function Z({serverThreadId:l,clientThreadId:t,onClose:c,isStaticSharedThread:s,isSharedConversation:r,projectId:o,conversationOwnerId:n}){var _,m;const e=j(),i=w(e,"2935021756"),u=w(e,"3376455464")||s||r,a=E.useContext(L),p=(_=t!=null?t:l)!=null?_:a==null?void 0:a.serverSharedThreadId,g=A(p,v=>{var x,H,S;return{projectId:(x=F.getGizmoId(v))!=null?x:null,conversationOwnerId:(S=(H=v==null?void 0:v.sharedProjectConversationOwner)==null?void 0:H.id)!=null?S:null}},{disablePerfDetector:!0}),M=D(t);let f=l!=null?l:M;f==null&&a!=null&&(f=(m=a.serverSharedThreadId)!=null?m:void 0);const{resolvedProjectId:C,resolvedConversationOwnerId:d}=U(e,o!=null?o:null,n!=null?n:null,g);return i&&typeof window<"u"&&(window._convo_share_debug={isOpen:!0,canReport:u,serverThreadIdIsNull:f==null,isStaticSharedThread:s,isSharedConversation:r}),E.useEffect(()=>{!u||f==null||z(e,"chatgpt_conversation_share_report_modal_not_shown",u?"serverThreadId":"canReport")},[u,e,f]),!u||f==null?null:b.jsx(Y,{serverThreadId:f,onClose:c,isStaticSharedThread:s,projectId:C,conversationOwnerId:d,isSharedConversation:r})}function $({serverThreadId:l,clientThreadId:t,messageId:c,onClose:s,projectId:r,conversationOwnerId:o}){var C,d;const n=j(),e=w(n,"3376455464"),i=D(t);let u=l!=null?l:i;const a=E.useContext(L);u==null&&a!=null&&(u=(C=a.serverSharedThreadId)!=null?C:void 0);const p=(d=t!=null?t:l)!=null?d:a==null?void 0:a.serverSharedThreadId,g=A(p,_=>{var m,v,x;return{projectId:(m=F.getGizmoId(_))!=null?m:null,conversationOwnerId:(x=(v=_==null?void 0:_.sharedProjectConversationOwner)==null?void 0:v.id)!=null?x:null}},{disablePerfDetector:!0}),{resolvedProjectId:M,resolvedConversationOwnerId:f}=U(n,r!=null?r:null,o!=null?o:null,g);return!e||u==null||c==null?null:b.jsx(q,{serverThreadId:u,messageId:c,onClose:s,projectId:M,conversationOwnerId:f})}function Y({serverThreadId:l,onClose:t,isStaticSharedThread:c,projectId:s,conversationOwnerId:r,isSharedConversation:o}){const n=j(),{data:e}=k(n,c||o?R.ShareableConversation:R.Conversation),i=G(),u=B(n,i,l,c||o?R.ShareableConversation:R.Conversation,void 0,s,r);return e==null||l==null?(z(n,"chatgpt_conversation_share_report_modal_not_shown",e==null?"report_reasons":"thread_id"),null):b.jsx(N,{reasons:e.reasons,submitReport:u,title:i.formatMessage(Q.reportConversationTitle),onClose:t,header:e.header,subHeader:e.header_explanation})}function q({serverThreadId:l,messageId:t,onClose:c,projectId:s,conversationOwnerId:r}){const o=j(),{data:n}=k(o,R.Message),e=G(),i=B(o,e,l,R.Conversation,void 0,s,r,t);return n==null?(z(o,"chatgpt_conversation_share_report_modal_not_shown","report_reasons"),null):b.jsx(N,{reasons:n.reasons,submitReport:i,title:e.formatMessage(Q.reportMessageTitle),onClose:c,header:n.header,subHeader:n.header_explanation})}export{Y as ReportConversationModal,q as ReportMessageModal,Z as ThreadReportConversationModal,$ as ThreadReportMessageModal};
//# sourceMappingURL=pcwyhd2ia1xnez4s.js.map

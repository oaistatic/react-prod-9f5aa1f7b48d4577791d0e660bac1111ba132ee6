const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ewkru1hsxkjpuxt5.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
import{e as g,r as d,j as t,M as j,_ as x}from"./i8clt0mfz495j7ii.js";import{d as v,o as b,aW as _,aV as N,L as w,T as L}from"./ghewn7l2ynbm32fm.js";import{p as T,g as y,F as R}from"./jo0yr7ku7v9ac6ge.js";import{W as I}from"./c80gqv0732s10rnu.js";import{g as M}from"./g5lgy1otfli5p2x7.js";import{hh as f}from"./j0yo6uv6652vva62.js";import"./kq8d654gegx6snmr.js";import"./zul7780usssm7kro.js";import"./i84uy1p9ly5pjwpt.js";import"./o6tyvbjf9zh9qku3.js";import"./lptwpbjabrvjmhsj.js";import"./gf67njbmurwfkel2.js";import"./dntm9op0tz5bndrs.js";import"./fzrn137102spawew.js";import"./eflwd0j5c3pxruh8.js";import"./l2r1du6tfxyv7jaj.js";import"./ln88gzx578175chd.js";import"./fr2n5yqcoayleu1k.js";import"./ghnvrdqxofgwprfv.js";import"./g69peh4qbpo7a7d7.js";import"./ieykhlrsk25lij4e.js";import"./i03gut32e8jn5ajq.js";import"./h1em0bjkpkjv8ykw.js";import"./e26n6uhwwtwdmiki.js";import"./mjq17q47489shd3e.js";import"./hxdh3tr5l8kut4ed.js";import"./hu1bt0oauegdhua6.js";const A="_glow_1o0tc_1",h={glow:A},D=b(()=>x(()=>import("./ewkru1hsxkjpuxt5.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>w(e)}),E=b(()=>x(()=>import("./j0yo6uv6652vva62.js").then(e=>e.yA),__vite__mapDeps([2,1,3,4,5])),{loading:e=>w(e)});function k({diffFiles:e,onClickFile:a,startOpen:m=!1,isActive:n=!1}){const o=g(),[r,c]=d.useState(m);return e.length?t.jsxs("div",{className:v("bg-token-bg-primary flex flex-col rounded-2xl border",n?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[t.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{e.length&&(a==null||a(e[0])),(n||!r)&&c(!r)},"aria-label":o.formatMessage({id:"wham.diff.changedFileList.titleAriaLabel",defaultMessage:"Toggle file list diffs"}),children:t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:t.jsx("span",{className:"text-token-text-primary font-medium",children:t.jsx(j,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:e.length}})})}),r?t.jsx(E,{className:"icon"}):t.jsx(D,{className:"icon"})]})}),t.jsx(_,{initial:!m,children:r&&t.jsx(N.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:e.map((i,l)=>{var u;const p="".concat((u=i._oldFileName)!=null?u:l,"-").concat(i._newFileName);return t.jsx(F,{diffFile:i,onClick:()=>a==null?void 0:a(i)},p)})})})]}):null}function F({diffFile:e,onClick:a}){var u;const m=g(),n=d.useRef(null),o=d.useRef(null),r=d.useRef(null),[c,i]=d.useState(!1),l=y(e),p="".concat((u=e._oldFileName)!=null?u:"","-").concat(e._newFileName);return t.jsx("li",{className:"group w-full",children:t.jsx(L,{label:l,labelTextAlign:"left",open:c?void 0:!1,children:t.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{a==null||a(),requestAnimationFrame(()=>{n.current!=null&&window.clearTimeout(n.current);const s=document.querySelector('[data-diff-header="'.concat(l,'"]'));s==null||s.classList.remove(h.glow),s==null||s.scrollIntoView({behavior:"instant",block:"start"}),s==null||s.classList.add(h.glow),n.current=window.setTimeout(()=>{s==null||s.classList.remove(h.glow)},5e3)})},"aria-label":m.formatMessage({id:"wham.diff.changedFileList.fileAriaLabel",defaultMessage:"View file {file}"},{file:l}),children:[t.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[t.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:f({axis:"width",onChange:({width:s})=>{o.current=s,r.current!=null&&i(r.current<s)}}),children:l}),t.jsx("span",{ref:f({axis:"width",onChange:({width:s})=>{r.current=s,o.current!=null&&i(s<o.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:l})]}),t.jsx("span",{className:"ms-auto",children:t.jsx(R,{diffFile:e,fallback:t.jsx(I,{linesAdded:e.additionLength,linesRemoved:e.deletionLength})})})]})})},p)}function le({assistantTurn:e,onClickFile:a,startOpen:m=!1,isActive:n=!1,showFullDiff:o=!1}){const r=M(e,!0).length>0,c=T({assistantTurn:e,followUp:r&&!o}).map(i=>i.diffFile);return t.jsx(k,{diffFiles:c,onClickFile:a,startOpen:m,isActive:n})}export{k as ChangedFileList,le as ChangedFileListFromTaskTurn};
//# sourceMappingURL=gewga3t4nezpzmbl.js.map

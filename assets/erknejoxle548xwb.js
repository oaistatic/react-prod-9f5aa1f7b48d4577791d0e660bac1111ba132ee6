const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/2uk20wu2pu1737un.js","assets/i8clt0mfz495j7ii.js","assets/gsas8pb1acnf7jnd.js","assets/mbhfxri3syrb9rbq.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/cse67de6u7e1p7hm.js","assets/gfxl3n7r4t82beqq.js","assets/k5zh2h7fpzx4n2oe.js","assets/j0yo6uv6652vva62.js","assets/conversation-small-lq38g8zw.css","assets/kf7tqzde2yk57qjr.js","assets/hf25g8jqpmy99k5w.js","assets/n4d5s6gidn7smpjz.js","assets/dabvy8uqe4jm1b47.js","assets/eals7d9xn15i0piz.js"])))=>i.map(i=>d[i]);
var L=Object.defineProperty;var M=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var k=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,R=(e,t)=>{for(var o in t||(t={}))V.call(t,o)&&k(e,o,t[o]);if(M)for(var o of M(t))z.call(t,o)&&k(e,o,t[o]);return e};import{e as T,f as A,j as s,M as F,_ as u,r as I}from"./i8clt0mfz495j7ii.js";import{e as D,u as O,d as W,o as m,T as H,$ as C,L as v,C as J,el as Q,J as $,aW as q}from"./ghewn7l2ynbm32fm.js";import{u as S,r as G}from"./k5zh2h7fpzx4n2oe.js";import{S as K}from"./gfxl3n7r4t82beqq.js";import{iJ as U}from"./j0yo6uv6652vva62.js";import{u as X}from"./ov015nmz1yxh95ok.js";import{d as Y}from"./kl7c6054usfnqmd4.js";import{F as Z}from"./czlj2e41cb4c3w4v.js";import"./kf7tqzde2yk57qjr.js";const ee=m(()=>u(()=>import("./2uk20wu2pu1737un.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>v(e)}),se=m(()=>u(()=>import("./gsas8pb1acnf7jnd.js").then(e=>e._),__vite__mapDeps([2,1])),{loading:e=>v(e)}),te=m(()=>u(()=>import("./mbhfxri3syrb9rbq.js").then(e=>e._),__vite__mapDeps([3,1])),{loading:e=>v(e)}),oe=m(()=>u(()=>import("./ghewn7l2ynbm32fm.js").then(e=>e.vJ),__vite__mapDeps([4,1,5])),{loading:e=>v(e)}),y=A({downloadFileError:{id:"postSharingModal.downloadFileError",defaultMessage:"Failed to download file. Please try again later."},title:{id:"walnut.title",defaultMessage:"Preview"},tooltip:{id:"walnut.tooltip",defaultMessage:"This is a web preview and may not reflect exact formatting. Download to open in your preferred software for best results."}}),ae=({onClose:e,onPlay:t,extension:o,contentType:a,clientThreadId:d,editHandlers:b})=>{var N;const r=T(),j=D(),E=a==="presentation",{formatMessage:f}=T(),n=f(y.title),x=f(y.tooltip);O();const{focusedWalnutId:l,presentationMap:p}=S(),i=l?p[l]:void 0,g=(N=i==null?void 0:i.fileName)!=null?N:a==="presentation"?"presentation.pptx":"spreadsheet.xlsx",h=!1,w=i==null?void 0:i.fileBlob,c=r.formatMessage(y.downloadFileError),B=X(!1,d,l!=null?l:"",()=>{},()=>{j.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"})});return s.jsxs("div",{className:W("text-token-text-secondary border-token-border-light relative flex w-full items-center justify-between border-b px-3 py-2",h),children:[s.jsxs("div",{className:"z-10 flex flex-row gap-2",children:[s.jsx(U,{onClick:e,children:s.jsx(oe,{})}),!1]}),s.jsxs("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 items-center gap-1",children:[s.jsx(Z,{fileName:n!=null?n:null}),s.jsx("div",{className:"text-token-text-primary flex flex-row items-center truncate text-sm font-medium",children:s.jsx(H,{label:x,theme:"white",defaultOpen:!0,customBackgroundColorClassName:"bg-[#6B91F1]",labelClassName:"text-white font-light",side:"bottom",disabled:h,children:s.jsxs("div",{className:"flex flex-row items-center",children:[n,s.jsx(se,{className:"ms-1 size-4"})]})})}),o&&s.jsx("div",{className:"text-token-text-tertiary ms-2 text-sm",children:o})]}),s.jsxs("div",{className:"z-10 flex items-center gap-1",children:[!1,s.jsx(C,{color:"ghost",size:"small",onClick:async()=>{if(w)Y(w,g);else{const{data:_}=await B.refetch();if(_===void 0||(_==null?void 0:_.status)!=="success"){j.danger(c,{toastId:"post_sharing_modal_download_error",loggingTitle:c,loggingDescription:"Error message when a file download fails"});return}const P=document.createElement("a");P.href=_.download_url,P.click()}},children:s.jsx(te,{})}),E&&s.jsx(C,{color:"primary",onClick:t,size:"small",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ee,{}),s.jsx("span",{className:"hidden sm:block",children:s.jsx(F,{id:"walnut.play",defaultMessage:"Play Slideshow"})})]})})]})]})},ne=m(()=>u(()=>import("./cse67de6u7e1p7hm.js"),__vite__mapDeps([6,1,4,5,7,8,9,10,11,12,13,14])).then(e=>e.CanvasRenderer)),re=m(()=>u(()=>import("./eals7d9xn15i0piz.js"),__vite__mapDeps([15,1,4,5,14,8,7,9,10,11])).then(e=>e.SpreadsheetRenderer));function le({isOpen:e,onClose:t,clientThreadId:o}){const[a,d]=I.useState(!1),{presentationMap:b,focusedWalnutId:r,setSelectedSlideIdx:j}=S(),[E,f]=I.useState(!1),n=r?b[r]:null,{presentation:x,fileName:l,workbook:p,document:i}=n!=null?n:{};if(!r||!n)return null;const g=x?"presentation":p?"spreadsheet":"none",h=g==="presentation"&&x&&!a,w=g==="spreadsheet"&&p&&!a;return s.jsx(J,{testId:"modal-walnut-content",type:"success",size:"fullscreen",isOpen:e,onClose:t,visuallyHiddenHeader:!0,children:s.jsxs("div",{className:"flex h-full flex-col overflow-hidden",children:[s.jsx(ae,{onClose:t,onPlay:()=>d(!a),title:l,contentType:g,clientThreadId:o,canEdit:!1}),h&&s.jsx(ne,{presentation:x,selectedSlideIdx:n.selectedSlideIdx,setSelectedSlideIdx:c=>j(r,c),isEditing:E,setIsEditing:f}),w&&s.jsx(re,{workbook:p,selectedSheetIdx:n.selectedSheetIdx,isEditing:E,setIsEditing:f}),!1,a&&s.jsx(K,{startIndex:0,onExit:t,walnutId:r}),!h&&!w&&!0&&!a&&s.jsx("div",{className:"flex h-full w-full items-center justify-center",children:s.jsx(F,{id:"walnut.noFile",defaultMessage:"No file selected."})})]})})}const ie=({clientThreadId:e})=>{const{isOpen:t,close:o}=S(),a=t?s.jsx(le,{isOpen:t,onClose:o,clientThreadId:e}):null;return s.jsx(q,{children:a},e)},_e=e=>{const t=I.useRef(null);return s.jsx(Q,{ref:t,onError:(o,a)=>{G(),setTimeout(()=>{var d;(d=t.current)==null||d.resetErrorBoundary()}),$.addError(o,{componentStack:a})},name:"walnut-focused-view",children:s.jsx(ie,R({},e))})};export{_e as WalnutFocusedViewManager};
//# sourceMappingURL=erknejoxle548xwb.js.map

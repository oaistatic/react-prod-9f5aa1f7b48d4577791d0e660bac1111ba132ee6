var ke=Object.freeze,Ie=Object.defineProperty,bt=Object.defineProperties;var Ct=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var Pt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var Be=(t,a,r)=>a in t?Ie(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(t,a)=>{for(var r in a||(a={}))Pt.call(a,r)&&Be(t,r,a[r]);if(Le)for(var r of Le(a))St.call(a,r)&&Be(t,r,a[r]);return t},u=(t,a)=>bt(t,Ct(a));var Re=(t,a)=>ke(Ie(t,"raw",{value:ke(a||t.slice())}));import{f as Se,m as Me,r as k,k as ze,R as Mt,j as e,e as _e,M as g}from"./i8clt0mfz495j7ii.js";import{h as _t,i as Et}from"./kgnykbdth8mb50na.js";import{k5 as Ke,k6 as xe,k7 as Te,dC as be,gS as Nt,ew as Qe,k8 as Je,k9 as Ce,bI as vt,bJ as wt,aP as Oe,bH as jt,gP as Ft,bK as Ze,dB as De,aI as At,dH as kt,ka as Lt,kb as ge,dF as E,aH as he,dx as Ue,dJ as ie,dI as pe,kc as Bt,kd as It,ke as Rt,kf as Ot}from"./j0yo6uv6652vva62.js";import{J as Ee,u as le,B as et,e as Ut,a5 as Ht,aY as Wt,P as se,ar as Yt,a4 as Vt,a0 as $t,C as He,O as Gt,d as Pe,bF as ye,$ as We,as as qt,v as Xt,ps as Ye,F as zt}from"./ghewn7l2ynbm32fm.js";import{c as tt}from"./iej0cupg2dqkmejt.js";import{u as Ve}from"./o1s10g7vrpyumh3e.js";import{S as Kt,F as Qt,c as X,L as Jt}from"./n8tfpmgkqe98i7yl.js";import{S as Zt}from"./mq11hu99eist2abq.js";const Z="team1dollar",st=5,Dt="team_free_trial",Ne="team-1-month-free",at=5;function ae(t){return t===Dt||t===Ne}function lt(t){const a=t.currencyConfig.promos.business_one_dollar.amount;if(!a){const r=new Error("Team1Dollar cost is not set in CheckoutPricingConfig for currency "+t.currencyConfig.symbol_code);throw Ee.addError(r),r}return a}function rt(t){return 0}const Q=Se({team1dollarCost:{id:"promo.team1dollar.team1dollarCost",defaultMessage:"for the first month"},team1dollarPerSeat:{id:"promo.team1dollar.team1dollarPerSeat",defaultMessage:"/seat"},team1dollarCostFollowUp:{id:"promo.team1dollar.team1dollarCostFollowUp",defaultMessage:"up to 5 users if eligible"},team1dollarCostNormalPricing:{id:"promo.team1dollar.team1dollarCostNormalPricing",defaultMessage:"After promotion, you will be charged the regular price"},asterisk:{id:"promo.team1dollar.astrix",defaultMessage:"*"},team1dollarLoginToVerify:{id:"promo.team1dollar.loginToVerify",defaultMessage:"Log in or create a free account to verify your eligibility for the promotion."},team1dollarMonthlyCost:{id:"promo.team1dollar.monthlyCost",defaultMessage:"{currencyCode} {currencySign}{discountedMonthlyCost} <s>{currencySign}{monthlyCost}</s>"},team1dollarMonthlyStructure:{id:"promo.team1dollar.monthlyStructure",defaultMessage:"Up to 5 users for {currencySign}1 flat-fee for the first month, then standard pricing applies."},team1dollarOverSeatsDisclaimer:{id:"promo.team1dollar.overSeatsDisclaimer",defaultMessage:"You have more than 5 users. The promo will only apply to the first 5 users for the first month."},team1dollarBelowDiscount:{id:"promo.team1dollar.belowDiscount",defaultMessage:"Up to 5 users"},team1dollarPromoUnavailableDisclaimer:{id:"promo.team1dollar.team1dollarPromoUnavailableDisclaimer",defaultMessage:"*This promotion is unavailable for your country. Please contact support for more information."},team1dollarPromoDisclaimer:{id:"promo.team1dollar.team1dollarPromoDisclaimerWithAmount",defaultMessage:"*Billed as a {amount} flat fee up to 5 seats for the first month, after which regular pricing applies. Restrictions apply."},promoCostDuration:{id:"promo.team1dollar.costDuration",defaultMessage:"for the first month"},team1dollarNotEligible:{id:"promo.team1dollar.notEligibleMessage",defaultMessage:"Sorry, you're not eligible for this promotional discount."},team1dollarTemporarilyDisabled:{id:"promo.team1dollar.temporarilyDisabled",defaultMessage:"This promotion is currently temporarily disabled. Please check back later."},team1dollarOffline:{id:"promo.team1dollar.offline",defaultMessage:"This promotion you are trying to use is offline or expired."},team1dollarWelcomeOffer:{id:"promo.team1dollar.welcomeOffer",defaultMessage:"WELCOME OFFER"}}),J=Se({teamFreeTrialCost:{id:"promo.teamFreeTrial.teamFreeTrialCost",defaultMessage:"for the first month"},teamFreeTrialPerSeat:{id:"promo.teamFreeTrial.teamFreeTrialPerSeat",defaultMessage:"/seat"},teamFreeTrialCostFollowUp:{id:"promo.teamFreeTrial.teamFreeTrialCostFollowUp",defaultMessage:"up to 5 users if eligible"},teamFreeTrialCostNormalPricing:{id:"promo.teamFreeTrial.teamFreeTrialCostNormalPricing",defaultMessage:"After promotion, you will be charged the regular price"},asterisk:{id:"promo.teamFreeTrial.astrix",defaultMessage:"*"},teamFreeTrialLoginToVerify:{id:"promo.teamFreeTrial.loginToVerify",defaultMessage:"Log in or create a free account to verify your eligibility for the promotion."},teamFreeTrialMonthlyCost:{id:"promo.teamFreeTrial.monthlyCostZero",defaultMessage:"1 month free <s>{currencySign}{monthlyCost}</s>"},teamFreeTrialMonthlyStructure:{id:"promo.teamFreeTrial.monthlyStructure",defaultMessage:"Up to 5 users for {currencySign}1 flat-fee for the first month, then standard pricing applies."},teamFreeTrialOverSeatsDisclaimer:{id:"promo.teamFreeTrial.overSeatsDisclaimer",defaultMessage:"You have more than 5 users. The promo will only apply to the first 5 users for the first month."},teamFreeTrialBelowDiscount:{id:"promo.teamFreeTrial.belowDiscount",defaultMessage:"1 month free up to 5 seats"},promoCost:{id:"promo.teamFreeTrial.cost",defaultMessage:"0*"},teamFreeTrialPromoDisclaimer:{id:"promo.teamFreeTrial.disclaimer",defaultMessage:"*Billed as a {currencySign}0 flat fee up to 5 seats for the first month, after which regular pricing applies. Restrictions apply."},teamFreeTrialPromoDisclaimerWithPerSeatMonthlyPrice:{id:"promo.teamFreeTrial.disclaimerWithPerSeatMonthlyPrice",defaultMessage:"*Maximum 5 seats. Billed at {postTrialSeatPrice} seat/mo after 1 month. Limits apply."},teamFreeTrialPromoDisclaimerINR:{id:"promo.teamFreeTrial.teamFreeTrialPromoDisclaimerINR",defaultMessage:"*Billed as a ₹0 flat fee up to 5 seats for the first month, after which regular pricing applies. Restrictions apply."},teamFreeTrialPromoDisclaimerIDR:{id:"promo.teamFreeTrial.teamFreeTrialPromoDisclaimerIDR",defaultMessage:"*Billed as a Rp0 flat fee up to 5 seats for the first month, after which regular pricing applies. Restrictions apply."},teamFreeTrialPromoDisclaimerWithAmount:{id:"promo.teamFreeTrial.teamFreeTrialPromoDisclaimerWithAmount",defaultMessage:"*Billed as a {amount} flat fee up to 5 seats for the first month, after which regular pricing applies. Restrictions apply."},promoCostDuration:{id:"promo.teamFreeTrial.costDuration",defaultMessage:"for the first month"},teamFreeTrialNotEligible:{id:"promo.teamFreeTrial.notEligibleMessage",defaultMessage:"Sorry, you're not eligible for this promotional discount."},teamFreeTrialTemporarilyDisabled:{id:"promo.teamFreeTrial.temporarilyDisabled",defaultMessage:"This promotion is currently temporarily disabled. Please check back later."},teamFreeTrialOffline:{id:"promo.teamFreeTrial.offline",defaultMessage:"This promotion you are trying to use is offline or expired."},teamFreeTrialWelcomeOffer:{id:"promo.teamFreeTrial.welcomeOffer",defaultMessage:"WELCOME OFFER"}}),es="promo_campaign";function ot(){const[t]=Me();return t.get(es)}const ts=["WEB-team_try_for_1"],ss=["openai_business"],as=["true"];function ls(){const[t]=Me();return{utmInternalSource:t.get("utm_internal_source"),openAIReferred:t.get("openaicom_referred"),utmCampaign:t.get("utm_campaign")}}function rs(t){const{utmCampaign:a,utmInternalSource:r,openAIReferred:x}=t;return!!a&&!!r&&!!x&&ts.includes(a)&&ss.includes(r)&&as.includes(x)}function Ps(){const t=ls(),a=rs(t);return u(o({},t),{shouldHide:a})}const os=tt(be),ns=({promoData:t,initialPromoCoupon:a,initialSeats:r}={})=>{var v;le();const x=Qe(),p=Nt(),l=(v=ot())!=null?v:a,{data:s}=Ke(l!=null?l:"");let i=t;!t&&s&&(i=s);const T=(i==null?void 0:i.coupon)===Z&&i.state==="eligible",d=i&&ae(i.coupon)&&i.state==="eligible",f=typeof window<"u"?new URLSearchParams(window==null?void 0:window.location.search):new URLSearchParams,b=f.get(xe),m=f.get(Te),P=T?be.FLEXIBLE:m&&os(m)?m:be.FLEXIBLE,[h,N]=k.useState(P),[G,U]=k.useState(r!=null?r:b&&!isNaN(parseInt(b,10))?parseInt(b,10):Math.max(p,x));return{promoData:i,selectedPlan:h,setSelectedPlan:N,numSeats:G,setNumSeats:U,minTeamSeats:x,TEAM1DOLLAR_COUPON_IsEligible:T,TEAM_FREE_TRIAL_COUPON_IsEligible:d}};var nt=(t=>(t.FLEXIBLE="month",t.ANNUAL="year",t))(nt||{});const is={input:"rounded-full!",button:"rounded-full! h-8! w-8! border-none!",buttons:"absolute end-2! gap-0!"},$e=tt(nt),Ss=t=>{const a=k.useRef(!1),r=ze(),x=r.hash.split("#")[1]===Je||r.hash.split("#")[1]===Ce,p=et(),l=!a.current&&x&&p&&!t,{country:s}=vt(),i=wt({country:s,currentAccount:p,location:"team-workspace-purchase-modal"}),T=ot(),{data:d,isLoading:f}=Ke(T!=null?T:"");le();const b=Qe(),m=Mt.useRef(void 0);k.useEffect(()=>{!l||!i||(Oe.setPurchaseWorkspaceData({minimumSeats:b,billingDetails:i,promoData:d}),a.current=!0)},[p,i,b,x,t,T,d,l]),k.useEffect(()=>{const P=m.current;m.current=f,!(f||!a.current)&&P&&i&&Oe.setPurchaseWorkspaceData({minimumSeats:b,billingDetails:i,promoData:d})},[d,f,b,i])};var Xe;const Ge=zt.p(Xe||(Xe=Re(["text-base font-medium mb-3"]))),K=Se({preDiscountTotal:{id:"teamBilling.nativeCurrency.preDiscountTotal",defaultMessage:"{amount}"},breakdownAmount:{id:"teamBilling.nativeCurrency.breakdownAmount",defaultMessage:"{amount}/seat"},temporaryCardHoldAmount:{id:"promo.teamFreeTrial.temporaryCardHoldAmountWithFormattedCurrency",defaultMessage:"{amount}"},discountAmount:{id:"teamBilling.nativeCurrency.discountAmount",defaultMessage:"{amount}"},promoCodeApplied:{id:"teamBilling.nativeCurrency.promoCodeApplied",defaultMessage:"Promo code {promoCode} applied"},totalAmount:{id:"teamBilling.nativeCurrency.totalAmount",defaultMessage:"{currencyCode} {totalAmount}"},afterPromoAmount:{id:"promo.teamFreeTrial.afterPromoAmountWithFormattedCurrency",defaultMessage:"After promotional period {amount} per month"}}),cs=({isOpen:t,onClose:a,onSubmit:r,minimumSeats:x,billingDetails:p,isDirectFlow:l=!1,promoData:s=void 0,promoMetadata:i=void 0,promoCode:T=void 0})=>{const d=et(),{trackSelectedPixels:f}=Ve({key:Wt.SELF_SERVE_BUSINESS}),{trackSelectedPixels:b}=Ve({key:"team-secondary"}),{selectedPlan:m,setSelectedPlan:P,numSeats:h,setNumSeats:N,minTeamSeats:G,TEAM1DOLLAR_COUPON_IsEligible:U,TEAM_FREE_TRIAL_COUPON_IsEligible:v}=ns({promoData:s}),[w,S]=k.useState(!1),I=le(),c=_e(),{data:y,isLoading:j,error:R}=Ze({ctx:I,countryCode:p.country,currency:p.currency}),L=p.currency,H=k.useMemo(()=>y?De(L,y):null,[y,L]),W=Math.max(x,G),Y=(s==null?void 0:s.coupon)===Z,ce=s&&ae(s==null?void 0:s.coupon),F=Y||ce,C=(s==null?void 0:s.state)==="not_eligible"&&F,O=(s==null?void 0:s.state)==="temporary_disabled"&&F,ee=(s==null?void 0:s.state)==="offline"&&F,M=At(isNaN(h)?0:h,W,kt),V=k.useMemo(()=>d==null?void 0:d.subscriptionAnalyticsParams,[d]),A=Lt(n=>n.purchaseWorkspaceData);k.useEffect(()=>{var _;const n=(_=A==null?void 0:A.referrer)!=null?_:document.referrer;se.logEvent("Account Pay: Select Team Plan Modal Show",u(o({},V),{referrer:n}))},[V,A==null?void 0:A.referrer]);const me=n=>{switch(n){case"month":se.logEvent("Account Pay: Team Plan Selection Clicked",u(o({},V),{buttonType:"Continue",numberOfSeats:h,planLength:Ye.MONTHLY}));break;case"year":se.logEvent("Account Pay: Select Team Plan Modal Clicked",u(o({},V),{buttonType:"Continue",numberOfSeats:h,planLength:Ye.ANNUAL}));break}},it=(n,_)=>{se.logEventWithStatsig("Account Pay: Select Team Plan Modal Clicked","chatgpt_select_team_plan_modal_continue_to_billing_clicked",u(o({},V),{buttonType:"Continue",numberOfSeats:_,planLength:n})),Ee.addAction("chatgpt_funnel.team_plan_modal_checkout_initiated",{planLength:n,numberOfSeats:_.toString(),accountId:d==null?void 0:d.id}),(s==null?void 0:s.state)==="eligible"&&F&&Ot.logCouponApplied(s.coupon)},ct=()=>{se.logEvent("Account Pay: Select Team Plan Modal Dismiss",V)},q=ze(),te=k.useMemo(()=>q.hash.split("#")[1]===Ce,[q.hash]);k.useEffect(()=>{var Ae;const n=new URLSearchParams;n.set(xe,M.toString()),n.set(Te,m),n.set("referrer",(Ae=A==null?void 0:A.referrer)!=null?Ae:document.referrer);const _=s!=null&&s.coupon&&s.coupon!==Ne?s.coupon:null;_&&n.set(ge,_);const Fe=l||te?"#".concat(Ce):"#".concat(Je),ht="".concat(q.pathname,"?").concat(n.toString()).concat(Fe),ne=new URL(window.location.href).searchParams,pt=ne.get(xe)===M.toString(),yt=ne.get(Te)===m,xt=_==null&&!ne.has(ge)||ne.get(ge)===_,Tt=window.location.hash===Fe;(!pt||!yt||!xt||!Tt)&&window.history.pushState({from:q.pathname+q.search},"",ht)},[M,l,te,q.pathname,q.search,q.hash,m,s==null?void 0:s.coupon,A==null?void 0:A.referrer]);const mt=Yt(),B=!!i&&m==="month";if(j||R!=null||y==null||H==null)return null;const{flexibleBillingPlan:dt,annualBillingPlan:re}=H;let $=dt,oe=null;const ut=U&&y.currencyConfig.promos.business_one_dollar.enabled,ft=v&&y.currencyConfig.promos.business_free_trial.enabled;if((ut||ft)&&!B){oe=(s==null?void 0:s.coupon)===Z?lt(y):rt();let n,_;U?(n=o({},Q.team1dollarMonthlyCost),_=u(o({},Q.team1dollarMonthlyStructure),{defaultMessage:"Then ".concat(c.formatMessage($.currencySign)).concat($.monthlyCost," seat/mo after 1 month"),id:"promo.team1dollar.monthlyPlanStructure",description:"Subsequent pricing description for team1dollar promo. Describing the monthly then the annual price after."})):(n=o({},J.teamFreeTrialMonthlyCost),_=u(o({},J.teamFreeTrialMonthlyStructure),{defaultMessage:"Then ".concat(c.formatMessage($.currencySign)).concat($.monthlyCost," seat/mo after 1 month"),id:"promo.teamFreeTrial.monthlyPlanStructure",description:"Subsequent pricing description for teamFreeTrial promo. Describing the monthly then the annual price after."})),$=u(o({},$),{cost:n,costStructure:_,discountedMonthlyCost:oe!=null?oe:$.discountedMonthlyCost})}let D;C?D=Y?Q.team1dollarNotEligible:J.teamFreeTrialNotEligible:O?D=Y?Q.team1dollarTemporarilyDisabled:J.teamFreeTrialTemporarilyDisabled:D=Y?Q.team1dollarOffline:J.teamFreeTrialOffline;const de=C||O||ee,ue=async()=>{S(!0),it(m,M),f(),b(),await r(m,M),S(!1)},ve=()=>{a(),ct()},fe=!(l||te)&&Vt(I,"2307162844").get("enabled",!1),we=!mt&&!(l||te)&&$t(I,"3469223149").get("enabled_compact_seat_picker",!1),je=e.jsx(qe,{numSeats:M,selectedPlan:m,billingDetails:p,totalLabel:E.allPlansTodayTotal,billDate:e.jsx(g,o({},E.today)),promoData:s,shouldApplyPromoMetadata:B,promoMetadata:B?i:void 0,promoCode:B?T:void 0}),z=U||v;if(l||te||fe)return e.jsxs(He,{testId:"modal-workspace-purchase",type:"success",isOpen:t,onClose:a,size:"fullscreen",noPadding:!0,removePopoverStyling:!0,showCloseButton:!0,children:[!we&&e.jsxs("div",{className:"grid grid-flow-row grid-cols-1 md:h-full md:grid-cols-2",children:[e.jsx("div",{className:"flex-column col-span-1 flex justify-center p-5 md:grid-cols-2",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col items-center md:max-w-[600px]",children:[e.jsx(Gt,{className:"mt-8 mb-6 h-8 w-8 md:fixed md:start-4 md:top-4 md:mt-0 md:h-6 md:w-6"}),de&&e.jsx("div",{className:"mb-4 w-full","data-testid":"team-promo-banner",children:e.jsx(he,{content:c.formatMessage(D),type:"info"})}),e.jsx("div",{className:"mb-8 text-3xl font-medium md:mt-[120px]",children:e.jsx(g,{id:"selectTeamPlanModal.title",defaultMessage:"Pick your plan"})}),e.jsxs(Ue,{className:Pe("col-span-3 mb-6 grid w-full gap-4 md:col-span-2 md:grid-cols-2"),defaultValue:m,onValueChange:n=>{$e(n)&&(P(n),me(n))},children:[e.jsx(ie,u(o({billingType:"year"},re),{selectedValue:m,hideSavingsMessage:z||B,hideDetails:!fe})),e.jsx(ie,u(o({billingType:"month"},$),{selectedValue:m,hideDetails:!fe,hideSavingsMessage:z||B,showWelcomeOfferLabel:z&&!B}))]}),e.jsx(pe,{numSeats:h,minSeats:W,setNumSeats:N}),e.jsx("div",{className:"text-token-text-secondary self-start text-xs",children:c.formatMessage({id:"selectTeamPlanModal.seatsDescription",defaultMessage:"Add more seats at any time. Minimum of {minSeats} seats."},{minSeats:G})})]})}),e.jsx("div",{className:"col-span-3 flex h-full flex-col items-center overflow-hidden p-6 md:col-span-1 md:shadow-lg",children:e.jsxs("div",{className:"flex w-full max-w-[400px] flex-col md:mt-[120px]",children:[e.jsx(Ge,{className:"mb-8 text-xl font-medium",children:e.jsx(g,o({},E.summaryTitle))}),je,e.jsx(ye,{title:c.formatMessage(E.continueToBillingButton),onClick:ue,loading:w,color:"green",className:"mt-8 w-full rounded-xl"}),e.jsx(ye,{title:c.formatMessage(E.cancel),onClick:ve,color:"ghost",className:"mt-4 w-full rounded-xl"})]})})]}),we&&e.jsx(Kt,{headerPaddingClassName:"pt-10 [@media(min-width:450px)]:pt-0",content:e.jsxs(Qt,{title:c.formatMessage(X.purchaseStepTitle),subTitle:c.formatMessage(X.purchaseStepSubtitle),children:[de&&e.jsx("div",{"data-testid":"team-promo-banner",children:e.jsx(he,{content:c.formatMessage(D),type:"info"})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(pe,{numSeats:h,minSeats:W,setNumSeats:N,classNames:is,label:e.jsx(g,o({},X.seatsCountLabel))}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(Jt,{required:!0,children:c.formatMessage(X.planSummaryTitle)}),e.jsxs("div",{className:"border-token-border-default flex flex-col gap-6 rounded-3xl border p-5",children:[e.jsx(Zt,{ariaLabel:c.formatMessage(X.planTypeLabel),leftItem:{label:e.jsxs("div",{className:"flex flex-wrap justify-center gap-1 text-center",children:[c.formatMessage(E.annualPlanName),!z&&!B&&e.jsx("span",{className:"text-blue-400",children:c.formatMessage(E.annualPlanSavingsLabel,{percent:Bt(re.monthlyCost,re.discountedMonthlyCost)})})]}),value:"year"},rightItem:{label:c.formatMessage(X.monthlyPlanLabel),value:"month"},value:m,onChange:n=>{P(n),me(n)}}),e.jsx(qe,{numSeats:M,selectedPlan:m,billingDetails:p,totalLabel:X.allPlansTodayTotal,billDate:c.formatMessage(X.today),promoData:s,nonZeroDiscountClassName:"text-blue-400",promoMetadata:i,promoCode:T})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 pb-10 [@media(min-width:450px)]:pb-0",children:[e.jsx(We,{size:"large",loading:w,onClick:ue,children:c.formatMessage(E.continueToBillingButton)}),e.jsx(We,{color:"ghost",size:"large",className:"w-full",onClick:ve,disabled:w,children:c.formatMessage(E.cancel)})]})]})})]});const gt=Y?st:at;return e.jsxs(He,{testId:"modal-select-team-plan",type:"success",isOpen:t,onClose:a,size:"custom",noPadding:!0,removePopoverStyling:!0,className:"max-w-4xl",showCloseButton:!0,hasSeparator:!0,title:c.formatMessage(E.selectTeamPlanModalTitle),children:[de&&e.jsx("div",{className:"px-5 pt-4","data-testid":"team-promo-banner",children:e.jsx(he,{content:c.formatMessage(D),type:"info"})}),e.jsxs("div",{className:"grid grid-flow-row grid-cols-3",children:[e.jsxs("div",{className:"flex-column col-span-3 p-5 md:col-span-2 md:grid-cols-2",children:[e.jsx(pe,{numSeats:h,minSeats:W,setNumSeats:N}),F&&(s==null?void 0:s.state)==="eligible"&&m==="month"&&h>gt&&e.jsx("div",{className:"text-token-text-secondary mt-1 self-start text-xs","data-testid":"team-promo-overseats-disclaimer",children:e.jsx(g,o({},Y?Q.team1dollarOverSeatsDisclaimer:J.teamFreeTrialOverSeatsDisclaimer))}),e.jsxs(Ue,{className:Pe("col-span-3 mt-5 grid gap-4 md:col-span-2 md:grid-cols-2"),defaultValue:m,onValueChange:n=>{$e(n)&&(P(n),me(n))},children:[e.jsx(ie,u(o({billingType:"year"},re),{selectedValue:m,hideSavingsMessage:z||B})),e.jsx(ie,u(o({billingType:"month"},$),{selectedValue:m,hideSavingsMessage:z||B,showWelcomeOfferLabel:z&&!B}))]})]}),e.jsxs("div",{className:"border-token-main-surface-tertiary bg-token-bg-elevated-secondary col-span-3 flex h-full flex-col overflow-hidden border-s p-6 md:col-span-1",children:[e.jsx(Ge,{children:e.jsx(g,o({},E.summaryTitle))}),je,e.jsx(ye,{title:c.formatMessage(E.continueToBillingButton),onClick:ue,loading:w,color:"primary",className:"mt-8 w-full rounded-xl"})]})]})]})},qe=({numSeats:t,selectedPlan:a,billingDetails:r,totalLabel:x,billDate:p,promoData:l,extraDiscountAmount:s,nonZeroDiscountClassName:i="text-[#10A37F]",footerNote:T,shouldApplyPromoMetadata:d,promoMetadata:f,promoCode:b})=>{const m=le(),P=_e(),h=k.useCallback(C=>P.formatNumber(C,{style:"currency",currency:r.currency,currencyDisplay:"narrowSymbol",trailingZeroDisplay:"stripIfInteger"}),[r.currency,P]),{data:N,isLoading:G,error:U}=Ze({ctx:m,countryCode:r.country,currency:r.currency});if(G||U!=null||!N)return null;const{flexibleBillingPlan:v,annualBillingPlan:w}=De(r.currency,N),S=v,I=a==="month"?S:w,c=It[a],y=(t||0)*(a==="year"?w.monthlyCost*12:S.monthlyCost);let j=(t||0)*I.unitCost,R=y-j,L=0,H=y,W=!1;const Y=l!=null&&(l==null?void 0:l.coupon)===Z&&N.currencyConfig.promos.business_one_dollar.enabled,ce=l!=null&&ae(l.coupon)&&N.currencyConfig.promos.business_free_trial.enabled;if(d&&f){const C=f.discount;let O=null,ee=null;if("percentage"in C&&typeof C.percentage=="number"?O=S.monthlyCost*(1-C.percentage/100):"value"in C&&C.currency_code===r.currency&&(ee=C.value),O!=null&&!Number.isNaN(O)){const M=O*(t||0);R=y-M,j=M,L=M}else if(ee!=null){const M=Math.min(y,ee),V=y-M;R=M,j=V,L=V}H=t*S.monthlyCost,W=f.duration!=null}if(l!=null&&(Y||ce)&&l.state==="eligible"&&a==="month"&&!d){W=!0;const C=Y?lt(N):rt(),O=(l==null?void 0:l.coupon)===Z?st:at;t<=O?(L=C,H=t*S.monthlyCost,R=H-L,j=L):(L=C+(t-O)*S.monthlyCost,H=t*S.monthlyCost,R=H-L,j=L)}s&&s>0&&(R+=s,j=Math.max(j-s,0));let F;return l!=null&&ae(l.coupon)&&l.coupon!==Ne&&l.state==="eligible"&&a==="month"&&(F={title:{id:"promo.teamFreeTrial.temporaryCardHold",defaultMessage:"Temporary card hold",description:"Label for the temporary card hold line item in the billing summary"},description:{id:"promo.teamFreeTrial.temporaryCardHoldDescription",defaultMessage:"Used to verify payment — we'll refund it",description:"Description for the temporary card hold line item in the billing summary"},amount:1},j+=1),e.jsxs("div",{className:"flex grow flex-col text-sm",children:[e.jsxs("div",{className:"text-token-text-secondary flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(g,o({},c.name))}),e.jsx("div",{className:"flex",children:e.jsx(g,u(o({},K.preDiscountTotal),{values:{amount:h(y)}}))})]}),e.jsxs("div",{className:"text-token-text-tertiary flex w-full justify-between text-xs",children:[e.jsx("div",{className:"flex",children:e.jsx(g,u(o({},c.breakdown),{values:{numSeats:t}}))}),e.jsx("div",{className:"flex",children:e.jsx(g,u(o({},K.breakdownAmount),{values:{amount:h(I.monthlyCost)}}))})]}),F&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(g,o({},F.title))}),e.jsx("div",{className:"flex",children:e.jsx(g,u(o({},K.temporaryCardHoldAmount),{values:{amount:h(F.amount)}}))})]}),F.description&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,o({},F.description))})]}),e.jsxs("div",{className:"text-token-text-secondary mt-3 flex w-full justify-between text-sm",children:[e.jsx("div",{className:"flex",children:e.jsx(g,o({},E.planDiscountLabel))}),e.jsx("div",{className:Pe("flex",R>0&&"font-medium",R>0&&i),children:e.jsx(g,u(o({},K.discountAmount),{values:{amount:h(-R)}}))})]}),l!=null&&(l.coupon===Z||ae(l.coupon))&&l.state==="eligible"&&a==="month"&&!d&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,o({},(l==null?void 0:l.coupon)===Z?Q.team1dollarBelowDiscount:J.teamFreeTrialBelowDiscount))}),d&&(f==null?void 0:f.summary)&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:f.summary}),d&&b&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,u(o({},K.promoCodeApplied),{values:{promoCode:b}}))}),c.discountDescription&&w.discountedMonthlyCost<w.monthlyCost&&a==="year"&&e.jsx("div",{className:"text-token-text-tertiary text-xs",children:e.jsx(g,u(o({},c.discountDescription),{values:{discountPercentage:Rt(w.monthlyCost,w.discountedMonthlyCost)}}))}),e.jsx("hr",{className:"border-token-border-default my-3"}),e.jsxs("div",{className:"flex w-full justify-between text-base font-medium",children:[e.jsx("div",{className:"flex",children:e.jsx(g,o({},x))}),e.jsx("div",{className:"flex",children:W?e.jsxs(e.Fragment,{children:[P.formatMessage(I.currencyCode)," ",h(j)]}):e.jsx(g,u(o({},K.totalAmount),{values:{currencyCode:P.formatMessage(I.currencyCode),totalAmount:h(j)}}))})]}),e.jsxs("div",{className:"text-token-text-tertiary mt-2 text-xs",children:[W?e.jsx(g,u(o({},K.afterPromoAmount),{values:{amount:h(H)}})):e.jsx(g,u(o({},c.billed),{values:{billDate:p}})),T&&e.jsx("div",{className:"mt-1",children:T})]})]})},ms=({billingDetails:t,existingAccount:a,promoData:r,promoMetadata:x,promoCode:p})=>{const l=_e(),s=Ut(),i=Ht(),{prepareCheckoutSession:T,navigateToCheckout:d}=jt(),f=le(),{isCreateWorkspaceNameAutofillEnabled:b}=_t(f),m=b(),[P]=Me(),h=P.get("from_webview")==="ios",N=Et(l,a,i,{enableEmailPrefill:m}),{eligible:G,campaignId:U}=Ft(),v=r!=null?r:G&&!x&&!p?{coupon:U,state:"eligible",redemption:null}:void 0;return{effectivePromoData:v,handleBusinessCheckoutRedirect:async(S,I,c=!1)=>{if(!qt(f)){Xt(f,{fallbackScreenHint:"login",callbackUrl:window.location.href});return}try{const y=await T(u(o({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:N,price_interval:S,seat_quantity:I,existing_workspace_id:a==null?void 0:a.id},billing_details:t,cancel_url:window.location.href,promo_campaign:S==="month"?v==null?void 0:v.coupon:null},c?{}:{checkout_ui_mode:"redirect"}),{promo_code:p&&S==="month"?p:void 0}),{fromiOSWebview:h});await d(y)}catch(y){Ee.addError(y),s.warning(l.formatMessage(E.paymentErrorWarning),{hasCloseButton:!0})}}}},Ms=({isOpen:t,onClose:a,minimumSeats:r,billingDetails:x,existingAccount:p=void 0,promoData:l=void 0,promoMetadata:s=void 0,promoCode:i=void 0})=>{const{handleBusinessCheckoutRedirect:T,effectivePromoData:d}=ms({billingDetails:x,existingAccount:p,promoData:l,promoMetadata:s,promoCode:i});return e.jsx(cs,{isOpen:t,onClose:a,onSubmit:(f,b)=>T(f,b),minimumSeats:r,billingDetails:x,promoData:d,promoMetadata:s!=null?s:void 0,promoCode:i!=null?i:void 0})};export{qe as B,es as P,nt as T,Ps as a,Z as b,J as c,ot as d,ms as e,$e as f,Ss as g,Ms as h,ae as i,Dt as j,lt as k,rt as l,Q as t,ns as u};
//# sourceMappingURL=kplnfohfof8ely0n.js.map

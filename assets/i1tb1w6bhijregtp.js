const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ghewn7l2ynbm32fm.js","assets/i8clt0mfz495j7ii.js","assets/root-c4psboex.css"])))=>i.map(i=>d[i]);
import{c as ee,e as xe,r as ne,_ as be,j as a,a as ce,M as ue}from"./i8clt0mfz495j7ii.js";import{ar as we,d as ve,o as ke,L as je,mU as _e,C as Me,R as me,$ as pe}from"./ghewn7l2ynbm32fm.js";import{dp as Ce}from"./j0yo6uv6652vva62.js";import{T as Te,a as Le,b as ye}from"./fr2n5yqcoayleu1k.js";import{p as Se,W as Pe,M as Ne,C as Ae}from"./jo0yr7ku7v9ac6ge.js";import{W as he}from"./i94vqq9eycryltby.js";import{I as De,W as Ie}from"./hf1acpjenvjtaqkn.js";import{g as Fe,W as Re,u as Ue}from"./g5lgy1otfli5p2x7.js";import"./ghnvrdqxofgwprfv.js";import"./g69peh4qbpo7a7d7.js";import"./kq8d654gegx6snmr.js";import"./zul7780usssm7kro.js";import"./i84uy1p9ly5pjwpt.js";import"./o6tyvbjf9zh9qku3.js";import"./lptwpbjabrvjmhsj.js";import"./gf67njbmurwfkel2.js";import"./dntm9op0tz5bndrs.js";import"./fzrn137102spawew.js";import"./eflwd0j5c3pxruh8.js";import"./l2r1du6tfxyv7jaj.js";import"./ln88gzx578175chd.js";import"./c80gqv0732s10rnu.js";import"./ieykhlrsk25lij4e.js";import"./i03gut32e8jn5ajq.js";import"./h1em0bjkpkjv8ykw.js";import"./e26n6uhwwtwdmiki.js";import"./mjq17q47489shd3e.js";import"./hxdh3tr5l8kut4ed.js";import"./hu1bt0oauegdhua6.js";const We=ke(()=>be(()=>import("./ghewn7l2ynbm32fm.js").then(p=>p.vJ),__vite__mapDeps([0,1,2])),{loading:p=>je(p)}),ge=new Set;function kt(p){"use forget";var de,fe;const e=ee.c(104),{taskId:l,suggestion:r,index:o,assistantTurn:t,isOpen:c,onClose:i}=p;let u;e[0]!==t?(u=Fe(t,!0),e[0]=t,e[1]=u):u=e[1];const d=u.length>0;let n;e[2]!==t||e[3]!==d?(n=Se({assistantTurn:t,followUp:d}),e[2]=t,e[3]=d,e[4]=n):n=e[4];const f=n,h=!d,s=xe(),m=we(),[k,M]=ne.useState("diff");let g,x;e[5]!==t.id||e[6]!==c||e[7]!==l?(g=()=>{const _=t.id;c&&_&&!ge.has(_)&&(ge.add(_),Re.viewSpeculativeTurn(l,_))},x=[c,t.id,l],e[5]=t.id,e[6]=c,e[7]=l,e[8]=g,e[9]=x):(g=e[8],x=e[9]),ne.useEffect(g,x);let w;e[10]!==t||e[11]!==o||e[12]!==h||e[13]!==r||e[14]!==l?(w=a.jsx(Be,{taskId:l,suggestion:r,index:o,assistantTurn:t,showFullDiff:h}),e[10]=t,e[11]=o,e[12]=h,e[13]=r,e[14]=l,e[15]=w):w=e[15];const b=w,j=(de=t==null?void 0:t.id)!=null?de:l;let v;e[16]!==s?(v=s.formatMessage({id:"wham.whamTaskPageContentLoaded.conversation",defaultMessage:"Conversation"}),e[16]=s,e[17]=v):v=e[17];let C;e[18]!==s?(C=s.formatMessage({id:"wham.whamTaskPageContentLoaded.conversationAriaLabel",defaultMessage:"Tab to view the conversation with the assistant"}),e[18]=s,e[19]=C):C=e[19];let T;e[20]!==m||e[21]!==b||e[22]!==v||e[23]!==C?(T={key:"chat",isHidden:m,label:v,ariaLabel:C,children:b},e[20]=m,e[21]=b,e[22]=v,e[23]=C,e[24]=T):T=e[24];let L;e[25]!==s?(L=s.formatMessage({id:"wham.whamTaskPageContentLoaded.diff",defaultMessage:"Diff"}),e[25]=s,e[26]=L):L=e[26];let y;e[27]!==s?(y=s.formatMessage({id:"wham.whamTaskPageContentLoaded.diffAriaLabel",defaultMessage:"Tab to view the code diff"}),e[27]=s,e[28]=y):y=e[28];let S;e[29]!==t||e[30]!==f||e[31]!==o||e[32]!==l?(S=a.jsx(ze,{taskId:l,assistantTurn:t,index:o,diffFiles:f}),e[29]=t,e[30]=f,e[31]=o,e[32]=l,e[33]=S):S=e[33];let P;e[34]!==L||e[35]!==y||e[36]!==S?(P={key:"diff",isHidden:!1,label:L,ariaLabel:y,children:S},e[34]=L,e[35]=y,e[36]=S,e[37]=P):P=e[37];let N;e[38]!==s?(N=s.formatMessage({id:"wham.whamTaskPageContentLoaded.logs",defaultMessage:"Logs"}),e[38]=s,e[39]=N):N=e[39];let A;e[40]!==s?(A=s.formatMessage({id:"wham.whamTaskPageContentLoaded.logsAriaLabel",defaultMessage:"Tab to view the work logs"}),e[40]=s,e[41]=A):A=e[41];let J;e[42]===Symbol.for("react.memo_cache_sentinel")?(J=a.jsx("div",{className:"flex h-full w-full items-center justify-center py-8",children:a.jsx(_e,{})}),e[42]=J):J=e[42];const te=(fe=t==null?void 0:t.environment)==null?void 0:fe.agent_network_access;let D;e[43]!==t||e[44]!==o||e[45]!==l?(D=a.jsx("div",{className:"block md:hidden",children:a.jsx(re,{taskId:l,assistantTurn:t,index:o})}),e[43]=t,e[44]=o,e[45]=l,e[46]=D):D=e[46];let I;e[47]!==t||e[48]!==te||e[49]!==D||e[50]!==l?(I=a.jsx(ne.Suspense,{fallback:J,children:a.jsx(Pe,{taskId:l,focusedAssistantTurn:t,agentNetworkAccess:te,footer:D})}),e[47]=t,e[48]=te,e[49]=D,e[50]=l,e[51]=I):I=e[51];let F;e[52]!==N||e[53]!==A||e[54]!==I?(F={key:"logs",label:N,ariaLabel:A,children:I},e[52]=N,e[53]=A,e[54]=I,e[55]=F):F=e[55];let R;e[56]!==s?(R=s.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModels",defaultMessage:"Internal Data Models"}),e[56]=s,e[57]=R):R=e[57];let U;e[58]!==s?(U=s.formatMessage({id:"wham.whamTaskPageContentLoaded.internalDataModelsAriaLabel",defaultMessage:"Tab to view internal data models"}),e[58]=s,e[59]=U):U=e[59];const se=t==null?void 0:t.internal_only_rollouts;let W;e[60]!==t||e[61]!==se?(W=a.jsx(De,{task:void 0,userTurn:null,assistantTurn:t,rollout:se}),e[60]=t,e[61]=se,e[62]=W):W=e[62];let E;e[63]!==R||e[64]!==U||e[65]!==W?(E={key:"internal_data_models",isHidden:!0,label:R,ariaLabel:U,children:W},e[63]=R,e[64]=U,e[65]=W,e[66]=E):E=e[66];let B;e[67]!==P||e[68]!==F||e[69]!==E||e[70]!==T?(B=[T,P,F,E],e[67]=P,e[68]=F,e[69]=E,e[70]=T,e[71]=B):B=e[71];const ae=!m,le=!m&&"border-b";let H;e[72]!==le?(H=ve("p-3 max-md:py-0",le),e[72]=le,e[73]=H):H=e[73];let $;e[74]!==ae||e[75]!==H?($=a.jsx(Te,{withUnderline:ae,className:H,skipTabUnderlineAnimation:!0}),e[74]=ae,e[75]=H,e[76]=$):$=e[76];let K;e[77]===Symbol.for("react.memo_cache_sentinel")?(K=a.jsx(Le,{children:Ee}),e[77]=K):K=e[77];let V;e[78]!==k||e[79]!==B||e[80]!==$||e[81]!==j?(V=a.jsx("div",{className:"relative flex h-full w-full flex-col",children:a.jsxs(ye,{onChange:M,currentTab:k,defaultTab:"diff",tabs:B,children:[$,K]},j)}),e[78]=k,e[79]=B,e[80]=$,e[81]=j,e[82]=V):V=e[82];const ie=V;let Q;e[83]===Symbol.for("react.memo_cache_sentinel")?(Q=a.jsx(We,{}),e[83]=Q):Q=e[83];let O;e[84]!==s?(O=s.formatMessage({id:"wham.whamTaskPageContentLoaded.close",defaultMessage:"Close"}),e[84]=s,e[85]=O):O=e[85];let z;e[86]!==i||e[87]!==O?(z=a.jsx(Ce,{className:"absolute end-3 top-0 md:top-3",icon:Q,label:O,onClick:i}),e[86]=i,e[87]=O,e[88]=z):z=e[88];let X;e[89]!==z||e[90]!==ie?(X=a.jsxs("div",{className:"relative flex h-full w-full flex-col",children:[ie,z]}),e[89]=z,e[90]=ie,e[91]=X):X=e[91];const Y=X,oe="modal-speculative-task-content-".concat(t.id);let q;e[92]!==i?(q=_=>{_.preventDefault(),_.stopPropagation(),i()},e[92]=i,e[93]=q):q=e[93];let G;e[94]!==m||e[95]!==b||e[96]!==Y?(G=a.jsx("div",{className:"bg-token-bg-tertiary flex h-full w-full",children:m?a.jsx(Ie,{leftContent:b,rightContent:Y}):Y}),e[94]=m,e[95]=b,e[96]=Y,e[97]=G):G=e[97];let Z;return e[98]!==c||e[99]!==i||e[100]!==oe||e[101]!==q||e[102]!==G?(Z=a.jsx(Me,{testId:oe,isOpen:c,visuallyHiddenHeader:!0,size:"custom",className:"h-full w-full",contentClassName:"h-screen",noPadding:!0,onClose:i,onEscapeKeyDown:q,showCloseButton:!0,children:G}),e[98]=c,e[99]=i,e[100]=oe,e[101]=q,e[102]=G,e[103]=Z):Z=e[103],Z}function Ee(p){const{content:e}=p;return a.jsx("div",{className:"flex h-full w-full",children:e})}function Be(p){"use forget";const e=ee.c(16),{taskId:l,suggestion:r,index:o,assistantTurn:t,showFullDiff:c}=p;let i;e[0]!==r.title?(i=a.jsx("span",{className:"p-6 text-sm font-medium",children:r.title}),e[0]=r.title,e[1]=i):i=e[1];let u;e[2]!==t?(u=[t],e[2]=t,e[3]=u):u=e[3];let d;e[4]!==t||e[5]!==c||e[6]!==u?(d=a.jsx("div",{className:"flex-1 overflow-y-auto px-6",children:a.jsx(Ne,{isLatest:!0,assistantTurns:u,selectedAssistantId:t.id,focusedAssistantTurn:t,setFocusedAssistantTurnId:Oe,onClickFile:$e,startOpen:!0,currentTab:void 0,onTabChange:He,permissions:"read",flushHeaderSeparator:!0,showFullDiff:c},t.id)}),e[4]=t,e[5]=c,e[6]=u,e[7]=d):d=e[7];let n;e[8]!==t||e[9]!==o||e[10]!==l?(n=a.jsx(re,{taskId:l,assistantTurn:t,index:o}),e[8]=t,e[9]=o,e[10]=l,e[11]=n):n=e[11];let f;return e[12]!==i||e[13]!==d||e[14]!==n?(f=a.jsxs("div",{className:"flex h-full w-full flex-col",children:[i,d,n]}),e[12]=i,e[13]=d,e[14]=n,e[15]=f):f=e[15],f}function He(){}function $e(){}function Oe(){}function ze(p){"use forget";const e=ee.c(11),{taskId:l,assistantTurn:r,index:o,diffFiles:t}=p,c=t.length>0,{data:i}=Ue(),d=!we()||(i==null?void 0:i.git_diff_mode)==="unified";let n;e[0]!==t||e[1]!==c||e[2]!==d?(n=c&&a.jsx("div",{className:"flex w-full flex-1 flex-col gap-6 overflow-y-auto px-6 pb-6",children:t.map(s=>a.jsx(Ae,{diff:s,stickyHeader:!0,viewType:d?"unified":"split",enableComments:!1,buttonClassName:"bg-token-bg-tertiary"},s.diffFile._newFileName))}),e[0]=t,e[1]=c,e[2]=d,e[3]=n):n=e[3];let f;e[4]!==r||e[5]!==o||e[6]!==l?(f=a.jsx("div",{className:"block md:hidden",children:a.jsx(re,{taskId:l,assistantTurn:r,index:o})}),e[4]=r,e[5]=o,e[6]=l,e[7]=f):f=e[7];let h;return e[8]!==n||e[9]!==f?(h=a.jsxs("div",{className:"flex h-full w-full flex-col",children:[n,f]}),e[8]=n,e[9]=f,e[10]=h):h=e[10],h}function re(p){"use forget";const e=ee.c(31),{taskId:l,assistantTurn:r,index:o}=p,t=xe(),c=qe;let i;e[0]!==r||e[1]!==o||e[2]!==l?(i={mutationFn:()=>(he.recordSpeculativeSuggestionRejected(l,r.id,o),me.safePost("/wham/tasks/{task_id}/speculative_turns/{task_turn_id}/reject",{parameters:{path:{task_id:l,task_turn_id:r.id}}})),onSuccess:c},e[0]=r,e[1]=o,e[2]=l,e[3]=i):i=e[3];const{mutate:u,isPending:d}=ce(i);let n;e[4]!==r||e[5]!==o||e[6]!==l?(n={mutationFn:()=>(he.recordSpeculativeSuggestionAccepted(l,r.id,o),me.safePost("/wham/tasks/{task_id}/speculative_turns/{task_turn_id}/accept",{parameters:{path:{task_id:l,task_turn_id:r.id}}})),onSuccess:c},e[4]=r,e[5]=o,e[6]=l,e[7]=n):n=e[7];const{mutate:f,isPending:h}=ce(n),s=d||h;let m;e[8]!==f?(m=()=>f(),e[8]=f,e[9]=m):m=e[9];let k;e[10]!==t?(k=t.formatMessage({id:"wham.speculative.followUp.applyAriaLabel",defaultMessage:"Button to apply the speculative follow up suggestion"}),e[10]=t,e[11]=k):k=e[11];let M;e[12]===Symbol.for("react.memo_cache_sentinel")?(M=a.jsx(ue,{id:"wham.speculative.followUp.apply",defaultMessage:"Apply"}),e[12]=M):M=e[12];let g;e[13]!==h||e[14]!==s||e[15]!==m||e[16]!==k?(g=a.jsx(pe,{color:"primary",onClick:m,disabled:s,loading:h,"aria-label":k,children:M}),e[13]=h,e[14]=s,e[15]=m,e[16]=k,e[17]=g):g=e[17];let x;e[18]!==u?(x=()=>u(),e[18]=u,e[19]=x):x=e[19];let w;e[20]!==t?(w=t.formatMessage({id:"wham.speculative.followUp.rejectAriaLabel",defaultMessage:"Button to reject the speculative follow up suggestion"}),e[20]=t,e[21]=w):w=e[21];let b;e[22]===Symbol.for("react.memo_cache_sentinel")?(b=a.jsx(ue,{id:"wham.speculative.followUp.reject",defaultMessage:"Reject"}),e[22]=b):b=e[22];let j;e[23]!==s||e[24]!==d||e[25]!==x||e[26]!==w?(j=a.jsx(pe,{color:"secondary",onClick:x,disabled:s,loading:d,"aria-label":w,children:b}),e[23]=s,e[24]=d,e[25]=x,e[26]=w,e[27]=j):j=e[27];let v;return e[28]!==j||e[29]!==g?(v=a.jsxs("div",{className:"flex w-full justify-center gap-3 py-10",children:[g,j]}),e[28]=j,e[29]=g,e[30]=v):v=e[30],v}function qe(){window.location.reload()}export{kt as SpeculativeTaskContentModal};
//# sourceMappingURL=i1tb1w6bhijregtp.js.map

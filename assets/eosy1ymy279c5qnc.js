const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jyroje0qaxw6h3z1.js","assets/i8clt0mfz495j7ii.js","assets/frf0wu8ouyfyu06j.js"])))=>i.map(i=>d[i]);
var pe=Object.defineProperty,ve=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var En=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var Pn=t=>{throw TypeError(t)};var kn=(t,n,e)=>n in t?pe(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,L=(t,n)=>{for(var e in n||(n={}))he.call(n,e)&&kn(t,e,n[e]);if(En)for(var e of En(n))xe.call(n,e)&&kn(t,e,n[e]);return t},cn=(t,n)=>ve(t,be(n));var Ln=(t,n,e)=>n.has(t)||Pn("Cannot "+e);var C=(t,n,e)=>(Ln(t,n,"read from private field"),e?e.call(t):n.get(t)),E=(t,n,e)=>n.has(t)?Pn("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,e),k=(t,n,e,a)=>(Ln(t,n,"write to private field"),a?a.call(t,e):n.set(t,e),e);import{s as Se,a as Ae,w as In,x as ye,en as Ce,hQ as bn,tw as we,ct as Te,t6 as Me,hk as De,a$ as hn,dv as Fe,ba as $n,d as G,$ as en,b0 as zn,u as Re,kR as _e,as as Ee,kP as ke,bO as Nn,bQ as Un,b7 as Pe,v as Le,P as Ie,bj as ze,mO as Ne,J as Ue,aV as Be,o as Zn,L as Jn}from"./ghewn7l2ynbm32fm.js";import{r as u,l as Oe,j as m,M as I,e as je,_ as Qn}from"./i8clt0mfz495j7ii.js";import{w6 as ne,w7 as ee,to as qe,tp as Ve,nM as He,sb as We,s7 as Ge,gK as Ke,gM as Xe,gL as Ye,gJ as un,aZ as $e,cX as Ze,w8 as Je,w9 as Qe}from"./j0yo6uv6652vva62.js";import{u as nt}from"./h8pr5f6a9kp0y6hm.js";const et=Se(void 0),Kt=()=>Ae(et),tt=()=>ne().some(n=>n.voice==="shade"),Bn=ye.JumpToShade,ot=()=>{const t=In.getItem(Bn)==="true",n=u.useCallback(()=>{In.setItem(Bn,"true")},[]);return{alreadyTriggered:t,setAlreadyTriggered:n}},at=2,st=({viewport:t,canvasSize:n,shouldMeasurePerf:e,source:a})=>{const o=u.useRef({}),i=u.useCallback(r=>{const f=r.getExtension("WEBGL_debug_renderer_info");f&&(o.current.vendor=r.getParameter(f.UNMASKED_VENDOR_WEBGL),o.current.renderer=r.getParameter(f.UNMASKED_RENDERER_WEBGL))},[]);return u.useEffect(()=>{var s,d;const r={vendor:(s=o.current.vendor)!=null?s:"(unavailable)",renderer:(d=o.current.renderer)!=null?d:"(unavailable)",width:t[0],height:t[1],canvasWidth:n[0],canvasHeight:n[1],dpr:window.devicePixelRatio,source:a};!Ce(r,o.current)&&e&&(o.current=r,ee(at).then(c=>{bn.bloop.performance(cn(L({},r),{fps:c}))}))},[n,e,t,a]),i},it=.25,rt=3,On=28,dn=55,fn=200,jn=1.1,lt=({viewport:t,initialScale:n,shouldCalibrate:e})=>{const[a,o]=u.useState(n),i=u.useRef(void 0),r=u.useRef(void 0),f=u.useRef(void 0),s=u.useRef("down"),d=u.useCallback(()=>{const c=s.current==="up"?rt:it;ee(c).then(g=>{if(g<On){s.current="down";const v=Math.max(g,1),l=Math.sqrt(v/On);o(b=>b*l),r.current=window.setTimeout(d,fn)}else if(f.current){const v=g>=dn,l=g>=f.current*jn;if(v||l)s.current="up",o(b=>b*jn),r.current=window.setTimeout(d,fn);else if(g<dn){s.current="down";const b=Math.sqrt(g/dn);o(h=>h*b)}}f.current=g})},[]);return u.useEffect(()=>{var h;const[c,g]=t,[v,l]=(h=i.current)!=null?h:[];return e&&(v!==c||l!==g)&&(i.current=t,clearTimeout(r.current),o(n),r.current=window.setTimeout(d,fn)),()=>{clearTimeout(r.current)}},[e,d,n,t]),a};var mn,qn;function ct(){if(qn)return mn;qn=1;var t=we(),n=Te(),e=Me(),a=De(),o=qe(),i=Math.max;function r(f){if(!(f&&f.length))return[];var s=0;return f=t(f,function(d){if(o(d))return s=i(d.length,s),!0}),a(s,function(d){return n(f,e(d))})}return mn=r,mn}var gn,Vn;function ut(){if(Vn)return gn;Vn=1;var t=Ve(),n=ct(),e=t(n);return gn=e,gn}var dt=ut();const pn=Oe(dt),ft={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}},mt=t=>{const n=e=>{let i=1-Math.max(-100,Math.min(-10,e))*-1/100;return i=Math.sqrt(i),i};return t.map(e=>e===-1/0?0:n(e))};function Sn(t,n={}){const e=L(L({},ft),n),[a,o]=u.useState(new Array(e.bands).fill(0));return u.useEffect(()=>{if(!t)return;const{analyser:i,cleanup:r}=gt(t,e.analyserOptions),f=i.frequencyBinCount,s=new Float32Array(f),c=setInterval(()=>{i.getFloatFrequencyData(s);let g=new Float32Array(s.length);for(let h=0;h<s.length;h++)g[h]=s[h];g=g.slice(e.loPass,e.hiPass);const v=mt(g),l=Math.ceil(v.length/e.bands),b=[];for(let h=0;h<e.bands;h++){const p=v.slice(h*l,(h+1)*l).reduce((D,S)=>D+=S,0);b.push(p/l)}o(b)},e.updateInterval);return()=>{r(),clearInterval(c)}},[t,JSON.stringify(n)]),a}function gt(t,n){const e=L({fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},n),a=pt();if(!a)throw new Error("Audio Context not supported on this browser");let o;t instanceof HTMLAudioElement?o=a.createMediaElementSource(t):o=a.createMediaStreamSource(new MediaStream([t]));const i=a.createAnalyser();i.minDecibels=e.minDecibels,i.maxDecibels=e.maxDecibels,i.fftSize=e.fftSize,i.smoothingTimeConstant=e.smoothingTimeConstant,o.connect(i),t instanceof HTMLAudioElement&&i.connect(a.destination);const r=new Uint8Array(i.frequencyBinCount);return{calculateVolume:()=>{i.getByteFrequencyData(r);let d=0;for(const g of r)d+=Math.pow(g/255,2);return Math.sqrt(d/r.length)},analyser:i,cleanup:async()=>{await a.close()}}}function pt(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}const vt=60,sn=Math.floor(1e3/vt),An=240,te=2048,oe=new Array(An).fill(0),bt=t=>{const n=Sn(t,{bands:An,updateInterval:sn,loPass:0,hiPass:400,analyserOptions:{fftSize:te}});return n.length===0?oe:n},yn=t=>{const{magnitudes:n,binCount:e,gainMultiplier:a}=t;if(n.length===0)return new Array(e).fill(0);const o=Math.ceil(n.length/e),i=[];for(let r=0;r<n.length;r+=o){const f=Math.min(r+o,n.length),s=n.slice(r,f).sort((v,l)=>v-l),d=Math.floor(s.length/2);let c;s.length%2===0?c=(s[d-1]+s[d])/2:c=s[d],c=Math.abs(c),c*=a;const g=c/(c+1);i.push(g)}return i},ae=(t,n)=>{const e=n.sampleRate,a=t.length,o=n.bandCount,i=n.binCount,r=n.gainMultipliers;if(r.length!==o)throw new Error("gainMultipliers must have length equal to bandCount");const f=a*2,s=e/f,d=t.map((b,h)=>h*s),c=20,g=e/2,v=new Array(o+1).fill(0).map((b,h)=>c*Math.pow(g/c,h/o)),l=new Array(o).fill(null).map(()=>[]);for(let b=0;b<d.length;b+=1)for(let h=0;h<o;h+=1)if(d[b]>=v[h]&&d[b]<v[h+1]){l[h].push(t[b]);break}for(let b=0;b<o;b+=1){const h=l[b],p=r[b];l[b]=yn({magnitudes:h,binCount:i,gainMultiplier:p})}return l},Hn=60,se=48e3,ht=1,xt=2,St=40,At=2;function Wn({time:t,timeConstant:n}){return 1-Math.exp(-t/n)}function Gn(t,n){const e=n[1]-n[0];return n[0]+t*e}const vn=t=>{if(!Array.isArray(t)||t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error("zip failed - received a value that is not a [number, number] tuple")},yt=t=>{const{prevAudioData:n,prevCumulativeAudioData:e,deltaTimeS:a,audioDataRaw:o}=t,i=o.map(v=>v*a*Hn*ht),r=Wn({time:a,timeConstant:xt}),f=pn(n,i).map(v=>(vn(v),Gn(r,v))),s=o.map(v=>v*a*Hn*St),d=pn(e,s).map(v=>(vn(v),v[0]+v[1])),c=Wn({time:a,timeConstant:At}),g=pn(e,d).map(v=>(vn(v),Gn(c,v)));return{audioData:f,cumulativeAudioData:g}},Xt=(t,n)=>{const e=bt(t),a=ae(e,{sampleRate:se,binCount:n.bins,bandCount:n.bands,gainMultipliers:n.gainMultipliers}),o=yn({magnitudes:e,binCount:1,gainMultiplier:1});return{bandMagnitudes:a,cumulativeMagnitude:o}};function Ct(){let t=null,n,e=0;const a=350;let o;const i=(f,s,d)=>f+(s-f)*d,r=(f,s)=>{if(f.length!==s.length)return!1;for(let d=0;d<f.length;d++)if(f[d]!==s[d])return!1;return!0};return function(s){const d=performance.now();if(!t)return n={bloopColorMain:new Float32Array(s.bloopColorMain),bloopColorLow:new Float32Array(s.bloopColorLow),bloopColorMid:new Float32Array(s.bloopColorMid),bloopColorHigh:new Float32Array(s.bloopColorHigh)},t={bloopColorMain:new Float32Array(s.bloopColorMain),bloopColorLow:new Float32Array(s.bloopColorLow),bloopColorMid:new Float32Array(s.bloopColorMid),bloopColorHigh:new Float32Array(s.bloopColorHigh)},e=d,o=n,o;let c=!1;const g=["bloopColorMain","bloopColorLow","bloopColorMid","bloopColorHigh"];for(const b of g)if(!r(s[b],t[b])){c=!0;break}c&&(n={bloopColorMain:new Float32Array(o.bloopColorMain),bloopColorLow:new Float32Array(o.bloopColorLow),bloopColorMid:new Float32Array(o.bloopColorMid),bloopColorHigh:new Float32Array(o.bloopColorHigh)},e=d,t={bloopColorMain:new Float32Array(s.bloopColorMain),bloopColorLow:new Float32Array(s.bloopColorLow),bloopColorMid:new Float32Array(s.bloopColorMid),bloopColorHigh:new Float32Array(s.bloopColorHigh)});let v=(d-e)/a;v>1&&(v=1);const l={bloopColorMain:new Float32Array(n.bloopColorMain.length),bloopColorLow:new Float32Array(n.bloopColorLow.length),bloopColorMid:new Float32Array(n.bloopColorMid.length),bloopColorHigh:new Float32Array(n.bloopColorHigh.length)};for(const b of g){const h=n[b].length;for(let p=0;p<h;p++){const D=n[b][p],S=s[b][p];l[b][p]=i(D,S,v)}}return o=l,l}}function wt(t){const n=u.useRef(t);n.current=t;const[e,a]=u.useState(null),o=u.useCallback(i=>{a(i)},[]);return hn(()=>{const i=new ResizeObserver(r=>{for(const f of r)n.current(f)});return e&&i.observe(e),()=>{i.disconnect()}},[e]),o}const V=He.createChild("GLCanvas");function Tt({className:t,vert:n,frag:e,Behaviors:a,onViewportUpdate:o,onRenderComplete:i,onGlAvailable:r,onCanvasSizeUpdate:f,scale:s}){const d=u.useRef(null),c=u.useRef(null),[g,v]=u.useState(null),[l,b]=u.useState(),h=u.useRef(Fe(S=>{const{width:A,height:x}=S.contentRect,w=Math.floor(Math.min(A!=null?A:0,x!=null?x:0));v(w),o==null||o({width:w,height:w})},100)),p=wt(h.current);if(hn(()=>{const S=d.current,{width:A,height:x}=S!=null?S:{};if(S&&g!=null&&A&&x){const w=S.getContext("webgl2",{premultipliedAlpha:!0});w?b(w):V.error("webgl2 context not supported")}},[g]),hn(()=>{if(!l)return;const S=l.createProgram(),A=l.createShader(l.VERTEX_SHADER),x=l.createShader(l.FRAGMENT_SHADER);if(!S){V.debug("failed to create program");return}if(!A||!x){V.debug("failed to create shaders",A,x);return}let w="";if(l.shaderSource(A,n),l.compileShader(A),w+="vertShader:\n".concat(l.getShaderInfoLog(A),"\n"),l.attachShader(S,A),l.shaderSource(x,e),l.compileShader(x),w+="fragShader:\n".concat(l.getShaderInfoLog(x),"\n"),l.attachShader(S,x),l.linkProgram(S),l.useProgram(S),w+=l.getProgramInfoLog(S),!l.getProgramParameter(S,l.LINK_STATUS))throw"Could not compile WebGL program. \n\n".concat(w);c.current=S,V.debug("program created"),r==null||r(l,S);const R=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0);return R&&(l.waitSync(R,0,l.TIMEOUT_IGNORED),i==null||i()),()=>{V.debug("cleaning up"),c.current=null,l.detachShader(S,A),l.detachShader(S,x),l.deleteShader(A),l.deleteShader(x),l.deleteProgram(S)}},[l,e,n]),g!=null&&l&&d.current){const S=d.current,A=g*window.devicePixelRatio*(s!=null?s:1);S.width=A,S.height=A,l.viewport(0,0,A,A),f==null||f({width:A,height:A})}const D=c.current;return m.jsxs("div",{className:t,ref:p,children:[m.jsx("canvas",{ref:d,style:{width:g!=null?g:void 0,height:g!=null?g:void 0}},g),l&&D&&a&&m.jsx(a,{ctx:l,program:D})]})}function Mt({GLUniformsSetter:t,textureImage:n,textureName:e,variablesRef:a,className:o,vert:i,frag:r,onViewportUpdate:f,onRenderComplete:s,onGlAvailable:d,onCanvasSizeUpdate:c,scale:g}){const v=u.useRef(void 0),l=u.useCallback(async(p,D)=>{if(v.current=new t(p,D),n&&e){const S=p.createTexture();p.bindTexture(p.TEXTURE_2D,S),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,n);const A=p.getUniformLocation(D,e);p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,S),p.uniform1i(A,0)}d==null||d(p,D)},[t,n,e,d]),b=u.useRef(void 0),h=u.useCallback(()=>{v.current&&a.current&&v.current.setVariablesAndRender(a.current),b.current=requestAnimationFrame(h)},[a]);return u.useEffect(()=>(h(),()=>{b.current&&cancelAnimationFrame(b.current)}),[h]),m.jsx(Tt,{className:o,vert:i,frag:r,onViewportUpdate:f,onRenderComplete:s,onGlAvailable:l,onCanvasSizeUpdate:c,scale:g,Behaviors:()=>null})}const Dt="/assets/noise-watercolor-m3j88gni.webp",Ft={src:Dt};let ie;const tn=new window.Image;tn.crossOrigin="anonymous";tn.src=Ft.src;tn.onload=()=>{ie=tn};var Rt="#version 300 es\n#define E (2.71828182846)\n#define pi (3.14159265358979323844)\n#define NUM_OCTAVES (4)\n\nprecision highp float;\n\nstruct ColoredSDF {\n  float distance;\n  vec4 color;\n};\n\nstruct SDFArgs {\n  vec2 st;\n  float amount;\n  float duration;\n  float time;\n  float mainRadius;\n};\n\nfloat triangle(float t, float p) {\n  return 2.0 * abs(t / p - floor(t / p + 0.5));\n}\n\nfloat spring(float t, float d) {\n  return 1.0 - exp(-E * 2.0 * t) * cos((1.0 - d) * 115.0 * t);\n}\n\nfloat silkySmooth(float t, float k) {\n  return atan(k * sin((t - 0.5) * pi)) / atan(k) * 0.5 + 0.5;\n}\n\nfloat scaled(float edge0, float edge1, float x) {\n  return clamp((x - edge0) / (edge1 - edge0), float(0), float(1));\n}\n\nfloat fixedSpring(float t, float d) {\n  float s = mix(\n    1.0 - exp(-E * 2.0 * t) * cos((1.0 - d) * 115.0 * t),\n    1.0,\n    scaled(0.0, 1.0, t)\n  );\n  return s * (1.0 - t) + t;\n}\n\nfloat bounce(float t, float d) {\n  return -sin(pi * (1.0 - d) * t) *\n  (1.0 - t) *\n  exp(-2.71828182846 * 2.0 * t) *\n  t *\n  10.0;\n}\n\nfloat random(vec2 st) {\n  return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.5453123);\n}\n\nfloat random(ivec2 st) {\n  return random(vec2(st));\n}\n\nfloat random(float p) {\n  return random(vec2(p));\n}\n\nfloat opSmoothUnion(float d1, float d2, float k) {\n  if (k <= 0.0) {\n    k = 0.000001;\n  }\n  float h = clamp(0.5 + 0.5 * (d2 - d1) / k, 0.0, 1.0);\n  return mix(d2, d1, h) - k * h * (1.0 - h);\n}\n\nfloat opSmoothSubtraction(float d1, float d2, float k) {\n  if (k <= 0.0) {\n    k = 0.000001;\n  }\n  float h = clamp(0.5 - 0.5 * (d2 + d1) / k, 0.0, 1.0);\n  return mix(d2, -d1, h) + k * h * (1.0 - h);\n}\n\nfloat opSmoothIntersection(float d1, float d2, float k) {\n  if (k <= 0.0) {\n    k = 0.000001;\n  }\n  float h = clamp(0.5 - 0.5 * (d2 - d1) / k, 0.0, 1.0);\n  return mix(d2, d1, h) + k * h * (1.0 - h);\n}\n\nfloat sdRoundedBox(vec2 p, vec2 b, vec4 r) {\n  r.xy = p.x > 0.0 ? r.xy : r.zw;\n  r.x = p.y > 0.0 ? r.x : r.y;\n  vec2 q = abs(p) - b + r.x;\n  return min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - r.x;\n}\n\nfloat sdSegment(vec2 p, vec2 a, vec2 b) {\n  vec2 pa = p - a;\n  vec2 ba = b - a;\n  float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);\n  return length(pa - ba * h);\n}\n\nfloat sdArc(vec2 p, vec2 sca, vec2 scb, float ra, float rb) {\n  p *= mat2(sca.x, sca.y, -sca.y, sca.x);\n  p.x = abs(p.x);\n  return scb.y * p.x > scb.x * p.y\n    ? length(p - ra * scb) - rb\n    : abs(length(p) - ra) - rb;\n}\n\nfloat arc(vec2 st, float startAngle, float length, float radius, float width) {\n  return sdArc(\n    st,\n    vec2(sin(startAngle), cos(startAngle)),\n    vec2(sin(length), cos(length)),\n    radius,\n    width\n  );\n}\n\nvec2 rotate(vec2 v, float a) {\n  float s = sin(a);\n  float c = cos(a);\n  mat2 m = mat2(c, s, -s, c);\n  return m * v;\n}\n\nvec3 blendLinearBurn_13_5(vec3 base, vec3 blend) {\n  \n  return max(base + blend - vec3(1.0), vec3(0.0));\n}\n\nvec3 blendLinearBurn_13_5(vec3 base, vec3 blend, float opacity) {\n  return blendLinearBurn_13_5(base, blend) * opacity + base * (1.0 - opacity);\n}\n\nvec4 permute(vec4 x) {\n  return mod((x * 34.0 + 1.0) * x, 289.0);\n}\nvec4 taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t) {\n  return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n\nfloat cnoise(vec3 P) {\n  vec3 Pi0 = floor(P);\n  vec3 Pi1 = Pi0 + vec3(1.0);\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);\n  vec3 Pf1 = Pf0 - vec3(1.0);\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.z);\n  vec4 iz1 = vec4(Pi1.z);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(vec4(0.0), gx0) - 0.5);\n  gy0 -= sz0 * (step(vec4(0.0), gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(vec4(0.0), gx1) - 0.5);\n  gy1 -= sz1 * (step(vec4(0.0), gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(\n    vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110))\n  );\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(\n    vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111))\n  );\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(\n    vec4(n000, n100, n010, n110),\n    vec4(n001, n101, n011, n111),\n    fade_xyz.z\n  );\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\nfloat rand(vec2 n) {\n  return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\nfloat noise(vec2 p) {\n  vec2 ip = floor(p);\n  vec2 u = fract(p);\n  u = u * u * (3.0 - 2.0 * u);\n\n  float res = mix(\n    mix(rand(ip), rand(ip + vec2(1.0, 0.0)), u.x),\n    mix(rand(ip + vec2(0.0, 1.0)), rand(ip + vec2(1.0, 1.0)), u.x),\n    u.y\n  );\n  return res * res;\n}\n\nfloat fbm(vec2 x) {\n  float v = 0.0;\n  float a = 0.5;\n  vec2 shift = vec2(100.0);\n  \n  mat2 rot = mat2(cos(0.5), sin(0.5), -sin(0.5), cos(0.5));\n  for (int i = 0; i < NUM_OCTAVES; ++i) {\n    v += a * noise(x);\n    x = rot * x * 2.0 + shift;\n    a *= 0.5;\n  }\n  return v;\n}\n\n/**\n * End new code for colored orb\n */\n\nColoredSDF applyIdleState(\n  ColoredSDF sdf,\n  SDFArgs args,\n  bool isDarkMode /**\n * new bool\n */\n) {\n  float midRadius = 0.12; \n  float maxRadius = 0.3; \n  float t1 = 1.0; \n  float gamma = 3.0; \n  float omega = pi / 2.0; \n\n  \n  float k = exp(-gamma) * omega;\n\n  float radius;\n  if (args.time <= t1) {\n    \n    float t_prime = args.time / t1;\n    \n    float springValue = 1.0 - exp(-gamma * t_prime) * cos(omega * t_prime);\n    radius = midRadius * springValue;\n  } else {\n    \n    float adjustedTime = args.time - t1;\n    \n    radius =\n      midRadius + (maxRadius - midRadius) * (1.0 - exp(-k * adjustedTime));\n  }\n\n  \n  float distance = length(args.st) - radius;\n\n  \n  sdf.distance = mix(sdf.distance, distance, args.amount);\n\n  \n  \n  float alpha = sin(pi / 0.7 * args.time) * 0.3 + 0.7;\n  vec4 color = vec4(isDarkMode ? vec3(1.0) : vec3(0.0), alpha);\n\n  \n  sdf.color = mix(sdf.color, color, args.amount);\n\n  return sdf;\n}\n\nColoredSDF applyIdleStateLegacy(ColoredSDF sdf, SDFArgs args, bool isDarkMode) {\n  float connectedLinearAnimation = scaled(0.0, 2.0, args.duration);\n  float connectedAnimation = fixedSpring(connectedLinearAnimation, 0.96);\n  float circleSize =\n    mix(\n      pow(scaled(0.0, 3.0, args.time), 2.0) * 0.75 + 0.1,\n      1.0,\n      connectedAnimation\n    ) *\n    0.33;\n  vec2 rotatedCoords = rotate(\n    args.st,\n    -args.time * pi -\n      connectedAnimation * pi * 2.0 -\n      pi * 2.0 * 5.0 * silkySmooth(scaled(0.0, 5.0, args.time), 2.0)\n  );\n\n  float strokeWidth = mix(circleSize / 2.0, circleSize, connectedAnimation);\n  float connecting = abs(length(args.st) - circleSize) - strokeWidth;\n\n  float connected = length(args.st) - circleSize;\n  float idleDist = mix(connecting, connected, connectedAnimation);\n\n  float d = min(sdf.distance, idleDist);\n  sdf.distance = mix(sdf.distance, d, args.amount);\n  float angle = atan(rotatedCoords.y, rotatedCoords.x);\n  float alpha = mix(\n    min(1.0, scaled(-pi, pi, angle)),\n    1.0,\n    connectedLinearAnimation\n  );\n\n  float spinningCircleDist =\n    length(\n      rotatedCoords -\n        vec2(-mix(circleSize, strokeWidth, connectedAnimation), 0.0)\n    ) -\n    strokeWidth;\n\n  alpha = min(\n    1.0,\n    max(\n      alpha,\n      smoothstep(0.005, 0.0, spinningCircleDist) + connectedAnimation * 4.0\n    )\n  );\n\n  sdf.color = mix(\n    sdf.color,\n    vec4(isDarkMode ? vec3(1.0) : vec3(0.0), alpha),\n    args.amount\n  );\n  return sdf;\n}\n\nColoredSDF applyListenState(\n  ColoredSDF sdf,\n  SDFArgs args,\n  float micLevel,\n  float listenTimestamp, /* new */\n  float touchDownTimestamp, /* new */\n  float touchUpTimestamp, /* new */\n  bool fadeBloopWhileListening /* new */\n) {\n  float breathingSequence = sin(args.time) * 0.5 + 0.5;\n  float entryAnimation = fixedSpring(scaled(0.0, 3.0, args.duration), 0.9);\n\n  float touch =\n    fixedSpring(scaled(0.0, 1.0, args.time - touchDownTimestamp), 0.99) -\n    fixedSpring(scaled(0.0, 0.8, args.time - touchUpTimestamp), 1.0);\n\n  float listenAnimation = clamp(\n    spring(scaled(0.0, 0.9, args.duration), 1.0),\n    0.0,\n    1.0\n  );\n  float radius = 0.0;\n  float smoothlevel = micLevel;\n  float l1 = smoothlevel;\n  radius = 0.38 + l1 * 0.05 + breathingSequence * 0.03;\n  radius *= 1.0 - (1.0 - entryAnimation) * 0.25;\n\n  float ring = 10000.0;\n\n  \n  if (touch > 0.0) {\n    touch = min(touch, listenAnimation); \n    float arcWidth = radius * 0.1;\n\n    \n    radius -= touch * arcWidth * 2.3;\n    \n    radius = min(\n      radius,\n      mix(radius, args.mainRadius - arcWidth * 2.3 - l1 * 0.01, touch)\n    );\n\n    float startAngle = 0.0;\n    float arcLengthTouch =\n      smoothstep(0.04, 1.0, touch) * pi * (1.0 - arcWidth / 3.0 / radius);\n\n    float arcLength = 0.0;\n    float radiusTouch =\n      radius * fixedSpring(scaled(0.0, 1.0, args.duration), 1.0) * args.amount +\n      l1 * 0.01;\n\n    radiusTouch +=\n      arcWidth * 1.3 * mix(-1.0, 1.0, smoothstep(0.0, 0.12, touch));\n\n    float ringRadius = 0.0;\n    arcLength = arcLengthTouch;\n    ringRadius = radiusTouch;\n    startAngle = pi / 2.0 - (args.time - touchDownTimestamp) / 2.0;\n\n    ring = arc(args.st, startAngle, arcLength, ringRadius, arcWidth); \n  }\n\n  float d = length(args.st) - radius;\n\n  d = min(d, ring);\n\n  sdf.distance = mix(sdf.distance, d, args.amount);\n\n  if (fadeBloopWhileListening) {\n    \n    sdf.color.a = mix(\n      sdf.color.a,\n      mix(1.0, 1.0 - l1 * 0.6, listenAnimation),\n      args.amount\n    );\n  } else {\n    sdf.color.a = 1.0;\n  }\n\n  return sdf;\n}\n\nColoredSDF applyThinkState(ColoredSDF sdf, SDFArgs args) {\n  float d = 1000.0; \n  int count = 5; \n  float entryAnimation = spring(scaled(0.0, 1.0, args.duration), 1.0);\n\n  float thinkingDotEntryAnimation = spring(\n    scaled(0.1, 1.1, args.duration),\n    1.0\n  );\n  float thinkingDotRadius =\n    mix(0.2, 0.06, thinkingDotEntryAnimation) * args.amount;\n\n  \n  args.st.x -= thinkingDotRadius * 0.5 * thinkingDotEntryAnimation;\n\n  for (int i = 0; i < count; i++) {\n    float f = float(float(i) + 0.5) / float(count); \n    float a =\n      -f * pi * 2.0 +\n      args.time / 3.0 +\n      spring(scaled(0.0, 10.0, args.duration), 1.0) * pi / 2.0;\n    float ringRadi = args.mainRadius * 0.45 * entryAnimation;\n\n    \n    ringRadi -=\n      (sin(\n        entryAnimation * pi * 4.0 +\n          a * pi * 2.0 +\n          args.time * 3.0 -\n          silkySmooth(args.time / 4.0, 2.0) * pi * 1.0\n      ) *\n        0.5 +\n        0.5) *\n      args.mainRadius *\n      0.1;\n\n    vec2 pos = vec2(cos(a), sin(a)) * ringRadi;\n    float dd = length(args.st - pos) - args.mainRadius * 0.5;\n\n    \n    d = opSmoothUnion(\n      d,\n      dd,\n      0.03 * scaled(0.0, 10.0, args.duration) + 0.8 * (1.0 - entryAnimation)\n    );\n\n    \n    float dotAngle = f * pi * 2.0;\n    float dotRingRadius =\n      (sin(\n        thinkingDotEntryAnimation * pi * 4.0 +\n          a * pi * 2.0 +\n          args.time * 0.1 * pi * 4.0\n      ) *\n        0.5 +\n        0.5) *\n      thinkingDotRadius *\n      0.3;\n    vec2 dotPos =\n      vec2(-args.mainRadius, args.mainRadius) * 0.8 * thinkingDotEntryAnimation;\n    vec2 dotOffset =\n      vec2(cos(dotAngle + args.time), sin(dotAngle + args.time)) *\n      dotRingRadius;\n    float dotD = length(args.st - dotPos - dotOffset) - thinkingDotRadius * 0.8;\n    d = opSmoothUnion(\n      d,\n      dotD,\n      (1.0 - min(thinkingDotEntryAnimation, args.amount)) * thinkingDotRadius\n    );\n  }\n  sdf.distance = mix(sdf.distance, d, args.amount);\n  sdf.color.a = 1.0;\n  return sdf;\n}\n\nColoredSDF applySpeakState(\n  ColoredSDF sdf,\n  SDFArgs args,\n  vec4 avgMag,\n  float silenceAmount,\n  float silenceDuration\n) {\n  float d = 1000.0;\n  int barCount = 4;\n  for (int i = 0; i < barCount; i++) {\n    float f = float(float(i) + 0.5) / float(barCount); \n\n    \n    float w = 1.0 / float(barCount) * 0.44;\n    float h = w;\n\n    \n    float wave = sin(f * pi * 0.8 + args.time) * 0.5 + 0.5;\n    float entryAnimation = spring(\n      scaled(0.1 + wave * 0.4, 1.0 + wave * 0.4, args.duration),\n      0.98\n    );\n    vec2 pos = vec2(f - 0.5, 0.0) * args.mainRadius * 1.9;\n    pos.y = 0.25 * (1.0 - entryAnimation);\n\n    \n    if (silenceAmount > 0.0) {\n      float bounceStagger = f / 5.0;\n      float bounceDelay = 0.6;\n      float bounceTimer = scaled(\n        bounceDelay,\n        bounceDelay + 1.0,\n        fract((silenceDuration + bounceStagger) / 2.0) * 2.0\n      );\n      pos.y +=\n        bounce(bounceTimer, 6.0) *\n        w *\n        0.25 *\n        silenceAmount *\n        pow(entryAnimation, 4.0) *\n        pow(args.amount, 4.0); \n    }\n\n    \n    h += avgMag[i] * (0.1 + (1.0 - abs(f - 0.5) * 2.0) * 0.1);\n\n    float dd = sdRoundedBox(args.st - pos, vec2(w, h), vec4(w));\n    d = opSmoothUnion(d, dd, 0.2 * (1.0 - args.amount));\n\n  }\n\n  sdf.distance = mix(sdf.distance, d, args.amount);\n  sdf.color.a = 1.0;\n  return sdf;\n}\n\nColoredSDF applyListenAndSpeakState(\n  ColoredSDF sdf,\n  SDFArgs args,\n  float micLevel,\n  vec4 avgMag,\n  vec4 cumulativeAudio,\n  int binCount,\n  vec3 bloopColorMain,\n  vec3 bloopColorLow,\n  vec3 bloopColorMid,\n  vec3 bloopColorHigh,\n  sampler2D uTextureNoise,\n  bool listening,\n  bool isAdvancedBloop\n) {\n  float entryAnimation = fixedSpring(scaled(0.0, 2.0, args.duration), 0.92);\n\n  \n  \n  float radius =\n    (listening ? 0.37 : 0.43) * (1.0 - (1.0 - entryAnimation) * 0.25) +\n    micLevel * 0.065;\n\n  \n  \n  \n  float maxDisplacement = 0.01;\n\n  \n  float oscillationPeriod = 4.0;\n  \n  float displacementOffset =\n    maxDisplacement * sin(2.0 * pi / oscillationPeriod * args.time);\n  \n  vec2 adjusted_st = args.st - vec2(0.0, displacementOffset);\n\n  \n  if (!isAdvancedBloop) {\n    sdf.color = mix(sdf.color, vec4(bloopColorMain, 1.0), args.amount);\n    sdf.distance = mix(sdf.distance, length(adjusted_st) - radius, args.amount);\n    return sdf;\n  }\n\n  \n  \n  vec4 uAudioAverage = avgMag;\n  vec4 uCumulativeAudio = cumulativeAudio;\n\n  \n  float scaleFactor = 1.0 / (2.0 * radius);\n  vec2 uv = adjusted_st * scaleFactor + 0.5;\n  uv.y = 1.0 - uv.y;\n\n  \n  float noiseScale = 1.25; \n  float windSpeed = 0.075; \n  float warpPower = 0.19; \n  float waterColorNoiseScale = 18.0; \n  float waterColorNoiseStrength = 0.01; \n  float textureNoiseScale = 1.0; \n  float textureNoiseStrength = 0.08; \n  float verticalOffset = 0.09; \n  float waveSpread = 1.0; \n  float layer1Amplitude = 1.0; \n  float layer1Frequency = 1.0; \n  float layer2Amplitude = 1.0; \n  float layer2Frequency = 1.0; \n  float layer3Amplitude = 1.0; \n  float layer3Frequency = 1.0; \n  float fbmStrength = 1.0; \n  float fbmPowerDamping = 0.55; \n  float overallSoundScale = 1.0; \n  float blurRadius = 1.0;\n  float timescale = 1.0;\n\n  \n  float time = args.time * timescale * 0.85;\n\n  vec3 sinOffsets = vec3(\n    uCumulativeAudio.x * 0.15 * overallSoundScale,\n    -uCumulativeAudio.y * 0.5 * overallSoundScale,\n    uCumulativeAudio.z * 1.5 * overallSoundScale\n  );\n  verticalOffset += 1.0 - waveSpread;\n\n  \n  float noiseX = cnoise(\n    vec3(\n      uv * 1.0 + vec2(0.0, 74.8572),\n      (time + uCumulativeAudio.x * 0.05 * overallSoundScale) * 0.3\n    )\n  );\n  float noiseY = cnoise(\n    vec3(\n      uv * 1.0 + vec2(203.91282, 10.0),\n      (time + uCumulativeAudio.z * 0.05 * overallSoundScale) * 0.3\n    )\n  );\n\n  uv += vec2(noiseX * 2.0, noiseY) * warpPower;\n\n  \n  float noiseA =\n    cnoise(vec3(uv * waterColorNoiseScale + vec2(344.91282, 0.0), time * 0.3)) +\n    cnoise(\n      vec3(uv * waterColorNoiseScale * 2.2 + vec2(723.937, 0.0), time * 0.4)\n    ) *\n      0.5;\n  uv += noiseA * waterColorNoiseStrength;\n  uv.y -= verticalOffset;\n\n  \n  vec2 textureUv = uv * textureNoiseScale;\n  float textureSampleR0 = texture(uTextureNoise, textureUv).r;\n  float textureSampleG0 = texture(\n    uTextureNoise,\n    vec2(textureUv.x, 1.0 - textureUv.y)\n  ).g;\n  float textureNoiseDisp0 =\n    mix(\n      textureSampleR0 - 0.5,\n      textureSampleG0 - 0.5,\n      (sin(time + uCumulativeAudio.a * 2.0) + 1.0) * 0.5\n    ) *\n    textureNoiseStrength;\n  textureUv += vec2(63.861 + uCumulativeAudio.x * 0.05, 368.937);\n  float textureSampleR1 = texture(uTextureNoise, textureUv).r;\n  float textureSampleG1 = texture(\n    uTextureNoise,\n    vec2(textureUv.x, 1.0 - textureUv.y)\n  ).g;\n  float textureNoiseDisp1 =\n    mix(\n      textureSampleR1 - 0.5,\n      textureSampleG1 - 0.5,\n      (sin(time + uCumulativeAudio.a * 2.0) + 1.0) * 0.5\n    ) *\n    textureNoiseStrength;\n  textureUv += vec2(272.861, 829.937 + uCumulativeAudio.y * 0.1);\n  textureUv += vec2(180.302 - uCumulativeAudio.z * 0.1, 819.871);\n  float textureSampleR3 = texture(uTextureNoise, textureUv).r;\n  float textureSampleG3 = texture(\n    uTextureNoise,\n    vec2(textureUv.x, 1.0 - textureUv.y)\n  ).g;\n  float textureNoiseDisp3 =\n    mix(\n      textureSampleR3 - 0.5,\n      textureSampleG3 - 0.5,\n      (sin(time + uCumulativeAudio.a * 2.0) + 1.0) * 0.5\n    ) *\n    textureNoiseStrength;\n  uv += textureNoiseDisp0;\n\n  \n  vec2 st = uv * noiseScale;\n\n  vec2 q = vec2(0.0);\n  q.x = fbm(\n    st * 0.5 +\n      windSpeed * (time + uCumulativeAudio.a * 0.175 * overallSoundScale)\n  );\n  q.y = fbm(\n    st * 0.5 +\n      windSpeed * (time + uCumulativeAudio.x * 0.136 * overallSoundScale)\n  );\n\n  vec2 r = vec2(0.0);\n  r.x = fbm(\n    st +\n      1.0 * q +\n      vec2(0.3, 9.2) +\n      0.15 * (time + uCumulativeAudio.y * 0.234 * overallSoundScale)\n  );\n  r.y = fbm(\n    st +\n      1.0 * q +\n      vec2(8.3, 0.8) +\n      0.126 * (time + uCumulativeAudio.z * 0.165 * overallSoundScale)\n  );\n\n  float f = fbm(st + r - q);\n  float fullFbm = (f + 0.6 * f * f + 0.7 * f + 0.5) * 0.5;\n  fullFbm = pow(fullFbm, fbmPowerDamping);\n  fullFbm *= fbmStrength;\n\n  \n  blurRadius = blurRadius * 1.5;\n  vec2 snUv =\n    (uv + vec2((fullFbm - 0.5) * 1.2) + vec2(0.0, 0.025) + textureNoiseDisp0) *\n    vec2(layer1Frequency, 1.0);\n  float sn =\n    noise(\n      snUv * 2.0 + vec2(sin(sinOffsets.x * 0.25), time * 0.5 + sinOffsets.x)\n    ) *\n    2.0 *\n    layer1Amplitude;\n  float sn2 = smoothstep(\n    sn - 1.2 * blurRadius,\n    sn + 1.2 * blurRadius,\n    (snUv.y - 0.5 * waveSpread) *\n      (5.0 - uAudioAverage.x * 0.1 * overallSoundScale * 0.5) +\n      0.5\n  );\n\n  vec2 snUvBis =\n    (uv + vec2((fullFbm - 0.5) * 0.85) + vec2(0.0, 0.025) + textureNoiseDisp1) *\n    vec2(layer2Frequency, 1.0);\n  float snBis =\n    noise(\n      snUvBis * 4.0 +\n        vec2(\n          sin(sinOffsets.y * 0.15) * 2.4 + 293.0,\n          time * 1.0 + sinOffsets.y * 0.5\n        )\n    ) *\n    2.0 *\n    layer2Amplitude;\n  float sn2Bis = smoothstep(\n    snBis - (0.9 + uAudioAverage.y * 0.4 * overallSoundScale) * blurRadius,\n    snBis + (0.9 + uAudioAverage.y * 0.8 * overallSoundScale) * blurRadius,\n    (snUvBis.y - 0.6 * waveSpread) * (5.0 - uAudioAverage.y * 0.75) + 0.5\n  );\n\n  vec2 snUvThird =\n    (uv + vec2((fullFbm - 0.5) * 1.1) + textureNoiseDisp3) *\n    vec2(layer3Frequency, 1.0);\n  float snThird =\n    noise(\n      snUvThird * 6.0 +\n        vec2(\n          sin(sinOffsets.z * 0.1) * 2.4 + 153.0,\n          time * 1.2 + sinOffsets.z * 0.8\n        )\n    ) *\n    2.0 *\n    layer3Amplitude;\n  float sn2Third = smoothstep(\n    snThird - 0.7 * blurRadius,\n    snThird + 0.7 * blurRadius,\n    (snUvThird.y - 0.9 * waveSpread) * 6.0 + 0.5\n  );\n\n  sn2 = pow(sn2, 0.8);\n  sn2Bis = pow(sn2Bis, 0.9);\n\n  \n  vec3 sinColor;\n  sinColor = blendLinearBurn_13_5(bloopColorMain, bloopColorLow, 1.0 - sn2);\n  sinColor = blendLinearBurn_13_5(\n    sinColor,\n    mix(bloopColorMain, bloopColorMid, 1.0 - sn2Bis),\n    sn2\n  );\n  sinColor = mix(\n    sinColor,\n    mix(bloopColorMain, bloopColorHigh, 1.0 - sn2Third),\n    sn2 * sn2Bis\n  );\n\n  \n  sdf.color = mix(sdf.color, vec4(sinColor, 1), args.amount);\n\n  \n  sdf.distance = mix(sdf.distance, length(adjusted_st) - radius, args.amount);\n\n  return sdf;\n}\n\nfloat micSdf(vec2 st, float muted) {\n  float d = 100.0;\n  float strokeWidth = 0.03;\n  vec2 elementSize = vec2(0.12, 0.26);\n  vec2 elementPos = vec2(0.0, elementSize.y * 0.585);\n  float element = sdRoundedBox(\n    st - elementPos,\n    elementSize,\n    vec4(min(elementSize.x, elementSize.y))\n  );\n  element = element - strokeWidth;\n  d = min(d, element);\n\n  vec2 standSize = elementSize * 2.2;\n  vec2 standPos = vec2(elementPos.x, elementPos.y - 0.05);\n  st.y += 0.08;\n  float ta = -pi / 2.0; \n  float tb = pi / 2.0; \n  float w = 0.0;\n  float stand = sdArc(\n    st - standPos,\n    vec2(sin(ta), cos(ta)),\n    vec2(sin(tb), cos(tb)),\n    standSize.x,\n    w\n  );\n  stand = min(\n    stand,\n    sdSegment(st - standPos, vec2(standSize.x, 0.06), vec2(standSize.x, 0.0))\n  );\n  stand = min(\n    stand,\n    sdSegment(st - standPos, vec2(-standSize.x, 0.06), vec2(-standSize.x, 0.0))\n  );\n\n  float foot = sdSegment(\n    st - standPos,\n    vec2(0.0, -standSize.x),\n    vec2(0.0, -standSize.x * 1.66)\n  );\n  foot = min(\n    foot,\n    sdSegment(\n      st - standPos,\n      vec2(-standSize.x * 0.68, -standSize.x * 1.66),\n      vec2(standSize.x * 0.68, -standSize.x * 1.66)\n    )\n  );\n  stand = min(stand, foot);\n\n  d = min(d, abs(stand) - strokeWidth);\n\n  return d;\n}\n\nColoredSDF applyBottomAlignedBarsAndMicState(\n  ColoredSDF sdf,\n  SDFArgs args,\n  vec4 avgMag,\n  float micLevel,\n  bool isDarkMode\n) {\n  float d = 1000.0;\n  int barCount = 5;\n  int loopCount = barCount;\n  if (args.amount == 0.0) {\n    loopCount = 1; \n  }\n  for (int i = 0; i < loopCount; i++) {\n    float f = float(float(i) + 0.5) / float(barCount); \n\n    \n    float w = 1.0 / float(barCount) * 0.42;\n    float h = w;\n\n    \n    float entryDuration = 1.8;\n    float entryAnimation =\n      fixedSpring(scaled(0.0, entryDuration, args.duration), 0.94) *\n      args.amount;\n    vec2 pos = vec2(f - 0.5, 0.0) * args.mainRadius * 1.9;\n    pos.x *= entryAnimation;\n\n    if (i == 0) {\n      float micScale = mix(6.0 - micLevel * 2.0, 6.0, args.amount);\n      float yOffset = w * 2.0;\n      d =\n        micSdf(\n          (args.st - pos + vec2(-w * 0.15 * args.amount, yOffset)) * micScale,\n          1.0 - args.amount\n        ) /\n        micScale;\n    } else {\n      \n      h += avgMag[i - 1] * (0.1 + (1.0 - abs(f - 0.5) * 2.0) * 0.1) * 0.7;\n      h = mix(w, h, smoothstep(0.8, 1.0, entryAnimation));\n\n      float bubbleInDur = 0.5;\n      float bubbleOutDur = 0.4;\n\n      \n      float bubbleEffect =\n        fixedSpring(\n          scaled(\n            f / 4.0,\n            f / 4.0 + bubbleInDur,\n            args.duration - entryDuration / 8.0\n          ),\n          1.0\n        ) *\n        pow(\n          1.0 -\n            scaled(\n              f / 8.0 + bubbleInDur / 8.0,\n              f / 4.0 + bubbleInDur / 8.0 + bubbleOutDur,\n              args.duration - entryDuration / 8.0\n            ),\n          2.0\n        );\n\n      h += bubbleEffect * min(h, w);\n\n      \n      w *= args.amount;\n      h *= args.amount;\n\n      h = min(h, 0.23); \n\n      pos.y -= 0.25;\n      pos.y += h;\n      pos.y += bubbleEffect * w * 0.5;\n\n      float dd = sdRoundedBox(args.st - pos, vec2(w, h), vec4(w));\n      d = min(d, dd);\n    }\n  }\n\n  sdf.distance = d; \n  sdf.color = mix(\n    sdf.color,\n    isDarkMode\n      ? vec4(1.0)\n      : vec4(0.0, 0.0, 0.0, 1.0),\n    args.amount\n  );\n  return sdf;\n}\n\nColoredSDF applyHaltState(ColoredSDF sdf, SDFArgs args) {\n  \n  float radius = mix(\n    0.4,\n    mix(0.4, 0.45, args.amount),\n    sin(args.time * 0.25) * 0.5 + 0.5\n  );\n  float strokeWidth = mix(radius / 2.0, 0.02, args.amount);\n\n  \n  radius -= strokeWidth;\n\n  radius *= mix(0.7, 1.0, args.amount);\n  float circle = abs(length(args.st) - radius) - strokeWidth;\n\n  sdf.distance = mix(sdf.distance, circle, args.amount);\n  sdf.color.a = mix(sdf.color.a, pow(0.8, 2.2), scaled(0.5, 1.0, args.amount));\n  return sdf;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend) {\n  return blend;\n}\n\nvec3 blendNormal(vec3 base, vec3 blend, float opacity) {\n  return blendNormal(base, blend) * opacity + base * (1.0 - opacity);\n}\n\nin vec2 out_uv;\nout vec4 fragColor;\n\nlayout(std140) uniform BlorbUniformsObject {\n  float time;\n  float micLevel;\n  float touchDownTimestamp;\n  float touchUpTimestamp;\n  float stateListen;\n  float listenTimestamp;\n  float stateThink;\n  float thinkTimestamp;\n  float stateSpeak;\n  float speakTimestamp;\n  float readyTimestamp;\n  float stateHalt;\n  float haltTimestamp;\n  float stateFailedToConnect;\n  float failedToConnectTimestamp;\n  vec4 avgMag;\n  vec4 cumulativeAudio;\n  vec2 viewport;\n  float screenScaleFactor;\n  float silenceAmount;\n  float silenceTimestamp;\n  bool isDarkMode;\n  bool fadeBloopWhileListening;\n  bool isNewBloop;\n  bool isAdvancedBloop;\n  vec3 bloopColorMain;\n  vec3 bloopColorLow;\n  vec3 bloopColorMid;\n  vec3 bloopColorHigh;\n} ubo; \n\nuniform sampler2D uTextureNoise; \n\nvoid main() {\n  vec2 st = out_uv - 0.5;\n  float viewRatio = ubo.viewport.y / ubo.viewport.x;\n  st.y *= viewRatio;\n\n  ColoredSDF sdf;\n  sdf.distance = 1000.0;\n  sdf.color = vec4(1.0);\n\n  SDFArgs args;\n  args.st = st;\n  args.time = ubo.time;\n  args.mainRadius = 0.49;\n\n  SDFArgs idleArgs = args;\n  SDFArgs listenArgs = args;\n  SDFArgs thinkArgs = args;\n  SDFArgs speakArgs = args;\n  SDFArgs haltArgs = args;\n  SDFArgs failedToConnectArgs = args;\n\n  idleArgs.amount = 1.0;\n  listenArgs.amount = ubo.stateListen;\n  thinkArgs.amount = ubo.stateThink;\n  speakArgs.amount = ubo.stateSpeak;\n  haltArgs.amount = ubo.stateHalt;\n  failedToConnectArgs.amount = ubo.stateFailedToConnect;\n\n  idleArgs.duration = ubo.time - ubo.readyTimestamp;\n  listenArgs.duration = ubo.time - ubo.listenTimestamp;\n  thinkArgs.duration = ubo.time - ubo.thinkTimestamp;\n  speakArgs.duration = ubo.time - ubo.speakTimestamp;\n  haltArgs.duration = ubo.time - ubo.haltTimestamp;\n  failedToConnectArgs.duration = ubo.time - ubo.failedToConnectTimestamp;\n\n  if (ubo.isNewBloop) {\n    sdf = applyIdleState(sdf, idleArgs, ubo.isDarkMode);\n  } else {\n    sdf = applyIdleStateLegacy(sdf, idleArgs, ubo.isDarkMode);\n  }\n\n  if (failedToConnectArgs.amount > 0.0) {\n    sdf = applyHaltState(sdf, failedToConnectArgs);\n  }\n\n  if (listenArgs.amount > 0.0) {\n    if (ubo.isAdvancedBloop) {\n      if (speakArgs.amount > 0.0) {\n        listenArgs.amount = 1.0;\n      }\n\n      \n      int binCount = 1;\n      sdf = applyListenAndSpeakState(\n        sdf,\n        listenArgs,\n        ubo.micLevel,\n        ubo.avgMag,\n        ubo.cumulativeAudio,\n        binCount,\n        ubo.bloopColorMain,\n        ubo.bloopColorLow,\n        ubo.bloopColorMid,\n        ubo.bloopColorHigh,\n        uTextureNoise,\n        true,\n        ubo.isAdvancedBloop\n      );\n    } else {\n      sdf = applyListenState(\n        sdf,\n        listenArgs,\n        ubo.micLevel,\n        ubo.listenTimestamp,\n        ubo.touchDownTimestamp,\n        ubo.touchUpTimestamp,\n        ubo.fadeBloopWhileListening\n      );\n    }\n  }\n\n  if (thinkArgs.amount > 0.0) {\n    sdf = applyThinkState(sdf, thinkArgs);\n  }\n\n  if (speakArgs.amount > 0.0) {\n    if (ubo.isAdvancedBloop) {\n      int binCount = 1;\n      sdf = applyListenAndSpeakState(\n        sdf,\n        speakArgs,\n        ubo.micLevel,\n        ubo.avgMag,\n        ubo.cumulativeAudio,\n        binCount,\n        ubo.bloopColorMain,\n        ubo.bloopColorLow,\n        ubo.bloopColorMid,\n        ubo.bloopColorHigh,\n        uTextureNoise,\n        false,\n        ubo.isAdvancedBloop\n      );\n    } else {\n      float silenceDuration = ubo.time - ubo.silenceTimestamp;\n      sdf = applySpeakState(\n        sdf,\n        speakArgs,\n        ubo.avgMag,\n        ubo.silenceAmount,\n        silenceDuration\n      );\n    }\n  }\n\n  if (haltArgs.amount > 0.0) {\n    sdf = applyHaltState(sdf, haltArgs);\n  }\n\n  float clampingTolerance = 0.0075 / ubo.screenScaleFactor;\n  float clampedShape = smoothstep(clampingTolerance, 0.0, sdf.distance);\n  float alpha = sdf.color.a * clampedShape;\n  if (!ubo.isNewBloop) {\n    alpha *= scaled(0.0, 1.0, ubo.time);\n  }\n  fragColor = vec4(sdf.color.rgb * alpha, alpha);\n}",_t="#version 300 es\n\nout vec4 out_position;\nout vec2 out_uv;\n\nconst vec4 blitFullscreenTrianglePositions[6] = vec4[](\n  vec4(-1.0, -1.0, 0.0, 1.0),\n  vec4(3.0, -1.0, 0.0, 1.0),\n  vec4(-1.0, 3.0, 0.0, 1.0),\n  vec4(-1.0, -1.0, 0.0, 1.0),\n  vec4(3.0, -1.0, 0.0, 1.0),\n  vec4(-1.0, 3.0, 0.0, 1.0)\n);\n\nvoid main() {\n  out_position = blitFullscreenTrianglePositions[gl_VertexID];\n  out_uv = out_position.xy * 0.5 + 0.5;\n  out_uv.y = 1.0 - out_uv.y;\n  gl_Position = out_position;\n}",U,K,F,B,O,z,N,on;const an=class an{constructor(n,e){E(this,U);E(this,K);E(this,F);E(this,B,[]);E(this,O,{});E(this,z);E(this,N);k(this,F,n);const a=n.getUniformBlockIndex(e,C(an,on)),o=n.getActiveUniformBlockParameter(e,a,n.UNIFORM_BLOCK_DATA_SIZE);k(this,z,n.createBuffer()),n.bindBuffer(n.UNIFORM_BUFFER,C(this,z)),n.bufferData(n.UNIFORM_BUFFER,o,n.DYNAMIC_DRAW);const i=0;n.bindBufferBase(n.UNIFORM_BUFFER,i,C(this,z)),n.uniformBlockBinding(e,a,i);const r=n.getActiveUniformBlockParameter(e,a,n.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES);k(this,B,[]),k(this,O,{});for(let f=0;f<r.length;f++){const s=r[f],d=n.getActiveUniform(e,s);if(!d)throw new Error("No uniformInfo for index "+s);let c=d.name;c=c.replace(/\[0\]$/,"");const g=n.getActiveUniforms(e,[s],n.UNIFORM_OFFSET)[0];C(this,B).push(c),C(this,O)[c]=g}k(this,N,new ArrayBuffer(o)),k(this,U,new Float32Array(C(this,N))),k(this,K,new Int32Array(C(this,N)))}setVariablesAndRender(n){for(const e of C(this,B)){const[,a]=e.split("."),i=C(this,O)[e]/4,r=n[a];typeof r=="number"?C(this,U)[i]=r:typeof r=="boolean"?C(this,K)[i]=r?1:0:Array.isArray(r)&&C(this,U).set(r,i)}C(this,F).bindBuffer(C(this,F).UNIFORM_BUFFER,C(this,z)),C(this,F).bufferSubData(C(this,F).UNIFORM_BUFFER,0,C(this,N)),C(this,F).drawArrays(C(this,F).TRIANGLE_STRIP,0,6)}};U=new WeakMap,K=new WeakMap,F=new WeakMap,B=new WeakMap,O=new WeakMap,z=new WeakMap,N=new WeakMap,on=new WeakMap,E(an,on,"BlorbUniformsObject");let xn=an;function y(t){const n=t.replace("#",""),e=parseInt(n.substring(0,2),16)/255,a=parseInt(n.substring(2,4),16)/255,o=parseInt(n.substring(4,6),16)/255;return new Float32Array([e,a,o])}const H={BLUE:{bloopColorMain:y("#DCF7FF"),bloopColorLow:y("#0181FE"),bloopColorMid:y("#A4EFFF"),bloopColorHigh:y("#FFFDEF")},DARK_BLUE:{bloopColorMain:y("#DAF5FF"),bloopColorLow:y("#0066CC"),bloopColorMid:y("#2EC6F5"),bloopColorHigh:y("#72EAF5")},GREYSCALE:{bloopColorMain:y("#D7D7D7"),bloopColorLow:y("#303030"),bloopColorMid:y("#989898"),bloopColorHigh:y("#FFFFFF")},WHITE:{bloopColorMain:y("#FFFFFF"),bloopColorLow:y("#FFFFFF"),bloopColorMid:y("#FFFFFF"),bloopColorHigh:y("#FFFFFF")},BLACK:{bloopColorMain:y("#000000"),bloopColorLow:y("#000000"),bloopColorMid:y("#000000"),bloopColorHigh:y("#000000")},ANGSTY_BLACK:{bloopColorMain:y("#494949"),bloopColorLow:y("#000000"),bloopColorMid:y("#7F7F7F"),bloopColorHigh:y("#696969")},HELLO_TIBOR:{bloopColorMain:y("#FFE987"),bloopColorLow:y("#E58B28"),bloopColorMid:y("#FB7256"),bloopColorHigh:y("#F3FDFE")}},Et=({isAdvanced:t,overrideColor:n})=>{const e=$n();return n&&H[n]?H[n]:t?H.BLUE:e?H.WHITE:H.BLACK},Kn=[300,300],kt={bands:4,loPass:0,hiPass:400},Pt=t=>{const n=Sn(t,{bands:An,updateInterval:sn,loPass:0,hiPass:400,analyserOptions:{fftSize:te}});return n.length===0?oe:n},Lt=(t,n)=>{const e=Pt(t),a=ae(e,{sampleRate:se,binCount:n.bins,bandCount:n.bands,gainMultipliers:n.gainMultipliers}),o=yn({magnitudes:e,binCount:1,gainMultiplier:1});return{bandMagnitudes:a,cumulativeMagnitude:o}},It=t=>{const[n,e]=u.useState({audioData:[0,0,0,0],cumulativeAudioData:[0,0,0,0]}),a=u.useRef([0,0,0,0]),o=u.useRef(void 0),i=u.useRef(performance.now()),{bandMagnitudes:r,cumulativeMagnitude:f}=Lt(t,{bands:3,bins:1,gainMultipliers:[10,1,1]});a.current=[...r,f].flat();const s=u.useCallback(()=>{const d=performance.now(),c=(d-i.current)/1e3;i.current=d;const g=a.current,{audioData:v,cumulativeAudioData:l}=n,b=yt({deltaTimeS:c,audioDataRaw:g,prevAudioData:v,prevCumulativeAudioData:l});e(b)},[n]);return u.useEffect(()=>(o.current||(o.current=window.setInterval(s,sn)),()=>{clearInterval(o.current),o.current=void 0}),[s]),n},Xn=Promise.resolve();function re({url:t,readyToPlay:n}){const e=u.useRef(void 0),a=u.useRef(Xn);return u.useEffect(()=>(e.current||(e.current=document.createElement("audio")),()=>{a.current.then(()=>{e.current&&(e.current.pause(),e.current.removeAttribute("src"),e.current.remove(),a.current=Xn)})}),[]),u.useEffect(()=>{t&&e.current&&e.current.src!==t&&n&&a.current.then(()=>{e.current&&(e.current.crossOrigin="anonymous",e.current.src=t,a.current=e.current.play())})},[n,t]),e.current}function zt({className:t,url:n}){const[e,a]=u.useState(!1),o=re({url:n,readyToPlay:e}),i=Sn(o,kt),r=u.useMemo(()=>[0,0,0,0],[]);return m.jsx(le,{className:t,isAdvanced:!1,avgMag:i,cumulativeAudioData:r,onRenderComplete:()=>a(!0)})}function Nt({className:t,url:n,overrideColor:e}){const[a,o]=u.useState(!1),i=re({url:n,readyToPlay:a}),r=It(i),{audioData:f,cumulativeAudioData:s}=r;return m.jsx(le,{className:t,isAdvanced:!0,overrideColor:e,avgMag:f,cumulativeAudioData:s,onRenderComplete:()=>o(!0)})}const le=({className:t,avgMag:n,cumulativeAudioData:e,isAdvanced:a,overrideColor:o,onRenderComplete:i})=>{const r=$n(),f=u.useMemo(()=>performance.now()/1e3,[]),s=u.useMemo(()=>performance.now()/1e3,[]),d=u.useRef(void 0),c=u.useRef(Ct()),[g,v]=u.useState(Kn),{canvasSizeRef:l,handleCanvasSizeUpdate:b}=We(Kn),h=u.useCallback(R=>{v([R.width,R.height])},[]),[p,D]=u.useState(performance.now()/1e3);u.useEffect(()=>{const R=setInterval(()=>{D(performance.now()/1e3)},sn);return()=>clearInterval(R)},[]);const S=Et({isAdvanced:a,overrideColor:o}),A=c.current(S),x=st({viewport:g,canvasSize:l.current,shouldMeasurePerf:!0,source:"VoicePicker"}),w=lt({shouldCalibrate:!0,viewport:g,initialScale:1});return d.current={time:p,micLevel:0,stateListen:0,listenTimestamp:0,stateThink:0,thinkTimestamp:0,stateSpeak:1,speakTimestamp:s,readyTimestamp:f,stateHalt:0,haltTimestamp:0,touchDownTimestamp:0,touchUpTimestamp:0,stateFailedToConnect:0,failedToConnectTimestamp:0,avgMag:n,cumulativeAudio:e,isNewBloop:!0,isAdvancedBloop:a,bloopColorMain:Array.from(A.bloopColorMain),bloopColorLow:Array.from(A.bloopColorLow),bloopColorMid:Array.from(A.bloopColorMid),bloopColorHigh:Array.from(A.bloopColorHigh),isDarkMode:r,screenScaleFactor:window.devicePixelRatio,viewport:g,silenceAmount:0,silenceTimestamp:0,fadeBloopWhileListening:!1},m.jsx(Mt,{className:G("flex items-center justify-center",t),variablesRef:d,onViewportUpdate:h,onRenderComplete:i,textureImage:ie,textureName:"uTextureNoise",onGlAvailable:x,onCanvasSizeUpdate:b,scale:w,GLUniformsSetter:xn,vert:_t,frag:Rt})};function Ut({isUnauthenticated:t,loading:n,handleLoginClick:e,handleCancelClick:a,handleConfirmClick:o,selectedVoice:i,currentVoiceName:r,cameFromNux:f}){const s="w-52 whitespace-nowrap rounded-full px-20 py-3 font-semibold";return t?m.jsxs(m.Fragment,{children:[m.jsx(en,{className:s,onClick:e,children:n?m.jsx(zn,{}):m.jsx(I,{id:"IRALWH",defaultMessage:"Log in"})}),m.jsx(en,{className:G(s,"text-black dark:text-white"),color:"ghost",onClick:a,children:m.jsx(I,{id:"8fumUc",defaultMessage:"Back to chat"})})]}):m.jsxs(m.Fragment,{children:[m.jsx(en,{className:G(s),onClick:o,children:n?m.jsx(zn,{}):(i==null?void 0:i.voice)===r&&!f?m.jsx(I,{id:"MyKAgb",defaultMessage:"Done"}):m.jsx(I,{id:"7+3LaJ",defaultMessage:"Start new chat"})}),m.jsx(en,{className:G(s,"text-black dark:text-white"),color:"ghost",onClick:a,children:m.jsx(I,{id:"dUn4Wd",defaultMessage:"Cancel"})})]})}const Bt=Zn(()=>Qn(()=>import("./jyroje0qaxw6h3z1.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>Jn(t)}),Ot=Zn(()=>Qn(()=>import("./frf0wu8ouyfyu06j.js").then(t=>t._),__vite__mapDeps([2,1])),{loading:t=>Jn(t)}),jt={offscreenLeft:{x:"-24rem",opacity:0},left:{x:"-12rem",opacity:.5},center:{x:"0",opacity:1},right:{x:"12rem",opacity:.5},offscreenRight:{x:"24rem",opacity:0}};function Yt({conversationId:t,onClose:n,cameFromNux:e=!1,initialVoiceName:a}){const o=Re(),i=_e(o),r=!Ee(o),{voiceName:f}=Ge(),s=Ke(),d=ke(),c=ne(),[g,v]=u.useState(!1),l=Nn.getGizmoId(Un(t)),[b,h]=u.useState(!1),[p,D]=u.useState(!1);u.useEffect(()=>{requestAnimationFrame(()=>h(!0))},[]);const[S,A]=u.useState(!1),[x,w]=u.useState(null);u.useEffect(()=>{if(c.length>0){const T=c.findIndex(_=>_.voice===(a||f));T>=0?w(T):w(2),A(!0)}},[c,f,a]);const R=x!=null?(x-2+c.length)%c.length:0,X=x!=null?(x-1+c.length)%c.length:1,Y=x!=null?(x+1)%c.length:3,ce=x!=null?(x+2)%c.length:4,M=c[x!=null?x:0],$=c[R],Z=c[X],J=c[Y],Q=c[ce],j=tt(),{alreadyTriggered:Cn,setAlreadyTriggered:rn}=ot();u.useEffect(()=>{if(j&&!Cn){const T=c.findIndex(_=>_.voice==="shade");T!==-1&&(w(T),rn())}return()=>{j&&rn()}},[j,Cn,c,w,rn]);const ue=u.useMemo(()=>{if(j&&(M==null?void 0:M.voice)==="shade")return"ANGSTY_BLACK"},[M==null?void 0:M.voice,j]),nn=T=>{w(T)},{stopVoiceMode:wn,startVoiceMode:Tn}=nt({requestMicPermissions:e}),{setValue:Mn}=Xe(Pe.VoiceName),de=Ye(T=>T.voiceMode),ln=e&&!l?"advanced":de,fe=u.useCallback(()=>{D(!e),setTimeout(()=>{var _,q;const T=x!=null?(_=c[x])==null?void 0:_.voice:(q=c[0])==null?void 0:q.voice;sessionStorage.setItem("selectedVoiceName",T),Le(o,{fallbackScreenHint:"login",callback:P=>{Ie.logLogInButtonClicked({provider:P,location:"Voice Picker Page"},ze.ACCESS_FLOW_ENTRY_POINT_VOICE_PICKER_PAGE)},skipLoginModal:!1})},un)},[e,o,x,c]),me=u.useCallback(async()=>{D(!e),setTimeout(async()=>{var _,q;v(!0);const T=x!=null?(_=c[x])==null?void 0:_.voice:(q=c[0])==null?void 0:q.voice;if(e||T!==f){e||bn.voiceSelected.click({action:"changed",voice:T}),Mn(T),await wn(),$e("/");try{e?i?(Ze({type:"START"}),Je(),s.setState(P=>{P.showNuxFullPage=!1})):s.setState(P=>{P.isVoiceModeActive=!0}):await Tn({conversation_id:void 0,eventSource:"voice_picker",voice_mode:ln,voice:T,clientThreadId:Ne(),gizmo_id:Nn.getGizmoId(Un(t)),skipCacheReason:"user-switched-voice"})}catch(P){Ue.addError("Failed to start voice mode after voice picker: ".concat(P),{protocol:d})}}else bn.voiceSelected.click({action:"kept",voice:f});v(!1),n()},un)},[e,x,c,f,n,Mn,wn,i,s,Tn,ln,t,d]),ge=()=>{D(!0),setTimeout(n,un)};Qe({setSelectedVoiceIndex:w,prevVoiceIndex:X,nextVoiceIndex:Y});const[Dn,Fn]=u.useState(!1),Rn=T=>{T==="prev"?nn(X):T==="next"&&nn(Y),Fn(!0),setTimeout(()=>{Fn(!1)},175)},_n=u.useMemo(()=>({className:"h-max min-h-bloop w-max min-w-bloop",url:M==null?void 0:M.preview_url}),[M==null?void 0:M.preview_url]);return!S||x==null?m.jsx("div",{className:"bg-token-main-surface-primary fixed start-0 top-0 z-50 flex h-full w-full"}):m.jsxs("div",{className:"fixed start-0 top-0 z-50 flex h-full w-full flex-col items-center justify-center bg-white transition-opacity duration-300 dark:bg-gray-800 ".concat(b&&!p?"opacity-100":"opacity-0"),children:[m.jsx("h1",{className:"mt-36 mb-8 text-3xl font-semibold",children:r?m.jsx(I,{id:"P4GR/e",defaultMessage:"Try voice mode for free"}):m.jsx(I,{id:"2whyE9",defaultMessage:"Choose a voice"})}),m.jsx("div",{className:"flex h-full w-full items-center justify-center",children:M?e&&!l||ln==="advanced"?m.jsx(Nt,cn(L({},_n),{overrideColor:ue})):m.jsx(zt,L({},_n)):null}),m.jsx("div",{className:"mb-8 flex items-center justify-between text-center",children:m.jsxs("div",{className:"relative flex h-24 w-48",children:[m.jsx(W,{voice:$,variant:"offscreenLeft"},$==null?void 0:$.name),m.jsx(W,{voice:Z,variant:"left",onClick:()=>nn(X)},Z==null?void 0:Z.name),m.jsx(Yn,{direction:"prev",onClick:()=>Rn("prev"),isFading:Dn}),m.jsx(W,{voice:M,variant:"center"},M==null?void 0:M.name),m.jsx(Yn,{direction:"next",onClick:()=>Rn("next"),isFading:Dn}),m.jsx(W,{voice:J,variant:"right",onClick:()=>nn(Y)},J==null?void 0:J.name),m.jsx(W,{voice:Q,variant:"offscreenRight"},Q==null?void 0:Q.name),m.jsx("div",{className:"pointer-events-none absolute h-full w-full -translate-x-52 transform bg-linear-to-r from-[var(--main-surface-background)] to-transparent"}),m.jsx("div",{className:"pointer-events-none absolute h-full w-full translate-x-52 transform bg-linear-to-l from-[var(--main-surface-background)] to-transparent"}),m.jsx("div",{className:"pointer-events-none absolute h-full w-full -translate-x-96 transform bg-white dark:bg-gray-800"}),m.jsx("div",{className:"pointer-events-none absolute h-full w-full translate-x-96 transform bg-white dark:bg-gray-800"})]})}),m.jsx("div",{className:"mb-36 flex flex-col space-y-3",children:m.jsx(Ut,{isUnauthenticated:r,loading:g,handleLoginClick:fe,handleCancelClick:ge,handleConfirmClick:me,selectedVoice:M,currentVoiceName:f,cameFromNux:e})})]})}function W({voice:t,variant:n,onClick:e}){return m.jsxs(Be.button,{onClick:e,className:"absolute flex w-48 flex-col items-center justify-center select-none",variants:jt,animate:n,initial:n,transition:{duration:.25,ease:"easeInOut"},children:[m.jsx("p",{className:"text-lg ".concat(n==="center"?"font-semibold":""),children:t==null?void 0:t.name}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-[var(--text-secondary)]",children:t==null?void 0:t.description})]})}function Yn({direction:t,onClick:n,isFading:e}){const a=t==="prev"?Ot:Bt,o=je(),i=t==="prev"?o.formatMessage({id:"ajuz05",defaultMessage:"Previous voice"}):o.formatMessage({id:"Dr8wrw",defaultMessage:"Next voice"});return m.jsx("button",{className:G("absolute top-2 z-50 transition-opacity duration-175",t==="prev"?"-start-4":"-end-4",e?"opacity-20":"opacity-100"),onClick:n,"aria-label":i,children:m.jsx(a,{className:"text-token-text-quaternary hover:text-token-text-secondary h-6 w-6"})})}export{sn as B,Mt as G,Yt as V,Xt as a,yt as b,Et as c,st as d,lt as e,Rt as f,xn as g,Sn as h,tt as i,ot as j,ie as n,et as s,Kt as u,_t as v};
//# sourceMappingURL=eosy1ymy279c5qnc.js.map

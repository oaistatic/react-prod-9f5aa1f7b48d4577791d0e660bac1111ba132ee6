const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ghewn7l2ynbm32fm.js","assets/i8clt0mfz495j7ii.js","assets/root-c4psboex.css","assets/88dcy8w0nw3pooi2.js","assets/mtsfsh7z74bmo6ig.js","assets/ntuoxtu7ohytvwjv.js","assets/f2itj05whsmn3kgs.js","assets/kkginmfs5ty8sze2.js","assets/jgvrewhnjcf398o6.js"])))=>i.map(i=>d[i]);
var je=Object.defineProperty,Te=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var fe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var me=(t,e,s)=>e in t?je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,B=(t,e)=>{for(var s in e||(e={}))ke.call(e,s)&&me(t,s,e[s]);if(ue)for(var s of ue(e))Ee.call(e,s)&&me(t,s,e[s]);return t},oe=(t,e)=>Te(t,Ie(e));var he=(t,e,s)=>(e=t[fe("asyncIterator")])?e.call(t):(t=t[fe("iterator")](),e={},s=(i,c)=>(c=t[i])&&(e[i]=l=>new Promise((d,a,n)=>(l=c.call(t,l),n=l.done,Promise.resolve(l.value).then(u=>d({value:u,done:n}),a)))),s("next"),s("return"),e);import{_ as W,e as te,r as j,j as o,M as pe,c as J,u as Me}from"./i8clt0mfz495j7ii.js";import{o as Y,L as K,u as ie,i as xe,d as ee,eo as we,e4 as De,pF as Ae,oG as ae,mo as Ne,bR as re,cG as Re,cF as Le,cN as Fe,co as ve,bW as Pe,de as $e,hy as ze,cn as ge,P as Be,h as He,aR as Oe,C as Ue}from"./ghewn7l2ynbm32fm.js";import{mg as ye,mh as Ve,kF as Ge,kG as qe,dV as Qe,kE as We,dW as Je,cv as Ye,ff as Ke,dh as de,ce as Xe,mi as Ze,mj as et,q as tt,t as st,i0 as nt,mk as ot,ml as at,ae as rt,db as it,dd as lt,a_ as ct,cc as dt}from"./j0yo6uv6652vva62.js";import{P as ut}from"./odg6tnre74z3nvyt.js";import{D as ft}from"./olrcssu7duieo6m7.js";import{C as mt}from"./f6ek1vdaohim72xh.js";import{E as be}from"./ew5h1tpzyj1oiamp.js";import"./eb6zep29zccfypdc.js";import"./cxbsld3botts7bfn.js";import"./da0eqg5j39u1e96s.js";import"./bbipyj9bituayr8q.js";import"./ivb8c1xam3e690hh.js";import"./kmo5unuf793khl43.js";import"./mzyl3pd4zxnxoe9i.js";import"./gy1lpvuoewmzh42c.js";import"./i03gut32e8jn5ajq.js";import"./h1em0bjkpkjv8ykw.js";import"./nfccle6oyncifphl.js";import"./hu1bt0oauegdhua6.js";import"./mjbhy8c4bs0n8qw2.js";import"./hxdh3tr5l8kut4ed.js";import"./zl0env7yrga8vz86.js";import"./mnf9y116wq0a5kdn.js";import"./mpzbsmypy64alaao.js";import"./fvjpw0lui4wq7vv3.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";const ht=Y(()=>W(()=>import("./ghewn7l2ynbm32fm.js").then(t=>t.vJ),__vite__mapDeps([0,1,2])),{loading:t=>K(t)}),pt=Y(()=>W(()=>import("./88dcy8w0nw3pooi2.js").then(t=>t._),__vite__mapDeps([3,1])),{loading:t=>K(t)});function gt({title:t,isTransparent:e,onClose:s}){const i=ie(),c=xe(i),l=te(),[d,a]=j.useState(!1),{canGoBack:n,goBack:u,goToHistoryIndex:p,backHistory:r}=ye(),x=ee("pointer-events-auto keyboard-focused:focus-ring relative -ms-2 me-1 flex h-9 w-9 items-center justify-center rounded-lg",e?"bg-token-main-surface-primary/60 backdrop-blur-xl backdrop-filter hover:bg-token-main-surface-primary/70":"bg-token-main-surface-primary hover:bg-token-surface-hover ");return o.jsx(Ve,{name:"entity-header",type:"primary",className:ee("flex items-center bg-transparent!",e?"pointer-events-none":"pointer-events-auto",c?"min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)]"),children:o.jsxs("div",{className:ee("flex items-center justify-between px-6 py-2 transition-colors duration-200 ease-out",e?"pointer-events-none border-transparent bg-transparent":"bg-token-main-surface-primary",c?"border-b-thin min-h-[var(--header-height,3.5rem)]":"min-h-[calc(var(--header-height,3.5rem)+1px)] border-b",!e&&(c?"border-(--bento-border-color)":"border-light")),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[n&&o.jsx(we,{open:d,onOpenChange:a,size:"small",triggerButton:o.jsx("button",{type:"button",onClick:u,onPointerDown:m=>{m.preventDefault()},onContextMenu:m=>{m.preventDefault(),n&&a(!0)},className:x,"aria-label":l.formatMessage({id:"entity.sidebar.back",defaultMessage:"Back"}),children:o.jsx(pt,{className:"icon"})}),children:r.map((m,h)=>({s:m,absoluteIndex:h})).reverse().map(({s:m,absoluteIndex:h})=>o.jsx(De.Item,{label:m.query,onSelect:()=>{a(!1),p(h)}},"".concat(h,"-").concat(m.type)))}),t&&!e&&o.jsx("div",{className:"text-token-text-primary pointer-events-auto line-clamp-1 text-lg font-normal",children:t})]}),o.jsx("div",{className:"pointer-events-auto -me-3",children:o.jsx("button",{"data-testid":"close-button",onClick:s,className:x,"aria-label":l.formatMessage({id:"Px7S/2",defaultMessage:"Close"}),children:o.jsx(ht,{className:"icon"})})})]})})}const bt=800,_t=1200;function xt({searchModelQueries:t=[]}){const e=j.useMemo(()=>t.map(n=>n.trim()).filter(n=>n.length>0),[t]),[s,i]=j.useState(!0),[c,l]=j.useState(0);j.useEffect(()=>{let n=null,u=null;return i(!0),l(0),e.length>0&&(n=setTimeout(()=>{i(!1),u=setInterval(()=>{l(p=>p+1>=e.length?e.length-1:p+1)},_t)},bt)),()=>{n&&clearTimeout(n),u&&clearInterval(u)}},[e]);const d=()=>{"use forget";const n=J.c(1);let u;return n[0]===Symbol.for("react.memo_cache_sentinel")?(u=o.jsx("div",{className:"bg-token-bg-secondary -mx-6 aspect-[5/4] animate-pulse pb-2"}),n[0]=u):u=n[0],u};if(!e.length)return o.jsxs(o.Fragment,{children:[o.jsx(d,{}),o.jsx("div",{className:"mt-6 flex min-h-[60vh] flex-col gap-12 pb-6",children:o.jsxs(Ae,{children:[o.jsx(ae,{index:0,width:60,heightSize:"sm"}),o.jsx(ae,{index:1,width:100,heightSize:"sm"}),o.jsx(ae,{index:2,width:90,heightSize:"sm"}),o.jsx(ae,{index:3,width:50,heightSize:"sm"})]})})]});const a=s?o.jsx(pe,{id:"CfufpV",defaultMessage:"Searching the web"}):o.jsx(pe,{id:"DeF0zE",defaultMessage:"Searching for {query}",values:{query:e[c]}});return o.jsxs(o.Fragment,{children:[o.jsx(d,{}),o.jsx("div",{className:"mt-5 flex min-h-[60vh] w-full flex-col items-start gap-4 pb-6",children:o.jsx("span",{className:"loading-shimmer text-token-text-secondary line-clamp-1 w-full truncate font-medium select-none",children:a})})]})}const Q={};function vt(t){var c,l,d,a,n,u,p,r,x,m;const e=(n=(a=(c=t.metadata)==null?void 0:c.debug_sonic_thread_id)!=null?a:(d=(l=t.metadata)==null?void 0:l.__internal)==null?void 0:d.sonic_thread_id)!=null?n:null,s=(r=(p=(u=t.metadata)==null?void 0:u.__internal)==null?void 0:p.sonic_user_id)!=null?r:null;let i=t;if(e||s){const h=B({},(x=t.metadata)!=null?x:{});e&&h.debug_sonic_thread_id==null&&(h.debug_sonic_thread_id=e);const T=B({},(m=h.__internal)!=null?m:{});e&&T.sonic_thread_id==null&&(T.sonic_thread_id=e),s&&T.sonic_user_id==null&&(T.sonic_user_id=s),h.__internal=T,i=oe(B({},t),{metadata:h})}return i}function yt({clientThreadId:t,debugThreadId:e,messageId:s,query:i,category:c,extraParams:l}){var E,N;const d=ie(),a=Ne(d),n=te(),u=(E=re(t))!=null?E:t,p=void 0,r=j.useMemo(()=>"entity-".concat(c,"-").concat(i,"-").concat(JSON.stringify(l!=null?l:{}),"-").concat(u,"-").concat(s,"-").concat(e),[c,i,l,u,s,e]),[x,m]=j.useState((N=Q[r])!=null?N:null),[h,T]=j.useState(null),[L,G]=j.useState({}),[F,I]=j.useState(null),[H,U]=j.useState(()=>{var v;return ce((v=Q[r])!=null?v:null)}),[P,R]=j.useState(!1);j.useEffect(()=>{I(null)},[i,c]);const k=j.useRef(null),A=j.useCallback(async v=>{k.current&&k.current.abort();const S=new AbortController;k.current=S,m(null),Q[r]=null,U([]),R(!0);try{const{chatReq:q,turnstileToken:Z,proofToken:V}=await Ge(d,void 0),f=qe(q,Z,V,null);I(null);const b=Qe("".concat(Re,"/sidebar/conversation"),{method:"POST",headers:B(oe(B({},Le({isAuthOptional:!0})),{"Content-Type":"application/json"}),f),body:B(B({conversation_id:u,message_id:s,supported_encodings:[We.V1],is_client_thread:u===t},v!=null?v:{}),c==="ask_sidebar"?{category:"ask_sidebar",locale:n.locale,ask_sidebar_params:{query:i,additional_context:l==null?void 0:l.context}}:{category:"generic_entity",locale:n.locale,generic_entity_params:{name:i,category:c,extra_params:l}}),signal:S.signal});let g=null,_=null;try{for(var O=he(Je(b)),$,X,z;$=!(X=await O.next()).done;$=!1){const C=X.value;if(S.signal.aborted)break;if(!("data"in C))continue;const M=C.data,{type:y,data:w}=M;if(y==="message"&&w){const D=ce(w);D.length>0&&U(D)}if(y==="message"&&w&&w.author.role===ve.Assistant&&Pe(w)&&(!w.channel||w.channel==="final")){const D=vt(w);m(D),!_&&M.conversation_id&&(T(M.conversation_id),_=M.conversation_id,$e(t)&&Fe.setServerIdForNewThread(t,_)),D.status==="finished_successfully"&&(Q[r]=D)}y==="__debug"&&w&&G(D=>B(B({},D),w))}}catch(X){z=[X]}finally{try{$&&(X=O.return)&&await X.call(O)}finally{if(z)throw z[0]}}R(!1)}catch(q){S.abort(),Q[r]=null,I(q),R(!1)}},[r,u,t,e,s,i,c,l,d,a,n.locale,p]);return j.useEffect(()=>{var v;if(Q[r]){m(Q[r]),U(ce((v=Q[r])!=null?v:null));return}return A(),()=>{var S;(S=k.current)==null||S.abort(),m(null),U([]),R(!1)}},[r,u,t,e,s,i,c,l,d,a,n.locale]),{message:x,sidebarConversationId:h,error:F,searchModelQueries:H,isStreaming:P,debugData:L,regenerate:()=>A({force_regenerate:!0})}}function ce(t){var s,i;const e=(i=(s=t==null?void 0:t.metadata)==null?void 0:s.search_model_queries)==null?void 0:i.queries;return Array.isArray(e)?e:[]}const St=Y(()=>W(()=>import("./mtsfsh7z74bmo6ig.js").then(t=>t._),__vite__mapDeps([4,1])),{loading:t=>K(t)}),Ct=Y(()=>W(()=>import("./ntuoxtu7ohytvwjv.js").then(t=>t._),__vite__mapDeps([5,1])),{loading:t=>K(t)}),jt=Y(()=>W(()=>import("./f2itj05whsmn3kgs.js").then(t=>t._),__vite__mapDeps([6,1])),{loading:t=>K(t)}),Tt=Y(()=>W(()=>import("./kkginmfs5ty8sze2.js").then(t=>t._),__vite__mapDeps([7,1])),{loading:t=>K(t)}),It=Y(()=>W(()=>import("./jgvrewhnjcf398o6.js").then(t=>t._),__vite__mapDeps([8,1])),{loading:t=>K(t)});function kt(t){"use forget";var X,z,q,Z,V,f,b,g,_,C;const e=J.c(55),{conversation:s,debugThreadId:i,messageId:c,query:l,category:d,extraParams:a,offsetTopMargin:n}=t,u=ie();let p;e[0]!==d||e[1]!==s.id||e[2]!==i||e[3]!==a||e[4]!==c||e[5]!==l?(p={clientThreadId:s.id,debugThreadId:i,messageId:c,query:l,category:d,extraParams:a},e[0]=d,e[1]=s.id,e[2]=i,e[3]=a,e[4]=c,e[5]=l,e[6]=p):p=e[6];const{message:r,sidebarConversationId:x,error:m,searchModelQueries:h,regenerate:T,isStreaming:L,debugData:G}=yt(p);let F;e[7]!==u?(F=xe(u),e[7]=u,e[8]=F):F=e[8];const I=F,H=Ye(),{showDebugConversationTurns:U}=ze();let P;e[9]!==s.id?(P=re(s.id),e[9]=s.id,e[10]=P):P=e[10];const R=P;let k,A,E;if(e[11]!==s||e[12]!==u||e[13]!==m||e[14]!==I||e[15]!==r||e[16]!==n||e[17]!==h){let y,w=!0;if(r&&r.content&&(r.content.content_type===ge.Text||r.content.content_type===ge.MultimodalText)){y=r.content;let ne;e[21]!==r.content.parts||e[22]!==((z=(X=r.metadata)==null?void 0:X.content_references)==null?void 0:z.length)?(ne=!r.content.parts.some(Mt)&&((Z=(q=r.metadata)==null?void 0:q.content_references)==null?void 0:Z.length)===0,e[21]=r.content.parts,e[22]=(f=(V=r.metadata)==null?void 0:V.content_references)==null?void 0:f.length,e[23]=ne):ne=e[23],w=ne}let D;e[24]!==(y==null?void 0:y.parts)?(D=(b=y==null?void 0:y.parts)!=null?b:[],e[24]=y==null?void 0:y.parts,e[25]=D):D=e[25];let se;e[26]!==D?(se=Ke(D),e[26]=D,e[27]=se):se=e[27];const Se=se,Ce=r&&y,le=n?I?"mt-[calc(var(--threadFlyOut-leading-height,var(--header-height))*-1)] min-h-screen":"mt-[calc(var(--threadFlyOut-leading-height,53px)*-1)] min-h-screen":"mt-0";e[28]!==le?(E=ee("bg-token-bg-primary flex min-h-screen w-full flex-col",le),e[28]=le,e[29]=E):E=e[29],e[30]===Symbol.for("react.memo_cache_sentinel")?(k=ee("border-token-border-light mb-[60px] flex flex-col border-t px-6"),e[30]=k):k=e[30],A=Ce&&y?o.jsxs("div",{className:ee("mt-4 text-sm",!1),"data-message-author-role":r.author.role,"data-message-id":r.id,children:[o.jsx(ft,{parts:y.parts||[],isUserTurn:!1,isCompletionInProgress:!1,turnIndex:0,displayParts:Se,isActivelyStreaming:!1,shouldHideContent:!1,conversation:s,id:r.id,isEmpty:w,messages:[r],citations:(g=r.metadata)==null?void 0:g.citations,contentReferences:(C=(_=r.metadata)==null?void 0:_.content_references)==null?void 0:C.filter(Et),size:"small",flagSeverity:void 0}),!1]}):!m&&o.jsx(xt,{searchModelQueries:h}),e[11]=s,e[12]=u,e[13]=m,e[14]=I,e[15]=r,e[16]=n,e[17]=h,e[18]=k,e[19]=A,e[20]=E}else k=e[18],A=e[19],E=e[20];let N;e[31]!==m?(N=m&&o.jsx("div",{className:"bg-token-bg-status-error border-token-surface-error/15 text-token-text-error my-4 border p-2 text-sm whitespace-pre-wrap",children:m.message}),e[31]=m,e[32]=N):N=e[32];let v;e[33]!==d||e[34]!==s.id||e[35]!==H||e[36]!==L||e[37]!==r||e[38]!==R||e[39]!==T||e[40]!==x?(v=!L&&!H&&o.jsxs("div",{className:"flex items-center justify-start pt-2 select-none",children:[r&&o.jsx(Ft,{message:r,clientThreadId:s.id}),r&&x&&R&&o.jsx(Pt,{messageId:r.id,category:d,conversationId:x,metadata:{originatingConversationId:R}}),o.jsx(Lt,{onClick:T}),r&&o.jsx(wt,{message:r})]}),e[33]=d,e[34]=s.id,e[35]=H,e[36]=L,e[37]=r,e[38]=R,e[39]=T,e[40]=x,e[41]=v):v=e[41];let S;e[42]!==k||e[43]!==A||e[44]!==N||e[45]!==v?(S=o.jsxs("div",{className:k,children:[A,N,v]}),e[42]=k,e[43]=A,e[44]=N,e[45]=v,e[46]=S):S=e[46];let O;e[47]!==G||e[48]!==L||e[49]!==U?(O=!1,e[47]=G,e[48]=L,e[49]=U,e[50]=O):O=e[50];let $;return e[51]!==O||e[52]!==E||e[53]!==S?($=o.jsxs("div",{className:E,children:[S,O]}),e[51]=O,e[52]=E,e[53]=S,e[54]=$):$=e[54],$}function Et(t){return t.type!=="product_entity"}function Mt(t){return t!==""}function wt(t){"use forget";var p;const e=J.c(11),{message:s}=t;let i,c,l;if(e[0]!==s){l=Symbol.for("react.early_return_sentinel");e:{if(i=Nt(s!=null?s:null),!i){l=null;break e}c=(p=i==null?void 0:i.map(At).filter(Dt))!=null?p:[]}e[0]=s,e[1]=i,e[2]=c,e[3]=l}else i=e[1],c=e[2],l=e[3];if(l!==Symbol.for("react.early_return_sentinel"))return l;const d=c;let a;e[4]!==d?(a=o.jsx(Ze,{children:o.jsx(et,{sourcesUrls:d,className:"hover:bg-token-bg-secondary rounded-lg"})}),e[4]=d,e[5]=a):a=e[5];let n;e[6]!==i?(n=o.jsx(tt,{children:o.jsx(st,{className:"bg-token-bg-primary border-token-border-default max-h-[50vh] max-w-[400px] overflow-y-auto rounded-[20px] border-1 bg-clip-padding px-4 py-3 shadow-md",side:"top",sideOffset:4,align:"center",collisionPadding:28,avoidCollisions:!0,children:o.jsx(Rt,{items:i})})}),e[6]=i,e[7]=n):n=e[7];let u;return e[8]!==a||e[9]!==n?(u=o.jsxs(nt,{children:[a,n]}),e[8]=a,e[9]=n,e[10]=u):u=e[10],u}function Dt(t){return!!t}function At(t){return t.url}function Nt(t){var c,l;if(!t)return;const e=(l=(c=t.metadata)==null?void 0:c.search_result_groups)!=null?l:[];if(!e.length)return;const s=new Map;e.forEach(d=>{var a;((a=d.entries)!=null?a:[]).forEach(n=>{var p,r;if(!(n!=null&&n.url)||s.has(n.url))return;const u=oe(B({},n),{attribution:(r=(p=n.attribution)!=null?p:d.domain)!=null?r:Xe(n.url,"short")});s.set(n.url,u)})});const i=Array.from(s.values()).sort((d,a)=>{var n,u;return((n=a.pub_date)!=null?n:0)-((u=d.pub_date)!=null?u:0)});if(i.length)return i}function Rt({items:t}){return t.length===0?null:o.jsx("div",{className:"flex flex-col gap-3",children:o.jsx("ul",{className:"-mx-2 flex flex-col gap-1",children:t.map((e,s)=>{var i;return o.jsx("li",{children:o.jsx(ot,{item:e})},"".concat((i=e.url)!=null?i:"source","-").concat(s))})})})}const Lt=t=>{"use forget";const e=J.c(5),{onClick:s}=t,i=te();let c;e[0]!==i?(c=i.formatMessage({id:"gW2N97",defaultMessage:"Try again..."}),e[0]=i,e[1]=c):c=e[1];let l;return e[2]!==s||e[3]!==c?(l=o.jsx(de,{icon:It,onClick:s,label:c,size:"med"}),e[2]=s,e[3]=c,e[4]=l):l=e[4],l},Ft=t=>{"use forget";const e=J.c(4),{message:s,clientThreadId:i}=t,c=Me();let l;return e[0]!==i||e[1]!==s||e[2]!==c?(l=o.jsx(mt,{size:"med",onClick:async d=>{const a=await at({id:s.id,role:ve.Assistant,messages:[s]},c,i);await rt(a,void 0,d)}}),e[0]=i,e[1]=s,e[2]=c,e[3]=l):l=e[3],l},Pt=t=>{"use forget";const e=J.c(17),{messageId:s,category:i,conversationId:c,metadata:l}=t,d=te(),[a,n]=j.useState(null);let u;e[0]!==i||e[1]!==c||e[2]!==a||e[3]!==s||e[4]!==l?(u=h=>{a!==h&&(it({rating:lt(h)},c,s,"CHAT",{originating_conversation_id:re(l.originatingConversationId),category:i,surface:"web"}),Be.logEventWithStatsig(h==="thumbsDown"?"Sidebar Message Feedback Thumbs Down Clicked":"Sidebar Message Feedback Thumbs Up Clicked","chatgpt_sidebar_thumb_feedback",{message_id:s,conversation_id:c,originating_conversation_id:re(l.originatingConversationId),rating:h,category:i,surface:"web"})),n(T=>T===h?null:h)},e[0]=i,e[1]=c,e[2]=a,e[3]=s,e[4]=l,e[5]=u):u=e[5];const p=u;let r;e[6]!==a||e[7]!==p||e[8]!==d?(r=a!=="thumbsDown"&&o.jsx(de,{size:"med",onClick:()=>{p("thumbsUp")},selected:a==="thumbsUp",icon:a==="thumbsUp"?Ct:St,label:d.formatMessage({id:"ConversationTurn.goodResponseTooltip",defaultMessage:"Good response"}),testId:"good-response-turn-action-button"}),e[6]=a,e[7]=p,e[8]=d,e[9]=r):r=e[9];let x;e[10]!==a||e[11]!==p||e[12]!==d?(x=a!=="thumbsUp"&&o.jsx(de,{size:"med",onClick:()=>{p("thumbsDown")},selected:a==="thumbsDown",icon:a==="thumbsDown"?Tt:jt,label:d.formatMessage({id:"ConversationTurn.badResponseTooltip",defaultMessage:"Bad response"}),testId:"bad-response-turn-action-button"}),e[10]=a,e[11]=p,e[12]=d,e[13]=x):x=e[13];let m;return e[14]!==r||e[15]!==x?(m=o.jsxs(o.Fragment,{children:[r,x]}),e[14]=r,e[15]=x,e[16]=m):m=e[16],m};function _e(t){return t.length>0&&t[0]===t[0].toLocaleUpperCase()?t:t.split(" ").map(e=>ct(e)).join(" ")}function gs(t){"use forget";const e=J.c(68),{conversation:s,sidebar:i,type:c}=t,{contentReferenceStartIndex:l,messageId:d,query:a,category:n,debugThreadId:u,extraParams:p}=i,r=c===void 0?"sidebar":c,x=ie(),m=te(),{setScrollTopForActive:h,currentHistoryScrollTop:T,setFullWidthImageHeightForIndex:L,currentHistoryFullWidthImageHeight:G,activeHistoryIndex:F,closeThreadSidebarAndResetHistory:I}=ye();let H;e[0]!==x?(H=He(x,"1225428216"),e[0]=x,e[1]=H):H=e[1];const U=H;let P;e[2]!==s.id||e[3]!==d?(P={clientThreadId:s.id,messageId:d},e[2]=s.id,e[3]=d,e[4]=P):P=e[4];const R=P,k=j.useRef(null);let A,E;e[5]!==h?(A=()=>{const f=k.current;if(!f)return;const b=function(){f&&h&&h(f.scrollTop)};return f.addEventListener("scroll",b,{passive:!0}),()=>{f.removeEventListener("scroll",b)}},E=[k,h],e[5]=h,e[6]=A,e[7]=E):(A=e[6],E=e[7]),j.useEffect(A,E);let N;e[8]!==F||e[9]!==L?(N=f=>{F<0||L(F,f)},e[8]=F,e[9]=L,e[10]=N):N=e[10];const v=N;let S;e[11]!==a?(S=_e(a),e[11]=a,e[12]=S):S=e[12];const O=S,$="".concat(d,"-category-").concat(n,"-query-").concat(a),X=n==="product"&&!U||n==="product_link";let z;if(X){let f;e[13]!==a?(f={query:a,title:a,provider:"",id:"",url:""},e[13]=a,e[14]=f):f=e[14];const b=f,g=r==="sidebar";let _;e[15]!==R||e[16]!==l||e[17]!==s.id||e[18]!==d||e[19]!==b||e[20]!==g?(_=o.jsx(ut,{product:b,setUpdatedProduct:$t,clientThreadId:s.id,messageId:d,contentReferenceStartIndex:l,productIndex:-1,analyticsMetadata:R,offsetTopMargin:g}),e[15]=R,e[16]=l,e[17]=s.id,e[18]=d,e[19]=b,e[20]=g,e[21]=_):_=e[21],z=_}else{const f=n!=null?n:"other",b=r==="sidebar";let g;e[22]!==s||e[23]!==u||e[24]!==p||e[25]!==d||e[26]!==a||e[27]!==b||e[28]!==f?(g=o.jsx(kt,{conversation:s,debugThreadId:u,messageId:d,query:a,category:f,extraParams:p,offsetTopMargin:b}),e[22]=s,e[23]=u,e[24]=p,e[25]=d,e[26]=a,e[27]=b,e[28]=f,e[29]=g):g=e[29],z=g}const q=T,Z=G!=null?G:0,V=q<=Z||X;switch(r){case"sidebar":{let f;e[30]!==h?(f=y=>h(y),e[30]=h,e[31]=f):f=e[31];let b;e[32]!==V||e[33]!==O?(b=y=>{const{handleClose:w}=y;return o.jsx(gt,{title:O,isTransparent:V,onClose:w})},e[32]=V,e[33]=O,e[34]=b):b=e[34];let g;e[35]!==m?(g=m.formatMessage({id:"region.sidebar.entity",defaultMessage:"Entity details"}),e[35]=m,e[36]=g):g=e[36];let _;e[37]!==n||e[38]!==v?(_={category:n,onFullWidthImageHeightChange:v},e[37]=n,e[38]=v,e[39]=_):_=e[39];let C;e[40]!==z||e[41]!==_?(C=o.jsx(be,{value:_,children:z}),e[40]=z,e[41]=_,e[42]=C):C=e[42];let M;return e[43]!==I||e[44]!==T||e[45]!==$||e[46]!==b||e[47]!==g||e[48]!==C||e[49]!==f?(M=o.jsx(dt,{handleClose:I,onScroll:f,restoreScrollTop:T,leadingFullBleed:!0,renderLeading:b,ariaLabel:g,children:C},$),e[43]=I,e[44]=T,e[45]=$,e[46]=b,e[47]=g,e[48]=C,e[49]=f,e[50]=M):M=e[50],M}case"modal":{let f;e[51]!==a?(f=_e(a),e[51]=a,e[52]=f):f=e[52];const b=X||V;let g;e[53]!==n||e[54]!==v?(g={category:n,onFullWidthImageHeightChange:v},e[53]=n,e[54]=v,e[55]=g):g=e[55];let _;e[56]!==z||e[57]!==g?(_=o.jsx(be,{value:g,children:z}),e[56]=z,e[57]=g,e[58]=_):_=e[58];let C;e[59]!==I?(C=o.jsx(Oe,{className:"absolute end-2.5 top-2.5 z-10",onClick:I}),e[59]=I,e[60]=C):C=e[60];let M;return e[61]!==I||e[62]!==$||e[63]!==b||e[64]!==_||e[65]!==C||e[66]!==f?(M=o.jsxs(Ue,{testId:"modal-chat-screen-entity-flyout",className:"relative max-w-[500px]",size:"custom",type:"success",noPadding:!0,title:f,contentRef:k,visuallyHiddenHeader:b,headerClassName:"ps-6 border-b border-light fixed min-w-full bg-token-bg-primary z-1",isOpen:!0,onClose:I,rootClassName:"z-0",children:[_,C]},$),e[61]=I,e[62]=$,e[63]=b,e[64]=_,e[65]=C,e[66]=f,e[67]=M):M=e[67],M}}}function $t(t){}export{gs as ChatScreenEntityFlyout};
//# sourceMappingURL=ntllkljs03gtr0eq.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mr5lj1vi0fmoaqhx.js","assets/i8clt0mfz495j7ii.js","assets/dnn7700ta4l5yf19.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css"])))=>i.map(i=>d[i]);
var z=Object.defineProperty,U=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var M=(e,t,r)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,j=(e,t)=>{for(var r in t||(t={}))Z.call(t,r)&&M(e,r,t[r]);if(R)for(var r of R(t))q.call(t,r)&&M(e,r,t[r]);return e},L=(e,t)=>U(e,X(t));import{m_ as J,m$ as E,n0 as K,eb as Q}from"./j0yo6uv6652vva62.js";import{D as F,a as tt,Z as _}from"./ce3hgmw4iyyhicud.js";import{d as x,gG as et,o as T,L as I,aV as k,aW as rt,$ as nt,d_ as at,dd as v}from"./ghewn7l2ynbm32fm.js";import{j as a,_ as w,r as N,c as ot,e as st}from"./i8clt0mfz495j7ii.js";import{T as it}from"./o564tkn3ln8nzryq.js";import{E as lt,a as ct,b as mt}from"./dxyrjy681bkwlnj8.js";import{C as dt}from"./6ji8ehbh56ghw0zw.js";import{S as ft}from"./f76gy0b8ieo4s693.js";function Mt(e,t,r){const n=new Map;return e.forEach((o,s)=>{const c=J(o,t,r);c&&n.set(s,c)}),n}function ut(e,t){return{"bg-yellow-100 dark:bg-yellow-400":!0,"bg-yellow-400/40 dark:bg-yellow-400/50":e&&!t,"bg-yellow-400/60 dark:bg-yellow-500/70":t,"bg-yellow-100 dark:bg-yellow-400/30":!e&&!t}}const xt={"bg-transparent!":!0};function Lt({isHovered:e,isFocused:t,isCode:r,diffStatus:n}){return x(r?tt:F,"cursor-text group is-comment transition-colors",j({},n===E.REMOVED?xt:ut(e,t)),"group-[.is-comment]:bg-opacity-40")}function At(e,t){return e.map(r=>{const n=t.get(r.id);return n?L(j({},r),{at:n}):null}).filter(et)}const pt=T(()=>w(()=>import("./mr5lj1vi0fmoaqhx.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>I(e)}),ht=T(()=>w(()=>import("./dnn7700ta4l5yf19.js").then(e=>e._),__vite__mapDeps([2,1])),{loading:e=>I(e)});function gt(e){switch(e){case"dark_gray":return{normal:"text-token-text-secondary dark:text-white-400",hover:"cursor-pointer hover:text-token-text-primary group-hover:text-token-text-primary"};case"light_gray":return{normal:"text-gray-400",hover:"cursor-pointer hover:text-token-text-secondary group-hover:text-token-text-secondary"};case"error":return{normal:"text-red-500",hover:"cursor-pointer hover:text-red-500 group-hover:text-red-500"}}}function D({children:e,className:t,onClick:r,isClickable:n=!1,theme:o="dark_gray"}){const s=gt(o),c=(r!=null||n)&&s.hover;return a.jsxs("div",{className:x("icon relative inline-block transition-opacity",t,c,s.normal),onClick:r,children:[e?a.jsx(pt,{className:"icon"}):a.jsx(ht,{className:"icon"}),a.jsx("span",{className:x("absolute inset-0 flex items-center justify-center text-[8px] font-black",c,s.normal),children:e})]})}function A(){return a.jsx(D,{theme:"light_gray",children:a.jsx(it,{})})}function yt({count:e,isLoading:t,onClick:r,isError:n=!1}){return t?a.jsx(A,{}):a.jsx(D,{onClick:r,theme:n?"error":"dark_gray",children:e})}function Vt({isLoading:e=!1,onClick:t}){return e?a.jsx(A,{}):a.jsx(D,{isClickable:!0,onClick:t,theme:"light_gray"})}const Ct=T(()=>w(()=>import("./j0yo6uv6652vva62.js").then(e=>e.yw),__vite__mapDeps([3,1,4,5,6])),{loading:e=>I(e)}),V={type:"spring",bounce:.12,duration:.5},G="opacity-50",Gt=e=>{"use forget";const t=ot.c(16),{position:r,count:n,offsetY:o,isLoading:s,onClick:c,isError:p}=e,u=r===void 0?"absolute":r,g=s===void 0?!1:s,y=p===void 0?!1:p;let d;t[0]!==u?(d=x("flex",u,_.collapsedComment),t[0]=u,t[1]=d):d=t[1];let i,m;t[2]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:0},m={opacity:1},t[2]=i,t[3]=m):(i=t[2],m=t[3]);let l;t[4]!==o?(l={translateY:o},t[4]=o,t[5]=l):l=t[5];let f;t[6]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:0},t[6]=f):f=t[6];let h;t[7]!==n||t[8]!==y||t[9]!==g||t[10]!==c?(h=a.jsx(yt,{count:n,isLoading:g,onClick:c,isError:y}),t[7]=n,t[8]=y,t[9]=g,t[10]=c,t[11]=h):h=t[11];let C;return t[12]!==d||t[13]!==l||t[14]!==h?(C=a.jsx(k.div,{className:d,initial:i,animate:m,style:l,transition:V,exit:f,children:h}),t[12]=d,t[13]=l,t[14]=h,t[15]=C):C=t[15],C},_t=({isFocused:e,isHovered:t})=>{const r=e||t?"grow font-medium text-token-text-primary transition-colors":"grow font-medium text-token-text-secondary transition-colors",n=e||t?"opacity-100 transition":"opacity-75 transition";return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:n,children:a.jsx("div",{className:"gizmo-bot-avatar rounded-full",children:a.jsx(K,{iconName:"openai"})})}),a.jsx("span",{className:r,children:"ChatGPT"})]})},Et=({comment:{diffStatus:e,content:t},isFocused:r,isSomeCommentFocused:n,isHovered:o})=>{const s=e===E.REMOVED;return a.jsx("div",{className:x("text-token-text-primary mt-2 transition-all",{"opacity-80":!r&&!n&&!o&&!s,"opacity-40":!r&&n&&!o&&!s,[G]:s}),children:a.jsx(Q,{text:t})})},vt=({acceptButtonLabel:e,position:t="absolute",left:r,right:n,comment:o,disableAnimations:s=!1,onClick:c,onMouseEnter:p,onMouseLeave:u,onAccept:g,onDismiss:y,translateY:d,isFocused:i=!1,isSomeCommentFocused:m=!1,disableActions:l=!1,isHovered:f=!1},h)=>{const[C,O]=N.useState(!1),B=o.diffStatus===E.ADDED,S=o.diffStatus===E.REMOVED,H=o.diffStatus!=null,W=()=>{O(!0),p==null||p()},Y=()=>{O(!1),u==null||u()},P=st(),$=i||C&&!m;return a.jsx(k.div,{ref:h,className:x(t,_.expandedComment,{"cursor-default":i,"cursor-pointer":!i,[_.expandedCommentFocused]:i,[_.expandedCommentHovered]:f}),style:{left:r,right:n},initial:s?!1:{translateY:d,scale:.85,opacity:0},animate:s?void 0:{translateY:d,scale:i?1:.97,opacity:1},exit:s?void 0:{scale:.85,opacity:0,filter:"blur(16px)"},transition:V,onClick:c,onMouseEnter:l?void 0:W,onMouseLeave:l?void 0:Y,"data-comment-id":o.id,children:a.jsxs("div",{className:x("flex min-h-8 flex-col overflow-hidden rounded-2xl border p-4 pt-2 text-start text-sm transition-all",{"border-transparent bg-gray-50 dark:bg-gray-800":!i&&!f,"border-token-border-default bg-token-main-surface-primary":f&&!i,"border-token-border-default bg-token-main-surface-primary shadow-xl":i||C&&!m,"relative after:absolute after:start-0 after:top-0 after:bottom-0 after:w-1":H,"after:bg-green-500":B,"after:bg-red-500":S}),style:{width:lt},children:[a.jsxs("div",{className:x("flex h-8 flex-row items-center gap-2.5",{[G]:S}),children:[a.jsx(_t,{isFocused:i,isHovered:f}),a.jsx("button",{className:x("text-token-text-secondary -me-1 rounded-full bg-transparent p-1",{"hover:text-token-text-primary cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700":!l,"cursor-not-allowed":l}),onClick:y,disabled:l,"aria-label":P.formatMessage({id:"fYDa3C",defaultMessage:"Dismiss comment"}),children:a.jsx(Ct,{className:"icon-sm"})})]}),a.jsx(Et,{comment:o,isFocused:i,isHovered:f,isSomeCommentFocused:m}),a.jsx(rt,{initial:!1,children:$&&a.jsx(k.div,{initial:s?!1:{opacity:0,height:0},animate:{opacity:1,height:"auto",transition:{opacity:{delay:.14,duration:.2},height:{bounce:0,duration:.2}}},exit:s?void 0:{opacity:0,height:0,transition:{opacity:{duration:.08},height:{bounce:0,duration:.2}}},className:"flex items-center justify-start",children:a.jsx("div",{className:"mt-2.5",children:a.jsx(nt,{color:"secondary",onClick:g,disabled:l,children:e!=null?e:P.formatMessage({id:"WIW5OL",defaultMessage:"Apply"})})})})})]})})},Nt=N.forwardRef(vt),Bt=({offsetY:e,opensOverDocument:t=!1,disableActions:r=!1,isFocused:n=!1,isSomeCommentFocused:o=!1,onAccept:s,onClick:c,onDismiss:p,onMouseEnter:u,onMouseLeave:g,comment:y,isHovered:d=!1})=>{const i=N.useRef(null);return N.useEffect(()=>at(document,{mousedown:({target:m})=>{var l;m instanceof HTMLElement&&!m.closest("[data-comment-id]")&&!((l=i.current)!=null&&l.contains(m))&&dt.blurComment()}})),a.jsx(Nt,{ref:i,comment:y,disableActions:r,onAccept:s,onDismiss:p,onMouseEnter:u,onMouseLeave:g,isSomeCommentFocused:o,isHovered:d,onClick:c,translateY:e,isFocused:n,left:t?void 0:mt,right:t?ct:void 0})};function b(e){if(e.type.name!=="text"){const{start:o,end:s}=e.attrs;return o==null||s==null?null:{start:o,end:s}}const t=e.marks.find(o=>o.type.name===ft.proseMirrorMarkName());if(!t)return null;const{start:r,end:n}=t.attrs;return r==null||n==null?null:{start:r,end:n}}function bt(e,t){const{parent:r,textOffset:n}=t,o=e.nodeAt(t.pos);if(!o)return v(b(r)).end;const{start:s}=v(b(o));return s+n}function jt(e,t){const r=e.nodeAt(t.pos);if(r){const{start:n}=v(b(r));return n+t.textOffset}return v(b(t.parent)).end}function Ht(e,t){const r=new Map;for(const[n,o]of t){const s=bt(e,e.resolve(o.start)),c=jt(e,e.resolve(o.end));r.set(n,{start:s,end:c})}return r}export{Vt as C,Bt as E,Mt as a,jt as b,Lt as c,Gt as d,A as e,Nt as f,b as g,Ht as h,bt as p,At as u};
//# sourceMappingURL=cb0ba83bmi83mjz2.js.map

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bthkwnb2znu2hg0o.js","assets/i8clt0mfz495j7ii.js","assets/gsas8pb1acnf7jnd.js","assets/oz2w8uv2a0ics46w.js"])))=>i.map(i=>d[i]);
import{e as Q,r as D,j as t,M as i,_ as $,c as J,A as X}from"./i8clt0mfz495j7ii.js";import{hK as Z,o as z,L as F,ky as ee,u as te,h as se,$ as ae,d as y,b0 as ie}from"./ghewn7l2ynbm32fm.js";import{W as oe}from"./kzwmj5bk0a8ido2q.js";import{aH as ne,L as I,o as le}from"./j0yo6uv6652vva62.js";import{E as Y,C as re,u as ce}from"./g5lgy1otfli5p2x7.js";import{T as o}from"./zm1ki9l766pgg0bx.js";import{I as de}from"./nzsqhqpna1ee8hwf.js";import{u as me,T as ue,g as xe}from"./n3wn9a337n2r8lrh.js";import{u as pe}from"./exi6zdummgr6bhr0.js";import"./fgm9uzc3b50cz4e0.js";import"./d30gyor263984jzn.js";import"./kgnykbdth8mb50na.js";import"./g8i6bixylsxyemsr.js";import"./o108mlelkx5ejfzn.js";import"./fv135gy2k0pewip3.js";import"./pbvsc3do5o365cxq.js";import"./i94vqq9eycryltby.js";import"./mpzbsmypy64alaao.js";import"./fvjpw0lui4wq7vv3.js";import"./olrcssu7duieo6m7.js";import"./gzhyo73bmtx9f3d9.js";import"./o56jrqjpjpipvc65.js";import"./chs4g5r39qlnqw6r.js";import"./c80gqv0732s10rnu.js";import"./o6tyvbjf9zh9qku3.js";import"./opd3w2dk1rgqmcsu.js";import"./ieykhlrsk25lij4e.js";import"./i03gut32e8jn5ajq.js";import"./h1em0bjkpkjv8ykw.js";import"./e26n6uhwwtwdmiki.js";import"./mjq17q47489shd3e.js";import"./hxdh3tr5l8kut4ed.js";import"./hu1bt0oauegdhua6.js";import"./k0yjsblyrvonk8x1.js";function fe({isSaving:s,initialScope:e,onChange:n}){const a=Q(),[d,l]=D.useState(e),c=t.jsx(i,{id:"wham.codeReviewPage.autoReviewMyPRs.titleV2",defaultMessage:"Personal preferences"}),u=t.jsx(i,{id:"wham.codeReviewPage.autoReviewMyPRs.descriptionV2",defaultMessage:"Review all my pull requests."});return t.jsx("section",{className:"flex flex-col gap-2",children:t.jsxs("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:[t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("p",{className:"text-sm font-medium",children:c}),t.jsx("p",{className:"text-token-text-secondary text-xs",children:u})]}),t.jsx("div",{className:"flex h-full items-center pe-2 sm:w-auto",children:t.jsx(Z,{"aria-label":a.formatMessage({id:"wham.codeReviewPage.personalPreferences.toggleRepoCodeReviewAria",defaultMessage:"Toggle code review for personal preferences"}),checked:d==="always",disabled:s,onCheckedChange:r=>{const p=r?"always":"repo_default";l(p),n(p)}})})]})})}const ge=z(()=>$(()=>import("./bthkwnb2znu2hg0o.js").then(s=>s._),__vite__mapDeps([0,1])),{loading:s=>F(s)});function he(){return t.jsxs("section",{className:"flex flex-col gap-4",children:[t.jsx("div",{className:"flex w-full flex-wrap items-start justify-between gap-4 sm:flex-nowrap",children:t.jsx("div",{className:"flex w-full flex-col gap-2",children:t.jsx(ne,{type:"info",className:"bg-token-bg-tertiary! rounded-2xl!",icon:t.jsx(ge,{className:"icon-md text-token-text-tertiary"}),isElevated:!1,content:t.jsx("p",{className:"text-token-text-secondary text-sm leading-tight font-normal",children:t.jsx(i,{id:"wham.codeReviewPage.infoBannerV2.bannertext",defaultMessage:"When code review is turned on, Codex automatically suggests improvements to the pull request, or react with üëç.{br}Mention @<b>codex</b> in your pull request to start a task or manually request a review.",values:{br:t.jsx("br",{}),b:s=>t.jsx("span",{className:"font-medium",children:s})}})})})})}),t.jsx("div",{className:"bg-token-border-default h-px"})]})}function we(s,e){const n=ee("installations/select_target");if(s.length>1)return n;const a=s[0];return e?a.account_type==="user"?"https://github.com/settings/installations/".concat(a.id,"/permissions/update"):"https://github.com/organizations/".concat(a.account_login,"/settings/installations/").concat(a.id,"/permissions/update"):"https://github.com/settings/installations/".concat(a.id)}const je=z(()=>$(()=>import("./gsas8pb1acnf7jnd.js").then(s=>s._),__vite__mapDeps([2,1])),{loading:s=>F(s)}),ve=z(()=>$(()=>import("./oz2w8uv2a0ics46w.js").then(s=>s._),__vite__mapDeps([3,1])),{loading:s=>F(s)});function Ne(){const s=te(),e=se(s,"2782825951"),{data:n}=Y(),a=D.useMemo(()=>{var l;return(l=n==null?void 0:n.installations_without_events)!=null?l:[]},[n]);if(a.length===0)return null;const d=we(a,e);return t.jsx("div",{className:"pt-2",children:t.jsxs("div",{className:"bg-token-bg-status-warning outline-token-border-status-warning flex items-start justify-start gap-3 self-stretch rounded-2xl p-4 outline outline-offset-[-1px]",children:[t.jsx("div",{className:"text-token-text-status-warning relative h-5 w-5",children:t.jsx(je,{className:"icon-md"})}),t.jsxs("div",{className:"inline-flex flex-1 flex-col items-start justify-start gap-1",children:[t.jsx("div",{className:"text-token-text-status-warning text-sm leading-tight font-medium",children:t.jsx(i,{id:"wham.codeReviewPage.permissionsBanner.title",defaultMessage:"Action required"})}),t.jsx("div",{className:"justify-start self-stretch",children:t.jsx("p",{className:"text-token-text-status-warning text-sm leading-tight font-normal",children:a.length>1?t.jsx(i,{id:"wham.codeReviewPage.permissionsBanner.description.multiple",defaultMessage:"Some repos require updated GitHub permissions for code reviews to work"}):t.jsx(i,{id:"wham.codeReviewPage.permissionsBanner.description.single",defaultMessage:"Update your GitHub permissions to enable code reviews for <u>{installationName}</u>",values:{u:l=>t.jsx("span",{className:"underline",children:l}),installationName:a[0].account_login}})})})]}),t.jsx("div",{className:"inline-flex flex-col items-start justify-center gap-2 self-stretch",children:t.jsx(ae,{color:"secondary",icon:ve,onClick:()=>{window.open(d,"_blank")},children:t.jsx("div",{className:"text-token-interactive-label-secondary-default justify-start text-sm leading-tight",children:t.jsx(i,{id:"wham.codeReviewPage.permissionsBanner.updateButton",defaultMessage:"Update"})})})})]})})}const x=["w-[50%] sm:w-[40%]","w-[30%] sm:w-[35%]","w-[20%] sm:w-[25%] lg:w-[30%]"];function be(s){"use forget";const e=J.c(46),{disabledInstallations:n}=s;let a;e[0]!==n?(a=n===void 0?[]:n,e[0]=n,e[1]=a):a=e[1];const d=a,l=Q(),{queryInput:c,setQueryInput:u,filteredSettings:r,isLoading:p,isFetching:E,fetchNextPage:T,hasNextPage:L,isFetchingNextPage:B,shouldShowMaxSuggestionsNote:H,shouldShowInfiniteScrollRow:V,isTeamOrEnterprise:f,isPlus:O,isPro:U,user:m,isLegacyEnterprisey:W,currentAccountOwnerId:q,updateCodeReviewRepositories:G}=me();let _;e[2]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx("p",{className:"text-sm font-medium",children:t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.repoPreferences",defaultMessage:"Repository preferences"})}),e[2]=_):_=e[2];let g;e[3]!==f?(g=t.jsxs("div",{className:"hidden flex-col gap-2 sm:flex",children:[_,t.jsx("p",{className:"text-token-text-secondary text-xs",children:f?t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.team",defaultMessage:"Configure code review for all contributors to a repository."}):t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.repoPreferences.description.individual",defaultMessage:"Configure code review preferences for each repository. Reviews for your own PRs are free for a limited time."})})]}),e[3]=f,e[4]=g):g=e[4];let h;e[5]!==l?(h=l.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoAria",defaultMessage:"Search repos or enter a GitHub org/repo"}),e[5]=l,e[6]=h):h=e[6];let w;e[7]!==l?(w=l.formatMessage({id:"wham.codeReviewPage.teamAutomations.searchRepoPlaceholder",defaultMessage:"Search repos or enter a GitHub org/repo"}),e[7]=l,e[8]=w):w=e[8];let j;e[9]!==u?(j=k=>u(k.target.value),e[9]=u,e[10]=j):j=e[10];let v;e[11]!==c||e[12]!==h||e[13]!==w||e[14]!==j?(v=t.jsx("div",{className:"flex items-center justify-between gap-4",children:t.jsx("div",{className:"w-84",children:t.jsx(le,{name:"team-automations-search",containerInputClassName:"w-full",className:"text-token-text-primary flex h-8 w-full items-center rounded-md!",ariaLabel:h,placeholder:w,type:"search",color:"search",value:c,onChange:j})})}),e[11]=c,e[12]=h,e[13]=w,e[14]=j,e[15]=v):v=e[15];let A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(o.HeaderCell,{textAlign:"left",className:x[0],children:t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.table.repository",defaultMessage:"Repository"})}),e[16]=A):A=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(o.HeaderCell,{textAlign:"left",className:y(x[1],"ps-3"),children:t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.table.codeReview",defaultMessage:"Auto code review"})}),e[17]=C):C=e[17];let M;e[18]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs(o.Header,{children:[A,C,t.jsx(o.HeaderCell,{textAlign:"left",className:y(x[2],"table-cell"),children:t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.table.lastUpdated",defaultMessage:"Last updated by"})})]}),e[18]=M):M=e[18];let N;e[19]!==q||e[20]!==d||e[21]!==r||e[22]!==E||e[23]!==W||e[24]!==p||e[25]!==O||e[26]!==U||e[27]!==f||e[28]!==G||e[29]!==(m==null?void 0:m.email)?(N=p?Array.from({length:6}).map(Re):r.length===0&&!E?t.jsx(o.Row,{children:t.jsx(o.Cell,{colSpan:3,className:"text-token-text-tertiary",textAlign:"left",children:t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.noRepositories",defaultMessage:"No repositories"})})}):r.map(k=>{var K;return t.jsx(ue,{repo:k,isTeamOrEnterprise:f,isLegacyEnterprisey:W,isPlus:O,isPro:U,disabledInstallations:d,updateCodeReviewRepositories:G,currentAccountOwnerId:q,currentUserEmail:(K=m==null?void 0:m.email)!=null?K:null,columnWidths:x,layout:"table"},xe(k))}),e[19]=q,e[20]=d,e[21]=r,e[22]=E,e[23]=W,e[24]=p,e[25]=O,e[26]=U,e[27]=f,e[28]=G,e[29]=m==null?void 0:m.email,e[30]=N):N=e[30];let b;e[31]!==H?(b=H&&t.jsx(o.Row,{children:t.jsx(o.Cell,{colSpan:4,className:"!border-b-0!",textAlign:"left",children:t.jsx("p",{className:"text-token-text-secondary text-xs",children:t.jsx(i,{id:"wham.codeReviewPage.teamAutomations.maxSuggestionsNote",defaultMessage:"Displaying maximum {count} suggestions",values:{count:re}})})})}),e[31]=H,e[32]=b):b=e[32];let R;e[33]!==T||e[34]!==L||e[35]!==B||e[36]!==V?(R=V&&t.jsx(o.Row,{children:t.jsx(o.Cell,{colSpan:3,className:"!border-b-0!",textAlign:"left",children:t.jsx(de,{isFetchingNextPage:!!B,hasNextPage:!!L,fetchNextPage:()=>T(),bgColor:"bg-transparent"})})}),e[33]=T,e[34]=L,e[35]=B,e[36]=V,e[37]=R):R=e[37];let P;e[38]!==N||e[39]!==b||e[40]!==R?(P=t.jsx("div",{children:t.jsxs(o.Root,{size:"compact",disableScroll:!0,fixed:!0,children:[M,t.jsxs(o.Body,{children:[N,b,R]})]})}),e[38]=N,e[39]=b,e[40]=R,e[41]=P):P=e[41];let S;return e[42]!==P||e[43]!==g||e[44]!==v?(S=t.jsxs("section",{className:"flex flex-col gap-4",children:[g,v,P]}),e[42]=P,e[43]=g,e[44]=v,e[45]=S):S=e[45],S}function Re(s,e){return t.jsxs(o.Row,{children:[t.jsx(o.Cell,{className:y(x[0],"min-w-0"),children:t.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[t.jsx(I,{className:"h-4 w-4 rounded"}),t.jsx(I,{className:"h-4 w-48"})]})}),t.jsx(o.Cell,{textAlign:"left",className:y(x[1],"min-w-0"),children:t.jsx(I,{className:"h-6 w-40 rounded-md"})}),t.jsx(o.Cell,{textAlign:"left",className:y(x[2],"min-w-0"),children:t.jsx(I,{className:"h-4 w-32"})})]},"skeleton-".concat(e))}function Pe(){const{data:s,isLoading:e,isError:n}=ce(),{mutate:a,isPending:d}=pe({showToast:!1}),l=e||n||!s,{data:c}=Y(),u=D.useMemo(()=>{var r;return(r=c==null?void 0:c.installations_without_events)!=null?r:[]},[c]);return t.jsx(oe,{topPadding:!0,children:t.jsxs("div",{className:"mx-auto flex h-full max-w-screen-xl flex-1 flex-col gap-2 ps-4 pe-12",children:[t.jsx("div",{className:y("border-token-border-heavy flex items-center justify-between border-b"),children:t.jsx("p",{className:"flex items-center gap-2 py-2 align-middle text-xl leading-7 font-medium",children:t.jsx(i,{id:"wham.codeReviewPage.header",defaultMessage:"Code review"})})}),t.jsx("p",{className:"text-token-text-secondary w-max text-sm",children:t.jsx(i,{id:"wham.codeReviewPage.infoBannerV2.subtitle",defaultMessage:"Set up Codex to automatically review pull requests"})}),t.jsx(Ne,{}),t.jsx(he,{}),l?t.jsx("div",{className:"flex items-center justify-center pt-2",children:t.jsx(ie,{className:"icon me-1.5"})}):t.jsxs("div",{className:"flex flex-col gap-4 pt-2 pb-4",children:[t.jsx(fe,{isSaving:d,initialScope:s.code_review_preference,onChange:r=>{a({codeReviewPreference:r})}}),t.jsx("div",{className:"bg-token-border-default h-px"}),t.jsx(be,{disabledInstallations:u.map(r=>r.account_login)})]})]})})}const ot=()=>[{title:"Codex"}],nt=X(function(){return t.jsx(Pe,{})});export{nt as default,ot as meta};
//# sourceMappingURL=l4lx8nfw0bdy3yro.js.map

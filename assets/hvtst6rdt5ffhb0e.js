const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ooz2slmm8agf6bjp.js","assets/i8clt0mfz495j7ii.js"])))=>i.map(i=>d[i]);
var K=Object.defineProperty,Q=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var B=(e,s,t)=>s in e?K(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,A=(e,s)=>{for(var t in s||(s={}))G.call(s,t)&&B(e,t,s[t]);if(U)for(var t of U(s))J.call(s,t)&&B(e,t,s[t]);return e},q=(e,s)=>Q(e,Y(s));import{c as V,e as X,r as I,f as Z,j as o,M as L,_ as ee}from"./i8clt0mfz495j7ii.js";import{nV as te,B as se,u as oe,nA as ne,a as ae,nW as E,nX as ce,J as ie,v as re,M as F,C as le,o as ue,q as de,P as he,r as me,t as fe,L as Se}from"./ghewn7l2ynbm32fm.js";import{c as ge}from"./kgnykbdth8mb50na.js";import"./j0yo6uv6652vva62.js";import"./g8i6bixylsxyemsr.js";const pe=ue(()=>ee(()=>import("./ooz2slmm8agf6bjp.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>Se(e)});function Oe(e){switch(e){case E.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case E.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case E.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const xe=2e3;function Ne(){"use forget";var D,b;const e=V.c(33),s=te(),t=se(),N=X(),i=oe(),R=ne();let f;e[0]!==i?(f=()=>ce(i).isFetched,e[0]=i,e[1]=f):f=e[1];const W=ae(f),c=s==null?void 0:s.errorCode,h=s!=null&&W&&R==null&&!!t,[z,H]=I.useState(!1);let S,g;e[2]!==h?(S=()=>{h&&setTimeout(()=>{H(!0)},xe)},g=[h],e[2]=h,e[3]=S,e[4]=g):(S=e[3],g=e[4]),I.useEffect(S,g);const $=c===E.UnexpectedSSOLogin,m=h&&($?z:!0),n=ge();let p,O;if(e[5]!==n||e[6]!==c||e[7]!==m?(p=()=>{var P;if(!c||!m)return;const w=(P=n==null?void 0:n.split("@"))==null?void 0:P[1];ie.addError("SSO Catch All Modal: ".concat(c," for ").concat(n!=null?n:"unknown user"),{sso_error:c,email:n,email_hostname:w})},O=[c,m,n],e[5]=n,e[6]=c,e[7]=m,e[8]=p,e[9]=O):(p=e[8],O=e[9]),I.useEffect(p,O),!m)return null;let x;e[10]!==N||e[11]!==s.accountName||e[12]!==(t==null?void 0:t.name)?(x=(b=(D=s==null?void 0:s.accountName)!=null?D:t==null?void 0:t.name)!=null?b:N.formatMessage(a.workspacePlaceholder),e[10]=N,e[11]=s.accountName,e[12]=t==null?void 0:t.name,e[13]=x):x=e[13];const T=x;let M;e[14]!==i||e[15]!==t?(M=()=>{const w=t!=null&&t.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;re(i,{fallbackScreenHint:"login",additionalAuthParams:w})},e[14]=i,e[15]=t,e[16]=M):M=e[16];const k=M;let _;e[17]!==s.errorCode?(_=Oe(s.errorCode),e[17]=s.errorCode,e[18]=_):_=e[18];const{title:v,description:j}=_;let r;e[19]!==v?(r=o.jsx("div",{className:"flex flex-col",children:o.jsx("div",{className:"text-lg",children:o.jsx(L,A({},v))})}),e[19]=v,e[20]=r):r=e[20];let l;e[21]!==T?(l=o.jsx(L,q(A({},a.authenticateNotice),{values:{workspaceName:T}})),e[21]=T,e[22]=l):l=e[22];let u;e[23]!==k||e[24]!==l?(u=o.jsx(F.Button,{onClick:k,color:"primary",children:l}),e[23]=k,e[24]=l,e[25]=u):u=e[25];let C;e[26]===Symbol.for("react.memo_cache_sentinel")?(C=o.jsx(F.Button,{onClick:Me,children:o.jsx(L,{id:"KlMYRb",defaultMessage:"Log out"})}),e[26]=C):C=e[26];let d;e[27]!==j?(d=o.jsx("div",{className:"flex flex-col space-y-4",children:o.jsx("div",{children:o.jsx(L,A({},j))})}),e[27]=j,e[28]=d):d=e[28];let y;return e[29]!==u||e[30]!==d||e[31]!==r?(y=o.jsx(le,{testId:"modal-sso-catch-all",isOpen:!0,onClose:de,type:"warning",size:"custom",className:"max-w-3xl",title:r,icon:pe,primaryButton:u,secondaryButton:C,children:d}),e[29]=u,e[30]=d,e[31]=r,e[32]=y):y=e[32],y}function Me(){he.logLogOutButtonClicked({location:"sso_catch_all_modal"},me.ACCESS_LOGOUT_ACTION_LOCATION_SSO_CATCH_ALL_MODAL),fe()}const a=Z({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{Ne as default};
//# sourceMappingURL=hvtst6rdt5ffhb0e.js.map

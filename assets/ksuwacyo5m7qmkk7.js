const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/j0yo6uv6652vva62.js","assets/i8clt0mfz495j7ii.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css","assets/e216z3zqjas1rma2.js"])))=>i.map(i=>d[i]);
var O=Object.defineProperty,P=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var M=(e,s,n)=>s in e?O(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,y=(e,s)=>{for(var n in s||(s={}))R.call(s,n)&&M(e,n,s[n]);if(N)for(var n of N(s))Q.call(s,n)&&M(e,n,s[n]);return e},j=(e,s)=>P(e,F(s));import{e as D,r as g,j as t,M as m,ae as L,_ as v}from"./i8clt0mfz495j7ii.js";import{co as b,cn as S,u as C,dp as W,h7 as z,o as w,L as _}from"./ghewn7l2ynbm32fm.js";import{bN as I,bO as q,bP as J,bQ as T}from"./j0yo6uv6652vva62.js";const E=w(()=>v(()=>import("./j0yo6uv6652vva62.js").then(e=>e.yo),__vite__mapDeps([0,1,2,3,4])),{loading:e=>_(e)}),A=w(()=>v(()=>import("./e216z3zqjas1rma2.js").then(e=>e._),__vite__mapDeps([5,1])),{loading:e=>_(e)}),G=w(()=>v(()=>import("./j0yo6uv6652vva62.js").then(e=>e.yx),__vite__mapDeps([0,1,2,3,4])),{loading:e=>_(e)});function V(e){var n,c,o;const s=[];for(const l of e){const x=s.length?s[s.length-1]:null;if(l.status!=="in_progress"){if(l.author.role===b.Tool&&l.author.name==="api_tool.call_tool"&&l.content.content_type===S.MultimodalText){const a=(n=l.metadata)==null?void 0:n.citation_metadata,r=a==null?void 0:a.id;if(!a||!r)continue;const i={id:a.id,name:a.title,url:a.url,messageId:l.id};x?x.results.push(i):s.push({call:"unhandled",results:[i]})}else if(l.author.role===b.Assistant&&l.recipient==="api_tool.call_tool"&&l.content.content_type===S.Code&&l.content.language==="json"){let a={};try{if(a=JSON.parse(l.content.text),typeof a.args=="string")try{a.args=JSON.parse(a.args)}catch(r){continue}}catch(r){continue}if(!a.path)continue;if(a.path==="mixer://search"&&typeof((c=a.args)==null?void 0:c.sources)=="object"){const r=[],i=a.args.sources;for(const u in i){const d=i[u],f=I(u);if(f){const h=new Set;d.forEach(p=>{p.query&&!h.has(p.query)&&(r.push(j(y({isMixer:!1,path:u},f),{query:p.query})),h.add(p.query))})}}s.push({call:{isMixer:!0,messageId:l.id,path:"mixer://search",queries:r},results:[]})}else if((o=a.args)!=null&&o.query){const r=I(a.path);r&&s.push({call:j(y({isMixer:!1,messageId:l.id,path:a.path},r),{query:a.args.query}),results:[]})}}}}return s}function k(e){return e?e.replace(/\s*--[^\s=]+(?:=[^\s]+)?/g,"").replace(/\s+/g," ").trim():""}function Z({messages:e,isLastMessage:s}){const n=D(),c=C(),o=e.some(r=>{var i,u;return W({id:(u=(i=r.metadata)==null?void 0:i.model_slug)!=null?u:""},c)}),l=g.useMemo(()=>s?q.Running:q.Finished,[s]),x=g.useMemo(()=>s?n.formatMessage({id:"SrnzPW",defaultMessage:"Searching internal knowledge"}):n.formatMessage({id:"rI4m7i",defaultMessage:"Searched internal knowledge"}),[n,s]),a=g.useMemo(()=>V(e),[e]);return o?t.jsx(J,{highlightedCommand:x,showWorkUserSetting:!1,status:l,children:a.map((r,i)=>{if(r.call==="unhandled")return null;{const u=(r.call.isMixer?r.call.queries:[r.call]).map((d,f)=>{const h=k(d.query);return t.jsx(U,{query:h},f)});return t.jsxs("div",{className:"relative flex w-full items-stretch gap-2 overflow-clip",children:[t.jsxs("div",{className:"flex w-4 flex-none flex-col items-center",children:[t.jsx("div",{className:"flex h-5 flex-none items-center justify-center",children:r.call.isMixer?t.jsx("div",{className:"bg-token-interactive-icon-tertiary-default h-[6px] w-[6px] rounded-full"}):t.jsx(r.call.Icon,{className:"icon-sm"})}),i<a.length-1&&t.jsx("div",{className:"bg-token-border-heavy h-1 w-[1px] flex-auto rounded-full"})]}),t.jsxs("div",{className:"mb-3 flex w-1 flex-auto flex-col gap-3",children:[t.jsx("p",{className:"text-token-text-secondary flex flex-auto flex-row flex-wrap gap-1",children:r.call.isMixer?u.length===1?t.jsx(m,{id:"olKix8",defaultMessage:'Searched for "{query}"',values:{query:u[0]}}):t.jsx(m,{id:"5CdONM",defaultMessage:"Searched for {queries}",values:{queries:t.jsx(L,{value:u})}}):t.jsx(m,{id:"olKix8",defaultMessage:'Searched for "{query}"',values:{query:k(r.call.query)}})}),!!r.results.length&&t.jsx("div",{className:"overflow-x-auto",children:t.jsx("div",{className:"flex flex-row gap-2",children:r.results.map(d=>t.jsx(K,{url:d.url,name:d.name},d.id))})})]})]},r.call.messageId)}})}):null}function K({url:e,name:s}){var o;const n=T(e!=null?e:""),c=(o=n==null?void 0:n.Icon)!=null?o:e?G:A;return t.jsxs(z,{className:"bg-token-bg-tertiary hover:bg-token-interactive-bg-tertiary-hover flex h-[25px] max-w-64 flex-row items-center gap-1 rounded-xl px-2 text-[10px] leading-[13px]",href:e,children:[t.jsx(c,{className:"icon-sm"}),t.jsx("p",{className:"text-token-text-secondary truncate overflow-ellipsis",children:s})]})}function $({maxResults:e,results:s}){const n=g.useMemo(()=>{const c=new Set;return s.slice(0,e-1).forEach(o=>{var x,a;const l=T((x=o.url)!=null?x:"");c.add((a=l==null?void 0:l.Icon)!=null?a:o.url?G:A)}),Array.from(c)},[s,e]);return t.jsxs("div",{className:"bg-token-bg-tertiary flex h-[25px] max-w-64 flex-row items-center gap-1 rounded-xl px-2 text-[10px] leading-[13px]",children:[n.map((c,o)=>t.jsx(c,{className:"icon-sm"},o)),t.jsx("p",{className:"text-token-text-secondary truncate overflow-ellipsis",children:t.jsx(m,{id:"Wj+XrO",defaultMessage:"{number} more",values:{number:s.length-(e-1)}})})]})}function U({query:e}){return t.jsxs("div",{className:"bg-token-bg-tertiary flex h-[25px] max-w-64 flex-row items-center gap-1 rounded-xl px-2 text-[10px] leading-[13px]",children:[t.jsx(E,{className:"icon-xs"}),t.jsx("p",{className:"text-token-text-secondary truncate overflow-ellipsis",children:e})]})}function ee({maxResults:e,queries:s}){return t.jsxs("div",{className:"bg-token-bg-tertiary flex h-[25px] max-w-64 flex-row items-center gap-1 rounded-xl px-2 text-[10px] leading-[13px]",children:[t.jsx(E,{className:"icon-xs"}),t.jsx("p",{className:"text-token-text-secondary truncate overflow-ellipsis",children:t.jsx(m,{id:"axYnJ7",defaultMessage:"{number} more searches",values:{number:s.length-(e-1)}})})]})}export{Z as GlauxMessage,ee as GlauxSearchQueryOverflow,U as GlauxSearchQueryWithIcon,K as GlauxSearchResultItem,$ as GlauxSearchResultOverflow,k as cleanQuery,V as groupGlauxMessages};
//# sourceMappingURL=ksuwacyo5m7qmkk7.js.map

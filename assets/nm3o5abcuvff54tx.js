var Ge=Object.defineProperty;var Ee=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var be=(r,d,m)=>d in r?Ge(r,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):r[d]=m,Ae=(r,d)=>{for(var m in d||(d={}))Ne.call(d,m)&&be(r,m,d[m]);if(Ee)for(var m of Ee(d))je.call(d,m)&&be(r,m,d[m]);return r};import{r as u,j as $,R as me,c as qe}from"./i8clt0mfz495j7ii.js";import{d as ye}from"./ghewn7l2ynbm32fm.js";const Oe=u.createContext(null);function Pe(){"use no forget";const r=u.useContext(Oe);if(!r)throw new Error("useCanvasStack must be used within <CanvasStackProvider>");return r}function Ve(){"use no forget";const{gl:r,onLoopWebGL:d,getOrCreateProgram:m,size:H,onResize:F,onColorChange:x}=Pe();return{gl:r,onLoopWebGL:d,getOrCreateProgram:m,size:H,onResize:F,onColorChange:x}}function $e(){"use no forget";const{ctx2d:r,onLoopUI:d,size:m,onResize:H,onColorChange:F}=Pe();return{ctx2d:r,onLoopUI:d,size:m,onResize:H,onColorChange:F}}function Ke({children:r}){"use no forget";const d=u.useRef(null),m=u.useRef(null),H=u.useRef(null),F=u.useRef(!1),[x,D]=u.useState(!1),R=u.useRef(null),[f,k]=u.useState(null),[L,h]=u.useState(null),[X,ne]=u.useState({width:0,height:0,dpr:1}),W=u.useRef(X);u.useEffect(()=>{W.current=X},[X]);const z=u.useRef(new Set),q=w=>(z.current.add(w),()=>{z.current.delete(w)}),K=u.useRef(new Set),ae=w=>(K.current.add(w),()=>{K.current.delete(w)}),M=(w,_,S=(I=>(I=window==null?void 0:window.devicePixelRatio)!=null?I:1)())=>{const T=m.current,C=H.current;if(!T||!C)return;const Y=Math.max(1,Math.floor(w*S)),E=Math.max(1,Math.floor(_*S));(T.width!==Y||T.height!==E)&&(T.width=Y,T.height=E),(C.width!==Y||C.height!==E)&&(C.width=Y,C.height=E),T.style.width="".concat(w,"px"),T.style.height="".concat(_,"px"),C.style.width="".concat(w,"px"),C.style.height="".concat(_,"px"),ne({width:Y,height:E,dpr:S})},O=u.useRef(new Set),J=w=>(O.current.add(w),()=>{O.current.delete(w)}),U=u.useRef(new Set),Q=w=>(U.current.add(w),()=>{U.current.delete(w)}),P=u.useRef(new Map),B=(w,_,S)=>{var a;const I=P.current.get(w);if(I)return I;if(!f)return null;const T=(c,l)=>{var p;const t=f.createShader(c);if(!t)throw new Error("Unable to create shader");if(f.shaderSource(t,l),f.compileShader(t),!f.getShaderParameter(t,f.COMPILE_STATUS)){const b=(p=f.getShaderInfoLog(t))!=null?p:"";throw f.deleteShader(t),new Error("Shader compile failed:\n"+b)}return t},C=T(f.VERTEX_SHADER,_),Y=T(f.FRAGMENT_SHADER,S),E=f.createProgram();if(!E)throw f.deleteShader(C),f.deleteShader(Y),new Error("Unable to create WebGL program");if(f.attachShader(E,C),f.attachShader(E,Y),f.linkProgram(E),!f.getProgramParameter(E,f.LINK_STATUS)){const c=(a=f.getProgramInfoLog(E))!=null?a:"";throw f.deleteProgram(E),f.deleteShader(C),f.deleteShader(Y),new Error("Program link failed:\n"+c)}f.deleteShader(C),f.deleteShader(Y);const n=["aPos","position"],e=["uTime","uResolution","uColor","uColor2","uHighlightColor","uHighlightColor2","uMix"],o={};n.forEach(c=>o[c]=f.getAttribLocation(E,c));const i={};e.forEach(c=>i[c]=f.getUniformLocation(E,c));const s={program:E,attribs:o,uniforms:i};return P.current.set(w,s),s},G=u.useRef(null);u.useEffect(()=>{var n,e,o,i;const w=m.current,_=H.current;if(!w||!_||typeof window>"u")return;const S=w.getContext("webgl2",{antialias:!1,premultipliedAlpha:!1});S&&k(S);const I=_.getContext("2d",{alpha:!0});I&&h(I);const T=new ResizeObserver(()=>{G.current&&clearTimeout(G.current),G.current=setTimeout(()=>{var c,l,t,p;const s=(c=d.current)==null?void 0:c.getBoundingClientRect(),a=Math.max(1,Math.min(2,(l=window.devicePixelRatio)!=null?l:1));M((t=s==null?void 0:s.width)!=null?t:1,(p=s==null?void 0:s.height)!=null?p:1,a),z.current.forEach(b=>b())},100)});d.current&&T.observe(d.current);const C=(n=d.current)==null?void 0:n.getBoundingClientRect(),Y=Math.max(1,Math.min(2,(e=window.devicePixelRatio)!=null?e:1));M((o=C==null?void 0:C.width)!=null?o:1,(i=C==null?void 0:C.height)!=null?i:1,Y);const E=P.current;return()=>{if(T.disconnect(),R.current&&cancelAnimationFrame(R.current),G.current&&clearTimeout(G.current),S)for(const{program:s}of E.values())S.deleteProgram(s);E.clear()}},[]);const oe=u.useRef(null),N=w=>{if(R.current=null,!f&&!L){R.current=requestAnimationFrame(N);return}oe.current||(oe.current=w);const _=(w-oe.current)/1e3;f&&(f.viewport(0,0,W.current.width,W.current.height),f.clear(f.COLOR_BUFFER_BIT),O.current.forEach(S=>S(f,_,W.current))),L&&(L.setTransform(W.current.dpr,0,0,W.current.dpr,0,0),U.current.forEach(S=>S(L,_,W.current))),!F.current&&_>.5&&(F.current=!0,D(!0)),R.current=requestAnimationFrame(N)};u.useEffect(()=>{var w;return(w=R.current)!=null||(R.current=requestAnimationFrame(N)),()=>{R.current&&cancelAnimationFrame(R.current),R.current=null}},[f,L]);const fe=(w,_,S)=>{K.current.forEach(I=>I(w,_,S))},de=u.useMemo(()=>({size:X,gl:f,onLoopWebGL:J,getOrCreateProgram:B,ctx2d:L,onLoopUI:Q,onResize:q,onColorChange:ae,changeColor:fe}),[X,f,L]);return $.jsxs(Oe.Provider,{value:de,children:[$.jsx("canvas",{ref:m,className:ye("fixed inset-0 h-screen w-screen transition-opacity duration-450 ease-linear",x?"opacity-100":"opacity-0")}),$.jsx("canvas",{ref:H,className:ye("fixed inset-0 h-screen w-screen transition-opacity duration-450 ease-linear",x?"opacity-100":"opacity-0")}),$.jsx("div",{ref:d,className:"fixed inset-0 h-screen w-screen",children:r})]})}const Je={vertex:"#version 300 es\n    in vec2 aPos;\n\n    void main() { \n      gl_Position = vec4(aPos, 0.0, 1.0);\n    }\n  ",fragment:"#version 300 es\n    precision highp float;\n    out vec4 outColor;\n\n    uniform vec3 uColor;\n    uniform vec3 uColor2;\n    uniform vec3 uHighlightColor;\n    uniform vec3 uHighlightColor2;\n    uniform vec2 uResolution;\n    uniform float uMix;\n    uniform float uTime;\n\n\n    float random(vec2 st) {\n      return fract(sin(dot(st.xy, vec2(12.9898, 78.233))) * 43758.543123);\n    }\n\n    float noise(vec2 st) {\n      vec2 i = floor(st);\n      vec2 f = fract(st);\n\n      float a = random(i);\n      float b = random(i + vec2(1.0, 0.0));\n      float c = random(i + vec2(0.0, 1.0));\n      float d = random(i + vec2(1.0, 1.0));\n\n      vec2 u = f * f * (3.0 - 2.0 * f); // smoothstep(f)\n\n      return mix(a, b, u.x) + \n            (c - a) * u.y * (1.0 - u.x) + \n            (d - b) * u.x * u.y;\n    }\n\n    vec2 rotateUV(vec2 uv, float r) {\n      float c = cos(r);\n      float s = sin(r);\n      mat2 m = mat2(c, -s, \n                    s,  c);\n\n      vec2 st = uv - vec2(0.5);\n      st = m * st;\n      return st + vec2(0.5);\n    }\n    \n    void main() {\n      vec2 st = gl_FragCoord.xy / uResolution;\n      \n      vec2 uv = rotateUV(st, noise(st + uTime * 0.15) * 2.45);\n      uv += noise(uv + uTime) * 0.01; // tiny wobble\n\n      float n = noise(uv * 1.45 + (uTime * 0.05));\n      vec3 color = mix(uColor, uHighlightColor, n);\n\n      if (uMix > 0.0) {\n        vec3 color2 = mix(uColor2, uHighlightColor2, n);\n        color = mix(color, color2, uMix);\n      }\n\n      outColor = vec4(color, 1.0);\n    }\n  "};function ve(r,d,m){return[r[0]*(1-m)+d[0]*m,r[1]*(1-m)+d[1]*m,r[2]*(1-m)+d[2]*m]}function ie(r,d){r=r.replace(/^#/,""),r.length===3&&(r=r.split("").map(x=>x+x).join(""));const m=parseInt(r.substring(0,2),16)/(d?255:1),H=parseInt(r.substring(2,4),16)/(d?255:1),F=parseInt(r.substring(4,6),16)/(d?255:1);return[m,H,F]}function Fe(r){return 1-Math.pow(1-r,3)}const Xe=1.5;function Qe(){"use no forget";const{gl:r,onLoopWebGL:d,getOrCreateProgram:m,onResize:H,onColorChange:F,size:x}=Ve(),D=u.useRef(null),R=u.useRef(0),f=u.useRef(!1);return u.useEffect(()=>{if(!r)return;if(!D.current){const M=new Float32Array([-1,-1,3,-1,-1,3]),O=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,O),r.bufferData(r.ARRAY_BUFFER,M,r.STATIC_DRAW),D.current=O}const{vertex:k,fragment:L}=Je,h=m("gradientGL",k,L);if(!h)return;const X=h.attribs.aPos;r.useProgram(h.program),r.bindBuffer(r.ARRAY_BUFFER,D.current),r.enableVertexAttribArray(X),r.vertexAttribPointer(X,2,r.FLOAT,!1,0,0),r.uniform3fv(h.uniforms.uColor,[.16,.65,.9]),r.uniform3fv(h.uniforms.uHighlightColor,[.76,.92,1]),r.uniform3fv(h.uniforms.uColor,ie("#29A6E6",!0)),r.uniform3fv(h.uniforms.uColor2,ie("#29A6E6",!0)),r.uniform3fv(h.uniforms.uHighlightColor,ie("#C2EBFF",!0)),r.uniform3fv(h.uniforms.uHighlightColor2,ie("#C2EBFF",!0)),r.uniform1f(h.uniforms.uMix,0);const ne=(M,O)=>{if(M.uniform1f(h.uniforms.uTime,O),f.current){R.current===0&&(R.current=O);const J=Fe((O-R.current)/Xe);if(M.uniform1f(h.uniforms.uMix,J),J>=1){const U=M.getUniform(h.program,h.uniforms.uColor2);M.uniform3fv(h.uniforms.uColor,U);const Q=M.getUniform(h.program,h.uniforms.uHighlightColor2);M.uniform3fv(h.uniforms.uHighlightColor,Q),M.uniform1f(h.uniforms.uMix,0),R.current=0,f.current=!1}}M.drawArrays(M.TRIANGLES,0,3)},W=(M,O)=>{const J=Array.from(r.getUniform(h.program,h.uniforms.uColor)),U=Array.from(r.getUniform(h.program,h.uniforms.uHighlightColor)),Q=Array.from(r.getUniform(h.program,h.uniforms.uColor2)),P=Array.from(r.getUniform(h.program,h.uniforms.uHighlightColor2)),B=r.getUniform(h.program,h.uniforms.uMix),G=ve(J,Q,B),oe=ve(U,P,B);r.uniform3fv(h.uniforms.uColor,G),r.uniform3fv(h.uniforms.uHighlightColor,oe),r.uniform3fv(h.uniforms.uColor2,ie(M,!0)),r.uniform3fv(h.uniforms.uHighlightColor2,ie(O,!0)),R.current=0,f.current=!0},z=()=>{r.uniform2f(h.uniforms.uResolution,x.width,x.height)},q=d(ne),K=H(z),ae=F(W);return()=>{q(),K(),ae(),r.deleteBuffer(D.current)}},[r]),null}const We=me.forwardRef((r,d)=>{const[m,H]=me.useState(!1);return me.useEffect(()=>{H(!0)},[]),m&&$.jsx("video",Ae({ref:d},r))});We.displayName="MountedVideo";const Ze="https://cdn.openai.com/chatgpt/ctf-cdn/29c248ea-a38c-441f-aeeb-3fbc9b17f0f4.mp4",Se={k:130,c:30},et=.6,tt=[1,3,4,5,6],ge=[.85,.8,-.05,.03,.75,.1],Te=[.27,.55,.5,.4,.4,.6],Me=[415,329,330,253,264,381],xe=[377,364,366,181,189,346],nt=[6,10,11],we=[.15,.8,.85,-.02,.1,.75],Ye=[.7,.38,.58,.42,.55,.55],He=[329,382,381,330,255,242],_e=[364,277,346,366,183,174],ot=.3,rt=.4,le=1280,st=850;let ce=0,pe=0;const te=[],Le=["tl","tr","bl","br"],it=r=>r==="tl"?"br":r==="tr"?"bl":r==="bl"?"tr":"tl",Ie=r=>({x:r==="tl"||r==="bl"?-50:50,y:r==="tl"||r==="tr"?-50:50});function at(){"use no forget";const{ctx2d:r,onLoopUI:d,size:m,onResize:H,onColorChange:F}=$e(),[x,D]=u.useState(-1),R=u.useRef(0),f=u.useRef(!1),k=u.useRef(null),L=u.useRef({offsetX:0,offsetY:0,drawWidth:0,drawHeight:0}),h=u.useRef(!1),X=u.useRef(!1),ne=u.useRef([28,152,215]),W=u.useRef(ne.current),z=u.useRef(0),q=u.useRef(null),K=u.useRef(null);u.useEffect(()=>{if(!q.current){const n=document.createElement("canvas");q.current=n,K.current=n.getContext("2d",{alpha:!1})}},[]);const ae=(n,e,o,i,s,a)=>{a.moveTo(n+s,e),a.lineTo(n+o-s,e),a.quadraticCurveTo(n+o,e,n+o,e+s),a.lineTo(n+o,e+i-s),a.quadraticCurveTo(n+o,e+i,n+o-s,e+i),a.lineTo(n+s,e+i),a.quadraticCurveTo(n,e+i,n,e+i-s),a.lineTo(n,e+s),a.quadraticCurveTo(n,e,n+s,e)},M=u.useCallback((n,e,o)=>{const s=q.current,a=K.current,{drawWidth:c,drawHeight:l,offsetX:t,offsetY:p}=L.current;o&&s&&a&&c>1&&l>1&&((s.width!==c||s.height!==l)&&(s.width=Math.max(1,Math.floor(c)),s.height=Math.max(1,Math.floor(l))),a.clearRect(0,0,s.width,s.height),a.drawImage(o,0,0,s.width,s.height)),n.forEach((b,g)=>{if(window.innerWidth<768&&(nt.includes(g)||tt.includes(g)))return;const{x:V,y:v,w:A,h:y}=b,Z=Math.min(16,A/2,y/2);e.globalAlpha=b.animState.opacity,e.save(),e.beginPath(),ae(V,v,A,y,Z,e),e.clip(),o&&q.current&&e.drawImage(q.current,0,0,c,l,t,p,c,l),e.restore(),O(b,e,16),J(b,e,16),e.globalAlpha=1})},[]),O=u.useCallback((n,e,o)=>{const{x:i,y:s,w:a,h:c}=n,l=Math.min(o,a/2,c/2),t=23,p=Math.min(t,l);e.beginPath(),e.moveTo(i+l,s),e.lineTo(i+a-l,s),e.quadraticCurveTo(i+a,s,i+a,s+p),e.lineTo(i+a,s+t),e.lineTo(i,s+t),e.lineTo(i,s+p),e.quadraticCurveTo(i,s,i+l,s),e.closePath(),e.fillStyle="#BFDBF9",e.fill();const b=5.5,g=7.5,V=13,v=s+t/2,A=i+V+b;for(let y=0;y<3;y++){const Z=A+y*(2*b+g);e.beginPath(),e.arc(Z,v,b,0,Math.PI*2),e.fillStyle="#fff",e.fill()}},[]),J=u.useCallback((n,e,o)=>{const{x:i,y:s,w:a,h:c}=n,l=Math.min(o,a/2,c/2);e.beginPath(),ae(i,s,a,c,l,e),e.globalAlpha=n.animState.opacity*.3,e.lineWidth=1,e.strokeStyle="rgba(255, 255, 255, 1.0)",e.stroke()},[]),U=(n,e,o,i,s,a)=>{let c=i+(n-e)*(s-i)/(o-e);return c=Math.min(Math.max(c,Math.min(i,s)),Math.max(i,s)),c},Q=(n,e,o,i,s)=>{var a,c;return n=n*window.innerWidth,s?e=e*window.innerHeight:e=e*window.innerHeight+(((c=(a=document.scrollingElement)==null?void 0:a.scrollHeight)!=null?c:0)-window.innerHeight)-window.scrollY-ce,o*=U(window.innerWidth/le,0,1,.2,1),i*=U(window.innerWidth/st,0,1,.2,1),{x:n,y:e,baseY:e,targetX:n,targetY:e,baseTargetY:e,w:o,h:i,vx:0,vy:0,grabX:0,grabY:0,dragging:!1,scrollMultiplier:s?.65+Math.random()*.45:1,parallaxMultiplier:s?0:1+Math.random()*3,springAlpha:1,seed:Math.random()*100,releasedAt:0,animatedAt:0,rAnimationInterval:0,animState:{state:"idle",start:0,opacity:1}}},P=u.useMemo(()=>{if(typeof window>"u")return[];const n=Array.from({length:ge.length}).map((e,o)=>Q(ge[o],Te[o],Me[o],xe[o],!0));return n.forEach((e,o)=>{e.rAnimationInterval=[20,25,16,13][o]}),n},[]),B=u.useMemo(()=>{if(typeof window>"u")return[];const n=Array.from({length:we.length}).map((e,o)=>Q(we[o],Ye[o],He[o],_e[o]));return n.forEach((e,o)=>{e.rAnimationInterval=[16,12,20,18,24,14][o]}),n},[]),G=u.useRef("default"),oe=n=>{G.current!==n&&(G.current=n,document.body.style.cursor=n)},N=u.useRef(0),fe=u.useRef(0),de=n=>{const e=[...P,...B];if(n==null||n<0||n>=e.length)return;const o=e[n];if(o.animState.state!=="idle")return;const s=N.current,a=Le[Math.floor(Math.random()*Le.length)],{x:c,y:l}=Ie(a);o.targetX+=c,o.targetY+=l,o.baseTargetY+=l;const t=it(a),p=Ie(t);o.animState={state:"fadingOut",start:s,opacity:1,spawn:p}},w=(n,e,o,i)=>{var c,l;let s=window.scrollY-fe.current;fe.current=window.scrollY;const a=1;window.scrollY+window.innerHeight>=((l=(c=document.scrollingElement)==null?void 0:c.scrollHeight)!=null?l:1/0)-ce&&(s*=.7),n.forEach((t,p)=>{var Ce,Re;if(t.dragging){t.animatedAt=e;return}const b=t.scrollMultiplier*a,g=t.animState;if(g.state==="fadingOut"){const se=Math.min(1,(e-g.start)/ot);g.opacity=1-se,se>=1&&(g.state="idle",setTimeout(()=>{g.spawn&&(t.x+=g.spawn.x+g.spawn.x,t.y+=g.spawn.y+g.spawn.y,t.targetX+=g.spawn.x,t.targetY+=g.spawn.y,t.baseTargetY+=g.spawn.y),g.state="fadingIn",g.start=e+1.25},1250))}else if(g.state==="fadingIn"){const se=Math.min(1,(e-g.start)/rt);g.opacity=se,se>=1&&(g.state="idle",g.opacity=1,t.animatedAt=e)}t.animState=g,Math.abs(t.vx)>5&&Math.abs(t.vy)>5&&t.releasedAt&&(t.releasedAt=e);const v=(t.releasedAt?e-t.releasedAt:1/0)<et||g.state!=="idle"?0:1;v===1&&(t.releasedAt=0),t.animatedAt===0&&(t.animatedAt=e),e-t.animatedAt>=t.rAnimationInterval&&t.animState.state==="idle"&&(t.animatedAt=e,de(p)),t.springAlpha+=(v-t.springAlpha)*(1-Math.exp(-1.4*o));const A=Se.k*t.springAlpha,y=Se.c*t.springAlpha,Z=-A*(t.x-t.targetX)-y*t.vx,ee=-A*(t.y-t.targetY)-y*t.vy;t.vx+=Z*o,t.vy+=ee*o;const j=1/(1+o*2.5)*Math.pow(.9,o);t.vx*=j,t.vy*=j;const re=Math.sin(e*.7+t.seed*1.3)*.3,ue=Math.sin(e*1.3+t.seed*2.7)*.4,Ue=Math.cos(e*.9+t.seed*4.1)*.2,Be=re*3+ue*2+Ue*1.5,De=re*2-ue*3+Math.cos(e*.5+t.seed*3.7)*2;v<1&&t.animState.state==="idle"&&_(t,i),t.x+=t.vx*o+Be*.15,t.baseY+=t.vy*o+De*.15-s*b;const ke=400;let he=0;if(p>=P.length){const se=Math.max(window.scrollY,1)/(((Re=(Ce=document.scrollingElement)==null?void 0:Ce.scrollHeight)!=null?Re:0)-ce-window.innerHeight);he=ke*t.parallaxMultiplier*(1-se)}t.baseTargetY-=s*t.scrollMultiplier;const ze=t.baseY+he;t.y+=(ze-t.y)*.8,t.targetY=t.baseTargetY+he})},_=(n,e)=>{const s=e.width/e.dpr-n.w,a=window.innerHeight-n.h;n.x<=0&&n.vx<0&&(n.vx*=-.8),n.x>=s&&n.vx>0&&(n.vx*=-.8),n.y<=0&&n.vy<0&&(n.vy*=-.8),n.y>=a&&n.vy>0&&(n.vy*=-.8)};u.useEffect(()=>{if(!r)return;const e=d((o,i,s)=>{oe(X.current?x>=0?"grabbing":"grab":"default"),o.clearRect(0,0,s.width,s.height);const a=N.current,c=Math.min(i-a,1/30);N.current=i,f.current&&(R.current===0&&(R.current=i),z.current=Fe((i-R.current)/Xe),ne.current=ve(ne.current,W.current,z.current),z.current>=1&&(R.current=0,f.current=!1));const l=[...P,...B];w(l,i,c,s),M(l,o,k.current)});return()=>{e()}},[r,m.width,m.height,x]);const S=()=>{var g,V;const n=v=>{const ee=window.innerWidth;if(ee<=le)return v*U(ee,0,le,.2,1);const j=(ee-le)/(2950-le),re=Math.sqrt(j);return v*(1+re*.5)},e=(v,A,y,Z)=>{var re,ue;const ee=A*window.innerWidth;v.x=ee,v.targetX=ee;let j=y*window.innerHeight-window.scrollY*v.scrollMultiplier;Z&&(j+=((ue=(re=document.scrollingElement)==null?void 0:re.scrollHeight)!=null?ue:0)-window.innerHeight-ce),v.y=j,v.baseY=j,v.targetY=j,v.baseTargetY=j};let o=0;window.innerWidth>=2950&&(o=.25*U(window.innerWidth/2950,1,2,.1,1)),P.forEach((v,A)=>{let y=ge[A];y+=y>.5?-o:o,e(v,y,Te[A],!1),v.w=n(Me[A]),v.h=n(xe[A])}),B.forEach((v,A)=>{let y=we[A];y+=y>.5?-o:o,e(v,y,Ye[A],!0),v.w=n(He[A]),v.h=n(_e[A])});const s=document.querySelector("footer");if(s&&(ce=s.getBoundingClientRect().height,pe=Math.max(0,((V=(g=document.scrollingElement)==null?void 0:g.scrollHeight)!=null?V:0)-ce)),!k.current)return;const a=k.current.videoWidth/k.current.videoHeight,c=window.innerWidth/window.innerHeight;let l,t,p,b;a>c?(t=window.innerHeight,l=t*a,p=(window.innerWidth-l)/2,b=0):(l=window.innerWidth,t=l/a,p=0,b=(window.innerHeight-t)/2),L.current.drawWidth=l,L.current.drawHeight=t,L.current.offsetX=p,L.current.offsetY=b};u.useEffect(()=>{if(!r)return;const n=H(S);return()=>{n()}},[r,k]);const I=u.useCallback(n=>{if(h.current)return;let e=0,o=0,i=0;if(n instanceof MouseEvent){const{clientX:l,clientY:t,pageY:p}=n;e=l,o=t,i=p}else{const{clientX:l,clientY:t,pageY:p}=n.touches[0];e=l,o=t,i=p}const s=[...P,...B],a=s.findLastIndex(({x:l,y:t,w:p,h:b})=>{const g=e>=l&&e<=l+p,V=o>=t&&o<=t+b;return g&&V&&i<pe});if(a===-1)return;const c=s[a];c.dragging=!0,c.grabX=e-c.x,c.grabY=o-c.y,c.vx=0,c.vy=0,c.springAlpha=0,D(a),Y(e,o,N.current*1e3)},[D,Y]),T=u.useCallback(n=>{let e=0,o=0,i=0;if(n instanceof MouseEvent){const{clientX:c,clientY:l,pageY:t}=n;e=c,o=l,i=t}else{const{clientX:c,clientY:l,pageY:t}=n.touches[0];e=c,o=l,i=t}const s=[...P,...B];X.current=s.some(({x:c,y:l,w:t,h:p})=>{const b=e>=c&&e<=c+t,g=o>=l&&o<=l+p;return b&&g&&i<pe}),X.current&&(n.preventDefault(),n.stopPropagation());const a=s[x];a!=null&&a.dragging&&(a.x=e-a.grabX,a.y=o-a.grabY,a.baseY=o-a.grabY,Y(e,o,N.current*1e3))},[x,Y]),C=u.useCallback(()=>{const e=[...P,...B][x];if(!e)return;e.dragging=!1;const o=E();e.vx=o.x,e.vy=o.y,e.releasedAt=N.current,D(-1)},[x,E]);function Y(n,e,o){te.push({x:n,y:e,t:o});const i=o-100;for(;te.length>1&&te[0].t<i;)te.shift()}function E(){if(te.length<2)return{x:0,y:0};const n=te[0],e=te[te.length-1],o=e.t-n.t;if(o<=0)return{x:0,y:0};let i=(e.x-n.x)/o,s=(e.y-n.y)/o;i*=1e3,s*=1e3;const a=Math.hypot(i,s);if(a>2500){const c=2500/a;i*=c,s*=c}return{x:i,y:s}}return u.useEffect(()=>{const e=F((o,i,s)=>{W.current=ie(s),z.current=0,f.current=!0});return()=>{e()}}),u.useEffect(()=>{if(!(typeof window>"u"))return window.addEventListener("mousedown",I),window.addEventListener("mousemove",T),window.addEventListener("mouseup",C),window.addEventListener("touchstart",I),window.addEventListener("touchmove",T,{passive:!1}),window.addEventListener("touchend",C),()=>{window.removeEventListener("mousedown",I),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",C),window.removeEventListener("touchstart",I),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",C)}},[T,I,C]),$.jsx(We,{src:Ze,className:"drag-none pointer-events-none absolute h-full w-full opacity-0 select-none",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,ref:k,preload:"metadata",onLoadedData:S})}function dt(){"use forget";const r=qe.c(1);let d;return r[0]===Symbol.for("react.memo_cache_sentinel")?(d=$.jsxs(Ke,{children:[$.jsx(Qe,{}),$.jsx(at,{})]}),r[0]=d):d=r[0],d}export{dt as AtlasVisualizerClient};
//# sourceMappingURL=nm3o5abcuvff54tx.js.map

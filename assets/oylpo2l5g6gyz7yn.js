const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/d8z3f1hrx0jbde1l.js","assets/i8clt0mfz495j7ii.js","assets/gw7tjih2pjgna9ex.js","assets/bci083mws0hai8bl.js"])))=>i.map(i=>d[i]);
var fe=Object.defineProperty,he=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var ne=(t,e,a)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,k=(t,e)=>{for(var a in e||(e={}))re.call(e,a)&&ne(t,a,e[a]);if(Z)for(var a of Z(e))le.call(e,a)&&ne(t,a,e[a]);return t},q=(t,e)=>he(t,pe(e));var Y=(t,e)=>{var a={};for(var o in t)re.call(t,o)&&e.indexOf(o)<0&&(a[o]=t[o]);if(t!=null&&Z)for(var o of Z(t))e.indexOf(o)<0&&le.call(t,o)&&(a[o]=t[o]);return a};import{c as ee,e as te,j as s,r as P,M as F,_ as se}from"./i8clt0mfz495j7ii.js";import{$ as xe,a as J,o as oe,L as ae,s as y,M as ie,e4 as C,ej as _,bi as je,u as ue,al as ge,d as ye,b8 as z,P as me,e as be,z as Se,bL as Q,C as Pe,e$ as Me}from"./ghewn7l2ynbm32fm.js";import{ag as ve,m6 as $e,ai as _e,m7 as Ee,bA as Ce,bf as Oe,ap as we,m8 as Ne,m9 as Le,ma as ce}from"./j0yo6uv6652vva62.js";import{P as Ae,a as Re}from"./efrtjupvbvunv8ff.js";import"./cx4oo5wqa9uf3in8.js";function Te(t){"use forget";const e=ee.c(15),a=te(),{preset:o,onSelectPreset:r}=t;let i;e[0]!==r||e[1]!==o?(i=()=>r(o),e[0]=r,e[1]=o,e[2]=i):i=e[2];let u;e[3]!==o.color||e[4]!==o.emoji?(u=s.jsx(ve,{color:o.color,emoji:o.emoji}),e[3]=o.color,e[4]=o.emoji,e[5]=u):u=e[5];let l;e[6]!==a||e[7]!==o.label?(l=a.formatMessage(o.label),e[6]=a,e[7]=o.label,e[8]=l):l=e[8];let d;e[9]!==u||e[10]!==l?(d=s.jsxs("div",{className:"flex gap-1.5",children:[u,l]}),e[9]=u,e[10]=l,e[11]=d):d=e[11];let p;return e[12]!==i||e[13]!==d?(p=s.jsx(xe,{color:"secondary",className:"border-token-border-default hover:bg-token-interactive-bg-secondary-hover active:bg-token-interactive-bg-secondary-press flex items-center justify-center py-2 ps-2.5 pe-3 font-normal select-none",onFocus:ke,onClick:i,type:"button",children:d}),e[12]=i,e[13]=d,e[14]=p):p=e[14],p}function ke(t){t.target.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}const Ie=oe(()=>se(()=>import("./d8z3f1hrx0jbde1l.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>ae(t)}),Fe=oe(()=>se(()=>import("./gw7tjih2pjgna9ex.js").then(t=>t._),__vite__mapDeps([2,1])),{loading:t=>ae(t)});function De(t){"use forget";const e=ee.c(65),{isNewProject:a,isPending:o,onSubmit:r,submitTitle:i,planType:u}=t,l=te();let d;e[0]!==t.emoji$||e[1]!==t.theme$||e[2]!==t.title$||e[3]!==t.validationErrors$?(d=()=>{var $,I,X,H;return{title$:($=t.title$)!=null?$:y(""),validationErrors$:(I=t.validationErrors$)!=null?I:y([]),theme$:(X=t.theme$)!=null?X:y(null),emoji$:(H=t.emoji$)!=null?H:y(null),stylePickerOpen$:y(!1),autofilledFromPreset$:y(!1)}},e[0]=t.emoji$,e[1]=t.theme$,e[2]=t.title$,e[3]=t.validationErrors$,e[4]=d):d=e[4];const[p]=P.useState(d),{title$:m,validationErrors$:O,theme$:h,emoji$:f,autofilledFromPreset$:b}=p,x=J(m),S=J(O),M=P.useRef(null),j=J(b);let w;e[5]===Symbol.for("react.memo_cache_sentinel")?(w=[],e[5]=w):w=e[5],P.useEffect(Be,w);let N;e[6]!==b||e[7]!==f||e[8]!==h||e[9]!==m?(N=$=>{const{color:I,emoji:X,title:H}=$;h.set(I),f.set(X),m.set(H),b.set(!0)},e[6]=b,e[7]=f,e[8]=h,e[9]=m,e[10]=N):N=e[10];const v=N;let g;e[11]!==l?(g=l.formatMessage({id:"A4Fd7M",defaultMessage:"Copenhagen Trip"}),e[11]=l,e[12]=g):g=e[12];let n;e[13]!==m?(n=$=>m.set($.target.value),e[13]=m,e[14]=n):n=e[14];let c;e[15]!==g||e[16]!==n||e[17]!==x?(c=s.jsx("input",{autoFocus:!0,ref:M,className:"border-token-interactive-border-tertiary-default focus:border-token-interactive-border-focus bg-token-bg-primary col-span-full row-1 w-full resize-none overflow-y-auto rounded-lg border px-2 py-2 ps-9 pe-9 text-sm focus:ring-0",type:"text",name:"projectName",autoComplete:"off",placeholder:g,value:x,onChange:n}),e[15]=g,e[16]=n,e[17]=x,e[18]=c):c=e[18];const E=a?"var(--text-tertiary)":void 0;let L;e[19]!==f||e[20]!==E||e[21]!==h?(L=s.jsx(Ae,{emoji$:f,theme$:h,defaultColor:E}),e[19]=f,e[20]=E,e[21]=h,e[22]=L):L=e[22];let T;e[23]!==f||e[24]!==L||e[25]!==h?(T=s.jsx(Re,{theme$:h,emoji$:f,children:L}),e[23]=f,e[24]=L,e[25]=h,e[26]=T):T=e[26];let A;e[27]!==j||e[28]!==b||e[29]!==f||e[30]!==l||e[31]!==a||e[32]!==h||e[33]!==x||e[34]!==m?(A=a&&j&&x.trim().length>0&&s.jsx("button",{type:"button","aria-label":l.formatMessage({id:"z/7Lq7",defaultMessage:"Clear project name"}),className:"col-span-full row-1 me-2 self-center justify-self-end rounded-full p-1 hover:opacity-80 focus:outline-hidden",onClick:()=>{var $;m.set(""),f.set(null),h.set(null),b.set(!1),($=M.current)==null||$.focus()},children:s.jsx(Fe,{className:"icon text-token-text-tertiary"})}),e[27]=j,e[28]=b,e[29]=f,e[30]=l,e[31]=a,e[32]=h,e[33]=x,e[34]=m,e[35]=A):A=e[35];let R;e[36]!==A||e[37]!==c||e[38]!==T?(R=s.jsxs("div",{className:"content-sheet-root:contents mb-2 grid grid-cols-[auto_minmax(0,1fr)]",children:[c,T,A]}),e[36]=A,e[37]=c,e[38]=T,e[39]=R):R=e[39];let D;e[40]!==l||e[41]!==a||e[42]!==v||e[43]!==u?(D=a&&s.jsx("ul",{className:"focus-outline-margin-default -ms-4 flex w-[calc(100%+32px)] gap-2 overflow-x-auto ps-4 pe-4 [scrollbar-width:none]","aria-label":l.formatMessage({id:"mStfWq",defaultMessage:"Project presets"}),children:$e(u).map($=>s.jsx("li",{children:s.jsx(Te,{preset:$,onSelectPreset:I=>{v(q(k({},I),{title:l.formatMessage(I.label)}))}})},$.emoji))}),e[40]=l,e[41]=a,e[42]=v,e[43]=u,e[44]=D):D=e[44];let G;e[45]!==a?(G=a&&s.jsxs("aside",{className:"bg-token-bg-tertiary mt-4 flex items-center rounded-xl p-3",children:[s.jsx("div",{className:"me-2 h-6 w-6",children:s.jsx("div",{className:"text-token-text-secondary relative flex h-full items-center justify-center",children:s.jsx(Ie,{className:"icon"})})}),s.jsx("p",{className:"text-token-text-secondary text-xs text-pretty",children:s.jsx(F,k({},_e.projectHelperBoxDescription))})]}),e[45]=a,e[46]=G):G=e[46];let B;e[47]!==S?(B=S.map(Ge),e[47]=S,e[48]=B):B=e[48];let V;e[49]!==R||e[50]!==D||e[51]!==G||e[52]!==B?(V=s.jsxs("div",{className:"flex-1 px-4 pt-1",children:[R,D,G,B]}),e[49]=R,e[50]=D,e[51]=G,e[52]=B,e[53]=V):V=e[53];let W;e[54]!==x||e[55]!==S.length?(W=!x.trim()||S.length>0,e[54]=x,e[55]=S.length,e[56]=W):W=e[56];let K;e[57]!==o||e[58]!==i||e[59]!==W?(K=s.jsx("div",{className:"flex items-center justify-end px-3 pb-3",children:s.jsx(ie.Actions,{primaryButton:s.jsx(ie.Button,{title:i,type:"submit",form:"project-modal-form",color:"primary",loading:o,disabled:W})})}),e[57]=o,e[58]=i,e[59]=W,e[60]=K):K=e[60];let U;return e[61]!==r||e[62]!==V||e[63]!==K?(U=s.jsxs("form",{id:"project-modal-form",onSubmit:r,children:[V,K]}),e[61]=r,e[62]=V,e[63]=K,e[64]=U):U=e[64],U}function Ge(t,e){return s.jsx("div",{className:"mb-4 text-sm text-red-500",children:t},e)}function Be(){Ee()}function Ve(o){var r=o,{children:t,onCloseAutoFocus:e}=r,a=Y(r,["children","onCloseAutoFocus"]);const i=P.useRef(!1),u=P.useRef(!1),l=P.useRef(!1);return s.jsx(C.Content,q(k({},a),{onCloseAutoFocus:d=>{const p=i.current,m=u.current,O=l.current;if(i.current=!1,u.current=!1,l.current=!1,O)d.preventDefault();else{if(p||m)return;e&&e(d)}},onEscapeKeyDown:()=>{i.current=!0},onPointerDownOutside:()=>{u.current=!0},onFocusOutside:()=>{l.current=!0},children:t}))}const We=oe(()=>se(()=>import("./bci083mws0hai8bl.js").then(t=>t._),__vite__mapDeps([3,1])),{loading:t=>ae(t)}),Ke=ge(()=>{const t=y(!1),e=y(!1);return{isSheetVisible$:z(()=>t()||e()),isSheetOpen$:t,keepSheetOpen$:e}}),qe=t=>{"use forget";const e=ee.c(24),{onCloseAutoFocus:a,children:o,isNewProject:r,mode:i,displayedMemoryScope$:u,memoryScope$:l}=t,d=i===void 0?"dropdown":i;let p;e[0]!==u?(p=u===void 0?y(_.GLOBAL):u,e[0]=u,e[1]=p):p=e[1];const m=p;let O;e[2]!==l?(O=l===void 0?y(_.GLOBAL):l,e[2]=l,e[3]=O):O=e[3];const h=O,f=!je();let b;e[4]!==m?(b=()=>m(),e[4]=m,e[5]=b):b=e[5];const x=J(b),S=ue();let M;e[6]!==S?(M=Ke(S),e[6]=S,e[7]=M):M=e[7];const j=M,w=J(j.isSheetOpen$),N=d==="auto"?f?"sheet":"dropdown":d;let v;e[8]!==d||e[9]!==j.isSheetOpen$?(v=c=>{j.isSheetOpen$.set(c),c&&me.logEventWithStatsig("Project Customization: Open","chatgpt_web_project_customization_menu_open",{mode:d})},e[8]=d,e[9]=j.isSheetOpen$,e[10]=v):v=e[10];let g;e[11]!==x||e[12]!==r||e[13]!==h||e[14]!==a?(g=s.jsx(C.Portal,{children:s.jsx(Je,{displayedMemoryScope:x,memoryScope$:h,isNewProject:r,onCloseAutoFocus:a})}),e[11]=x,e[12]=r,e[13]=h,e[14]=a,e[15]=g):g=e[15];let n;return e[16]!==o||e[17]!==f||e[18]!==w||e[19]!==j||e[20]!==g||e[21]!==N||e[22]!==v?(n=s.jsxs(C.Root,{mode:N,open:w,store:j,modal:f,onOpenChange:v,children:[o,g]}),e[16]=o,e[17]=f,e[18]=w,e[19]=j,e[20]=g,e[21]=N,e[22]=v,e[23]=n):n=e[23],n},Je=r=>{var i=r,{displayedMemoryScope:t=_.GLOBAL,memoryScope$:e=y(_.GLOBAL),isNewProject:a}=i,o=Y(i,["displayedMemoryScope","memoryScope$","isNewProject"]);return s.jsxs(Ve,q(k({size:"auto",align:"end",alignOffset:-7,loop:!0},o),{children:[s.jsxs(C.Group,{children:[s.jsx(C.Label,{children:s.jsx(F,{id:"w7+gZm",defaultMessage:"Memory"})}),s.jsxs(C.RadioGroup,{value:t,className:"flex flex-col",onValueChange:u=>{e.set(u)},children:[s.jsx(de,{value:_.GLOBAL,disabled:!a,label:s.jsx(F,{id:"AA7d3d",defaultMessage:"Default"}),secondary:s.jsx(F,{id:"XHfasG",defaultMessage:"Project can access memories from outside chats, and vice versa."})}),s.jsx(de,{value:_.PROJECT_V2,disabled:!a,label:s.jsx(F,{id:"XToOAe",defaultMessage:"Project-only"}),secondary:s.jsx(F,{id:"W99WlO",defaultMessage:"Project can only access its own memories. Its memories are hidden from outside chats."})})]})]}),s.jsx(C.Group,{children:s.jsx(C.Label,{children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("div",{className:"text-token-text-secondary flex items-center text-xs text-pretty",children:s.jsx(F,{id:"FrohSq",defaultMessage:"Note that this setting can't be changed later."})})})})})]}))},Ue=t=>s.jsx(C.BasicTrigger,q(k({className:ye("dropdown-btn"),"data-testid":"composer-plus-btn"},t),{children:s.jsx(We,{className:"icon"})}));function de(t){return s.jsx(C.RadioItem,k({trailing:s.jsx(C.RadioItemCheck,{})},t))}function et({submitButtonTitle:t,onClose:e,onSuccess:a,gizmo:o,project:r}){"use no forget";const i=te(),u=be(),l=Ce(),[d,p]=P.useState(()=>l.isPending),m=!o,O=Oe(),h=ue(),f=Se(h),b=f==null?void 0:f.planType;!m&&!r&&(r=we(h,o.gizmo.id));const[x]=P.useState(()=>y(Q(()=>{var n,c;return(c=(n=r==null?void 0:r.emoji$())!=null?n:o==null?void 0:o.gizmo.display.emoji)!=null?c:null}))),[S]=P.useState(()=>y(Q(()=>{var n,c;return(c=(n=r==null?void 0:r.theme$())!=null?n:o==null?void 0:o.gizmo.display.theme)!=null?c:null}))),[M]=P.useState(()=>y(Q(()=>{var n,c;return(c=(n=r==null?void 0:r.title$())!=null?n:o==null?void 0:o.gizmo.display.name)!=null?c:""}))),[j]=P.useState(()=>{const n=o==null?void 0:o.gizmo.memory_scope;let c=n;switch(n){case _.PROJECT_V2:c=_.PROJECT_V2;break;case _.GLOBAL:case _.PROJECT:c=_.GLOBAL;break;default:c=_.UNSET;break}return y(c)}),[w]=P.useState(()=>z(()=>Le(j()))),[N]=P.useState(()=>z(()=>{const n=[];return M().length>ce&&n.push(i.formatMessage({id:"feWA6K",defaultMessage:"Project names cannot be longer than {length} characters."},{length:ce})),n})),v=async()=>{var n;try{p(!0);const c=r?await r.queueUpdate$({emoji:x(),theme:S(),name:M(),opts:{memoryScope:j()}}):await l.mutateAsync({update:T=>{var A,R;return q(k({},T),{emoji:(A=x())!=null?A:void 0,theme:(R=S())!=null?R:void 0,name:M(),memoryScope:j()})},id:(n=o==null?void 0:o.gizmo.id)!=null?n:Ne}),{id:E,resource:L}=c;p(!1),a&&a(E!=null?E:L==null?void 0:L.gizmo.id),e()}catch(c){const E=Me(c);u.warning(E!=null?E:i.formatMessage({id:"project-modal.error.create-or-update",defaultMessage:"Error creating or updating project"}),{duration:5,hasCloseButton:!0}),p(!1)}},g=m?i.formatMessage({id:"PoqmRT",defaultMessage:"Create project"}):i.formatMessage({id:"RT8KNi",defaultMessage:"Save"});return s.jsx(Pe,{testId:"modal-new-project-enhanced",isOpen:!0,hideSeparator:!0,noPadding:!0,headerAccessory:O&&s.jsx(qe,{isNewProject:m,displayedMemoryScope$:w,memoryScope$:j,children:s.jsx(Ue,{})}),showCloseButton:!d,type:"success",size:"large",title:m?i.formatMessage({defaultMessage:"Project name",id:"project-modal.title.new-project"}):i.formatMessage({defaultMessage:"Edit project",id:"project-modal.title.edit-project"}),onClose:()=>{d||e()},children:s.jsx(De,{emoji$:x,isNewProject:m,isPending:d,onClose:e,onSubmit:n=>{n.preventDefault(),me.logEventWithStatsig("Projects: Create Submit Enhanced","chatgpt_web_projects_create_submit"),v()},submitTitle:t!=null?t:g,title$:M,theme$:S,validationErrors$:N,planType:b})})}export{et as CreateOrEditProjectModal};
//# sourceMappingURL=oylpo2l5g6gyz7yn.js.map

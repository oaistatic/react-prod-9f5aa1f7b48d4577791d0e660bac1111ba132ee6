var M=Object.defineProperty,Q=Object.defineProperties;var v=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var f=(t,e,a)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,y=(t,e)=>{for(var a in e||(e={}))K.call(e,a)&&f(t,a,e[a]);if(_)for(var a of _(e))b.call(e,a)&&f(t,a,e[a]);return t},m=(t,e)=>Q(t,v(e));import{R as p,e as G}from"./ghewn7l2ynbm32fm.js";import{b as l,u as g,a as d,e as h,ah as D}from"./i8clt0mfz495j7ii.js";const q=20,A=({workspaceId:t,currPage:e,groupFilter:a})=>{const{data:o,isLoading:n,isPlaceholderData:r}=l({queryKey:a===""?[t,"groups","page-".concat(e)]:[t,"groups","filtered",a,"page-".concat(e)],queryFn:()=>p.safeGet("/accounts/{account_id}/groups",{parameters:{path:{account_id:t},query:{query:a,offset:e*q,orderby:"created_time desc",limit:q}}}),placeholderData:D});return{groups:o,isLoading:n,isPlaceholderData:r}},R=({workspaceId:t,currentGroups:e})=>{const a=g(),o=G(),n=h(),{mutateAsync:r}=d({mutationFn:({workspaceId:s,name:i})=>p.safePost("/accounts/{account_id}/group",{parameters:{path:{account_id:s}},requestBody:{name:i}}),onMutate:({workspaceId:s,name:i})=>{a.cancelQueries({queryKey:[s,"groups"]});const u=e;return a.setQueryData([s,"groups","page-0"],c=>(c||(c={limit:10,offset:0,items:[],total:0}),m(y({},c),{items:[{id:"new",name:i,num_members:0,created_time:""},...c.items.slice(0,9)]}))),{previousGroups:u}},onError:(s,i,u)=>{a.setQueryData([t,"groups","page-0"],u==null?void 0:u.previousGroups),a.invalidateQueries({queryKey:[t,"groups"]}),s.message==="Group with this name already exists."&&o.warning(n.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(s=>setTimeout(s,1e3)),a.invalidateQueries({queryKey:[t,"groups"]})}});return{createGroup:r}},C=({workspaceId:t})=>{const e=g(),{mutateAsync:a}=d({mutationFn:async o=>await p.safeDelete("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:t,group_id:o}}}),onMutate:()=>{e.invalidateQueries({queryKey:[t,"groups","page-0"]})},onSettled:()=>{e.invalidateQueries({queryKey:[t,"groups","page-0"]})}});return{deleteGroup:a}},F=({workspaceId:t})=>{const e=g(),a=G(),o=h(),{mutateAsync:n}=d({mutationFn:async({workspaceId:r,groupID:s,name:i})=>await p.safePatch("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:r,group_id:s}},requestBody:{name:i}}),onMutate:({workspaceId:r,groupID:s,name:i})=>{e.setQueryData([r,"groups",s],u=>m(y({},u),{name:i}))},onError:r=>{r.message==="Group with this name already exists."&&a.warning(o.formatMessage({id:"workspaceSettings.groups.duplicateName",defaultMessage:"Group with this name already exists"}),{duration:2})},onSettled:async()=>{await new Promise(r=>setTimeout(r,1e3)),e.invalidateQueries({queryKey:[t,"groups"]})}});return{updateGroupName:n}},$=({workspaceId:t,groupId:e})=>l({queryKey:[t,"groups",e],enabled:!!e,queryFn:async()=>await p.safeGet("/accounts/{account_id}/group/{group_id}",{parameters:{path:{account_id:t,group_id:e}}})}),w=10,T=({workspaceId:t,groupId:e,search:a,currPage:o})=>l({queryKey:[t,"groups",e,a,"members-page-".concat(o)],queryFn:()=>p.safeGet("/accounts/{account_id}/group/{group_id}/users",{parameters:{path:{account_id:t,group_id:e},query:{query:a,offset:o*w}}}),placeholderData:D}),B=({workspaceId:t,groupId:e,members:a,search:o,currPage:n})=>{const r=g();return d({mutationFn:async s=>await p.safeDelete("/accounts/{account_id}/group/{group_id}/users/{user_id}",{parameters:{path:{account_id:t,group_id:e,user_id:s}}}),onMutate:s=>{r.cancelQueries({queryKey:[t,"groups",e]});const i=a;return r.setQueryData([t,"groups",e,o,"members-page-".concat(n)],u=>u?m(y({},u),{items:u.items.filter(c=>c.id!==s),total:u.total-1}):{limit:10,offset:0,items:[],total:0}),{previousData:i}},onError:(s,i,u)=>{r.setQueryData([t,"groups",e,"members-page-".concat(n)],u==null?void 0:u.previousData),r.invalidateQueries({queryKey:[t,"groups",e]})},onSettled:async()=>{await new Promise(s=>setTimeout(s,1e3)),r.invalidateQueries({queryKey:[t,"groups"]})}})};export{q as M,B as a,$ as b,C as c,F as d,A as e,R as f,T as u};
//# sourceMappingURL=hr620pwkxf4zlhpg.js.map

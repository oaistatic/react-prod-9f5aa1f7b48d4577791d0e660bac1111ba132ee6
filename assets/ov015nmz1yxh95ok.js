import{dw as w,b1 as E,ff as F,nE as _,J as C,nF as T}from"./ghewn7l2ynbm32fm.js";import{S as q,bu as A,bv as x,bw as P}from"./j0yo6uv6652vva62.js";import{r as y,b as Q}from"./i8clt0mfz495j7ii.js";const m=300*1e3,U=30*1e3;function R(f,h,p,r,s){var l;const o=(l=y.useContext(q))==null?void 0:l.serverSharedThreadId,t=A(p),I=y.useMemo(()=>({asset_pointer:t,content_type:w.ArbitraryAssetPointer}),[t]),n=x(),{isUnauthenticated:b}=E(),d=F(h),a=P.makeQueryOptions({asset:I,sharedThreadId:o,postId:n,gizmoId:void 0,isUnauthenticated:b,conversationId:o?void 0:d}),i=_(),g=!!(f&&(d||o||n)&&t&&a.enabled),u=a.queryFn;if(typeof u=="symbol")throw Error("Unexpected symbol query fn...");return Q({queryKey:a.queryKey,queryFn:async v=>{try{const e=await u(v);return r==null||r(e.url),{status:"success",download_url:e.url}}catch(e){C.addError(e);let c=i("default_download_link_error",{fileName:t});throw e instanceof T&&e.code!=null&&(c=i(e.code)),s==null||s(c),e}},enabled:g,staleTime:m,gcTime:U,refetchInterval:m,refetchOnWindowFocus:!0})}export{R as u};
//# sourceMappingURL=ov015nmz1yxh95ok.js.map

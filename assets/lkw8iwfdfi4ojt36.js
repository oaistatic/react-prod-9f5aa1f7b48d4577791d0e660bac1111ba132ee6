const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/llj6x3d5vhdkrkxn.js","assets/i8clt0mfz495j7ii.js"])))=>i.map(i=>d[i]);
import{r as h,j as o,_ as f}from"./i8clt0mfz495j7ii.js";import{co as A,bO as S,bQ as g,bb as p,bc as j,bM as v,o as M,L as b}from"./ghewn7l2ynbm32fm.js";import{gZ as O,g_ as E,g$ as w,gx as R,h0 as T,h1 as C,h2 as J,h3 as L,h4 as P}from"./j0yo6uv6652vva62.js";import{u as k}from"./hvzeon76b5ffe4h0.js";function N(e,r){const{automationId:a,automationTitle:s,automationMessage:y}=h.useMemo(()=>{const l=r.find(i=>i.author.role===A.Assistant),n=l?S.getParentPromptNode(g(e),l.id):null;let t=n==null?void 0:n.message.metadata;if(!(t!=null&&t.real_author_type)){const i=r.find(c=>{var u;return((u=c.metadata)==null?void 0:u.real_author_type)==="automation"});t=i==null?void 0:i.metadata}const d=(t==null?void 0:t.real_author_type)==="automation"?t==null?void 0:t.real_author_id:null,m=t==null?void 0:t.real_author_title;return{automationId:d,automationTitle:m,automationMessage:n==null?void 0:n.message}},[e,r]),{automation:_}=k(a!=null?a:"");return{automationId:a,automation:_,automationTitle:s,automationMessage:y}}const H=M(()=>f(()=>import("./llj6x3d5vhdkrkxn.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>b(e)});function I({clientThreadId:e,messages:r}){var m,i;const{automationId:a,automation:s,automationTitle:y}=N(e,r),l=O(e).isOdysseyMode||r.some(c=>{var u;return(u=c.metadata)==null?void 0:u.n7jupd_message}),n=(m=E(e))==null?void 0:m.value,{isScheduledRun:t}=h.useContext(w),[x,d]=h.useState(!1);return h.useEffect(()=>{a&&p.count(j.JAWBONE,"jawbone_automation_source_header.open")},[a]),a?t?o.jsx("div",{className:"relative my-2 w-full",children:o.jsx(R,{automation:s,fullWidth:!0})}):l?n===v.REALTIME?null:o.jsx(T,{clientThreadId:e,children:o.jsx(C,{children:({isScheduled:c,isScheduledRun:u})=>c&&u&&o.jsx(J,{})})}):o.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[o.jsx(H,{className:"icon-sm"}),o.jsx("button",{onClick:()=>{d(!0)},children:(i=s==null?void 0:s.title)!=null?i:y}),x&&s&&o.jsx(L,{initialScheduleComponents:s.schedule_components,nextRunTimes:s.next_run_times,children:o.jsx(P,{item:s,source:"chat",onClose:()=>{d(!1)}})})]}):null}export{I as AutomationSourceHeader};
//# sourceMappingURL=lkw8iwfdfi4ojt36.js.map

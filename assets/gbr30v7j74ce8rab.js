const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/2uk20wu2pu1737un.js","assets/i8clt0mfz495j7ii.js","assets/ewkru1hsxkjpuxt5.js","assets/f87olchknhsp1yyk.js"])))=>i.map(i=>d[i]);
import{j as e,_ as b,r as c,M as N}from"./i8clt0mfz495j7ii.js";import{d as T,o as u,L as g,$ as M}from"./ghewn7l2ynbm32fm.js";import{S as C}from"./gfxl3n7r4t82beqq.js";import{s as L,a as w}from"./n4d5s6gidn7smpjz.js";import{u as R}from"./k5zh2h7fpzx4n2oe.js";import"./j0yo6uv6652vva62.js";import"./kf7tqzde2yk57qjr.js";import"./dabvy8uqe4jm1b47.js";const z=u(()=>b(()=>import("./2uk20wu2pu1737un.js").then(t=>t._),__vite__mapDeps([0,1])),{loading:t=>g(t)}),I=u(()=>b(()=>import("./ewkru1hsxkjpuxt5.js").then(t=>t._),__vite__mapDeps([2,1])),{loading:t=>g(t)}),D=u(()=>b(()=>import("./f87olchknhsp1yyk.js").then(t=>t._),__vite__mapDeps([3,1])),{loading:t=>g(t)}),A=({goPrev:t,goNext:m,setIsPlaying:x,thumbnails:r,selectedSlideIdx:l})=>{const h=r.length<=1||l===0,a=r.length<=1||l===r.length-1,d=r.length<=1;return e.jsxs("div",{className:T("absolute start-1/2 bottom-2 flex -translate-x-1/2 items-center overflow-hidden rounded-2xl border","border-token-border-light bg-token-bg-primary text-token-text-primary","transition-opacity duration-150","can-hover:opacity-0 can-hover:pointer-events-none","can-hover:group-hover:opacity-100 can-hover:group-hover:pointer-events-auto"),children:[e.jsx("button",{onClick:t,disabled:h,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(D,{className:"icon-sm"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:()=>x(!0),disabled:d,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(z,{className:"size-5"})}),e.jsx("div",{className:"border-token-border-light h-6 border-s"}),e.jsx("button",{onClick:m,disabled:a,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:e.jsx(I,{className:"icon-sm"})})]})},Y=({walnutId:t,isLoading:m,isError:x,isInShareModal:r,errorMessage:l,handleDownloadClick:h})=>{var j,k,_;const{presentationMap:a,setSelectedSlideIdx:d}=R(),o=(j=a[t])==null?void 0:j.presentation,n=(k=a[t])==null?void 0:k.workbook,f=(_=a[t])==null?void 0:_.selectedSlideIdx,[i,v]=c.useState([]),[P,y]=c.useState(!1);if(c.useEffect(()=>{o&&(async()=>{const s=await Promise.all(o.slides.map(p=>L(p,o)));v(s)})()},[o]),c.useEffect(()=>{n&&(async()=>{const s=await Promise.all(n.sheets.map(p=>w(p,20,10,0,n)));v(s)})()},[n]),x||l==="fileTooLarge")return e.jsxs("div",{className:"flex h-[250px] flex-col items-center justify-center gap-2 text-center",children:[e.jsx("div",{className:"text-token-text-primary max-w-[80%] text-xs",children:e.jsx(N,{id:"YMbrlR",defaultMessage:"Preview not available."})}),e.jsx(M,{color:"ghost",size:"small",as:"button",onClick:s=>h(s),children:e.jsx(N,{id:"GjJtUJ",defaultMessage:"Download"})})]});if(m||!o&&!n||!i.length)return e.jsx("div",{className:"flex h-[250px] items-center justify-center gap-2",children:e.jsx("div",{className:"border-token-border-heavy h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"})});const S=()=>{d(t,s=>s>0?s-1:i.length-1)},E=()=>{d(t,s=>s<i.length-1?s+1:0)};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[o&&e.jsx(A,{goPrev:S,goNext:E,setIsPlaying:y,thumbnails:i,selectedSlideIdx:f}),e.jsx("img",{src:i[f],alt:"",className:"m-0 rounded border",style:{background:"#fff"}}),o&&P&&e.jsx(C,{startIndex:0,onExit:()=>y(!1),walnutId:t}),r&&e.jsx("div",{className:"from-token-main-surface-primary pointer-events-none absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent","data-testid":"walnut-mini-player-share-gradient"})]})};export{Y as WalnutMiniPlayer};
//# sourceMappingURL=gbr30v7j74ce8rab.js.map

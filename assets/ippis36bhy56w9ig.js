var at=Object.defineProperty;var ct=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var tt=(t,e,n)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,D=(t,e)=>{for(var n in e||(e={}))pt.call(e,n)&&tt(t,n,e[n]);if(ct)for(var n of ct(e))St.call(e,n)&&tt(t,n,e[n]);return t};var a=(t,e,n)=>tt(t,typeof e!="symbol"?e+"":e,n);import{tf as Vt,aP as ot,tg as gt,n as lt,th as bt,ti as Nt,tj as ft,jE as yt}from"./j0yo6uv6652vva62.js";import{hV as B,j9 as wt,an as Rt,fa as Ut,sc as zt,dz as Ft}from"./ghewn7l2ynbm32fm.js";import"./i8clt0mfz495j7ii.js";class nt extends Error{constructor(){super("Invalid message header")}}class it extends Error{constructor(){super("Invalid struct header")}}class _t extends Error{constructor(){super("Invalid union header")}}class mt extends Error{constructor(){super("Invalid handle encoding")}}class X extends Error{constructor(){super("Invalid enum value")}}class It extends Error{constructor(){super("Unexpected null value")}}class H extends Error{constructor(){super("Buffer range out of bounds")}}class qe extends Error{constructor(e){super(e?"Not implemented: ".concat(e):"Not implemented")}}class qt extends Error{constructor(e){super(e?"Assertion failed: ".concat(e):"Assertion failed")}}function Be(t,e){if(!t)throw new qt(e)}class rt{constructor(e){a(this,"rawHandle");this.rawHandle=e}close(){this.rawHandle.close()}watch(e,n){const s=this.rawHandle.watch(e,c=>{s.cancel(),n(c)})}}class ae extends rt{write(e,n=[]){const s=Vt(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));this.rawHandle.writeMessage(s,n.map(c=>c.rawHandle))}read(){const{result:e,buffer:n,handles:s}=this.rawHandle.readMessage();return e==Mojo.RESULT_SHOULD_WAIT?{status:"nothing"}:e==Mojo.RESULT_FAILED_PRECONDITION?{status:"dead"}:(Be(e===Mojo.RESULT_OK,"unexpected read result"),{status:"ok",data:n,handles:s.map(c=>new rt(c))})}}function ht(){const{handle0:t,handle1:e}=Mojo.createMessagePipe();return[new ae(t),new ae(e)]}var k;(t=>{function e(n){const[s,c]=ht();return[new et(n,s),new Me(n,c)]}t.createChannel=e})(k||(k={}));class Me{constructor(e,n){a(this,"interfaceType");a(this,"pipe");this.interfaceType=e,this.pipe=n}get endpointState(){return{kind:"primary",pipe:this.pipe}}}class et{constructor(e,n,s=null){a(this,"interfaceType");a(this,"pipe");a(this,"version");this.interfaceType=e,this.pipe=n,this.version=s!=null?s:e.interfaceVersion}static toBrowser(e){const[n,s]=ht();return Mojo.bindInterface(e.interfaceName,n.rawHandle),new et(e,s)}get endpointState(){return{kind:"primary",pipe:this.pipe}}}function pe(t){return t+7&-8}function y(t){if(t===null)throw new It;return t}function W(t){if(t===null)return null;for(let e=0;e<t.length;++e)if(t[e]===null)throw new It;return t}const K=8,ce=16,Se=8,Ot=4294967295,G=8,j=class j{constructor(e=0,n=0){a(this,"numBytes",0);a(this,"numAssociatedEndpoints",0);this.numBytes=e,this.numAssociatedEndpoints=n}static bytes(e){return new j(e)}add(e){return this.numBytes+=e.numBytes,this.numAssociatedEndpoints+=e.numAssociatedEndpoints,this}addBytes(e){return this.numBytes+=e,this}static get zero(){return new j(0)}get aligned(){return new j(pe(this.numBytes),this.numAssociatedEndpoints)}static forObject(e,n){return n===null?j.zero:e.measure(n)}static forUnionValue(e,n){return n===null?j.zero:e.measure(n)}static forUnionValueIndirect(e,n){return n===null?j.zero:e.measure(n).addBytes(ce)}static forString(e){return e===null?j.zero:j.forNumericArray(Uint8Array,j.textEncoder.encode(e))}static forBitArray(e){return e===null?j.zero:new j(K+pe(e.length+7>>3))}static forNumericArray(e,n){return n===null?j.zero:j.bytes(K+pe(e.BYTES_PER_ELEMENT*n.length))}static forUnionValueArray(e,n){return n===null?j.zero:n.reduce((s,c)=>s.add(j.forUnionValue(e,c)),j.bytes(K+ce*n.length).aligned)}static forEnumArray(e){return e===null?j.zero:j.bytes(K+Int32Array.BYTES_PER_ELEMENT*e.length).aligned}static forObjectArray(e,n){return n===null?j.zero:n.reduce((s,c)=>s.add(j.forObject(e,c)),j.bytes(K+G*n.length))}static forHandleArray(e){return e===null?j.zero:j.bytes(K+Uint32Array.BYTES_PER_ELEMENT*e.length)}static forStringArray(e){return e===null?j.zero:e.reduce((n,s)=>n.add(j.forString(s)),j.bytes(K+G*e.length))}static forArrayOfArrays(e,n){return e===null?j.zero:e.reduce((s,c)=>s.add(c===null?j.zero:n(c)),j.bytes(K+G*e.length))}};a(j,"textEncoder",new TextEncoder);let h=j;class ut{constructor(e){a(this,"buffer");a(this,"handles",[]);a(this,"interfaceIDs",[]);a(this,"numClaimedBytes",0);this.buffer=new ArrayBuffer(e)}get remainingCapacity(){return this.buffer.byteLength-this.numClaimedBytes}claim(e){const n=pe(e);if(this.buffer.byteLength<n||this.buffer.byteLength-n<this.numClaimedBytes)throw new H;const s=this.numClaimedBytes;return this.numClaimedBytes+=n,new st(this,s,e)}addHandle(e){const n=this.handles.length;return this.handles.push(e),n}addInterfaceID(e){const n=this.interfaceIDs.length;return this.interfaceIDs.push(e),n}}const ee=class ee{constructor(e,n,s){a(this,"buffer");a(this,"data");this.buffer=e,this.data=new DataView(e.buffer,n,s)}get baseOffset(){return this.data.byteOffset}get dataSize(){return this.data.byteLength}typedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}bigTypedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}createEncoderForRange(e,n){return new ee(this.buffer,this.data.byteOffset+e,n)}setBit(e,n,s){const c=this.data.getUint8(e),r=1<<n;this.data.setUint8(e,s?c|r:c&~r)}setI8(e,n){this.data.setInt8(e,n)}setU8(e,n){this.data.setUint8(e,n)}setI16(e,n){this.data.setInt16(e,n,!0)}setU16(e,n){this.data.setUint16(e,n,!0)}setI32(e,n){this.data.setInt32(e,n,!0)}setU32(e,n){this.data.setUint32(e,n,!0)}setI64(e,n){this.data.setBigInt64(e,n,!0)}setU64(e,n){this.data.setBigUint64(e,n,!0)}setF32(e,n){this.data.setFloat32(e,n,!0)}setF64(e,n){this.data.setFloat64(e,n,!0)}setOffset(e,n){if(n==0){this.setU64(e,BigInt(0));return}const s=e+this.data.byteOffset;Be(n>s);const c=n-s;this.setU64(e,BigInt(c))}setUnionValue(e,n,s){if(s===null){this.setU32(n,0);return}this.setU32(n,ce),this.setU32(n+4,e.tag(s)),e.encode(this.createEncoderForRange(n+8,8),s)}setUnionValueIndirect(e,n,s){if(s===null){this.setOffset(n,0);return}const c=this.buffer.claim(ce);c.setUnionValue(e,0,s),this.setOffset(n,c.baseOffset)}setEnumValue(e,n,s){this.setI32(n,e.encode(s))}setHandle(e,n){if(n===null){this.setU32(e,Ot);return}this.setU32(e,this.buffer.addHandle(n))}setRemote(e,n){if(n===null){this.setHandle(e,null);return}this.setHandle(e,n.pipe),this.setU32(e+4,n.version)}setReceiver(e,n){this.setHandle(e,n===null?null:n.pipe)}setObjectIndirect(e,n,s){if(s===null){this.setOffset(n,0);return}const c=this.buffer.claim(e.CURRENT_VERSION.size);c.setU32(0,e.CURRENT_VERSION.size),c.setU32(4,e.CURRENT_VERSION.version),e.encode(new ee(this.buffer,c.baseOffset+Se,e.CURRENT_VERSION.size-Se),s),this.setOffset(n,c.baseOffset)}setString(e,n){if(n===null){this.setOffset(e,0);return}this.setNumericArray(Uint8Array,e,Array.from(ee.textEncoder.encode(n)))}setBitArray(e,n){if(n===null){this.setOffset(e,0);return}const s=n.length+7>>3,[c,r]=this.allocateArray(s,n.length);for(let f=0;f<s;++f){const i=f*8,u=n.slice(i,i+8).reduce((N,o,d)=>N|(o?1<<d:0),0);r.setU8(f,u)}this.setOffset(e,c.baseOffset)}setNumericArray(e,n,s){if(s===null){this.setOffset(n,0);return}const c=e.BYTES_PER_ELEMENT*s.length,[r,f]=this.allocateArray(c,s.length);f.typedArrayForRange(e,0,s.length).set(s),this.setOffset(n,r.baseOffset)}setBigNumericArray(e,n,s){if(s===null){this.setOffset(n,0);return}const c=e.BYTES_PER_ELEMENT*s.length,[r,f]=this.allocateArray(c,s.length);f.bigTypedArrayForRange(e,0,s.length).set(s),this.setOffset(n,r.baseOffset)}setUnionValueArray(e,n,s){this.setArrayOfNullable(n,ce,s,(c,r)=>{c.setUnionValue(e,0,r)})}setEnumArray(e,n,s){this.setArray(n,Int32Array.BYTES_PER_ELEMENT,s,(c,r)=>{c.setEnumValue(e,0,r)})}setObjectArray(e,n,s){this.setArrayOfNullable(n,G,s,(c,r)=>{c.setObjectIndirect(e,0,r)})}setHandleArray(e,n){this.setArray(e,Uint32Array.BYTES_PER_ELEMENT,n,(s,c)=>{s.setHandle(0,c)})}setStringArray(e,n){this.setArray(e,G,n,(s,c)=>{s.setString(0,c)})}setArrayOfArrays(e,n,s){this.setArrayOfNullable(e,G,n,(c,r)=>{s(c,r)})}allocateArray(e,n){const s=this.buffer.claim(pe(K+e));return s.setU32(0,K+e),s.setU32(4,n),[s,s.createEncoderForRange(8,e)]}setArray(e,n,s,c){if(s===null){this.setOffset(e,0);return}const[r,f]=this.allocateArray(s.length*n,s.length);Array.prototype.forEach.call(s,(i,u)=>{c(new ee(this.buffer,f.baseOffset+u*n,n),i)}),this.setOffset(e,r.baseOffset)}setArrayOfNullable(e,n,s,c){if(s===null){this.setOffset(e,0);return}const[r,f]=this.allocateArray(s.length*n,s.length);Array.prototype.forEach.call(s,(i,u)=>{c(new ee(this.buffer,f.baseOffset+u*n,n),i)}),this.setOffset(e,r.baseOffset)}};a(ee,"textEncoder",new TextEncoder);let st=ee;class xt{constructor(e,n){a(this,"buffer");a(this,"handles");this.buffer=e,this.handles=n.map(s=>({status:"unclaimed",handle:s}))}dispose(){for(const e of this.handles)e.status==="unclaimed"&&e.handle.close()}get numBytes(){return this.buffer.byteLength}get numHandles(){return this.handles.length}claimHandle(e){if(e<0||e>=this.handles.length||this.handles[e].status==="claimed")throw new mt;const n=this.handles[e].handle;return this.handles[e]={status:"claimed"},n}}const A=class A{constructor(e,n,s){a(this,"buffer");a(this,"data");this.buffer=e,this.data=new DataView(e.buffer,n,s)}get baseOffset(){return this.data.byteOffset}get dataSize(){return this.data.byteLength}typedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}bigTypedArrayForRange(e,n,s){return new e(this.data.buffer,this.data.byteOffset+n,s)}isBitSet(e,n){return(this.data.getUint8(e)&1<<n)!==0}getI8(e){return this.data.getInt8(e)}getU8(e){return this.data.getUint8(e)}getI16(e){return this.data.getInt16(e,!0)}getU16(e){return this.data.getUint16(e,!0)}getI32(e){return this.data.getInt32(e,!0)}getU32(e){return this.data.getUint32(e,!0)}getI64(e){return this.data.getBigInt64(e,!0)}getU64(e){return this.data.getBigUint64(e,!0)}getF32(e){return this.data.getFloat32(e,!0)}getF64(e){return this.data.getFloat64(e,!0)}getOffset(e){const n=this.getU32(e);if(this.getU32(e+4)!==0)throw new H;if(n===0)return 0;const s=this.data.byteOffset+e+n;if(!Number.isSafeInteger(s))throw new H;return s}getUnionValue(e,n){const s=this.getU32(n);if(s===0)return null;if(s!=ce)throw new _t;const c=this.getU32(n+4);return e.decode(c,new A(this.buffer,this.data.byteOffset+n+8,8))}getUnionValueIndirect(e,n){const s=this.getOffset(n);return s===0?null:new A(this.buffer,s,ce).getUnionValue(e,0)}getEnumValue(e,n){return e.decode(this.getI32(n))}getHandle(e){const n=this.getU32(e);return n==Ot?null:this.buffer.claimHandle(n)}getMessagePipeHandle(e){const n=this.getHandle(e);return n===null?null:new ae(n.rawHandle)}getRemote(e,n){const s=this.getHandle(n);if(s===null)return null;const c=new ae(s.rawHandle),r=this.getU32(n+4);return new et(e,c,r)}getReceiver(e,n){const s=this.getHandle(n);return s===null?null:new Me(e,new ae(s.rawHandle))}getString(e){const n=this.getNumericArrayInternal(Uint8Array,e);return n===null?null:A.textDecoder.decode(n)}getObject(e,n){const s=new A(this.buffer,this.baseOffset+n,Se),c=s.getU32(0),r=s.getU32(4);let f=e.VERSION_INFO[0];for(let i=1;i<e.VERSION_INFO.length&&e.VERSION_INFO[i].version<=r;++i)f=e.VERSION_INFO[i];if(c<f.size)throw new it;if(r==f.version&&c!=f.size)throw new it;return e.decode(new A(this.buffer,s.baseOffset+Se,f.size-Se),f.version)}getObjectIndirect(e,n){const s=this.getOffset(n);return s===0?null:this.getObject(e,s-this.baseOffset)}getBitArray(e){const n=this.decodeArray(e);if(n===null)return null;const s=n.numElements+7>>3;if(s>n.elementDecoder.dataSize)throw new H;const c=[];for(let r=0;r<s;++r){const f=n.elementDecoder.getU8(r),i=r*8;for(let u=0;u<8&&i+u<n.numElements;++u)c.push((f&1<<u)!==0)}return c}getNumericArray(e,n){const s=this.getNumericArrayInternal(e,n);return s===null?s:Array.from(s)}getBigNumericArray(e,n){const s=this.decodeArray(n);if(s===null)return null;if(s.numElements*e.BYTES_PER_ELEMENT>s.elementDecoder.dataSize)throw new H;return s.elementDecoder.bigTypedArrayForRange(e,0,s.numElements)}getUnionValueArray(e,n){return this.getArray(n,ce,s=>s.getUnionValue(e,0))}getEnumArray(e,n){return this.getArray(n,Int32Array.BYTES_PER_ELEMENT,s=>s.getEnumValue(e,0))}getObjectArray(e,n){return this.getArrayOfNullable(n,G,s=>s.getObjectIndirect(e,0))}getHandleArray(e){return this.getArrayOfNullable(e,Uint32Array.BYTES_PER_ELEMENT,n=>n.getHandle(0))}getStringArray(e){return this.getArrayOfNullable(e,G,n=>n.getString(0))}getArrayOfArrays(e,n){return this.getArrayOfNullable(e,G,s=>n(s))}decodeArray(e){const n=this.getOffset(e);if(n===0)return null;const s=new A(this.buffer,n,K),c=s.getU32(0);return{numElements:s.getU32(4),elementDecoder:new A(this.buffer,n+K,c-K)}}getArray(e,n,s){const c=this.decodeArray(e);if(c===null)return null;if(c.numElements*n>c.elementDecoder.dataSize)throw new H;const r=[];for(let f=0;f<c.numElements;++f){const i=new A(this.buffer,c.elementDecoder.baseOffset+f*n,n);r.push(s(i))}return r}getArrayOfNullable(e,n,s){const c=this.decodeArray(e);if(c===null)return null;if(c.numElements*n>c.elementDecoder.dataSize)throw new H;const r=[];for(let f=0;f<c.numElements;++f){const i=new A(this.buffer,c.elementDecoder.baseOffset+f*n,n);r.push(s(i))}return r}getNumericArrayInternal(e,n){const s=this.decodeArray(n);if(s===null)return null;if(s.numElements*e.BYTES_PER_ELEMENT>s.elementDecoder.dataSize)throw new H;return s.elementDecoder.typedArrayForRange(e,0,s.numElements)}};a(A,"textDecoder",new TextDecoder);let Ye=A;const te=[24,32,48],ve=te.length-1;var F=(t=>(t[t.None=0]="None",t[t.ExpectsResponse=1]="ExpectsResponse",t[t.IsResponse=2]="IsResponse",t[t.IsSync=4]="IsSync",t[t.NoInterrupt=8]="NoInterrupt",t[t.IsUrgent=16]="IsUrgent",t[t.UnimplementedResponse=1073741824]="UnimplementedResponse",t))(F||{});function dt(t,e,n){return t&~e|(n?e:0)}class z{constructor(e,n,s){a(this,"header");a(this,"data");a(this,"handles");this.header=e,this.data=n,this.handles=s}static encodeEmpty(e,n,s){const c=te[ve],r=new ut(c),f=new fe(r.claim(fe.size));return f.ordinal=e,f.flags=n,f.requestID=s,new z(f,new DataView(r.buffer),[])}static encode(e,n,s,c){const r=h.forObject(s,c),f=te[ve]+r.numBytes;if(r.numAssociatedEndpoints>0)throw new qe("Associated interfaces");const i=new ut(f),u=new fe(i.claim(fe.size));return u.interfaceID=0,u.ordinal=e,u.flags=n,u.payloadEncoder.setObjectIndirect(s,0,c),new z(u,new DataView(i.buffer),i.handles)}dump(){const e=[];for(let n=0;n<this.data.byteLength;n+=4){const s=this.data.getUint32(n);e.push(s.toString(16).padStart(8,"0"))}console.log("Data: ",e.join(" "),"Handles: ",this.handles.length)}}class Tt{constructor(e,n){a(this,"buffer");a(this,"header");a(this,"payload");this.buffer=new xt(e,n),this.header=new Dt(new Ye(this.buffer,0)),this.payload=new Ye(this.buffer,this.header.payload)}dispose(){this.buffer.dispose()}decode(e){return this.payload.getObject(e,0)}dump(){const e=[],n=new DataView(this.buffer.buffer);for(let s=0;s<n.byteLength;s+=4){const c=n.getUint32(s);e.push(c.toString(16).padStart(8,"0"))}console.log("Data: ",e.join(" "),"Handles: ",this.buffer.numHandles)}}const re=class re{constructor(e){a(this,"payloadEncoder");a(this,"encoder");Be(e.dataSize>=re.size),this.encoder=e,this.encoder.setU32(0,re.size),this.encoder.setU32(4,re.version),this.payloadEncoder=e.createEncoderForRange(32,8)}set interfaceID(e){this.encoder.setU32(8,e)}set ordinal(e){this.encoder.setU32(12,e)}set flags(e){this.encoder.setU32(16,e)}set requestID(e){this.encoder.setU64(24,BigInt(e))}set newEndpoints(e){this.encoder.setOffset(40,e)}set isResponse(e){this.flags=dt(this.flags,2,e)}set expectsResponse(e){this.flags=dt(this.flags,1,e)}};a(re,"size",te[ve]),a(re,"version",ve);let fe=re;class Dt{constructor(e){a(this,"decoder");var r;if(e.dataSize<te[0])throw new nt;this.decoder=e;const n=this.headerSize,s=this.headerVersion,c=(r=te[s])!=null?r:te[te.length-1];if(n>e.dataSize||n<c)throw new nt;if(this.payload>=e.dataSize)throw new nt}get headerSize(){return this.decoder.getU32(0)}get headerVersion(){return this.decoder.getU32(4)}get interfaceID(){return this.decoder.getU32(8)}get ordinal(){return this.decoder.getU32(12)}get flags(){return this.decoder.getU32(16)}get isResponse(){return(this.flags&2)!==0}get expectsResponse(){return(this.flags&1)!==0}get unimplementedResponse(){return(this.flags&1073741824)!==0}get requestID(){if(this.headerVersion<1)return 0;const e=Number(this.decoder.getU64(24));return Be(Number.isSafeInteger(e)),e}get payload(){return this.headerVersion>=2?this.decoder.getOffset(32):this.headerSize}get newEndpoints(){if(this.headerVersion<2)return null;const e=this.decoder.getOffset(40);return e===0?null:e}}const kt=1<<31,jt=4294967295;class Bt{constructor(e,n){a(this,"pipe");a(this,"setNamespaceBit");a(this,"nextInterfaceID",1);a(this,"knownUnboundInterfaceIDs",new Set);a(this,"listeners",new Map);a(this,"isDispatchScheduled",!1);a(this,"blockingMessage",null);this.pipe=e,this.setNamespaceBit=n}dispose(){this.closed||this.close()}get closed(){return this.pipe===null}get rawPipe(){return this.pipe}close(){this.pipe!==null&&(this.pipe.close(),this.pipe=null)}allocateEndpointID(){const e=this.nextInterfaceID|(this.setNamespaceBit?kt:0);return this.nextInterfaceID+=1,this.knownUnboundInterfaceIDs.add(e),e}send(e,n){this.pipe!==null&&(n.header.interfaceID=e,this.pipe.write(n.data,n.handles))}listen(e,n){this.knownUnboundInterfaceIDs.delete(e),this.listeners.set(e,n),this.ensureDispatchingIfReady()}stopListening(e){this.listeners.delete(e),this.knownUnboundInterfaceIDs.delete(e),this.ensureDispatchingIfReady()}get isDispatchBlocked(){if(this.blockingMessage===null)return!1;const e=this.blockingMessage.header.interfaceID;return this.knownUnboundInterfaceIDs.has(e)}dispatchDisconnect(){const e=this.listeners;this.listeners=new Map;for(const[n,s]of e)s({type:"disconnected"})}ensureDispatchingIfReady(){this.isDispatchBlocked||this.isDispatchScheduled||(this.isDispatchScheduled=!0,setTimeout(()=>{this.dispatchMessages()},0))}dispatchMessages(){for(this.isDispatchScheduled=!1;this.pipe!==null&&!this.isDispatchBlocked;){if(this.blockingMessage!==null){const n=this.blockingMessage;this.blockingMessage=null,this.dispatchMessage(n);continue}const e=this.pipe.read();switch(e.status){case"ok":this.dispatchMessage(new Tt(e.data,e.handles));continue;case"nothing":this.listenToPipe();return;case"dead":this.dispatchDisconnect(),this.close();return}}}listenToPipe(){Be(this.pipe!==null),this.pipe.watch({readable:!0},e=>{this.dispatchMessages()})}dispatchMessage(e){var r;const n=e.header.interfaceID;if(n===jt)throw new qe("Control messages");if(this.knownUnboundInterfaceIDs.has(n)){this.blockingMessage=e;return}if(e.header.newEndpoints!==null)throw new qe("Associated interfaces");const s=(r=this.listeners.get(n))!=null?r:null;if(s===null){e.dispose();return}s({type:"message",message:e})==="stopListening"&&this.stopListening(n)}}class Y{constructor(e,n){a(this,"router");a(this,"interfaceID");a(this,"action");a(this,"isListening",!1);a(this,"nextRequestID",1);a(this,"pendingResponses",new Map);switch(e.kind){case"primary":this.router=new Bt(e.pipe,n),this.interfaceID=0;break;case"secondary":throw new qe("Associated interfaces")}}dispose(){this.router.dispose()}send(e){this.router.send(this.interfaceID,e)}async sendAndAwaitResponse(e){const n=this.nextRequestID++;e.header.expectsResponse=!0,e.header.requestID=n,this.ensureListening();const s=await new Promise((c,r)=>{this.pendingResponses.set(n,{resolve:c,reject:r}),this.send(e)});if(s.header.unimplementedResponse)throw new qe("Unimplemented method");return s}sendUnimplementedResponse(e,n){const s=z.encodeEmpty(n,F.UnimplementedResponse|F.IsResponse,e);this.router.send(this.interfaceID,s)}listen(e){this.action=e,this.ensureListening()}createResponder(e,n,s){return c=>{const r=z.encode(n,F.IsResponse,e,c);r.header.requestID=s,this.send(r)}}ensureListening(){this.isListening||(this.isListening=!0,this.router.listen(this.interfaceID,e=>{switch(e.type){case"message":{const n=e.message;if(n.header.isResponse){const s=this.pendingResponses.get(n.header.requestID);s&&s.resolve(n)}else this.action&&this.action({type:"message",message:n});return"keepListening"}case"disconnected":return this.pendingResponses.forEach(n=>n.reject("Disconnected")),this.action&&this.action({type:"disconnected"}),"stopListening"}}))}}class v{constructor(e){a(this,"interfaceType");a(this,"endpoints",new Set);this.interfaceType=e}dispose(){this.endpoints.forEach(e=>e.dispose())}addReceiver(e,n,s){const c=new Y(e.endpointState,!1);this.endpoints.add(c),c.listen(r=>{switch(r.type){case"message":n(r.message,c);break;case"disconnected":this.endpoints.delete(c),s();break}})}}var Ze;(t=>{function e(s){if(s==="stopped")return 0;if(s==="paused")return 1;if(s==="running")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"stopped";case 1:return"paused";case 2:return"running";default:return"stopped"}}t.decode=n})(Ze||(Ze={}));class Q{}a(Q,"interfaceName","web.bridge.AgentHandler"),a(Q,"interfaceVersion",3);(t=>{let e;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.agentid))}E.measure=g;function _(l,m){l.setString(0,m.agentid)}E.encode=_;function T(l,m){return{agentid:y(l.getString(0))}}E.decode=T})(e=t.AgentHandler_TryOpenAgentViewer_Params||(t.AgentHandler_TryOpenAgentViewer_Params={}));let n;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size)}E.measure=g;function _(l,m){let x=0;m.response&&(x|=1),l.setU8(0,x)}E.encode=_;function T(l,m){return{response:(l.getU8(0)&1)!=0}}E.decode=T})(n=t.AgentHandler_TryOpenAgentViewer_ResponseParams||(t.AgentHandler_TryOpenAgentViewer_ResponseParams={}));let s;(E=>{E.VERSION_INFO=[{version:0,size:8}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size)}E.measure=g;function _(l,m){}E.encode=_;function T(l,m){return{}}E.decode=T})(s=t.AgentHandler_GetClientID_Params||(t.AgentHandler_GetClientID_Params={}));let c;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.clientid))}E.measure=g;function _(l,m){l.setString(0,m.clientid)}E.encode=_;function T(l,m){return{clientid:y(l.getString(0))}}E.decode=T})(c=t.AgentHandler_GetClientID_ResponseParams||(t.AgentHandler_GetClientID_ResponseParams={}));let r;(E=>{E.VERSION_INFO=[{version:0,size:16},{version:1,size:24},{version:2,size:32},{version:3,size:40}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){var m,x;return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.agentid)).add(h.forString((m=l.usermessages)!=null?m:null)).add(h.forString((x=l.preinitializerequestid)!=null?x:null))}E.measure=g;function _(l,m){var $,Z;let x=0;l.setString(0,m.agentid),l.setString(8,($=m.usermessages)!=null?$:null),m.islocalsafemode!==null&&m.islocalsafemode!==void 0&&(x|=1,m.islocalsafemode&&(x|=2)),m.isresume!==null&&m.isresume!==void 0&&(x|=4,m.isresume&&(x|=8)),l.setString(24,(Z=m.preinitializerequestid)!=null?Z:null),l.setU8(16,x)}E.encode=_;function T(l,m){const x=m>=1?l.getString(8):null,$=m>=2?l.getU8(16):0,Z=($&1)!=0,L=($&4)!=0,$e=m>=3?l.getString(24):null;return D(D(D(D({agentid:y(l.getString(0))},x!==null?{usermessages:x}:{}),Z?{islocalsafemode:($&2)!=0}:{}),L?{isresume:($&8)!=0}:{}),$e!==null?{preinitializerequestid:$e}:{})}E.decode=T})(r=t.AgentHandler_UserSentMessageInAgentConversation_Params||(t.AgentHandler_UserSentMessageInAgentConversation_Params={}));let f;(E=>{E.VERSION_INFO=[{version:0,size:24}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.agentid))}E.measure=g;function _(l,m){let x=0;l.setString(0,m.agentid),m.haderror&&(x|=1),l.setU8(8,x)}E.encode=_;function T(l,m){const x=l.getU8(8);return{agentid:y(l.getString(0)),haderror:(x&1)!=0}}E.decode=T})(f=t.AgentHandler_AgentConversationStopped_Params||(t.AgentHandler_AgentConversationStopped_Params={}));let i;(E=>{E.VERSION_INFO=[{version:0,size:24}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.agentid)).add(h.forStringArray(l.urls))}E.measure=g;function _(l,m){l.setString(0,m.agentid),l.setStringArray(8,m.urls)}E.encode=_;function T(l,m){return{agentid:y(l.getString(0)),urls:y(W(l.getStringArray(8)))}}E.decode=T})(i=t.AgentHandler_OpenAgentTabs_Params||(t.AgentHandler_OpenAgentTabs_Params={}));let u;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.agentid))}E.measure=g;function _(l,m){l.setString(0,m.agentid)}E.encode=_;function T(l,m){return{agentid:y(l.getString(0))}}E.decode=T})(u=t.AgentHandler_UserStoppedAgentConversation_Params||(t.AgentHandler_UserStoppedAgentConversation_Params={}));let N;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size).add(h.forString(l.agentid))}E.measure=g;function _(l,m){l.setString(0,m.agentid)}E.encode=_;function T(l,m){return{agentid:y(l.getString(0))}}E.decode=T})(N=t.AgentHandler_GetAgentStatus_Params||(t.AgentHandler_GetAgentStatus_Params={}));let o;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size)}E.measure=g;function _(l,m){l.setEnumValue(Ze,0,m.status)}E.encode=_;function T(l,m){return{status:y(l.getEnumValue(Ze,0))}}E.decode=T})(o=t.AgentHandler_GetAgentStatus_ResponseParams||(t.AgentHandler_GetAgentStatus_ResponseParams={}));let d;(E=>{E.VERSION_INFO=[{version:0,size:8}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size)}E.measure=g;function _(l,m){}E.encode=_;function T(l,m){return{}}E.decode=T})(d=t.AgentHandler_GetClientCapabilityVersion_Params||(t.AgentHandler_GetClientCapabilityVersion_Params={}));let I;(E=>{E.VERSION_INFO=[{version:0,size:16}],E.CURRENT_VERSION=E.VERSION_INFO[E.VERSION_INFO.length-1];function g(l){return h.bytes(E.CURRENT_VERSION.size)}E.measure=g;function _(l,m){l.setU32(0,m.version)}E.encode=_;function T(l,m){return{version:y(l.getU32(0))}}E.decode=T})(I=t.AgentHandler_GetClientCapabilityVersion_ResponseParams||(t.AgentHandler_GetClientCapabilityVersion_ResponseParams={}));class p{constructor(g){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(g.endpointState,!0),this._version=3}static create(){const[g,_]=k.createChannel(t);return[new p(g),_]}static createToBrowser(){const[g,_]=this.create();return Mojo.bindInterface(t.interfaceName,_.pipe.rawHandle),g}async tryOpenAgentViewer(g){const _={agentid:g};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,_))).decode(n).response}async getClientID(){const g={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,s,g))).decode(c).clientid}userSentMessageInAgentConversation(g,_,T,l,m){const x={agentid:g,usermessages:_,islocalsafemode:T,isresume:l,preinitializerequestid:m};this._endpoint.send(z.encode(2,F.None,r,x))}agentConversationStopped(g,_){const T={agentid:g,haderror:_};this._endpoint.send(z.encode(3,F.None,f,T))}openAgentTabs(g,_){const T={agentid:g,urls:_};this._endpoint.send(z.encode(4,F.None,i,T))}userStoppedAgentConversation(g){const _={agentid:g};this._endpoint.send(z.encode(5,F.None,u,_))}async getAgentStatus(g){const _={agentid:g};return(await this._endpoint.sendAndAwaitResponse(z.encode(6,F.None,N,_))).decode(o).status}async getClientCapabilityVersion(){const g={};return(await this._endpoint.sendAndAwaitResponse(z.encode(7,F.None,d,g))).decode(I).version}}t.Proxy=p;class S extends v{constructor(){super(t);a(this,"onDisconnect")}bind(_,T){this.addReceiver(T,async(l,m)=>{switch(l.header.ordinal){case 0:{const x=l.decode(e),$=_.tryOpenAgentViewer(x.agentid),Z=m.createResponder(n,0,l.header.requestID),L=await $;Z({response:L});break}case 1:{l.decode(s);const x=_.getClientID(),$=m.createResponder(c,1,l.header.requestID),Z=await x;$({clientid:Z});break}case 2:{const x=l.decode(r);_.userSentMessageInAgentConversation(x.agentid,x.usermessages,x.islocalsafemode,x.isresume,x.preinitializerequestid);break}case 3:{const x=l.decode(f);_.agentConversationStopped(x.agentid,x.haderror);break}case 4:{const x=l.decode(i);_.openAgentTabs(x.agentid,x.urls);break}case 5:{const x=l.decode(u);_.userStoppedAgentConversation(x.agentid);break}case 6:{const x=l.decode(N),$=_.getAgentStatus(x.agentid),Z=m.createResponder(o,6,l.header.requestID),L=await $;Z({status:L});break}case 7:{l.decode(d);const x=_.getClientCapabilityVersion(),$=m.createResponder(I,7,l.header.requestID),Z=await x;$({version:Z});break}default:l.header.expectsResponse&&m.sendUnimplementedResponse(l.header.requestID,l.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(_)})}createRemote(_){const[T,l]=k.createChannel(t);return this.bind(_,l),T}}t.Dispatcher=S})(Q||(Q={}));var ne;(t=>{function e(s){if(s==="incognito")return 0;if(s==="signedInAccounts")return 1;throw new X}t.encode=e;function n(s){switch(s){case 0:return"incognito";case 1:return"signedInAccounts";default:return"incognito"}}t.decode=n})(ne||(ne={}));class ue{}a(ue,"interfaceName","web.bridge.AgentSafeModeSettingsHandler"),a(ue,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){d.setEnumValue(ne,0,I.preferredMode)}i.encode=N;function o(d,I){return{preferredMode:y(d.getEnumValue(ne,0))}}i.decode=o})(e=t.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params||(t.AgentSafeModeSettingsHandler_UpdateAgentSafeMode_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){let p=0;I.hasSeenNux&&(p|=1),d.setU8(0,p)}i.encode=N;function o(d,I){return{hasSeenNux:(d.getU8(0)&1)!=0}}i.decode=o})(n=t.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params||(t.AgentSafeModeSettingsHandler_UpdateAgentSafeModeHasSeenNux_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){}i.encode=N;function o(d,I){return{}}i.decode=o})(s=t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params||(t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){let p=0;d.setEnumValue(ne,0,I.preferredMode),I.hasSeenNux&&(p|=1),d.setU8(4,p)}i.encode=N;function o(d,I){const p=d.getU8(4);return{preferredMode:y(d.getEnumValue(ne,0)),hasSeenNux:(p&1)!=0}}i.decode=o})(c=t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams||(t.AgentSafeModeSettingsHandler_GetAgentSafeModeState_ResponseParams={}));class r{constructor(u){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(u.endpointState,!0),this._version=0}static create(){const[u,N]=k.createChannel(t);return[new r(u),N]}static createToBrowser(){const[u,N]=this.create();return Mojo.bindInterface(t.interfaceName,N.pipe.rawHandle),u}updateAgentSafeMode(u){const N={preferredMode:u};this._endpoint.send(z.encode(0,F.None,e,N))}updateAgentSafeModeHasSeenNux(u){const N={hasSeenNux:u};this._endpoint.send(z.encode(1,F.None,n,N))}async getAgentSafeModeState(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(2,F.None,s,u))).decode(c)}}t.Proxy=r;class f extends v{constructor(){super(t);a(this,"onDisconnect")}bind(N,o){this.addReceiver(o,async(d,I)=>{switch(d.header.ordinal){case 0:{const p=d.decode(e);N.updateAgentSafeMode(p.preferredMode);break}case 1:{const p=d.decode(n);N.updateAgentSafeModeHasSeenNux(p.hasSeenNux);break}case 2:{d.decode(s);const p=N.getAgentSafeModeState(),S=I.createResponder(c,2,d.header.requestID),E=await p;S(E);break}default:d.header.expectsResponse&&I.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(N)})}createRemote(N){const[o,d]=k.createChannel(t);return this.bind(N,d),o}}t.Dispatcher=f})(ue||(ue={}));var Ve;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.accessToken)).add(h.forString(c.idToken))}t.measure=e;function n(c,r){c.setString(0,r.accessToken),c.setString(8,r.idToken),c.setF64(16,r.expiresTimestampMsSince1970)}t.encode=n;function s(c,r){return{accessToken:y(c.getString(0)),idToken:y(c.getString(8)),expiresTimestampMsSince1970:y(c.getF64(16))}}t.decode=s})(Ve||(Ve={}));var Je;(t=>{function e(s){if(s==="justLoggedInAccessToken")return 0;if(s==="reloadPageIfLoggedOut")return 1;if(s==="fullTokenToSessionConversion")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}t.decode=n})(Je||(Je={}));class se{}a(se,"interfaceName","web.bridge.AuthHandler"),a(se,"interfaceVersion",1);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){}i.encode=N;function o(d,I){return{}}i.decode=o})(e=t.AuthHandler_HandleMissingSessionAuth_Params||(t.AuthHandler_HandleMissingSessionAuth_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:8},{version:1,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){var I;return h.bytes(i.CURRENT_VERSION.size).add(h.forString((I=d.accountId)!=null?I:null))}i.measure=u;function N(d,I){var p;d.setString(0,(p=I.accountId)!=null?p:null)}i.encode=N;function o(d,I){const p=I>=1?d.getString(0):null;return D({},p!==null?{accountId:p}:{})}i.decode=o})(n=t.AuthHandler_RecordAvailableSessionAuth_Params||(t.AuthHandler_RecordAvailableSessionAuth_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forString(d.accountId))}i.measure=u;function N(d,I){d.setString(0,I.accountId)}i.encode=N;function o(d,I){return{accountId:y(d.getString(0))}}i.decode=o})(s=t.AuthHandler_HandleAcceptedWorkspaceInvite_Params||(t.AuthHandler_HandleAcceptedWorkspaceInvite_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forString(d.accountId))}i.measure=u;function N(d,I){d.setString(0,I.accountId)}i.encode=N;function o(d,I){return{accountId:y(d.getString(0))}}i.decode=o})(c=t.AuthHandler_HandleSwitchAccount_Params||(t.AuthHandler_HandleSwitchAccount_Params={}));class r{constructor(u){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(u.endpointState,!0),this._version=1}static create(){const[u,N]=k.createChannel(t);return[new r(u),N]}static createToBrowser(){const[u,N]=this.create();return Mojo.bindInterface(t.interfaceName,N.pipe.rawHandle),u}handleMissingSessionAuth(){const u={};this._endpoint.send(z.encode(0,F.None,e,u))}recordAvailableSessionAuth(u){const N={accountId:u};this._endpoint.send(z.encode(1,F.None,n,N))}handleAcceptedWorkspaceInvite(u){const N={accountId:u};this._endpoint.send(z.encode(2,F.None,s,N))}handleSwitchAccount(u){const N={accountId:u};this._endpoint.send(z.encode(3,F.None,c,N))}}t.Proxy=r;class f extends v{constructor(){super(t);a(this,"onDisconnect")}bind(N,o){this.addReceiver(o,async(d,I)=>{switch(d.header.ordinal){case 0:{d.decode(e),N.handleMissingSessionAuth();break}case 1:{const p=d.decode(n);N.recordAvailableSessionAuth(p.accountId);break}case 2:{const p=d.decode(s);N.handleAcceptedWorkspaceInvite(p.accountId);break}case 3:{const p=d.decode(c);N.handleSwitchAccount(p.accountId);break}default:d.header.expectsResponse&&I.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(N)})}createRemote(N){const[o,d]=k.createChannel(t);return this.bind(N,d),o}}t.Dispatcher=f})(se||(se={}));class oe{}a(oe,"interfaceName","web.bridge.AuthStateController"),a(oe,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function r(u){return h.bytes(c.CURRENT_VERSION.size).add(h.forObject(Ve,u.authToken))}c.measure=r;function f(u,N){u.setObjectIndirect(Ve,0,N.authToken),u.setEnumValue(Je,8,N.behavior)}c.encode=f;function i(u,N){return{authToken:y(u.getObjectIndirect(Ve,0)),behavior:y(u.getEnumValue(Je,8))}}c.decode=i})(e=t.AuthStateController_RefreshSessionContext_Params||(t.AuthStateController_RefreshSessionContext_Params={}));class n{constructor(r){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}refreshSessionContext(r,f){const i={authToken:r,behavior:f};this._endpoint.send(z.encode(0,F.None,e,i))}}t.Proxy=n;class s extends v{constructor(){super(t);a(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(u,N)=>{switch(u.header.ordinal){case 0:{const o=u.decode(e);f.refreshSessionContext(o.authToken,o.behavior);break}default:u.header.expectsResponse&&N.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,u]=k.createChannel(t);return this.bind(f,u),i}}t.Dispatcher=s})(oe||(oe={}));class Re{}a(Re,"interfaceName","web.bridge.ConversationArchiveController"),a(Re,"interfaceVersion",0);(t=>{let e;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(N){return h.bytes(r.CURRENT_VERSION.size).add(h.forString(N.conversationId))}r.measure=f;function i(N,o){N.setString(0,o.conversationId)}r.encode=i;function u(N,o){return{conversationId:y(N.getString(0))}}r.decode=u})(e=t.ConversationArchiveController_EnqueueConversationArchive_Params||(t.ConversationArchiveController_EnqueueConversationArchive_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(N){return h.bytes(r.CURRENT_VERSION.size).add(h.forString(N.conversationId))}r.measure=f;function i(N,o){N.setString(0,o.conversationId)}r.encode=i;function u(N,o){return{conversationId:y(N.getString(0))}}r.decode=u})(n=t.ConversationArchiveController_CancelConversationArchive_Params||(t.ConversationArchiveController_CancelConversationArchive_Params={}));class s{constructor(f){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(f.endpointState,!0),this._version=0}static create(){const[f,i]=k.createChannel(t);return[new s(f),i]}static createToBrowser(){const[f,i]=this.create();return Mojo.bindInterface(t.interfaceName,i.pipe.rawHandle),f}enqueueConversationArchive(f){const i={conversationId:f};this._endpoint.send(z.encode(0,F.None,e,i))}cancelConversationArchive(f){const i={conversationId:f};this._endpoint.send(z.encode(1,F.None,n,i))}}t.Proxy=s;class c extends v{constructor(){super(t);a(this,"onDisconnect")}bind(i,u){this.addReceiver(u,async(N,o)=>{switch(N.header.ordinal){case 0:{const d=N.decode(e);i.enqueueConversationArchive(d.conversationId);break}case 1:{const d=N.decode(n);i.cancelConversationArchive(d.conversationId);break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(i)})}createRemote(i){const[u,N]=k.createChannel(t);return this.bind(i,N),u}}t.Dispatcher=c})(Re||(Re={}));var ge;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.conduitToken))}t.measure=e;function n(c,r){c.setEnumValue(Ae,0,r.prepareState),c.setF64(8,r.lastPrepareTimestampMsSince1970),c.setString(16,r.conduitToken)}t.encode=n;function s(c,r){return{prepareState:y(c.getEnumValue(Ae,0)),lastPrepareTimestampMsSince1970:y(c.getF64(8)),conduitToken:y(c.getString(16))}}t.decode=s})(ge||(ge={}));var le;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(c,r){c.setEnumValue(Qe,0,r.selectedTab)}t.encode=n;function s(c,r){return{selectedTab:y(c.getEnumValue(Qe,0))}}t.decode=s})(le||(le={}));var be;(t=>{t.VERSION_INFO=[{version:0,size:56}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.id)).add(h.forString(c.name)).add(h.forString(c.mimeType))}t.measure=e;function n(c,r){let f=0;c.setString(0,r.id),c.setI64(8,r.size),c.setString(16,r.name),c.setString(24,r.mimeType),r.width!==null&&r.width!==void 0&&(f|=1,c.setI32(36,r.width)),r.height!==null&&r.height!==void 0&&(f|=2,c.setI32(40,r.height)),r.fileTokenSize!==null&&r.fileTokenSize!==void 0&&(f|=4,c.setI32(44,r.fileTokenSize)),c.setU8(32,f)}t.encode=n;function s(c,r){const f=c.getU8(32),i=(f&1)!=0,u=(f&2)!=0,N=(f&4)!=0;return D(D(D({id:y(c.getString(0)),size:y(c.getI64(8)),name:y(c.getString(16)),mimeType:y(c.getString(24))},i?{width:y(c.getI32(36))}:{}),u?{height:y(c.getI32(40))}:{}),N?{fileTokenSize:y(c.getI32(44))}:{})}t.decode=s})(be||(be={}));var ye;(t=>{t.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){var r,f;return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.id)).add(h.forString(c.url)).add(h.forString(c.title)).add(h.forString((r=c.base64favicon)!=null?r:null)).add(h.forString((f=c.selection)!=null?f:null))}t.measure=e;function n(c,r){var i,u;let f=0;c.setString(0,r.id),c.setString(8,r.url),c.setString(16,r.title),c.setString(24,(i=r.base64favicon)!=null?i:null),c.setString(32,(u=r.selection)!=null?u:null),r.blocked!==null&&r.blocked!==void 0&&(f|=1,r.blocked&&(f|=2)),c.setU8(40,f)}t.encode=n;function s(c,r){const f=c.getString(24),i=r>=1?c.getString(32):null,u=r>=2?c.getU8(40):0,N=(u&1)!=0;return D(D(D({id:y(c.getString(0)),url:y(c.getString(8)),title:y(c.getString(16))},f!==null?{base64favicon:f}:{}),i!==null?{selection:i}:{}),N?{blocked:(u&2)!=0}:{})}t.decode=s})(ye||(ye={}));var Ke;(t=>{function e(s){if(s==="mainPage")return 0;if(s==="sidebar")return 1;throw new X}t.encode=e;function n(s){switch(s){case 0:return"mainPage";case 1:return"sidebar";default:throw new X}}t.decode=n})(Ke||(Ke={}));var Ae;(t=>{function e(s){if(s==="none")return 0;if(s==="sent")return 1;if(s==="success")return 2;if(s==="failure")return 3;throw new X}t.encode=e;function n(s){switch(s){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}t.decode=n})(Ae||(Ae={}));var Qe;(t=>{function e(s){if(s==="answer")return 0;if(s==="web")return 1;if(s==="images")return 2;if(s==="videos")return 3;throw new X}t.encode=e;function n(s){switch(s){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}t.decode=n})(Qe||(Qe={}));var Xe;(t=>{function e(s){if(s==="default_")return 0;if(s==="blue")return 1;if(s==="green")return 2;if(s==="yellow")return 3;if(s==="purple")return 4;if(s==="pink")return 5;if(s==="orange")return 6;if(s==="black")return 7;throw new X}t.encode=e;function n(s){switch(s){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}t.decode=n})(Xe||(Xe={}));var Le;(t=>{function e(s){if(s==="none")return 0;if(s==="startTakeoverFromAgent")return 1;if(s==="endTakeoverFromAgent")return 2;if(s==="stopAgent")return 3;throw new X}t.encode=e;function n(s){switch(s){case 0:return"none";case 1:return"startTakeoverFromAgent";case 2:return"endTakeoverFromAgent";case 3:return"stopAgent";default:return"none"}}t.decode=n})(Le||(Le={}));class Ne{}a(Ne,"interfaceName","web.bridge.ConversationController"),a(Ne,"interfaceVersion",2);(t=>{let e;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){O.setEnumValue(Ke,0,w.windowStyle)}R.encode=V;function q(O,w){return{windowStyle:y(O.getEnumValue(Ke,0))}}R.decode=q})(e=t.ConversationController_SetWindowStyle_Params||(t.ConversationController_SetWindowStyle_Params={}));let n;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.modelSlug))}R.measure=b;function V(O,w){O.setString(0,w.modelSlug)}R.encode=V;function q(O,w){return{modelSlug:y(O.getString(0))}}R.decode=q})(n=t.ConversationController_SetModel_Params||(t.ConversationController_SetModel_Params={}));let s;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){}R.encode=V;function q(O,w){return{}}R.decode=q})(s=t.ConversationController_NewConversation_Params||(t.ConversationController_NewConversation_Params={}));let c;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.remoteConversationId))}R.measure=b;function V(O,w){O.setString(0,w.remoteConversationId)}R.encode=V;function q(O,w){return{remoteConversationId:y(O.getString(0))}}R.decode=q})(c=t.ConversationController_LoadConversation_Params||(t.ConversationController_LoadConversation_Params={}));let r;(R=>{R.VERSION_INFO=[{version:0,size:32},{version:1,size:40}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.prompt)).add(h.forStringArray(O.systemHints)).add(h.forString(O.modelSlug))}R.measure=b;function V(O,w){let U=0;O.setString(0,w.prompt),O.setStringArray(8,w.systemHints),O.setString(16,w.modelSlug),w.n7jupdLocalSafeMode!==null&&w.n7jupdLocalSafeMode!==void 0&&(U|=1,w.n7jupdLocalSafeMode&&(U|=2)),O.setU8(24,U)}R.encode=V;function q(O,w){const U=w>=1?O.getU8(24):0,J=(U&1)!=0;return D({prompt:y(O.getString(0)),systemHints:y(W(O.getStringArray(8))),modelSlug:y(O.getString(16))},J?{n7jupdLocalSafeMode:(U&2)!=0}:{})}R.decode=q})(r=t.ConversationController_RequestCompletion_Params||(t.ConversationController_RequestCompletion_Params={}));let f;(R=>{R.VERSION_INFO=[{version:0,size:24}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){var w,U;return h.bytes(R.CURRENT_VERSION.size).add(h.forString((w=O.userMessage)!=null?w:null)).add(h.forString((U=O.targetedReply)!=null?U:null))}R.measure=b;function V(O,w){var U,J;O.setString(0,(U=w.userMessage)!=null?U:null),O.setString(8,(J=w.targetedReply)!=null?J:null)}R.encode=V;function q(O,w){const U=O.getString(0),J=O.getString(8);return D(D({},U!==null?{userMessage:U}:{}),J!==null?{targetedReply:J}:{})}R.decode=q})(f=t.ConversationController_PopulatePrompt_Params||(t.ConversationController_PopulatePrompt_Params={}));let i;(R=>{R.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){var w,U;return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.url)).add(h.forString(O.title)).add(h.forString((w=O.base64favicon)!=null?w:null)).add(h.forString((U=O.selection)!=null?U:null))}R.measure=b;function V(O,w){var J,Ee;let U=0;O.setString(0,w.url),O.setString(8,w.title),O.setString(16,(J=w.base64favicon)!=null?J:null),O.setString(24,(Ee=w.selection)!=null?Ee:null),w.blocked!==null&&w.blocked!==void 0&&(U|=1,w.blocked&&(U|=2)),O.setU8(32,U)}R.encode=V;function q(O,w){const U=O.getString(16),J=w>=1?O.getString(24):null,Ee=w>=2?O.getU8(32):0,Et=(Ee&1)!=0;return D(D(D({url:y(O.getString(0)),title:y(O.getString(8))},U!==null?{base64favicon:U}:{}),J!==null?{selection:J}:{}),Et?{blocked:(Ee&2)!=0}:{})}R.decode=q})(i=t.ConversationController_UpdateContext_Params||(t.ConversationController_UpdateContext_Params={}));let u;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forObject(ge,O.details))}R.measure=b;function V(O,w){O.setObjectIndirect(ge,0,w.details)}R.encode=V;function q(O,w){return{details:y(O.getObjectIndirect(ge,0))}}R.decode=q})(u=t.ConversationController_PrepareConversation_Params||(t.ConversationController_PrepareConversation_Params={}));let N;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forObject(le,O.options))}R.measure=b;function V(O,w){O.setObjectIndirect(le,0,w.options)}R.encode=V;function q(O,w){return{options:y(O.getObjectIndirect(le,0))}}R.decode=q})(N=t.ConversationController_SetSuperWidgetOptions_Params||(t.ConversationController_SetSuperWidgetOptions_Params={}));let o;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forObjectArray(be,O.attachments))}R.measure=b;function V(O,w){O.setObjectArray(be,0,w.attachments)}R.encode=V;function q(O,w){return{attachments:y(W(O.getObjectArray(be,0)))}}R.decode=q})(o=t.ConversationController_SetAttachments_Params||(t.ConversationController_SetAttachments_Params={}));let d;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.to))}R.measure=b;function V(O,w){O.setString(0,w.to)}R.encode=V;function q(O,w){return{to:y(O.getString(0))}}R.decode=q})(d=t.ConversationController_Navigate_Params||(t.ConversationController_Navigate_Params={}));let I;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forObject(ie,O.whisperContent))}R.measure=b;function V(O,w){O.setObjectIndirect(ie,0,w.whisperContent)}R.encode=V;function q(O,w){return{whisperContent:y(O.getObjectIndirect(ie,0))}}R.decode=q})(I=t.ConversationController_SetWhisperContent_Params||(t.ConversationController_SetWhisperContent_Params={}));let p;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forObjectArray(ye,O.tabs))}R.measure=b;function V(O,w){O.setObjectArray(ye,0,w.tabs)}R.encode=V;function q(O,w){return{tabs:y(W(O.getObjectArray(ye,0)))}}R.decode=q})(p=t.ConversationController_SetTabContext_Params||(t.ConversationController_SetTabContext_Params={}));let S;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.origin))}R.measure=b;function V(O,w){O.setString(0,w.origin)}R.encode=V;function q(O,w){return{origin:y(O.getString(0))}}R.decode=q})(S=t.ConversationController_SetPromptOrigin_Params||(t.ConversationController_SetPromptOrigin_Params={}));let E;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){}R.encode=V;function q(O,w){return{}}R.decode=q})(E=t.ConversationController_CloseNavigationSidebar_Params||(t.ConversationController_CloseNavigationSidebar_Params={}));let g;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){O.setEnumValue(Xe,0,w.theme)}R.encode=V;function q(O,w){return{theme:y(O.getEnumValue(Xe,0))}}R.decode=q})(g=t.ConversationController_SetChatTheme_Params||(t.ConversationController_SetChatTheme_Params={}));let _;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){}R.encode=V;function q(O,w){return{}}R.decode=q})(_=t.ConversationController_ShowSearch_Params||(t.ConversationController_ShowSearch_Params={}));let T;(R=>{R.VERSION_INFO=[{version:0,size:24}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.query)).add(h.forString(O.navlinksEvent))}R.measure=b;function V(O,w){O.setString(0,w.query),O.setString(8,w.navlinksEvent)}R.encode=V;function q(O,w){return{query:y(O.getString(0)),navlinksEvent:y(O.getString(8))}}R.decode=q})(T=t.ConversationController_PopulateNavlinks_Params||(t.ConversationController_PopulateNavlinks_Params={}));let l;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){O.setEnumValue(Le,0,w.request)}R.encode=V;function q(O,w){return{request:y(O.getEnumValue(Le,0))}}R.decode=q})(l=t.ConversationController_HandleAgentRequest_Params||(t.ConversationController_HandleAgentRequest_Params={}));let m;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){O.setEnumValue(ne,0,w.preferredMode)}R.encode=V;function q(O,w){return{preferredMode:y(O.getEnumValue(ne,0))}}R.decode=q})(m=t.ConversationController_SetAgentSafeMode_Params||(t.ConversationController_SetAgentSafeMode_Params={}));let x;(R=>{R.VERSION_INFO=[{version:0,size:16}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){let U=0;w.hasSeenNux&&(U|=1),O.setU8(0,U)}R.encode=V;function q(O,w){return{hasSeenNux:(O.getU8(0)&1)!=0}}R.decode=q})(x=t.ConversationController_SetAgentSafeModeHasSeenNux_Params||(t.ConversationController_SetAgentSafeModeHasSeenNux_Params={}));let $;(R=>{R.VERSION_INFO=[{version:0,size:32}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size).add(h.forString(O.name)).add(h.forNumericArray(Uint8Array,O.bytes)).add(h.forString(O.mimeType))}R.measure=b;function V(O,w){O.setString(0,w.name),O.setNumericArray(Uint8Array,8,w.bytes),O.setString(16,w.mimeType)}R.encode=V;function q(O,w){return{name:y(O.getString(0)),bytes:y(O.getNumericArray(Uint8Array,8)),mimeType:y(O.getString(16))}}R.decode=q})($=t.ConversationController_AttachUserFile_Params||(t.ConversationController_AttachUserFile_Params={}));let Z;(R=>{R.VERSION_INFO=[{version:0,size:8}],R.CURRENT_VERSION=R.VERSION_INFO[R.VERSION_INFO.length-1];function b(O){return h.bytes(R.CURRENT_VERSION.size)}R.measure=b;function V(O,w){}R.encode=V;function q(O,w){return{}}R.decode=q})(Z=t.ConversationController_ShowNavigationSidebarAsOverlay_Params||(t.ConversationController_ShowNavigationSidebarAsOverlay_Params={}));class L{constructor(b){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(b.endpointState,!0),this._version=2}static create(){const[b,V]=k.createChannel(t);return[new L(b),V]}static createToBrowser(){const[b,V]=this.create();return Mojo.bindInterface(t.interfaceName,V.pipe.rawHandle),b}setWindowStyle(b){const V={windowStyle:b};this._endpoint.send(z.encode(0,F.None,e,V))}setModel(b){const V={modelSlug:b};this._endpoint.send(z.encode(1,F.None,n,V))}newConversation(){const b={};this._endpoint.send(z.encode(2,F.None,s,b))}loadConversation(b){const V={remoteConversationId:b};this._endpoint.send(z.encode(3,F.None,c,V))}requestCompletion(b,V,q,O){const w={prompt:b,systemHints:V,modelSlug:q,n7jupdLocalSafeMode:O};this._endpoint.send(z.encode(4,F.None,r,w))}populatePrompt(b,V){const q={userMessage:b,targetedReply:V};this._endpoint.send(z.encode(5,F.None,f,q))}updateContext(b,V,q,O,w){const U={url:b,title:V,base64favicon:q,selection:O,blocked:w};this._endpoint.send(z.encode(6,F.None,i,U))}prepareConversation(b){const V={details:b};this._endpoint.send(z.encode(7,F.None,u,V))}setSuperWidgetOptions(b){const V={options:b};this._endpoint.send(z.encode(8,F.None,N,V))}setAttachments(b){const V={attachments:b};this._endpoint.send(z.encode(9,F.None,o,V))}navigate(b){const V={to:b};this._endpoint.send(z.encode(10,F.None,d,V))}setWhisperContent(b){const V={whisperContent:b};this._endpoint.send(z.encode(11,F.None,I,V))}setTabContext(b){const V={tabs:b};this._endpoint.send(z.encode(12,F.None,p,V))}setPromptOrigin(b){const V={origin:b};this._endpoint.send(z.encode(13,F.None,S,V))}closeNavigationSidebar(){const b={};this._endpoint.send(z.encode(14,F.None,E,b))}setChatTheme(b){const V={theme:b};this._endpoint.send(z.encode(15,F.None,g,V))}showSearch(){const b={};this._endpoint.send(z.encode(16,F.None,_,b))}populateNavlinks(b,V){const q={query:b,navlinksEvent:V};this._endpoint.send(z.encode(17,F.None,T,q))}handleAgentRequest(b){const V={request:b};this._endpoint.send(z.encode(18,F.None,l,V))}setAgentSafeMode(b){const V={preferredMode:b};this._endpoint.send(z.encode(19,F.None,m,V))}setAgentSafeModeHasSeenNux(b){const V={hasSeenNux:b};this._endpoint.send(z.encode(20,F.None,x,V))}attachUserFile(b,V,q){const O={name:b,bytes:V,mimeType:q};this._endpoint.send(z.encode(21,F.None,$,O))}showNavigationSidebarAsOverlay(){const b={};this._endpoint.send(z.encode(22,F.None,Z,b))}}t.Proxy=L;class $e extends v{constructor(){super(t);a(this,"onDisconnect")}bind(V,q){this.addReceiver(q,async(O,w)=>{switch(O.header.ordinal){case 0:{const U=O.decode(e);V.setWindowStyle(U.windowStyle);break}case 1:{const U=O.decode(n);V.setModel(U.modelSlug);break}case 2:{O.decode(s),V.newConversation();break}case 3:{const U=O.decode(c);V.loadConversation(U.remoteConversationId);break}case 4:{const U=O.decode(r);V.requestCompletion(U.prompt,U.systemHints,U.modelSlug,U.n7jupdLocalSafeMode);break}case 5:{const U=O.decode(f);V.populatePrompt(U.userMessage,U.targetedReply);break}case 6:{const U=O.decode(i);V.updateContext(U.url,U.title,U.base64favicon,U.selection,U.blocked);break}case 7:{const U=O.decode(u);V.prepareConversation(U.details);break}case 8:{const U=O.decode(N);V.setSuperWidgetOptions(U.options);break}case 9:{const U=O.decode(o);V.setAttachments(U.attachments);break}case 10:{const U=O.decode(d);V.navigate(U.to);break}case 11:{const U=O.decode(I);V.setWhisperContent(U.whisperContent);break}case 12:{const U=O.decode(p);V.setTabContext(U.tabs);break}case 13:{const U=O.decode(S);V.setPromptOrigin(U.origin);break}case 14:{O.decode(E),V.closeNavigationSidebar();break}case 15:{const U=O.decode(g);V.setChatTheme(U.theme);break}case 16:{O.decode(_),V.showSearch();break}case 17:{const U=O.decode(T);V.populateNavlinks(U.query,U.navlinksEvent);break}case 18:{const U=O.decode(l);V.handleAgentRequest(U.request);break}case 19:{const U=O.decode(m);V.setAgentSafeMode(U.preferredMode);break}case 20:{const U=O.decode(x);V.setAgentSafeModeHasSeenNux(U.hasSeenNux);break}case 21:{const U=O.decode($);V.attachUserFile(U.name,U.bytes,U.mimeType);break}case 22:{O.decode(Z),V.showNavigationSidebarAsOverlay();break}default:O.header.expectsResponse&&w.sendUnimplementedResponse(O.header.requestID,O.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(V)})}createRemote(V){const[q,O]=k.createChannel(t);return this.bind(V,O),q}}t.Dispatcher=$e})(Ne||(Ne={}));class We{}a(We,"interfaceName","web.bridge.GenericInterface"),a(We,"interfaceVersion",0);(t=>{let e;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(N){return h.bytes(r.CURRENT_VERSION.size).add(h.forString(N.request))}r.measure=f;function i(N,o){N.setString(0,o.request)}r.encode=i;function u(N,o){return{request:y(N.getString(0))}}r.decode=u})(e=t.GenericInterface_AcceptMessage_Params||(t.GenericInterface_AcceptMessage_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function f(N){var o;return h.bytes(r.CURRENT_VERSION.size).add(h.forString((o=N.response)!=null?o:null))}r.measure=f;function i(N,o){var d;N.setString(0,(d=o.response)!=null?d:null)}r.encode=i;function u(N,o){const d=N.getString(0);return D({},d!==null?{response:d}:{})}r.decode=u})(n=t.GenericInterface_AcceptMessage_ResponseParams||(t.GenericInterface_AcceptMessage_ResponseParams={}));class s{constructor(f){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(f.endpointState,!0),this._version=0}static create(){const[f,i]=k.createChannel(t);return[new s(f),i]}static createToBrowser(){const[f,i]=this.create();return Mojo.bindInterface(t.interfaceName,i.pipe.rawHandle),f}async acceptMessage(f){const i={request:f};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,i))).decode(n).response}}t.Proxy=s;class c extends v{constructor(){super(t);a(this,"onDisconnect")}bind(i,u){this.addReceiver(u,async(N,o)=>{switch(N.header.ordinal){case 0:{const d=N.decode(e),I=i.acceptMessage(d.request),p=o.createResponder(n,0,N.header.requestID),S=await I;p({response:S});break}default:N.header.expectsResponse&&o.sendUnimplementedResponse(N.header.requestID,N.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(i)})}createRemote(i){const[u,N]=k.createChannel(t);return this.bind(i,N),u}}t.Dispatcher=c})(We||(We={}));class xe{}a(xe,"interfaceName","web.bridge.LinkHandler"),a(xe,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:24}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function r(u){return h.bytes(c.CURRENT_VERSION.size).add(h.forString(u.url)).add(h.forString(u.target))}c.measure=r;function f(u,N){u.setString(0,N.url),u.setString(8,N.target)}c.encode=f;function i(u,N){return{url:y(u.getString(0)),target:y(u.getString(8))}}c.decode=i})(e=t.LinkHandler_HandleLink_Params||(t.LinkHandler_HandleLink_Params={}));class n{constructor(r){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}handleLink(r,f){const i={url:r,target:f};this._endpoint.send(z.encode(0,F.None,e,i))}}t.Proxy=n;class s extends v{constructor(){super(t);a(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(u,N)=>{switch(u.header.ordinal){case 0:{const o=u.decode(e);f.handleLink(o.url,o.target);break}default:u.header.expectsResponse&&N.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,u]=k.createChannel(t);return this.bind(f,u),i}}t.Dispatcher=s})(xe||(xe={}));var we;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.author)).add(h.forString(c.message))}t.measure=e;function n(c,r){c.setString(0,r.author),c.setString(8,r.message)}t.encode=n;function s(c,r){return{author:y(c.getString(0)),message:y(c.getString(8))}}t.decode=s})(we||(we={}));class Ie{}a(Ie,"interfaceName","web.bridge.LocalToolHandler"),a(Ie,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forString(d.toolname)).add(h.forString(d.args))}i.measure=u;function N(d,I){d.setString(0,I.toolname),d.setString(8,I.args)}i.encode=N;function o(d,I){return{toolname:y(d.getString(0)),args:y(d.getString(8))}}i.decode=o})(e=t.LocalToolHandler_CallLocalTool_Params||(t.LocalToolHandler_CallLocalTool_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forObjectArray(we,d.response))}i.measure=u;function N(d,I){d.setObjectArray(we,0,I.response)}i.encode=N;function o(d,I){return{response:y(W(d.getObjectArray(we,0)))}}i.decode=o})(n=t.LocalToolHandler_CallLocalTool_ResponseParams||(t.LocalToolHandler_CallLocalTool_ResponseParams={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){}i.encode=N;function o(d,I){return{}}i.decode=o})(s=t.LocalToolHandler_GetToolNames_Params||(t.LocalToolHandler_GetToolNames_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forStringArray(d.toolnames))}i.measure=u;function N(d,I){d.setStringArray(0,I.toolnames)}i.encode=N;function o(d,I){return{toolnames:y(W(d.getStringArray(0)))}}i.decode=o})(c=t.LocalToolHandler_GetToolNames_ResponseParams||(t.LocalToolHandler_GetToolNames_ResponseParams={}));class r{constructor(u){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(u.endpointState,!0),this._version=0}static create(){const[u,N]=k.createChannel(t);return[new r(u),N]}static createToBrowser(){const[u,N]=this.create();return Mojo.bindInterface(t.interfaceName,N.pipe.rawHandle),u}async callLocalTool(u,N){const o={toolname:u,args:N};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,o))).decode(n).response}async getToolNames(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,s,u))).decode(c).toolnames}}t.Proxy=r;class f extends v{constructor(){super(t);a(this,"onDisconnect")}bind(N,o){this.addReceiver(o,async(d,I)=>{switch(d.header.ordinal){case 0:{const p=d.decode(e),S=N.callLocalTool(p.toolname,p.args),E=I.createResponder(n,0,d.header.requestID),g=await S;E({response:g});break}case 1:{d.decode(s);const p=N.getToolNames(),S=I.createResponder(c,1,d.header.requestID),E=await p;S({toolnames:E});break}default:d.header.expectsResponse&&I.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(N)})}createRemote(N){const[o,d]=k.createChannel(t);return this.bind(N,d),o}}t.Dispatcher=f})(Ie||(Ie={}));var C;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){var r;return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.clientId)).add(h.forString((r=c.serverId)!=null?r:null))}t.measure=e;function n(c,r){var f;c.setString(0,r.clientId),c.setString(8,(f=r.serverId)!=null?f:null)}t.encode=n;function s(c,r){const f=c.getString(8);return D({clientId:y(c.getString(0))},f!==null?{serverId:f}:{})}t.decode=s})(C||(C={}));var P;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){var r;return h.bytes(t.CURRENT_VERSION.size).add(h.forString((r=c.title)!=null?r:null))}t.measure=e;function n(c,r){var i;let f=0;c.setString(0,(i=r.title)!=null?i:null),r.updateTimestampMsSince1970!==null&&r.updateTimestampMsSince1970!==void 0&&(f|=1,c.setF64(16,r.updateTimestampMsSince1970)),r.status!==null&&r.status!==void 0&&(f|=2,c.setEnumValue(Ge,12,r.status)),c.setU8(8,f)}t.encode=n;function s(c,r){const f=c.getString(0),i=c.getU8(8),u=(i&1)!=0,N=(i&2)!=0;return D(D(D({},f!==null?{title:f}:{}),u?{updateTimestampMsSince1970:y(c.getF64(16))}:{}),N?{status:y(c.getEnumValue(Ge,12))}:{})}t.decode=s})(P||(P={}));var Ge;(t=>{function e(s){if(s==="none")return 0;if(s==="inProgress")return 1;if(s==="done")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}t.decode=n})(Ge||(Ge={}));class Te{}a(Te,"interfaceName","web.bridge.NavigationSidebarController"),a(Te,"interfaceVersion",0);(t=>{let e;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){let g=0;E.visible&&(g|=1),S.setU8(0,g)}o.encode=I;function p(S,E){return{visible:(S.getU8(0)&1)!=0}}o.decode=p})(e=t.NavigationSidebarController_SetSidebarVisibility_Params||(t.NavigationSidebarController_SetSidebarVisibility_Params={}));let n;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){}o.encode=I;function p(S,E){return{}}o.decode=p})(n=t.NavigationSidebarController_ToggleSidebarVisibility_Params||(t.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let s;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){}o.encode=I;function p(S,E){return{}}o.decode=p})(s=t.NavigationSidebarController_NewConversation_Params||(t.NavigationSidebarController_NewConversation_Params={}));let c;(o=>{o.VERSION_INFO=[{version:0,size:24}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size).add(h.forObject(C,S.id)).add(h.forObject(P,S.data))}o.measure=d;function I(S,E){S.setObjectIndirect(C,0,E.id),S.setObjectIndirect(P,8,E.data)}o.encode=I;function p(S,E){return{id:y(S.getObjectIndirect(C,0)),data:y(S.getObjectIndirect(P,8))}}o.decode=p})(c=t.NavigationSidebarController_AddConversationHistoryItem_Params||(t.NavigationSidebarController_AddConversationHistoryItem_Params={}));let r;(o=>{o.VERSION_INFO=[{version:0,size:24}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size).add(h.forObject(C,S.id)).add(h.forObject(P,S.data))}o.measure=d;function I(S,E){S.setObjectIndirect(C,0,E.id),S.setObjectIndirect(P,8,E.data)}o.encode=I;function p(S,E){return{id:y(S.getObjectIndirect(C,0)),data:y(S.getObjectIndirect(P,8))}}o.decode=p})(r=t.NavigationSidebarController_UpdateConversationHistoryItem_Params||(t.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));let f;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){}o.encode=I;function p(S,E){return{}}o.decode=p})(f=t.NavigationSidebarController_GetSidebarVisibility_Params||(t.NavigationSidebarController_GetSidebarVisibility_Params={}));let i;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){let g=0;E.visible&&(g|=1),S.setU8(0,g)}o.encode=I;function p(S,E){return{visible:(S.getU8(0)&1)!=0}}o.decode=p})(i=t.NavigationSidebarController_GetSidebarVisibility_ResponseParams||(t.NavigationSidebarController_GetSidebarVisibility_ResponseParams={}));class u{constructor(d){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(d.endpointState,!0),this._version=0}static create(){const[d,I]=k.createChannel(t);return[new u(d),I]}static createToBrowser(){const[d,I]=this.create();return Mojo.bindInterface(t.interfaceName,I.pipe.rawHandle),d}setSidebarVisibility(d){const I={visible:d};this._endpoint.send(z.encode(0,F.None,e,I))}toggleSidebarVisibility(){const d={};this._endpoint.send(z.encode(1,F.None,n,d))}newConversation(){const d={};this._endpoint.send(z.encode(2,F.None,s,d))}addConversationHistoryItem(d,I){const p={id:d,data:I};this._endpoint.send(z.encode(3,F.None,c,p))}updateConversationHistoryItem(d,I){const p={id:d,data:I};this._endpoint.send(z.encode(4,F.None,r,p))}async getSidebarVisibility(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(5,F.None,f,d))).decode(i).visible}}t.Proxy=u;class N extends v{constructor(){super(t);a(this,"onDisconnect")}bind(I,p){this.addReceiver(p,async(S,E)=>{switch(S.header.ordinal){case 0:{const g=S.decode(e);I.setSidebarVisibility(g.visible);break}case 1:{S.decode(n),I.toggleSidebarVisibility();break}case 2:{S.decode(s),I.newConversation();break}case 3:{const g=S.decode(c);I.addConversationHistoryItem(g.id,g.data);break}case 4:{const g=S.decode(r);I.updateConversationHistoryItem(g.id,g.data);break}case 5:{S.decode(f);const g=I.getSidebarVisibility(),_=E.createResponder(i,5,S.header.requestID),T=await g;_({visible:T});break}default:S.header.expectsResponse&&E.sendUnimplementedResponse(S.header.requestID,S.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[p,S]=k.createChannel(t);return this.bind(I,S),p}}t.Dispatcher=N})(Te||(Te={}));var He;(t=>{function e(s){if(s==="general")return 0;if(s==="personalization")return 1;if(s==="searchEngines")return 2;if(s==="dataControls")return 3;if(s==="modelTraining")return 4;if(s==="autofill")return 5;throw new X}t.encode=e;function n(s){switch(s){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";case 5:return"autofill";default:return"general"}}t.decode=n})(He||(He={}));class De{}a(De,"interfaceName","web.bridge.OpenSettingsController"),a(De,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function r(u){return h.bytes(c.CURRENT_VERSION.size)}c.measure=r;function f(u,N){let o=0;N.tab!==null&&N.tab!==void 0&&(o|=1,u.setEnumValue(He,4,N.tab)),u.setU8(0,o)}c.encode=f;function i(u,N){const d=(u.getU8(0)&1)!=0;return D({},d?{tab:y(u.getEnumValue(He,4))}:{})}c.decode=i})(e=t.OpenSettingsController_OpenSettings_Params||(t.OpenSettingsController_OpenSettings_Params={}));class n{constructor(r){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}openSettings(r){const f={tab:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class s extends v{constructor(){super(t);a(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(u,N)=>{switch(u.header.ordinal){case 0:{const o=u.decode(e);f.openSettings(o.tab);break}default:u.header.expectsResponse&&N.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,u]=k.createChannel(t);return this.bind(f,u),i}}t.Dispatcher=s})(De||(De={}));var Ce;(t=>{function e(s){if(s==="messageSent")return 0;if(s==="addTabContext")return 1;if(s==="removeTabContext")return 2;throw new X}t.encode=e;function n(s){switch(s){case 0:return"messageSent";case 1:return"addTabContext";case 2:return"removeTabContext";default:return"messageSent"}}t.decode=n})(Ce||(Ce={}));class ke{}a(ke,"interfaceName","web.bridge.ProductEventHandler"),a(ke,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function r(u){return h.bytes(c.CURRENT_VERSION.size)}c.measure=r;function f(u,N){u.setEnumValue(Ce,0,N.eventName)}c.encode=f;function i(u,N){return{eventName:y(u.getEnumValue(Ce,0))}}c.decode=i})(e=t.ProductEventHandler_TriggerProductEvent_Params||(t.ProductEventHandler_TriggerProductEvent_Params={}));class n{constructor(r){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}triggerProductEvent(r){const f={eventName:r};this._endpoint.send(z.encode(0,F.None,e,f))}}t.Proxy=n;class s extends v{constructor(){super(t);a(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(u,N)=>{switch(u.header.ordinal){case 0:{const o=u.decode(e);f.triggerProductEvent(o.eventName);break}default:u.header.expectsResponse&&N.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,u]=k.createChannel(t);return this.bind(f,u),i}}t.Dispatcher=s})(ke||(ke={}));class de{}a(de,"interfaceName","web.bridge.DesktopSidebarController"),a(de,"interfaceVersion",0);(t=>{let e;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function N(I){return h.bytes(u.CURRENT_VERSION.size)}u.measure=N;function o(I,p){}u.encode=o;function d(I,p){return{}}u.decode=d})(e=t.DesktopSidebarController_CloseSidebar_Params||(t.DesktopSidebarController_CloseSidebar_Params={}));let n;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function N(I){return h.bytes(u.CURRENT_VERSION.size)}u.measure=N;function o(I,p){}u.encode=o;function d(I,p){return{}}u.decode=d})(n=t.DesktopSidebarController_CanHideHeader_Params||(t.DesktopSidebarController_CanHideHeader_Params={}));let s;(u=>{u.VERSION_INFO=[{version:0,size:16}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function N(I){return h.bytes(u.CURRENT_VERSION.size)}u.measure=N;function o(I,p){let S=0;p.canHideHeader&&(S|=1),I.setU8(0,S)}u.encode=o;function d(I,p){return{canHideHeader:(I.getU8(0)&1)!=0}}u.decode=d})(s=t.DesktopSidebarController_CanHideHeader_ResponseParams||(t.DesktopSidebarController_CanHideHeader_ResponseParams={}));let c;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function N(I){return h.bytes(u.CURRENT_VERSION.size)}u.measure=N;function o(I,p){}u.encode=o;function d(I,p){return{}}u.decode=d})(c=t.DesktopSidebarController_BecomeMainPage_Params||(t.DesktopSidebarController_BecomeMainPage_Params={}));let r;(u=>{u.VERSION_INFO=[{version:0,size:8}],u.CURRENT_VERSION=u.VERSION_INFO[u.VERSION_INFO.length-1];function N(I){return h.bytes(u.CURRENT_VERSION.size)}u.measure=N;function o(I,p){}u.encode=o;function d(I,p){return{}}u.decode=d})(r=t.DesktopSidebarController_OpenInNewTab_Params||(t.DesktopSidebarController_OpenInNewTab_Params={}));class f{constructor(N){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(N.endpointState,!0),this._version=0}static create(){const[N,o]=k.createChannel(t);return[new f(N),o]}static createToBrowser(){const[N,o]=this.create();return Mojo.bindInterface(t.interfaceName,o.pipe.rawHandle),N}closeSidebar(){const N={};this._endpoint.send(z.encode(0,F.None,e,N))}async canHideHeader(){const N={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,N))).decode(s).canHideHeader}becomeMainPage(){const N={};this._endpoint.send(z.encode(2,F.None,c,N))}openInNewTab(){const N={};this._endpoint.send(z.encode(3,F.None,r,N))}}t.Proxy=f;class i extends v{constructor(){super(t);a(this,"onDisconnect")}bind(o,d){this.addReceiver(d,async(I,p)=>{switch(I.header.ordinal){case 0:{I.decode(e),o.closeSidebar();break}case 1:{I.decode(n);const S=o.canHideHeader(),E=p.createResponder(s,1,I.header.requestID),g=await S;E({canHideHeader:g});break}case 2:{I.decode(c),o.becomeMainPage();break}case 3:{I.decode(r),o.openInNewTab();break}default:I.header.expectsResponse&&p.sendUnimplementedResponse(I.header.requestID,I.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(o)})}createRemote(o){const[d,I]=k.createChannel(t);return this.bind(o,I),d}}t.Dispatcher=i})(de||(de={}));class Pe{}a(Pe,"interfaceName","web.bridge.SidebarOverlayController"),a(Pe,"interfaceVersion",0);(t=>{let e;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function r(u){return h.bytes(c.CURRENT_VERSION.size)}c.measure=r;function f(u,N){}c.encode=f;function i(u,N){return{}}c.decode=i})(e=t.SidebarOverlayController_DidCloseSidebarOverlay_Params||(t.SidebarOverlayController_DidCloseSidebarOverlay_Params={}));class n{constructor(r){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(r.endpointState,!0),this._version=0}static create(){const[r,f]=k.createChannel(t);return[new n(r),f]}static createToBrowser(){const[r,f]=this.create();return Mojo.bindInterface(t.interfaceName,f.pipe.rawHandle),r}didCloseSidebarOverlay(){const r={};this._endpoint.send(z.encode(0,F.None,e,r))}}t.Proxy=n;class s extends v{constructor(){super(t);a(this,"onDisconnect")}bind(f,i){this.addReceiver(i,async(u,N)=>{switch(u.header.ordinal){case 0:{u.decode(e),f.didCloseSidebarOverlay();break}default:u.header.expectsResponse&&N.sendUnimplementedResponse(u.header.requestID,u.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(f)})}createRemote(f){const[i,u]=k.createChannel(t);return this.bind(f,u),i}}t.Dispatcher=s})(Pe||(Pe={}));var Ue;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size)}t.measure=e;function n(c,r){}t.encode=n;function s(c,r){return{}}t.decode=s})(Ue||(Ue={}));var ze;(t=>{t.VERSION_INFO=[{version:0,size:48}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.id)).add(h.forString(c.fileid)).add(h.forString(c.name)).add(h.forString(c.mimetype))}t.measure=e;function n(c,r){c.setString(0,r.id),c.setString(8,r.fileid),c.setString(16,r.name),c.setU32(24,r.size),c.setString(32,r.mimetype)}t.encode=n;function s(c,r){return{id:y(c.getString(0)),fileid:y(c.getString(8)),name:y(c.getString(16)),size:y(c.getU32(24)),mimetype:y(c.getString(32))}}t.decode=s})(ze||(ze={}));var Fe;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.assetPointer))}t.measure=e;function n(c,r){c.setString(0,r.assetPointer),c.setU32(8,r.sizeBytes),c.setU32(12,r.width),c.setU32(16,r.height)}t.encode=n;function s(c,r){return{assetPointer:y(c.getString(0)),sizeBytes:y(c.getU32(8)),width:y(c.getU32(12)),height:y(c.getU32(16))}}t.decode=s})(Fe||(Fe={}));var _e;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){var r,f,i;return h.bytes(t.CURRENT_VERSION.size).add(h.forString((r=c.content)!=null?r:null)).add(h.forString((f=c.url)!=null?f:null)).add(h.forString((i=c.title)!=null?i:null))}t.measure=e;function n(c,r){var f,i,u;c.setString(0,(f=r.content)!=null?f:null),c.setString(8,(i=r.url)!=null?i:null),c.setString(16,(u=r.title)!=null?u:null)}t.encode=n;function s(c,r){const f=c.getString(0),i=c.getString(8),u=c.getString(16);return D(D(D({},f!==null?{content:f}:{}),i!==null?{url:i}:{}),u!==null?{title:u}:{})}t.decode=s})(_e||(_e={}));var ie;(t=>{t.VERSION_INFO=[{version:0,size:32},{version:1,size:48}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){var r,f,i,u,N;return h.bytes(t.CURRENT_VERSION.size).add(h.forString((r=c.content)!=null?r:null)).add(h.forObjectArray(ze,(f=c.files)!=null?f:null)).add(h.forObjectArray(Fe,(i=c.imageAssetPointers)!=null?i:null)).add(h.forObjectArray(_e,(u=c.embeddedDocumentContexts)!=null?u:null)).add(h.forString((N=c.customInstructions)!=null?N:null))}t.measure=e;function n(c,r){var f,i,u,N,o;c.setString(0,(f=r.content)!=null?f:null),c.setObjectArray(ze,8,(i=r.files)!=null?i:null),c.setObjectArray(Fe,16,(u=r.imageAssetPointers)!=null?u:null),c.setObjectArray(_e,24,(N=r.embeddedDocumentContexts)!=null?N:null),c.setString(32,(o=r.customInstructions)!=null?o:null)}t.encode=n;function s(c,r){const f=c.getString(0),i=W(c.getObjectArray(ze,8)),u=W(c.getObjectArray(Fe,16)),N=r>=1?W(c.getObjectArray(_e,24)):null,o=r>=1?c.getString(32):null;return D(D(D(D(D({},f!==null?{content:f}:{}),i!==null?{files:i}:{}),u!==null?{imageAssetPointers:u}:{}),N!==null?{embeddedDocumentContexts:N}:{}),o!==null?{customInstructions:o}:{})}t.decode=s})(ie||(ie={}));var me;(t=>{t.VERSION_INFO=[{version:0,size:32}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function e(c){return h.bytes(t.CURRENT_VERSION.size).add(h.forString(c.base64image)).add(h.forString(c.mimetype)).add(h.forString(c.filename))}t.measure=e;function n(c,r){c.setString(0,r.base64image),c.setString(8,r.mimetype),c.setString(16,r.filename)}t.encode=n;function s(c,r){return{base64image:y(c.getString(0)),mimetype:y(c.getString(8)),filename:y(c.getString(16))}}t.decode=s})(me||(me={}));class he{}a(he,"interfaceName","web.bridge.WhisperContentProvider"),a(he,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){var I;return h.bytes(i.CURRENT_VERSION.size).add(h.forObject(Ue,(I=d.options)!=null?I:null))}i.measure=u;function N(d,I){var p;d.setObjectIndirect(Ue,0,(p=I.options)!=null?p:null)}i.encode=N;function o(d,I){const p=d.getObjectIndirect(Ue,0);return D({},p!==null?{options:p}:{})}i.decode=o})(e=t.WhisperContentProvider_GetWhisperContent_Params||(t.WhisperContentProvider_GetWhisperContent_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){var I;return h.bytes(i.CURRENT_VERSION.size).add(h.forObject(ie,(I=d.content)!=null?I:null))}i.measure=u;function N(d,I){var p;d.setObjectIndirect(ie,0,(p=I.content)!=null?p:null)}i.encode=N;function o(d,I){const p=d.getObjectIndirect(ie,0);return D({},p!==null?{content:p}:{})}i.decode=o})(n=t.WhisperContentProvider_GetWhisperContent_ResponseParams||(t.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size)}i.measure=u;function N(d,I){}i.encode=N;function o(d,I){return{}}i.decode=o})(s=t.WhisperContentProvider_GetTabScreenshot_Params||(t.WhisperContentProvider_GetTabScreenshot_Params={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){var I;return h.bytes(i.CURRENT_VERSION.size).add(h.forObject(me,(I=d.screenshot)!=null?I:null))}i.measure=u;function N(d,I){var p;d.setObjectIndirect(me,0,(p=I.screenshot)!=null?p:null)}i.encode=N;function o(d,I){const p=d.getObjectIndirect(me,0);return D({},p!==null?{screenshot:p}:{})}i.decode=o})(c=t.WhisperContentProvider_GetTabScreenshot_ResponseParams||(t.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class r{constructor(u){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(u.endpointState,!0),this._version=0}static create(){const[u,N]=k.createChannel(t);return[new r(u),N]}static createToBrowser(){const[u,N]=this.create();return Mojo.bindInterface(t.interfaceName,N.pipe.rawHandle),u}async getWhisperContent(u){const N={options:u};return(await this._endpoint.sendAndAwaitResponse(z.encode(0,F.None,e,N))).decode(n).content}async getTabScreenshot(){const u={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,s,u))).decode(c).screenshot}}t.Proxy=r;class f extends v{constructor(){super(t);a(this,"onDisconnect")}bind(N,o){this.addReceiver(o,async(d,I)=>{switch(d.header.ordinal){case 0:{const p=d.decode(e),S=N.getWhisperContent(p.options),E=I.createResponder(n,0,d.header.requestID),g=await S;E({content:g});break}case 1:{d.decode(s);const p=N.getTabScreenshot(),S=I.createResponder(c,1,d.header.requestID),E=await p;S({screenshot:E});break}default:d.header.expectsResponse&&I.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(N)})}createRemote(N){const[o,d]=k.createChannel(t);return this.bind(N,d),o}}t.Dispatcher=f})(he||(he={}));class $t{constructor(e){a(this,"dispatcher");this.dispatcher=new oe.Dispatcher,this.dispatcher.bind(this,e)}refreshSessionContext(e,n){B.authSessionContext={authToken:e,behavior:n},B.wantsAuthSessionContext$.set(!0)}}function Mt(t){return t==="none"||t==="sent"||t==="success"||t==="failure"}class Yt{constructor(e,n,s){a(this,"prepareState");a(this,"lastPrepareTimestamp");a(this,"conduitToken");this.prepareState=Mt(e)?e:"none",this.lastPrepareTimestamp=n-performance.timeOrigin,this.conduitToken=s}}class vt{constructor(e){a(this,"dispatcher");this.dispatcher=new Ne.Dispatcher,this.dispatcher.bind(this,e)}closeNavigationSidebar(){ot.setSidebarOpen(!1)}setChatTheme(e){const n=e==="default_"?"default":e;B.chatTheme=n,B.wantsSetChatTheme$.set(!0)}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(e){wt.set(Rt(),e)}setModel(e){B.wantsModelSlug$.set(e)}newConversation(){B.wantsNewConversation$.set(!0),B.selectedConversationId$.set(void 0)}loadConversation(e){B.wantsNewConversation$.set(!1),B.selectedConversationId$.set(e)}requestCompletion(e,n,s,c){B.requestCompletion={prompt:e,systemHints:n,modelSlug:s,n7jupdLocalSafeMode:c!=null?c:void 0},B.wantsRequestCompletion$.set(!0)}populatePrompt(e,n){B.populatePrompt={userMessage:e!=null?e:null,targetedReply:n!=null?n:null},B.wantsPopulatePrompt$.set(!0)}updateContext(e,n,s,c,r){B.context$.set({id:e,url:e,title:n,base64favicon:s,selection:c,blocked:r})}prepareConversation(e){var n;B.prepareConversationDetails=new Yt(e.prepareState,e.lastPrepareTimestampMsSince1970,(n=e.conduitToken)!=null?n:void 0)}setSuperWidgetOptions(e){const n=gt(e.selectedTab);B.wantsInitialTab$.set(n)}setAttachments(e){B.attachments=e.map(n=>{const{id:s,name:c,size:r,mimeType:f,width:i,height:u,fileTokenSize:N}=n;return D(D(D(D(D(D(D({},s&&{id:s}),c&&{name:c}),r&&{size:typeof r=="bigint"?Number(r):r}),f&&{mime_type:f}),i&&{width:i}),u&&{height:u}),N&&{file_token_size:N})})}attachUserFile(e,n,s){B.attachUserFileRequest={name:e,bytes:n,mimeType:s},B.wantsAttachUserFile$.set(!0)}setWhisperContent(e){B.whisperContent=e}setTabContext(e){B.tabContext=e}setPromptOrigin(e){B.promptOrigin=e}navigate(e){lt(e)}populateNavlinks(e,n){const s=JSON.parse(n);bt.getState().updateFromEvent(e,s)}setAgentSafeMode(e){Nt(e)}setAgentSafeModeHasSeenNux(e){ft(e)}handleAgentRequest(e){B.agentRequest=e,B.wantsHandleAgentRequest$.set(!0)}showNavigationSidebarAsOverlay(){}}class Zt{constructor(e){a(this,"proxy");this.proxy=e,yt(Rt()).subscribe((s,c)=>{s.isSlideoverSidebarOpen&&!c.isSlideoverSidebarOpen&&this.setSidebarVisibility(!1)}),this.proxy.getSidebarVisibility().then(async s=>{s&&(await Ut(()=>!zt()),ot.setSlideoverSidebarOpen(!1))})}setSidebarVisibility(e){this.proxy.setSidebarVisibility(e)}}class je{}a(je,"interfaceName","owl.mojom.ChatGPTFrontendHost"),a(je,"interfaceVersion",0);(t=>{let e;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){S.setRemote(0,E.frontend)}o.encode=I;function p(S,E){return{frontend:y(S.getRemote(Oe,0))}}o.decode=p})(e=t.ChatGPTFrontendHost_SetFrontend_Params||(t.ChatGPTFrontendHost_SetFrontend_Params={}));let n;(o=>{o.VERSION_INFO=[{version:0,size:8}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size)}o.measure=d;function I(S,E){}o.encode=I;function p(S,E){return{}}o.decode=p})(n=t.ChatGPTFrontendHost_GetAccountID_Params||(t.ChatGPTFrontendHost_GetAccountID_Params={}));let s;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){var E;return h.bytes(o.CURRENT_VERSION.size).add(h.forString((E=S.id)!=null?E:null))}o.measure=d;function I(S,E){var g;S.setString(0,(g=E.id)!=null?g:null)}o.encode=I;function p(S,E){const g=S.getString(0);return D({},g!==null?{id:g}:{})}o.decode=p})(s=t.ChatGPTFrontendHost_GetAccountID_ResponseParams||(t.ChatGPTFrontendHost_GetAccountID_ResponseParams={}));let c;(o=>{o.VERSION_INFO=[{version:0,size:24}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){var E;return h.bytes(o.CURRENT_VERSION.size).add(h.forString(S.name)).add(h.forString((E=S.payload)!=null?E:null))}o.measure=d;function I(S,E){var g;S.setString(0,E.name),S.setString(8,(g=E.payload)!=null?g:null)}o.encode=I;function p(S,E){const g=S.getString(8);return D({name:y(S.getString(0))},g!==null?{payload:g}:{})}o.decode=p})(c=t.ChatGPTFrontendHost_SendMessage_Params||(t.ChatGPTFrontendHost_SendMessage_Params={}));let r;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){var E;return h.bytes(o.CURRENT_VERSION.size).add(h.forString((E=S.reply)!=null?E:null))}o.measure=d;function I(S,E){var g;S.setString(0,(g=E.reply)!=null?g:null)}o.encode=I;function p(S,E){const g=S.getString(0);return D({},g!==null?{reply:g}:{})}o.decode=p})(r=t.ChatGPTFrontendHost_SendMessage_ResponseParams||(t.ChatGPTFrontendHost_SendMessage_ResponseParams={}));let f;(o=>{o.VERSION_INFO=[{version:0,size:16}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size).add(h.forString(S.serverConversationId))}o.measure=d;function I(S,E){S.setString(0,E.serverConversationId)}o.encode=I;function p(S,E){return{serverConversationId:y(S.getString(0))}}o.decode=p})(f=t.ChatGPTFrontendHost_ReceivedFirstToken_Params||(t.ChatGPTFrontendHost_ReceivedFirstToken_Params={}));let i;(o=>{o.VERSION_INFO=[{version:0,size:24}],o.CURRENT_VERSION=o.VERSION_INFO[o.VERSION_INFO.length-1];function d(S){return h.bytes(o.CURRENT_VERSION.size).add(h.forString(S.interfaceName))}o.measure=d;function I(S,E){S.setString(0,E.interfaceName),S.setHandle(8,E.pipe)}o.encode=I;function p(S,E){return{interfaceName:y(S.getString(0)),pipe:y(S.getMessagePipeHandle(8))}}o.decode=p})(i=t.ChatGPTFrontendHost_BindReceiver_Params||(t.ChatGPTFrontendHost_BindReceiver_Params={}));class u{constructor(d){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(d.endpointState,!0),this._version=0}static create(){const[d,I]=k.createChannel(t);return[new u(d),I]}static createToBrowser(){const[d,I]=this.create();return Mojo.bindInterface(t.interfaceName,I.pipe.rawHandle),d}setFrontend(d){const I={frontend:d};this._endpoint.send(z.encode(0,F.None,e,I))}async getAccountID(){const d={};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,d))).decode(s).id}async sendMessage(d,I){const p={name:d,payload:I};return(await this._endpoint.sendAndAwaitResponse(z.encode(2,F.None,c,p))).decode(r).reply}receivedFirstToken(d){const I={serverConversationId:d};this._endpoint.send(z.encode(3,F.None,f,I))}bindReceiver(d,I){const p={interfaceName:d,pipe:I};this._endpoint.send(z.encode(4,F.None,i,p))}}t.Proxy=u;class N extends v{constructor(){super(t);a(this,"onDisconnect")}bind(I,p){this.addReceiver(p,async(S,E)=>{switch(S.header.ordinal){case 0:{const g=S.decode(e);I.setFrontend(g.frontend);break}case 1:{S.decode(n);const g=I.getAccountID(),_=E.createResponder(s,1,S.header.requestID),T=await g;_({id:T});break}case 2:{const g=S.decode(c),_=I.sendMessage(g.name,g.payload),T=E.createResponder(r,2,S.header.requestID),l=await _;T({reply:l});break}case 3:{const g=S.decode(f);I.receivedFirstToken(g.serverConversationId);break}case 4:{const g=S.decode(i);I.bindReceiver(g.interfaceName,g.pipe);break}default:S.header.expectsResponse&&E.sendUnimplementedResponse(S.header.requestID,S.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(I)})}createRemote(I){const[p,S]=k.createChannel(t);return this.bind(I,S),p}}t.Dispatcher=N})(je||(je={}));class Oe{}a(Oe,"interfaceName","owl.mojom.ChatGPTFrontend"),a(Oe,"interfaceVersion",0);(t=>{let e;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forString(d.message))}i.measure=u;function N(d,I){d.setString(0,I.message)}i.encode=N;function o(d,I){return{message:y(d.getString(0))}}i.decode=o})(e=t.ChatGPTFrontend_LogConsoleMessage_Params||(t.ChatGPTFrontend_LogConsoleMessage_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){var I;return h.bytes(i.CURRENT_VERSION.size).add(h.forString(d.name)).add(h.forString((I=d.payload)!=null?I:null))}i.measure=u;function N(d,I){var p;d.setString(0,I.name),d.setString(8,(p=I.payload)!=null?p:null)}i.encode=N;function o(d,I){const p=d.getString(8);return D({name:y(d.getString(0))},p!==null?{payload:p}:{})}i.decode=o})(n=t.ChatGPTFrontend_SendMessage_Params||(t.ChatGPTFrontend_SendMessage_Params={}));let s;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){var I;return h.bytes(i.CURRENT_VERSION.size).add(h.forString((I=d.reply)!=null?I:null))}i.measure=u;function N(d,I){var p;d.setString(0,(p=I.reply)!=null?p:null)}i.encode=N;function o(d,I){const p=d.getString(0);return D({},p!==null?{reply:p}:{})}i.decode=o})(s=t.ChatGPTFrontend_SendMessage_ResponseParams||(t.ChatGPTFrontend_SendMessage_ResponseParams={}));let c;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function u(d){return h.bytes(i.CURRENT_VERSION.size).add(h.forString(d.interfaceName))}i.measure=u;function N(d,I){d.setString(0,I.interfaceName),d.setHandle(8,I.pipe)}i.encode=N;function o(d,I){return{interfaceName:y(d.getString(0)),pipe:y(d.getMessagePipeHandle(8))}}i.decode=o})(c=t.ChatGPTFrontend_BindReceiver_Params||(t.ChatGPTFrontend_BindReceiver_Params={}));class r{constructor(u){a(this,"_endpoint");a(this,"_version");this._endpoint=new Y(u.endpointState,!0),this._version=0}static create(){const[u,N]=k.createChannel(t);return[new r(u),N]}static createToBrowser(){const[u,N]=this.create();return Mojo.bindInterface(t.interfaceName,N.pipe.rawHandle),u}logConsoleMessage(u){const N={message:u};this._endpoint.send(z.encode(0,F.None,e,N))}async sendMessage(u,N){const o={name:u,payload:N};return(await this._endpoint.sendAndAwaitResponse(z.encode(1,F.None,n,o))).decode(s).reply}bindReceiver(u,N){const o={interfaceName:u,pipe:N};this._endpoint.send(z.encode(2,F.None,c,o))}}t.Proxy=r;class f extends v{constructor(){super(t);a(this,"onDisconnect")}bind(N,o){this.addReceiver(o,async(d,I)=>{switch(d.header.ordinal){case 0:{const p=d.decode(e);N.logConsoleMessage(p.message);break}case 1:{const p=d.decode(n),S=N.sendMessage(p.name,p.payload),E=I.createResponder(s,1,d.header.requestID),g=await S;E({reply:g});break}case 2:{const p=d.decode(c);N.bindReceiver(p.interfaceName,p.pipe);break}default:d.header.expectsResponse&&I.sendUnimplementedResponse(d.header.requestID,d.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(N)})}createRemote(N){const[o,d]=k.createChannel(t);return this.bind(N,d),o}}t.Dispatcher=f})(Oe||(Oe={}));const Jt=6e4;class Kt{constructor(e,n){a(this,"host");a(this,"logger");a(this,"lastMissingAuthTime",0);this.host=e,this.logger=n}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const e=Date.now();if(e-this.lastMissingAuthTime>Jt){this.lastMissingAuthTime=e;const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("onMissingSessionAuth.invoked"),n.handleMissingSessionAuth()}}recordAvailableSessionAuth(e){const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("recordAvailableSessionAuth.invoked"),n.recordAvailableSessionAuth(e)}onAcceptedWorkspaceInvite(e){const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("onAcceptedWorkspaceInvite.invoked"),n.handleAcceptedWorkspaceInvite(e)}onSwitchAccount(e){const[n,s]=se.Proxy.create();this.bindReceiver(s),this.logger.notice("onSwitchAccount.invoked"),n.handleSwitchAccount(e)}tryOpenAgentViewer(e){const[n,s]=Q.Proxy.create();return this.bindReceiver(s),n.tryOpenAgentViewer(e)}agentConversationStopped(e,n=!1){const[s,c]=Q.Proxy.create();this.bindReceiver(c),s.agentConversationStopped(e,n)}userSentMessageInAgentConversation(e,n,s,c,r){const[f,i]=Q.Proxy.create();this.bindReceiver(i),f.userSentMessageInAgentConversation(e,n,s,c,r)}userStoppedAgentConversation(e){const[n,s]=Q.Proxy.create();this.bindReceiver(s),n.userStoppedAgentConversation(e)}openAgentTabs(e,n){const[s,c]=Q.Proxy.create();this.bindReceiver(c),s.openAgentTabs(e,n)}getClientID(){const[e,n]=Q.Proxy.create();return this.bindReceiver(n),e.getClientID()}getClientCapabilityVersion(){const[e,n]=Q.Proxy.create();return this.bindReceiver(n),e.getClientCapabilityVersion()}getAgentStatus(e){const[n,s]=Q.Proxy.create();return this.bindReceiver(s),n.getAgentStatus(e)}becomeMainPage(){const[e,n]=de.Proxy.create();this.bindReceiver(n),e.becomeMainPage()}openInNewTab(){const[e,n]=de.Proxy.create();this.bindReceiver(n),e.openInNewTab()}updateAgentSafeMode(e){const[n,s]=ue.Proxy.create();this.bindReceiver(s),n.updateAgentSafeMode(e)}updateAgentSafeModeHasSeenNux(e){const[n,s]=ue.Proxy.create();this.bindReceiver(s),n.updateAgentSafeModeHasSeenNux(e)}async requestAgentSafeModeState(){const[e,n]=ue.Proxy.create();this.bindReceiver(n);try{return await e.getAgentSafeModeState()}catch(s){this.logger.info("requestAgentSafeModeState.failed");return}}closeSideChat(){const[e,n]=de.Proxy.create();this.bindReceiver(n),e.closeSidebar()}async getWhisperContent(){const[e,n]=he.Proxy.create();return this.bindReceiver(n),await e.getWhisperContent({})}async getTabScreenshot(){const[e,n]=he.Proxy.create();return this.bindReceiver(n),await e.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(e,n){const[s,c]=Ie.Proxy.create();return this.bindReceiver(c),await s.callLocalTool(e,n)}bindReceiver(e){this.host.bindReceiver(e.interfaceType.interfaceName,e.pipe)}async getToolNames(){const[e,n]=Ie.Proxy.create();return this.bindReceiver(n),await e.getToolNames()}openSettings(e){const[n,s]=De.Proxy.create();this.bindReceiver(s),n.openSettings(e)}enqueueConversationArchive(e){const[n,s]=Re.Proxy.create();this.bindReceiver(s),n.enqueueConversationArchive(e)}cancelConversationArchive(e){const[n,s]=Re.Proxy.create();this.bindReceiver(s),n.cancelConversationArchive(e)}}class At{constructor(e){a(this,"proxy");this.proxy=e}handleLink(e,n){this.proxy.handleLink(e,n)}}class Qt{constructor(e){a(this,"proxy");this.proxy=e}triggerProductEvent(e){this.proxy.triggerProductEvent(e)}}class Xt{constructor(){a(this,"dispatcher");a(this,"host");a(this,"logger");a(this,"conversationControllers",[]);a(this,"authStateController",[]);a(this,"navigationSidebarController");this.logger=Ft.createLogger("web-bridge-host","info","http"),this.dispatcher=new Oe.Dispatcher;const e=je.Proxy.createToBrowser();this.host=new Kt(e,this.logger),e.setFrontend(this.dispatcher.createRemote(this));const[n,s]=Te.Proxy.create();this.host.bindReceiver(s),this.navigationSidebarController=new Zt(n),this.requestInitialAgentSafeModeState()}get linkHandler(){const[e,n]=xe.Proxy.create();return this.host.bindReceiver(n),new At(e)}get productEventHandler(){const[e,n]=ke.Proxy.create();return this.host.bindReceiver(n),new Qt(e)}logConsoleMessage(e){this.logger.info(e)}sendMessage(e,n){return Promise.resolve(null)}bindReceiver(e,n){e===Ne.interfaceName?this.conversationControllers.push(new vt(new Me(Ne,n))):e===oe.interfaceName&&this.authStateController.push(new $t(new Me(oe,n)))}async requestInitialAgentSafeModeState(){try{const e=await this.host.requestAgentSafeModeState();if(!e)return;Nt(e.preferredMode),ft(e.hasSeenNux)}catch(e){this.logger.info("requestInitialAgentSafeModeState.failed")}}}let M;async function Ct(){M=new Xt;const t=await M.host.getAccountID();M.logger.info("Account ID: ".concat(t))}function Pt(){return M==null?void 0:M.host}function en(){return M==null?void 0:M.linkHandler}function tn(){return M==null?void 0:M.productEventHandler}async function nn(){return M?(M.logger.debug("Getting whisper content"),await M.host.getWhisperContent()):null}async function sn(){return M?await M.host.getTabScreenshot():null}function cn(){if(!M)return null;M.host.closeSideChat()}export{cn as closeSideChat,Pt as getHost,en as getLinkHandler,tn as getProductEventHandler,nn as getSidebarWhisperContent,sn as getTabScreenshot,Ct as initHostConnection};
//# sourceMappingURL=ippis36bhy56w9ig.js.map

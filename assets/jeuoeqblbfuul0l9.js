import{q as _,A as h,m as l,b as E,r as d}from"./i8clt0mfz495j7ii.js";import{R as w,j as y,f0 as u,aL as p,f1 as m}from"./ghewn7l2ynbm32fm.js";const A=_({queryKey:["mfaToken"],queryFn:async()=>{try{const t=await w.safePost("/accounts/mfa/user/request_mfa_token_in_house");if(!t||!t.state_token)throw new Error("Failed to fetch MFA token");return t.state_token}catch(t){if(t instanceof y){const e=t.detail;if((e==null?void 0:e.code)==="mfa_email_required"){window.location.href=u(m.ENABLE_MFA_EMAIL_REQUIRED,"/#settings/".concat(p.Account));return}}window.location.href=u(m.ENABLE_MFA_ERROR,"/#settings/".concat(p.Security))}}}),R=h(function(){var i,c,f;const[e]=l(),n=(i=e.get("factor"))!=null?i:"totp",s=(c=e.get("app"))!=null?c:"ChatGPT",o=(f=e.get("redirect_path"))!=null?f:void 0,{data:a}=E(A);return d.useEffect(()=>{if(!a)return;const r=new URLSearchParams({origin_app_name:s,mfa_token:a});o&&r.set("redirect_path",o),n==="passkey"?window.location.href="https://auth.openai.com/passkey_enroll?".concat(r.toString()):window.location.href="https://auth.openai.com/totp_enroll?".concat(r.toString())},[a,s,o,n]),null});export{R as default};
//# sourceMappingURL=jeuoeqblbfuul0l9.js.map

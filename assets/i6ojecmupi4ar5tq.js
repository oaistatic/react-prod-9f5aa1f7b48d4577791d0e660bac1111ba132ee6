const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nrby27vmpob112wj.js","assets/i8clt0mfz495j7ii.js","assets/j0yo6uv6652vva62.js","assets/ghewn7l2ynbm32fm.js","assets/root-c4psboex.css","assets/conversation-small-lq38g8zw.css","assets/fobvway9e4v0s6vc.js"])))=>i.map(i=>d[i]);
var V=Object.defineProperty,G=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var A=(e,s,n)=>s in e?V(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,d=(e,s)=>{for(var n in s||(s={}))X.call(s,n)&&A(e,n,s[n]);if(L)for(var n of L(s))z.call(s,n)&&A(e,n,s[n]);return e},k=(e,s)=>G(e,W(s));import{R as B,e as J,b as Q,r as i,f as $,j as t,M as g,_ as E}from"./i8clt0mfz495j7ii.js";import{u as Y,B as Z,e as ee,J as te,C as se,M as F,aM as ne,aV as ae,o as P,$ as U,d as oe,L as I,R as re}from"./ghewn7l2ynbm32fm.js";import{bH as ie,bI as ce,bJ as le,bK as ue,bL as de,aI as me,bM as O}from"./j0yo6uv6652vva62.js";const pe=P(()=>E(()=>import("./nrby27vmpob112wj.js").then(e=>e._),__vite__mapDeps([0,1])),{loading:e=>I(e)}),ge=P(()=>E(()=>import("./j0yo6uv6652vva62.js").then(e=>e.yq),__vite__mapDeps([2,1,3,4,5])),{loading:e=>I(e)}),he=P(()=>E(()=>import("./fobvway9e4v0s6vc.js").then(e=>e._),__vite__mapDeps([6,1])),{loading:e=>I(e)}),Ce="https://help.openai.com/en/articles/11481834",Me=({onClose:e})=>{var w;const[h,M]=B.useState(2500),[c,l]=B.useState(!1),{prepareCheckoutSession:p,navigateToCheckout:C}=ie(),y=Y(),o=Z(),{country:x}=ce(),b=le({country:x,currentAccount:o,location:"CreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),a=(w=o==null?void 0:o.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?w:"USD",{data:u,isLoading:_,error:v}=ue({ctx:y,currency:a});let f=null;!_&&!v&&u&&(f=u.currencyConfig.amount_per_credit);const S=ee(),N=J(),{data:D}=Q({queryKey:["creditPurchaseRateCard"],queryFn:()=>re.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),q=i.useCallback(async()=>{if(!c){l(!0);try{const r=o==null?void 0:o.id;if(!r)throw new Error("No account_id found");const K=await p({credit_purchase_data:{quantity:h,unit:"credit",account_id:r},billing_details:b});await C(K)}catch(r){te.addError(r),S.warning(N.formatMessage(m.paymentErrorWarning),{hasCloseButton:!0})}finally{l(!1)}}},[b,N,c,C,h,p,S,o]),H=de(h,300),R=r=>!D||!D[r].price?"N/A":Math.round(H/parseFloat(D[r].price)).toLocaleString();if(b)return t.jsxs(se,{isOpen:!0,onClose:e,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[t.jsx(F.Header,{title:t.jsx(g,d({},m.title))}),t.jsxs("div",{className:"flex flex-col px-6",children:[t.jsx("div",{className:"text-token-text-secondary text-sm",children:t.jsx(g,k(d({},m.description),{values:{link:r=>t.jsx(ne,{href:Ce,target:"_blank",children:r})}}))}),f&&t.jsx("div",{className:"mt-6",children:t.jsx(xe,{minCredits:500,maxCredits:1e5,increment:250,amountPerCredit:f,currency:a,numCredits:h,setNumCredits:M})}),D&&t.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[t.jsx(pe,{}),t.jsx(g,k(d({},m.amountToAddDescription),{values:{deepResearchCount:R("deep_research_completion"),gpt5proChatCount:R("chat_completion_5_pro"),imagegenCount:R("chat_tool_imagegen")}}))]})]}),t.jsx(F.Actions,{className:"sm:p-2 md:p-6",secondaryButton:t.jsx(U,{disabled:c,onClick:e,color:"secondary",children:t.jsx(g,d({},m.cancel))}),primaryButton:t.jsx(U,{loading:c,onClick:()=>q(),color:"primary",children:t.jsx(g,d({},m.next))})})]})};function xe({numCredits:e,minCredits:s,maxCredits:n,increment:j,amountPerCredit:T,currency:h,setNumCredits:M}){const c=i.useRef(null);i.useEffect(()=>{var a;(a=c.current)==null||a.focus()},[c]);const l=i.useRef(null),p=i.useRef(0),C=i.useCallback(a=>{M(u=>me(u+a,s,n))},[n,s,M]),y=i.useCallback(a=>{const f=300-a*50;return f>25?f:25},[]),o=i.useCallback(a=>{C(a),p.current=0;const u=()=>{p.current+=1,C(a);const _=y(p.current);l.current=setTimeout(u,_)};l.current=setTimeout(u,y(p.current))},[C,y]),x=i.useCallback(()=>{l.current&&(clearTimeout(l.current),l.current=null)},[]),b=Math.round(e*T*100)/100;return t.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[t.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:t.jsx(g,d({},m.amountToAdd))}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative w-full",children:[t.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:t.jsx(g,k(d({},m.numCredits),{values:{numCredits:e}}))}),t.jsx("input",{ref:c,name:"Credits",value:b.toLocaleString("en-US",{style:"currency",currency:h,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(O,{disabled:e<=s,onMouseDown:()=>o(-j),onMouseUp:x,onMouseLeave:x,children:t.jsx(he,{className:oe("icon",e<=s&&"text-token-text-tertiary")})}),t.jsx(O,{disabled:e>=n,onMouseDown:()=>o(j),onMouseUp:x,onMouseLeave:x,children:t.jsx(ge,{className:"icon"})})]})]})]})}const m=$({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpt5proChatCount} GPT-5 pro messages, or {imagegenCount} imagegen messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{Me as CreditPurchaseModal,xe as CreditSelectorButtons};
//# sourceMappingURL=i6ojecmupi4ar5tq.js.map

var O=Object.defineProperty;var f=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var v=(t,n,u)=>n in t?O(t,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):t[n]=u,C=(t,n)=>{for(var u in n||(n={}))A.call(n,u)&&v(t,u,n[u]);if(f)for(var u of f(n))V.call(n,u)&&v(t,u,n[u]);return t};import{mZ as I}from"./ghewn7l2ynbm32fm.js";import{v as _,i as R}from"./j0yo6uv6652vva62.js";import{o as z}from"./gy1lpvuoewmzh42c.js";import{l as Y}from"./hxdh3tr5l8kut4ed.js";const pt=()=>t=>{_(t,n=>{var s,p;if(!R(n)||n.name!==I)return;const u=(s=n.data)!=null?s:n.data={},r=(p=n.attributes)==null?void 0:p.index;if(r==null)return;u.hName=I,u.hProperties={index:r};let a="inline";switch(n.type){case"textDirective":a="inline";break;case"leafDirective":a="block";break;case"containerDirective":a="container";break}u.hProperties.displayLayout=a})};function Z(){return{enter:{mathFlow:t,mathFlowFenceMeta:n,mathText:s},exit:{mathFlow:a,mathFlowFence:r,mathFlowFenceMeta:u,mathFlowValue:g,mathText:p,mathTextData:g}};function t(h){const x={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[x]}},h)}function n(){this.buffer()}function u(){const h=this.resume(),x=this.stack[this.stack.length-1];z(x.type==="math"),x.meta=h}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function a(h){const x=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c=this.stack[this.stack.length-1];z(c.type==="math"),this.exit(h),c.value=x;const F=c.data.hChildren[0];z(F.type==="element"),z(F.tagName==="code"),F.children.push({type:"text",value:x}),this.data.mathFlowInside=void 0}function s(h){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},h),this.buffer()}function p(h){const x=this.resume(),c=this.stack[this.stack.length-1];z(c.type==="inlineMath"),this.exit(h),c.value=x,c.data.hChildren.push({type:"text",value:x})}function g(h){this.config.enter.data.call(this,h),this.config.exit.data.call(this,h)}}function j(t){let n={}.singleDollarTextMath;return n==null&&(n=!0),r.peek=a,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:"\n",inConstruct:"mathFlowMeta"},{character:"$",after:n?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:u,inlineMath:r}};function u(s,p,g,h){const x=s.value||"",c=g.createTracker(h),F="$".repeat(Math.max(Y(x,"$")+1,2)),o=g.enter("mathFlow");let i=c.move(F);if(s.meta){const S=g.enter("mathFlowMeta");i+=c.move(g.safe(s.meta,C({after:"\n",before:i,encode:["$"]},c.current()))),S()}return i+=c.move("\n"),x&&(i+=c.move(x+"\n")),i+=c.move(F),o(),i}function r(s,p,g){let h=s.value||"",x=1;for(n||x++;new RegExp("(^|[^$])"+"\\$".repeat(x)+"([^$]|$)").test(h);)x++;const c="$".repeat(x);/[^ \r\n]/.test(h)&&(/^[ \r\n]/.test(h)&&/[ \r\n]$/.test(h)||/^\$|\$$/.test(h))&&(h=" "+h+" ");let F=-1;for(;++F<g.unsafe.length;){const o=g.unsafe[F];if(!o.atBreak)continue;const i=g.compilePattern(o);let S;for(;S=i.exec(h);){let y=S.index;h.codePointAt(y)===10&&h.codePointAt(y-1)===13&&y--,h=h.slice(0,y)+" "+h.slice(S.index+1)}}return c+h+c}function a(){return"$"}}const l={eof:null,space:32,dollarSign:36,leftParenthesis:40,rightParenthesis:41,leftSquareBracket:91,backslash:92,rightSquareBracket:93};function k(t){return t!==null&&t<-2}function N(t){return t===-2||t===-1||t===32}function E(t,n,u,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return p;function p(h){return N(h)?(t.enter(u),g(h)):n(h)}function g(h){return N(h)&&s++<a?(t.consume(h),g):(t.exit(u),n(h))}}const b={contentTypeString:"string",tabSize:4},m={whitespace:"whitespace",lineEnding:"lineEnding",linePrefix:"linePrefix",characterEscape:"characterEscape",chunkString:"chunkString"};const G={tokenize:J,concrete:!0},H={tokenize:K,partial:!0};function J(t,n,u){const r=this,a=this.events[this.events.length-1],s=a&&a[1].type===m.linePrefix?a[2].sliceSerialize(a[1],!0).length:0,p=[];return g;function g(e){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),h(e)}function h(e){return e===l.backslash||e===l.leftSquareBracket&&p[0]===l.backslash?(t.consume(e),p.push(e),h):(t.exit("mathFlowFenceSequence"),p.length<2?u(e):E(t,x,m.whitespace)(e))}function x(e){return e===l.eof||k(e)?F(e):(t.enter("mathFlowFenceMeta"),t.enter(m.chunkString,{contentType:b.contentTypeString}),c(e))}function c(e){return e===l.eof||k(e)?(t.exit(m.chunkString),t.exit("mathFlowFenceMeta"),F(e)):e===l.rightSquareBracket?u(e):(t.consume(e),c)}function F(e){return t.exit("mathFlowFence"),r.interrupt?n(e):o(e)}function o(e){return e===l.eof?S(e):k(e)?t.attempt(H,t.attempt({tokenize:y,partial:!0},S,s?E(t,o,m.linePrefix,s+1):o),S)(e):(t.enter("mathFlowValue"),i(e))}function i(e){return e===l.eof||k(e)?(t.exit("mathFlowValue"),o(e)):(t.consume(e),i)}function S(e){return t.exit("mathFlow"),n(e)}function y(e,P,M){const T=[];return E(e,$,m.linePrefix,b.tabSize);function $(w){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),q(w)}function q(w){return w===l.backslash&&T.length===0||w===l.rightSquareBracket&&T[0]===l.backslash?(e.consume(w),T.push(w),q):T<p?M(w):(e.exit("mathFlowFenceSequence"),E(e,D,m.whitespace)(w))}function D(w){return w===l.eof||k(w)?(e.exit("mathFlowFence"),P(w)):M(w)}}}function K(t,n,u){const r=this;return a;function a(p){return t.enter(m.lineEnding),t.consume(p),t.exit(m.lineEnding),s}function s(p){return r.parser.lazy[r.now().line]?u(p):n(p)}}const Q={tokenize:W,concrete:!0},U={tokenize:X,partial:!0};function W(t,n,u){const r=this,a=r.events[r.events.length-1],s=a&&a[1].type===m.linePrefix?a[2].sliceSerialize(a[1],!0).length:0;let p=0;return g;function g(e){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),h(e)}function h(e){return e===l.dollarSign?(t.consume(e),p++,h):(t.exit("mathFlowFenceSequence"),p<2?u(e):E(t,x,m.whitespace)(e))}function x(e){return e===l.eof||k(e)?F(e):(t.enter("mathFlowFenceMeta"),t.enter(m.chunkString,{contentType:b.contentTypeString}),c(e))}function c(e){return e===l.eof||k(e)?(t.exit(m.chunkString),t.exit("mathFlowFenceMeta"),F(e)):e===l.dollarSign?u(e):(t.consume(e),c)}function F(e){return t.exit("mathFlowFence"),r.interrupt?n(e):o(e)}function o(e){return e===l.eof?S(e):k(e)?t.attempt(U,t.attempt({tokenize:y,partial:!0},S,s?E(t,o,m.linePrefix,s+1):o),S)(e):(t.enter("mathFlowValue"),i(e))}function i(e){return e===l.eof||k(e)?(t.exit("mathFlowValue"),o(e)):(t.consume(e),i)}function S(e){return t.exit("mathFlow"),n(e)}function y(e,P,M){let T=0;return E(e,$,m.linePrefix,b.tabSize);function $(w){return e.enter("mathFlowFence"),e.enter("mathFlowFenceSequence"),q(w)}function q(w){return w===l.dollarSign?(e.consume(w),T++,q):T<p?M(w):(e.exit("mathFlowFenceSequence"),E(e,D,m.whitespace)(w))}function D(w){return w===l.eof||k(w)?(e.exit("mathFlowFence"),P(w)):M(w)}}}function X(t,n,u){const r=this;return a;function a(p){return t.enter(m.lineEnding),t.consume(p),t.exit(m.lineEnding),s}function s(p){return r.parser.lazy[r.now().line]?u(p):n(p)}}function d(){return{tokenize:t,resolve:tt,previous:B};function t(n,u,r){const a=[];let s=[],p;const g=this;return h;function h(i){return B.call(g,g.previous)&&(g.previous,void 0),n.enter("mathText"),n.enter("mathTextSequence"),x(i)}function x(i){return i===l.backslash&&a.length===0||i===l.leftParenthesis&&a.length===1?(n.consume(i),a.push(i),x):a.length<2?r(i):(n.exit("mathTextSequence"),c(i))}function c(i){return i===l.eof?r(i):i===l.backslash?(p=n.enter("mathTextSequence"),s=[],o(i)):i===l.space?(n.enter("space"),n.consume(i),n.exit("space"),c):k(i)?(n.enter(m.lineEnding),n.consume(i),n.exit(m.lineEnding),c):(n.enter("mathTextData"),F(i))}function F(i){return i===l.eof||i===l.space||i===l.backslash||k(i)?(n.exit("mathTextData"),c(i)):(n.consume(i),F)}function o(i){return i===l.backslash&&s.length===0||i===l.rightParenthesis&&s.length===1?(n.consume(i),s.push(i),o):s.length===a.length?(n.exit("mathTextSequence"),n.exit("mathText"),u(i)):(p.type="mathTextData",F(i))}}}function tt(t){let n=t.length-4,u=3,r,a;if((t[u][1].type===m.lineEnding||t[u][1].type==="space")&&(t[n][1].type===m.lineEnding||t[n][1].type==="space")){for(r=u;++r<n;)if(t[r][1].type==="mathTextData"){t[n][1].type="mathTextPadding",t[u][1].type="mathTextPadding",u+=2,n-=2;break}}for(r=u-1,n++;++r<=n;)a===void 0?r!==n&&t[r][1].type!==m.lineEnding&&(a=r):(r===n||t[r][1].type===m.lineEnding)&&(t[a][1].type="mathTextData",r!==a+2&&(t[a][1].end=t[r-1][1].end,t.splice(a+2,r-a-2),n-=r-a-2,r=a+2),a=void 0);return t}function B(t){return t!==l.backslash||this.events[this.events.length-1][1].type===m.characterEscape}function nt(){return{tokenize:t,resolve:et,previous:it};function t(n,u,r){let a=0,s,p;return g;function g(o){return n.enter("mathText"),n.enter("mathTextSequence"),h(o)}function h(o){return o===l.dollarSign?(n.consume(o),a++,h):a<2?r(o):(n.exit("mathTextSequence"),x(o))}function x(o){return o===l.eof?r(o):o===l.dollarSign?(p=n.enter("mathTextSequence"),s=0,F(o)):o===l.space?(n.enter("space"),n.consume(o),n.exit("space"),x):k(o)?(n.enter(m.lineEnding),n.consume(o),n.exit(m.lineEnding),x):(n.enter("mathTextData"),c(o))}function c(o){return o===l.eof||o===l.space||o===l.dollarSign||k(o)?(n.exit("mathTextData"),x(o)):(n.consume(o),c)}function F(o){return o===l.dollarSign?(n.consume(o),s++,F):s===a?(n.exit("mathTextSequence"),n.exit("mathText"),u(o)):(p.type="mathTextData",c(o))}}}function et(t){let n=t.length-4,u=3,r,a;if((t[u][1].type===m.lineEnding||t[u][1].type==="space")&&(t[n][1].type===m.lineEnding||t[n][1].type==="space")){for(r=u;++r<n;)if(t[r][1].type==="mathTextData"){t[n][1].type="mathTextPadding",t[u][1].type="mathTextPadding",u+=2,n-=2;break}}for(r=u-1,n++;++r<=n;)a===void 0?r!==n&&t[r][1].type!==m.lineEnding&&(a=r):(r===n||t[r][1].type===m.lineEnding)&&(t[a][1].type="mathTextData",r!==a+2&&(t[a][1].end=t[r-1][1].end,t.splice(a+2,r-a-2),n-=r-a-2,r=a+2),a=void 0);return t}function it(t){return t!==l.dollarSign||this.events[this.events.length-1][1].type===m.characterEscape}function rt(){return{tokenize:t,resolve:at,previous:L};function t(n,u,r){const a=[];let s=[],p;const g=this;return h;function h(i){return L.call(g,g.previous)&&(g.previous,void 0),n.enter("mathText"),n.enter("mathTextSequence"),x(i)}function x(i){return i===l.backslash&&a.length===0||i===l.leftSquareBracket&&a.length===1?(n.consume(i),a.push(i),x):a.length<2?r(i):(n.exit("mathTextSequence"),c(i))}function c(i){return i===l.eof?r(i):i===l.backslash?(p=n.enter("mathTextSequence"),s=[],o(i)):i===l.space?(n.enter("space"),n.consume(i),n.exit("space"),c):k(i)?(n.enter(m.lineEnding),n.consume(i),n.exit(m.lineEnding),c):(n.enter("mathTextData"),F(i))}function F(i){return i===l.eof||i===l.space||i===l.backslash||k(i)?(n.exit("mathTextData"),c(i)):(n.consume(i),F)}function o(i){return i===l.backslash&&s.length===0||i===l.rightSquareBracket&&s.length===1?(n.consume(i),s.push(i),o):s.length===a.length?(n.exit("mathTextSequence"),n.exit("mathText"),u(i)):(p.type="mathTextData",F(i))}}}function at(t){let n=t.length-4,u=3,r,a;if((t[u][1].type===m.lineEnding||t[u][1].type==="space")&&(t[n][1].type===m.lineEnding||t[n][1].type==="space")){for(r=u;++r<n;)if(t[r][1].type==="mathTextData"){t[n][1].type="mathTextPadding",t[u][1].type="mathTextPadding",u+=2,n-=2;break}}for(r=u-1,n++;++r<=n;)a===void 0?r!==n&&t[r][1].type!==m.lineEnding&&(a=r):(r===n||t[r][1].type===m.lineEnding)&&(t[a][1].type="mathTextData",r!==a+2&&(t[a][1].end=t[r-1][1].end,t.splice(a+2,r-a-2),n-=r-a-2,r=a+2),a=void 0);return t}function L(t){return t!==l.backslash||this.events[this.events.length-1][1].type===m.characterEscape}function ut(){return{flow:{[l.dollarSign]:Q,[l.backslash]:G},text:{[l.dollarSign]:nt(),[l.backslash]:[d(),rt()]}}}function ct(){const t=this.data();n("micromarkExtensions",ut()),n("fromMarkdownExtensions",Z()),n("toMarkdownExtensions",j());function n(u,r){(t[u]?t[u]:t[u]=[]).push(r)}}export{pt as a,ct as r};
//# sourceMappingURL=ozby1o16tp40naiq.js.map

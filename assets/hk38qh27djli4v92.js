const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gsas8pb1acnf7jnd.js","assets/i8clt0mfz495j7ii.js"])))=>i.map(i=>d[i]);
import{R as L,e as P,r as B,j as e,M as r,_ as S}from"./i8clt0mfz495j7ii.js";import{u as D,B as v,e as E,w as b,x as _,J as I,C as T,M,aM as R,$ as N,T as A,o as U,L as F}from"./ghewn7l2ynbm32fm.js";import{bH as H,bI as z,bJ as K,bK as J,L as O}from"./j0yo6uv6652vva62.js";import{c as W}from"./g5lgy1otfli5p2x7.js";import"./ieykhlrsk25lij4e.js";import"./i03gut32e8jn5ajq.js";import"./h1em0bjkpkjv8ykw.js";import"./e26n6uhwwtwdmiki.js";import"./mjq17q47489shd3e.js";import"./hxdh3tr5l8kut4ed.js";import"./hu1bt0oauegdhua6.js";const q=U(()=>S(()=>import("./gsas8pb1acnf7jnd.js").then(a=>a._),__vite__mapDeps([0,1])),{loading:a=>F(a)}),G="https://help.openai.com/en/articles/11481834",ie=({onClose:a})=>{var j;const[o,u]=L.useState(!1),{prepareCheckoutSession:s,navigateToCheckout:m}=H(),h=D(),t=v(),{country:p}=z(),i=K({country:p,currentAccount:t,location:"CodexCreditPurchaseModal",shouldUsePaidSubscriptionBillingCurrency:!0}),d=(j=t==null?void 0:t.mustGetSubscriptionBillingCurrency("CreditPurchaseModal"))!=null?j:"USD",{data:l,isLoading:x,error:g}=J({ctx:h,currency:d});let n=null;!x&&!g&&l&&(n=l.currencyConfig.amount_per_credit);const f=E(),y=P(),k=B.useCallback(async()=>{if(!o){u(!0);try{const c=t==null?void 0:t.id;if(!c)throw new Error("No account_id found");b.setItem(_.CreditCheckoutRedirectPath,"/codex/settings/usage");const w=await s({credit_purchase_data:{quantity:1e3,unit:"credit",account_id:c},billing_details:i});await m(w)}catch(c){b.removeItem(_.CreditCheckoutRedirectPath),I.addError(c),f.warning(y.formatMessage({id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}),{hasCloseButton:!0})}finally{u(!1)}}},[i,y,o,m,s,f,t]);if(i)return e.jsxs(T,{isOpen:!0,onClose:a,type:"success",size:"custom",noPadding:!0,className:"max-w-xl p-6! pt-3!",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(M.Header,{className:"p-0! pb-4",title:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCredits",defaultMessage:"Buy more messages"})}),e.jsx("p",{className:"text-token-text-secondary text-sm",children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription",defaultMessage:"Use Codex beyond rate limits. Add credits to instantly boost your plan. <u>Learn more</u>",values:{u:c=>e.jsx(R,{href:G,openNewTab:!0,children:c})}})}),e.jsx("div",{className:"flex flex-col",children:n&&e.jsx("div",{className:"mt-6",children:e.jsx(V,{numCredits:1e3,amountPerCredit:n,currency:d})})}),e.jsx(M.Actions,{secondaryButton:e.jsx(N,{disabled:o,onClick:a,color:"secondary",children:e.jsx(r,{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"})}),primaryButton:e.jsx(N,{loading:o,onClick:()=>k(),color:"primary",children:e.jsx(r,{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"})})})]})};function V({numCredits:a,amountPerCredit:C,currency:o}){var t,p,i,d,l,x,g,n;const u=Math.round(a*C*100)/100,{data:s,isLoading:m,isError:h}=W(a);return e.jsx("div",{className:"flex w-full flex-col",children:e.jsxs("div",{className:"flex w-full items-center justify-between gap-3 rounded-lg border border-gray-200 p-4 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-col items-start gap-1",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(r,{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}",values:{numCredits:a}})}),e.jsx("span",{className:"flex items-center gap-1",children:h?null:m?e.jsx(O,{className:"h-4 w-48"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-token-text-tertiary text-xs",children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription2",defaultMessage:"{messagesLowerBound}-{messagesUpperBound} CLI or Extension messages",values:{messagesLowerBound:(p=(t=s==null?void 0:s.approx_local_messages)==null?void 0:t[0])!=null?p:0,messagesUpperBound:(d=(i=s==null?void 0:s.approx_local_messages)==null?void 0:i[1])!=null?d:0}})}),e.jsx(A,{label:e.jsxs("div",{className:"text-token-text-primary flex flex-col items-start text-xs",children:[e.jsx("p",{children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription2Tooltip1",defaultMessage:"Usage varies by type"})}),e.jsx("p",{children:e.jsx(r,{id:"wham.usageDashboard.metric.creditsAddCreditsDescription2Tooltip2",defaultMessage:"Cloud tasks: {messagesLowerBound}-{messagesUpperBound} messages",values:{messagesLowerBound:(x=(l=s==null?void 0:s.approx_cloud_messages)==null?void 0:l[0])!=null?x:0,messagesUpperBound:(n=(g=s==null?void 0:s.approx_cloud_messages)==null?void 0:g[1])!=null?n:0}})})]}),children:e.jsx(q,{className:"icon-sm text-token-text-tertiary"})})]})})]}),e.jsx("p",{className:"text-token-text-secondary font-medium",children:u.toLocaleString("en-US",{style:"currency",currency:o,maximumFractionDigits:2})})]})})}export{ie as CodexCreditPurchaseModal,V as CreditSelectorButtons};
//# sourceMappingURL=hk38qh27djli4v92.js.map
